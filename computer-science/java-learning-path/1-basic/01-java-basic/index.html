<!DOCTYPE html><html lang="ja"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#FFF"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png"><link rel="icon" type="image/ico" sizes="32x32" href="/images/favicon.ico"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="alternate" type="application/rss+xml" title="チンモクのブログ" href="https://www.chinmoku.cc/rss.xml"><link rel="alternate" type="application/atom+xml" title="チンモクのブログ" href="https://www.chinmoku.cc/atom.xml"><link rel="alternate" type="application/json" title="チンモクのブログ" href="https://www.chinmoku.cc/feed.json"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Mulish:300,300italic,400,400italic,700,700italic%7CFredericka%20the%20Great:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20JP:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20SC:300,300italic,400,400italic,700,700italic%7CInconsolata:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="/css/app.css?v=0.2.5"><meta name="keywords" content="\[java]"><link rel="canonical" href="https://www.chinmoku.cc/computer-science/java-learning-path/1-basic/01-java-basic/"><title>JAVA 基础知识大盘点 - \[计算机科学，JAVA 学习路线，基础篇] | Chinmoku = チンモクのブログ = 露の世は　露の世ながら　さりながら</title><meta name="generator" content="Hexo 5.4.0"></head><body itemscope itemtype="http://schema.org/WebPage"><div id="loading"><div class="cat"><div class="body"></div><div class="head"><div class="face"></div></div><div class="foot"><div class="tummy-end"></div><div class="bottom"></div><div class="legs left"></div><div class="legs right"></div></div><div class="paw"><div class="hands left"></div><div class="hands right"></div></div></div></div><div id="container"><header id="header" itemscope itemtype="http://schema.org/WPHeader"><div class="inner"><div id="brand"><div class="pjax"><h1 itemprop="name headline">JAVA 基础知识大盘点</h1><div class="meta"><span class="item" title="作成日：2021-08-24 19:37:53"><span class="icon"><i class="ic i-calendar"></i> </span><span class="text">投稿日</span> <time itemprop="dateCreated datePublished" datetime="2021-08-24T19:37:53+08:00">2021-08-24</time> </span><span class="item" title="単語数"><span class="icon"><i class="ic i-pen"></i> </span><span class="text">単語数</span> <span>57k</span> <span class="text">単語</span> </span><span class="item" title="読書の時間"><span class="icon"><i class="ic i-clock"></i> </span><span class="text">読書の時間</span> <span>52 分</span></span></div></div></div><nav id="nav"><div class="inner"><div class="toggle"><div class="lines" aria-label="ナビゲーションバーの切り替え"><span class="line"></span> <span class="line"></span> <span class="line"></span></div></div><ul class="menu"><li class="item title"><a href="/" rel="start">Chinmoku</a></li></ul><ul class="right"><li class="item theme"><i class="ic i-sun"></i></li><li class="item search"><i class="ic i-search"></i></li></ul></div></nav></div><div id="imgs" class="pjax"><ul><li class="item" data-background-image="https://reference-1301046789.cos.ap-nanjing.myqcloud.com/blog-img/add64da9e69b442a8c87de047c071991.jpg"></li><li class="item" data-background-image="https://reference-1301046789.cos.ap-nanjing.myqcloud.com/blog-img/5a37d563594049d29c9c0fcfa3f25c09.jpg"></li><li class="item" data-background-image="https://reference-1301046789.cos.ap-nanjing.myqcloud.com/blog-img/cac58136ac7e4a4c8b1890f1d9d6030c.jpg"></li><li class="item" data-background-image="https://reference-1301046789.cos.ap-nanjing.myqcloud.com/blog-img/6e2816cb882611ebb6edd017c2d2eca2.jpg"></li><li class="item" data-background-image="https://reference-1301046789.cos.ap-nanjing.myqcloud.com/blog-img/7a1f3542c3874ef4930bca15636e57b4.jpg"></li><li class="item" data-background-image="https://reference-1301046789.cos.ap-nanjing.myqcloud.com/blog-img/942fa2711d9b436299a229a3eb9b3924.jpg"></li></ul></div></header><div id="waves"><svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"/></defs><g class="parallax"><use xlink:href="#gentle-wave" x="48" y="0"/><use xlink:href="#gentle-wave" x="48" y="3"/><use xlink:href="#gentle-wave" x="48" y="5"/><use xlink:href="#gentle-wave" x="48" y="7"/></g></svg></div><main><div class="inner"><div id="main" class="pjax"><div class="article wrap"><div class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList"><i class="ic i-home"></i> <span><a href="/">ホーム</a></span><i class="ic i-angle-right"></i> <span class="current" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6-JAVA%E5%AD%A6%E4%B9%A0%E8%B7%AF%E7%BA%BF-%E5%9F%BA%E7%A1%80%E7%AF%87/" itemprop="item" rel="index" title="カテゴリ \[计算机科学，JAVA 学习路线，基础篇]"><span itemprop="name">\[计算机科学，JAVA 学习路线，基础篇]</span></a><meta itemprop="position" content="1"></span></div><article itemscope itemtype="http://schema.org/Article" class="post block" lang="ja"><link itemprop="mainEntityOfPage" href="https://www.chinmoku.cc/computer-science/java-learning-path/1-basic/01-java-basic/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpg"><meta itemprop="name" content="チンモク"><meta itemprop="description" content="露の世は　露の世ながら　さりながら, 本站主要以 Java 开发总结文章为主，也会向技术周边进行适当的扩展。此外，偶尔会更新部分其他学习或感兴趣的内容，如语言学习、文本翻译、文艺创作等。"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="チンモクのブログ"></span><div class="body md" itemprop="articleBody"><div class="note info"><p>注意，本文并非是面向初学者的学习教程，而是面向拥有一定基础（入门），或初级、中级 JAVA 开发人员，而整理出的一些 JAVA 基础相关的 [关键性知识]{.label .primary}，因此，部分知识点只会提出要点梗概，而不会关注具体代码示例和实现。本文的主要目的在于帮助已掌握相关知识的开发者们快速地进行知识回顾。</p></div><h2 id="面向对象"><a class="anchor" href="#面向对象">#</a> 面向对象</h2><p>Java 技术体系包括：</p><ol><li><p>Java 程序设计语言</p></li><li><p>各种硬件平台上的 Java 虚拟机实现</p></li><li><p>Class 文件格式</p></li><li><p>Java 类库 API</p></li><li><p>来自商业机构和开源社区的第三方 Java 类库</p></li></ol><h3 id="什么是面向对象"><a class="anchor" href="#什么是面向对象">#</a> 什么是面向对象？</h3><h4 id="面向过程"><a class="anchor" href="#面向过程">#</a> 面向过程</h4><p>面向过程 (Procedure Oriented) 是一种以过程为中心的编程思想。这些都是以什么正在发生为主要目标进行编程，不同于面向对象的是谁在受影响。与面向对象相对应的，即存在于早期版本 C 语言中的面向过程。面向过程开发的过程，有点类似于树状调用函数，树状的根节点主程序对函数进行层层调用。</p><p><strong>面向过程的问题</strong></p><ul><li><p>复用性不佳：</p><p>按过程来的话，不同过程中相似的代码也不好进行复用，前半段的过程中用到的逻辑，在后半段再次使用的话需要再写一遍，如果是相同的逻辑，修改也会出现很多复杂问题。</p></li><li><p>扩展性不易</p><p>相同的逻辑，如果要有两份相似逻辑，那在面向过程中，就很多时候需要写两份。</p></li><li><p>耦合度高</p><p>面向过程很难将内容剥离开。</p></li></ul><h4 id="面向对象-2"><a class="anchor" href="#面向对象-2">#</a> 面向对象</h4><p>面向对象 (Object Oriented，OO) 是一种对现实世界理解和抽象的方法，是计算机编程技术发展到一定阶段后的产物。面向对象的编程方式使得每一个类都只做一件事。</p><h4 id="面向对象的三大基本特征"><a class="anchor" href="#面向对象的三大基本特征">#</a> 面向对象的三大基本特征</h4><ul><li><p><strong>封装</strong></p><p>封装，也就是把客观事物封装成抽象的类，并且类可以把自己的数据和方法只让可信的类或者对象操作，对不可信的进行信息隐藏。</p></li><li><p><strong>继承</strong></p><p>继承是指这样一种能力：它可以使用现有类的所有功能，并在无需重新编写原来类的情况下对这些功能进行扩展。通过继承创建的新类称为「子类」或「派生类」，被继承的类称为「基类」、「父类」或「超类」。要实现继承，可以通过 <strong>继承和组合</strong> 来实现。</p></li><li><p><strong>多态</strong></p><p>多态性是允许你将父对象设置成为和一个或更多的他的子对象相等的技术，赋值之后，父对象就可以根据当前赋值给它的子对象的特性以不同的方式运作。简单说就是一句话：允许将子类类型的指针赋值给父类类型的指针。<br>实现多态，有两种方式，覆盖和重载。两者的区别在于：<strong>覆盖在运行时决定</strong>，<strong>重载是在编译时决定</strong>。<strong>并且覆盖和重载的机制不同</strong>。在 Java 中，重载方法的签名必须不同于原先方法的，但对于覆盖签名必须相同。</p></li></ul><h4 id="java如何实现平台无关"><a class="anchor" href="#java如何实现平台无关">#</a> Java 如何实现平台无关</h4><p>平台无关性就是一种语言在计算机上的运行不受平台的约束，一次编译，到处执行（Write Once ,Run Anywhere）。对于 Java 的平台无关性的支持，就像对安全性和网络移动性的支持一样，是分布在整个 Java 体系结构中的。其中扮演者重要的角色的有 Java 语言规范、Class 文件、Java 虚拟机（JVM）等。</p><h4 id="jvm还支持哪些语言"><a class="anchor" href="#jvm还支持哪些语言">#</a> JVM 还支持哪些语言</h4><ul><li><p>Kotlin</p></li><li><p>Clojure</p></li><li><p>Groovy</p></li><li><p>JRuby</p></li><li><p>Jython</p></li><li><p>Scala</p></li></ul><h3 id="值传递"><a class="anchor" href="#值传递">#</a> 值传递</h3><ul><li><p>形式参数：</p><p>是在定义函数名和函数体的时候使用的参数，目的是用来接收调用该函数时传入的参数。</p></li><li><p>实际参数：</p><p>在调用有参函数时，主调函数和被调函数之间有数据传递关系。在主调函数中调用一个函数时，函数名后面括号中的参数称为 “实际参数”。</p></li></ul><h4 id="值传递-2"><a class="anchor" href="#值传递-2">#</a> 值传递</h4><p>在方法被调用时，实参通过形参把它的内容副本传入方法内部，此时形参接收到的内容是实参值的一个拷贝，因此在方法内对形参的任何操作，都仅仅是对这个副本的操作，不影响原始值的内容。</p><h4 id="引用传值"><a class="anchor" href="#引用传值">#</a> 引用传值</h4><p>“引用” 也就是指向真实内容的地址值，在方法调用时，实参的地址通过方法调用被传递给相应的形参，在方法体内，形参和实参指向同一块内存地址，对形参的操作会影响的真实内容。</p><h4 id="为什么说java中只有值传递"><a class="anchor" href="#为什么说java中只有值传递">#</a> 为什么说 Java 中只有值传递</h4><p>Java 中的引用传递其实还是值传递的，只不过对于对象参数，值的内容是对象的引用。简单点说，Java 中的传递，是值传递，而这个值，实际上是对象的引用。所以我们可以说 Java 的传递是按共享传递，或者说 Java 中的传递是值传递。</p><h3 id="三大基本特征"><a class="anchor" href="#三大基本特征">#</a> 三大基本特征</h3><p>封装、继承、多态是 Java 面向对象的三大基本特征。</p><h4 id="什么是多态"><a class="anchor" href="#什么是多态">#</a> 什么是多态</h4><blockquote><p>见 <code>面向对象</code> 部分。</p></blockquote><ul><li><p>方法重写与重载</p><table><thead><tr><th>区别</th><th>重载</th><th>重写</th></tr></thead><tbody><tr><td>英文</td><td>Overload</td><td>Override</td></tr><tr><td>目的</td><td>增加程序的可读性</td><td>提供其超级类已经提供的方法的特定实现</td></tr><tr><td>范围</td><td>发生在一个类中</td><td>发生在继承类中</td></tr><tr><td>参数</td><td>参数必须不同</td><td>参数必须相同</td></tr></tbody></table></li></ul><h4 id="java的继承与实现"><a class="anchor" href="#java的继承与实现">#</a> Java 的继承与实现</h4><ul><li><p><strong>继承</strong></p><p>继承是从已有的类中派生出新的类，新的类能吸收已有类的数据属性和行为，并能扩展新的能力。Java 继承是使用已存在的类的定义作为基础建立新类的技术，新类的定义可以增加新的数据或新的功能，也可以用父类的功能，但不能选择性地继承父类。继承只能单继承。</p></li><li><p><strong>实现</strong></p><p>如果多个类处理的目标是一样的，但是处理的方法方式不同，那么就定义一个接口，也就是一个标准，让他们的实现这个接口，各自实现自己具体的处理方法来处理那个目标。实现可以多实现。</p></li></ul><h4 id="构造函数"><a class="anchor" href="#构造函数">#</a> 构造函数</h4><p>构造函数可以叫做构造器，它的函数名与类名相同，不用定义返回值类型，也没有具体的返回值。构造函数是在构建创造对象时调用函数，作用是可以给对象进行初始化，创建对象都必须要通过构造函数初始化。</p><ul><li><p>默认构造函数</p><p>一个类中如果没有定义过构造函数，那么该类会有一个默认的空参数构造函数。如果在类中定义了指定的构造函数，那么该类中的默认构造函数就没有了。</p></li></ul><h4 id="变量"><a class="anchor" href="#变量">#</a> 变量</h4><ul><li><p>类变量</p><p>静态变量即类变量，位于方法区，为所有对象共享，共享一份内存，一旦静态变量被修改，其他对象均对修改可见，故线程非安全。类变量又称全局变量或静态变量，需要使用 static 关键字修饰。类级变量在类定义后就已经存在，占用内存空间，可以通过类名来访问，不需要实例化。</p></li><li><p>成员变量</p><ol><li><p>成员变量定义在类中，在整个类中都可以被访问。</p></li><li><p>成员变量随着对象的建立而建立，随着对象的消失而消失，存在于对象所在的堆内存中。</p></li><li><p>成员变量有默认初始化值。</p></li><li><p>实例化后才会分配内存空间，才能访问。</p></li></ol><blockquote><p>成员变量 = 基本数据类型变量 + 实例变量。</p><p>实例变量：单例模式（只有一个对象实例存在）线程非安全，非单例线程安全。</p></blockquote></li><li><p>局部变量</p><p>因为局部变量存在于方法内部，不会与其他线程共享，即不会存在并发问题，因此是线程安全带。这种解决问题的技术也叫做线程封闭。</p><ol><li><p>局部变量只定义在局部范围内，如：函数内，语句内等，只在所属的区域有效。</p></li><li><p>局部变量存在于栈内存中，作用的范围结束，变量空间会自动释放。</p></li><li><p>局部变量没有默认初始化值。</p></li></ol></li></ul><p>在使用变量时需要遵循 <strong>就近原则</strong> ，首先在局部范围查找，接着在成员位置找。</p><h4 id="作用域"><a class="anchor" href="#作用域">#</a> 作用域</h4><p>在 Java 中，变量的作用域分为四个级别：类级、对象实例级、方法级、块级。</p><p>成员变量或方法的作用域</p><ul><li><p><strong>public</strong> 表明该成员变量或者方法对所有类或者对象都是可见的，所有类或者对象都可以直接访问。</p></li><li><p><strong>private</strong> 表明该成员变量或者方法是私有的，只有当前类对其具有访问权限，除此之外的类或者对象都没有访问权限。</p></li><li><p><strong>protected</strong> 表明该成员变量或者方法只对自己及其子类可见，即自己和子类具有访问权限。除此之外的都没有访问权限。</p></li><li><p><strong>default</strong> 表明该成员变量或者方法对自己或者与其位于同一包内的类可见。若父类和子类位于同一包内，则子类对于父类的 default 成员变量或者方法具有访问权限，若位于不同包内，则没有访问权限。</p></li></ul><h3 id="五大基本原则"><a class="anchor" href="#五大基本原则">#</a> 五大基本原则</h3><p>面向对象遵循五大基本原则：</p><ol><li><p>单一职责原则</p><p>SRP（Single Responsibility Principle），是指一个类的功能单一，可以看做是低耦合高内聚思想的延伸。</p></li><li><p>开放封闭原则</p><p>OCP（Open-Close Principle），在设计一个类或者一个模块，在扩展性方便应当是开放的，而在更改性方面，则应当是封闭的。</p></li><li><p>里氏替换原则</p><p>LSP（Liskov Substitution Principle），任何基类可以出现的地方，子类一定可以出现。</p></li><li><p>依赖倒置原则</p><p>DIP（Dependency Inversion Principle），高层次的模块不应该依赖于低层次的模块，他们都应该依赖于抽象。抽象不应该依赖于具体实现，具体实现应该依赖于抽象。</p></li><li><p>接口隔离原则</p><p>ISP（Interface Segregation Principle），接口端不应该依赖它不需要的接口，一个类对另一个类的依赖应该建立在最小的接口上。</p></li></ol><h2 id="java-基础"><a class="anchor" href="#java-基础">#</a> Java 基础</h2><h3 id="基本数据类型"><a class="anchor" href="#基本数据类型">#</a> 基本数据类型</h3><p>变量就是申请内存来存储值。也就是说，当创建变量的时候，需要在内存中申请空间。内存管理系统根据变量的类型为变量分配存储空间，分配的空间只能用来储存该类型数据。因此，通过定义不同类型的变量，可以在内存中储存整数、小数或者字符。Java 语言提供了八种基本类型。六种数字类型（四个整数型，两个浮点型），一种字符类型，还有一种布尔型。</p><h4 id="8种基本数据类型"><a class="anchor" href="#8种基本数据类型">#</a> 8 种基本数据类型</h4><h5 id="整数型"><a class="anchor" href="#整数型">#</a> 整数型</h5><ul><li><p>byte</p></li><li><p>int</p></li><li><p>short</p></li><li><p>long</p></li></ul><h5 id="浮点型"><a class="anchor" href="#浮点型">#</a> 浮点型</h5><p>通常的浮点型数据在不声明的情况下都是 double 型的，如果要表示一个数据时 float 型的，可以在数据后面加上 <code>F</code> 。浮点型的数据是不能完全精确的，有时候在计算时可能出现小数点最后几位出现浮动，这时正常的。</p><ul><li><p>float</p><p>float：单精度，在计算机中存储占用 4 字节，也 32 位，有效位数为 7 位。</p></li><li><p>double</p><p>double：双精度，在计算机中存储占用 8 字节，64 位，有效位数为 16 位。</p></li></ul><h5 id="字符型"><a class="anchor" href="#字符型">#</a> 字符型</h5><ul><li><p>char</p><p>char 有以下的初始化方式：</p><ul><li><p>char ch = 'a'; // 可以是汉字，因为是 Unicode 编码</p></li><li><p>char ch = 1010; // 可以是十进制数、八进制数、十六进制数等等。</p></li><li><p>char ch = '\0'; // 可以用字符编码来初始化，如：'\0' 表示结束符，它的 ASCII 码是 0，这句话的意思和 ch = 0 是一个意思。</p></li></ul></li></ul><h5 id="布尔型"><a class="anchor" href="#布尔型">#</a> 布尔型</h5><ul><li><p>boolean</p><p>例：boolean flag = false;</p></li></ul><h5 id="基本数据类型对比"><a class="anchor" href="#基本数据类型对比">#</a> 基本数据类型对比</h5><table><thead><tr><th>数据类型名称</th><th>占用字节</th><th>位数</th><th>默认值</th><th>取值范围</th><th>封装器类</th></tr></thead><tbody><tr><td>byte</td><td>1</td><td>8</td><td>0</td><td>-2^7 - 2^7-1[-128～127]</td><td>Byte</td></tr><tr><td>short</td><td>2</td><td>16</td><td>0</td><td>-2^15 - 2^15-1</td><td>Short</td></tr><tr><td>int</td><td>4</td><td>32</td><td>0</td><td>-2^31 - 2^31-1</td><td>Integer</td></tr><tr><td>long</td><td>8</td><td>64</td><td>0L</td><td>-2^63 - 2^63-1</td><td>Long</td></tr><tr><td>float</td><td>4</td><td>32</td><td>0.0f</td><td>-2^31 - 2^31-1</td><td>Float</td></tr><tr><td>double</td><td>8</td><td>64</td><td>0.0d</td><td>-2^63 - 2^63-1</td><td>Double</td></tr><tr><td>char</td><td>2</td><td>16</td><td>'\u0000'</td><td>0 - 2^16-1</td><td>Character</td></tr><tr><td>boolean</td><td>1</td><td>8</td><td>false</td><td>true、false</td><td>Boolean</td></tr></tbody></table><h4 id="3种引用数据类型"><a class="anchor" href="#3种引用数据类型">#</a> 3 种引用数据类型</h4><p>基本数据类型和引用数据类型的区别主要在存储方式上，基本数据类型在被创建时，在栈上给其划分一块内存，将数值直接存储在栈上；引用数据类型在被创建时，首先要在栈上给其引用（句柄）分配一块内存，而对象的具体信息都存储在堆内存上，然后由栈上面的引用指向堆中对象的地址。</p><ul><li><p>类（对象）</p></li><li><p>接口</p></li><li><p>数组</p></li></ul><h3 id="自动拆装箱"><a class="anchor" href="#自动拆装箱">#</a> 自动拆装箱</h3><p>自动类型转换时，转换前的数据类型的位数低于转换后的数据类型。</p><blockquote><p>低 -------------------------------------------------------------&gt; 高</p><p>byte,short,char—&gt; int —&gt; long—&gt; float —&gt; double</p></blockquote><p>数据类型转换必须满足如下规则：</p><ul><li><p>不能对 boolean 类型进行类型转换。</p></li><li><p>不能把对象类型转换成不相关类的对象。</p></li><li><p>由大到小会丢失精度：在把容量大的类型转换为容量小的类型时必须使用强制类型转换。</p><p>强制类型转换</p><ul><li><p>条件是转换的数据类型必须是兼容的。</p></li><li><p>格式：(type) value type 是要强制类型转换后的数据类型</p></li></ul></li><li><p>转换过程中可能导致溢出或损失精度，例如：</p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">int</span> i <span class="token operator">=</span><span class="token number">128</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">byte</span> b <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">byte</span><span class="token punctuation">)</span>i<span class="token punctuation">;</span><span class="token comment">// -128</span></pre></td></tr></table></figure></li><li><p>浮点数到整数的转换是通过舍弃小数得到，而不是四舍五入。</p></li></ul><h4 id="包装类型"><a class="anchor" href="#包装类型">#</a> 包装类型</h4><p>包装类型使得基本数据类型中的变量具有了类中对象的特征。基本数据类型，使用起来非常方便，但是没有对应的方法来操作这些基本类型的数据，可以使用一个类，把基本数据类型的数据装起来，这个类叫做包装类（wrapper）。这样我们可以调用类中的方法。</p><h4 id="基本类型"><a class="anchor" href="#基本类型">#</a> 基本类型</h4><blockquote><p>见基本数据类型部分</p></blockquote><h4 id="自动拆装箱-2"><a class="anchor" href="#自动拆装箱-2">#</a> 自动拆装箱</h4><p>自动装箱时编译器调用 <code>valueOf</code> 方法将原始类型值转换成对象，同时自动拆箱时，编译器通过调用类似 <code>intValue()</code> ， <code>doubleValue()</code> 这类的方法将对象转换成原始类型值。</p><ul><li><p>装箱（基本类型 -&gt; 包装类）</p><p>通过包装类的构造器实现装箱（JDK1.5 之前）</p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token class-name">Integer</span> t <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Integer</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><p>通过字符串参数构造包装类对象实现装箱</p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token class-name">Float</span> f <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Float</span><span class="token punctuation">(</span><span class="token string">"4.56"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token class-name">Long</span> l <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Long</span><span class="token punctuation">(</span><span class="token string">"wer"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// NumberFormatException</span></pre></td></tr></table></figure><p>自动装箱（JDK1.5 之后）</p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token class-name">Integer</span> i <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span><span class="token comment">// 自动装箱</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment">// 相当于编译器自动作以下的语法编译：Integer i = Integer.valueOf (100);</span></pre></td></tr></table></figure></li><li><p>拆箱（包装类 -&gt; 基本类型）</p><p>调用包装类中的 <code>.xxxValue()</code> 方法</p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token class-name">Integer</span> t <span class="token operator">=</span> <span class="token number">128</span><span class="token punctuation">;</span> <span class="token comment">// 此时 t 就是一个包装类</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span><span class="token function">intValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//128</span></pre></td></tr></table></figure><p>自动拆箱</p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token class-name">Integer</span> i <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span> <span class="token comment">// 自动装箱 </span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">int</span> t <span class="token operator">=</span> i<span class="token punctuation">;</span> <span class="token comment">// 自动拆箱，实际上执行了 int t = i.intValue ();</span></pre></td></tr></table></figure></li></ul><h4 id="integer的缓存机制"><a class="anchor" href="#integer的缓存机制">#</a> Integer 的缓存机制</h4><p>Integer 与 Integer 比较的时候，由于直接赋值的时候会进行自动装箱。那么这里就需要注意两个问题</p><ol><li><p>Integer 进行自动装箱时，为其赋值处于区间 [-128, 127] 的整数时，数值将会直接被缓存在 <code>IntegerCache</code> 中，而当进行赋值操作时，不会创建新的 Integer 对象，而是从缓存中获取已经创建好的 Integer 对象。</p></li><li><p>而当数值处于区间 [-128, 127] 的整数之外时，程序内部则会直接使用 <code>new Integer()</code> 的方式来创建 Integer 对象。</p></li></ol><h3 id="string"><a class="anchor" href="#string">#</a> String</h3><h4 id="字符串的不可变性"><a class="anchor" href="#字符串的不可变性">#</a> 字符串的不可变性</h4><p>字符串的底层是使用数组存储的，数组的长度是不可变的，且使用 final 和 private 进行修饰，不能直接修改，String 也没有提供直接修改的方法。因此 String 一旦被创建，则不能被修改，所谓的修改也只是创建了新的对象。字符串常量对象存储在常量池中，常量池中的字符串是不会重复的。</p><h4 id="jdk6-和-jdk7-中-substring-的原理及区别"><a class="anchor" href="#jdk6-和-jdk7-中-substring-的原理及区别">#</a> JDK6 和 JDK7 中 substring 的原理及区别</h4><ul><li><p>JDK6 中的 substring</p><p>在 JDK6 中，String 类包含三个成员变量： <code>char value[]</code> ， <code>int offset</code> ， <code>int count</code> 。他们分别用来存储真正的字符数组，数组的第一个位置索引以及字符串中包含的字符个数。当调用 substring 方法的时候，会创建一个新的 string 对象，但是这个 string 的值仍然指向堆中的同一个字符数组。这两个对象中只有 count 和 offset 的值是不同的。</p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// JDK 6</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token class-name">String</span><span class="token punctuation">(</span><span class="token keyword">int</span> offset<span class="token punctuation">,</span> <span class="token keyword">int</span> count<span class="token punctuation">,</span> <span class="token keyword">char</span> value<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> value<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token keyword">this</span><span class="token punctuation">.</span>offset <span class="token operator">=</span> offset<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token keyword">this</span><span class="token punctuation">.</span>count <span class="token operator">=</span> count<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="7"></td><td><pre></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">substring</span><span class="token punctuation">(</span><span class="token keyword">int</span> beginIndex<span class="token punctuation">,</span> <span class="token keyword">int</span> endIndex<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token comment">//check boundary</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token keyword">return</span>  <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>offset <span class="token operator">+</span> beginIndex<span class="token punctuation">,</span> endIndex <span class="token operator">-</span> beginIndex<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p><strong>JDK 6 中的 substring 导致的问题</strong></p><p>如果你有一个很长很长的字符串，但是当你使用 substring 进行切割的时候你只需要很短的一段。这可能导致性能问题，因为你需要的只是一小段字符序列，但是你却引用了整个字符串（因为这个非常长的字符数组一直在被引用，所以无法被回收，就可能导致内存泄露）。在 JDK 6 中，一般用以下方式来解决该问题，原理其实就是生成一个新的字符串并引用他。</p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre>x <span class="token operator">=</span> x<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">""</span><span class="token punctuation">;</span></pre></td></tr></table></figure></li><li><p>JDK7 中的 substring</p><p>在 JDK7 中，substring 方法会在堆内存中创建一个新的数组，substring 使用 <code>new String</code> 创建了一个新字符串，避免对老字符串的引用。从而解决了内存泄露问题。</p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// JDK 7</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">public</span> <span class="token class-name">String</span><span class="token punctuation">(</span><span class="token keyword">char</span> value<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">int</span> offset<span class="token punctuation">,</span> <span class="token keyword">int</span> count<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token comment">//check boundary</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">copyOfRange</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> offset<span class="token punctuation">,</span> offset <span class="token operator">+</span> count<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">substring</span><span class="token punctuation">(</span><span class="token keyword">int</span> beginIndex<span class="token punctuation">,</span> <span class="token keyword">int</span> endIndex<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token comment">//check boundary</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token keyword">int</span> subLen <span class="token operator">=</span> endIndex <span class="token operator">-</span> beginIndex<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> beginIndex<span class="token punctuation">,</span> subLen<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure></li></ul><h4 id="replacefirst-replaceall-replace区别"><a class="anchor" href="#replacefirst-replaceall-replace区别">#</a> replaceFirst、replaceAll、replace 区别</h4><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Replace</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>        <span class="token class-name">String</span> s <span class="token operator">=</span> <span class="token string">"my.test.txt"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">,</span> <span class="token string">"#"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">//replace 将字符串中的。都替换为 #</span></pre></td></tr><tr><td data-num="5"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">replaceAll</span><span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">,</span> <span class="token string">"#"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">//replaceAll 用到了正则表达式，其中。是任意字符的意思，所以结果是字符串全部替换为#</span></pre></td></tr><tr><td data-num="6"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">replaceFirst</span><span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">,</span> <span class="token string">"#"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//replaceFirst 用到了正则表达式， 其中。是任意字符的意思，所以第一个字符被 #号代替</span></pre></td></tr><tr><td data-num="7"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">replaceFirst</span><span class="token punctuation">(</span><span class="token string">"\\."</span><span class="token punctuation">,</span> <span class="token string">"#"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 正则表达式中双杠是原生字符串的意思，所以结果是字符串中第一个。被 #代替得到</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h4 id="string对的重载"><a class="anchor" href="#string对的重载">#</a> String 对 [+] 的重载</h4><p>Java 中实际没有运算符的重载，但是对 String 对象而言，它是可以直接 <code>+</code> 将两个 String 对象的字符串值相加。乍看起来这是对 <code>+</code> 的重载，但我们可以通过 class 文件看出，这只是 JVM 做的语法糖。</p><p>通过反编译的方式，不难发现，其实 String 对 <code>+</code> 的支持其实就是使用了 StringBuilder 以及他的 append 和 toString 两个方法。</p><h4 id="字符串拼接的几种方式和区别"><a class="anchor" href="#字符串拼接的几种方式和区别">#</a> 字符串拼接的几种方式和区别</h4><ul><li><p>+</p><p>Java 中的 <code>+</code> 实际上是先构建一个 <code>StringBuilder</code> 对象，然后使用 <code>append()</code> 方法拼接字符串，最后调用 <code>toString()</code> 方法生成字符串，简单来说，其实现原理是使用 <code>StringBuilder.append</code> 。</p></li><li><p>concat</p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">concat</span><span class="token punctuation">(</span><span class="token class-name">String</span> str<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token keyword">int</span> otherLen <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span>otherLen <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token keyword">int</span> len <span class="token operator">=</span> value<span class="token punctuation">.</span>length<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token keyword">char</span> buf<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">copyOf</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> len <span class="token operator">+</span> otherLen<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    str<span class="token punctuation">.</span><span class="token function">getChars</span><span class="token punctuation">(</span>buf<span class="token punctuation">,</span> len<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>buf<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p><code>concat</code> 实现字符串拼接，首先是创建了一个字符数组，长度是已有字符串和待拼接字符串的长度之和，再把两个字符串的值复制到新的字符数组中，并使用这个字符数组创建一个新的 String 对象并返回。</p></li><li><p>StringBuilder.append</p><p>和 String 类类似，StringBuilder 类也封装了一个字符数组，与 String 不同的是，它并不是 final 的，所以他是可以修改的。另外，与 String 不同，字符数组中不一定所有位置都已经被使用，它有一个实例变量，表示数组中已经使用的字符个数。StringBuilder 的 append 方法会直接拷贝字符到内部的字符数组中，如果字符数组长度不够，会进行扩展。</p></li><li><p>StringBuffer.append</p><p>StringBuffer 和 StringBuilder 类似，最大的区别就是 StringBuffer 是线程安全的，其 append 方法使用 synchronized 进行声明，说明是一个线程安全的方法。而 StringBuilder 则不是线程安全的。</p></li><li><p>StringUtils.join</p><p>其实也是通过 <code>StringBuilder</code> 来实现的。</p></li></ul><p><strong>总结</strong></p><ol><li><p>如果不是在循环体中进行字符串拼接的话，直接使用 <code>+</code> 就好了。</p></li><li><p>如果在并发场景中进行字符串拼接的话，要使用 <code>StringBuffer</code> 来代替 <code>StringBuilder</code> 。</p></li></ol><h4 id="stringvalueof-和-integertostring-的区别"><a class="anchor" href="#stringvalueof-和-integertostring-的区别">#</a> String.valueOf 和 Integer.toString 的区别</h4><p><code>String.valueOf</code> 和 <code>Integer.toString</code> 没有区别，因为前者内部是通过后者实现的。</p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">String</span> <span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token keyword">return</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h4 id="switch-对-string-的支持"><a class="anchor" href="#switch-对-string-的支持">#</a> switch 对 String 的支持</h4><p><strong>其实 swich 只支持一种数据类型，那就是整型，其他数据类型都是转换成整型之后再使用 switch 的。</strong></p><ul><li><p>switch 对 int 的判断是直接比较整数的值。</p></li><li><p>switch 对 char 类型进行比较的时候，实际上比较的是 ascii 码，编译器会把 char 型变量转换成对应的 int 型变量。</p></li><li><p>switch 对字符串的 switch 是通过 <code>equals()</code> 和 <code>hashCode()</code> 方法来实现的。</p></li></ul><h4 id="字符串池string-pool"><a class="anchor" href="#字符串池string-pool">#</a> 字符串池（String Pool）</h4><p>字符串池的优点就是避免了相同内容的字符串的创建，节省了内存，省去了创建相同字符串的时间，同时提升了性能；另一方面，字符串池的缺点就是牺牲了 JVM 在常量池中遍历对象所需要的时间，不过其时间成本相比而言比较低。</p><h4 id="常量池"><a class="anchor" href="#常量池">#</a> 常量池</h4><p>常量池在 java 用于保存在编译期已确定的，已编译的 class 文件中的一份数据。它包括了关于类，方法，接口等中的常量，也包括字符串，执行器产生的常量也会放入常量池，故认为常量池是 JVM 的一块特殊的内存空间。</p><h4 id="intern"><a class="anchor" href="#intern">#</a> intern</h4><p>intern () 方法返回字符串对象的规范化表示形式。它遵循以下规则：对于任意两个字符串 s 和 t，当且仅当 s.equals (t) 为 true 时，s.intern () == t.intern () 才为 true。</p><p>当字符串调用 <code>intern()</code> 方法时，这个方法会首先检查字符串池中是否存在该字符串，如果存在，则返回该字符串的引用；如果不存在，则将这个字符串添加到字符串池中，并返回这个字符串的引用。</p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token class-name">String</span> str1 <span class="token operator">=</span> <span class="token string">"a"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token class-name">String</span> str2 <span class="token operator">=</span> <span class="token string">"b"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token class-name">String</span> str3 <span class="token operator">=</span> <span class="token string">"ab"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token class-name">String</span> str4 <span class="token operator">=</span> str1 <span class="token operator">+</span> str2<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token class-name">String</span> str5 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span><span class="token string">"ab"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>str5<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>str3<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//true 比较字符串的值</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>str5 <span class="token operator">==</span> str3<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//false 比较内存地址，str5 使用 new String 方式创建了新的字符串对象</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>str5<span class="token punctuation">.</span><span class="token function">intern</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> str3<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//true intern 先行检查字符串是否能存在</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>str5<span class="token punctuation">.</span><span class="token function">intern</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> str4<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//false str4 使用 + 号，相当于新创建了字符串对象</span></pre></td></tr></table></figure><h3 id="关键字"><a class="anchor" href="#关键字">#</a> 关键字</h3><ul><li><p>transient</p></li><li><p>instanceof</p></li><li><p>volatile</p></li><li><p>synchronized</p></li><li><p>final</p></li><li><p>static</p></li><li><p>const</p></li></ul><h3 id="集合类"><a class="anchor" href="#集合类">#</a> 集合类</h3><h4 id="java-集合类图"><a class="anchor" href="#java-集合类图">#</a> Java 集合类图</h4><p><img data-src="https://img.xfc-exclave.com/2021/08/9880d75c8d57964e3e91fb7d216bc7cd1629097816.gif" alt="java集合类图"></p><p>注：图中 <code>LinkIterator</code> 应为 <code>ListIterator</code></p><h4 id="常用集合类的使用"><a class="anchor" href="#常用集合类的使用">#</a> 常用集合类的使用</h4><p>[❗TODO]{.label .danger} 待完善</p><h4 id="arraylist-linklist-和-vector-的区别"><a class="anchor" href="#arraylist-linklist-和-vector-的区别">#</a> ArrayList、LinkList 和 Vector 的区别</h4><p>ArrayList 和 Vector 都是基于数组实现的，而 LinkedList 则是基于双向链表实现的。（查询块，增删慢）</p><ul><li><p>Arraylist 的实现原理是采用一个动态对象数组实现的，默认构造方法创建一个空数组，它在第一次添加元素时候，扩展容量为 10，之后的扩充算法：原来数组大小 + 原来数组的一半（也就是 1.5 倍）。</p></li><li><p>Vector 的实现原理也是采用一个动态对象数组实现的，只不过它的默认构造方法创建一个大小为 10 的对象数组，与 Arraylist 不同的是， 在缺省的情况下，增长原数组长度的一倍（也就是 2 倍）。</p></li><li><p>而对 ArrayList 和 Vector 要进行增删操作的时候，需要移动修改元素后面的所有元素，所以增删的开销比较大，对增删操作的执行效率低。</p></li><li><p>为了防止数组动态扩充过多，建议创建 ArrayList 或者 Vector 时，给定初始容量。</p></li><li><p>Arraylist 多线程中使用不安全，适合在单线程访问时使用，效率较高，而 Vector 线程安全，适合在多线程访问时使用，效率较低。</p></li></ul><p>而对于 LinkedList 来说，增加和删除元素方便，增加或删除一个元素，仅需处理结点间的引用即可。但是查询不方便，需要一个个对比，无法根据下标直接查找。（增删块，查询慢），同时，LinkedList 也是非线程安全的。</p><blockquote><p>扩展搜索：[ArrayList 和 Vector 的扩容机制]{.blue}、[单向链表、双向链表]{.blue} 。</p></blockquote><h4 id="synchronizedlist-和-vector-的区别"><a class="anchor" href="#synchronizedlist-和-vector-的区别">#</a> SynchronizedList 和 Vector 的区别</h4><p>SynchronizedList 和 Vector 最主要的区别：</p><ol><li><p>SynchronizedList 有很好的扩展和兼容功能。他可以将所有的 List 的子类转成线程安全的类。</p></li><li><p>使用 SynchronizedList 的时候，进行遍历时要手动进行同步处理。</p></li><li><p>SynchronizedList 可以指定锁定的对象。</p></li></ol><h4 id="hashmap-hashtable-concurrenthashmap区别"><a class="anchor" href="#hashmap-hashtable-concurrenthashmap区别">#</a> HashMap、HashTable、ConcurrentHashMap 区别</h4><ul><li><p>HashTable 中的方法是同步的，而 HashMap 中的方法在默认情况下是非同步的。在多线程并发的环境下，可以直接使用 HashTable，但是要使用 HashMap 的话就要自己增加同步处理了。</p></li><li><p>在继承关系上，HashTable 是基于陈旧的 Dictionary 类继承来的。 HashMap 继承的抽象类 AbstractMap 实现了 Map 接口。</p></li><li><p>HashTable 中，key 和 value 都不允许出现 null 值，否则会抛出 NullPointerException 异常。 HashMap 中，null 可以作为键，这样的键只有一个；可以有一个或多个键所对应的值为 null。</p></li><li><p>在扩容机制上，HashTable 中的 hash 数组初始大小是 11，增加的方式是 old*2+1。HashMap 中 hash 数组的默认大小是 16，而且一定是 2 的指数。</p></li><li><p>HashTable 直接使用对象的 hashCode。 HashMap 重新计算 hash 值。</p></li><li><p>Hashtable、HashMap 都使用了 Iterator。而由于历史原因，Hashtable 还使用了 Enumeration 的方式 。 HashMap 实现 Iterator，支持 fast-fail，Hashtable 的 Iterator 遍历支持 fast-fail，用 Enumeration 不支持 fast-fail。</p></li></ul><p><strong>HashMap 和 ConcurrentHashMap 的区别？</strong></p><p>ConcurrentHashMap 和 HashMap 的实现方式不一样，虽然都是使用桶数组实现的，但是还是有区别，ConcurrentHashMap 对桶数组进行了分段，而 HashMap 并没有。</p><p>ConcurrentHashMap 在每一个分段上都用锁进行了保护。HashMap 没有锁机制。所以，前者线程安全的，后者不是线程安全的。</p><h4 id="set和list的区别"><a class="anchor" href="#set和list的区别">#</a> Set 和 List 的区别</h4><p>List,Set 都是继承自 Collection 接口。都是用来存储一组相同类型的元素的。</p><p>List 特点：元素有放入顺序，元素可重复 。</p><p>Set 特点：元素无放入顺序，元素不可重复。</p><h4 id="set如何保证元素不重复"><a class="anchor" href="#set如何保证元素不重复">#</a> Set 如何保证元素不重复</h4><p>在 Java 的 Set 体系中，根据实现方式不同主要分为两大类。HashSet 和 TreeSet。</p><ol><li><p>TreeSet 是二叉树实现的，Treeset 中的数据是自动排好序的，不允许放入 null 值</p></li><li><p>HashSet 是哈希表实现的，HashSet 中的数据是无序的，可以放入 null，但只能放入一个 null，两者中的值都不能重复，就如数据库中唯一约束。</p></li></ol><p>在 HashSet 中，基本的操作都是有 HashMap 底层实现的，因为 HashSet 底层是用 HashMap 存储数据的。当向 HashSet 中添加元素的时候，首先计算元素的 hashcode 值，然后通过扰动计算和按位与的方式计算出这个元素的存储位置，如果这个位置位空，就将元素添加进去；如果不为空，则用 equals 方法比较元素是否相等，相等就不添加，否则找一个空位添加。</p><p>TreeSet 的底层是 TreeMap 的 keySet ()，而 TreeMap 是基于红黑树实现的，红黑树是一种平衡二叉查找树，它能保证任何一个节点的左右子树的高度差不会超过较矮的那棵的一倍。</p><p>TreeMap 是按 key 排序的，元素在插入 TreeSet 时 compareTo () 方法要被调用，所以 TreeSet 中的元素要实现 Comparable 接口。TreeSet 作为一种 Set，它不允许出现重复元素。TreeSet 是用 compareTo () 来判断重复元素的。</p><h4 id="java8中stream相关用法"><a class="anchor" href="#java8中stream相关用法">#</a> Java8 中 stream 相关用法</h4><p>Stream 使用一种类似用 SQL 语句从数据库查询数据的直观方式来提供一种对 Java 集合运算和表达的高阶抽象。</p><p>Stream API 可以极大提高 Java 程序员的生产力，让程序员写出高效率、干净、简洁的代码。</p><p>这种风格将要处理的元素集合看作一种流，流在管道中传输，并且可以在管道的节点上进行处理，比如筛选，排序，聚合等。</p><p>Stream 有以下特性及优点：</p><ul><li><p>无存储。Stream 不是一种数据结构，它只是某种数据源的一个视图，数据源可以是一个数组，Java 容器或 I/O channel 等。</p></li><li><p>为函数式编程而生。对 Stream 的任何修改都不会修改背后的数据源，比如对 Stream 执行过滤操作并不会删除被过滤的元素，而是会产生一个不包含被过滤元素的新 Stream。</p></li><li><p>惰式执行。Stream 上的操作并不会立即执行，只有等到用户真正需要结果的时候才会执行。</p></li><li><p>可消费性。Stream 只能被 “消费” 一次，一旦遍历过就会失效，就像容器的迭代器那样，想要再次遍历必须重新生成。</p></li></ul><p>和以前的 Collection 操作不同， Stream 操作还有两个基础的特征：</p><ul><li><p><strong>Pipelining</strong>: 中间操作都会返回流对象本身。 这样多个操作可以串联成一个管道， 如同流式风格（fluent style）。 这样做可以对操作进行优化， 比如延迟执行 (laziness) 和短路 ( short-circuiting)。</p></li><li><p><strong>内部迭代</strong>： 以前对集合遍历都是通过 Iterator 或者 For-Each 的方式，显式的在集合外部进行迭代， 这叫做外部迭代。 Stream 提供了内部迭代的方式， 通过访问者模式 (Visitor) 实现。</p></li></ul><p><strong>示例</strong></p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Java8Tester</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span> args<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"使用 Java 7: "</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre>        <span class="token comment">// 计算空字符串</span></pre></td></tr><tr><td data-num="6"></td><td><pre>        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> strings <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span><span class="token string">"abc"</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">,</span> <span class="token string">"bc"</span><span class="token punctuation">,</span> <span class="token string">"efg"</span><span class="token punctuation">,</span> <span class="token string">"abcd"</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">,</span> <span class="token string">"jkl"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"列表: "</span> <span class="token operator">+</span> strings<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre></pre></td></tr><tr><td data-num="9"></td><td><pre>        <span class="token keyword">long</span> count <span class="token operator">=</span> <span class="token function">getCountEmptyStringUsingJava7</span><span class="token punctuation">(</span>strings<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"空字符数量为: "</span> <span class="token operator">+</span> count<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre></pre></td></tr><tr><td data-num="12"></td><td><pre>        count <span class="token operator">=</span> <span class="token function">getCountLength3UsingJava7</span><span class="token punctuation">(</span>strings<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"字符串长度为 3 的数量为: "</span> <span class="token operator">+</span> count<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre></pre></td></tr><tr><td data-num="15"></td><td><pre>        <span class="token comment">// 删除空字符串</span></pre></td></tr><tr><td data-num="16"></td><td><pre>        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> filtered <span class="token operator">=</span> <span class="token function">deleteEmptyStringsUsingJava7</span><span class="token punctuation">(</span>strings<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"筛选后的列表: "</span> <span class="token operator">+</span> filtered<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre></pre></td></tr><tr><td data-num="19"></td><td><pre>        <span class="token comment">// 删除空字符串，并使用逗号把它们合并起来</span></pre></td></tr><tr><td data-num="20"></td><td><pre>        <span class="token class-name">String</span> mergedString <span class="token operator">=</span> <span class="token function">getMergedStringUsingJava7</span><span class="token punctuation">(</span>strings<span class="token punctuation">,</span> <span class="token string">", "</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"合并字符串: "</span> <span class="token operator">+</span> mergedString<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span></span> numbers <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="23"></td><td><pre></pre></td></tr><tr><td data-num="24"></td><td><pre>        <span class="token comment">// 获取列表元素平方数</span></pre></td></tr><tr><td data-num="25"></td><td><pre>        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span></span> squaresList <span class="token operator">=</span> <span class="token function">getSquares</span><span class="token punctuation">(</span>numbers<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"平方数列表: "</span> <span class="token operator">+</span> squaresList<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span></span> integers <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">13</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">17</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">19</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="28"></td><td><pre></pre></td></tr><tr><td data-num="29"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"列表: "</span> <span class="token operator">+</span> integers<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="30"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"列表中最大的数 : "</span> <span class="token operator">+</span> <span class="token function">getMax</span><span class="token punctuation">(</span>integers<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="31"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"列表中最小的数 : "</span> <span class="token operator">+</span> <span class="token function">getMin</span><span class="token punctuation">(</span>integers<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="32"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"所有数之和 : "</span> <span class="token operator">+</span> <span class="token function">getSum</span><span class="token punctuation">(</span>integers<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"平均数 : "</span> <span class="token operator">+</span> <span class="token function">getAverage</span><span class="token punctuation">(</span>integers<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="34"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"随机数: "</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="35"></td><td><pre></pre></td></tr><tr><td data-num="36"></td><td><pre>        <span class="token comment">// 输出 10 个随机数</span></pre></td></tr><tr><td data-num="37"></td><td><pre>        <span class="token class-name">Random</span> random <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="38"></td><td><pre></pre></td></tr><tr><td data-num="39"></td><td><pre>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="40"></td><td><pre>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>random<span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="41"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="42"></td><td><pre></pre></td></tr><tr><td data-num="43"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"使用 Java 8: "</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="44"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"列表: "</span> <span class="token operator">+</span> strings<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="45"></td><td><pre></pre></td></tr><tr><td data-num="46"></td><td><pre>        count <span class="token operator">=</span> strings<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>string <span class="token operator">-></span> string<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="47"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"空字符串数量为: "</span> <span class="token operator">+</span> count<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="48"></td><td><pre></pre></td></tr><tr><td data-num="49"></td><td><pre>        count <span class="token operator">=</span> strings<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>string <span class="token operator">-></span> string<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="50"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"字符串长度为 3 的数量为: "</span> <span class="token operator">+</span> count<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="51"></td><td><pre></pre></td></tr><tr><td data-num="52"></td><td><pre>        filtered <span class="token operator">=</span> strings<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>string <span class="token operator">-></span> <span class="token operator">!</span>string<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="53"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"筛选后的列表: "</span> <span class="token operator">+</span> filtered<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="54"></td><td><pre></pre></td></tr><tr><td data-num="55"></td><td><pre>        mergedString <span class="token operator">=</span> strings<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>string <span class="token operator">-></span> <span class="token operator">!</span>string<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">joining</span><span class="token punctuation">(</span><span class="token string">", "</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="56"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"合并字符串: "</span> <span class="token operator">+</span> mergedString<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="57"></td><td><pre></pre></td></tr><tr><td data-num="58"></td><td><pre>        squaresList <span class="token operator">=</span> numbers<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>i <span class="token operator">-></span> i <span class="token operator">*</span> i<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">distinct</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="59"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Squares List: "</span> <span class="token operator">+</span> squaresList<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="60"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"列表: "</span> <span class="token operator">+</span> integers<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="61"></td><td><pre></pre></td></tr><tr><td data-num="62"></td><td><pre>        <span class="token class-name">IntSummaryStatistics</span> stats <span class="token operator">=</span> integers<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">mapToInt</span><span class="token punctuation">(</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token operator">-></span> x<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">summaryStatistics</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="63"></td><td><pre></pre></td></tr><tr><td data-num="64"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"列表中最大的数 : "</span> <span class="token operator">+</span> stats<span class="token punctuation">.</span><span class="token function">getMax</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="65"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"列表中最小的数 : "</span> <span class="token operator">+</span> stats<span class="token punctuation">.</span><span class="token function">getMin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="66"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"所有数之和 : "</span> <span class="token operator">+</span> stats<span class="token punctuation">.</span><span class="token function">getSum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="67"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"平均数 : "</span> <span class="token operator">+</span> stats<span class="token punctuation">.</span><span class="token function">getAverage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="68"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"随机数: "</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="69"></td><td><pre></pre></td></tr><tr><td data-num="70"></td><td><pre>        random<span class="token punctuation">.</span><span class="token function">ints</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sorted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">println</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="71"></td><td><pre></pre></td></tr><tr><td data-num="72"></td><td><pre>        <span class="token comment">// 并行处理</span></pre></td></tr><tr><td data-num="73"></td><td><pre>        count <span class="token operator">=</span> strings<span class="token punctuation">.</span><span class="token function">parallelStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>string <span class="token operator">-></span> string<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="74"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"空字符串的数量为: "</span> <span class="token operator">+</span> count<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="75"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="76"></td><td><pre></pre></td></tr><tr><td data-num="77"></td><td><pre>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">getCountEmptyStringUsingJava7</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> strings<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="78"></td><td><pre>        <span class="token keyword">int</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="79"></td><td><pre></pre></td></tr><tr><td data-num="80"></td><td><pre>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> string <span class="token operator">:</span> strings<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="81"></td><td><pre>            <span class="token keyword">if</span> <span class="token punctuation">(</span>string<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="82"></td><td><pre>                count<span class="token operator">++</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="83"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="84"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="85"></td><td><pre>        <span class="token keyword">return</span> count<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="86"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="87"></td><td><pre></pre></td></tr><tr><td data-num="88"></td><td><pre>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">getCountLength3UsingJava7</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> strings<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="89"></td><td><pre>        <span class="token keyword">int</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="90"></td><td><pre></pre></td></tr><tr><td data-num="91"></td><td><pre>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> string <span class="token operator">:</span> strings<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="92"></td><td><pre>            <span class="token keyword">if</span> <span class="token punctuation">(</span>string<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="93"></td><td><pre>                count<span class="token operator">++</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="94"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="95"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="96"></td><td><pre>        <span class="token keyword">return</span> count<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="97"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="98"></td><td><pre></pre></td></tr><tr><td data-num="99"></td><td><pre>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> <span class="token function">deleteEmptyStringsUsingJava7</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> strings<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="100"></td><td><pre>        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> filteredList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="101"></td><td><pre></pre></td></tr><tr><td data-num="102"></td><td><pre>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> string <span class="token operator">:</span> strings<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="103"></td><td><pre>            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>string<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="104"></td><td><pre>                filteredList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>string<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="105"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="106"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="107"></td><td><pre>        <span class="token keyword">return</span> filteredList<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="108"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="109"></td><td><pre></pre></td></tr><tr><td data-num="110"></td><td><pre>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">String</span> <span class="token function">getMergedStringUsingJava7</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> strings<span class="token punctuation">,</span> <span class="token class-name">String</span> separator<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="111"></td><td><pre>        <span class="token class-name">StringBuilder</span> stringBuilder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="112"></td><td><pre></pre></td></tr><tr><td data-num="113"></td><td><pre>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> string <span class="token operator">:</span> strings<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="114"></td><td><pre>            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>string<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="115"></td><td><pre>                stringBuilder<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>string<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="116"></td><td><pre>                stringBuilder<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>separator<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="117"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="118"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="119"></td><td><pre>        <span class="token class-name">String</span> mergedString <span class="token operator">=</span> stringBuilder<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="120"></td><td><pre>        <span class="token keyword">return</span> mergedString<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> mergedString<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="121"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="122"></td><td><pre></pre></td></tr><tr><td data-num="123"></td><td><pre>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span></span> <span class="token function">getSquares</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span></span> numbers<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="124"></td><td><pre>        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span></span> squaresList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="125"></td><td><pre></pre></td></tr><tr><td data-num="126"></td><td><pre>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Integer</span> number <span class="token operator">:</span> numbers<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="127"></td><td><pre>            <span class="token class-name">Integer</span> square <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Integer</span><span class="token punctuation">(</span>number<span class="token punctuation">.</span><span class="token function">intValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> number<span class="token punctuation">.</span><span class="token function">intValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="128"></td><td><pre></pre></td></tr><tr><td data-num="129"></td><td><pre>            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>squaresList<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>square<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="130"></td><td><pre>                squaresList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>square<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="131"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="132"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="133"></td><td><pre>        <span class="token keyword">return</span> squaresList<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="134"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="135"></td><td><pre></pre></td></tr><tr><td data-num="136"></td><td><pre>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">getMax</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span></span> numbers<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="137"></td><td><pre>        <span class="token keyword">int</span> max <span class="token operator">=</span> numbers<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="138"></td><td><pre></pre></td></tr><tr><td data-num="139"></td><td><pre>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> numbers<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="140"></td><td><pre></pre></td></tr><tr><td data-num="141"></td><td><pre>            <span class="token class-name">Integer</span> number <span class="token operator">=</span> numbers<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="142"></td><td><pre></pre></td></tr><tr><td data-num="143"></td><td><pre>            <span class="token keyword">if</span> <span class="token punctuation">(</span>number<span class="token punctuation">.</span><span class="token function">intValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">></span> max<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="144"></td><td><pre>                max <span class="token operator">=</span> number<span class="token punctuation">.</span><span class="token function">intValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="145"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="146"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="147"></td><td><pre>        <span class="token keyword">return</span> max<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="148"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="149"></td><td><pre></pre></td></tr><tr><td data-num="150"></td><td><pre>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">getMin</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span></span> numbers<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="151"></td><td><pre>        <span class="token keyword">int</span> min <span class="token operator">=</span> numbers<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="152"></td><td><pre></pre></td></tr><tr><td data-num="153"></td><td><pre>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> numbers<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="154"></td><td><pre>            <span class="token class-name">Integer</span> number <span class="token operator">=</span> numbers<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="155"></td><td><pre></pre></td></tr><tr><td data-num="156"></td><td><pre>            <span class="token keyword">if</span> <span class="token punctuation">(</span>number<span class="token punctuation">.</span><span class="token function">intValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> min<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="157"></td><td><pre>                min <span class="token operator">=</span> number<span class="token punctuation">.</span><span class="token function">intValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="158"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="159"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="160"></td><td><pre>        <span class="token keyword">return</span> min<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="161"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="162"></td><td><pre></pre></td></tr><tr><td data-num="163"></td><td><pre>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">getSum</span><span class="token punctuation">(</span><span class="token class-name">List</span> numbers<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="164"></td><td><pre>        <span class="token keyword">int</span> sum <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>numbers<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="165"></td><td><pre></pre></td></tr><tr><td data-num="166"></td><td><pre>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> numbers<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="167"></td><td><pre>            sum <span class="token operator">+=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> numbers<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="168"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="169"></td><td><pre>        <span class="token keyword">return</span> sum<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="170"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="171"></td><td><pre></pre></td></tr><tr><td data-num="172"></td><td><pre>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">getAverage</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span></span> numbers<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="173"></td><td><pre>        <span class="token keyword">return</span> <span class="token function">getSum</span><span class="token punctuation">(</span>numbers<span class="token punctuation">)</span> <span class="token operator">/</span> numbers<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="174"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="175"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h4 id="apache集合处理工具类的使用"><a class="anchor" href="#apache集合处理工具类的使用">#</a> apache 集合处理工具类的使用</h4><p>[❗TODO]{.label .danger} 待完善</p><p>Commons Collections 增强了 Java Collections Framework。它提供了几个功能，使收集处理变得容易。它提供了许多新的接口，实现和实用程序。Commons Collections 的主要功能如下：</p><ol><li><p>Bag - Bag 界面简化了每个对象具有多个副本的集合。</p></li><li><p>BidiMap - BidiMap 接口提供双向映射，可用于使用值使用键或键查找值。</p></li><li><p>MapIterator - MapIterator 接口提供简单而容易的迭代迭代。</p></li><li><p>Transforming Decorators - 转换装饰器可以在将集合添加到集合时更改集合的每个对象。</p></li><li><p>Composite Collections - 在需要统一处理多个集合的情况下使用复合集合。</p></li><li><p>Ordered Map - 有序地图保留添加元素的顺序。</p></li><li><p>Ordered Set - 有序集保留了添加元素的顺序。</p></li><li><p>Reference map - 参考图允许在密切控制下对键 / 值进行垃圾收集。</p></li><li><p>Comparator implementations - 可以使用许多 Comparator 实现。</p></li><li><p>Iterator implementations - 许多 Iterator 实现都可用。</p></li><li><p>Adapter Classes - 适配器类可用于将数组和枚举转换为集合。</p></li><li><p>Utilities - 实用程序可用于测试测试或创建集合的典型集合论属性，例如 union，intersection。 支持关闭。</p></li></ol><h4 id="不同jdk版本中的hashmap"><a class="anchor" href="#不同jdk版本中的hashmap">#</a> 不同 JDK 版本中的 HashMap</h4><p>[❗TODO]{.label .danger} 待完善</p><h4 id="collection-和-collections-的区别"><a class="anchor" href="#collection-和-collections-的区别">#</a> Collection 和 Collections 的区别</h4><ul><li><p><code>java.util.Collection</code> 是一个集合接口。它提供了对集合对象进行基本操作的通用接口方法。Collection 接口的意义是为各种具体的集合提供了最大化的统一操作方式。</p></li><li><p><code>java.util.Collections</code> 是一个包装类。它包含有各种有关集合操作的静态多态方法。此类不能实例化，就像一个工具类，服务于 Java 的 Collection 框架。</p></li></ul><h4 id="arraysaslist-获得的-list-使用时需注意什么"><a class="anchor" href="#arraysaslist-获得的-list-使用时需注意什么">#</a> Arrays.asList 获得的 List 使用时需注意什么</h4><ul><li><p>asList 得到的只是一个 Arrays 的内部类，一个原来数组的视图 List，因此如果对它进行增删操作会报错。</p><p>这是因为 Arrays.asList () 方法返回的 ArrayList 不是 java.util 包下的，而是 java.util.Arrays.ArrayList 。这个内部类没有实现 add ()、remove () 方法，而是直接使用它的父类 AbstractList 的相应方法。而这个方法中相关的 set，add 和 remove 方法均返回 <code>throw new UnsupportedOperationException();</code> 。</p></li><li><p>用 ArrayList 的构造器可以将其转变成真正的 ArrayList。</p></li></ul><h4 id="enumeration-和-iterator-的区别"><a class="anchor" href="#enumeration-和-iterator-的区别">#</a> Enumeration 和 Iterator 的区别</h4><ul><li><p>函数接口不同</p><p>Enumeration 只有 2 个函数接口。通过 Enumeration，我们只能读取集合的数据，而不能对数据进行修改。</p><p>Iterator 只有 3 个函数接口。Iterator 除了能读取集合的数据之外，也能数据进行删除操作。</p></li><li><p>Iterator 支持 fail-fast 机制，而 Enumeration 不支持。</p><p>Enumeration 是 JDK 1.0 添加的接口。使用到它的函数包括 Vector、Hashtable 等类，这些类都是 JDK 1.0 中加入的，Enumeration 存在的目的就是为它们提供遍历接口。Enumeration 本身并没有支持同步，而在 Vector、Hashtable 实现 Enumeration 时，添加了同步。</p><p>而 Iterator 是 JDK 1.2 才添加的接口，它也是为了 HashMap、ArrayList 等集合提供遍历接口。Iterator 是支持 fail-fast 机制的：当多个线程对同一个集合的内容进行操作时，就可能会产生 fail-fast 事件。</p></li></ul><blockquote><p>注意：Enumeration 迭代器只能遍历 Vector、Hashtable 这种古老的集合，因此通常不要使用它，除非在某些极端情况下，不得不使用 Enumeration，否则都应该选择 Iterator 迭代器。</p></blockquote><h4 id="fail-fast和fail-safe"><a class="anchor" href="#fail-fast和fail-safe">#</a> fail-fast 和 fail-safe</h4><p><strong>fail-fast</strong></p><p>在系统设计中，快速失效系统是一种可以立即报告任何可能表明故障情况的系统。快速失效系统通常设计用于停止正常操作，而不是试图继续可能存在缺陷的过程。这种设计通常会在操作中的多个点检查系统的状态，因此可以及早检测到任何故障。快速失效模块的职责是检测错误，然后让系统的下一个最高级别处理错误。</p><p>fail-fast 机制可以预先识别出一些错误情况，一方面可以避免执行复杂的其他代码，另外一方面，这种异常情况被识别之后也可以针对性的做一些单独处理。</p><p>但值得注意的是，Java 的集合类中运用了 fail-fast 机制进行设计，一旦使用不当，触发 fail-fast 机制设计的代码，就会发生非预期情况。</p><p>我们通常说的 Java 中的 fail-fast 机制，默认指的是 Java 集合的一种错误检测机制。当多个线程对部分集合进行结构上的改变的操作时，有可能会产生 fail-fast 机制，这个时候就会抛出 ConcurrentModificationException。如在 foreach 循环中对某些集合元素进行元素进行 remove/add 操作。</p><p>在 foreach 进行 add/remove 操作出现异常的原因：</p><blockquote><p>foreach 使用了增强 for 循环，而在增强 for 循环中，集合遍历是通过 iterator 进行的，但是元素的 add/remove 却是直接使用的集合类自己的方法。这就导致 iterator 在遍历的时候，会发现有一个元素在自己不知不觉的情况下就被删除 / 添加了，就会抛出一个 ConcurrentModificationException 异常，用来提示用户，可能发生了并发修改！但实际上这里并没有真的发生并发，只是 Iterator 使用了 fail-fast 的保护机制，只要他发现有某一次修改是未经过自己进行的，那么就会抛出异常。</p></blockquote><p><strong>fail-safe</strong></p><p>为了避免触发 fail-fast 机制，导致异常，我们可以使用 Java 中提供的一些采用了 fail-safe 机制的集合类。这样的集合容器在遍历时不是直接在集合内容上访问的，而是先复制原有集合内容，在拷贝的集合上进行遍历。</p><p><code>java.util.concurrent</code> 包下的容器都是 fail-safe 的，可以在多线程下并发使用，并发修改。同时也可以在 foreach 中进行 add/remove 。fail-safe 集合的所有对集合的修改都是先拷贝一份副本，然后在副本集合上进行的，并不是直接对原集合进行修改。并且这些修改方法，如 add/remove 都是通过加锁来控制并发的。</p><p>但是，虽然基于拷贝内容的优点是避免了 ConcurrentModificationException，但同样地，迭代器并不能访问到修改后的内容。</p><p>CopyOnWriteArrayList 中 add/remove 等写方法是需要加锁的，目的是为了避免 Copy 出 N 个副本出来，导致并发写。但是，CopyOnWriteArrayList 中的读方法是没有加锁的。这样做的好处是我们可以对 CopyOnWrite 容器进行并发的读，当然，这里读到的数据可能不是最新的。因为写时复制的思想是通过延时更新的策略来实现数据的最终一致性的，并非强一致性。</p><p>但对于在循环中进行 add/remove 操作时，我们可以使用普通的 for 循环，因为普通 for 循环并没有用到 Iterator 的遍历，所以压根就没有进行 fail-fast 的检验。</p><h4 id="copy-on-write"><a class="anchor" href="#copy-on-write">#</a> Copy-On-Write</h4><p>Copy-On-Write 简称 COW，是一种用于程序设计中的优化策略。其基本思路是，从一开始大家都在共享同一个内容，当某个人想要修改这个内容的时候，才会真正把内容 Copy 出去形成一个新的内容然后再改，这是一种延时懒惰策略。</p><p>CopyOnWrite 容器即写时复制的容器。通俗的理解是当我们往一个容器添加元素的时候，不直接往当前容器添加，而是先将当前容器进行 Copy，复制出一个新的容器，然后新的容器里添加元素，添加完元素之后，再将原容器的引用指向新的容器。</p><p>所以 CopyOnWrite 容器是一种读写分离的思想，读和写不同的容器。而 Vector 在读写的时候使用同一个容器，读写互斥，同时只能做一件事儿。</p><h4 id="copyonwritearraylist-concurrentskiplistmap"><a class="anchor" href="#copyonwritearraylist-concurrentskiplistmap">#</a> CopyOnWriteArrayList、ConcurrentSkipListMap</h4><p>从 JDK1.5 开始 Java 并发包里提供了两个使用 CopyOnWrite 机制实现的并发容器，它们是 CopyOnWriteArrayList 和 CopyOnWriteArraySet。CopyOnWrite 容器非常有用，可以在非常多的并发场景中使用到。</p><p><strong>CopyOnWriteArrayList</strong></p><p>CopyOnWriteArrayList 的整个 add 操作都是在锁的保护下进行的。也就是说 add 方法是线程安全的。CopyOnWrite 并发容器常用于读多写少的并发场景。</p><p>和 ArrayList 不同的是，CopyOnWriteArrayList 具有以下特性：</p><ul><li><p>支持高效率并发且是线程安全的</p></li><li><p>因为通常需要复制整个基础数组，所以可变操作（add ()、set () 和 remove () 等等）的开销很大</p></li><li><p>迭代器支持 hasNext (), next () 等不可变操作，但不支持可变 remove () 等操作</p></li><li><p>使用迭代器进行遍历的速度很快，并且不会与其他线程发生冲突。在构造迭代器时，迭代器依赖于不变的数组快照。</p></li></ul><p><strong>ConcurrentSkipListMap</strong></p><p>ConcurrentSkipListMap 是一个内部使用跳表，并且支持排序和并发的一个 Map，是线程安全的。（一般很少会被用到，也是一个比较偏门的数据结构）</p><p>ConcurrentSkipListMap 和 ConcurrentHashMap 的主要区别：</p><ul><li><p>底层实现方式不同。ConcurrentSkipListMap 底层基于跳表。ConcurrentHashMap 底层基于 Hash 桶和红黑树。</p></li><li><p>ConcurrentHashMap 不支持排序。ConcurrentSkipListMap 支持排序。</p></li></ul><h3 id="枚举"><a class="anchor" href="#枚举">#</a> 枚举</h3><h4 id="枚举的用法"><a class="anchor" href="#枚举的用法">#</a> 枚举的用法</h4><p>在 Java 枚举出现之前，表示枚举类型的通常模式是声明一组 int 常量来表示。这种方法在编译时，无法校验该类型的合法性，并且在获取枚举值时，可读性差。因此，从 <code>Java1.5</code> 发行版本开始，就提出了枚举类型，作为替代的解决方案，可以避免 <code>int</code> 和 <code>String</code> 枚举模式的缺点，并提供了许多额外的好处。</p><p>枚举类型（ <code>enum type</code> ）是指由一组固定的常量组成合法的类型。 <code>Java</code> 中由关键字 <code>enum</code> 来定义一个枚举类型。</p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">enum</span> <span class="token class-name">Color</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    RED<span class="token punctuation">,</span> GREEN<span class="token punctuation">,</span> BLANK<span class="token punctuation">,</span> YELLOW<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h4 id="枚举的实现"><a class="anchor" href="#枚举的实现">#</a> 枚举的实现</h4><p>枚举类本质上是一个继承自 Enum 的类，并且使用关键字 final 进行修饰。当我们使用 enmu 来定义一个枚举类型的时候，编译器会自动帮我们创建一个 final 类型的类继承 Enum 类，所以枚举类型不能被继承。</p><h4 id="枚举与单例"><a class="anchor" href="#枚举与单例">#</a> 枚举与单例</h4><p>[❗TODO]{.label .danger} 待完善</p><h4 id="enum类"><a class="anchor" href="#enum类">#</a> Enum 类</h4><p>我们使用 enum 定义的枚举，其实现方式就是通过继承 Enum 类实现的。当我们使用 enmu 来定义一个枚举类型的时候，编译器会自动帮我们创建一个 final 类型的类继承 Enum 类，所以枚举类型不能被继承。</p><p>java.lang.Enum 类的定义如下：</p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">package</span> <span class="token namespace">java<span class="token punctuation">.</span>lang</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Enum</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span> <span class="token keyword">extends</span> <span class="token class-name">Enum</span><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">></span><span class="token punctuation">></span></span> <span class="token keyword">implements</span> <span class="token class-name">Constable</span><span class="token punctuation">,</span> <span class="token class-name">Comparable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">></span></span><span class="token punctuation">,</span> <span class="token class-name">Serializable</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token keyword">int</span> ordinal<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h4 id="java枚举如何比较"><a class="anchor" href="#java枚举如何比较">#</a> Java 枚举如何比较</h4><p>java 枚举值在比较时使用 <code>==</code> 和 <code>equals</code> 方法没有区别，两个随便用都是一样的效果。因为枚举 Enum 类的 equals 方法默认实现就是通过 == 来比较的；</p><p>类似的 Enum 的 compareTo 方法比较的是 Enum 的 ordinal 顺序大小；</p><p>类似的还有 Enum 的 name 方法和 toString 方法一样都返回的是 Enum 的 name 值。</p><h4 id="switch对枚举的支持"><a class="anchor" href="#switch对枚举的支持">#</a> switch 对枚举的支持</h4><p>Java 1.7 之前 switch 参数可用类型为 short、byte、int、char，枚举类型之所以能使用其实是编译器层面实现的</p><p>编译器会将枚举 switch 转换为类似下面的形式：</p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">switch</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">ordinal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token keyword">case</span> <span class="token class-name">Status</span><span class="token punctuation">.</span>START<span class="token punctuation">.</span><span class="token function">ordinal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>所以其实质还是 int 参数类型。</p><h4 id="枚举的序列化如何实现"><a class="anchor" href="#枚举的序列化如何实现">#</a> 枚举的序列化如何实现</h4><p>[❗TODO]{.label .danger} 待完善</p><h4 id="枚举的线程安全性问题"><a class="anchor" href="#枚举的线程安全性问题">#</a> 枚举的线程安全性问题</h4><p>编译器会将我们创建的枚举类中的属性及方法声明为 static 修饰，而当一个 Java 类第一次被真正使用到的时候静态资源被初始化、Java 类的加载和初始化过程都是线程安全的。所以，创建一个 enum 类型是线程安全的。</p><h3 id="io"><a class="anchor" href="#io">#</a> IO</h3><p>Bit 是最小的二进制单位 ，是计算机的操作部分。取值 0 或者 1</p><p>Byte（字节）是计算机操作数据的最小单位由 8 位 bit 组成 取值（-128~127）</p><p>Char（字符）是用户的可读写的最小单位，在 Java 里面由 16 位 bit 组成 取值（0~65535）</p><h4 id="字符流-字节流"><a class="anchor" href="#字符流-字节流">#</a> 字符流、字节流</h4><p>字节流，用于操作 byte（字节）类型数据，主要操作类是 OutputStream、InputStream 的子类；不用缓冲区，直接对文件本身操作。</p><p>字符流，用于操作 char（字符）字符类型数据，主要操作类是 Reader、Writer 的子类；使用缓冲区缓冲字符，不关闭流就不会输出任何内容。</p><p>整个 IO 包实际上分为字节流和字符流，但是除了这两个流之外，还存在一组字节流 - 字符流的转换类。</p><p>OutputStreamWriter：是 Writer 的子类，将输出的字符流变为字节流，即将一个字符流的输出对象变为字节流输出对象。</p><p>InputStreamReader：是 Reader 的子类，将输入的字节流变为字符流，即将一个字节流的输入对象变为字符流的输入对象。</p><h4 id="输入流-输出流"><a class="anchor" href="#输入流-输出流">#</a> 输入流、输出流</h4><p>输入、输出以存储数据的介质作为参照物，如果是把对象读入到介质中，这就是输入。从介质中向外读数据，这就是输出。所以，输入流是把数据写入存储介质的。输出流是从存储介质中把数据读取出来。</p><h4 id="同步-异步-阻塞-非阻塞"><a class="anchor" href="#同步-异步-阻塞-非阻塞">#</a> 同步、异步、阻塞、非阻塞</h4><p>同步和异步是针对应用程序和内核交互而言的，也可理解为 <strong>被调用者（系统）</strong> ，如果是同步，在被调用时会立即执行要做的事。如果是异步，在被调用时不保证会立即执行要做的事，但是保证会去做，而做完之后再通知调用者。</p><p>阻塞和非阻塞是针对于进程在访问数据的时候，也可理解为 <strong>调用者（程序）</strong> ，如果是阻塞，发出调用后，要一直等待返回结果。如果是非阻塞，在发出调用后不需要等待，可以去做自己的事情。</p><h4 id="linux-5种io模型"><a class="anchor" href="#linux-5种io模型">#</a> Linux 5 种 IO 模型</h4><p>在理解 5 种 I/O 模型前，我们需要先明确一点，不管是网络 IO 还是磁盘 IO，对于读操作而言，都是等到网络的某个数据分组到达后（即<mark>数据准备阶段</mark>），将数据<ins>拷贝到内核空间的缓冲区中</ins>，再从内核空间<ins>拷贝到用户空间的缓冲区</ins>。</p><p>基于这一点，这里我们通过假设一个点餐的生活场景来理解 5 种 I/O 模型，如下图所示：</p><p><img data-src="https://img.xfc-exclave.com/2021/08/2bebc3152c645587b021c6c6b9e3db891629350846.jpeg" alt="IO模型场景图解"></p><h4 id="bio-nio和aio的区别-用法和原理"><a class="anchor" href="#bio-nio和aio的区别-用法和原理">#</a> BIO、NIO 和 AIO 的区别、用法和原理</h4><ul><li><p>BIO（Blocking I/O）</p><p>同步阻塞 I/O 模式，数据的读取写入必须阻塞在一个线程内等待其完成。BIO 适用于连接数目比较小且固定的架构，对服务器资源要求高，并发局限于应用中。</p></li><li><p>NIO（New I/O）</p><p>同步非阻塞 I/O 模式，它是基于事件驱动思想来完成的，其服务器实现模式为一个请求一个通道，即客户端发送的连接请求都会注册到<ins class="dot">多路复用器</ins>上，多路复用器轮询到连接有 I/O 请求时才启动一个线程进行处理。</p><p>这种方式适用于连接数目多且连接比较短（轻操作）的架构，比如聊天服务器，并发局限于应用中，编程复杂。</p><p>NIO 中有以下几种重要角色：</p><ol><li><p>缓冲区 Buffer</p></li><li><p>通道 Channel</p></li><li><p>多路复用器 Selector</p></li></ol></li><li><p>AIO（Asynchronous I/O）</p><p>异步非阻塞 I/O 模式，在进行读写操作时，只须直接调用 API 的读写方法即可。一个有效请求对应一个线程，客户端的 IO 请求都是 OS 先完成了再通知服务器应用去启动线程进行处理。</p></li></ul><h4 id="netty"><a class="anchor" href="#netty">#</a> Netty</h4><p>Netty 是一个非阻塞 I/O 客户端 - 服务器框架，主要用于开发 Java 网络应用程序，如协议服务器和客户端。异步事件驱动的网络应用程序框架和工具用于简化网络编程，例如 TCP 和 UDP 套接字服务器。Netty 包括了反应器编程模式的实现。</p><p>除了作为异步网络应用程序框架，Netty 还包括了对 HTTP、HTTP2、DNS 及其他协议的支持，涵盖了在 Servlet 容器内运行的能力、对 WebSockets 的支持、与 Google Protocol Buffers 的集成、对 SSL/TLS 的支持以及对用于 SPDY 协议和消息压缩的支持。</p><p>主要优点：提供异步的、事件驱动的网络应用程序框架和工具。</p><p>详细使用参考官方文档：<span class="exturl" data-url="aHR0cHM6Ly9uZXR0eS5pby93aWtpL2luZGV4Lmh0bWw=">https://netty.io/wiki/index.html</span></p><h3 id="反射"><a class="anchor" href="#反射">#</a> 反射</h3><p>反射机制指的是程序在运行时能够获取自身的信息。在 Java 中，只要给定类的名字，那么就可以通过反射机制来获得类的所有属性和方法。</p><p>主要由以下的类来实现反射机制（这些类都位于 <code>java.lang.reflect</code> 包中）：</p><ol><li><p>Class 类：代表一个类。</p></li><li><p>Field 类：代表类的成员变量（成员变量也称为类的属性）。</p></li><li><p>Method 类：代表类的方法。</p></li><li><p>Constructor 类：代表类的构造方法。</p></li><li><p>Array 类：提供了动态创建数组，以及访问数组的元素的静态方法。</p></li></ol><h4 id="反射与工厂模式"><a class="anchor" href="#反射与工厂模式">#</a> 反射与工厂模式</h4><p>工厂模式有三种：</p><ol><li><p>简单工厂模式</p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">interface</span> <span class="token class-name">Car</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token keyword">void</span> <span class="token class-name">Name</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Aodi</span> <span class="token keyword">implements</span> <span class="token class-name">Car</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token annotation punctuation">@Override</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token class-name">Name</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Aodi"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="11"></td><td><pre></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Aotuo</span> <span class="token keyword">implements</span> <span class="token class-name">Car</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token annotation punctuation">@Override</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token class-name">Name</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Aotuo"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="18"></td><td><pre></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Factory</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>    <span class="token keyword">private</span> <span class="token class-name">Factory</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="22"></td><td><pre></pre></td></tr><tr><td data-num="23"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Car</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token class-name">String</span> className<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">"Aodi"</span><span class="token punctuation">.</span><span class="token function">equalsIgnoreCase</span><span class="token punctuation">(</span>className<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Aodi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>        <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">"Aotuo"</span><span class="token punctuation">.</span><span class="token function">equalsIgnoreCase</span><span class="token punctuation">(</span>className<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Aotuo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="30"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="31"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="32"></td><td><pre></pre></td></tr><tr><td data-num="33"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Test</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="34"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="35"></td><td><pre>        <span class="token class-name">Car</span> car <span class="token operator">=</span> <span class="token class-name">Factory</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token string">"Aodi"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="36"></td><td><pre>        <span class="token class-name"><span class="token namespace">car<span class="token punctuation">.</span></span>Name</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="37"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="38"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure></li><li><p>工厂方法模式</p><p>简单工厂模式引入 Java 反射机制后，变为工厂方法模式。</p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">interface</span> <span class="token class-name">Car</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token keyword">void</span> <span class="token class-name">Name</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Aodi</span> <span class="token keyword">implements</span> <span class="token class-name">Car</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token annotation punctuation">@Override</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token class-name">Name</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Aodi"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="11"></td><td><pre></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Aotuo</span> <span class="token keyword">implements</span> <span class="token class-name">Car</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token annotation punctuation">@Override</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token class-name">Name</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Aotuo"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="18"></td><td><pre></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Factory</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>    <span class="token keyword">private</span> <span class="token class-name">Factory</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="22"></td><td><pre></pre></td></tr><tr><td data-num="23"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Car</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token class-name">String</span> className<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>        <span class="token class-name">Car</span> instance <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>            instance <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Car</span><span class="token punctuation">)</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span>className<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getDeclaredConstructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="30"></td><td><pre>        <span class="token keyword">return</span> instance<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="31"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="32"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="33"></td><td><pre></pre></td></tr><tr><td data-num="34"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Test</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="35"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="36"></td><td><pre>        <span class="token class-name">Car</span> car <span class="token operator">=</span> <span class="token class-name">Factory</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token string">"sample.Aodi"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="37"></td><td><pre>        <span class="token class-name"><span class="token namespace">car<span class="token punctuation">.</span></span>Name</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="38"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="39"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure></li><li><p>抽象工厂模式</p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 抽象产品</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">interface</span> <span class="token class-name">Car</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token keyword">void</span> <span class="token class-name">Name</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token comment">// 具体产品</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Aodi</span> <span class="token keyword">implements</span> <span class="token class-name">Car</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token annotation punctuation">@Override</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token class-name">Name</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Aodi"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="13"></td><td><pre></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token comment">// 具体产品</span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Aotuo</span> <span class="token keyword">implements</span> <span class="token class-name">Car</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token annotation punctuation">@Override</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token class-name">Name</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Aotuo"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="20"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="21"></td><td><pre></pre></td></tr><tr><td data-num="22"></td><td><pre><span class="token comment">// 抽象工厂</span></pre></td></tr><tr><td data-num="23"></td><td><pre><span class="token keyword">interface</span> <span class="token class-name">CarFactory</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>    <span class="token class-name">Car</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="25"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="26"></td><td><pre></pre></td></tr><tr><td data-num="27"></td><td><pre><span class="token comment">// 具体工厂</span></pre></td></tr><tr><td data-num="28"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">AodiFactory</span> <span class="token keyword">implements</span> <span class="token class-name">CarFactory</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>    <span class="token annotation punctuation">@Override</span></pre></td></tr><tr><td data-num="30"></td><td><pre>    <span class="token keyword">public</span> <span class="token class-name">Car</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="31"></td><td><pre>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Aodi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="32"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="33"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="34"></td><td><pre></pre></td></tr><tr><td data-num="35"></td><td><pre><span class="token comment">// 具体工厂</span></pre></td></tr><tr><td data-num="36"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">AotuoFactory</span> <span class="token keyword">implements</span> <span class="token class-name">CarFactory</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="37"></td><td><pre>    <span class="token annotation punctuation">@Override</span></pre></td></tr><tr><td data-num="38"></td><td><pre>    <span class="token keyword">public</span> <span class="token class-name">Car</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="39"></td><td><pre>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Aotuo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="40"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="41"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="42"></td><td><pre></pre></td></tr><tr><td data-num="43"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Test</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="44"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="45"></td><td><pre>        <span class="token class-name">CarFactory</span> carFactory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AodiFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="46"></td><td><pre>        <span class="token class-name">Car</span> audi <span class="token operator">=</span> carFactory<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="47"></td><td><pre>        <span class="token class-name"><span class="token namespace">audi<span class="token punctuation">.</span></span>Name</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="48"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="49"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure></li></ol><p>其实， <code>Spring IoC</code> 就是工厂模式 + Java 的反射机制的实际应用。</p><h4 id="反射有什么用"><a class="anchor" href="#反射有什么用">#</a> 反射有什么用</h4><ul><li><p>在运行时判断任意一个对象所属的类。</p></li><li><p>在运行时判断任意一个类所具有的成员变量和方法。</p></li><li><p>在运行时任意调用一个对象的方法。</p></li><li><p>在运行时构造任意一个类的对象。</p></li></ul><h4 id="class类"><a class="anchor" href="#class类">#</a> Class 类</h4><p>Java 的 Class 类是 java 反射机制的基础，通过 Class 类我们可以获得关于一个类的相关信息。</p><p>Java.lang.Class 是一个比较特殊的类，它用于封装被装入到 JVM 中的类（包括类和接口）的信息。当一个类或接口被装入的 JVM 时便会产生一个与之关联的 java.lang.Class 对象，可以通过这个 Class 对象对被装入类的详细信息进行访问。</p><p>虚拟机为每种类型管理一个独一无二的 Class 对象。也就是说，每个类（型）都有一个 Class 对象。运行程序时，Java 虚拟机 (JVM) 首先检查是否所要加载的类对应的 Class 对象是否已经加载。如果没有加载，JVM 就会根据类名查找.class 文件，并将其 Class 对象载入。</p><blockquote><p>如果精力允许，可以看看 <code>java.lang.reflect</code> 包下内的源码。</p></blockquote><h3 id="动态代理"><a class="anchor" href="#动态代理">#</a> 动态代理</h3><p>代理模式为其他对象提供了一个代理，以控制对某个对象访问，代理类为被代理类预处理消息、过滤消息并在此之后将消息转发给被代理类，之后还能进行消息的后置处理。代理类和被代理类通常会存在关联关系（即持有被代理对象的引用），代理类本身不实现服务，而是通过调用被代理类中的方法来提供服务。</p><h4 id="java-三种代理模式"><a class="anchor" href="#java-三种代理模式">#</a> Java 三种代理模式</h4><h5 id="静态代理"><a class="anchor" href="#静态代理">#</a> 静态代理</h5><p>静态代理示例：</p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Test</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token keyword">interface</span> <span class="token class-name">HelloInterface</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>        <span class="token keyword">void</span> <span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Hello</span> <span class="token keyword">implements</span> <span class="token class-name">HelloInterface</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>        <span class="token annotation punctuation">@Override</span></pre></td></tr><tr><td data-num="9"></td><td><pre>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Hello Chinmoku!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="13"></td><td><pre></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">HelloProxy</span> <span class="token keyword">implements</span> <span class="token class-name">HelloInterface</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>        <span class="token keyword">private</span> <span class="token class-name">HelloInterface</span> helloInterface <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre></pre></td></tr><tr><td data-num="17"></td><td><pre>        <span class="token annotation punctuation">@Override</span></pre></td></tr><tr><td data-num="18"></td><td><pre>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Before invoke sayHello"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>            helloInterface<span class="token punctuation">.</span><span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"After invoke sayHello"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="24"></td><td><pre></pre></td></tr><tr><td data-num="25"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>        <span class="token class-name">HelloProxy</span> helloProxy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HelloProxy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>        helloProxy<span class="token punctuation">.</span><span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="29"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="30"></td><td><pre></pre></td></tr><tr><td data-num="31"></td><td><pre><span class="token comment">// 执行结果：</span></pre></td></tr><tr><td data-num="32"></td><td><pre><span class="token comment">// Before invoke sayHello</span></pre></td></tr><tr><td data-num="33"></td><td><pre><span class="token comment">// Hello Chinmoku!</span></pre></td></tr><tr><td data-num="34"></td><td><pre><span class="token comment">// After invoke sayHello</span></pre></td></tr></table></figure><p>静态代理需要代理对象和目标对象实现一样的接口。</p><p>其优点在于，它可以在不修改目标对象的前提下扩展目标对象的功能。</p><p>而由于代理对象要实现与目标对象一致的接口，这会产生过多的代理类，另一方面，一旦接口的方法进行了更新，目标对象与代理对象都要进行修改，简单来说，<mark>静态代理的缺点在于冗余和不易维护</mark>。</p><h5 id="动态代理-2"><a class="anchor" href="#动态代理-2">#</a> 动态代理</h5><p>动态代理利用了 JDK API ，动态地在内存中构建代理对象，从而实现对目标对象的代理功能。因此动态代理又被称为 JDK 代理或接口代理。</p><p>静态代理与动态代理的区别主要在于：</p><ol><li><p>静态代理在编译时就已经实现，编译完成后代理类是一个实际的 class 文件。</p></li><li><p>动态代理是在运行时动态生成的，即编译完成后没有实际的 class 文件，而是<mark>在运行时动态生成类字节码</mark>，并加载到 JVM 中。</p></li></ol><p>动态代理对象不需要实现接口，但是要求目标对象必须实现接口，否则不能使用动态代理。</p><p>动态代理示例：</p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">InvocationHandler</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">Method</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">Proxy</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Test</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token keyword">interface</span> <span class="token class-name">HelloInterface</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>        <span class="token keyword">void</span> <span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="10"></td><td><pre></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Hello</span> <span class="token keyword">implements</span> <span class="token class-name">HelloInterface</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>        <span class="token annotation punctuation">@Override</span></pre></td></tr><tr><td data-num="13"></td><td><pre>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Hello Chinmoku!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="17"></td><td><pre></pre></td></tr><tr><td data-num="18"></td><td><pre>    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">DynamicProxy</span> <span class="token keyword">implements</span> <span class="token class-name">InvocationHandler</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>        <span class="token keyword">private</span> <span class="token class-name">Object</span> object<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre></pre></td></tr><tr><td data-num="21"></td><td><pre>        <span class="token keyword">public</span> <span class="token class-name">DynamicProxy</span><span class="token punctuation">(</span><span class="token class-name">Object</span> obj<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>            <span class="token keyword">this</span><span class="token punctuation">.</span>object <span class="token operator">=</span> obj<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="24"></td><td><pre></pre></td></tr><tr><td data-num="25"></td><td><pre>        <span class="token annotation punctuation">@Override</span></pre></td></tr><tr><td data-num="26"></td><td><pre>        <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">invoke</span><span class="token punctuation">(</span><span class="token class-name">Object</span> proxy<span class="token punctuation">,</span> <span class="token class-name">Method</span> method<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Throwable</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Before invoke sayHello"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>            method<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>object<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"After invoke sayHello"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="30"></td><td><pre>            <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="31"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="32"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="33"></td><td><pre></pre></td></tr><tr><td data-num="34"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="35"></td><td><pre>        <span class="token class-name">HelloInterface</span> hello <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="36"></td><td><pre>        <span class="token class-name">InvocationHandler</span> h <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DynamicProxy</span><span class="token punctuation">(</span>hello<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="37"></td><td><pre>        <span class="token class-name">HelloInterface</span> proxy <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">HelloInterface</span><span class="token punctuation">)</span> <span class="token class-name">Proxy</span><span class="token punctuation">.</span><span class="token function">newProxyInstance</span><span class="token punctuation">(</span><span class="token class-name">HelloInterface</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Class</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">&#123;</span><span class="token class-name">HelloInterface</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> h<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="38"></td><td><pre>        proxy<span class="token punctuation">.</span><span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="39"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="40"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="41"></td><td><pre></pre></td></tr><tr><td data-num="42"></td><td><pre><span class="token comment">// 执行结果：</span></pre></td></tr><tr><td data-num="43"></td><td><pre><span class="token comment">// Before invoke sayHello</span></pre></td></tr><tr><td data-num="44"></td><td><pre><span class="token comment">// Hello Chinmoku!</span></pre></td></tr><tr><td data-num="45"></td><td><pre><span class="token comment">// After invoke sayHello</span></pre></td></tr></table></figure><h5 id="cglib-代理"><a class="anchor" href="#cglib-代理">#</a> Cglib 代理</h5><p>JDK 代理要求被代理对象是一个接口的实现类，如果被代理对象没有实现任何接口，就可以通过 Cglib 进行代理。Cglib 是针对类来实现代理的，他的原理是对指定的目标生成一个子类，并覆盖其中的方法实现增强。但由于其使用继承方式实现，因此，它无法对 final 关键词修饰的类进行代理。</p><blockquote><p>Cglib 既可以为实现接口的类进行代理，也可以为没有实现接口的类进行代理。</p></blockquote><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>cglib<span class="token punctuation">.</span>proxy<span class="token punctuation">.</span></span><span class="token class-name">Enhancer</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>cglib<span class="token punctuation">.</span>proxy<span class="token punctuation">.</span></span><span class="token class-name">MethodInterceptor</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>cglib<span class="token punctuation">.</span>proxy<span class="token punctuation">.</span></span><span class="token class-name">MethodProxy</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">Method</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Test</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Hello</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Hello Chinmoku!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="14"></td><td><pre></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">HelloServiceCglibProxy</span> <span class="token keyword">implements</span> <span class="token class-name">MethodInterceptor</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="16"></td><td><pre></pre></td></tr><tr><td data-num="17"></td><td><pre>        <span class="token keyword">private</span> <span class="token class-name">Object</span> target<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre></pre></td></tr><tr><td data-num="19"></td><td><pre>        <span class="token keyword">public</span> <span class="token class-name">HelloServiceCglibProxy</span><span class="token punctuation">(</span><span class="token class-name">Object</span> target<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>            <span class="token keyword">this</span><span class="token punctuation">.</span>target <span class="token operator">=</span> target<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="22"></td><td><pre></pre></td></tr><tr><td data-num="23"></td><td><pre>        <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">getProxyInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>            <span class="token class-name">Enhancer</span> en <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Enhancer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>            en<span class="token punctuation">.</span><span class="token function">setSuperclass</span><span class="token punctuation">(</span>target<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>            en<span class="token punctuation">.</span><span class="token function">setCallback</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>            <span class="token keyword">return</span> en<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="29"></td><td><pre></pre></td></tr><tr><td data-num="30"></td><td><pre>        <span class="token annotation punctuation">@Override</span></pre></td></tr><tr><td data-num="31"></td><td><pre>        <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">intercept</span><span class="token punctuation">(</span><span class="token class-name">Object</span> object<span class="token punctuation">,</span> <span class="token class-name">Method</span> method<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arg2<span class="token punctuation">,</span> <span class="token class-name">MethodProxy</span> proxy<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Throwable</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="32"></td><td><pre>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Before invoke sayHello"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>            <span class="token class-name">Object</span> obj <span class="token operator">=</span> method<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="34"></td><td><pre>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"After invoke sayHello"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="35"></td><td><pre>            <span class="token keyword">return</span> obj<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="36"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="37"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="38"></td><td><pre></pre></td></tr><tr><td data-num="39"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="40"></td><td><pre>        <span class="token class-name">Hello</span> target <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="41"></td><td><pre>        <span class="token class-name">HelloServiceCglibProxy</span> proxyFactory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HelloServiceCglibProxy</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="42"></td><td><pre>        <span class="token class-name">Hello</span> proxy <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Hello</span><span class="token punctuation">)</span>proxyFactory<span class="token punctuation">.</span><span class="token function">getProxyInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="43"></td><td><pre>        proxy<span class="token punctuation">.</span><span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="44"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="45"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="46"></td><td><pre></pre></td></tr><tr><td data-num="47"></td><td><pre><span class="token comment">// 执行结果：</span></pre></td></tr><tr><td data-num="48"></td><td><pre><span class="token comment">// Before invoke sayHello</span></pre></td></tr><tr><td data-num="49"></td><td><pre><span class="token comment">// Hello Chinmoku!</span></pre></td></tr><tr><td data-num="50"></td><td><pre><span class="token comment">// After invoke sayHello</span></pre></td></tr></table></figure><h4 id="动态代理和反射的关系"><a class="anchor" href="#动态代理和反射的关系">#</a> 动态代理和反射的关系</h4><p>动态代理实现了 <code>java.lang.reflect.InvocationHandler</code> 接口，而 <code>java.lang.reflect.Proxy</code> 作为其实例，它提供了一个 <code>newProxyInstance()</code> 方法，通过这个方法，程序可以将需要被代理的对象信息传递到 <code>InvocationHandler</code> 这个处理器上。</p><p>反射的主要作用是：</p><ol><li><p>动态地创建类的实例，并将类绑定到现有的对象中，或从现有的对象中获取类型。</p></li><li><p>应用程序需要在运行时从某个特定的程序集中载入一个特定的类。</p></li></ol><p>而动态代理则是根据对象在内存中加载的 Class 类创建运行时类对象，从而调用代理类方法和属性。简单来说，<mark>动态代理是基于 Java 反射机制实现的</mark>。</p><h4 id="aop"><a class="anchor" href="#aop">#</a> AOP</h4><p>Java 是一种面向对象的编程语言，它用对象、属性和行为来描述一个简单的事物，并引入了封装、继承、多态的概念，使其具备了描述复杂事物的能力。但当它需要为一些分散对象的公共行为进行描述时，就会显得相当乏力（不是不能），因此就出现了面向切面编程（AOP）的思想，它使用一种被称为横切（cross-cutting）的技术，它将一系列（纵向发展的）行为（横向）剖解开来，并为其织入代理对象，以达到为这些复杂的行为提取出公共行为的目的，这种公共行为在 AOP 思想中被称为切面（Aspect），而这种公共行为，往往是与主要行为（即业务逻辑）无关或关联性极低的行为，比如日志记录、权限控制、性能监控、缓存优化、事务管理等。AOP 将这些非业务性而又至关重要的代码提取出来，极大地减少了代码的重复和耦合，并且有利于维护。</p><p>需要特别强调的是，AOP 和 OOP 一样，它并不是某种特定的技术，而是一种编程思想，它弥补了 OOP 思想的不足之处，我们可以说 AOP 是 OOP 的补充和完善。</p><p>简单来说，动态地将代码切入到类的指定方法、指定位置上的编程思想，就是切面编程。</p><blockquote><p>注意：Spring AOP 是在运行时生成并织入（weave）代理对象的，但并非所有的 AOP 实现方式都是如此，也有的可以在编译期或类加载期织入，比如 AspectJ 。</p></blockquote><h5 id="aop-相关概念"><a class="anchor" href="#aop-相关概念">#</a> AOP 相关概念</h5><ol><li><p>切面（Aspect）</p><p>切面由切入点和通知组成，它既包含了横切逻辑的定义，也包括了切入点的定义。</p><p>可以简单地认为，使用 @Aspect 注解的类就是切面。</p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token annotation punctuation">@Component</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token annotation punctuation">@Aspect</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LogAspect</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure></li><li><p>目标对象（Target）</p><p>目标对象指将要被增强的对象，即包含主业务逻辑的类对象。或者说是被一个或者多个切面所通知的对象。</p></li><li><p>连接点（JoinPoint）</p><p>程序执行过程中明确的点，如方法的调用或特定的异常被抛出。连接点由两个信息确定：</p><ul><li><p>方法（表示程序执行点，即在哪个目标方法）</p></li><li><p>相对点（表示方位，即目标方法的什么位置，比如调用前，后等）</p></li></ul><p>简单来说，连接点就是被拦截到的程序执行点，因为 Spring 只支持方法类型的连接点，所以在 Spring 中连接点就是被拦截到的方法。</p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token annotation punctuation">@Before</span><span class="token punctuation">(</span><span class="token string">"pointcut()"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">JoinPoint</span> joinPoint<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token comment">// 这个 JoinPoint 参数就是连接点</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure></li><li><p>切入点（PointCut）</p><p>切入点是对连接点进行拦截的条件定义。切入点表达式如何和连接点匹配是 AOP 的核心，Spring 缺省使用 AspectJ 切入点语法。</p><p>一般认为，所有的方法都可以认为是连接点，但是我们并不希望在所有的方法上都添加通知，而切入点的作用就是提供一组规则（使用 AspectJ pointcut expression language 来描述）来匹配连接点，给满足规则的连接点添加通知。</p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token annotation punctuation">@Pointcut</span><span class="token punctuation">(</span><span class="token string">"execution(* com.chinmoku.test.aop.service..*(..))"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">pointcut</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure></li><li><p>通知（Advice）</p><p>通知是指拦截到连接点之后要执行的代码，Spring AOP 框架以拦截器来实现通知模型，并维护一个以连接点为中心的拦截器链。</p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// @Before 说明这是一个前置通知，log 函数中是要前置执行的代码，JoinPoint 是连接点，</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token annotation punctuation">@Before</span><span class="token punctuation">(</span><span class="token string">"pointcut()"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">JoinPoint</span> joinPoint<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> </pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>通知类型：</p><ul><li><p>前置通知</p></li><li><p>环绕通知</p></li><li><p>后置通知</p></li><li><p>异常通知</p></li><li><p>最终通知</p></li></ul></li><li><p>织入（weave）</p><p>织入是将切面和业务逻辑对象连接起来，并创建通知代理的过程。织入可以在编译时，类加载时和运行时完成。在编译时进行织入就是静态代理，而在运行时进行织入则是动态代理。</p></li><li><p>增强器（Advisor）</p><p>Advisor 是切面的另外一种实现，能够将通知以更为复杂的方式织入到目标对象中，是将通知包装为更复杂切面的装配器。Advisor 由切入点和 Advice 组成。</p></li></ol><h3 id="序列化"><a class="anchor" href="#序列化">#</a> 序列化</h3><ul><li><p>什么是序列化与反序列化？</p><p>序列化，简单来说，就是将对象转化成字节序列的过程。用于对象的传输，和持久化。</p><p>反序列化则与序列化相反，它是将字节序列转换成对象的过程。</p></li><li><p>为什么要进行序列化？</p><p>当俩个进程进行远程通信时，可以相互发送各种类型的数据，而这些数据都会以二进制的形式在网络上传送。而 Java 进程在进行通信时，则需要将 Java 对象转换为二进制，这种转换的过程，则是序列化的过程，而将其还原则是反序列化的过程。</p><p>另外，由于一般 Java 对象的生命周期比 JVM 短，而在实际的开发中，我们需要在 JVM 停止后能够继续持有对象，这个时候就需要用到序列化技术将对象持久到磁盘或数据库。</p></li></ul><p>JDK 中的序列化步骤：</p><ol><li><p>创建一个对象输出流，它可以包装一个其它类型的目标输出流，如文件输出流：</p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token class-name">ObjectOutputStream</span> outputStream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectOutputStream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span><span class="token string">"D:\\object.out"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure></li><li><p>通过对象输出流的 <code>writeObject()</code> 方法写对象：</p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre>outputStream<span class="token punctuation">.</span><span class="token function">writeObject</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token string">"zhangsan"</span><span class="token punctuation">,</span> <span class="token string">"123456"</span><span class="token punctuation">,</span> <span class="token string">"male"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure></li></ol><p>JDK 中的反序列化步骤：</p><ol><li><p>创建一个对象输入流，它可以包装一个其它类型输入流，如文件输入流：</p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token class-name">ObjectInputStream</span> ois<span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectInputStream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">"object.out"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure></li><li><p>通过对象输出流的 <code>readObject()</code> 方法读取对象：</p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token class-name">User</span> user <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">User</span><span class="token punctuation">)</span> ois<span class="token punctuation">.</span><span class="token function">readObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure></li></ol><blockquote><p>为了正确读取数据，完成反序列化，必须保证向对象输出流写对象的顺序与从对象输入流中读对象的顺序一致。</p></blockquote><p>注：static 和 transient 字段不能被序列化。</p><h4 id="序列化底层原理"><a class="anchor" href="#序列化底层原理">#</a> 序列化底层原理</h4><p>[❗TODO]{.label .danger} 待完善</p><h4 id="serialversionuid"><a class="anchor" href="#serialversionuid">#</a> serialVersionUID</h4><p><code>serialVersionUID</code> 适用于 Java 的序列化机制。简单来说，Java 的序列化机制是通过判断类的 serialVersionUID 来验证版本一致性的。在进行反序列化时，JVM 会把传来的字节流中的 serialVersionUID 与本地相应实体类的 serialVersionUID 进行比较，如果相同就认为是一致的，可以进行反序列化，否则就会出现序列化版本不一致的异常，即是 InvalidCastException 。</p><p>serialVersionUID 有两种显示的生成方式：</p><ol><li><p>默认的 1L</p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">long</span> serialVersionUID <span class="token operator">=</span> <span class="token number">1L</span><span class="token punctuation">;</span></pre></td></tr></table></figure></li><li><p>根据类名、接口名、成员方法及属性等来生成一个 64 位的哈希字段</p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">long</span> serialVersionUID <span class="token operator">=</span> xxxxL<span class="token punctuation">;</span></pre></td></tr></table></figure></li></ol><p>当实现 <code>java.io.Serializable</code> 接口的类没有显式地定义一个 serialVersionUID 变量时候，Java 序列化机制会根据编译的 Class 自动生成一个 serialVersionUID 作序列化版本比较用，这种情况下，如果 Class 文件（类名，方法明等）没有发生变化（增加空格，换行，增加注释等等），就算再编译多次，serialVersionUID 也不会变化的。</p><p>如果我们不希望通过编译来强制划分软件版本，即实现序列化接口的实体能够兼容先前版本，就需要显式地定义一个名为 serialVersionUID，类型为 long 的变量，不修改这个变量值的序列化实体都可以相互进行串行化和反串行化。</p><h4 id="序列化与单例模式"><a class="anchor" href="#序列化与单例模式">#</a> 序列化与单例模式</h4><p>序列化和反序列化会影响破坏单例模式，这是因为反序列化的时候会去反射调用对象的无参构造方法。</p><p>解决方法：</p><p>只要在 Singleton 类中定义 <code>readResolve</code> 就可以解决序列化和反序列化对单例模式的破坏。</p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token keyword">implements</span> <span class="token class-name">Serializable</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token keyword">private</span> <span class="token keyword">volatile</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> singleton<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token keyword">private</span> <span class="token class-name">Singleton</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> <span class="token function">getSingleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>        <span class="token keyword">if</span> <span class="token punctuation">(</span>singleton <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>            <span class="token keyword">synchronized</span> <span class="token punctuation">(</span><span class="token class-name">Singleton</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>                <span class="token keyword">if</span> <span class="token punctuation">(</span>singleton <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>                    singleton <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>                <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>        <span class="token keyword">return</span> singleton<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="14"></td><td><pre></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token keyword">private</span> <span class="token class-name">Object</span> <span class="token function">readResolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>        <span class="token keyword">return</span> singleton<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>更加详细的解释，可参考：<span class="exturl" data-url="aHR0cHM6Ly93d3cuaG9sbGlzY2h1YW5nLmNvbS9hcmNoaXZlcy8xMTQ0">https://www.hollischuang.com/archives/1144</span></p><h4 id="protobuf"><a class="anchor" href="#protobuf">#</a> ProtoBuf</h4><p><code>ProtoBuf</code> （Google Protocol Buffers）是一种灵活，高效，自动化机制的结构数据序列化方法，可类比 XML ，但是它比 XML 更小、更快、更为简单。你可以定义数据的结构，然后使用 ProtoBuf 生成的源代码轻松的在各种数据流中使用各种语言进行编写和读取结构数据。你甚至可以更新数据结构，而不破坏根据旧数据结构编译而成并且已部署的程序。</p><table><thead><tr><th>对比方面</th><th>XML</th><th>JSON</th><th>ProtoBuf</th></tr></thead><tbody><tr><td>数据结构</td><td>一般复杂</td><td>简单</td><td>比较复杂</td></tr><tr><td>数据存储方式</td><td>文本</td><td>文本</td><td>二进制</td></tr><tr><td>数据存储大小</td><td>大</td><td>一般</td><td>小</td></tr><tr><td>解析效率</td><td>慢</td><td>一般</td><td>快</td></tr><tr><td>跨语言支持</td><td>非常多</td><td>多</td><td>一般</td></tr><tr><td>学习成本</td><td>比较繁琐</td><td>简单</td><td>一般</td></tr><tr><td>开发成本</td><td>一般</td><td>低</td><td>一般</td></tr></tbody></table><p>ProtoBuf 文件以 <code>.proto</code> 作为后缀名，下面是一个简单的 ProtoBuf 文件内容示例：</p><figure class="highlight protobuf"><figcaption data-lang="Protocol Buffers"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">syntax</span> <span class="token operator">=</span> <span class="token string">"proto3"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">message</span> <span class="token class-name">Person</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token keyword">required</span> <span class="token builtin">string</span> name <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token keyword">required</span> <span class="token builtin">int32</span> id <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token keyword">optional</span> <span class="token builtin">string</span> email <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre></pre></td></tr><tr><td data-num="8"></td><td><pre>  <span class="token keyword">enum</span> <span class="token class-name">PhoneType</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    MOBILE <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    HOME <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    WORK <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="13"></td><td><pre></pre></td></tr><tr><td data-num="14"></td><td><pre>  <span class="token keyword">message</span> <span class="token class-name">PhoneNumber</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token keyword">required</span> <span class="token builtin">string</span> number <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token keyword">optional</span> <span class="token positional-class-name class-name">PhoneType</span> type <span class="token operator">=</span> <span class="token number">2</span> <span class="token punctuation">[</span><span class="token annotation">default</span> <span class="token operator">=</span> HOME<span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="18"></td><td><pre></pre></td></tr><tr><td data-num="19"></td><td><pre>  <span class="token keyword">repeated</span> <span class="token positional-class-name class-name">PhoneNumber</span> phone <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h4 id="为什么说序列化并不安全"><a class="anchor" href="#为什么说序列化并不安全">#</a> 为什么说序列化并不安全</h4><p>因为序列化的对象数据转换为二进制，并且完全可逆。在 RMI 调用时，所有 private 字段的数据都以明文二进制的形式出现在网络的套接字上，</p><p>更加深入的理解，可参考：<span class="exturl" data-url="aHR0cHM6Ly93d3cuamlhbnNodS5jb20vcC9mYTkxMmNlMDQyNmY=">https://www.jianshu.com/p/fa912ce0426f</span></p><h3 id="注解"><a class="anchor" href="#注解">#</a> 注解</h3><h4 id="元注解"><a class="anchor" href="#元注解">#</a> 元注解</h4><p>元注解，即定义其他注解的注解。元注解有四个：</p><ul><li><p>@Target（表示该注解可以用于什么地方）</p></li><li><p>@Retention（表示在什么级别保存该注解信息）</p></li><li><p>@Documented（将此注解包含再 javadoc 中）</p></li><li><p>@Inherited（允许子类继承父类中的注解）</p></li></ul><h4 id="自定义注解"><a class="anchor" href="#自定义注解">#</a> 自定义注解</h4><p>除了元注解，都是自定义注解。通过元注解定义出来的注解。如我们常用的 Override 、Autowire 等。 日常开发中也可以自定义一个注解，这些都是自定义注解。</p><h4 id="java中常用注解使用"><a class="anchor" href="#java中常用注解使用">#</a> Java 中常用注解使用</h4><ul><li><p>@Override 表示当前方法覆盖了父类的方法</p></li><li><p>@Deprecation 表示方法已经过时，方法上有横线，使用时会有警告。</p></li><li><p>@SuppressWarnings 表示关闭一些警告信息 (通知 java 编译器忽略特定的编译警告)</p></li><li><p>@SafeVarargs (jdk1.7 更新) ：专门为抑制 “堆污染” 警告提供的。</p></li><li><p>@FunctionalInterface (jdk1.8 更新) ：用来指定某个接口必须是函数式接口，否则就会编译出错。</p></li></ul><h4 id="注解与反射的结合"><a class="anchor" href="#注解与反射的结合">#</a> 注解与反射的结合</h4><p>注解与反射结合使用示例：</p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Test</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span>RUNTIME<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span>FIELD<span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token annotation punctuation">@interface</span> <span class="token class-name">MyAnnotation</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>        <span class="token keyword">int</span> <span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="8"></td><td><pre></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">MyBean</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>        <span class="token annotation punctuation">@MyAnnotation</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="11"></td><td><pre>        <span class="token keyword">private</span> <span class="token keyword">int</span> value<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre></pre></td></tr><tr><td data-num="13"></td><td><pre>        <span class="token annotation punctuation">@Override</span></pre></td></tr><tr><td data-num="14"></td><td><pre>        <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>            <span class="token keyword">return</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="18"></td><td><pre></pre></td></tr><tr><td data-num="19"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>            <span class="token class-name">Field</span> field <span class="token operator">=</span> <span class="token class-name">MyBean</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getDeclaredField</span><span class="token punctuation">(</span><span class="token string">"value"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 获取成员变量 value</span></pre></td></tr><tr><td data-num="22"></td><td><pre>            field<span class="token punctuation">.</span><span class="token function">setAccessible</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 将 value 设置成可访问的</span></pre></td></tr><tr><td data-num="23"></td><td><pre>            <span class="token keyword">if</span> <span class="token punctuation">(</span>field<span class="token punctuation">.</span><span class="token function">isAnnotationPresent</span><span class="token punctuation">(</span><span class="token class-name">MyAnnotation</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token comment">// 判断成员变量是否有注解</span></pre></td></tr><tr><td data-num="24"></td><td><pre>                <span class="token class-name">MyAnnotation</span> myAnnotation <span class="token operator">=</span> field<span class="token punctuation">.</span><span class="token function">getAnnotation</span><span class="token punctuation">(</span><span class="token class-name">MyAnnotation</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 获取定义在成员变量中的注解 MyAnnotation</span></pre></td></tr><tr><td data-num="25"></td><td><pre>                <span class="token keyword">int</span> value <span class="token operator">=</span> myAnnotation<span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 获取定义在 MyBean 的 MyAnnotation 里面属性值</span></pre></td></tr><tr><td data-num="26"></td><td><pre>                <span class="token class-name">MyBean</span> myBean <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyBean</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>                field<span class="token punctuation">.</span><span class="token function">setInt</span><span class="token punctuation">(</span>myBean<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 将注解的值 20 可以赋给成员变量 value</span></pre></td></tr><tr><td data-num="28"></td><td><pre>                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>myBean<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 验证结果</span></pre></td></tr><tr><td data-num="29"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="30"></td><td><pre>        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="31"></td><td><pre>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="32"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>        <span class="token punctuation">;</span></pre></td></tr><tr><td data-num="34"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="35"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h4 id="spring常用注解"><a class="anchor" href="#spring常用注解">#</a> Spring 常用注解</h4><ul><li><p>@Configuration 把一个类作为一个 IoC 容器，它的某个方法头上如果注册了 @Bean，就会作为这个 Spring 容器中的 Bean。</p></li><li><p>@Scope 注解 作用域</p></li><li><p>@Lazy (true) 表示延迟初始化</p></li><li><p>@Service 用于标注业务层组件</p></li><li><p>@Controller 用于标注控制层组件 @Repository 用于标注数据访问组件，即 DAO 组件。</p></li><li><p>@Component 泛指组件，当组件不好归类的时候，我们可以使用这个注解进行标注。</p></li><li><p>@Scope 用于指定 scope 作用域的（用在类上）</p></li><li><p>@PostConstruct 用于指定初始化方法（用在方法上）</p></li><li><p>@PreDestory 用于指定销毁方法（用在方法上）</p></li><li><p>@DependsOn 定义 Bean 初始化及销毁时的顺序</p></li><li><p>@Primary 自动装配时当出现多个 Bean 候选者时，被注解为 @Primary 的 Bean 将作为首选者，否则将抛出异常</p></li><li><p>@Autowired 默认按类型装配，如果我们想使用按名称装配，可以结合 @Qualifier 注解一起使用。如下：</p></li><li><p>@Autowired @Qualifier (&quot;personDaoBean&quot;) 存在多个实例配合使用</p></li><li><p>@Resource 默认按名称装配，当找不到与名称匹配的 bean 才会按类型装配。</p></li><li><p>@PostConstruct 初始化注解</p></li><li><p>@PreDestroy 摧毁注解，默认，单例，启动就加载</p></li></ul><h3 id="jms"><a class="anchor" href="#jms">#</a> JMS</h3><blockquote><p>关于 JMS 及其实现，这里仅提出梗要，更多详细内容将记录在 Java 高级篇相关文章内。</p></blockquote><h4 id="什么是java消息服务"><a class="anchor" href="#什么是java消息服务">#</a> 什么是 Java 消息服务</h4><p><code>JMS</code> 即 Java 消息服务（Java Message Server）应用程序接口，它是 Java 平台中关于面向消息中间件（MOM）的 API，用于两个应用程序之间，或分布式系统中发送消息，进行异步通信，Java 消息服务是一个与具体平台无关的 API，绝大多数 MOM 提供商都对 JMS 提供支持。</p><h4 id="jms消息传送模型"><a class="anchor" href="#jms消息传送模型">#</a> JMS 消息传送模型</h4><p>JMS 具有两种通信模式：</p><ol><li><p>Point-to-Point Messaging Domain（点对点通信模型）</p></li><li><p>Publish/Subscribe Messaging Domain（发布 / 订阅通信模型）</p></li></ol><h4 id="jms-编程模型"><a class="anchor" href="#jms-编程模型">#</a> JMS 编程模型</h4><p>JMS 编程模型由以下主体构成：</p><ul><li><p>ConnectionFactory：连接工厂（创建连接）</p></li><li><p>Connection：连接（创建会话）</p></li><li><p>Session：会话（创建目的地、生产者、消费者、消息）</p></li><li><p>Destination：目的地（消息发送目标）</p></li><li><p>MessageProducer：消息生产者（发送消息）</p></li><li><p>MessageConsumer：消息消费者（消费消息）</p></li><li><p>Message：消息（内容主体）</p></li></ul><p><img data-src="https://img.xfc-exclave.com/2021/08/4cd1c84d75eea9166690e8fa2b7180101629451502.png" alt="JMS编程模型关系图"></p><h4 id="常用的-jms-实现"><a class="anchor" href="#常用的-jms-实现">#</a> 常用的 JMS 实现</h4><ul><li><p>ActiveMQ</p></li><li><p>RabbitMQ</p></li><li><p>RocketMQ</p></li></ul><blockquote><p>注意：kafka 不是 JMS 的实现。</p></blockquote><h3 id="jmx"><a class="anchor" href="#jmx">#</a> JMX</h3><p>JMX 全称为 Java Management Extensions，它是一个 Java 平台的管理和监控接口。它最常用到的就是对于 JVM 的监测和管理，比如 JVM 内存、CPU 使用率、线程数、垃圾收集情况等等。另外，还可以用作日志级别的动态修改，比如 log4j 就支持 JMX 方式动态修改线上服务的日志级别。最主要的还是被用来做各种监控工具，如 Spring Boot Actuator、JConsole、VisualVM 等。</p><p>为了标准化管理和监控，Java 平台使用 JMX 作为管理和监控的标准接口，任何程序，只要按 JMX 规范访问这个接口，就可以获取所有管理与监控信息。</p><p><img data-src="https://img.xfc-exclave.com/2021/08/42dfc37951bf02f361fc0111444eaaa81629705067.jpg" alt="JMS架构图示"></p><p>JMX 把所有被管理的资源都称为 MBean（Managed Bean），这些 MBean 全部由 MBeanServer 管理，如果要访问 MBean，可以通过 MBeanServer 对外提供的访问接口，例如通过 RMI 或 HTTP 访问。</p><p>使用 JMX 不需要安装任何额外组件，也不需要第三方库，因为 MBeanServer 已经内置在 JavaSE 标准库中了。JavaSE 还提供了一个 <code>jconsole</code> 程序，用于通过 RMI 连接到 MBeanServer，这样就可以管理整个 Java 进程。</p><p>JVM 会把自身的各种资源以 MBean 注册到 JMX 中，同时，程序自己的配置、监控信息也可以作为 MBean 注册到 JMX，这样，管理程序就可以直接控制程序暴露的 MBean。</p><p>JMX 中 MBean 有 DynamicMBean 和 StandardMBean 两类，前者动态组装一个监控对象，较为复杂，但更为灵活，不需要监控类继承 * MBean 接口，后者简单。</p><p>应用程序使用 JMX 只需要两步：</p><ol><li><p>编写 MBean 提供管理接口和监控数据；</p></li><li><p>注册 MBean（在 Spring 应用中，这一步将自动完成）。</p></li></ol><p>示例：</p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>management<span class="token punctuation">.</span></span><span class="token class-name">MBeanServer</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>management<span class="token punctuation">.</span></span><span class="token class-name">ObjectName</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>management<span class="token punctuation">.</span></span><span class="token class-name">ManagementFactory</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HelloJMX</span> <span class="token keyword">implements</span> <span class="token class-name">HelloJMXMBean</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token annotation punctuation">@Override</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>        <span class="token keyword">return</span> name<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="12"></td><td><pre></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token annotation punctuation">@Override</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setName</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="17"></td><td><pre></pre></td></tr><tr><td data-num="18"></td><td><pre>    <span class="token annotation punctuation">@Override</span></pre></td></tr><tr><td data-num="19"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">printHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"HelloJMX, "</span> <span class="token operator">+</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="22"></td><td><pre></pre></td></tr><tr><td data-num="23"></td><td><pre>    <span class="token annotation punctuation">@Override</span></pre></td></tr><tr><td data-num="24"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">printHello</span><span class="token punctuation">(</span><span class="token class-name">String</span> whoName<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"HelloJMX, it is "</span> <span class="token operator">+</span> whoName<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="27"></td><td><pre></pre></td></tr><tr><td data-num="28"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>        <span class="token class-name">MBeanServer</span> server <span class="token operator">=</span> <span class="token class-name">ManagementFactory</span><span class="token punctuation">.</span><span class="token function">getPlatformMBeanServer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="30"></td><td><pre></pre></td></tr><tr><td data-num="31"></td><td><pre>        <span class="token class-name">ObjectName</span> helloName <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectName</span><span class="token punctuation">(</span><span class="token string">"george:name=HelloJMX"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="32"></td><td><pre>        server<span class="token punctuation">.</span><span class="token function">registerMBean</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">HelloJMX</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> helloName<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="33"></td><td><pre></pre></td></tr><tr><td data-num="34"></td><td><pre>        <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token class-name">Long</span><span class="token punctuation">.</span>MAX_VALUE<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="35"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="36"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>启动示例程序，然后在终端启动一个 <code>JConsole</code> ，并连接该示例程序的进程，监控窗口如下：</p><p><img data-src="https://img.xfc-exclave.com/2021/08/08b5de3bc7fd84487e707c854ce726911629710955.png" alt="JConsole监控窗口"></p><blockquote><p>启动 jconsole 方法：在终端执行命令 <code>jconsole</code> 即可。</p></blockquote><p>Java 监控相关软件包：</p><ul><li><p>java.lang.management.*</p></li><li><p>javax.management.*</p></li></ul><p>更多内容，请阅读：</p><ul><li><p><span class="exturl" data-url="aHR0cHM6Ly93d3cubGlhb3h1ZWZlbmcuY29tL3dpa2kvMTI1MjU5OTU0ODM0Mzc0NC8xMjgyMzg1Njg3NjA5Mzc4">https://www.liaoxuefeng.com/wiki/1252599548343744/1282385687609378</span></p></li><li><p><span class="exturl" data-url="aHR0cHM6Ly96aHVhbmxhbi56aGlodS5jb20vcC8xNjY1MzA0NDI=">https://zhuanlan.zhihu.com/p/166530442</span></p></li></ul><h3 id="泛型"><a class="anchor" href="#泛型">#</a> 泛型</h3><p>Java 泛型（generics）是 JDK 5 中引入的⼀个新特性， 允许在定义类和接口的时候使用类型参数 。</p><p>声明的类型参数在使用时用具体的类型来替换。 泛型最主要的应⽤是在 JDK 5 中的新集合类框架中。</p><p>泛型最⼤的好处是可以提⾼代码的复用性。 以 List 接口为例，我们可以将 String、Integer 等类型放⼊ List 中，如不用泛型，存放 String 类型要写⼀个 List 接口，存放 Integer 要写另外⼀个 List 接口，泛型可以很好的解决这个问题。</p><h4 id="泛型与继承"><a class="anchor" href="#泛型与继承">#</a> 泛型与继承</h4><h4 id="类型擦除"><a class="anchor" href="#类型擦除">#</a> 类型擦除</h4><p>Java 语言的泛型采用的是擦除法实现的伪泛型，泛型信息（类型变量、参数化类型）编译之后通通被除掉了。使用擦除法的好处就是实现简单、并且能够向后兼容，运行期也能够节省一些类型所占的内存空间。而擦除法的坏处就是，通过这种机制实现的泛型远不如真泛型灵活和强大。Java 选取这种方法是一种折中，因为 Java 最开始的版本是不支持泛型的，为了兼容以前的库而不得不使用擦除法。</p><p>泛型类型只有在静态类型检查期间才出现，在此之后，程序中的所有泛型类型都将被擦除，替换成它们非泛型上界。</p><p>可以简单理解为：类型擦除即是将 Java 泛型代码转换为普通 Java 代码。</p><p>类型擦除的主要过程：</p><ol><li><p>将所有的泛型参数用其最左边界（最顶级的父类型）类型替换。</p></li><li><p>移除所有的类型参数。</p></li></ol><h4 id="泛型中的ktveobject"><a class="anchor" href="#泛型中的ktveobject">#</a> 泛型中的 KTVE?object</h4><ul><li><p>K 代表 Key 的意思。</p></li><li><p>T 代表一般的任何类。</p></li><li><p>V 代表 Value 的意思，通常与 K 一起配合使用。</p></li><li><p>E 代表 Element 的意思，或者 Exception 异常的意思。</p></li><li><p>? 通配符， 代表某种确定的类型，但是又有不确定性。 比如 <code>&lt;? extends Collection&gt;</code> 不确定类型，确定实现了 Collection 接口。能确定上限，或确定下限。</p></li><li><p>object 超类，需要强制类型转换，编译时可能类型不一致导致报错。</p></li></ul><h4 id="限定通配符和非限定通配符"><a class="anchor" href="#限定通配符和非限定通配符">#</a> 限定通配符和非限定通配符</h4><ul><li><p><code>&lt;?&gt;</code> 被称为非限定通配符，可以用任意类型来替代。</p></li><li><p><code>&lt;? extends T&gt;</code> 被称为有上限的限定通配符，泛型类型必须为 T 或 T 的子类。</p><p>extends 被称为上界限定符。</p></li><li><p><code>&lt;? super T&gt;</code> 被称为有下限的限定通配符，泛型类型必须为 T 或 T 的父类。</p><p>super 被称为下界限定符。</p></li></ul><h4 id="list-list和listobject"><a class="anchor" href="#list-list和listobject">#</a> List、List&lt;?&gt; 和 List&lt;Object&gt;</h4><ol><li><p>List&lt;Object&gt; 和 List 的区别</p><p>原始类型 List 和带参数类型 <code>List&lt;Object&gt;</code> 之间的主要区别是，在编译时编译器不会对原始类型进行类型安全检查，却会对带参数的类型进行检查。它们之间的第二点区别是，你可以把任何带参数的类型传递给原始类型 List，但却不能把 List 传递给接受 <code>List&lt;Object&gt;</code> 的方法，因为会产生编译错误。</p></li><li><p>List&lt;Object&gt; 和 List&lt;?&gt; 的区别</p><p><code>List&lt;?&gt;</code> 是一个未知类型的 List，而 <code>List&lt;Object&gt;</code> 其实是任意类型的 List。你可以把 <code>List&lt;String&gt;</code> ， <code>List&lt;Integer&gt;</code> 赋值给 <code>List&lt;?&gt;</code> ，却不能把 <code>List&lt;String&gt;</code> 赋值给 <code>List&lt;Object&gt;</code> 。</p></li></ol><h3 id="单元测试"><a class="anchor" href="#单元测试">#</a> 单元测试</h3><blockquote><p>单元测试（unit testing），是指对软件中的最小可测试单元进行检查和验证。对于单元测试中单元的含义，一般来说，要根据实际情况去判定其具体含义，Java 里单元指一个类，图形化的软件中可以指一个窗口或一个菜单等。总的来说，单元就是人为规定的最小的被测功能模块。单元测试是在软件开发过程中要进行的最低级别的测试活动，软件的独立单元将在与程序的其他部分相隔离的情况下进行测试。</p><p>quote from <span class="exturl" data-url="aHR0cHM6Ly9iYWlrZS5iYWlkdS5jb20vaXRlbS8lRTUlOEQlOTUlRTUlODUlODMlRTYlQjUlOEIlRTglQUYlOTU=">百度百科_单元测试</span></p></blockquote><p>注：本文对单元测试相关内容归类为了解性知识（但其实这部分知识点应用频率也不算太低，总之，根据个人情况吧），这里仅作简要说明，如果想要了解更多内容，可以查看这一部分推荐的相关链接。</p><p>关于单元测试的讨论，可以看这一片知乎帖子：<span class="exturl" data-url="aHR0cHM6Ly93d3cuemhpaHUuY29tL3F1ZXN0aW9uLzI4NzI5MjYx">https://www.zhihu.com/question/28729261</span></p><h4 id="junit"><a class="anchor" href="#junit">#</a> JUnit</h4><p>JUnit 是一个 Java 编程语言的单元测试框架，是截止目前 Java 单元测试领域最流行的框架。</p><p>关于 JUnit5 介绍，可以阅读：<span class="exturl" data-url="aHR0cHM6Ly96aHVhbmxhbi56aGlodS5jb20vcC8xMTE3MDY2Mzk=">https://zhuanlan.zhihu.com/p/111706639</span></p><h4 id="mock"><a class="anchor" href="#mock">#</a> Mock</h4><p>Mock 通常是指，在测试一个对象 A 时，我们构造一些假的对象来模拟与 A 之间的交互，而这些 Mock 对象的行为是我们事先设定且符合预期。通过这些 Mock 对象来测试 A 在正常逻辑，异常逻辑或压力情况下工作是否正常。</p><p>引入 Mock 最大的优势在于：Mock 的行为固定，它确保当你访问该 Mock 的某个方法时总是能够获得一个没有任何逻辑的直接就返回的预期结果。</p><h4 id="mockito"><a class="anchor" href="#mockito">#</a> Mockito</h4><p>Mockio 是一款 Java Mock 测试工具。</p><p>关于 Mockio ，可以参考：<span class="exturl" data-url="aHR0cHM6Ly93d3cuY25ibG9ncy5jb20vYm9kaGl0cmVlL3AvOTQ1NjUxNS5odG1s">https://www.cnblogs.com/bodhitree/p/9456515.html</span></p><h4 id="内存数据库h2"><a class="anchor" href="#内存数据库h2">#</a> 内存数据库（h2）</h4><p>H2 是一个开源的嵌入式（非嵌入式设备）数据库引擎，它是一个用 Java 开发的类库，可直接嵌入到应用程序中，与应用程序一起打包发布，不受平台限制。</p><p>Java H2 数据库连接示例：</p><ol><li><p>下载启动</p><p>下载地址：<span class="exturl" data-url="aHR0cDovL3d3dy5oMmRhdGFiYXNlLmNvbS9odG1sL2Rvd25sb2FkLmh0bWw=">http://www.h2database.com/html/download.html</span></p><p>运行脚本文件 <code>h2.bat</code></p></li><li><p>在测试项目中添加依赖</p><figure class="highlight xml"><figcaption data-lang="XML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>com.h2database<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>h2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>1.4.190<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span></pre></td></tr></table></figure></li><li><p>编写测试文件</p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>h2<span class="token punctuation">.</span>tools<span class="token punctuation">.</span></span><span class="token class-name">Server</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">H2Demo</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token keyword">private</span> <span class="token class-name">Server</span> server<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token keyword">private</span> <span class="token class-name">String</span> port <span class="token operator">=</span> <span class="token string">"8082"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token keyword">private</span> <span class="token class-name">String</span> dbDir <span class="token operator">=</span> <span class="token string">"jdbc:h2:tcp://192.168.0.36/~/test"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token keyword">private</span> <span class="token class-name">String</span> user <span class="token operator">=</span> <span class="token string">"sa"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token keyword">private</span> <span class="token class-name">String</span> password <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">startServer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"正在启动h2..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>            server <span class="token operator">=</span> <span class="token class-name">Server</span><span class="token punctuation">.</span><span class="token function">createTcpServer</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">&#123;</span><span class="token string">"-tcpPort"</span><span class="token punctuation">,</span> port<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"启动h2出错："</span> <span class="token operator">+</span> e<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="22"></td><td><pre></pre></td></tr><tr><td data-num="23"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">stopServer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>        <span class="token keyword">if</span> <span class="token punctuation">(</span>server <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"正在关闭h2..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>            server<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"关闭成功."</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="30"></td><td><pre></pre></td></tr><tr><td data-num="31"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">useH2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="32"></td><td><pre>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>            <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">"org.h2.Driver"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="34"></td><td><pre>            <span class="token class-name">Connection</span> conn <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span>dbDir<span class="token punctuation">,</span> user<span class="token punctuation">,</span> password<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="35"></td><td><pre>            <span class="token class-name">Statement</span> stat <span class="token operator">=</span> conn<span class="token punctuation">.</span><span class="token function">createStatement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="36"></td><td><pre>            <span class="token comment">// insert data</span></pre></td></tr><tr><td data-num="37"></td><td><pre><span class="token comment">//            stat.execute("CREATE TABLE TEST(NAME VARCHAR)");</span></pre></td></tr><tr><td data-num="38"></td><td><pre>            stat<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token string">"INSERT INTO TEST VALUES('Hello World')"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="39"></td><td><pre>            <span class="token comment">// use data</span></pre></td></tr><tr><td data-num="40"></td><td><pre>            <span class="token class-name">ResultSet</span> result <span class="token operator">=</span> stat<span class="token punctuation">.</span><span class="token function">executeQuery</span><span class="token punctuation">(</span><span class="token string">"select name from test "</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="41"></td><td><pre>            <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="42"></td><td><pre>            <span class="token keyword">while</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="43"></td><td><pre>                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>i<span class="token operator">++</span> <span class="token operator">+</span> <span class="token string">":"</span> <span class="token operator">+</span> result<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="44"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="45"></td><td><pre>            result<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="46"></td><td><pre>            stat<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="47"></td><td><pre>            conn<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="48"></td><td><pre>        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="49"></td><td><pre>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="50"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="51"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="52"></td><td><pre></pre></td></tr><tr><td data-num="53"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="54"></td><td><pre>        <span class="token class-name">H2Demo</span> h2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">H2Demo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="55"></td><td><pre><span class="token comment">//        h2.startServer();</span></pre></td></tr><tr><td data-num="56"></td><td><pre>        h2<span class="token punctuation">.</span><span class="token function">useH2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="57"></td><td><pre><span class="token comment">//        h2.stopServer();</span></pre></td></tr><tr><td data-num="58"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"==END=="</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="59"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="60"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure></li></ol><h3 id="正则表达式"><a class="anchor" href="#正则表达式">#</a> 正则表达式</h3><p>正则表达式描述了一种字符串匹配的模式，可以用来检查一个串是否含有某种子串、将匹配的子串替换或者从某个串中取出符合某个条件的子串等。</p><p>正则表达式在线工具：</p><ul><li><p><span class="exturl" data-url="aHR0cHM6Ly9jLnJ1bm9vYi5jb20vZnJvbnQtZW5kLzg1NA==">https://c.runoob.com/front-end/854</span></p></li><li><p><span class="exturl" data-url="aHR0cDovL3Rvb2wuY2hpbmF6LmNvbS9yZWdleA==">http://tool.chinaz.com/regex</span></p></li></ul><h3 id="常用的java工具库"><a class="anchor" href="#常用的java工具库">#</a> 常用的 Java 工具库</h3><h4 id="commonslang"><a class="anchor" href="#commonslang">#</a> commons.lang</h4><p>在 <code>org.apache.commons.lang</code> 包中提供了一些有用的包含 static 方法的 Util 类。除了 6 个 Exception 类和 2 个已经 deprecated 的数字类之外，commons.lang 包共包含了 17 个实用的类：</p><ul><li><p>ArrayUtils – 用于对数组的操作，如添加、查找、删除、子数组、倒序、元素类型转换等；</p></li><li><p>BitField – 用于操作位元，提供了一些方便而安全的方法；</p></li><li><p>BooleanUtils – 用于操作和转换 boolean 或者 Boolean 及相应的数组；</p></li><li><p>CharEncoding – 包含了 Java 环境支持的字符编码，提供是否支持某种编码的判断；</p></li><li><p>CharRange – 用于设定字符范围并做相应检查；</p></li><li><p>CharSet – 用于设定一组字符作为范围并做相应检查；</p></li><li><p>CharSetUtils – 用于操作 CharSet；</p></li><li><p>CharUtils – 用于操作 char 值和 Character 对象；</p></li><li><p>ClassUtils – 用于对 Java 类的操作，不使用反射；</p></li><li><p>ObjectUtils – 用于操作 Java 对象，提供 null 安全的访问和其他一些功能；</p></li><li><p>RandomStringUtils – 用于生成随机的字符串；</p></li><li><p>SerializationUtils – 用于处理对象序列化，提供比一般 Java 序列化更高级的处理能力；</p></li><li><p>StringEscapeUtils – 用于正确处理转义字符，产生正确的 Java、JavaScript、HTML、XML 和 SQL 代码；</p></li><li><p>StringUtils – 处理 String 的核心类，提供了相当多的功能；</p></li><li><p>SystemUtils – 在 java.lang.System 基础上提供更方便的访问，如用户路径、Java 版本、时区、操作系统等判断；</p></li><li><p>Validate – 提供验证的操作，有点类似 assert 断言；</p></li><li><p>WordUtils – 用于处理单词大小写、换行等。</p></li></ul><blockquote><p>选择记住一些常用的就行。</p></blockquote><h4 id="guava-libraries"><a class="anchor" href="#guava-libraries">#</a> guava-libraries</h4><p>Guava-Libraries 是一套来自 Google 的核心 Java 库，其中包括新的集合类型（如 multimap 和 multiset）、不可变的集合、图库，以及并发、I/O、散列、缓存、基元、字符串等实用工具！它被广泛用于 Google 内部的大多数 Java 项目，也被许多其他公司广泛使用。</p><p>Guava 的好处：</p><ul><li><p>标准化 - Guava 库是由谷歌托管。</p></li><li><p>高效 - 可靠，快速和有效的扩展 JAVA 标准库</p></li><li><p>优化 - Guava 库经过高度的优化。</p></li><li><p>函数式编程 - 增加 JAVA 功能和处理能力。</p></li><li><p>实用程序 - 提供了经常需要在应用程序开发的许多实用程序类。</p></li><li><p>验证 - 提供标准的故障安全验证机制。</p></li><li><p>最佳实践 - 强调最佳的做法。</p></li></ul><p>本部分内容参考自：<span class="exturl" data-url="aHR0cHM6Ly9tdWxhbm9zLm9zY2hpbmEubmV0L3AvZ3VhdmE=">https://mulanos.oschina.net/p/guava</span></p><h4 id="netty-2"><a class="anchor" href="#netty-2">#</a> netty</h4><p>[❗TODO]{.label .danger} 待完善</p><h3 id="api-spi"><a class="anchor" href="#api-spi">#</a> API &amp; SPI</h3><h4 id="api"><a class="anchor" href="#api">#</a> API</h4><blockquote><p>API（Application Programming Interface，应用程序接口）是一些预先定义的接口（如函数、HTTP 接口），或指软件系统不同组成部分衔接的约定。用来提供应用程序与开发人员基于某软件或硬件得以访问的一组例程，而又无需访问源码，或理解内部工作机制的细节。</p><p>quote from <span class="exturl" data-url="aHR0cHM6Ly9iYWlrZS5iYWlkdS5jb20vaXRlbS9BUEk=">百度百科_API</span></p></blockquote><h4 id="spi"><a class="anchor" href="#spi">#</a> SPI</h4><p>SPI 全称 Service Provider Interface，是 Java 提供的一套用来被第三方实现或者扩展的 API，它可以用来启用框架扩展和替换组件。</p><p>如何定义 SPI 及 SPI 的实现原理，参考：<span class="exturl" data-url="aHR0cHM6Ly93d3cuY25ibG9ncy5jb20vb3NreWhnL3AvMTA4MDAwNTEuaHRtbA==">https://www.cnblogs.com/oskyhg/p/10800051.html</span></p><h4 id="api与spi的关系和区别"><a class="anchor" href="#api与spi的关系和区别">#</a> API 与 SPI 的关系和区别</h4><p>API 描述的是可以直接使用的方法，达到某种功能的实现。可以简单的理解为服务方暴露自己的服务供客户方调用。比如 Java 的 api 文档，服务方是 JDK，客户方就是 Java 开发人员。API 由开发人员调用。</p><p>SPI：服务方提供的不在是提供具体的方法，而是提供对象的接口，客户方需要实现接口， 然后服务方调用客户方的接口实现类，再来实现客户的某种功能。SPI 是框架接口规范，需要框架开发人员实现。</p><p>但有时候，API 和 SPI 是分不清的，比如 Connection 接口，Driver 接口等。</p><h3 id="异常"><a class="anchor" href="#异常">#</a> 异常</h3><h4 id="异常类型"><a class="anchor" href="#异常类型">#</a> 异常类型</h4><p><img data-src="http://image.mamicode.com/info/201904/20190426211659356277.png" alt="异常分类结构图"></p><p>上图简要展示了异常类实现的结构图（并非全部），除此之外，用户也可以自定义异常实现。</p><ol><li><p>Throwable 是 Java 异常的根类，所有的异常都是从 Throwable 继承而来的。</p></li><li><p>Throwable 有两个子类，Error 和 Exception。</p></li></ol><h4 id="正确处理异常"><a class="anchor" href="#正确处理异常">#</a> 正确处理异常</h4><p>代码中的异常处理其实是对可检查异常的处理，主要有以下几个要点：</p><ol><li><p>通过 <code>try&#123;&#125;catch()&#123;&#125;</code> 语句块处理异常。</p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">try</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token comment">// 可能出现异常的程序代码</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">&#125;</span> <span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token class-name">ExceptionName</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token comment">// 捕获异常后的处理</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure></li><li><p>通过 <code>throw/throws</code> 抛出异常交由上层处理。</p><p>除了及时捕获并处理异常外，程序也可以选择暂不处理，而是交给上一层，但必须保证某一层代码要处理该异常。</p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Test</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>            <span class="token keyword">int</span> result <span class="token operator">=</span> <span class="token function">divide</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">ArithmeticException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"---------- method divide() exception ----------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="10"></td><td><pre></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">divide</span><span class="token punctuation">(</span><span class="token keyword">int</span> numerator<span class="token punctuation">,</span> <span class="token keyword">int</span> denominator<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ArithmeticException</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>        <span class="token keyword">return</span> numerator <span class="token operator">/</span> denominator<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure></li><li><p>关键字 <code>finally</code> 的使用。</p><p>finally 关键字用来创建在 try 代码块后面执行的代码块，无论是否发生异常，finally 代码块中的代码总会被执行。在 finally 代码块中，尝用于运行清理类型等收尾善后性质的语句。</p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre>tyr <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token comment">// 可能出现异常的程序代码</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">&#125;</span> <span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token class-name">ExceptionName</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token comment">// 捕获异常后的处理</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#125;</span> <span class="token keyword">finally</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token comment">// 无论是否出现异常，都需要执行的代码</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure></li></ol><h4 id="自定义异常"><a class="anchor" href="#自定义异常">#</a> 自定义异常</h4><p>在 Java 中要想创建自定义异常，需要继承 Throwable 或者他的子类 Exception。</p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyBusinessException</span> <span class="token keyword">extends</span> <span class="token class-name">Exception</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token comment">// 根据需要重写构造方法及异常处理内部逻辑</span></pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token keyword">public</span> <span class="token class-name">MyBusinessException</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="7"></td><td><pre></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token keyword">public</span> <span class="token class-name">MyBusinessException</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>        <span class="token keyword">super</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="11"></td><td><pre></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token keyword">public</span> <span class="token class-name">MyBusinessException</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">,</span> <span class="token class-name">Throwable</span> cause<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>        <span class="token keyword">super</span><span class="token punctuation">(</span>message<span class="token punctuation">,</span> cause<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="15"></td><td><pre></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token keyword">public</span> <span class="token class-name">MyBusinessException</span><span class="token punctuation">(</span><span class="token class-name">Throwable</span> cause<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>        <span class="token keyword">super</span><span class="token punctuation">(</span>cause<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h4 id="error-和-exception"><a class="anchor" href="#error-和-exception">#</a> Error 和 Exception</h4><p>Error 是程序无法处理的错误，表示运行程序中较严重的问题，它们在应用程序控制和处理范围之外，而且绝大多数是程序运行时不允许出现的状况（是处理不到的），对于设计合理的应用程序，即使确实发生了错误，本质也不应该试图去处理它所引起的异常状况。</p><p>Exception 是程序本身可以处理的异常。异常处理通常指针对这种类型异常处理，包括非检查异常（编译器不要求强制处理的异常）和检查异常（编译器要求处理的异常）。</p><ul><li><p>Checked Exception</p><p>所有可检查的异常都是需要在代码中处理的。它们的发生是可以预测的，正常的一种情况，可以合理的处理。除了 RuntimeException 及其子类以外，都是可检查的异常。</p></li><li><p>Unchecked Exception</p><p>RuntimeException 及其子类都是非检查异常。比如 NPE 空指针异常，除数为 0 的算数异常 ArithmeticException 等等，这种异常是运行时发生，无法预先捕捉处理的。</p></li></ul><h4 id="异常链"><a class="anchor" href="#异常链">#</a> 异常链</h4><p>当 A 方法调用 B 方法时，B 方法抛出异常，而 A 方法期望抛出一个新的异常，这时则会用到异常链进行处理。</p><p>异常链示例：</p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ExceptionChainTest</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token comment">/**</span></pre></td></tr><tr><td data-num="4"></td><td><pre>     * paly () 抛出【你未遵守公司规定】的异常</pre></td></tr><tr><td data-num="5"></td><td><pre>     * work () 调用 paly ()，捕获【你在玩手机】的异常，并且包装成运行时异常，继续抛出</pre></td></tr><tr><td data-num="6"></td><td><pre>     * main () 调用 work ()，尝试捕获 work () 方法抛出的异常</pre></td></tr><tr><td data-num="7"></td><td><pre>     */</pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>        <span class="token class-name">ExceptionChainTest</span> ct <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ExceptionChainTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>            ct<span class="token punctuation">.</span><span class="token function">work</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="16"></td><td><pre></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">work</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>            <span class="token function">paly</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">BusinessException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>            <span class="token class-name">RuntimeException</span> newExc <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">"----> Please comply with company regulations"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>            newExc<span class="token punctuation">.</span><span class="token function">initCause</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>            <span class="token keyword">throw</span> newExc<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="26"></td><td><pre></pre></td></tr><tr><td data-num="27"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">paly</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">BusinessException</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">BusinessException</span><span class="token punctuation">(</span><span class="token string">"----> Exception: Do not play mobile phones during working hours!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="30"></td><td><pre></pre></td></tr><tr><td data-num="31"></td><td><pre>    <span class="token keyword">class</span> <span class="token class-name">BusinessException</span> <span class="token keyword">extends</span> <span class="token class-name">Exception</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="32"></td><td><pre>        <span class="token keyword">public</span> <span class="token class-name">BusinessException</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>            <span class="token keyword">super</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="34"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="35"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="36"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h4 id="try-with-resource"><a class="anchor" href="#try-with-resource">#</a> try-with-resource</h4><p><code>try-with-resource</code> 是 jdk1.7 引入的语法糖，它使得关闭资源操作无需层层嵌套在 finally。要使用 <code>try-with-resource</code> ，必须先实现 AutoCloseable 接口，其中包含了一个无返回值的 close 方法，Java 与第三方许多类和接口，均实现或扩展了 AutoCloseable 接口，因此开发时不需要显示地重复声明实现。</p><p>例如一段实现文件拷贝的代码：</p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TryWithResourceTest</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>        <span class="token keyword">try</span> <span class="token punctuation">(</span></pre></td></tr><tr><td data-num="4"></td><td><pre>            <span class="token class-name">BufferedInputStream</span> bis <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedInputStream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">"in.txt"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>            <span class="token class-name">BufferedOutputStream</span> bos <span class="token operator">=</span> <span class="token class-name">BufferedOutputStream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">"out.txt"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>        <span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>            <span class="token keyword">int</span> b<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>            <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>b <span class="token operator">=</span> bis<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>                bos<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><blockquote><p>注：使用 try-with-resource 时，不需要手动关闭资源。而事实上，它只是一种语法糖，程序在编译时，会还原出真正的包含有 finally 关闭资源相关逻辑的代码块。</p></blockquote><h4 id="finally和return的执行顺序"><a class="anchor" href="#finally和return的执行顺序">#</a> finally 和 return 的执行顺序</h4><p>如果 try 中有 return 语句， 那么 finally 中的代码还是会执⾏。因为 return 表⽰的是要整个⽅法体返回， 所以，<mark>finally 中的语句会在 return 之前执⾏</mark>。</p><p>但是，在 return 前执行的 finally 块中对数据进行更新的效果，会因为引用类型和值类型而不同。</p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Test</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token function">test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 0</span></pre></td></tr><tr><td data-num="5"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token function">test2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 1</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="7"></td><td><pre></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>        <span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>            <span class="token keyword">return</span> a<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>        <span class="token punctuation">&#125;</span> <span class="token keyword">finally</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>            a<span class="token operator">++</span><span class="token punctuation">;</span><span class="token comment">// 操作引用类型（无效）</span></pre></td></tr><tr><td data-num="16"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>        <span class="token keyword">return</span> a<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="19"></td><td><pre></pre></td></tr><tr><td data-num="20"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">test2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">&#123;</span><span class="token number">0</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>            <span class="token keyword">return</span> arr<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>        <span class="token punctuation">&#125;</span> <span class="token keyword">finally</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>            arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">++</span><span class="token punctuation">;</span><span class="token comment">// 操作值类型（有效）</span></pre></td></tr><tr><td data-num="26"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="28"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id="时间处理"><a class="anchor" href="#时间处理">#</a> 时间处理</h3><h4 id="时区"><a class="anchor" href="#时区">#</a> 时区</h4><p><img data-src="https://img.xfc-exclave.com/2021/08/c6ccf8487f42cf1d65568fcbf84497b21629790347.jpeg" alt="世界时区划分"></p><p>时区划分是高中地理基本知识。如果对时区等基本概念和原理不清楚，可以简单了解下：</p><p>参考：<span class="exturl" data-url="aHR0cHM6Ly9iYWlqaWFoYW8uYmFpZHUuY29tL3M/aWQ9MTY3ODgyNzA1MjE4NjUxMjQ0Mg==">https://baijiahao.baidu.com/s?id=1678827052186512442</span></p><p>对于日常开发而言，你只需要简单记住以下几点即可：</p><ol><li><p>时区分为十一个东时区、十一个西时区、一个中时区和一个东西十二时区。</p></li><li><p>伦敦处于中时区（本初子午线）。</p></li><li><p>北京时间是东八区时间。</p></li><li><p>两地之间每相距一个时区，时间相差一小时。</p></li></ol><h4 id="冬时令和夏时令"><a class="anchor" href="#冬时令和夏时令">#</a> 冬时令和夏时令</h4><p>夏令时、冬令时的出现，是为了充分利用夏天的日照，所以时钟要往前拨快一小时，冬天再把表往回拨一小时。其中夏令时从 3 月第二个周日持续到 11 月第一个周日。</p><ul><li><p>冬令时： 北京和洛杉矶时差：16 北京和纽约时差：13</p></li><li><p>夏令时： 北京和洛杉矶时差：15 北京和纽约时差：12</p></li></ul><h4 id="时间戳"><a class="anchor" href="#时间戳">#</a> 时间戳</h4><p>时间戳（timestamp），一个能表示一份数据在某个特定时间之前已经存在的、 完整的、 可验证的数据，通常是一个字符序列，唯一地标识某一刻的时间。</p><p>时间戳是指格林威治时间 1970 年 01 月 01 日 00 时 00 分 00 秒（北京时间 1970 年 01 月 01 日 08 时 00 分 00 秒）起至现在的总秒数。通俗的讲， 时间戳是一份能够表示一份数据在一个特定时间点已经存在的完整的可验证的数据。</p><h4 id="java中时间api"><a class="anchor" href="#java中时间api">#</a> Java 中时间 API</h4><ol><li><p>java.lang.System</p><p>System 类提供的 <code>currentTimeMillis()</code> 用来返回当前时间与 1970 年 1 月 1 日 0 时 0 分 0 秒之间以毫秒为单位的时间差。</p></li><li><p>java.util.Date</p><p>相关方法当基本用法：</p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token class-name">Date</span> date <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"date = "</span> <span class="token operator">+</span> date<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token class-name">Date</span> date2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token number">1629791405786L</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"date2 = "</span> <span class="token operator">+</span> date2<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token keyword">long</span> time <span class="token operator">=</span> date<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"time = "</span> <span class="token operator">+</span> time<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre></pre></td></tr><tr><td data-num="11"></td><td><pre>    date<span class="token punctuation">.</span><span class="token function">setTime</span><span class="token punctuation">(</span>time<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"date = "</span> <span class="token operator">+</span> date<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><blockquote><p>注意区分 <code>java.util.Date</code> 与 <code>java.sql.Date</code> 。</p></blockquote></li><li><p>java.text.SimpleDateFormat</p><p>这个类主要用来进行时间格式转换，例如：</p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token class-name">Date</span> date <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token class-name">String</span> strDateFormat <span class="token operator">=</span> <span class="token string">"yyyy-MM-dd HH:mm:ss"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token class-name">SimpleDateFormat</span> sdf <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleDateFormat</span><span class="token punctuation">(</span>strDateFormat<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>sdf<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>date<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure></li><li><p>java.util.Calendar</p><p>这是一个日历类。日历字段包含 YEAR、MONTH、DAY_OF_MONTH、HOUR 等，它们都是 Calendar 类的静态常量。</p><p>计算时间差示例：</p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token class-name">LocalDate</span> now <span class="token operator">=</span> <span class="token class-name">LocalDate</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token class-name">LocalDate</span> localDate <span class="token operator">=</span> <span class="token class-name">LocalDate</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">2020</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">26</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token class-name">Period</span> period <span class="token operator">=</span> <span class="token class-name">Period</span><span class="token punctuation">.</span><span class="token function">between</span><span class="token punctuation">(</span>localDate<span class="token punctuation">,</span> now<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>period<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>period<span class="token punctuation">.</span><span class="token function">getYears</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>period<span class="token punctuation">.</span><span class="token function">getMonths</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>period<span class="token punctuation">.</span><span class="token function">getDays</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>period<span class="token punctuation">.</span><span class="token function">withYears</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure></li></ol><h4 id="格林威治时间"><a class="anchor" href="#格林威治时间">#</a> 格林威治时间</h4><p>格林尼治平时（英语：Greenwich Mean Time，GMT）是指位于英国伦敦郊区的皇家格林尼治天文台当地的平太阳时，因为本初子午线被定义为通过那里的经线。</p><p>格林尼治平时基于天文观测本身的缺陷，已经被原子钟报时的协调世界时（UTC）所取代。</p><p>一般使用 GMT+8 表示中国的时间，是因为中国位于东八区，时间上比格林威治时间快 8 个小时。</p><h4 id="cetutcgmtcst几种常见时间的含义和关系"><a class="anchor" href="#cetutcgmtcst几种常见时间的含义和关系">#</a> CET，UTC，GMT，CST 几种常见时间的含义和关系</h4><p><strong>CET</strong> 欧洲中部时间（英語：Central European Time，CET）是比世界标准时间（UTC）早一个小时的时区名称之一。它被大部分欧洲国家和部分北非国家采用。冬季时间为 UTC+1，夏季欧洲夏令时为 UTC+2。</p><p><strong>UTC</strong> 协调世界时，又称世界标准时间或世界协调时间，简称 UTC，从英文 “Coordinated Universal Time”／法文 “Temps Universel Cordonné” 而来。台湾采用 CNS 7648 的《资料元及交换格式–资讯交换–日期及时间的表示法》（与 ISO 8601 类似）称之为世界统一时间。中国大陆采用 ISO 8601-1988 的国标《数据元和交换格式信息交换日期和时间表示法》（GB/T 7408）中称之为国际协调时间。协调世界时是以原子时秒长为基础，在时刻上尽量接近于世界时的一种时间计量系统。</p><p><strong>GMT</strong> 格林尼治标准时间（旧译格林尼治平均时间或格林威治标准时间；英语：Greenwich Mean Time，GMT）是指位于英国伦敦郊区的皇家格林尼治天文台的标准时间，因为本初子午线被定义在通过那里的经线。</p><p><strong>CST</strong> 北京时间，China Standard Time，又名中国标准时间，是中国的标准时间。在时区划分上，属东八区，比协调世界时早 8 小时，记为 UTC+8，与中华民国国家标准时间（旧称 “中原标准时间”）、香港时间和澳门时间和相同。</p><p><strong>关系</strong></p><p>CET=UTC/GMT + 1 小时 CST=UTC/GMT +8 小时 CST=CET+9</p><h4 id="simpledateformat-的线程安全问题"><a class="anchor" href="#simpledateformat-的线程安全问题">#</a> SimpleDateFormat 的线程安全问题</h4><blockquote><p>【强制】SimpleDateFormat 是线程不安全的类，一般不要定义为 static 变量，如果定义为 static，必须加锁，或者使用 DateUtils 工具类。</p><p>正例：注意线程安全，使用 DateUtils 。亦推荐如下处理：</p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">ThreadLoal</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">DateFormat</span><span class="token punctuation">></span></span> df <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ThreadLocal</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">DateFormat</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token annotation punctuation">@Override</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token keyword">protected</span> <span class="token class-name">DateFormat</span> <span class="token function">initialValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">SimpleDateFormat</span><span class="token punctuation">(</span><span class="token string">"yyyy-MM-dd"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>quote from 《阿里巴巴 Java 开发手册》</p></blockquote><p>引起 SimpleDateFormat 线程安全问题的原因：</p><p>SimpleDateFormat 中的 format 方法在执行过程中，会使用一个成员变量 calendar 来保存时间。如果我们在声明 SimpleDateFormat 的时候，使用的是 static 定义的。那么这个 SimpleDateFormat 就是一个共享变量，随之，SimpleDateFormat 中的 calendar 也就可以被多个线程访问到。一个线程在执行 <code>clendar.setTime</code> 方法时，并不能保证不影响到他线程执行 <code>clendar.getTime</code> 。</p><p>除了 format 方法以外，SimpleDateFormat 的 parse 方法也有同样的问题。所以，不要把 SimpleDateFormat 作为一个共享变量使用。</p><p>解决这个问题的方法有很多，常见有以下几种处理方式：</p><ol><li><p>将 <code>SimpleDateFormat</code> 作为局部变量使用。</p></li><li><p>为共享变量添加同步锁。</p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">synchronized</span> <span class="token punctuation">(</span>simpleDateFormat<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token comment">// ...</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure></li><li><p>使用 ThreadLocal</p><p>见上文提及的《阿里巴巴 Java 开发手册》。</p></li><li><p>使用 DateTimeFormatter</p><p>Java8+ 可以使用 DateTimeFormatter 代替 SimpleDateFormat，这是一个线程安全的格式化工具类。</p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 解析日期</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token class-name">String</span> dateStr <span class="token operator">=</span> <span class="token string">"2016年10月25日"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token class-name">DateTimeFormatter</span> formatter <span class="token operator">=</span> <span class="token class-name">DateTimeFormatter</span><span class="token punctuation">.</span><span class="token function">ofPattern</span><span class="token punctuation">(</span><span class="token string">"yyyy年MM月dd日"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token class-name">LocalDate</span> date <span class="token operator">=</span> <span class="token class-name">LocalDate</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>dateStr<span class="token punctuation">,</span> formatter<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token comment">// 日期转换为字符串</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token class-name">LocalDateTime</span> now <span class="token operator">=</span> <span class="token class-name">LocalDateTime</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token class-name">DateTimeFormatter</span> format <span class="token operator">=</span> <span class="token class-name">DateTimeFormatter</span><span class="token punctuation">.</span><span class="token function">ofPattern</span><span class="token punctuation">(</span><span class="token string">"yyyy年MM月dd日 hh:mm a"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token class-name">String</span> nowStr <span class="token operator">=</span> now <span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>format<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>nowStr<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure></li></ol><h4 id="java-8中的时间处理"><a class="anchor" href="#java-8中的时间处理">#</a> Java 8 中的时间处理</h4><p>在 Java8 之前的版本中，日期时间 API 存在诸多问题，例如：</p><ol><li><p>非线程安全 − java.util.Date 是非线程安全的，所有的日期类都是可变的，这是 Java 日期类最大的问题之一。</p></li><li><p>设计很差 − Java 的日期 / 时间类的定义不一致。</p></li><li><p>时区处理麻烦 − 日期类并不提供国际化，没有时区支持，因此 Java 引入了 java.util.Calendar 和 java.util.TimeZone 类，但他们同样存在上述所有的问题。</p></li></ol><p>在 Java8 中， 新的时间及⽇期 API 位于 java.time 包中，该包中有如下重要的类：</p><ul><li><p><code>Instant</code> ： 时间戳</p></li><li><p><code>Duration</code> ： 持续时间，时间差</p></li><li><p><code>LocalDate</code> ： 只包含⽇期，⽐如： 2021-08-24</p></li><li><p><code>LocalTime</code> ： 只包含时间，比如： 16:37:10</p></li><li><p><code>LocalDateTime</code> ： 包含⽇期和时间，比如：2021-08-24 16:37:10</p></li><li><p><code>Period</code> ： 时间段</p></li><li><p><code>ZoneOffset</code> ： 时区偏移量，⽐如：+8:00</p></li><li><p><code>ZonedDateTime</code> ： 带时区的时间</p></li><li><p><code>Clock</code> ： 时钟，比如获取⽬前美国纽约的时间</p></li></ul><p>新的 java.time 包涵盖了所有处理日期，时间，日期 / 时间，时区，时刻（instants），过程（during）与时钟（clock）的操作。</p><p>一些简单的使用方式如下：</p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 获取当前时间</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token class-name">LocalDate</span> today <span class="token operator">=</span> <span class="token class-name">LocalDate</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">int</span> year <span class="token operator">=</span> today<span class="token punctuation">.</span><span class="token function">getYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">int</span> month <span class="token operator">=</span> today<span class="token punctuation">.</span><span class="token function">getMonthValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">int</span> day <span class="token operator">=</span> today<span class="token punctuation">.</span><span class="token function">getDayOfMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Year : %d Month : %d day : %d t %n"</span><span class="token punctuation">,</span> year<span class="token punctuation">,</span> month<span class="token punctuation">,</span> day<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token comment">// 创建指定日期的时间</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token class-name">LocalDate</span> date <span class="token operator">=</span> <span class="token class-name">LocalDate</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">2021</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">01</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token comment">// 判断闰年</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token class-name">LocalDate</span> nowDate <span class="token operator">=</span> <span class="token class-name">LocalDate</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token keyword">boolean</span> leapYear <span class="token operator">=</span> nowDate<span class="token punctuation">.</span><span class="token function">isLeapYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token comment">// 计算两个时间之间相差的月数和天数</span></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token class-name">Period</span> period <span class="token operator">=</span> <span class="token class-name">Period</span><span class="token punctuation">.</span><span class="token function">between</span><span class="token punctuation">(</span><span class="token class-name">LocalDate</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">2018</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">LocalDate</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">2018</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h4 id="如何在东八区的计算机上获取美国时间"><a class="anchor" href="#如何在东八区的计算机上获取美国时间">#</a> 如何在东八区的计算机上获取美国时间</h4><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token class-name">LocalDateTime</span> now <span class="token operator">=</span> <span class="token class-name">LocalDateTime</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token class-name">ZoneId</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">"America/Los_Angeles"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 区域 / 城市</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>now<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h4 id="yyyy和yyyy的区别"><a class="anchor" href="#yyyy和yyyy的区别">#</a> yyyy 和 YYYY 的区别</h4><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>text<span class="token punctuation">.</span></span><span class="token class-name">ParseException</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>text<span class="token punctuation">.</span></span><span class="token class-name">SimpleDateFormat</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Calendar</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Date</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Test</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ParseException</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">"yyyy-MM-dd"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token comment">// 小写 yyyy - 2020</span></pre></td></tr><tr><td data-num="10"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">"YYYY-MM-dd"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token comment">// 大写 YYYY - 2019</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="12"></td><td><pre></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token class-name">String</span> parten<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ParseException</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>        <span class="token class-name">SimpleDateFormat</span> strDateFormat <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleDateFormat</span><span class="token punctuation">(</span>parten<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>        <span class="token class-name">Date</span> date <span class="token operator">=</span> strDateFormat<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token string">"2020-12-24"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>        <span class="token class-name">Calendar</span> calendar <span class="token operator">=</span> <span class="token class-name">Calendar</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>        calendar<span class="token punctuation">.</span><span class="token function">setTime</span><span class="token punctuation">(</span>date<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>        <span class="token keyword">return</span> calendar<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">Calendar</span><span class="token punctuation">.</span>YEAR<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="20"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><blockquote><p>在 Intellij IDEA 中书写 <code>new SimpleDateFormat(&quot;YYYY-MM-dd&quot;);</code> 时，会进行如下提示：</p><p>【日期格式化字符串 [YYYY-MM-dd] 使用错误，应注意使用小写‘y’表示当天所在的年，大写‘Y’代表 week in which year。】</p></blockquote><h3 id="编码方式"><a class="anchor" href="#编码方式">#</a> 编码方式</h3><h4 id="ascii"><a class="anchor" href="#ascii">#</a> ASCII</h4><p>ASCII（ American Standard Code for InformationInterchange， 美国信息交换标准代码） 是基于拉丁字母的⼀套电脑编码系统， 主要⽤于显⽰现代英语和其他西欧语⾔。</p><p>它是现今最通⽤的单字节编码系统，并等同于国际标准 ISO/IEC646。但是 ASCII 码只有 256 个字符无法适应非英语语言体系的国家。</p><h4 id="unicode"><a class="anchor" href="#unicode">#</a> Unicode</h4><p>Unicode 是计算机科学领域里的一项业界标准。它对世界上大部分的文字系统进行了整理、编码，使得计算机可以用更为简单的方式来呈现和处理文字。</p><p>Unicode 涵盖的数据除了视觉上的字形、编码方法、标准的字符编码外，还包含了字符特性，如大小写字母。</p><p>Unicode 可以表示中文。</p><h4 id="unicode-与-utf-8"><a class="anchor" href="#unicode-与-utf-8">#</a> Unicode 与 UTF-8</h4><p>广义的 Unicode 是一个标准，定义了一个字符集以及一系列的编码规则，即 Unicode 字符集和 UTF-8、UTF-16、UTF-32 等等编码规则。</p><p>Unicode 是字符集。UTF-8 是编码规则。</p><p>Unicode 虽然统一了全世界字符的二进制编码，但没有规定如何存储。不同文字单个字符字节大小并不一致，如果规定统一的编码存储，字节长度较小的字符则会产生大量的内存浪费，因此出现了 Unicode 的多种存储方式。UTF-8（Unicode Tranformation Format）就是 Unicode 的一个使用方式，它使用可变长度字节来储存 Unicode 字符，这样就可以适应不同字节大小的文字存储。</p><h4 id="gbk-gb2312-gb18030区别"><a class="anchor" href="#gbk-gb2312-gb18030区别">#</a> GBK、GB2312、GB18030 区别</h4><p>三者都是支持中文字符的编码方式，其中最常用的是 GBK。</p><ul><li><p>GB2312（1980 年）</p><p>16 位字符集。优点：适用于简体中文环境，属于中国国家标准，通行于大陆，新加坡等地也使用此编码；缺点：不兼容繁体中文，其汉字集合过少。</p></li><li><p>GBK（1995 年）</p><p>16 位字符集。优点：适用于简繁中文共存的环境，为简体 Windows 所使用，所有字符都可以一对一映射到 unicode2.0 上；缺点：不属于官方标准，和 big5 之间需要转换；很多搜索引擎都不能很好地支持 GBK 汉字。</p></li><li><p>GB18030（2000 年）</p><p>32 位字符集，同时收录了藏文、蒙文、维吾尔文等主要的少数民族文字。优点：可以收录所有你能想到的文字和符号，属于中国最新的国家标准；缺点：目前支持它的软件较少。</p></li></ul><p>GBK 是一套国内通用的编码标准。</p><h4 id="utf8-utf16-utf32-区别"><a class="anchor" href="#utf8-utf16-utf32-区别">#</a> UTF8、UTF16、UTF32 区别</h4><p>UTF 是英文 Unicode Transformation Format 的缩写，意为把 Unicode 字符转换为某种格式。UTF 系列编码方案均是由 Unicode 编码方案衍变而来，以适应不同的数据存储或传递，它们都可以完全表示 Unicode 标准中的所有字符。</p><ul><li><p>UTF-8</p><p>其中大部分汉字采用三个字节编码，少量不常用汉字采用四个字节编码。</p></li><li><p>UTF-16</p><p>其中大部分汉字采用两个字节编码，少量不常用汉字采用四个字节编码。</p></li><li><p>UTF-32</p><p>使用四个字节为每个字符编码，它占用空间通常会是其它编码的二到四倍。</p></li></ul><h4 id="url-编解码"><a class="anchor" href="#url-编解码">#</a> URL 编解码</h4><p>网络标准 RFC 1738 做了硬性规定：只有字母和数字 <code>0-9a-zA-Z</code> 、一些特殊符号 <code>$-_.+!*'(),</code> 以及某些保留字，才可以不经过编码直接用于 URL;</p><p>除此以外的字符是无法在 URL 中展示的，所以，遇到这种字符，如中文，就需要进行编码。所以，把带有特殊字符的 URL 转成可以显示的 URL 过程，称之为 URL 编码。反之，就是解码。</p><p>URL 编码可以使用不同的方式，如 escape，URLEncode，encodeURIComponent。</p><h4 id="big-endian和little-endian"><a class="anchor" href="#big-endian和little-endian">#</a> BIG Endian 和 Little Endian</h4><p>字节序（Endian），也就是字节的顺序，指的是多字节的数据在内存中的存放顺序。</p><p>Big Endian 是指低地址端存放高位字节。Little Endian 是指低地址端存放低位字节。</p><p>Java 采用 Big Endian 来存储数据，C/C++ 采用 Little Endian。在网络传输一般采用的网络字节序是 BIG-ENDIAN。</p><p>因此当 Java 和 C 语言进行通讯时，C 语言端需要考虑到字节序的转换问题，而 Java 端则无需考虑。</p><h4 id="如何解决乱码问题"><a class="anchor" href="#如何解决乱码问题">#</a> 如何解决乱码问题</h4><p>== 乱码问题本质上都是由于字符串原本的编码格式与读取时解析用的编码格式不一致导致的。==</p><p>造成乱码的原因就是因为使用了错误的字符编码去解码字节流，因此当我们在思考任何跟文本显示有关的问题时，需要明确当前使用的字符编码是什么。</p><h3 id="语法糖"><a class="anchor" href="#语法糖">#</a> 语法糖</h3><p>语法糖（Syntactic Sugar），也称糖衣语法，是由英国计算机学家 Peter.J.Landin 发明的一个术语，指在计算机语言中添加的某种语法，这种语法对语言的功能并没有影响，但是更方便程序员使用。简而言之，语法糖让程序更加简洁，有更高的可读性。</p><h4 id="解语法糖"><a class="anchor" href="#解语法糖">#</a> 解语法糖</h4><p>语法糖的存在主要是方便开发人员使用，但其实 Java 虚拟机并不支持这些语法糖。这些语法糖在编译阶段就会被还原成简单的基础语法结构，这个过程就是解语法糖。</p><h4 id="语法糖-2"><a class="anchor" href="#语法糖-2">#</a> 语法糖</h4><ul><li><p>switch 支持 String 与枚举</p><p>字符串的 switch 是通过 <code>equals()</code> 和 <code>hashCode()</code> 方法来实现的。而枚举则是通过其 <code>ordinal()</code> 方法实现的。</p></li><li><p>泛型</p></li><li><p>自动装箱与拆箱</p><p>自动装箱就是 Java 自动将原始类型值转换成对应的对象，反之，则是拆箱。装箱过程是通过调用包装器的 valueOf 方法实现的，而拆箱过程是通过调用包装器的 xxxValue 方法实现的。</p></li><li><p>方法变长参数</p><p>可变参数是在 Java1.5 中引入的一个特性。它允许一个方法把任意数量的值作为参数。</p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> strs<span class="token punctuation">)</span></pre></td></tr></table></figure><p>可变参数在被使用的时候，他首先会创建一个数组，数组的长度就是调用该方法是传递的实参的个数，然后再把参数值全部放到这个数组当中，然后再把这个数组作为参数传递到被调用的方法中。</p></li><li><p>枚举</p><p>当我们使用 <code>enmu</code> 来定义一个枚举类型的时候，编译器会自动帮我们创建一个 <code>final</code> 类型的类继承 <code>Enum</code> 类，所以枚举类型不能被继承。</p></li><li><p>内部类</p></li><li><p>条件编译</p><p>— 般情况下，程序中的每一行代码都要参加编译。但有时候出于对程序代码优化的考虑，希望只对其中一部分内容进行编译，此时就需要在程序中加上条件，让编译器只对满足条件的代码进行编译，将不满足条件的代码舍弃，这就是条件编译。</p><p>Java 语法的条件编译，是通过判断条件为常量的 if 语句实现的。其原理也是 Java 语言的语法糖。根据 if 判断条件的真假，编译器直接把分支为 false 的代码块消除。通过该方式实现的条件编译，必须在方法体内实现，而无法在整个 Java 类的结构或者类的属性上进行条件编译。</p></li><li><p>断言</p><p>Java 在执行的时候默认是不启动断言检查的，如果要开启断言检查，则需要用开关 <code>-enableassertions</code> 或 <code>-ea</code> 来开启。其实断言的底层实现就是 if 语言，如果断言结果为 true，则什么都不做，程序继续执行，如果断言结果为 false，则程序抛出 AssertError 来打断程序的执行。</p></li><li><p>数值字面量</p><p>在 java 7 中，数值字面量，不管是整数还是浮点数，都允许在数字之间插入任意多个下划线。这些下划线不会对字面量的数值产生影响，目的就是方便阅读。在编译时，编译器会自动去掉下划线。</p></li><li><p>for-each</p><p>for-each 的实现原理其实就是使用了普通的 for 循环和迭代器。</p></li><li><p>try-with-resources</p></li><li><p>Lambda 表达式</p></li></ul><blockquote><p>扩展搜索： <code>语法盐</code> 、 <code>语法糖精</code></p></blockquote><h2 id="参考"><a class="anchor" href="#参考">#</a> 参考</h2><blockquote><p>参考声明：参考内容来源于网络，本文不保证参考链接的长期有效性，以及参考内容的原创性。</p></blockquote><ul><li><p><span class="exturl" data-url="aHR0cDovL2hvbGxpc2NodWFuZy5naXRlZS5pby90b2JldG9wamF2YWU=">Java 工程师成神之路</span></p></li><li><p><span class="exturl" data-url="aHR0cHM6Ly93d3cuaG9sbGlzY2h1YW5nLmNvbQ==">HollisChuang's Blog</span></p></li><li><p><span class="exturl" data-url="aHR0cHM6Ly93d3cuemhpaHUuY29tL3F1ZXN0aW9uLzI3NDY4NTY0L2Fuc3dlci83NTc1MzcyMTQ=">https://www.zhihu.com/question/27468564/answer/757537214</span></p></li><li><p><span class="exturl" data-url="aHR0cHM6Ly93d3cuY25ibG9ncy5jb20vYmVuamllcWlhbmcvY2F0ZWdvcnkvMTQyODExNC5odG1s">https://www.cnblogs.com/benjieqiang/category/1428114.html</span></p></li><li><p><span class="exturl" data-url="aHR0cHM6Ly93d3cuaG9sbGlzY2h1YW5nLmNvbS9hcmNoaXZlcy8zNDMw">https://www.hollischuang.com/archives/3430</span></p></li><li><p><span class="exturl" data-url="aHR0cHM6Ly96aHVhbmxhbi56aGlodS5jb20vcC8xMjcxNzAyMDE=">https://zhuanlan.zhihu.com/p/127170201</span></p></li><li><p><span class="exturl" data-url="aHR0cHM6Ly93d3cuemhpaHUuY29tL3F1ZXN0aW9uLzIwMzY3NzM0">https://www.zhihu.com/question/20367734</span></p></li><li><p><span class="exturl" data-url="aHR0cHM6Ly93d3cuY25ibG9ncy5jb20vZHVhbnh6L3AvMzUxMTY5NS5odG1s">https://www.cnblogs.com/duanxz/p/3511695.html</span></p></li><li><p><span class="exturl" data-url="aHR0cHM6Ly9zZWdtZW50ZmF1bHQuY29tL2EvMTE5MDAwMDAxODEyMDcyNQ==">https://segmentfault.com/a/1190000018120725</span></p></li></ul><div class="tags"><a href="/tags/java/" rel="tag"><i class="ic i-tag"></i> \[java]</a></div></div><footer><div class="meta"><span id="computer-science/java-learning-path/1-basic/01-java-basic/" class="item leancloud_visitors" data-flag-title="JAVA 基础知识大盘点" title="閲覧数"><span class="icon"><i class="ic i-eye"></i> </span><span class="text">閲覧数</span> <span class="leancloud-visitors-count"></span> <span class="text">回</span></span></div><div class="reward"><button><i class="ic i-heartbeat"></i> 寄付</button><p>*~(￣▽￣)~[お茶]を一杯ください</p><div id="qr"><div><img data-src="/images/wechatpay.png" alt="チンモク WeChat 支払う"><p>WeChat 支払う</p></div><div><img data-src="/images/alipay.png" alt="チンモク Alipay"><p>Alipay</p></div><div><img data-src="/images/paypal.png" alt="チンモク PayPal"><p>PayPal</p></div></div></div><div id="copyright"><ul><li class="author"><strong>著者： </strong>チンモク <i class="ic i-at"><em>@</em></i>チンモクのブログ</li><li class="link"><strong>記事へのリンク：</strong> <a href="https://www.chinmoku.cc/computer-science/java-learning-path/1-basic/01-java-basic/" title="JAVA 基础知识大盘点">https://www.chinmoku.cc/computer-science/java-learning-path/1-basic/01-java-basic/</a></li><li class="license"><strong>著作権表示： </strong>このブログ内のすべての記事は、特別な記載がない限り <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9kZWVkLnpo"><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</span> の下のライセンスで保護されています。</li></ul></div></footer></article></div><div class="post-nav"><div class="item left"><a href="/computer-science/java-learning-path/2-intermediate/mybatis-tutorial/" itemprop="url" rel="prev" data-background-image="https:&#x2F;&#x2F;reference-1301046789.cos.ap-nanjing.myqcloud.com&#x2F;blog-img&#x2F;8802c684881e11ebb6edd017c2d2eca2.jpg" title="MyBatis 教程"><span class="type">前の記事</span> <span class="category"><i class="ic i-flag"></i> 进阶篇</span><h3>MyBatis 教程</h3></a></div><div class="item right"><a href="/computer-science/java-learning-path/1-basic/02-java-concurrency/" itemprop="url" rel="next" data-background-image="https:&#x2F;&#x2F;reference-1301046789.cos.ap-nanjing.myqcloud.com&#x2F;blog-img&#x2F;33aa5bba71b140068d28cca4f041ab2c.jpg" title="Java 并发编程知识整理"><span class="type">次の記事</span> <span class="category"><i class="ic i-flag"></i> \[计算机科学，JAVA 学习路线，基础篇]</span><h3>Java 并发编程知识整理</h3></a></div></div><div class="wrap" id="comments"></div></div><div id="sidebar"><div class="inner"><div class="panels"><div class="inner"><div class="contents panel pjax" data-title="見出し"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1"><span class="toc-number">1.</span> <span class="toc-text">面向对象</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1"><span class="toc-number">1.1.</span> <span class="toc-text">什么是面向对象？</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%9D%A2%E5%90%91%E8%BF%87%E7%A8%8B"><span class="toc-number">1.1.1.</span> <span class="toc-text">面向过程</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1-2"><span class="toc-number">1.1.2.</span> <span class="toc-text">面向对象</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%9A%84%E4%B8%89%E5%A4%A7%E5%9F%BA%E6%9C%AC%E7%89%B9%E5%BE%81"><span class="toc-number">1.1.3.</span> <span class="toc-text">面向对象的三大基本特征</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#java%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E5%B9%B3%E5%8F%B0%E6%97%A0%E5%85%B3"><span class="toc-number">1.1.4.</span> <span class="toc-text">Java 如何实现平台无关</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#jvm%E8%BF%98%E6%94%AF%E6%8C%81%E5%93%AA%E4%BA%9B%E8%AF%AD%E8%A8%80"><span class="toc-number">1.1.5.</span> <span class="toc-text">JVM 还支持哪些语言</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%80%BC%E4%BC%A0%E9%80%92"><span class="toc-number">1.2.</span> <span class="toc-text">值传递</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%80%BC%E4%BC%A0%E9%80%92-2"><span class="toc-number">1.2.1.</span> <span class="toc-text">值传递</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BC%95%E7%94%A8%E4%BC%A0%E5%80%BC"><span class="toc-number">1.2.2.</span> <span class="toc-text">引用传值</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E8%AF%B4java%E4%B8%AD%E5%8F%AA%E6%9C%89%E5%80%BC%E4%BC%A0%E9%80%92"><span class="toc-number">1.2.3.</span> <span class="toc-text">为什么说 Java 中只有值传递</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%89%E5%A4%A7%E5%9F%BA%E6%9C%AC%E7%89%B9%E5%BE%81"><span class="toc-number">1.3.</span> <span class="toc-text">三大基本特征</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E5%A4%9A%E6%80%81"><span class="toc-number">1.3.1.</span> <span class="toc-text">什么是多态</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#java%E7%9A%84%E7%BB%A7%E6%89%BF%E4%B8%8E%E5%AE%9E%E7%8E%B0"><span class="toc-number">1.3.2.</span> <span class="toc-text">Java 的继承与实现</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0"><span class="toc-number">1.3.3.</span> <span class="toc-text">构造函数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%98%E9%87%8F"><span class="toc-number">1.3.4.</span> <span class="toc-text">变量</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%9C%E7%94%A8%E5%9F%9F"><span class="toc-number">1.3.5.</span> <span class="toc-text">作用域</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%94%E5%A4%A7%E5%9F%BA%E6%9C%AC%E5%8E%9F%E5%88%99"><span class="toc-number">1.4.</span> <span class="toc-text">五大基本原则</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#java-%E5%9F%BA%E7%A1%80"><span class="toc-number">2.</span> <span class="toc-text">Java 基础</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="toc-number">2.1.</span> <span class="toc-text">基本数据类型</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#8%E7%A7%8D%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="toc-number">2.1.1.</span> <span class="toc-text">8 种基本数据类型</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%95%B4%E6%95%B0%E5%9E%8B"><span class="toc-number">2.1.1.1.</span> <span class="toc-text">整数型</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%B5%AE%E7%82%B9%E5%9E%8B"><span class="toc-number">2.1.1.2.</span> <span class="toc-text">浮点型</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E5%9E%8B"><span class="toc-number">2.1.1.3.</span> <span class="toc-text">字符型</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%B8%83%E5%B0%94%E5%9E%8B"><span class="toc-number">2.1.1.4.</span> <span class="toc-text">布尔型</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E5%AF%B9%E6%AF%94"><span class="toc-number">2.1.1.5.</span> <span class="toc-text">基本数据类型对比</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3%E7%A7%8D%E5%BC%95%E7%94%A8%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="toc-number">2.1.2.</span> <span class="toc-text">3 种引用数据类型</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E5%8A%A8%E6%8B%86%E8%A3%85%E7%AE%B1"><span class="toc-number">2.2.</span> <span class="toc-text">自动拆装箱</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8C%85%E8%A3%85%E7%B1%BB%E5%9E%8B"><span class="toc-number">2.2.1.</span> <span class="toc-text">包装类型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E7%B1%BB%E5%9E%8B"><span class="toc-number">2.2.2.</span> <span class="toc-text">基本类型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%87%AA%E5%8A%A8%E6%8B%86%E8%A3%85%E7%AE%B1-2"><span class="toc-number">2.2.3.</span> <span class="toc-text">自动拆装箱</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#integer%E7%9A%84%E7%BC%93%E5%AD%98%E6%9C%BA%E5%88%B6"><span class="toc-number">2.2.4.</span> <span class="toc-text">Integer 的缓存机制</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#string"><span class="toc-number">2.3.</span> <span class="toc-text">String</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E4%B8%8D%E5%8F%AF%E5%8F%98%E6%80%A7"><span class="toc-number">2.3.1.</span> <span class="toc-text">字符串的不可变性</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#jdk6-%E5%92%8C-jdk7-%E4%B8%AD-substring-%E7%9A%84%E5%8E%9F%E7%90%86%E5%8F%8A%E5%8C%BA%E5%88%AB"><span class="toc-number">2.3.2.</span> <span class="toc-text">JDK6 和 JDK7 中 substring 的原理及区别</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#replacefirst-replaceall-replace%E5%8C%BA%E5%88%AB"><span class="toc-number">2.3.3.</span> <span class="toc-text">replaceFirst、replaceAll、replace 区别</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#string%E5%AF%B9%E7%9A%84%E9%87%8D%E8%BD%BD"><span class="toc-number">2.3.4.</span> <span class="toc-text">String 对 [+] 的重载</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%8B%BC%E6%8E%A5%E7%9A%84%E5%87%A0%E7%A7%8D%E6%96%B9%E5%BC%8F%E5%92%8C%E5%8C%BA%E5%88%AB"><span class="toc-number">2.3.5.</span> <span class="toc-text">字符串拼接的几种方式和区别</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#stringvalueof-%E5%92%8C-integertostring-%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">2.3.6.</span> <span class="toc-text">String.valueOf 和 Integer.toString 的区别</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#switch-%E5%AF%B9-string-%E7%9A%84%E6%94%AF%E6%8C%81"><span class="toc-number">2.3.7.</span> <span class="toc-text">switch 对 String 的支持</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%B1%A0string-pool"><span class="toc-number">2.3.8.</span> <span class="toc-text">字符串池（String Pool）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B8%B8%E9%87%8F%E6%B1%A0"><span class="toc-number">2.3.9.</span> <span class="toc-text">常量池</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#intern"><span class="toc-number">2.3.10.</span> <span class="toc-text">intern</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B3%E9%94%AE%E5%AD%97"><span class="toc-number">2.4.</span> <span class="toc-text">关键字</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9B%86%E5%90%88%E7%B1%BB"><span class="toc-number">2.5.</span> <span class="toc-text">集合类</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#java-%E9%9B%86%E5%90%88%E7%B1%BB%E5%9B%BE"><span class="toc-number">2.5.1.</span> <span class="toc-text">Java 集合类图</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E9%9B%86%E5%90%88%E7%B1%BB%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-number">2.5.2.</span> <span class="toc-text">常用集合类的使用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#arraylist-linklist-%E5%92%8C-vector-%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">2.5.3.</span> <span class="toc-text">ArrayList、LinkList 和 Vector 的区别</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#synchronizedlist-%E5%92%8C-vector-%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">2.5.4.</span> <span class="toc-text">SynchronizedList 和 Vector 的区别</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#hashmap-hashtable-concurrenthashmap%E5%8C%BA%E5%88%AB"><span class="toc-number">2.5.5.</span> <span class="toc-text">HashMap、HashTable、ConcurrentHashMap 区别</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#set%E5%92%8Clist%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">2.5.6.</span> <span class="toc-text">Set 和 List 的区别</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#set%E5%A6%82%E4%BD%95%E4%BF%9D%E8%AF%81%E5%85%83%E7%B4%A0%E4%B8%8D%E9%87%8D%E5%A4%8D"><span class="toc-number">2.5.7.</span> <span class="toc-text">Set 如何保证元素不重复</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#java8%E4%B8%ADstream%E7%9B%B8%E5%85%B3%E7%94%A8%E6%B3%95"><span class="toc-number">2.5.8.</span> <span class="toc-text">Java8 中 stream 相关用法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#apache%E9%9B%86%E5%90%88%E5%A4%84%E7%90%86%E5%B7%A5%E5%85%B7%E7%B1%BB%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-number">2.5.9.</span> <span class="toc-text">apache 集合处理工具类的使用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%8D%E5%90%8Cjdk%E7%89%88%E6%9C%AC%E4%B8%AD%E7%9A%84hashmap"><span class="toc-number">2.5.10.</span> <span class="toc-text">不同 JDK 版本中的 HashMap</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#collection-%E5%92%8C-collections-%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">2.5.11.</span> <span class="toc-text">Collection 和 Collections 的区别</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#arraysaslist-%E8%8E%B7%E5%BE%97%E7%9A%84-list-%E4%BD%BF%E7%94%A8%E6%97%B6%E9%9C%80%E6%B3%A8%E6%84%8F%E4%BB%80%E4%B9%88"><span class="toc-number">2.5.12.</span> <span class="toc-text">Arrays.asList 获得的 List 使用时需注意什么</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#enumeration-%E5%92%8C-iterator-%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">2.5.13.</span> <span class="toc-text">Enumeration 和 Iterator 的区别</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#fail-fast%E5%92%8Cfail-safe"><span class="toc-number">2.5.14.</span> <span class="toc-text">fail-fast 和 fail-safe</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#copy-on-write"><span class="toc-number">2.5.15.</span> <span class="toc-text">Copy-On-Write</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#copyonwritearraylist-concurrentskiplistmap"><span class="toc-number">2.5.16.</span> <span class="toc-text">CopyOnWriteArrayList、ConcurrentSkipListMap</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9E%9A%E4%B8%BE"><span class="toc-number">2.6.</span> <span class="toc-text">枚举</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9E%9A%E4%B8%BE%E7%9A%84%E7%94%A8%E6%B3%95"><span class="toc-number">2.6.1.</span> <span class="toc-text">枚举的用法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9E%9A%E4%B8%BE%E7%9A%84%E5%AE%9E%E7%8E%B0"><span class="toc-number">2.6.2.</span> <span class="toc-text">枚举的实现</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9E%9A%E4%B8%BE%E4%B8%8E%E5%8D%95%E4%BE%8B"><span class="toc-number">2.6.3.</span> <span class="toc-text">枚举与单例</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#enum%E7%B1%BB"><span class="toc-number">2.6.4.</span> <span class="toc-text">Enum 类</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#java%E6%9E%9A%E4%B8%BE%E5%A6%82%E4%BD%95%E6%AF%94%E8%BE%83"><span class="toc-number">2.6.5.</span> <span class="toc-text">Java 枚举如何比较</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#switch%E5%AF%B9%E6%9E%9A%E4%B8%BE%E7%9A%84%E6%94%AF%E6%8C%81"><span class="toc-number">2.6.6.</span> <span class="toc-text">switch 对枚举的支持</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9E%9A%E4%B8%BE%E7%9A%84%E5%BA%8F%E5%88%97%E5%8C%96%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0"><span class="toc-number">2.6.7.</span> <span class="toc-text">枚举的序列化如何实现</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9E%9A%E4%B8%BE%E7%9A%84%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8%E6%80%A7%E9%97%AE%E9%A2%98"><span class="toc-number">2.6.8.</span> <span class="toc-text">枚举的线程安全性问题</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#io"><span class="toc-number">2.7.</span> <span class="toc-text">IO</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E6%B5%81-%E5%AD%97%E8%8A%82%E6%B5%81"><span class="toc-number">2.7.1.</span> <span class="toc-text">字符流、字节流</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BE%93%E5%85%A5%E6%B5%81-%E8%BE%93%E5%87%BA%E6%B5%81"><span class="toc-number">2.7.2.</span> <span class="toc-text">输入流、输出流</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%90%8C%E6%AD%A5-%E5%BC%82%E6%AD%A5-%E9%98%BB%E5%A1%9E-%E9%9D%9E%E9%98%BB%E5%A1%9E"><span class="toc-number">2.7.3.</span> <span class="toc-text">同步、异步、阻塞、非阻塞</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#linux-5%E7%A7%8Dio%E6%A8%A1%E5%9E%8B"><span class="toc-number">2.7.4.</span> <span class="toc-text">Linux 5 种 IO 模型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#bio-nio%E5%92%8Caio%E7%9A%84%E5%8C%BA%E5%88%AB-%E7%94%A8%E6%B3%95%E5%92%8C%E5%8E%9F%E7%90%86"><span class="toc-number">2.7.5.</span> <span class="toc-text">BIO、NIO 和 AIO 的区别、用法和原理</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#netty"><span class="toc-number">2.7.6.</span> <span class="toc-text">Netty</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%8D%E5%B0%84"><span class="toc-number">2.8.</span> <span class="toc-text">反射</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%8D%E5%B0%84%E4%B8%8E%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F"><span class="toc-number">2.8.1.</span> <span class="toc-text">反射与工厂模式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%8D%E5%B0%84%E6%9C%89%E4%BB%80%E4%B9%88%E7%94%A8"><span class="toc-number">2.8.2.</span> <span class="toc-text">反射有什么用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#class%E7%B1%BB"><span class="toc-number">2.8.3.</span> <span class="toc-text">Class 类</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86"><span class="toc-number">2.9.</span> <span class="toc-text">动态代理</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#java-%E4%B8%89%E7%A7%8D%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F"><span class="toc-number">2.9.1.</span> <span class="toc-text">Java 三种代理模式</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%9D%99%E6%80%81%E4%BB%A3%E7%90%86"><span class="toc-number">2.9.1.1.</span> <span class="toc-text">静态代理</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86-2"><span class="toc-number">2.9.1.2.</span> <span class="toc-text">动态代理</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#cglib-%E4%BB%A3%E7%90%86"><span class="toc-number">2.9.1.3.</span> <span class="toc-text">Cglib 代理</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86%E5%92%8C%E5%8F%8D%E5%B0%84%E7%9A%84%E5%85%B3%E7%B3%BB"><span class="toc-number">2.9.2.</span> <span class="toc-text">动态代理和反射的关系</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#aop"><span class="toc-number">2.9.3.</span> <span class="toc-text">AOP</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#aop-%E7%9B%B8%E5%85%B3%E6%A6%82%E5%BF%B5"><span class="toc-number">2.9.3.1.</span> <span class="toc-text">AOP 相关概念</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BA%8F%E5%88%97%E5%8C%96"><span class="toc-number">2.10.</span> <span class="toc-text">序列化</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BA%8F%E5%88%97%E5%8C%96%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86"><span class="toc-number">2.10.1.</span> <span class="toc-text">序列化底层原理</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#serialversionuid"><span class="toc-number">2.10.2.</span> <span class="toc-text">serialVersionUID</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BA%8F%E5%88%97%E5%8C%96%E4%B8%8E%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F"><span class="toc-number">2.10.3.</span> <span class="toc-text">序列化与单例模式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#protobuf"><span class="toc-number">2.10.4.</span> <span class="toc-text">ProtoBuf</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E8%AF%B4%E5%BA%8F%E5%88%97%E5%8C%96%E5%B9%B6%E4%B8%8D%E5%AE%89%E5%85%A8"><span class="toc-number">2.10.5.</span> <span class="toc-text">为什么说序列化并不安全</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B3%A8%E8%A7%A3"><span class="toc-number">2.11.</span> <span class="toc-text">注解</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%83%E6%B3%A8%E8%A7%A3"><span class="toc-number">2.11.1.</span> <span class="toc-text">元注解</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E6%B3%A8%E8%A7%A3"><span class="toc-number">2.11.2.</span> <span class="toc-text">自定义注解</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#java%E4%B8%AD%E5%B8%B8%E7%94%A8%E6%B3%A8%E8%A7%A3%E4%BD%BF%E7%94%A8"><span class="toc-number">2.11.3.</span> <span class="toc-text">Java 中常用注解使用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B3%A8%E8%A7%A3%E4%B8%8E%E5%8F%8D%E5%B0%84%E7%9A%84%E7%BB%93%E5%90%88"><span class="toc-number">2.11.4.</span> <span class="toc-text">注解与反射的结合</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#spring%E5%B8%B8%E7%94%A8%E6%B3%A8%E8%A7%A3"><span class="toc-number">2.11.5.</span> <span class="toc-text">Spring 常用注解</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#jms"><span class="toc-number">2.12.</span> <span class="toc-text">JMS</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AFjava%E6%B6%88%E6%81%AF%E6%9C%8D%E5%8A%A1"><span class="toc-number">2.12.1.</span> <span class="toc-text">什么是 Java 消息服务</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#jms%E6%B6%88%E6%81%AF%E4%BC%A0%E9%80%81%E6%A8%A1%E5%9E%8B"><span class="toc-number">2.12.2.</span> <span class="toc-text">JMS 消息传送模型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#jms-%E7%BC%96%E7%A8%8B%E6%A8%A1%E5%9E%8B"><span class="toc-number">2.12.3.</span> <span class="toc-text">JMS 编程模型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E7%9A%84-jms-%E5%AE%9E%E7%8E%B0"><span class="toc-number">2.12.4.</span> <span class="toc-text">常用的 JMS 实现</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#jmx"><span class="toc-number">2.13.</span> <span class="toc-text">JMX</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B3%9B%E5%9E%8B"><span class="toc-number">2.14.</span> <span class="toc-text">泛型</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B3%9B%E5%9E%8B%E4%B8%8E%E7%BB%A7%E6%89%BF"><span class="toc-number">2.14.1.</span> <span class="toc-text">泛型与继承</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%B1%BB%E5%9E%8B%E6%93%A6%E9%99%A4"><span class="toc-number">2.14.2.</span> <span class="toc-text">类型擦除</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B3%9B%E5%9E%8B%E4%B8%AD%E7%9A%84ktveobject"><span class="toc-number">2.14.3.</span> <span class="toc-text">泛型中的 KTVE?object</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%99%90%E5%AE%9A%E9%80%9A%E9%85%8D%E7%AC%A6%E5%92%8C%E9%9D%9E%E9%99%90%E5%AE%9A%E9%80%9A%E9%85%8D%E7%AC%A6"><span class="toc-number">2.14.4.</span> <span class="toc-text">限定通配符和非限定通配符</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#list-list%E5%92%8Clistobject"><span class="toc-number">2.14.5.</span> <span class="toc-text">List、List&lt;?&gt; 和 List&lt;Object&gt;</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95"><span class="toc-number">2.15.</span> <span class="toc-text">单元测试</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#junit"><span class="toc-number">2.15.1.</span> <span class="toc-text">JUnit</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#mock"><span class="toc-number">2.15.2.</span> <span class="toc-text">Mock</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#mockito"><span class="toc-number">2.15.3.</span> <span class="toc-text">Mockito</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%86%85%E5%AD%98%E6%95%B0%E6%8D%AE%E5%BA%93h2"><span class="toc-number">2.15.4.</span> <span class="toc-text">内存数据库（h2）</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-number">2.16.</span> <span class="toc-text">正则表达式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E7%9A%84java%E5%B7%A5%E5%85%B7%E5%BA%93"><span class="toc-number">2.17.</span> <span class="toc-text">常用的 Java 工具库</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#commonslang"><span class="toc-number">2.17.1.</span> <span class="toc-text">commons.lang</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#guava-libraries"><span class="toc-number">2.17.2.</span> <span class="toc-text">guava-libraries</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#netty-2"><span class="toc-number">2.17.3.</span> <span class="toc-text">netty</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#api-spi"><span class="toc-number">2.18.</span> <span class="toc-text">API &amp; SPI</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#api"><span class="toc-number">2.18.1.</span> <span class="toc-text">API</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#spi"><span class="toc-number">2.18.2.</span> <span class="toc-text">SPI</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#api%E4%B8%8Espi%E7%9A%84%E5%85%B3%E7%B3%BB%E5%92%8C%E5%8C%BA%E5%88%AB"><span class="toc-number">2.18.3.</span> <span class="toc-text">API 与 SPI 的关系和区别</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BC%82%E5%B8%B8"><span class="toc-number">2.19.</span> <span class="toc-text">异常</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BC%82%E5%B8%B8%E7%B1%BB%E5%9E%8B"><span class="toc-number">2.19.1.</span> <span class="toc-text">异常类型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%AD%A3%E7%A1%AE%E5%A4%84%E7%90%86%E5%BC%82%E5%B8%B8"><span class="toc-number">2.19.2.</span> <span class="toc-text">正确处理异常</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E5%BC%82%E5%B8%B8"><span class="toc-number">2.19.3.</span> <span class="toc-text">自定义异常</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#error-%E5%92%8C-exception"><span class="toc-number">2.19.4.</span> <span class="toc-text">Error 和 Exception</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BC%82%E5%B8%B8%E9%93%BE"><span class="toc-number">2.19.5.</span> <span class="toc-text">异常链</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#try-with-resource"><span class="toc-number">2.19.6.</span> <span class="toc-text">try-with-resource</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#finally%E5%92%8Creturn%E7%9A%84%E6%89%A7%E8%A1%8C%E9%A1%BA%E5%BA%8F"><span class="toc-number">2.19.7.</span> <span class="toc-text">finally 和 return 的执行顺序</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%97%B6%E9%97%B4%E5%A4%84%E7%90%86"><span class="toc-number">2.20.</span> <span class="toc-text">时间处理</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%97%B6%E5%8C%BA"><span class="toc-number">2.20.1.</span> <span class="toc-text">时区</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%86%AC%E6%97%B6%E4%BB%A4%E5%92%8C%E5%A4%8F%E6%97%B6%E4%BB%A4"><span class="toc-number">2.20.2.</span> <span class="toc-text">冬时令和夏时令</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%97%B6%E9%97%B4%E6%88%B3"><span class="toc-number">2.20.3.</span> <span class="toc-text">时间戳</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#java%E4%B8%AD%E6%97%B6%E9%97%B4api"><span class="toc-number">2.20.4.</span> <span class="toc-text">Java 中时间 API</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A0%BC%E6%9E%97%E5%A8%81%E6%B2%BB%E6%97%B6%E9%97%B4"><span class="toc-number">2.20.5.</span> <span class="toc-text">格林威治时间</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#cetutcgmtcst%E5%87%A0%E7%A7%8D%E5%B8%B8%E8%A7%81%E6%97%B6%E9%97%B4%E7%9A%84%E5%90%AB%E4%B9%89%E5%92%8C%E5%85%B3%E7%B3%BB"><span class="toc-number">2.20.6.</span> <span class="toc-text">CET，UTC，GMT，CST 几种常见时间的含义和关系</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#simpledateformat-%E7%9A%84%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8%E9%97%AE%E9%A2%98"><span class="toc-number">2.20.7.</span> <span class="toc-text">SimpleDateFormat 的线程安全问题</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#java-8%E4%B8%AD%E7%9A%84%E6%97%B6%E9%97%B4%E5%A4%84%E7%90%86"><span class="toc-number">2.20.8.</span> <span class="toc-text">Java 8 中的时间处理</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E5%9C%A8%E4%B8%9C%E5%85%AB%E5%8C%BA%E7%9A%84%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%8A%E8%8E%B7%E5%8F%96%E7%BE%8E%E5%9B%BD%E6%97%B6%E9%97%B4"><span class="toc-number">2.20.9.</span> <span class="toc-text">如何在东八区的计算机上获取美国时间</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#yyyy%E5%92%8Cyyyy%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">2.20.10.</span> <span class="toc-text">yyyy 和 YYYY 的区别</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BC%96%E7%A0%81%E6%96%B9%E5%BC%8F"><span class="toc-number">2.21.</span> <span class="toc-text">编码方式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#ascii"><span class="toc-number">2.21.1.</span> <span class="toc-text">ASCII</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#unicode"><span class="toc-number">2.21.2.</span> <span class="toc-text">Unicode</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#unicode-%E4%B8%8E-utf-8"><span class="toc-number">2.21.3.</span> <span class="toc-text">Unicode 与 UTF-8</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#gbk-gb2312-gb18030%E5%8C%BA%E5%88%AB"><span class="toc-number">2.21.4.</span> <span class="toc-text">GBK、GB2312、GB18030 区别</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#utf8-utf16-utf32-%E5%8C%BA%E5%88%AB"><span class="toc-number">2.21.5.</span> <span class="toc-text">UTF8、UTF16、UTF32 区别</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#url-%E7%BC%96%E8%A7%A3%E7%A0%81"><span class="toc-number">2.21.6.</span> <span class="toc-text">URL 编解码</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#big-endian%E5%92%8Clittle-endian"><span class="toc-number">2.21.7.</span> <span class="toc-text">BIG Endian 和 Little Endian</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E8%A7%A3%E5%86%B3%E4%B9%B1%E7%A0%81%E9%97%AE%E9%A2%98"><span class="toc-number">2.21.8.</span> <span class="toc-text">如何解决乱码问题</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AF%AD%E6%B3%95%E7%B3%96"><span class="toc-number">2.22.</span> <span class="toc-text">语法糖</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A7%A3%E8%AF%AD%E6%B3%95%E7%B3%96"><span class="toc-number">2.22.1.</span> <span class="toc-text">解语法糖</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AF%AD%E6%B3%95%E7%B3%96-2"><span class="toc-number">2.22.2.</span> <span class="toc-text">语法糖</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%82%E8%80%83"><span class="toc-number">3.</span> <span class="toc-text">参考</span></a></li></ol></div><div class="related panel pjax" data-title="関連記事"><ul><li class="active"><a href="/computer-science/java-learning-path/1-basic/01-java-basic/" rel="bookmark" title="JAVA 基础知识大盘点">JAVA 基础知识大盘点</a></li><li><a href="/computer-science/java-learning-path/1-basic/02-java-concurrency/" rel="bookmark" title="Java 并发编程知识整理">Java 并发编程知识整理</a></li></ul></div><div class="overview panel" data-title="概要"><div class="author" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="image" itemprop="image" alt="チンモク" data-src="/images/avatar.jpg"><p class="name" itemprop="name">チンモク</p><div class="description" itemprop="description">本站主要以 Java 开发总结文章为主，也会向技术周边进行适当的扩展。此外，偶尔会更新部分其他学习或感兴趣的内容，如语言学习、文本翻译、文艺创作等。</div></div><nav class="state"><div class="item posts"><a href="/archives/"><span class="count">24</span> <span class="name">ポスト</span></a></div><div class="item categories"><a href="/categories/"><span class="count">17</span> <span class="name">カテゴリ</span></a></div><div class="item tags"><a href="/tags/"><span class="count">22</span> <span class="name">タグ</span></a></div></nav><div class="social"><span class="exturl item github" data-url="aHR0cHM6Ly9naXRodWIuY29tL3hmYy1leGNsYXZl" title="https:&#x2F;&#x2F;github.com&#x2F;xfc-exclave"><i class="ic i-github"></i></span> <span class="exturl item twitter" data-url="aHR0cHM6Ly90d2l0dGVyLmNvbS95b3VybmFtZQ==" title="https:&#x2F;&#x2F;twitter.com&#x2F;yourname"><i class="ic i-twitter"></i></span> <span class="exturl item zhihu" data-url="aHR0cHM6Ly93d3cuemhpaHUuY29tL3Blb3BsZS95b3VybmFtZQ==" title="https:&#x2F;&#x2F;www.zhihu.com&#x2F;people&#x2F;yourname"><i class="ic i-zhihu"></i></span> <span class="exturl item music" data-url="aHR0cHM6Ly9tdXNpYy4xNjMuY29tLyMvdXNlci9ob21lP2lkPTExMjg2ODg2Mw==" title="https:&#x2F;&#x2F;music.163.com&#x2F;#&#x2F;user&#x2F;home?id&#x3D;112868863"><i class="ic i-cloud-music"></i></span> <span class="exturl item weibo" data-url="aHR0cHM6Ly93ZWliby5jb20vYW1laGltZQ==" title="https:&#x2F;&#x2F;weibo.com&#x2F;amehime"><i class="ic i-weibo"></i></span> <span class="exturl item about" data-url="aHR0cHM6Ly9hYm91dC5tZS95b3VybmFtZQ==" title="https:&#x2F;&#x2F;about.me&#x2F;yourname"><i class="ic i-address-card"></i></span> <span class="exturl item email" data-url="bWFpbHRvOnhmY19leGNsYXZlQDE2My5jb20=" title="mailto:xfc_exclave@163.com"><i class="ic i-envelope"></i></span></div><ul class="menu"><li class="item"><a href="/" rel="section"><i class="ic i-home"></i>ホーム</a></li><li class="item dropdown"><a href="javascript:void(0);"><i class="ic i-feather"></i>投稿</a><ul class="submenu"><li class="item"><a href="/archives/" rel="section"><i class="ic i-list-alt"></i>アーカイブ</a></li><li class="item"><a href="/categories/" rel="section"><i class="ic i-th"></i>カテゴリ</a></li><li class="item"><a href="/tags/" rel="section"><i class="ic i-tags"></i>タグ</a></li></ul></li><li class="item dropdown"><a href="javascript:void(0);"><i class="ic i-link-circle"></i>リンク</a><ul class="submenu"><li class="item"><a href="/friends/" rel="section"><i class="ic i-heart"></i>友人帳</a></li><li class="item"><a href="/websites/" rel="section"><i class="ic i-sun"></i>サイト</a></li></ul></li><li class="item"><a href="/plan/" rel="section"><i class="ic i-stars"></i>学習計画</a></li></ul></div></div></div><ul id="quick"><li class="prev pjax"><a href="/computer-science/java-learning-path/2-intermediate/mybatis-tutorial/" rel="prev" title="前の記事"><i class="ic i-chevron-left"></i></a></li><li class="up"><i class="ic i-arrow-up"></i></li><li class="down"><i class="ic i-arrow-down"></i></li><li class="next pjax"><a href="/computer-science/java-learning-path/1-basic/02-java-concurrency/" rel="next" title="次の記事"><i class="ic i-chevron-right"></i></a></li><li class="percent"></li></ul></div></div><div class="dimmer"></div></div></main><footer id="footer"><div class="inner"><div class="widgets"><div class="rpost pjax"><h2>ランダムな記事</h2><ul><li class="item"><div class="breadcrumb"><a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6-JAVA%E5%AD%A6%E4%B9%A0%E8%B7%AF%E7%BA%BF-%E9%AB%98%E7%BA%A7%E7%AF%87/" title="カテゴリ \[计算机科学，JAVA 学习路线，高级篇]">\[计算机科学，JAVA 学习路线，高级篇]</a></div><span><a href="/computer-science/java-learning-path/3-advanced/mongodb-tutorial/" title="MongoDB 基础教程">MongoDB 基础教程</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6-Python%E5%85%A5%E9%97%A8%E6%95%99%E7%A8%8B/" title="カテゴリ \[计算机科学，Python 入门教程]">\[计算机科学，Python 入门教程]</a></div><span><a href="/computer-science/python/python-all-base/" title="Python 基础知识全通关">Python 基础知识全通关</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="カテゴリ 计算机科学">计算机科学</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/java-learning-path/" title="カテゴリ JAVA 学习路线">JAVA 学习路线</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/java-learning-path/%E8%BF%9B%E9%98%B6%E7%AF%87/" title="カテゴリ 进阶篇">进阶篇</a></div><span><a href="/computer-science/java-learning-path/2-intermediate/springcloud-tutorial/" title="SpringCloud 教程（Finchley.RELEASE）">SpringCloud 教程（Finchley.RELEASE）</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6-JAVA%E5%AD%A6%E4%B9%A0%E8%B7%AF%E7%BA%BF-%E9%AB%98%E7%BA%A7%E7%AF%87/" title="カテゴリ \[计算机科学，JAVA 学习路线，高级篇]">\[计算机科学，JAVA 学习路线，高级篇]</a></div><span><a href="/computer-science/java-learning-path/3-advanced/rabbitmq-tutorial/" title="RabbitMQ - 从下载安装到集群部署">RabbitMQ - 从下载安装到集群部署</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/%E8%B5%84%E6%BA%90%E6%94%B6%E9%9B%86/" title="カテゴリ 资源收集">资源收集</a></div><span><a href="/computer-science/resource/wallpaper_site/" title="高清壁纸网站推荐">高清壁纸网站推荐</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="カテゴリ 计算机科学">计算机科学</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/java-learning-path/" title="カテゴリ JAVA 学习路线">JAVA 学习路线</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/java-learning-path/%E8%BF%9B%E9%98%B6%E7%AF%87/" title="カテゴリ 进阶篇">进阶篇</a></div><span><a href="/computer-science/java-learning-path/2-intermediate/dubbo-tutorial/" title="Dubbo 知识整理">Dubbo 知识整理</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="カテゴリ 计算机科学">计算机科学</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/java-learning-path/" title="カテゴリ JAVA 学习路线">JAVA 学习路线</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/java-learning-path/%E6%9E%B6%E6%9E%84%E7%AF%87/" title="カテゴリ 架构篇">架构篇</a></div><span><a href="/computer-science/java-learning-path/5-framework/docker-tutorial/" title="给，你要的 Docker 详细教程">给，你要的 Docker 详细教程</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="カテゴリ 计算机科学">计算机科学</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/java-learning-path/" title="カテゴリ JAVA 学习路线">JAVA 学习路线</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/java-learning-path/%E9%AB%98%E7%BA%A7%E7%AF%87/" title="カテゴリ 高级篇">高级篇</a></div><span><a href="/computer-science/java-learning-path/3-advanced/zookeeper-tutorial/" title="Zookeeper 基础教程">Zookeeper 基础教程</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="カテゴリ 计算机科学">计算机科学</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/java-learning-path/" title="カテゴリ JAVA 学习路线">JAVA 学习路线</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/java-learning-path/%E8%BF%9B%E9%98%B6%E7%AF%87/" title="カテゴリ 进阶篇">进阶篇</a></div><span><a href="/computer-science/java-learning-path/2-intermediate/mybatis-tutorial/" title="MyBatis 教程">MyBatis 教程</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6-JAVA%E5%AD%A6%E4%B9%A0%E8%B7%AF%E7%BA%BF-%E5%9F%BA%E7%A1%80%E7%AF%87/" title="カテゴリ \[计算机科学，JAVA 学习路线，基础篇]">\[计算机科学，JAVA 学习路线，基础篇]</a></div><span><a href="/computer-science/java-learning-path/1-basic/02-java-concurrency/" title="Java 并发编程知识整理">Java 并发编程知识整理</a></span></li></ul></div><div><h2>最近のコメント</h2><ul class="leancloud-recent-comment"></ul></div></div><div class="status"><div class="copyright">&copy; 2020 – <span itemprop="copyrightYear">2022</span> <span class="with-love"><i class="ic i-sakura rotate"></i> </span><span class="author" itemprop="copyrightHolder">チンモク @ Chinmoku</span></div><div class="count"><span class="post-meta-item-icon"><i class="ic i-chart-area"></i> </span><span title="単語の総数">595k 単語</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="ic i-coffee"></i> </span><span title="読書の合計時間">9:01</span></div><div class="powered-by">Powered by <span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> & Theme.<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2FtZWhpbWUvaGV4by10aGVtZS1zaG9rYQ==">Shoka</span></div></div></div></footer></div><script data-config type="text/javascript">var LOCAL={path:"computer-science/java-learning-path/1-basic/01-java-basic/",favicon:{show:"（●´3｀●）やれやれだぜ",hide:"(´Д｀)大変だ！"},search:{placeholder:"検索…",empty:"「 ${query} 」については何も見つかりませんでした",stats:"${time} ms以内に ${hits} 件の結果が見つかりました"},valine:!0,fancybox:!0,copyright:"コピーは成功しました。 <br> 再印刷については、 ％s 契約に従ってください。",ignores:[function(e){return e.includes("#")},function(e){return new RegExp(LOCAL.path+"$").test(e)}]}</script><script src="https://cdn.polyfill.io/v2/polyfill.js"></script><script src="//cdn.jsdelivr.net/combine/npm/pace-js@1.0.2/pace.min.js,npm/pjax@0.2.8/pjax.min.js,npm/whatwg-fetch@3.4.0/dist/fetch.umd.min.js,npm/animejs@3.2.0/lib/anime.min.js,npm/algoliasearch@4/dist/algoliasearch-lite.umd.js,npm/instantsearch.js@4/dist/instantsearch.production.min.js,npm/lozad@1/dist/lozad.min.js,npm/quicklink@2/dist/quicklink.umd.js"></script><script src="/js/app.js?v=0.2.5"></script></body></html>