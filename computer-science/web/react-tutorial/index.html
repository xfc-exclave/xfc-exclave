<!DOCTYPE html><html lang="ja"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#FFF"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png"><link rel="icon" type="image/ico" sizes="32x32" href="/images/favicon.ico"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="alternate" type="application/rss+xml" title="チンモクのブログ" href="https://www.chinmoku.cc/rss.xml"><link rel="alternate" type="application/atom+xml" title="チンモクのブログ" href="https://www.chinmoku.cc/atom.xml"><link rel="alternate" type="application/json" title="チンモクのブログ" href="https://www.chinmoku.cc/feed.json"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Mulish:300,300italic,400,400italic,700,700italic%7CFredericka%20the%20Great:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20JP:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20SC:300,300italic,400,400italic,700,700italic%7CInconsolata:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="/css/app.css?v=0.2.5"><meta name="keywords" content="前端,react"><link rel="canonical" href="https://www.chinmoku.cc/computer-science/web/react-tutorial/"><title>React 通关指南 - React 教程 - WEB 前端 - 计算机科学 | Chinmoku = チンモクのブログ = 露の世は　露の世ながら　さりながら</title><meta name="generator" content="Hexo 5.4.0"></head><body itemscope itemtype="http://schema.org/WebPage"><div id="loading"><div class="cat"><div class="body"></div><div class="head"><div class="face"></div></div><div class="foot"><div class="tummy-end"></div><div class="bottom"></div><div class="legs left"></div><div class="legs right"></div></div><div class="paw"><div class="hands left"></div><div class="hands right"></div></div></div></div><div id="container"><header id="header" itemscope itemtype="http://schema.org/WPHeader"><div class="inner"><div id="brand"><div class="pjax"><h1 itemprop="name headline">React 通关指南</h1><div class="meta"><span class="item" title="作成日：2022-05-26 19:37:53"><span class="icon"><i class="ic i-calendar"></i> </span><span class="text">投稿日</span> <time itemprop="dateCreated datePublished" datetime="2022-05-26T19:37:53+08:00">2022-05-26</time> </span><span class="item" title="単語数"><span class="icon"><i class="ic i-pen"></i> </span><span class="text">単語数</span> <span>37k</span> <span class="text">単語</span> </span><span class="item" title="読書の時間"><span class="icon"><i class="ic i-clock"></i> </span><span class="text">読書の時間</span> <span>33 分</span></span></div></div></div><nav id="nav"><div class="inner"><div class="toggle"><div class="lines" aria-label="ナビゲーションバーの切り替え"><span class="line"></span> <span class="line"></span> <span class="line"></span></div></div><ul class="menu"><li class="item title"><a href="/" rel="start">Chinmoku</a></li></ul><ul class="right"><li class="item theme"><i class="ic i-sun"></i></li><li class="item search"><i class="ic i-search"></i></li></ul></div></nav></div><div id="imgs" class="pjax"><ul><li class="item" data-background-image="https://reference-1301046789.cos.ap-nanjing.myqcloud.com/blog-img/861a9af47c3c448ab1d54a54ccae464a.jpg"></li><li class="item" data-background-image="https://reference-1301046789.cos.ap-nanjing.myqcloud.com/blog-img/0e1f8af86cde4bf08a048eb2a0106a8b.jpg"></li><li class="item" data-background-image="https://reference-1301046789.cos.ap-nanjing.myqcloud.com/blog-img/544d5440880c11ebb6edd017c2d2eca2.jpg"></li><li class="item" data-background-image="https://reference-1301046789.cos.ap-nanjing.myqcloud.com/blog-img/1b87e2c5880511ebb6edd017c2d2eca2.jpg"></li><li class="item" data-background-image="https://reference-1301046789.cos.ap-nanjing.myqcloud.com/blog-img/c0727db5dc5b4543ba3a6bf20836f6ac.jpg"></li><li class="item" data-background-image="https://reference-1301046789.cos.ap-nanjing.myqcloud.com/blog-img/3772947def804c6db8bae5ff30097998.png"></li></ul></div></header><div id="waves"><svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"/></defs><g class="parallax"><use xlink:href="#gentle-wave" x="48" y="0"/><use xlink:href="#gentle-wave" x="48" y="3"/><use xlink:href="#gentle-wave" x="48" y="5"/><use xlink:href="#gentle-wave" x="48" y="7"/></g></svg></div><main><div class="inner"><div id="main" class="pjax"><div class="article wrap"><div class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList"><i class="ic i-home"></i> <span><a href="/">ホーム</a></span><i class="ic i-angle-right"></i> <span itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/computer-science/" itemprop="item" rel="index" title="カテゴリ 计算机科学"><span itemprop="name">计算机科学</span></a><meta itemprop="position" content="1"></span><i class="ic i-angle-right"></i> <span itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/computer-science/WEB%E5%89%8D%E7%AB%AF/" itemprop="item" rel="index" title="カテゴリ WEB 前端"><span itemprop="name">WEB 前端</span></a><meta itemprop="position" content="2"></span><i class="ic i-angle-right"></i> <span class="current" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/computer-science/WEB%E5%89%8D%E7%AB%AF/React-%E6%95%99%E7%A8%8B/" itemprop="item" rel="index" title="カテゴリ React 教程"><span itemprop="name">React 教程</span></a><meta itemprop="position" content="3"></span></div><article itemscope itemtype="http://schema.org/Article" class="post block" lang="ja"><link itemprop="mainEntityOfPage" href="https://www.chinmoku.cc/computer-science/web/react-tutorial/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpg"><meta itemprop="name" content="チンモク"><meta itemprop="description" content="露の世は　露の世ながら　さりながら, 本站主要以 Java 开发总结文章为主，也会向技术周边进行适当的扩展。此外，偶尔会更新部分其他学习或感兴趣的内容，如语言学习、文本翻译、文艺创作等。"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="チンモクのブログ"></span><div class="body md" itemprop="articleBody"><div class="note info"><p>最近一段时间特别喜欢前端，这些天在 B 站上找到一个感觉特别良好的视频教程，自我感觉还算是比较用心地跟着学习了一下，但在学习过程中不太方便做笔记，为了避免即学即忘，所以在学完之后，赶紧详细整理一下 React 相关笔记。</p></div><p>在开篇之前有一些<mark>题外话</mark>需要说明，当然，既然是题外话，那就与学习 React 本身无关，是本篇文章维护相关但内容，以及一些闲话，您也完全<mark>可以先行忽略</mark>。</p><ol><li><p>本文可选访问地址</p><ul><li><p>个人博客版：<a href="https://www.chinmoku.cc/computer-science/web/react-tutorial/">https://www.chinmoku.cc/computer-science/web/react-tutorial/</a></p><p>个人博客版会实时更新，或参与互动（如果需要的话）。</p></li><li><p>有道笔记版：<span class="exturl" data-url="aHR0cHM6Ly9ub3RlLnlvdWRhby5jb20vcy9ZVWdiWDdH">https://note.youdao.com/s/YUgbX7G</span></p><p>此版本较为纯净，可作为备选入口，其更新时间截至本文首次发布（2022-05-26），无法保证该版本后续更新的及时性和链接长期有效。</p><p>另外，部分自定义语法在有道笔记中可能不被识别。</p></li></ul></li><li><p>本文略有些 “标题党” 成分，但文本内容在努力向该标题靠拢。</p></li><li><p>本博客暂不愿接受任何形式的转载，允许引用或扩散本文链接（博客版链接），个人觉得 “转载” 机制的泛滥污染了互联网的学习氛围（仅个人观点，不参与争论）。</p></li><li><p>作为 Java 后端开发，在前端知识上的见解，定然远不如术业专攻的前端工程师深刻和独到。</p></li><li><p>本人或多或少有些语言恐慌症，希望各位大人在发表观点时尽量抹去锋芒（不情之请）。</p></li><li><p>在学习 React 和编写本文的过程中，听到一些人说我 “卷”，其实我对编程并没有热爱，但我的性格就是但凡决定要做的事情，就一定会认认真真，没想到被人理解成 “卷”，还是略微有些不高兴。</p></li><li><p>另外，本文相关外链均存在较大价值，特别是项目案例部分，我也算是为此煞费苦心了。</p></li></ol><p>闲话打住，这就开始吧！！！</p><h3 id="react-入门"><a class="anchor" href="#react-入门">#</a> React 入门</h3><div class="note success no-icon"><p>尊敬的旅者，欢迎来到 React 的世界，我是您此段行程的向导（也被称为 “稀里糊涂的 NPC”），刚刚度过了煎熬的五大天，终于从 <span class="exturl" data-url="aHR0cHM6Ly93d3cuYmlsaWJpbGkuY29tL3ZpZGVvL0JWMXd5NHkxRDdKVA==">NPC 培训中心</span>（指 B 站）顺利毕业，为了不辜负师长的期望（假设有），我决定努力做一个优秀的 NPC，因此有了这篇文章。</p><p>这篇文章严重参考了该培训中心的相关资料，也有少部分掺杂了微不足道的我的小小见解，希望旅者大人们不要见怪。为了改善大人们的旅途体验，微不足道的我使用了 <code>CodePen</code> 和 <code>Codesandbox</code> 为文中的部分代码编写了在线运行实例，如果一不小心弄巧成拙，也请大人们原谅微不足道的我的过失。</p><p>当然了，旅途总是<strong>漫长</strong>的，希望旅者大人们合理安排时间。</p></div><h4 id="简介"><a class="anchor" href="#简介">#</a> 简介</h4><p>一提到 Web 前端开发，我们很容易就能想到前端的三大主流框架：Vue、React、Angular。个人觉得 Web 前端开发首选推荐肯定是 Vue，React 可以作为在掌握 Vue 知识基础上的扩展，当然，Vue 语言在设计之初就对 React 进行了借鉴，所以二者之间存在诸多联系和相似点，至于 Angular 暂时还不在笔者对学习考虑范围内，不作相关扩展。</p><p>另外，从 Vue 和 React 两者官网的描述也可看出两者本质上的差异。</p><blockquote><p><code>React</code> 是一个用于构建用户界面的 JavaScript 库。</p><p><code>Vue</code> 是一套用于构建用户界面的渐进式框架。</p></blockquote><p>因此，对于学习而言，Vue 封装了更多的 API，适合作为前端及时就业框架的学习首选，而 React 则更加适合在掌握 Vue 的基础上对前端知识进行深化，它更容易帮助学习者从简单的框架使用之中脱离出来，逐渐理解框架运行的底层实现。</p><p><strong>React 官网</strong></p><ol><li><p>英文官网：<span class="exturl" data-url="aHR0cHM6Ly93d3cucmVhY3Rqcy5vcmc=">https://www.reactjs.org</span></p></li><li><p>中文官网：<span class="exturl" data-url="aHR0cHM6Ly9yZWFjdC5kb2NzY2hpbmEub3Jn">https://react.docschina.org</span></p></li></ol><p><strong>介绍描述</strong></p><p><strong>特点</strong></p><ol><li><p>声明式编码。</p></li><li><p>组件化编码。</p></li><li><p>React Native 可编写原生应用。</p></li><li><p>高效（使用优秀的 Diffing 算法）。</p></li></ol><details class="info"><summary>🍎 React 高效的原因？</summary><div><ol><li><p>使用虚拟 DOM，并非总是直接操作页面的真实 DOM。</p></li><li><p>DOM 采用 Diffing 算法，使页面最小程度地进行重新渲染。</p></li></ol></div></details><h4 id="基本使用"><a class="anchor" href="#基本使用">#</a> 基本使用</h4><blockquote><p>为了方便在学习过程中能够更加直观地展示页面效果，您可以通过 <span class="exturl" data-url="aHR0cHM6Ly9jb2RlcGVuLmlv">Codepen</span> 等工具进行在线编程。</p></blockquote><p><strong>Hello World</strong></p><p>以下是一个最基础的 React 示例，您可以借此对 React 拥有一个基本的认知：</p><figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>utf-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>Hello React<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token comment">&lt;!-- 准备好用于渲染 DOM 的容器 --></span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>app<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="10"></td><td><pre></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/javascript<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://unpkg.com/react@16/umd/react.development.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/javascript<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://unpkg.com/react-dom@16/umd/react-dom.development.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/javascript<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://unpkg.com/babel-standalone@6/babel.min.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="14"></td><td><pre></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/babel<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript"></span></span></pre></td></tr><tr><td data-num="16"></td><td><pre>        <span class="token comment">// 创建虚拟 DOM</span></pre></td></tr><tr><td data-num="17"></td><td><pre>        <span class="token keyword">const</span> <span class="token constant">VDOM</span> <span class="token operator">=</span> <span class="token operator">&lt;</span>h2<span class="token operator">></span>Hello<span class="token punctuation">,</span> React<span class="token operator">!</span><span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">></span></pre></td></tr><tr><td data-num="18"></td><td><pre>        <span class="token comment">// 将虚拟 DOM 渲染到页面的指定节点中</span></pre></td></tr><tr><td data-num="19"></td><td><pre>        ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token constant">VDOM</span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"app"</span><span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="20"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="21"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="22"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><p>为了方便查看运行效果，您可以<span class="exturl" data-url="aHR0cHM6Ly9jb2RlcGVuLmlvL3hmYy1leGNsYXZlL3Blbi9Qb1F6SmR2">点击此处</span>进行在线预览，当然，您也可以亲自尝试一下。</p><p>如代码所示，通过 CDN 方式引入 React，你需要引入如下三个文件：</p><ol><li><p>react.development.js - React 核心库。</p></li><li><p>react-dom.development.js - 提供操作 DOM 的 React 扩展库。</p></li><li><p>babel.min.js - 用于解析 JSX 的库。</p></li></ol><p>并且，与普通的 JavaScript 代码不同的是，React 脚本的类型需要声明为 <code>text/babel</code> ，其作用在于解析 JSX 语法代码并将其转换为浏览器识别的 JS 代码。</p><p>在学习过 Web 基础之后，我们知道可以通过 <code>document.createElement()</code> 来创建 DOM 元素，但在 React 中采用了 JSX 语法来替代原生 JavaScript 创建 DOM 的方式。</p><p><strong>虚拟 DOM 与真实 DOM</strong></p><p>虚拟 DOM 是 React 的亮点之一，所谓虚拟 DOM，即非真实的 DOM。其实虚拟 DOM 本质上是一个一般对象，它相较于真实 DOM 而言拥有更少的属性，且无法在浏览器中直接显示。虚拟 DOM 去除了很多真实 DOM 中存在但程序编码无需关注的属性。</p><p>虚拟 DOM 的引入使页面更新效率得到了极大的提升，这是因为真实 DOM 直接作用于页面，对于任何一次更新，真实 DOM 都会重新进行渲染，即便该更新内容只适应于极小的范围，这就造成了浏览器性能的极大浪费。而虚拟 DOM 则充当了用户与真实 DOM 之间的过滤助手，它通过 Diffing 算法，识别出需要更新的数据节点，并将其转换为真实 DOM，而对于未做变更的数据节点，则无需进行 DOM 转换，这样就极大程度地将数据变更控制在了最小的元素单元内。</p><p>基于这一设计方式，React 提供了用于创建虚拟 DOM 的 API，其声明示例如下：</p><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// ================ 使用 javascript 创建虚拟 DOM</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment">// React.createElement(node, attributes, content)</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">const</span> <span class="token constant">VDOM</span> <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'h1'</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>id<span class="token operator">:</span> <span class="token string">'title'</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> React<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'span'</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token string">'Hello, React~'</span><span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token comment">// ================ 使用 jsx 创建虚拟 DOM // 注意：使用 jsx 需要指定 javascript 类型为 text/babel</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token constant">VDOM</span> <span class="token operator">=</span> <span class="token punctuation">(</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token operator">&lt;</span>h1 id<span class="token operator">=</span><span class="token string">"title"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="8"></td><td><pre>        <span class="token operator">&lt;</span>span<span class="token operator">></span>Hello<span class="token punctuation">,</span> React<span class="token operator">~</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">></span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="11"></td><td><pre>ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token constant">VDOM</span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'app'</span><span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr></table></figure><p>仔细观察这个示例，相信您对 JSX 与 JavaScript 之间的差异已经有了基本的了解。</p><h4 id="react-jsx"><a class="anchor" href="#react-jsx">#</a> React JSX</h4><p>通过前文的了解，我们可以看出 JSX 的基本语法与 JavaScript 语法十分相似，而其虚拟 DOM 创建的语法又与 html 语法如出一辙。但是，JSX 与这二者之间仍存在诸多不同之处，观察下面这段代码清单，您或许会有更加深刻的感受：</p><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> <span class="token constant">VDOM</span> <span class="token operator">=</span> <span class="token punctuation">(</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token operator">&lt;</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="3"></td><td><pre>        <span class="token operator">&lt;</span>h2 className<span class="token operator">=</span><span class="token string">"title"</span> id<span class="token operator">=</span><span class="token punctuation">&#123;</span>myId<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token operator">></span></pre></td></tr><tr><td data-num="4"></td><td><pre>            <span class="token operator">&lt;</span>span style<span class="token operator">=</span><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>swig￼<span class="token number">0</span><span class="token operator">--</span><span class="token operator">>></span><span class="token punctuation">&#123;</span>myData<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span></pre></td></tr><tr><td data-num="5"></td><td><pre>        <span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">></span></pre></td></tr><tr><td data-num="6"></td><td><pre>        <span class="token operator">&lt;</span>h2 className<span class="token operator">=</span><span class="token string">"title"</span> id<span class="token operator">=</span><span class="token punctuation">&#123;</span>myId<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token operator">></span></pre></td></tr><tr><td data-num="7"></td><td><pre>            <span class="token operator">&lt;</span>span style<span class="token operator">=</span><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>swig￼<span class="token number">1</span><span class="token operator">--</span><span class="token operator">>></span><span class="token punctuation">&#123;</span>myData<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span></pre></td></tr><tr><td data-num="8"></td><td><pre>        <span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">></span></pre></td></tr><tr><td data-num="9"></td><td><pre>        <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">"text"</span><span class="token operator">/</span><span class="token operator">></span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="12"></td><td><pre>ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token constant">VDOM</span><span class="token punctuation">,</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'app'</span><span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr></table></figure><p>从这段代码清单中可以看出，相比于 JavaScript 和 html，JSX 还需要遵循一些额外的规则，这里为您总结 JSX 的语法规则如下：</p><ol><li><p>JSX 在定义虚拟 DOM 时，不应当加引号，否则虚拟 DOM 内容会被识别为普通字符串。</p></li><li><p>JSX 标签中混入 JavaScript 语法时，应当使用符号 <code>&#123;&#125;</code> 包裹。</p></li><li><p>虚拟 DOM 节点的类属性应当使用 <code>className</code> 而非 <code>class</code> 。</p></li><li><p>虚拟 DOM 中的内联样式需要使用 <code>style=&#123;&#123;key: value&#125;&#125;</code> 进行书写，且其内的 CSS 属性名也需要使用驼峰命名方式。</p><blockquote><p>可以理解为 style 中传入的是一个表示样式内容的 JS 对象。</p></blockquote></li><li><p>虚拟 DOM 只能有一个根标签。</p></li><li><p>所有虚拟 DOM 的标签都必须闭合。</p></li><li><p>虚拟 DOM 标签首字母小写时，转换真实 DOM 则会匹配同名的 html 元素，首写字母大写时，React 则会渲染对应的组件，若对应组件不存在，则会抛出异常。</p></li></ol><p><strong>JS 表达式 / JS 语句</strong></p><p>值得注意的是，在 JSX 中允许书写 JS 表达式，但不允许书写 JS 语句。</p><p>表达式和语句的区别在于，前者可以产生一个值，可以放在任何需要值的地方，且能够被其他变量接收，它们通常会占用一定的内存空间，而后者则更多地偏向于进行代码的控制。</p><p>JS 表达式示例：</p><ol><li><p>a</p></li><li><p>a + b</p></li><li><p>handler(20)</p></li><li><p>arr.map()</p></li><li><p>function handler(params) {}</p></li></ol><p>JS 代码示例：</p><ol><li><p>if(condition) {}</p></li><li><p>for(var item in arr) {}</p></li><li case:="" xxx=""><p>switch(condition)</p></li></ol><p><strong>虚拟 DOM 渲染</strong></p><p>语法： <code>ReactDOM.render(virtualDOM, containerDOM)</code> 。</p><h4 id="模块-组件-模块化-组件化"><a class="anchor" href="#模块-组件-模块化-组件化">#</a> 模块、组件、模块化、组件化</h4><ol><li><p>模块</p><p>所谓模块，通常是一个向外提供特定功能的 JavaScript 程序，一般就是一个 JS 文件。</p><p>模块的拆分，有利于代码解耦，使代码逻辑更清晰，更容易维护。此外，拆分模块还可以方便 JS 复用，简化 JS 编写，提高 JS 运行效率。</p></li><li><p>组件</p><p>组件通常是用来实现局部功能效果的代码和资源的集合，该集合中包含所有实现该组件的相关资源。</p><p>随着页面功能的增加，使用组件对不同功能进行代码聚合，能够很方便地做到即取即用。当不再需要该组件时，能够轻松进行卸载，而不会引起代码的异常连锁。</p><p>总之，组件化是前端发展的趋势，甚至，相同的思想在其他各种语言、各种类型的程序中都已进行了广泛的应用。其典型特点就是：可插拔，易扩展，低耦合，高性能。当然，与之相应的，也会存在一定的学习成本。</p></li><li><p>模块化</p></li><li><p>组件化</p></li></ol><blockquote><p>编程过程中难免会碰到很多 <code>~ ~ 化</code> 的概念，其实无非是加上了 <code>-ization</code> 的区别。如果你能够正确地区分【商业】和【商业化】、【工业】和【工业化】，理解这些概念就不是什么难事了。其实这些只是语文上的区别，所谓的 “某某化”，其实就是将这个 “某某” 进行大范围、大规模地应用，并形成一定的规范而已。</p></blockquote><h3 id="react-面向组件编程"><a class="anchor" href="#react-面向组件编程">#</a> React 面向组件编程</h3><h4 id="基本理解和使用"><a class="anchor" href="#基本理解和使用">#</a> 基本理解和使用</h4><p><strong>React 开发者工具</strong></p><p>如您习惯使用 Chrome 浏览器进行开发（推荐），可在 Chrome 商店安装 <code>React Developer Tools</code> 来帮助开发和调试。</p><p>chrome 应用商店：<span class="exturl" data-url="aHR0cHM6Ly9jaHJvbWUuZ29vZ2xlLmNvbS93ZWJzdG9yZS9jYXRlZ29yeS9leHRlbnNpb25z">https://chrome.google.com/webstore/category/extensions</span></p><p><img data-src="https://img.xfc-exclave.com/2022/05/ceb9e52b1bc5edfc74b2a6e1e97527ec1652881005.png" alt="ChromeReactdevelopertools"></p><p>将其添加至 Chrome，当访问 React 开发的网页时，即可打开控制台进行调试。</p><p>您也可以在添加该插件后，开启该插件并借助<span class="exturl" data-url="aHR0cHM6Ly93d3cubWVpdHVhbi5jb20=">美团官网</span>先行体验一下该插件的相关功能，再决定是否使用。</p><p><strong>React 组件声明方式</strong></p><p>React 中组件有两种声明方式：</p><ol><li><p>函数式组件</p><p>声明方式：</p><figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/babel<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript"></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">function</span> <span class="token function">MyComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token comment">// 由于 babel 编译之后开启了严格模式，因此 this 将指向 undefined</span></pre></td></tr><tr><td data-num="4"></td><td><pre>   <span class="token keyword">return</span> <span class="token operator">&lt;</span>h2<span class="token operator">></span>函数式组件<span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">></span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>MyComponent<span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'app'</span><span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><p>执行流程说明：</p><p>babel 在解析 JSX 的过程中，读取到 <code>ReactDOM.render()</code> ，发现其组件标签为 <code>&lt;MyComponent/&gt;</code> 是通过函数进行定义的，因此就会执行该函数并得到其返回值，然后将返回值作为虚拟 DOM，最终转换为真实 DOM 并渲染到页面。</p></li><li><p>类式组件</p><p>声明方式：</p><figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/babel<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript"></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">MyComponent</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">// 类式组件可声明构造器</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token comment">//render 存在于当前组件的原型对象上，供该组件的实例使用</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token comment">//this 指向当前组件的实例对象</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token keyword">return</span> <span class="token operator">&lt;</span>h2<span class="token operator">></span>类式组件<span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">></span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>MyComponent<span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'app'</span><span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><p>执行流程说明：</p><p>babel 在解析 JSX 的过程中，读取到 <code>ReactDOM.render()</code> ，发现其组件标签为 <code>&lt;MyComponent/&gt;</code> 是通过类进行定义的，于是其内部就会通过关键字 <code>new</code> 实例化出该类的实例，并通过该实例调用到原型上的 render 方法，然后将 render 的返回值作为虚拟 DOM，最终转换为真实 DOM 并渲染到页面。</p><p>构造器：</p><p>构造器也被称为构造函数，它存在于 C、Java、Python 等诸多语言中，其作用主要是在创建对象时进行初始化，其执行时机通常是在使用 <code>new</code> 关键字（显式或隐式）创建对象时执行，并且在该对象的生命周期中只执行一次。构造函数通常是默认存在的，并且允许被覆盖重写。</p></li></ol><blockquote><p>在新版本的 React 中已经推荐使用函数式组件，但由于类式组件更易于知识理解层次的递进，因此，本文将先着重从类式组件入手来解述组件相关知识，最后在归纳在函数式组件中的用法差异。</p></blockquote><p><strong>React 组件实例三大属性</strong></p><p>React 组件实例拥有三大属性，它们共同丰富了组件的功能。</p><ol><li><p>state</p></li><li><p>props</p></li><li><p>refs</p></li></ol><p>在接下来的叙述中，将对 React 组件三大属性进行逐一说明。</p><h4 id="三大核心属性state"><a class="anchor" href="#三大核心属性state">#</a> 三大核心属性：state</h4><p>state 是 React 组件最重要的属性，其对应的值被声明为对象类型。从字面解读，该属性被称为 “状态机”，（个人认为）也可以理解为一个数据集，其作用是用来存储核心数据，相当于 Vue 中的 data。</p><p><strong>state 的基本使用</strong></p><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">LoginStatus</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'constructor'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>        <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="5"></td><td><pre>        <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">&#123;</span>isLogin<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> username<span class="token operator">:</span> <span class="token string">'路易斯'</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>        <span class="token comment">// 通过 .bind (this) 可以将 this 对象传递到 switchLogin () 函数中（强制绑定，不推荐）</span></pre></td></tr><tr><td data-num="7"></td><td><pre>        <span class="token keyword">this</span><span class="token punctuation">.</span>switchLogin <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">switchLogin</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="9"></td><td><pre></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token comment">//state = &#123;isLogin: false, username: ' 路易斯 '&#125; // 构造器中的初始化内容可以声明在外侧，但需要注意 this 指向</span></pre></td></tr><tr><td data-num="11"></td><td><pre></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'render'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>        <span class="token keyword">const</span> <span class="token punctuation">&#123;</span>isLogin<span class="token punctuation">,</span> username<span class="token punctuation">&#125;</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state</pre></td></tr><tr><td data-num="15"></td><td><pre>        <span class="token keyword">return</span> <span class="token punctuation">(</span></pre></td></tr><tr><td data-num="16"></td><td><pre>            <span class="token operator">&lt;</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="17"></td><td><pre>                <span class="token operator">&lt;</span>h3<span class="token operator">></span>早上好！<span class="token operator">&lt;</span>span style<span class="token operator">=</span><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>swig￼<span class="token number">3</span><span class="token operator">--</span><span class="token operator">>></span><span class="token punctuation">&#123;</span>username<span class="token punctuation">&#125;</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span>，<span class="token punctuation">&#123;</span>isLogin <span class="token operator">?</span> <span class="token string">'欢迎访问XXX系统！'</span> <span class="token operator">:</span> <span class="token string">'请点击下方按钮进行登录~'</span><span class="token punctuation">&#125;</span><span class="token operator">&lt;</span><span class="token operator">/</span>h3<span class="token operator">></span></pre></td></tr><tr><td data-num="18"></td><td><pre>                <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span>switchLogin<span class="token punctuation">&#125;</span><span class="token operator">></span><span class="token punctuation">&#123;</span>isLogin <span class="token operator">?</span> <span class="token string">'注销'</span><span class="token operator">:</span> <span class="token string">'登录'</span><span class="token punctuation">&#125;</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span></pre></td></tr><tr><td data-num="19"></td><td><pre>            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="20"></td><td><pre>        <span class="token punctuation">)</span></pre></td></tr><tr><td data-num="21"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="22"></td><td><pre></pre></td></tr><tr><td data-num="23"></td><td><pre>    <span class="token function">switchLogin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'switchLogin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>        <span class="token keyword">const</span> isLogin <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>isLogin</pre></td></tr><tr><td data-num="26"></td><td><pre>        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>isLogin<span class="token operator">:</span> <span class="token operator">!</span>isLogin<span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="27"></td><td><pre>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="29"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="30"></td><td><pre>ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>LoginStatus<span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'app'</span><span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr></table></figure><p>您可以<span class="exturl" data-url="aHR0cHM6Ly9jb2RlcGVuLmlvL3hmYy1leGNsYXZlL3Blbi9hYnFKT0d6">点击此处</span>进行在线预览执行效果，浏览时推荐打开浏览器控制台查看相关的输出内容。</p><p>在这个示例中，请着重注意以下几个问题：</p><details class="info"><summary>🍎 state 内的数据是通过什么方式进行变更的？</summary><div><p>state 维护的数据只能通过 React 组件对象示例的 <code>setState()</code> 方法进行调用。</p><p>扩展资料：<span class="exturl" data-url="aHR0cHM6Ly93d3cuemhpaHUuY29tL3F1ZXN0aW9uLzQ0MDkxNjI5NC9hbnN3ZXIvMTc0ODU1ODU3Mg==">知乎：React 为什么不能直接修改 state？</span></p></div></details><details class="info"><summary>🍎 构造器和 render 函数分别在什么时候执行，以及它们各自会被调用多少次？</summary><div><p>构造器在实例声明的时候调用，且只调用一次。render 函数则在除了在 state 渲染到页面时调用外，还会在每次 setState 函数执行时调用，即 render 被调用次数为 setState 函数调用次数加一。</p></div></details><details class="info"><summary>🍎 可以不声明构造器吗？构造器中的 super() 的位置有什么要求？以及它的作用是什么？</summary><div><p>React 类式组件可以不显示声明构造器，但 <code>React.Component</code> 中是默认存在的。如显式声明构造器，则必须指定 <code>super()</code> 函数，且应当保证其在构造器内所有的有效代码中第一位执行，这是因为 super 函数会继承父类的 this 对象并对其进行加工。</p></div></details><details class="info"><summary>🍎 构造器及其 super 函数的 props 参数是否必须？</summary><div><p>不是必须，视需要而定，如需要在构造器中使用 props 对象，则必须传递。</p></div></details><p><strong>代码改造</strong></p><p>事实上，在 React 类式组件中，通过 <code>function</code> 关键字声明的函数，在函数体中是无法直接获取到 this 对象的，但通过箭头函数声明却可以轻易地获取到 this 对象，基于上面的示例进行改造如下：</p><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">LoginStatus</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    state <span class="token operator">=</span> <span class="token punctuation">&#123;</span> isLogin<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> username<span class="token operator">:</span> <span class="token string">'路易斯'</span> <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>        <span class="token keyword">const</span> <span class="token punctuation">&#123;</span> isLogin<span class="token punctuation">,</span> username <span class="token punctuation">&#125;</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state</pre></td></tr><tr><td data-num="6"></td><td><pre>        <span class="token keyword">return</span> <span class="token punctuation">(</span></pre></td></tr><tr><td data-num="7"></td><td><pre>            <span class="token operator">&lt;</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="8"></td><td><pre>                <span class="token operator">&lt;</span>h3<span class="token operator">></span>早上好！<span class="token operator">&lt;</span>span style<span class="token operator">=</span><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>swig￼<span class="token number">4</span><span class="token operator">--</span><span class="token operator">>></span><span class="token punctuation">&#123;</span>username<span class="token punctuation">&#125;</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span>，<span class="token punctuation">&#123;</span>isLogin <span class="token operator">?</span> <span class="token string">'欢迎访问XXX系统！'</span> <span class="token operator">:</span> <span class="token string">'请点击下方按钮进行登录~'</span><span class="token punctuation">&#125;</span><span class="token operator">&lt;</span><span class="token operator">/</span>h3<span class="token operator">></span></pre></td></tr><tr><td data-num="9"></td><td><pre>                <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span>switchLogin<span class="token punctuation">&#125;</span><span class="token operator">></span><span class="token punctuation">&#123;</span>isLogin <span class="token operator">?</span> <span class="token string">'注销'</span> <span class="token operator">:</span> <span class="token string">'登录'</span><span class="token punctuation">&#125;</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span></pre></td></tr><tr><td data-num="10"></td><td><pre>            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="11"></td><td><pre>        <span class="token punctuation">)</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="13"></td><td><pre></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token function-variable function">switchLogin</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>        <span class="token keyword">const</span> isLogin <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>isLogin</pre></td></tr><tr><td data-num="16"></td><td><pre>        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> isLogin<span class="token operator">:</span> <span class="token operator">!</span>isLogin <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>LoginStatus <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'app'</span><span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr></table></figure><p>在这个示例中，箭头函数中的 this 指向不会丢失，这是因为箭头函数不会创建其自身的执行上下文，因此箭头函数中的 this 会向其作用域外层逐层查找，直到找到 this 的定义。</p><p><strong>函数式组件中的 state</strong></p><p>state 在函数式组件中的使用方式略有不同，以下是 state 在函数式组件中的使用：</p><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">function</span> <span class="token function">LoginState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token keyword">const</span> <span class="token punctuation">[</span>isLogin<span class="token punctuation">,</span> setIsLogin<span class="token punctuation">]</span> <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">useState</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token keyword">const</span> <span class="token punctuation">[</span>username<span class="token punctuation">,</span> setUsername<span class="token punctuation">]</span><span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">useState</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token keyword">const</span> <span class="token function-variable function">switchLogin</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">setIsLogin</span><span class="token punctuation">(</span><span class="token operator">!</span>isLogin<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token keyword">return</span> <span class="token punctuation">(</span></pre></td></tr><tr><td data-num="8"></td><td><pre>        <span class="token operator">&lt;</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="9"></td><td><pre>            <span class="token operator">&lt;</span>h3<span class="token operator">></span>早上好！<span class="token operator">&lt;</span>span style<span class="token operator">=</span><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>swig￼<span class="token number">5</span><span class="token operator">--</span><span class="token operator">>></span><span class="token punctuation">&#123;</span>username<span class="token punctuation">&#125;</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span>，<span class="token punctuation">&#123;</span>isLogin <span class="token operator">?</span> <span class="token string">'欢迎访问XXX系统！'</span> <span class="token operator">:</span> <span class="token string">'请点击下方按钮进行登录~'</span><span class="token punctuation">&#125;</span><span class="token operator">&lt;</span><span class="token operator">/</span>h3<span class="token operator">></span></pre></td></tr><tr><td data-num="10"></td><td><pre>            <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">&#123;</span>switchLogin<span class="token punctuation">&#125;</span><span class="token operator">></span><span class="token punctuation">&#123;</span>isLogin <span class="token operator">?</span> <span class="token string">'注销'</span> <span class="token operator">:</span> <span class="token string">'登录'</span><span class="token punctuation">&#125;</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span></pre></td></tr><tr><td data-num="11"></td><td><pre>        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token punctuation">)</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h4 id="三大核心属性props"><a class="anchor" href="#三大核心属性props">#</a> 三大核心属性：props</h4><p>React 中的每个组件都会有其自身的 <code>props</code> 属性，该属性值来源于组件标签中传递的属性，其作用即是通过标签属性从组件外部向组件内部传递变化的数据。</p><p><strong>props 的基本使用</strong></p><figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>node01<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>node02<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>node03<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/babel<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript"></span></span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>        <span class="token keyword">const</span> <span class="token punctuation">&#123;</span> name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> gender <span class="token punctuation">&#125;</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props</pre></td></tr><tr><td data-num="10"></td><td><pre>        <span class="token keyword">return</span> <span class="token punctuation">(</span></pre></td></tr><tr><td data-num="11"></td><td><pre>            <span class="token operator">&lt;</span>ul<span class="token operator">></span></pre></td></tr><tr><td data-num="12"></td><td><pre>                <span class="token operator">&lt;</span>li<span class="token operator">></span>姓名：<span class="token punctuation">&#123;</span>name<span class="token punctuation">&#125;</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span></pre></td></tr><tr><td data-num="13"></td><td><pre>                <span class="token operator">&lt;</span>li<span class="token operator">></span>性别：<span class="token punctuation">&#123;</span>gender<span class="token punctuation">&#125;</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span></pre></td></tr><tr><td data-num="14"></td><td><pre>                <span class="token operator">&lt;</span>li<span class="token operator">></span>年龄：<span class="token punctuation">&#123;</span>age<span class="token punctuation">&#125;</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span></pre></td></tr><tr><td data-num="15"></td><td><pre>            <span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">></span></pre></td></tr><tr><td data-num="16"></td><td><pre>        <span class="token punctuation">)</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="19"></td><td><pre></pre></td></tr><tr><td data-num="20"></td><td><pre>ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>Person name<span class="token operator">=</span><span class="token string">"Tom"</span> age<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token number">19</span><span class="token punctuation">&#125;</span> gender<span class="token operator">=</span><span class="token string">"男"</span> <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'node01'</span><span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="21"></td><td><pre>ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>Person name<span class="token operator">=</span><span class="token string">"Jerry"</span> age<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token number">18</span><span class="token punctuation">&#125;</span> gender<span class="token operator">=</span><span class="token string">"女"</span> <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'node02'</span><span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="22"></td><td><pre></pre></td></tr><tr><td data-num="23"></td><td><pre><span class="token keyword">const</span> p <span class="token operator">=</span> <span class="token punctuation">&#123;</span> name<span class="token operator">:</span> <span class="token string">'Spike'</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token number">22</span><span class="token punctuation">,</span> gender<span class="token operator">:</span> <span class="token string">'男'</span> <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="24"></td><td><pre><span class="token comment">// 使用扩展运算符（展开运算符）</span></pre></td></tr><tr><td data-num="25"></td><td><pre>ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>Person <span class="token punctuation">&#123;</span><span class="token operator">...</span>p<span class="token punctuation">&#125;</span> <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'node03'</span><span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="26"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><p>您可以<span class="exturl" data-url="aHR0cHM6Ly9jb2RlcGVuLmlvL3hmYy1leGNsYXZlL3Blbi9xQnhyYWJL">点击此处</span>在线预览该代码片段的执行效果，浏览时推荐打开浏览器控制台查看相关的输出内容。</p><blockquote><p>JavaScript 扩展运算符是 ES6 中的语法糖，如不熟悉的，可自行百度了解。</p></blockquote><p><strong>props 参数限制与默认值</strong></p><p>此外，props 在接收参数时，也可以对参数类型等进行一系列限制以及为其指定默认值，使其符合组件预期的规范，例如：</p><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token keyword">static</span> defaultProps <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token comment">// 指定默认值</span></pre></td></tr><tr><td data-num="3"></td><td><pre>        gender<span class="token operator">:</span> <span class="token string">'男'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="4"></td><td><pre>        age<span class="token operator">:</span> <span class="token number">18</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token comment">// 类型限制及默认类型，既可以通过 static 关键字在类内部声明，也可以在类外部声明</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>        <span class="token keyword">const</span> <span class="token punctuation">&#123;</span> name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> gender <span class="token punctuation">&#125;</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props</pre></td></tr><tr><td data-num="10"></td><td><pre>        <span class="token keyword">return</span> <span class="token punctuation">(</span></pre></td></tr><tr><td data-num="11"></td><td><pre>            <span class="token operator">&lt;</span>ul<span class="token operator">></span></pre></td></tr><tr><td data-num="12"></td><td><pre>                <span class="token operator">&lt;</span>li<span class="token operator">></span>姓名：<span class="token punctuation">&#123;</span>name<span class="token punctuation">&#125;</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span></pre></td></tr><tr><td data-num="13"></td><td><pre>                <span class="token operator">&lt;</span>li<span class="token operator">></span>性别：<span class="token punctuation">&#123;</span>gender<span class="token punctuation">&#125;</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span></pre></td></tr><tr><td data-num="14"></td><td><pre>                <span class="token operator">&lt;</span>li<span class="token operator">></span>年龄：<span class="token punctuation">&#123;</span>age<span class="token punctuation">&#125;</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span></pre></td></tr><tr><td data-num="15"></td><td><pre>            <span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">></span></pre></td></tr><tr><td data-num="16"></td><td><pre>        <span class="token punctuation">)</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="19"></td><td><pre></pre></td></tr><tr><td data-num="20"></td><td><pre>Person<span class="token punctuation">.</span>propTypes <span class="token operator">=</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>    name<span class="token operator">:</span> PropTypes<span class="token punctuation">.</span>string<span class="token punctuation">.</span>isRequired<span class="token punctuation">,</span> <span class="token comment">// 必须传递限制</span></pre></td></tr><tr><td data-num="22"></td><td><pre>    gender<span class="token operator">:</span> PropTypes<span class="token punctuation">.</span>string<span class="token punctuation">,</span><span class="token comment">// 字符串类型限制</span></pre></td></tr><tr><td data-num="23"></td><td><pre>    age<span class="token operator">:</span> PropTypes<span class="token punctuation">.</span>number<span class="token punctuation">,</span><span class="token comment">// 数值类型限制</span></pre></td></tr><tr><td data-num="24"></td><td><pre>    speak<span class="token operator">:</span> PropTypes<span class="token punctuation">.</span>func<span class="token punctuation">,</span><span class="token comment">// 函数类型限制</span></pre></td></tr><tr><td data-num="25"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="26"></td><td><pre></pre></td></tr><tr><td data-num="27"></td><td><pre>ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>Person name<span class="token operator">=</span><span class="token string">"Tom"</span> age<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token number">19</span><span class="token punctuation">&#125;</span> speak<span class="token operator">=</span><span class="token punctuation">&#123;</span>speak<span class="token punctuation">&#125;</span> <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'node01'</span><span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="28"></td><td><pre>ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>Person name<span class="token operator">=</span><span class="token string">"Jerry"</span> gender<span class="token operator">=</span><span class="token string">"女"</span> <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'node02'</span><span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="29"></td><td><pre></pre></td></tr><tr><td data-num="30"></td><td><pre><span class="token keyword">const</span> p <span class="token operator">=</span> <span class="token punctuation">&#123;</span> name<span class="token operator">:</span> <span class="token string">'Spike'</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token number">22</span><span class="token punctuation">,</span> gender<span class="token operator">:</span> <span class="token string">'男'</span> <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="31"></td><td><pre>ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>Person <span class="token punctuation">&#123;</span><span class="token operator">...</span>p<span class="token punctuation">&#125;</span> <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'node03'</span><span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="32"></td><td><pre></pre></td></tr><tr><td data-num="33"></td><td><pre><span class="token keyword">function</span> <span class="token function">speak</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="34"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"speak()"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="35"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>但值得注意的是，类型限制需要引入一个 <code>prop-types.js</code> 作为支撑，你可以参考 <span class="exturl" data-url="aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvcHJvcC10eXBlcw==">npmjs.com</span> 选择合适的 CDN 库，也可以参考我为您编写的<span class="exturl" data-url="aHR0cHM6Ly9jb2RlcGVuLmlvL3hmYy1leGNsYXZlL3Blbi9CYVlXTGVR">在线代码片段</span>，并尝试触发类型校验。</p><p><strong>props 在函数式组件中的使用</strong></p><p>与 state 不同，props 参数在 React 函数式组件中是可以直接获取到的，它主要是通过函数的参数进行传递的：</p><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token keyword">const</span> <span class="token punctuation">&#123;</span> name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> gender <span class="token punctuation">&#125;</span> <span class="token operator">=</span> props</pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token keyword">return</span> <span class="token punctuation">(</span></pre></td></tr><tr><td data-num="4"></td><td><pre>        <span class="token operator">&lt;</span>ul<span class="token operator">></span></pre></td></tr><tr><td data-num="5"></td><td><pre>            <span class="token operator">&lt;</span>li<span class="token operator">></span>姓名：<span class="token punctuation">&#123;</span>name<span class="token punctuation">&#125;</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span></pre></td></tr><tr><td data-num="6"></td><td><pre>            <span class="token operator">&lt;</span>li<span class="token operator">></span>性别：<span class="token punctuation">&#123;</span>gender<span class="token punctuation">&#125;</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span></pre></td></tr><tr><td data-num="7"></td><td><pre>            <span class="token operator">&lt;</span>li<span class="token operator">></span>年龄：<span class="token punctuation">&#123;</span>age<span class="token punctuation">&#125;</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span></pre></td></tr><tr><td data-num="8"></td><td><pre>        <span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">></span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token punctuation">)</span></pre></td></tr><tr><td data-num="10"></td><td><pre></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>Person<span class="token punctuation">.</span>defaultProps <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token comment">// 指定默认值</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    gender<span class="token operator">:</span> <span class="token string">'男'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    age<span class="token operator">:</span> <span class="token number">18</span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>Person<span class="token punctuation">.</span>propTypes <span class="token operator">=</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    name<span class="token operator">:</span> PropTypes<span class="token punctuation">.</span>string<span class="token punctuation">.</span>isRequired<span class="token punctuation">,</span> <span class="token comment">// 必须传递限制</span></pre></td></tr><tr><td data-num="18"></td><td><pre>    gender<span class="token operator">:</span> PropTypes<span class="token punctuation">.</span>string<span class="token punctuation">,</span><span class="token comment">// 字符串类型限制</span></pre></td></tr><tr><td data-num="19"></td><td><pre>    age<span class="token operator">:</span> PropTypes<span class="token punctuation">.</span>number<span class="token punctuation">,</span><span class="token comment">// 数值类型限制</span></pre></td></tr><tr><td data-num="20"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="21"></td><td><pre></pre></td></tr><tr><td data-num="22"></td><td><pre>ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>Person name<span class="token operator">=</span><span class="token string">"Tom"</span> age<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token number">19</span><span class="token punctuation">&#125;</span> <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'node01'</span><span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr></table></figure><h4 id="三大核心属性refs"><a class="anchor" href="#三大核心属性refs">#</a> 三大核心属性：ref (s)</h4><p>组件内的标签可以通过 <code>ref</code> 属性来标识自己，通过该属性，可以很方便地获取到当前的节点信息。</p><p><strong>ref 的基本使用</strong></p><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Form</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token function-variable function">search</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>        <span class="token keyword">const</span> <span class="token punctuation">&#123;</span> query <span class="token punctuation">&#125;</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>refs</pre></td></tr><tr><td data-num="4"></td><td><pre>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'捕获的节点信息：'</span><span class="token punctuation">,</span> query<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="5"></td><td><pre>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'搜索关键字：'</span><span class="token punctuation">,</span> query<span class="token punctuation">.</span>value<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token function-variable function">showName</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>        <span class="token keyword">const</span> <span class="token punctuation">&#123;</span> username <span class="token punctuation">&#125;</span> <span class="token operator">=</span> <span class="token keyword">this</span></pre></td></tr><tr><td data-num="9"></td><td><pre>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'输入的用户名为'</span><span class="token punctuation">,</span> username<span class="token punctuation">.</span>value<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    myRef <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token function-variable function">showAddress</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'输入的地址为'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>myRef<span class="token punctuation">.</span>current<span class="token punctuation">.</span>value<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>        <span class="token keyword">return</span> <span class="token punctuation">(</span></pre></td></tr><tr><td data-num="17"></td><td><pre>            <span class="token operator">&lt;</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="18"></td><td><pre>                <span class="token operator">&lt;</span>p<span class="token operator">></span>普通形式的 ref<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span></pre></td></tr><tr><td data-num="19"></td><td><pre>                <span class="token operator">&lt;</span>input ref<span class="token operator">=</span><span class="token string">"query"</span> type<span class="token operator">=</span><span class="token string">"text"</span> placeholder<span class="token operator">=</span><span class="token string">"请输入搜索内容"</span> <span class="token operator">/</span><span class="token operator">></span></pre></td></tr><tr><td data-num="20"></td><td><pre>                <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span>search<span class="token punctuation">&#125;</span><span class="token operator">></span>搜索<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span></pre></td></tr><tr><td data-num="21"></td><td><pre>                <span class="token operator">&lt;</span>hr <span class="token operator">/</span><span class="token operator">></span></pre></td></tr><tr><td data-num="22"></td><td><pre>                <span class="token operator">&lt;</span>p<span class="token operator">></span>回调函数形式的 ref<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span></pre></td></tr><tr><td data-num="23"></td><td><pre>                <span class="token operator">&lt;</span>input ref<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token parameter">c</span> <span class="token operator">=></span> <span class="token keyword">this</span><span class="token punctuation">.</span>username <span class="token operator">=</span> c<span class="token punctuation">&#125;</span> type<span class="token operator">=</span><span class="token string">"text"</span> placeholder<span class="token operator">=</span><span class="token string">"请输入用户姓名"</span> onBlur<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span>showName<span class="token punctuation">&#125;</span> <span class="token operator">/</span><span class="token operator">></span></pre></td></tr><tr><td data-num="24"></td><td><pre>                <span class="token operator">&lt;</span>span<span class="token operator">></span>左侧输入框离焦取值<span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span></pre></td></tr><tr><td data-num="25"></td><td><pre>                <span class="token operator">&lt;</span>hr <span class="token operator">/</span><span class="token operator">></span></pre></td></tr><tr><td data-num="26"></td><td><pre>                <span class="token operator">&lt;</span>p<span class="token operator">></span>createRef 的使用<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span></pre></td></tr><tr><td data-num="27"></td><td><pre>                <span class="token operator">&lt;</span>input ref<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span>myRef<span class="token punctuation">&#125;</span> type<span class="token operator">=</span><span class="token string">"text"</span> placeholder<span class="token operator">=</span><span class="token string">"请输入用户地址"</span> onBlur<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span>showAddress<span class="token punctuation">&#125;</span> <span class="token operator">/</span><span class="token operator">></span></pre></td></tr><tr><td data-num="28"></td><td><pre>                <span class="token operator">&lt;</span>span<span class="token operator">></span>左侧输入框离焦取值<span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span></pre></td></tr><tr><td data-num="29"></td><td><pre>            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="30"></td><td><pre>        <span class="token punctuation">)</span></pre></td></tr><tr><td data-num="31"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="32"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>Form <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'app'</span><span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr></table></figure><p>您可以<span class="exturl" data-url="aHR0cHM6Ly9jb2RlcGVuLmlvL3hmYy1leGNsYXZlL3Blbi9keWR2TnB6">点击此处</span>在线预览该代码片段的执行效果，浏览时推荐打开浏览器控制台查看相关的输出内容。</p><p><strong>事件处理</strong></p><p>React 组件中的事件是通过类似 <code>onClick</code> 这种驼峰命名的属性来指定事件处理函数的，在 React 中使用事件处理时，您应当注意如下几点：</p><ol><li><p>React 使用的是自定义事件，而不是使用的原生 DOM 事件，其目的是为了更好的兼容性。</p></li><li><p>React 中的事件是通过事件委托方式处理的（委托给组件最外层的元素），其目的是为了的高效。</p></li><li><p>官方明确提出，不应当过渡使用 <code>ref</code> 属性。在许多常规情形中，我们可以通过 <code>event.target</code> 来获取当前的 DOM 对象，用于替代 ref。</p></li></ol><p>注：React 组件的 ref 属性在函数式组件中的使用方式与类式组件中的使用方式一致。</p><h4 id="表单处理"><a class="anchor" href="#表单处理">#</a> 表单处理</h4><p>React 中有两种形式来处理表单输入：</p><ol><li><p>受控组件</p><p>简单理解，如果一个表单元素的值是交由 React 组件进行维护（控制），那么我们就称其为受控组件，例如：</p><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Login</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>state <span class="token operator">=</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>username<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="4"></td><td><pre>password<span class="token operator">:</span> <span class="token string">''</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token function-variable function">saveUsername</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> username<span class="token operator">:</span> event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token function-variable function">savePassword</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> password<span class="token operator">:</span> event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token function-variable function">handleSubmit</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 阻止表单提交</span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token keyword">const</span> <span class="token punctuation">&#123;</span> username<span class="token punctuation">,</span> password <span class="token punctuation">&#125;</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state</pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token function">alert</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">你输入的用户名是：</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>username<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">,你输入的密码是：</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>password<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="17"></td><td><pre></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token keyword">return</span> <span class="token punctuation">(</span></pre></td></tr><tr><td data-num="20"></td><td><pre>    <span class="token operator">&lt;</span>form onSubmit<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleSubmit<span class="token punctuation">&#125;</span><span class="token operator">></span></pre></td></tr><tr><td data-num="21"></td><td><pre>        用户名：<span class="token operator">&lt;</span>input onChange<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span>saveUsername<span class="token punctuation">&#125;</span> type<span class="token operator">=</span><span class="token string">"text"</span> name<span class="token operator">=</span><span class="token string">"username"</span> <span class="token operator">/</span><span class="token operator">></span></pre></td></tr><tr><td data-num="22"></td><td><pre>        密码：<span class="token operator">&lt;</span>input onChange<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span>savePassword<span class="token punctuation">&#125;</span> type<span class="token operator">=</span><span class="token string">"password"</span> name<span class="token operator">=</span><span class="token string">"password"</span> <span class="token operator">/</span><span class="token operator">></span></pre></td></tr><tr><td data-num="23"></td><td><pre>        <span class="token operator">&lt;</span>button<span class="token operator">></span>登录<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span></pre></td></tr><tr><td data-num="24"></td><td><pre>    <span class="token operator">&lt;</span><span class="token operator">/</span>form<span class="token operator">></span></pre></td></tr><tr><td data-num="25"></td><td><pre><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="26"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="27"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>Login <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'app'</span><span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr></table></figure></li><li><p>非受控组件</p><p>与受控组件相反，如果一个表单元素的值不是交由 React 组件进行维护，那么我们就称其为非受控组件，例如：</p><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Login</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>   <span class="token function-variable function">handleSubmit</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>       event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 阻止表单提交</span></pre></td></tr><tr><td data-num="4"></td><td><pre>       <span class="token keyword">const</span> <span class="token punctuation">&#123;</span> username<span class="token punctuation">,</span> password <span class="token punctuation">&#125;</span> <span class="token operator">=</span> <span class="token keyword">this</span></pre></td></tr><tr><td data-num="5"></td><td><pre>       <span class="token function">alert</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">你输入的用户名是：</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>username<span class="token punctuation">.</span>value<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">,你输入的密码是：</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>password<span class="token punctuation">.</span>value<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="6"></td><td><pre>   <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>   <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>       <span class="token keyword">return</span> <span class="token punctuation">(</span></pre></td></tr><tr><td data-num="9"></td><td><pre>           <span class="token operator">&lt;</span>form onSubmit<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleSubmit<span class="token punctuation">&#125;</span><span class="token operator">></span></pre></td></tr><tr><td data-num="10"></td><td><pre>           用户名：<span class="token operator">&lt;</span>input ref<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token parameter">c</span> <span class="token operator">=></span> <span class="token keyword">this</span><span class="token punctuation">.</span>username <span class="token operator">=</span> c<span class="token punctuation">&#125;</span> type<span class="token operator">=</span><span class="token string">"text"</span> name<span class="token operator">=</span><span class="token string">"username"</span> <span class="token operator">/</span><span class="token operator">></span></pre></td></tr><tr><td data-num="11"></td><td><pre>           密码：<span class="token operator">&lt;</span>input ref<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token parameter">c</span> <span class="token operator">=></span> <span class="token keyword">this</span><span class="token punctuation">.</span>password <span class="token operator">=</span> c<span class="token punctuation">&#125;</span> type<span class="token operator">=</span><span class="token string">"password"</span> name<span class="token operator">=</span><span class="token string">"password"</span> <span class="token operator">/</span><span class="token operator">></span></pre></td></tr><tr><td data-num="12"></td><td><pre>               <span class="token operator">&lt;</span>button<span class="token operator">></span>登录<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span></pre></td></tr><tr><td data-num="13"></td><td><pre>           <span class="token operator">&lt;</span><span class="token operator">/</span>form<span class="token operator">></span></pre></td></tr><tr><td data-num="14"></td><td><pre>       <span class="token punctuation">)</span></pre></td></tr><tr><td data-num="15"></td><td><pre>   <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>Login <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'app'</span><span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr></table></figure></li></ol><h4 id="组件的生命周期"><a class="anchor" href="#组件的生命周期">#</a> 组件的生命周期</h4><p><img data-src="https://img.xfc-exclave.com/2022/05/4b9b8a1c7eac3d7b59a9eac39564aa411652881119.png" alt="React组件的生命周期"></p><p>所谓的生命周期，其实就是对象从创建到销毁的整个过程。React 组件中包含了一系列钩子函数（生命周期函数），能够在其生命周期的不同阶段调用执行。通过这些钩子函数，使我们可以很方便地在 React 组件生命的各个阶段监控其状态或执行一些特定的代码。</p><p>总体而言，React 组件的生命周期可分为三个阶段：</p><blockquote><p>下面的徽标表示对应的重要程度，后文会进行详细说明。</p></blockquote><ol><li><p>挂载阶段（Mounting）</p><p>当组件实例被创建并插入 DOM 中时，其生命周期调用顺序如下：</p><ul><li><p>constructor - <span class="label primary">普通</span></p></li><li><p>static getDerivedStateFromProps - <span class="label">忽略</span></p></li><li><p>render - <span class="label danger">重要</span></p></li><li><p>componentDidMount - <span class="label danger">重要</span></p></li></ul></li><li><p>更新阶段（Updating）</p><p>当组件的 props 或 state 发生变化时会触发更新。组件更新的生命周期调用顺序如下：</p><ul><li><p>static getDerivedStateFromProps - <span class="label">忽略</span></p></li><li><p>shouldComponentUpdate - <span class="label">忽略</span></p></li><li><p>render - <span class="label danger">重要</span></p></li><li><p>getSnapshotBeforeUpdate - <span class="label">忽略</span></p></li><li><p>componentDidUpdate - <span class="label primary">普通</span></p></li></ul></li><li><p>卸载阶段（Unmounting）</p><p>当组件从 DOM 中移除时会调用如下方法：</p><ul><li>componentWillUnmount - <span class="label danger">重要</span></li></ul></li></ol><p>如上，在 React 生命周期中，共计有 8 个生命周期函数，这里分别使用了不同的徽标来表示它们的重要性。其中真正重要的只有 3 个（必须熟知），标记普通的有 2 个（了解或掌握），标记忽略的有 3 个（不常用可忽略）。但这些重要性标签只是出于常规角度考虑，如果您出于面试等知识点考察的需要，推荐详细阅读<span class="exturl" data-url="aHR0cHM6Ly96aC1oYW5zLnJlYWN0anMub3JnL2RvY3MvcmVhY3QtY29tcG9uZW50Lmh0bWw=">官方文档：React 组件的生命周期</span>。</p><p>另外，您也可以借助 <span class="exturl" data-url="aHR0cHM6Ly9wcm9qZWN0cy53b2p0ZWttYWoucGwvcmVhY3QtbGlmZWN5Y2xlLW1ldGhvZHMtZGlhZ3JhbS8=">React 组件生命周期图谱</span>来获得更加直观的认知，该图谱对于理解 React 生命周期很有益处，请务必看一看。</p><p><strong>三个重要的生命周期函数：</strong></p><ol><li><p>render</p><p>render 是类式组件中唯一必须实现的方法，它在初始化渲染或更新渲染时调用。当 render 被调用时，它会检查 <code>this.props</code> 和 <code>this.state</code> 的变化并返回以下类型之一：</p><ul><li><p>React 元素</p></li><li><p>数组或 fragments</p></li><li><p>Portals</p></li><li><p>字符串或数值类型</p></li><li><p>布尔或 null</p></li></ul></li><li><p>componentDidMount</p><p>componentDidMount 会在组件挂载后立即调用，它适用于一些依赖于 DOM 节点的初始化操作。</p></li><li><p>componentWillUnmount</p><p>componentWillUnmount 会在组件卸载及销毁之前调用，它适用于进行一些必要的收尾操作，例如断开通讯连接、清除定时器等。</p></li></ol><p><strong>两个普通程度的生命周期函数</strong></p><ol><li><p>constructor</p><p>从前文中，我们已经获知 constructor 的作用在于对组件实例对象进行初始化。但在实际应用中，对于实现同样的功能，constructor 通常可以被其他方式等效替代，因此其重要程度相对较低。</p></li><li><p>componentDidUpdate</p><p>componentDidUpdate 会在 state 或 props 更新后立即调用，但当组件首次渲染，则不会执行该方法。此外，它还可以记录前一次变更的参数信息，基于这个特性，我们可以有效地监控数据的变更，对于一些特定的需求有较大帮助。</p><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">componentDidUpdate</span> <span class="token punctuation">(</span><span class="token parameter">preProps<span class="token punctuation">,</span> preState<span class="token punctuation">,</span> snapshotValue</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>preProps<span class="token punctuation">,</span> preState<span class="token punctuation">,</span> snapshotValue<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>需要注意的是，由于该函数本身是监控数据状态变更的，因此，当需要在该函数中修改数据时，请务必注意避免导致死循环。</p></li></ol><p><strong>三个标记忽略的生命周期函数</strong></p><p>剩下三个标记忽略的生命周期函数，在官方文档中已明确为<strong>不常用的生命周期方法</strong>，此处不做扩展，如需要了解请直接阅读官方文档。</p><p>关于组件的生命周期，您可以尝试执行一下我为您编写的在线<span class="exturl" data-url="aHR0cHM6Ly9jb2RlcGVuLmlvL3hmYy1leGNsYXZlL3Blbi9HUlFXVnlW">小案例</span>。</p><blockquote><p>注：React 旧版本中的生命周期略有不同，但个人觉得没必要了解，毕竟技术这东西总是学新不学旧。如感兴趣，可以自行百度。</p></blockquote><h4 id="虚拟-dom-与-diffing-算法"><a class="anchor" href="#虚拟-dom-与-diffing-算法">#</a> 虚拟 DOM 与 Diffing 算法</h4><p><img data-src="https://img.xfc-exclave.com/2022/05/ae015a4ffef04db5a729d1fca54761661653554419.png" alt="Diffing算法"></p><p>上图<span class="exturl" data-url="aHR0cHM6Ly93d3cub3JlaWxseS5jb20vbGlicmFyeS92aWV3L2xlYXJuaW5nLXJlYWN0LW5hdGl2ZS85NzgxNDkxOTI5MDQ5L2NoMDIuaHRtbA==">源于网络</span>，有助于理解 Diffing 算法，您可以带着对该图的印象继续阅读下文。</p><p>扩展资料：<span class="exturl" data-url="aHR0cHM6Ly9ibG9nLjUxY3RvLmNvbS91XzE1MTI3NjA2LzQwMjY4MjE=">https://blog.51cto.com/u_15127606/4026821</span></p><p><strong>虚拟 DOM 中 key 的作用</strong></p><p>key 是虚拟 DOM 对象的标识，用于帮助 React 识别哪些元素被改变了。</p><p>当状态中的数据发生变化时，React 会根据新数据生成新的虚拟 DOM，然后将新虚拟 DOM 和旧虚拟 DOM 进行 diff 比较，其比较规则如下：</p><ol><li><p>如果旧的虚拟 DOM 中存在与新的虚拟 DOM 相同的 key：</p><p>则判断虚拟 DOM 中的内容是否变更，如果没变更，则直接使用真实 DOM，如果有变更，则生成新的真实 DOM 并替换掉页面上旧的真实 DOM。</p></li><li><p>反之，如果旧的虚拟 DOM 中不存在与新的虚拟 DOM 相同的 key：</p><p>则直接根据数据创建新的真实 DOM 并渲染到页面。</p></li></ol><details class="success"><summary>🍎 可以使用 index 作为虚拟 DOM 的 key 吗？</summary><div><p>可以，但极不推荐。当使用索引作为虚拟 DOM 的 key 时：</p><ul><li>若对数据进行：逆序添加、逆序删除等破坏顺序的操作，会产生没必要的真实 DOM 更新，相当于任何一次修改都会对列表中的数据进行全量更新，效率低。</li><li>如果列表结构中包含有输入类的 DOM，则会出现错误的 DOM 更新。</li></ul><p>因此，如果不存在对数据的逆序添加、逆序删除等破坏顺序的操作，仅用于列表渲染展示，那么使用索引作为 key 是不会引发异常的。</p></div></details><p>关于这一部分，您也可以通过<span class="exturl" data-url="aHR0cHM6Ly9jb2RlcGVuLmlvL3hmYy1leGNsYXZlL3Blbi92WWR4UU9K">点击此处</span>查看为您编写的示例，以便获得更加直观的认知。</p><p>扩展资料：<span class="exturl" data-url="aHR0cHM6Ly9tZWRpdW0uY29tL0Byb2JpbnBva29ybnkvaW5kZXgtYXMtYS1rZXktaXMtYW4tYW50aS1wYXR0ZXJuLWUwMzQ5YWVjZTMxOA==">深度解析使用索引作为 key 的负面影响</span>。</p><div class="note success no-icon"><p>呼～，到此为止，恭喜旅者大人终于具备了开启 React 之旅的基本素质和能力，接下来我将指导您注册身份、打造装备，然后开启您专属的新手村。</p></div><h3 id="react-脚手架"><a class="anchor" href="#react-脚手架">#</a> React 脚手架</h3><p>所谓的某某脚手架，其实本质上也是一个项目，只是这个项目的作用在于帮助我们初始化一个新的项目，并创建一个简单的模板，即所谓的抛砖引玉。</p><h4 id="脚手架安装与项目初始化"><a class="anchor" href="#脚手架安装与项目初始化">#</a> 脚手架安装与项目初始化</h4><p>React 为我们提供了一个名为 <code>create-react-app</code> 的脚手架，如您已经安装有 npm 环境，只需执行如下命令，即可完成 React 脚手架的安装：</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">npm</span> i create-react-app -g</pre></td></tr></table></figure><blockquote><p>如果您的 npm 在安装脚手架时存在网络问题，可以选择前往<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2ZhY2Vib29rL2NyZWF0ZS1yZWFjdC1hcHA=">源码地址</span>进行下载安装。</p></blockquote><p>安装完成后，即可通过简单的命令初始化一个 React 项目了：</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre>create-react-app myproject</pre></td></tr></table></figure><p>项目初始化完成后，您可以通过如下命令尝试启动它：</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token builtin class-name">cd</span> myproject</pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token function">npm</span> start</pre></td></tr></table></figure><p>启动成功后，访问 <span class="exturl" data-url="aHR0cDovL2xvY2FsaG9zdDozMDAw">http://localhost:3000</span>，您将看到如下界面：</p><p><img data-src="https://img.xfc-exclave.com/2022/05/feba9d75af02ba899f62aeda67b5e8ef1652881832.png" alt="Reactapp预览"></p><p>接下来请了解一下我们初始化的项目目录结构，以及不同文件、文件夹的作用：</p><pre><code>myproject
├── README.md    ====&gt; 项目导览说明
├── node_modules    ====&gt; 项目依赖包
├── package.json    ====&gt; 项目依赖包及脚本配置
├── .gitignore    ====&gt; GIT代码忽略配置文件
├── public    ====&gt; 静态资源文件夹
│   ├── favicon.ico    ====&gt; 网站页签图标
│   ├── index.html    ====&gt; 【主页面】
│   ├── manifest.json    ====&gt; 应用加壳配置文件
│   └── robots.txt    ====&gt; 爬虫协议文件
└── src    ====&gt; 源码文件夹
    ├── App.css    ====&gt; App组件样式文件
    ├── App.js    ====&gt; App组件
    ├── App.test.js    ====&gt; 测试文件
    ├── index.css    ====&gt; 主页样式文件
    ├── index.js    ====&gt; 主页脚本文件
    ├── logo.svg    ====&gt; LOGO图片
    ├── reportWebVitals.js    ====&gt; 页面性能分析文件
    └── setupTests.js    ====&gt; 组件单元测试支持文件
</code></pre><p>阅读到这里，如果您还未进行任何编码，那么我在这里郑重地提醒您，请务必亲自尝试一下，并梳理初始项目的运行逻辑，后续的学习路线将会逐渐陡峭，不好好实践是走不出新手村的哦（当然啦，也不必太过担心，微不足道的我还是会很尽心地为各位旅者大人考虑的，但无论怎么看实践都是必须的吧，请大人们不要怠惰）。</p><details class="info"><summary>🍎 在脚手架创建的项目中，各种文件之间是如何进行相互引用的？</summary><div><p>基于模块化思想，模块之间的引用需要使用 <code>export</code> 和 <code>import</code> 关键字进行的，被引入的模块需要使用 <code>export</code> 进行暴露，引用方则通过 <code>import Xxx from 'xxx'</code> 的方式进行引入。如果被引用内容是静态资源，则不需要声明 export。</p></div></details><h4 id="项目案例"><a class="anchor" href="#项目案例">#</a> 项目案例</h4><div class="note warning no-icon"><p>各位大人见谅，由于 codepen 只适用于单文件在线编辑，后续示例将转到 codesandbox 进行。</p></div><p><strong>项目标题</strong>：我的任务清单</p><p><strong>功能简述</strong>：</p><p>本项目用于管理个人任务，支持任务列表显示、任务动态插入、单条任务移除、任务全选、已完成任务清空、任务完成度显示，以及移除按钮悬停展示等功能。</p><p><strong>项目预览</strong>：</p><ol><li><p>在线预览：<span class="exturl" data-url="aHR0cHM6Ly9xcXNqeDAuY3NiLmFwcA==">https://qqsjx0.csb.app</span>（加载可能会有点慢）</p></li><li><p>截图预览：</p><p><img data-src="https://img.xfc-exclave.com/2022%2F05%2F71f8a7a25b9f59570c448619d3b6767a1652880520.gif" alt="我的任务清单演示GIF"></p></li></ol><p><strong>项目地址</strong>：</p><blockquote><p>提示：代码是这一小结的经验点数最多的内容，烦请各位大人移驾，下方两个传送通道可择一而入。</p></blockquote><ol><li><p>代码沙箱：<span class="exturl" data-url="aHR0cHM6Ly9jb2Rlc2FuZGJveC5pby9zL2pvdmlhbC1jb2xkZW4tcXFzangw">CodeSandbox - 我的任务清单</span></p></li><li><p>代码仓库：<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3hmYy1leGNsYXZlL3JlYWN0LWxlYXJuaW5n">https://github.com/xfc-exclave/react-learning</span> - myproject</p></li></ol><p><strong>重要知识点</strong>：</p><ol><li><p>关于 UI</p><p>本项目中使用了第三方 UI 框架 ——Material UI，目前值得推荐的 React UI 框架主推如下几个：</p><ul><li><p>Ant Design - <span class="exturl" data-url="aHR0cHM6Ly9hbnQuZGVzaWdu">官网地址</span></p></li><li><p>Material UI - <span class="exturl" data-url="aHR0cHM6Ly9tdWkuY29t">官网地址</span></p></li><li><p>Semantic UI - <span class="exturl" data-url="aHR0cHM6Ly96aWppZWtlLmNvbS9zZW1hbnRpYy11aS8=">官网地址</span></p><p>另外，熟悉 Vue 的小伙伴也可以尝试一下 ElementUI 的 React 版本，奉上<span class="exturl" data-url="aHR0cHM6Ly9lbGVtZWZlLmdpdGh1Yi5pby9lbGVtZW50LXJlYWN0">链接地址</span>。</p></li></ul></li><li><p>组件的拆分方式</p><p>组件拆分方式并没有一定的规定，不同项目，不同业务逻辑，不同开发者，都会有不一样的组件拆分方式。通常情况下较为合理的是以组件功能作为单元进行拆分，尽量避免大量相似代码重复编写，那样会相当冗余且难以维护。</p><p>总之，组件拆分方式人各不同，您完全可以借鉴一些<span class="exturl" data-url="aHR0cHM6Ly93d3cuemhpaHUuY29tL3F1ZXN0aW9uLzM1MDEyOTg3Nw==">讨论贴（知乎）</span>，来广泛了解，以便形成您自己的组件拆分风格，但只有一条不变的准则是：<mark>代码的设计应当尽量保持优雅、高效、易维护</mark>。</p></li><li><p>如何确定 state 声明的位置</p><p>要确定 state 声明的位置，需要先行明确 state 数据被使用的位置，通常来说，state 最佳的声明位置是所有使用该 state 数据的子组件的共有父组件中，因为这样可以使组件之间传递数据的代价最小化。但这也不是绝对的，对于一些复杂的场景，往往需要还更加细致、具体的考虑。</p></li><li><p>组件之间的通信方式</p><p>在组件化的项目中，经常需要跨越不同组件使用或处理数据，因此，不同组件之间的数据传递方式则尤为重要。我们可以形象地将组件之间的关系分为兄弟、父子、祖孙、宗亲几类。</p><p>父子组件通信：</p><p>父子组件之间进行传递数据，最直接的方式是通过 props 属性实现。注意，这里所说的数据既可以是普通类型的数据，也可以是一个预定义的函数。</p><blockquote><p>父组件向子组件传递数据直接使用 props 即可完成，在前文 React 组件的三大属性部分已有充分讲解，这里不再赘述。</p></blockquote><p>子组件向父组件传递数据，则可以通过 props 属性迂回实现，一种最常用的实现方式如下：</p><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">function</span> <span class="token function">Child</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>   <span class="token keyword">const</span> <span class="token function-variable function">changeName</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> props<span class="token punctuation">.</span><span class="token function">updateName</span><span class="token punctuation">(</span><span class="token string">"xxx"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3"></td><td><pre>   <span class="token keyword">return</span> <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">&#123;</span>changeName<span class="token punctuation">&#125;</span><span class="token operator">></span>Send<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">Parent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>   <span class="token keyword">const</span> <span class="token punctuation">[</span>name<span class="token punctuation">,</span> setName<span class="token punctuation">]</span> <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="7"></td><td><pre>   <span class="token keyword">const</span> <span class="token function-variable function">updateHandler</span> <span class="token operator">=</span> <span class="token parameter">value</span> <span class="token operator">=></span> <span class="token function">setName</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="8"></td><td><pre>   <span class="token keyword">return</span> <span class="token operator">&lt;</span>Child updateName<span class="token operator">=</span><span class="token punctuation">&#123;</span>updateHandler <span class="token punctuation">&#125;</span> <span class="token operator">/</span><span class="token operator">></span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>兄弟组件通信：</p><p>兄弟组件之间是无法轻易进行直接通信的，它们需要借助共同的父组件实现通信。简单来说，父组件将函数 f 传递给子组件 A，子组件 A 通过函数 f 改变父组件状态，同级子组件 B 可以通过 props 接收到父组件变更后的状态。</p><blockquote><p>以上方式适用于 “血缘” 相近的组件关系，“祖孙” 组件或 “宗亲” 组件之间的通信虽然也可通过这种方式进行，但代价相对更大。对于 “血缘” 关系较远的组件之间进行通信，可以使用如发布订阅、Redux 等方式实现，此处不做扩展，在后文会有专门的章节详细阐述。</p></blockquote></li></ol><h3 id="react-ajax"><a class="anchor" href="#react-ajax">#</a> React Ajax</h3><p>AJAX 是一种在无需重新加载整个网页的情况下，就能够更新部分网页的技术。</p><blockquote><p>实在惭愧，在此之前本人一直觉得 ajax 就是指 <code>$.ajax(&#123;&#125;)</code> ，在学习 Vue 的时候也没有仔细思考 ajax 和 axois 的关系，这里再次强调一下，<ins>axios 是通过 Promise 对 ajax 的一种封装</ins>（大人们不要笑话我）。</p></blockquote><p>其实，React 本身只关注于界面，它并不包含 ajax 网络请求部分，因此，要在 React 中实现网络交互，就需要集成第三方 ajax 库（或者自行封装实现）。</p><p>你当然可以选择将 jQuery 集成到 React 项目中，但这就违背了 React 尽量减少真实 DOM 操作的初衷。因此，使用 axios 进行网络通信是 React 的更优选择。或许您在学习 Vue 的过程中已经对 axios 有了相当程度的了解，那么这一小节对您而言将会相当轻松。</p><h4 id="axios"><a class="anchor" href="#axios">#</a> axios</h4><p>开源地址：<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2F4aW9zL2F4aW9z">https://github.com/axios/axios</span></p><p>中文网：<span class="exturl" data-url="aHR0cDovL3d3dy5heGlvcy1qcy5jb20=">http://www.axios-js.com</span></p><p>axios 使用示例：</p><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre>axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'https://chinmoku.usemock.com/user/1'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> data<span class="token operator">:</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>data<span class="token punctuation">)</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> data<span class="token operator">:</span> <span class="token string">"获取数据失败"</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">)</span></pre></td></tr></table></figure><p>您可以<span class="exturl" data-url="aHR0cHM6Ly9jb2RlcGVuLmlvL3hmYy1leGNsYXZlL3Blbi96WVJ6UE12">点击这里</span>运行在线示例并查看效果。</p><h4 id="前端代理"><a class="anchor" href="#前端代理">#</a> 前端代理</h4><p>基于上面的 axios 示例，相信您已经能够成功发送网络请求并得到返回的数据。但在实际开发过程中，网络环境相对更加复杂，因此也会引发一些问题，跨域问题就是最常见的问题之一。</p><details class="info"><summary>🍎 什么是跨域？为什么会有跨域？</summary><div><p>当一个请求 url 的协议、域名、端口三者之间任意一个与当前页面 url 不同，即为跨域。其出现是出于浏览器同源策略的限制，而同源策略的目的又是为了保障浏览器的基本安全。在开发过程中，我们也有诸多方式解决来解决浏览器同源策略引发的跨域问题，其中，使用代理就是一种最为常用的方式。</p><p>扩展资料：<span class="exturl" data-url="aHR0cHM6Ly9iYWlrZS5iYWlkdS5jb20vaXRlbS8lRTUlOTAlOEMlRTYlQkElOTAlRTclQUQlOTYlRTclOTUlQTUvMzkyNzg3NQ==">同源策略_百度百科</span></p></div></details><details class="info"><summary>🍎 什么是代理？为什么要用代理？</summary><div><p>代理，即替代他人负责某一件事，在网络通信中，所谓代理即指代替其他网络端负责处理网络通信。例如通过 VPN 连接一些特定的网络就是一种常见的代理。而在 React 中，使用代理的直接目的，就是为了解决网络通信的跨域问题。</p></div></details><p><strong>React 中配置代理的方式</strong></p><p>在 React 中有两种配置代理的方式：</p><ol><li><p>在 <code>package.json</code> 文件中进行配置</p><p>直接在 <code>package.json</code> 文件中追加内容即可，示例如下：</p><figure class="highlight json"><figcaption data-lang="JSON"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre> <span class="token property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3"></td><td><pre> <span class="token property">"browserslist"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="4"></td><td><pre> <span class="token property">"proxy"</span><span class="token operator">:</span> <span class="token string">"https://chinmoku.usemock.com"</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>这种方式的优点在于配置简单方便，使用时直接指定接口地址即可，无需添加额外前缀：</p><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">import</span> axios <span class="token keyword">from</span> <span class="token string">"axios"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment">//... 省略部分内容</span></pre></td></tr><tr><td data-num="3"></td><td><pre>axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/user/1'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span></pre></td></tr><tr><td data-num="4"></td><td><pre>   <span class="token parameter">response</span> <span class="token operator">=></span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>data<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">)</span></pre></td></tr></table></figure></li><li><p>使用代理配置文件</p><p>使用代理配置文件则更加灵活，其配置方式如下：</p><p>执行命令 <code>npm i http-proxy-middleware</code> 安装依赖包，然后在 src 目录下创建文件 <code>setupProxy.js</code> 文件</p><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> <span class="token punctuation">&#123;</span> createProxyMiddleware<span class="token operator">:</span> proxy <span class="token punctuation">&#125;</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'http-proxy-middleware'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre>module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">app</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre> app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span></pre></td></tr><tr><td data-num="5"></td><td><pre>     <span class="token function">proxy</span><span class="token punctuation">(</span><span class="token string">'/dev'</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>         target<span class="token operator">:</span> <span class="token string">'http://localhost:8080'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="7"></td><td><pre>         changeOrigin<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="8"></td><td><pre>         pathRewrite<span class="token operator">:</span> <span class="token punctuation">&#123;</span> <span class="token string">'^/dev'</span><span class="token operator">:</span> <span class="token string">''</span> <span class="token punctuation">&#125;</span> <span class="token comment">// 重写请求路径 (必须)</span></pre></td></tr><tr><td data-num="9"></td><td><pre>     <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="10"></td><td><pre>     <span class="token function">proxy</span><span class="token punctuation">(</span><span class="token string">'/prod'</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>         target<span class="token operator">:</span> <span class="token string">'https://chinmoku.usemock.com'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="12"></td><td><pre>         changeOrigin<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="13"></td><td><pre>         pathRewrite<span class="token operator">:</span> <span class="token punctuation">&#123;</span> <span class="token string">'^/prod'</span><span class="token operator">:</span> <span class="token string">''</span> <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>     <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="15"></td><td><pre> <span class="token punctuation">)</span></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>这样就允许同时配置多个代理地址，使用时只需要加上对应的前缀即可：</p><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">import</span> axios <span class="token keyword">from</span> <span class="token string">"axios"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>   <span class="token comment">//... 省略部分内容</span></pre></td></tr><tr><td data-num="3"></td><td><pre>   axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/prod/user/1'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span></pre></td></tr><tr><td data-num="4"></td><td><pre>   <span class="token parameter">response</span> <span class="token operator">=></span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>data<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">)</span></pre></td></tr></table></figure><p>这种方式在实际开发中更为常用，因为它方便开发者进行网络环境切换。</p></li></ol><h4 id="项目案例-2"><a class="anchor" href="#项目案例-2">#</a> 项目案例</h4><p><strong>项目标题</strong>：Github 用户检索</p><p><strong>功能简述</strong>：</p><p>本项目用于对 Github 用户进行检索，并将检索结果动态显示到列表中，同时，为提升用户体验，对加载中及无数据的状态进行友好展示。</p><p><strong>项目预览</strong>：</p><ol><li><p>在线预览：<span class="exturl" data-url="aHR0cHM6Ly9xdWtzcWcuY3NiLmFwcA==">https://quksqg.csb.app</span>（加载可能会有点慢）</p></li><li><p>截图预览：</p><p><img data-src="https://img.xfc-exclave.com/2022/05/0aff1fc6abb9074fc5681ca2810fb9d41653138211.gif" alt="githubusersearch"></p></li></ol><p><strong>项目地址</strong>：</p><ol><li><p>代码沙箱：<span class="exturl" data-url="aHR0cHM6Ly9jb2Rlc2FuZGJveC5pby9zL3doaXRlLW1vcm5pbmctcXVrc3Fn">CodeSandbox - Github 用户检索</span></p></li><li><p>代码仓库：<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3hmYy1leGNsYXZlL3JlYWN0LWxlYXJuaW5n">https://github.com/xfc-exclave/react-learning</span> - react-github-search</p></li></ol><p><strong>重要知识点</strong>：</p><ol><li><p>关于 UI：此案例中使用了 Ant Design。</p></li><li><p>消息发布与订阅机制</p><p>在前文中我们曾使用借助组件的 props 来实现父子组件之间的通信，但其实除了借助 props 之外，我们还可以使用消息发布和订阅机制来实现通信。与 props 相比，消息发布订阅机制并不注重组件之间的关系，即消息发布订阅机制的效率与组件之间的层级关系无关，它可以用于所有的组件关系之间。</p><p>首先，使用消息发布订阅之前，你需要先执行命令 <code>npm i pubsub-js</code> 安装依赖，并在数据的发送方使用如下方式发送消息：</p><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">import</span> PubSub <span class="token keyword">from</span> <span class="token string">"pubsub-js"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment">//... 省略无关代码</span></pre></td></tr><tr><td data-num="3"></td><td><pre>PubSub<span class="token punctuation">.</span><span class="token function">publish</span><span class="token punctuation">(</span><span class="token string">'channelNameHere'</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span></pre></td></tr></table></figure><p>消息接收方则通过如下方式接收数据并处理后续逻辑：</p><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre>PubSub<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token string">'channelNameHere'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">_<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>   <span class="token comment">//... 自定义 data 方式</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure><p>但需要保证的是，消息发送方与消息接收方的消息通道名称必须保持一致。</p></li><li><p>React.useEffect</p><p>通常，消息发布方发布消息时通常会有一定的触发时机，而消息接收方为了及时接收到消息，通常会在组件挂载时即开启订阅，在组件卸载时取消订阅，这就依赖于 React 组件的生命周期。</p><p>在类式组件中，由于其父组件 Component 为其暴露了一系列生命周期函数，因此它的生命周期是明确的，能够轻易地在不同的触发时机执行不同的逻辑。而函数式组件由于没有继承自 Component，因此也就没有生命周期函数，它只能通过 Hook 函数 <code>React.useEffect()</code> 来获取监控组件的生命状态，但该函数却是不可靠的（如有必须通过生命周期函数实现的逻辑，个人觉得还是使用类式组件更好）。</p><blockquote><p>对于 useEffect 这个钩子函数，官方的说法是 “在函数组件主体内改变 DOM、添加订阅、设置定时器、记录日志以及执行其他包含副作用的操作都是不被允许的，因为这可能会产生莫名其妙的 bug 并破坏 UI 的一致性”，官方似乎并没有给出明确的原因，也没有给出明确的方案（也或许是我目前没了解到，如果哪位大人知道，烦请在文末留言告知）。</p></blockquote></li><li><p>使用 fetch 发送网络请求</p><p>fetch 也是一种发送网络请求的方式，其基本使用方式如下：</p><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">//fetch 发送 GET 请求</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">'https://chinmoku.usemock.com/user/1'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>   <span class="token keyword">return</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">data</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>   <span class="token function">handleData</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token comment">//fetch 发送 POST 请求</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token function">fetch</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>   method<span class="token operator">:</span> <span class="token string">'POST'</span><span class="token punctuation">,</span><span class="token comment">// 或其他</span></pre></td></tr><tr><td data-num="10"></td><td><pre>   body<span class="token operator">:</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>   <span class="token keyword">return</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">data</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>   <span class="token function">handleData</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">err</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure></li></ol><h3 id="react-路由"><a class="anchor" href="#react-路由">#</a> React 路由</h3><p>路由的概念来源于服务端，在服务端，路由描述的是 URL 与处理函数之间的映射关系，例如 Java 中的 <code>Controller</code> ，Python 中的 <code>urls.py</code> 。</p><p>在 Web 前端的单页面应用中，路由描述的这是 URL 与 UI 之间的映射关系，这种映射关系是单向的，即 URL 的变化可以引起 UI 的更新，并且这种更新不会引起页面的整体刷新。</p><h4 id="spa"><a class="anchor" href="#spa">#</a> SPA</h4><blockquote><p>单页 Web 应用（single page web application，SPA），就是只有一张 Web 页面的应用。单页应用程序（SPA）是加载单个 HTML 页面并在用户与应用程序交互时动态更新该页面的 Web 应用程序。浏览器一开始会加载必需的 HTML、CSS 和 JavaScript，所有的操作都在这张页面上完成，都由 JavaScript 来控制。因此，对单页应用来说模块化的开发和设计显得相当重要。</p><p>quote from <span class="exturl" data-url="aHR0cHM6Ly9iYWlrZS5iYWlkdS5jb20vaXRlbS9TUEEvMTc1MzYzMTM=">SPA（单页应用程序）_百度百科</span></p></blockquote><p>在 React 或 Vue 中，项目通常会被设计为这种单页面应用程序，这种设计的好处在于用户体验较好，网页内容的改变不需要整个页面进行刷新，避免了不必要的页面跳转和重新渲染。</p><p>总体来说，SPA 具有以下特点：</p><ol><li><p>整个应用只需要一个完整的页面。</p></li><li><p>页面中链接的跳转只是对页面的局部内容进行更新，而不会引起网页的整体刷新。</p></li><li><p>页面数据需要通过 ajax 获取，并且在页面异步进行展现。</p></li></ol><h4 id="react-中的路由"><a class="anchor" href="#react-中的路由">#</a> React 中的路由</h4><p><strong>react-router-dom</strong></p><p><code>react-router-dom</code> 是 React 中的一个路由插件库，它专门用来实现一个 SPA 应用中的路由跳转功能。react-router-dom 基于 react-router，并且加入了一些浏览器环境下的功能，它封装了更多的 API，更适合在 Web 开发中进行应用。</p><p>要使用 react-router-dom，您需要执行如下命令安装依赖：</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">npm</span> i react-router-dom</pre></td></tr></table></figure><h4 id="项目案例-3"><a class="anchor" href="#项目案例-3">#</a> 项目案例</h4><p><strong>项目标题</strong>：React 路由案例</p><p><strong>功能简述</strong>：</p><p>本项目用于集中演示 React 路由相关功能。</p><p><strong>项目预览</strong>：</p><ol><li><p>在线预览：<span class="exturl" data-url="aHR0cHM6Ly9xejRkNDQuY3NiLmFwcA==">https://qz4d44.csb.app</span>（加载可能会有点慢）</p></li><li><p>截图预览：</p></li></ol><p><strong>项目地址</strong>：</p><ol><li><p>代码沙箱：<span class="exturl" data-url="aHR0cHM6Ly9jb2Rlc2FuZGJveC5pby9zL21hZ2ljYWwtZ2F1c3MtcXo0ZDQ0">CodeSandbox - React 路由案例</span></p></li><li><p>代码仓库：<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3hmYy1leGNsYXZlL3JlYWN0LWxlYXJuaW5n">https://github.com/xfc-exclave/react-learning</span> - react-router-demo</p></li></ol><p><strong>重要知识点</strong>：</p><ol><li><p>关于 UI：此案例中使用了 Ant Design。</p></li><li><p>关于 <code>react-router-dom</code> 的版本差异。</p><p>注：本人的学习一向注重新版本，对于旧版本通常是简单带过，本文示例使用的 react-router-dom 为 <code>v6+</code> 版本，如果您在学习时或工作中使用的是旧版本，那么我在此处列出版本之间的差异，以便您能够快速掌握。</p><p>在 V5 中，路由的常规使用方式大体如下：</p><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> BrowserRouter<span class="token punctuation">,</span> Switch<span class="token punctuation">,</span> Route<span class="token punctuation">,</span> Redirect <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'react-router-dom'</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">function</span> <span class="token function">Product</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">return</span> <span class="token punctuation">(</span></pre></td></tr><tr><td data-num="5"></td><td><pre> <span class="token operator">&lt;</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="6"></td><td><pre>   <span class="token operator">&lt;</span>ul className<span class="token operator">=</span><span class="token string">"nav nav-tabs"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="7"></td><td><pre>     <span class="token operator">&lt;</span>li<span class="token operator">></span></pre></td></tr><tr><td data-num="8"></td><td><pre>       <span class="token operator">&lt;</span>Link to<span class="token operator">=</span><span class="token string">"/product/list"</span><span class="token operator">></span>Product List<span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">></span></pre></td></tr><tr><td data-num="9"></td><td><pre>     <span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span></pre></td></tr><tr><td data-num="10"></td><td><pre>     <span class="token operator">&lt;</span>li<span class="token operator">></span></pre></td></tr><tr><td data-num="11"></td><td><pre>       <span class="token operator">&lt;</span>NavLink to<span class="token operator">=</span><span class="token string">"/product/detail"</span> activeClassName<span class="token operator">=</span><span class="token string">"my-active"</span><span class="token operator">></span>Product Detail<span class="token operator">&lt;</span><span class="token operator">/</span>NavLink<span class="token operator">></span></pre></td></tr><tr><td data-num="12"></td><td><pre>     <span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span></pre></td></tr><tr><td data-num="13"></td><td><pre>   <span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">></span></pre></td></tr><tr><td data-num="14"></td><td><pre>   <span class="token operator">&lt;</span>Switch<span class="token operator">></span></pre></td></tr><tr><td data-num="15"></td><td><pre>     <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">"/product/list"</span> component<span class="token operator">=</span><span class="token punctuation">&#123;</span>ProductList<span class="token punctuation">&#125;</span> <span class="token operator">/</span><span class="token operator">></span></pre></td></tr><tr><td data-num="16"></td><td><pre>     <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">"/product/detail"</span> component<span class="token operator">=</span><span class="token punctuation">&#123;</span>ProductDetail<span class="token punctuation">&#125;</span> <span class="token operator">/</span><span class="token operator">></span></pre></td></tr><tr><td data-num="17"></td><td><pre>     <span class="token operator">&lt;</span>Redirect to<span class="token operator">=</span><span class="token string">"/product/list"</span> <span class="token operator">/</span><span class="token operator">></span></pre></td></tr><tr><td data-num="18"></td><td><pre>   <span class="token operator">&lt;</span><span class="token operator">/</span>Switch<span class="token operator">></span></pre></td></tr><tr><td data-num="19"></td><td><pre> <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="20"></td><td><pre><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="21"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="22"></td><td><pre><span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="23"></td><td><pre><span class="token keyword">return</span> <span class="token punctuation">(</span></pre></td></tr><tr><td data-num="24"></td><td><pre> <span class="token operator">&lt;</span>BrowserRouter<span class="token operator">></span></pre></td></tr><tr><td data-num="25"></td><td><pre>   <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"menu-list"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="26"></td><td><pre>     <span class="token operator">&lt;</span>Link className<span class="token operator">=</span><span class="token string">"list-group-item"</span> to<span class="token operator">=</span><span class="token string">"/"</span><span class="token operator">></span>Home<span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">></span></pre></td></tr><tr><td data-num="27"></td><td><pre>     <span class="token operator">&lt;</span>NavLink activeClassName<span class="token operator">=</span><span class="token string">"my-active"</span> to<span class="token operator">=</span><span class="token string">"/products"</span><span class="token operator">></span>Products<span class="token operator">&lt;</span><span class="token operator">/</span>NavLink<span class="token operator">></span></pre></td></tr><tr><td data-num="28"></td><td><pre>   <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="29"></td><td><pre>   <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"panel-body"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="30"></td><td><pre>     <span class="token punctuation">&#123;</span><span class="token comment">/* 注册路由 */</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="31"></td><td><pre>     <span class="token operator">&lt;</span>Switch<span class="token operator">></span></pre></td></tr><tr><td data-num="32"></td><td><pre>       <span class="token operator">&lt;</span>Route key<span class="token operator">=</span><span class="token string">"keyxxx1"</span> exact path<span class="token operator">=</span><span class="token string">"/"</span> component<span class="token operator">=</span><span class="token punctuation">&#123;</span>Home<span class="token punctuation">&#125;</span> <span class="token operator">/</span><span class="token operator">></span></pre></td></tr><tr><td data-num="33"></td><td><pre>       <span class="token operator">&lt;</span>Route key<span class="token operator">=</span><span class="token string">"keyxxx2"</span> exact path<span class="token operator">=</span><span class="token string">"/home"</span> component<span class="token operator">=</span><span class="token punctuation">&#123;</span>Home<span class="token punctuation">&#125;</span> <span class="token operator">/</span><span class="token operator">></span></pre></td></tr><tr><td data-num="34"></td><td><pre>       <span class="token operator">&lt;</span>Route key<span class="token operator">=</span><span class="token string">"keyxxx3"</span> path<span class="token operator">=</span><span class="token string">"/product"</span> component<span class="token operator">=</span><span class="token punctuation">&#123;</span>Product<span class="token punctuation">&#125;</span> <span class="token operator">/</span><span class="token operator">></span></pre></td></tr><tr><td data-num="35"></td><td><pre>       <span class="token operator">&lt;</span>Redirect to<span class="token operator">=</span><span class="token string">"/about"</span> <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">&#123;</span><span class="token comment">/* 当路由匹配不到时，执行重定向 */</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="36"></td><td><pre>     <span class="token operator">&lt;</span><span class="token operator">/</span>Switch<span class="token operator">></span></pre></td></tr><tr><td data-num="37"></td><td><pre>   <span class="token operator">&lt;</span><span class="token operator">/</span>div <span class="token operator">></span></pre></td></tr><tr><td data-num="38"></td><td><pre> <span class="token operator">&lt;</span><span class="token operator">/</span>BrowserRouter<span class="token operator">></span></pre></td></tr><tr><td data-num="39"></td><td><pre><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="40"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="41"></td><td><pre>ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>App <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"app"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><p>在 V6 版本中，对路由组件名称及用法略有改变，请参考示例：</p><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> BrowserRouter<span class="token punctuation">,</span> Routes<span class="token punctuation">,</span> Route<span class="token punctuation">,</span> Navigate <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'react-router-dom'</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">return</span> <span class="token punctuation">(</span></pre></td></tr><tr><td data-num="5"></td><td><pre> <span class="token operator">&lt;</span>BrowserRouter<span class="token operator">></span></pre></td></tr><tr><td data-num="6"></td><td><pre>   <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"menu-list"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="7"></td><td><pre>     <span class="token operator">&lt;</span>Link className<span class="token operator">=</span><span class="token string">"list-group-item"</span> to<span class="token operator">=</span><span class="token string">"/"</span><span class="token operator">></span>Home<span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">></span></pre></td></tr><tr><td data-num="8"></td><td><pre>     <span class="token operator">&lt;</span>NavLink to<span class="token operator">=</span><span class="token string">"/products"</span><span class="token operator">></span>Products<span class="token operator">&lt;</span><span class="token operator">/</span>NavLink<span class="token operator">></span></pre></td></tr><tr><td data-num="9"></td><td><pre>   <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="10"></td><td><pre>   <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"panel-body"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="11"></td><td><pre>     <span class="token punctuation">&#123;</span><span class="token comment">/* 注册路由 */</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>     <span class="token operator">&lt;</span>Routes<span class="token operator">></span></pre></td></tr><tr><td data-num="13"></td><td><pre>       <span class="token operator">&lt;</span>Route exact path<span class="token operator">=</span><span class="token string">"/"</span> element<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token operator">&lt;</span>Home <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">&#125;</span> <span class="token operator">/</span><span class="token operator">></span></pre></td></tr><tr><td data-num="14"></td><td><pre>       <span class="token operator">&lt;</span>Route exact path<span class="token operator">=</span><span class="token string">"/home"</span> component<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token operator">&lt;</span>Home <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">&#125;</span> <span class="token operator">/</span><span class="token operator">></span></pre></td></tr><tr><td data-num="15"></td><td><pre>       <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">"/product"</span> component<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token operator">&lt;</span>Product <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">&#125;</span> <span class="token operator">/</span><span class="token operator">></span></pre></td></tr><tr><td data-num="16"></td><td><pre>       <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">'*'</span> element<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token operator">&lt;</span>Navigate to<span class="token operator">=</span><span class="token string">"/"</span> <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">&#125;</span> <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">&#123;</span><span class="token comment">/* 当路由匹配不到时，执行重定向 */</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>     <span class="token operator">&lt;</span><span class="token operator">/</span>Routes<span class="token operator">></span></pre></td></tr><tr><td data-num="18"></td><td><pre>   <span class="token operator">&lt;</span><span class="token operator">/</span>div <span class="token operator">></span></pre></td></tr><tr><td data-num="19"></td><td><pre> <span class="token operator">&lt;</span><span class="token operator">/</span>BrowserRouter<span class="token operator">></span></pre></td></tr><tr><td data-num="20"></td><td><pre><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="21"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>App <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"app"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><p>此外，在编程式路由中，V6 还使用 <code>useNavigate()</code> 替代了 V5 中的 <code>props.history.xxx()</code> 。总体来说变化不大，就 API 层面来看，只是对名称和使用方式进行了优化。当然，上文使用示例中的这种硬式编码（将路由写死在组件中的方式）并不值得推荐，为了项目的可维护性，您可以尝试将路由相关信息提取出来，作为路由表进行使用，这样的路由才会更加灵活（此处未编写提取路由表的示例，请大人们亲自动手试试）。</p></li><li><p>HashRouter 与 BrowserRouter</p><p><strong>HashRouter</strong></p><p><code>HashRouter</code> 是一种基于 <code>window.location.hash</code> 进行路由的方式，当 HashRouter 工作时，它会获取到自身的 <code>pathname</code> 属性，并将该属性与其内部的诸多 <code>Route</code> 的 <code>path</code> 属性进行匹配，如匹配成功，则渲染对应的组件。</p><p>而 Link 和 NavLink 等组件的内部，其实是通过 <code>this.props.history.push(path)</code> 改变 HashRouter 中的 pathname 属性来驱动 Route 进行不同组件渲染的，从而实现路由切换效果。</p><p>HashRouter 进行路由的地址通常会携带一个锚点符号 <code>#</code> ，例如：<span class="exturl" data-url="aHR0cDovL2xvY2FsaG9zdDozMDAwLyMvaG9tZQ==">http://localhost:3000/#/home</span></p><p>此外，HashRouter 本身是不支持 <code>location.state</code> 和 <code>loation.key</code> 的。</p><p>扩展资料：<span class="exturl" data-url="aHR0cHM6Ly9zZWdtZW50ZmF1bHQuY29tL2EvMTE5MDAwMDAxNDMxMzQyOA==">https://segmentfault.com/a/1190000014313428</span></p><p><strong>BrowserRouter</strong></p><p>相较于 HashRouter，BrowserRouter 在 Web 中的应用更为广泛。与 HashRouter 不同的是，BrowserRouter 是基于 THML5 History API 来实现路由的。它可以通过 <code>pushState</code> 和 <code>replaceState</code> 来修改浏览器历史记录，也可以在路由跳转时传递任意参数实现组件之间的通信（HashRouter 则只能通过拼接 URL 字符串实现），因此，BrowserRouter 也常常与 Redux 配合使用来实现组件之间的数据通信。</p><p>BrowserRouter 的表现形式与常规的网页地址一致，例如：<span class="exturl" data-url="aHR0cDovL2xvY2F0aW9uOjMwMDAvaG9tZSVFMyU4MCU4Mg==">http://location:3000/home。</span></p><p><strong>补充</strong></p><p>前面其实已经大体上说明了 HashRouter 与 BrowserRouter 的区别，相较于 HashRouter，BrowserRouter 似乎更有优势，同时也被官方推荐使用。但在使用 BrowserRouter 时也有一点需要特别注意：</p><p>由于 BrowserRouter 模式下的请求形式表现为 <code>http://host:port/path</code> ，这就相当于每一个前端路由变更都会向服务端 API 发出请求。如果该请求不处于服务端 API 覆盖范围内，则会返回 404 异常。此外，前端路由与服务端 API 在实际业务中往往是完全不同的概念，因此，在实际开发中应当进行区分，注意避免前端路由与服务端 API 之间的冲突。</p></li><li><p>路由参数的传递方式</p><p>在 react-router-dom 中，有三种不同的方式实现路由参数的传递：</p><p>(a) params 参数的传递</p><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 1. 路由链接声明</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token operator">&lt;</span>Link to<span class="token punctuation">&#123;</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/product/&#123;categoryId&#125;/&#123;itemId&#125;</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">&#125;</span><span class="token operator">></span>Click Here<span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">></span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">// 2. 注册路由</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">"/product/:cateId/:itemId"</span> component<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token operator">&lt;</span>Detail <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">&#125;</span> <span class="token operator">/</span><span class="token operator">></span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token comment">// 3. 参数接收</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">const</span> <span class="token punctuation">&#123;</span> cateId<span class="token punctuation">,</span> itemId <span class="token punctuation">&#125;</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>match<span class="token punctuation">.</span>params</pre></td></tr></table></figure><p>(b) search 参数的传递</p><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 1. 路由链接声明</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token operator">&lt;</span>Link to<span class="token punctuation">&#123;</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/product/detail/?cateId=&#123;categoryId&#125;&amp;itemId=&#123;itemId&#125;</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">&#125;</span><span class="token operator">></span>Click Here<span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">></span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">// 2. 注册路由</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">"/product/detail"</span> component<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token operator">&lt;</span>Detail <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">&#125;</span> <span class="token operator">/</span><span class="token operator">></span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token comment">// 3. 参数接收</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">import</span> queryString <span class="token keyword">from</span> <span class="token string">'query-string'</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">const</span> <span class="token punctuation">&#123;</span> search <span class="token punctuation">&#125;</span> <span class="token operator">=</span> props<span class="token punctuation">.</span>location</pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">const</span> <span class="token punctuation">&#123;</span> cateId<span class="token punctuation">,</span> itemId <span class="token punctuation">&#125;</span> <span class="token operator">=</span> queryString<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>search<span class="token punctuation">)</span></pre></td></tr></table></figure><p>(c) state 参数的传递</p><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 1. 路由链接声明</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token operator">&lt;</span>Link to<span class="token punctuation">&#123;</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/product/detail</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> state<span class="token operator">:</span> <span class="token punctuation">&#123;</span> cateId<span class="token operator">:</span> categoryId<span class="token punctuation">,</span> itemId<span class="token punctuation">&#125;</span><span class="token operator">></span>Click Here<span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">></span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">// 2. 注册路由</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">"/product/detail"</span> component<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token operator">&lt;</span>Detail <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">&#125;</span> <span class="token operator">/</span><span class="token operator">></span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token comment">// 3. 参数接收</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">const</span> <span class="token punctuation">&#123;</span> cateId<span class="token punctuation">,</span> itemId <span class="token punctuation">&#125;</span> <span class="token operator">=</span> props<span class="token punctuation">.</span>location<span class="token punctuation">.</span>state</pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token comment">//state 接收的参数不会受到浏览器页面刷新的影响</span></pre></td></tr></table></figure><p>相信示例中的路由参数的传递方式已经足够明确，就不再做多余的解释了。</p></li><li><p>编程式路由导航</p><p>在前端开发中，需要进行路由跳转的场景多种多样，在部分场景下（例如定时跳转），声明式路由方式存在一定的局限性，这就需要通过编程式路由来实现。编程式路是借助于 <code>props.history</code> 对象上的 API 来对路由进行操作的。主要 API 如下：</p><p>(a) props.history.push () 跳转，并向历史记录中推入一条新的记录</p><p>(b) props.history.replace () 跳转，并替换历史记录列表中的最新记录</p><p>(c) props.history.goBack () 后退一条记录</p><p>(d) props.history.goForward () 前进一条记录</p><p>(e) props.history.go (n) 前进或后退指定条记录</p><p>相信各位大人在学习 JavaScript 基础时已充分了解过 HTML5 History API，这里列出的目的在于帮助您快速回顾知识点，相关知识点如有疑问，请务必点击<span class="exturl" data-url="aHR0cHM6Ly93d3cucnVub29iLmNvbS9qcy9qcy13aW5kb3ctaGlzdG9yeS5odG1s">快速通道</span>进行 JavaScript 基础补习。</p><p>当然，在 react-router-dom V6 中已提供了 useNavigate 函数，可以更方便地进行函数式路由导航。</p></li><li><p>useNavigate 基本使用</p><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> useNavigate <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'react-router-dom'</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">const</span> navigate <span class="token operator">=</span> <span class="token function">useNavigate</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">const</span> <span class="token function-variable function">detailHandler</span> <span class="token operator">=</span> <span class="token parameter">params</span> <span class="token operator">=></span> <span class="token function">navigate</span><span class="token punctuation">(</span><span class="token string">'/detail'</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span> state<span class="token operator">:</span> params <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure></li><li><p>V6 新增的钩子函数</p><p>在 react-router-dom V5 中，我们可以使用 <code>withRouter()</code> 函数将普通组件转换为路由组件，使其具有路由组件相关属性，但在 V6 版本中，该方法已被移除，作为替代，V6 版本中新增了新的钩子函数，可以更加方便地获取路由参数：</p><ul><li><p>useParams</p></li><li><p>useLocation</p></li><li><p>useSearchParams</p></li></ul><p>这几个钩子函数的使用也十分简单，本章节的案例中已有相关示例，自行动手即可得出结论，此处不再额外补充。</p></li></ol><blockquote><p>反省：在路由这一小节中，原本想把案例尽量做得好些，但最终还没涵盖到所有知识点，就开始觉得文档编写工作很烦躁（也或许终究还是会累的吧，感觉有些莫名的沮丧，接触编程的这几年，渐渐地有些认不清自己了）。</p><p>(⊙o⊙)… 呃，上面的话是昨天晚上写下的，感觉好丧气的样子，但还是不删掉算了，就当是本文的一点小痕迹，本人既然决心做一个成熟的 NPC，不成熟的想法还是让它漏出来比较好。</p></blockquote><h3 id="redux"><a class="anchor" href="#redux">#</a> Redux</h3><ul><li><p>Redux 中文官网：<span class="exturl" data-url="aHR0cHM6Ly9jbi5yZWR1eC5qcy5vcmc=">https://cn.redux.js.org</span></p></li><li><p>Redux 英文官网：<span class="exturl" data-url="aHR0cHM6Ly9yZWFjdC1yZWR1eC5qcy5vcmc=">https://react-redux.js.org</span></p></li><li><p>Redux 中文文档：<span class="exturl" data-url="aHR0cHM6Ly93d3cucmVkdXgub3JnLmNu">https://www.redux.org.cn</span></p></li></ul><h4 id="redux-简介"><a class="anchor" href="#redux-简介">#</a> Redux 简介</h4><p>Redux 是 JavaScript 应用的状态容器，提供可预测的状态管理，它除了与 React 一起使用外，其实也还支持一些其他的界面库。</p><blockquote><p>基于上面这段话，我们可以进行一个简单的梳理和补充：</p><ol><li><p>Redux 是一个专门用于做状态管理的 JavaScript 库（非 React 插件）。</p></li><li><p>它常常会与 React 配合使用，但也可以集成在 Vue, Angular 等项目中。</p></li><li><p>Redux 的作用在于集中式管理 React 应用中多个组件之间共享等状态。</p></li></ol></blockquote><p>要在 React 中使用 Redux，您首先需要使用如下命令安装相关依赖：</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">npm</span> i redux</pre></td></tr></table></figure><p>依赖安装完成后，您可以通过官网给出的基础示例来对 Redux 有一个简单印象：</p><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> createStore <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'redux'</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">const</span> initialState <span class="token operator">=</span> <span class="token punctuation">&#123;</span> value<span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">function</span> <span class="token function">counterReducer</span><span class="token punctuation">(</span><span class="token parameter">state <span class="token operator">=</span> initialState<span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token keyword">switch</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>type<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>        <span class="token keyword">case</span> <span class="token string">'calculator/increment'</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="7"></td><td><pre>            <span class="token keyword">return</span> <span class="token punctuation">&#123;</span> value<span class="token operator">:</span> state<span class="token punctuation">.</span>value <span class="token operator">+</span> action<span class="token punctuation">.</span>data <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>        <span class="token keyword">case</span> <span class="token string">'calculator/decrement'</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="9"></td><td><pre>            <span class="token keyword">return</span> <span class="token punctuation">&#123;</span> value<span class="token operator">:</span> state<span class="token punctuation">.</span>value <span class="token operator">-</span> action<span class="token punctuation">.</span>data <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>        <span class="token keyword">default</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="11"></td><td><pre>            <span class="token keyword">return</span> state</pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="14"></td><td><pre></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">createStore</span><span class="token punctuation">(</span>counterReducer<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="16"></td><td><pre></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token comment">// 监听 store 中状态的变更</span></pre></td></tr><tr><td data-num="18"></td><td><pre>store<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>store<span class="token punctuation">.</span><span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token comment">// 使用</span></pre></td></tr><tr><td data-num="20"></td><td><pre>store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> type<span class="token operator">:</span> <span class="token string">'calculator/increment'</span><span class="token punctuation">,</span> data<span class="token operator">:</span> <span class="token number">5</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure><p>在这个示例中，我们可以通过 <code>store.dispatch()</code> 的方式实现一个简单的对数据的自增和自减计算。</p><h4 id="redux-核心概念及工作原理"><a class="anchor" href="#redux-核心概念及工作原理">#</a> Redux 核心概念及工作原理</h4><p>参考上文中的简单示例，再来理解下面这张 Redux 原理图：</p><p><img data-src="https://img.xfc-exclave.com/2022/05/e0a5d8103a115c20aa14f05715fdff021653401722.png" alt="Redux 核心架构图"></p><p>在这个核心架构图中重点声明了四个主体对象，其中 Views 可以代表 React 中的视图组件，除 Views 外，其他三个组件都是 Redux 的核心概念，下面将对这些概念进行逐一叙述：</p><ol><li><p>Action</p><p>action 是一个具有 <code>type</code> 字段的普通 JavaScript 对象。你可以将 action 视为描述应用程序中发生了什么的事件。</p><p>其中，type 字段是一个用字符串表示，可以理解为当前 action 的名称，其规范化的声明方式应当是 <code>域/事件名称</code> ，例如： <code>calculator/increment</code> 。</p><p>action 中除了 type 外，还可以声明其他该事件执行的相关参数，简单的 action 声明如下：</p><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> incrementAction <span class="token operator">=</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>   type<span class="token operator">:</span> <span class="token string">'calculation/increment'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3"></td><td><pre>   data<span class="token operator">:</span> <span class="token number">2</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure></li><li><p>Store</p><p>在同一个 Redux 应用中，有且只有一个 store，它充当着 action 与 reducers 之间的协调者，负责将 action 中的事件及参数交给 reducers 执行，获取到执行结果后，再交由 Views 视图组件进行应用或渲染。</p></li><li><p>Reducers</p><p>Reducers 是 Redux 中事件的的核心处理者，它被声明为函数类型，接收 state 和一个 action 对象。</p><p>Reducer 必须遵循如下规则：</p><ul><li><p>仅使用 state 和 action 参数计算新的状态值。</p></li><li><p>禁止直接修改 state，必须通过复制现有的 state 并对复制的值进行更改的方式来做不可变更新。</p></li><li><p>禁止任何异步逻辑、依赖随机值或导致其他 “副作用” 的代码。</p></li></ul><p>简单来说，在使用 Reducer 时，必须保证它是一个纯函数。</p></li></ol><p>扩展资料：</p><ol><li><p><span class="exturl" data-url="aHR0cHM6Ly93d3cuamlhbnNodS5jb20vcC9mMTMyZDc1OWNjZWM=">什么是纯函数</span></p></li><li><p><span class="exturl" data-url="aHR0cHM6Ly93d3cuZnJlZWNvZGVjYW1wLm9yZy9uZXdzL3doeS1yZWR1eC1uZWVkcy1yZWR1Y2Vycy10by1iZS1wdXJlLWZ1bmN0aW9ucy1kNDM4YzU4YWU0Njg=">Why Redux need reducers to be &quot;pure functions&quot;</span></p></li></ol><h4 id="redux-核心-api"><a class="anchor" href="#redux-核心-api">#</a> Redux 核心 API</h4><ol><li><p>createStore()</p><p>在上文中，我们已经使用过该函数，其使用方式如下：</p><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> createStore <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'redux'</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">createStore</span><span class="token punctuation">(</span>counterReducer<span class="token punctuation">)</span></pre></td></tr></table></figure></li><li><p>store 对象相关函数</p><ul><li><p>store.getState()</p><p>获取 reducer 执行后返回的 state。</p></li><li><p>store.dispatch(action)</p><p>它是更新 redux state 的唯一方法，并且需要传递一个 action 对象。</p></li><li><p>store.subscribe(listener)</p><p>向 store 中添加一个监听器，该监听器会在每次 dispatch action 时执行。</p></li></ul></li><li><p>applyMiddleware()</p><p>其作用在于允许使用基于 redux 的中间件（插件库），例如后文中将要讲解的 <code>redux-thunk</code> ，下面列出它的基本使用方式，您可以先忽略它，或者做一个前瞻性的了解：</p><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> createStore<span class="token punctuation">,</span> applyMiddleware <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'redux'</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">import</span> countReducer <span class="token keyword">from</span> <span class="token string">'./count_reducer'</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">import</span> thunk <span class="token keyword">from</span> <span class="token string">'redux-thunk'</span></pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">createStore</span><span class="token punctuation">(</span>countReducer<span class="token punctuation">,</span> <span class="token function">applyMiddleware</span><span class="token punctuation">(</span>thunk<span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr></table></figure></li><li><p>combineReducers()</p><p>该函数用于将多个 Reducer 函数进行合并，例如：</p><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> combineReducers <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'redux'</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">const</span> reducers <span class="token operator">=</span> <span class="token function">combineReducers</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre> myCounter<span class="token operator">:</span> counterReducer<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="5"></td><td><pre> myFormater<span class="token operator">:</span> formaterReducer</pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure></li></ol><h4 id="redux-异步编程"><a class="anchor" href="#redux-异步编程">#</a> Redux 异步编程</h4><p>Redux 本身是不支持进行异步编程的，如果需要在 Redux 中进行异步编程，则需要执行如下命令安装插件库：</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">npm</span> i redux-thunk</pre></td></tr></table></figure><p>其简易的使用示例如下：</p><ol><li><p>创建 store</p><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> createStore<span class="token punctuation">,</span> applyMiddleware <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'redux'</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">import</span> countReducer <span class="token keyword">from</span> <span class="token string">'./count_reducer'</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">import</span> thunk <span class="token keyword">from</span> <span class="token string">'redux-thunk'</span></pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">createStore</span><span class="token punctuation">(</span>countReducer<span class="token punctuation">,</span> <span class="token function">applyMiddleware</span><span class="token punctuation">(</span>thunk<span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr></table></figure></li><li><p>异步使用</p><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> <span class="token function-variable function">createIncrementAsyncAction</span> <span class="token operator">=</span> <span class="token parameter">data</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>   <span class="token keyword">return</span> <span class="token parameter">dispatch</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>       <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> type<span class="token operator">:</span> <span class="token string">'increment'</span><span class="token punctuation">,</span> data <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="4"></td><td><pre>   <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure></li></ol><h4 id="react-redux"><a class="anchor" href="#react-redux">#</a> react-redux</h4><p>与 redux 不同，react-redux 是一个基于 Redux 的 React 插件库。使用 react-redux，可以更加方便地读取 store 中的数据，以及向 store 中分发 action 来更新数据。</p><p>使用 react-redux 需要执行如下命令安装必要的依赖：</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">npm</span> i redux react-redux</pre></td></tr></table></figure><ol><li><p>UI 组件与容器组件</p><p>在 React-Redux 中，所有组件被拆分为 UI 组件和容器组件两大类。</p><p>UI 组件，用于组织页面框架及以及负责 UI 的呈现，它通过 props 来接收数据并进行渲染，其内部通常不会执行任何 Redux API 相关操作，UI 组件一般保存在 components 文件夹下。</p><p>容器组件，主要负责数据管理和业务逻辑的处理，通常保存在 containers 文件夹下。</p><blockquote><p>看网上有把前者称为傻瓜组件，把后者称为聪明组件，那这么说来前端就是傻瓜开发，后端就是聪明开发咯（虽然没有较真的必要，但还是感觉没啥道理）。</p></blockquote></li><li><p>相关 API 的使用</p><ul><li><p>connect</p><p>React-Redux 提供 <code>connect()</code> 方法，用于从 UI 组件生成容器组件。connect 即将这两种组件连起来。</p><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> connect <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'react-redux'</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">const</span> CountContainer <span class="token operator">=</span>  <span class="token function">connect</span><span class="token punctuation">(</span></pre></td></tr><tr><td data-num="4"></td><td><pre>   mapStateToProps<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="5"></td><td><pre>   mapDispatchToProps</pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token punctuation">)</span><span class="token punctuation">(</span>CountUI<span class="token punctuation">)</span></pre></td></tr></table></figure><p>其中，CountUI 即为 UI 组件，CountContainer 即为容器组件，并且，connect 函数接收两个参数，相关定义请继续阅读后续小点。</p></li><li><p>mapStateToProps</p><p><code>mapStateToProps()</code> 函数负责输入逻辑，将外部数据（即 state 对象）映射为 UI 组件的标签属性。</p><p>该函数返回一个对象，其声明示例如下：</p><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> <span class="token function-variable function">mapStateToProps</span> <span class="token operator">=</span> <span class="token parameter">state</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span> count<span class="token operator">:</span> state <span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>此外，该函数还会订阅 Store，每当 state 更新时，该函数就会自动执行，并重新计算 UI 组件的参数，从而触发 UI 组件的重新渲染。</p></li><li><p>mapDispatchToProps</p><p><code>mapDispatchToProps</code> 负责输出逻辑，即分发 action 的函数转换为 UI 组件的标签属性，该属性既可以是一个对象，也可以是一个函数。</p><p>mapDispatchToProps 作为函数声明方式：</p><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> <span class="token function-variable function">mapDispatchToProps</span> <span class="token operator">=</span> <span class="token parameter">dispatch</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>   <span class="token keyword">return</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>       <span class="token function-variable function">increment</span><span class="token operator">:</span> <span class="token parameter">number</span> <span class="token operator">=></span> <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token function">createIncrementAction</span><span class="token punctuation">(</span>number<span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="4"></td><td><pre>   <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>mapDispatchToProps 作为对象声明方式：</p><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> mapDispatchToProps <span class="token operator">=</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>   <span class="token function-variable function">onClick</span><span class="token operator">:</span> <span class="token parameter">number</span> <span class="token operator">=></span> <span class="token function">createIncrementAction</span><span class="token punctuation">(</span>number<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>但值得注意的是，当 mapDispatchToProps 使用对象声明时，该对象的键名必须是 UI 组件的同名参数，对应的键值则应当是一个可执行的函数。</p></li><li><p>Provider 组件</p><p>在使用 connect 函数生成容器组件后，容器组件需要获取到 state 参数，才能将其传递到对应的 UI 组件中。您当然可以选择将 state 对象作为桉树传入到容器组件中，但当容器组件层级较深时，这种传递方式将会相当麻烦。</p><p>为此，React-Redux 提供一个 Provider 组件，可以让容器组件获取到 state，使用该组件也相当简单，只需要用该组件作为外层组件，将声明和使用 React-Redux 相关属性的组件包括在内即可，通常我们会直接作用在根组件上：</p><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">import</span> ReactDOM <span class="token keyword">from</span> <span class="token string">'react-dom'</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">'./App'</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">import</span> store <span class="token keyword">from</span> <span class="token string">'./redux/store'</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">import</span> <span class="token punctuation">&#123;</span>Provider<span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'react-redux'</span></pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre>ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span></pre></td></tr><tr><td data-num="8"></td><td><pre>   <span class="token operator">&lt;</span>Provider store<span class="token operator">=</span><span class="token punctuation">&#123;</span>store<span class="token punctuation">&#125;</span><span class="token operator">></span></pre></td></tr><tr><td data-num="9"></td><td><pre>       <span class="token operator">&lt;</span>App<span class="token operator">/</span><span class="token operator">></span></pre></td></tr><tr><td data-num="10"></td><td><pre>   <span class="token operator">&lt;</span><span class="token operator">/</span>Provider<span class="token operator">></span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="11"></td><td><pre>   document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token punctuation">)</span></pre></td></tr></table></figure></li></ul></li><li><p>浏览器调试工具</p><blockquote><p>个人觉得是一个既鸡肋，又麻烦的插件，但聊胜于无，这里简单带过，各位大人如有兴趣可自行探索。</p></blockquote><p>步骤一：chrome 商店搜索 <code>Redux DevTools</code> 并添加到浏览器。</p><p>chrome 应用商店：<span class="exturl" data-url="aHR0cHM6Ly9jaHJvbWUuZ29vZ2xlLmNvbS93ZWJzdG9yZS9jYXRlZ29yeS9leHRlbnNpb25z">https://chrome.google.com/webstore/category/extensions</span>)</p><p><img data-src="https://img.xfc-exclave.com/2022/05/05722a6d2735cbbdae47b82c8a5e47a01653402007.jpg" alt="chrome Redux DevTools"></p><p>步骤二：在项目中安装依赖包。</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">npm</span> i redux-devtools-extension</pre></td></tr></table></figure></li></ol><h4 id="项目案例-4"><a class="anchor" href="#项目案例-4">#</a> 项目案例</h4><blockquote><p>此小结对于如何组织 redux，相关的使用规范，以及如何进行合理的结构划分并没有做相关叙述，这些非硬性知识点的内容在代码中将会有更加直观的表现。</p></blockquote><p><strong>项目标题</strong>：Redux 实践案例</p><p><strong>功能简述</strong>：</p><p>本项目用于集中演示 React 路由相关功能，集中展示商品和收获人列表，商品发生变化时，收货人列表可以即时获得反馈，收货人列表发生变化时，商品列表也能即时获得反馈，商品添加使用异步方式执行。</p><p><strong>项目预览</strong>：</p><ol><li><p>在线预览：<span class="exturl" data-url="aHR0cHM6Ly84am5ncXcuY3NiLmFwcA==">https://8jngqw.csb.app</span>（加载可能会有点慢）</p></li><li><p>截图预览：</p><p><img data-src="https://img.xfc-exclave.com/2022/05/39a891c441d7992fb31f8f7fbccca4631653494349.gif" alt="redux 实践案例"></p></li></ol><p><strong>项目地址</strong>：</p><ol><li><p>代码沙箱：<span class="exturl" data-url="aHR0cHM6Ly9jb2Rlc2FuZGJveC5pby9zL3JlZHV4LXNoaS1qaWFuLWFuLWxpLThqbmdxdw==">CodeSandbox - Redux 实践案例</span></p></li><li><p>代码仓库：<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3hmYy1leGNsYXZlL3JlYWN0LWxlYXJuaW5n">https://github.com/xfc-exclave/react-learning</span> - react-redux-demo</p></li></ol><p><strong>重要知识点</strong>：</p><ol><li><p>关于 UI：此案例中使用了 Ant Design。</p></li><li><p>关于 React-Redux</p><p>不知道各位大人对 Redux 的核心概念及工作原理中流程图是否还有印象，React-Redux 在 Redux 流程的基础上，将 Views 拆分为容器组件和 UI 组件。实际上是对 Redux 进行了更加细粒度的拆分和控制。这种将视图和逻辑进行分治管理的思想并非某一种语言特有，相信你一定听说过 MVC、MVP、MVVM 等概念，其实 React-Redux 的拆分方式就是这类思想的一种应用，特意为大人们再次绘图如下：</p><p><img data-src="https://img.xfc-exclave.com/2022/05/59c4c04e9f3e4d45a58b4b25d14c75651653530475.png" alt="React-Redux 原理图"></p><p>温馨提示：结合原理图和案例代码进行思考，思路将会更加清晰。</p></li><li><p>此案例模块拆分得比较细，各位大人在梳理关系时，可以选择从 App 组件开始，也可以从 UI 组件开始。另外，运行案例时，可以打开浏览器控制台，观察输出顺序。</p></li></ol><div class="note success"><p>到此为止，恭喜您坚持不懈走完了这条新手村的慢慢长路，也很荣幸能够作为您在新手阶段的 NPC，说起来想要努力做一个优秀、成熟的 NPC 还真不容易呢，或许本文部分观点略有偏差，案例也不一定完整契合，知识点也没能面面俱到，行文方式也不一定十分合理，甚至可能还会有一些弄巧成拙的小心思，还希望各位心地善良的大人们念我数日苦战之功，原谅我的诸多过失，另外，如果有幸能够得到大人们宝贵的意见和建议，那将是本 NPC 的莫大荣幸。</p><p>至此，江湖再见了。</p></div><h3 id="react-扩展"><a class="anchor" href="#react-扩展">#</a> React 扩展</h3><p>本文正式内容在 Redux 之后就已经告一段落了，这一小节仅仅是额外进行一些小扩展（或者对遗漏进行补充），其重要级别相对较低，各位大人们可以选择性阅读。</p><p>注：本部分内容属于持续更新内容。</p><ol><li><p>lazyload</p><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 1. 通过 React 的 lazy 函数配合 import () 函数动态加载路由组件 ===> 路由组件代码会被分开打包</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">const</span> Login <span class="token operator">=</span> <span class="token function">lazy</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'@/pages/Login'</span><span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token comment">// 2. 通过 & lt;Suspense > 指定在加载得到路由打包文件前显示一个自定义 loading 界面</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token operator">&lt;</span>Suspense fallback<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token operator">&lt;</span>h1<span class="token operator">></span>loading<span class="token operator">...</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">></span><span class="token punctuation">&#125;</span><span class="token operator">></span></pre></td></tr><tr><td data-num="6"></td><td><pre>   <span class="token operator">&lt;</span>Switch<span class="token operator">></span></pre></td></tr><tr><td data-num="7"></td><td><pre>       <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">"/xxx"</span> component<span class="token operator">=</span><span class="token punctuation">&#123;</span>Xxxx<span class="token punctuation">&#125;</span><span class="token operator">/</span><span class="token operator">></span></pre></td></tr><tr><td data-num="8"></td><td><pre>       <span class="token operator">&lt;</span>Redirect to<span class="token operator">=</span><span class="token string">"/login"</span><span class="token operator">/</span><span class="token operator">></span></pre></td></tr><tr><td data-num="9"></td><td><pre>   <span class="token operator">&lt;</span><span class="token operator">/</span>Switch<span class="token operator">></span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token operator">&lt;</span><span class="token operator">/</span>Suspense<span class="token operator">></span></pre></td></tr></table></figure><p>注：从网络资料中罗移过来，暂未验证和实验。</p></li><li><p>错误边界</p><p>每一个成熟的应用程序，都必然会有比较完善的异常应对方案。错误边界（Error Boundary）即是 React 提供的异常应对方案，使用错误边界，可以捕获后代组件的错误，并执行我们预期的错误处理方案。</p><p>相信您在此前的实践中，经常会因为某一个子组件的错误而导致整个应用无法渲染。这在实际环境中产生的影响会相当大，其原因在于：自 React 16 起，任何未被错误边界捕获的错误将会导致整个 React 组件树被卸载，使用错误边界，可以有效地帮助您规避这个问题。</p><p>官方示例：<span class="exturl" data-url="aHR0cHM6Ly9jb2RlcGVuLmlvL2dhZWFyb24vcGVuL3dxdnhHYQ==">https://codepen.io/gaearon/pen/wqvxGa</span></p><p>官方文档：<span class="exturl" data-url="aHR0cHM6Ly96aC1oYW5zLnJlYWN0anMub3JnL2RvY3MvZXJyb3ItYm91bmRhcmllcy5odG1sI2ludHJvZHVjaW5nLWVycm9yLWJvdW5kYXJpZXM=">错误边界 - React</span></p><p>注意，错误边界也有其局限性，即只能捕获后代组件生命周期中产生的错误，对于当前组件，以及其他组件在合成事件、定时器中产生的错误则无能为力。</p></li></ol><h3 id="项目实战"><a class="anchor" href="#项目实战">#</a> 项目实战</h3><p>学习了前面诸多章节的知识点，不知道大人们的感受如何，接下来就到了本 NPC 的工作尾声了，所谓的 “项目实战” 其实还处于 <code>will have done</code> 状态，这将是本 NPC 的个人进修课程，其目的是对已掌握知识点进行巩固，以及将这些知识点与实际项目进行衔接。以下仅仅是本 NPC 的个人计划，各位大人可以参考，可以笑笑，也可以自行离场。</p><p>本文附属项目实战计划细则：</p><ol><li><p>选择对公司内 Vue 开发的项目使用 React 进行重新实现，或者对一些开源框架进行 React 前端实现（例如做一个 RuoYi-React 之类的），二选一。</p></li><li><p>项目的编写和设计需要尽量规范化，并且必须保持代码规范。</p></li><li><p>UI 可以优先考虑 antd（antd 对管理系统类应该更为实用）。</p></li><li><p>不一定要求很完善，但一定要看起来像那么回事，尽可能广泛地涵盖本文相关知识点。</p></li><li><p>后端接口没必要亲自再写，使用 Mock 就好，或者使用其他项目的接口。</p></li><li><p>项目大概成型后，补充在文末，并记录时间以便衡量成本（当前时间：2022-05-26）。</p></li><li><p>如果有余力，以及条件允许，则部署该项目，并提供演示域名，其意义在于公开成果，有助于接受旁人的学习监督。</p></li><li><p>如在实战过程中，发现本文知识点有遗漏、含糊不清，甚至偏差甚大的地方，务必即时补充和更正。</p></li><li><p>考虑到还有工作、其他学习计划、其他个人项目，以及一些生活琐事，本项目预期时间为三个月（感觉有些太短了，六个月又太长了……，算了，就先这样计划吧）。</p></li></ol><blockquote><p>接下来大概又有的忙了，希望我千万不要打自己的脸啊。</p></blockquote><h3 id="参考"><a class="anchor" href="#参考">#</a> 参考</h3><ul><li><span class="exturl" data-url="aHR0cHM6Ly96aC1oYW5zLnJlYWN0anMub3Jn">https://zh-hans.reactjs.org</span></li><li><span class="exturl" data-url="aHR0cHM6Ly93d3cuYmlsaWJpbGkuY29tL3ZpZGVvL0JWMXd5NHkxRDdKVA==">https://www.bilibili.com/video/BV1wy4y1D7JT</span></li><li><span class="exturl" data-url="aHR0cHM6Ly93d3cucnVub29iLmNvbS9yZWFjdC9yZWFjdC1jb21wb25lbnQtbGlmZS1jeWNsZS5odG1s">https://www.runoob.com/react/react-component-life-cycle.html</span></li><li><span class="exturl" data-url="aHR0cHM6Ly93d3cuY25ibG9ncy5jb20vbGd1b3cvcC8xMDkyMTU2NC5odG1s">https://www.cnblogs.com/lguow/p/10921564.html</span></li><li><span class="exturl" data-url="aHR0cHM6Ly96aHVhbmxhbi56aGlodS5jb20vcC81MTExNzUzNDc=">https://zhuanlan.zhihu.com/p/511175347</span></li><li><span class="exturl" data-url="aHR0cHM6Ly9zZWdtZW50ZmF1bHQuY29tL2EvMTE5MDAwMDAxNDMxMzQyOA==">https://segmentfault.com/a/1190000014313428</span></li><li><span class="exturl" data-url="aHR0cDovL3d3dy5ydWFueWlmZW5nLmNvbS9ibG9nLzIwMTYvMDkvcmVkdXhfdHV0b3JpYWxfcGFydF90aHJlZV9yZWFjdC1yZWR1eC5odG1s">http://www.ruanyifeng.com/blog/2016/09/redux_tutorial_part_three_react-redux.html</span></li></ul><div class="tags"><a href="/tags/%E5%89%8D%E7%AB%AF/" rel="tag"><i class="ic i-tag"></i> 前端</a> <a href="/tags/react/" rel="tag"><i class="ic i-tag"></i> react</a></div></div><footer><div class="meta"><span id="computer-science/web/react-tutorial/" class="item leancloud_visitors" data-flag-title="React 通关指南" title="閲覧数"><span class="icon"><i class="ic i-eye"></i> </span><span class="text">閲覧数</span> <span class="leancloud-visitors-count"></span> <span class="text">回</span></span></div><div class="reward"><button><i class="ic i-heartbeat"></i> 寄付</button><p>*~(￣▽￣)~[お茶]を一杯ください</p><div id="qr"><div><img data-src="/images/wechatpay.png" alt="チンモク WeChat 支払う"><p>WeChat 支払う</p></div><div><img data-src="/images/alipay.png" alt="チンモク Alipay"><p>Alipay</p></div><div><img data-src="/images/paypal.png" alt="チンモク PayPal"><p>PayPal</p></div></div></div><div id="copyright"><ul><li class="author"><strong>著者： </strong>チンモク <i class="ic i-at"><em>@</em></i>チンモクのブログ</li><li class="link"><strong>記事へのリンク：</strong> <a href="https://www.chinmoku.cc/computer-science/web/react-tutorial/" title="React 通关指南">https://www.chinmoku.cc/computer-science/web/react-tutorial/</a></li><li class="license"><strong>著作権表示： </strong>このブログ内のすべての記事は、特別な記載がない限り <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9kZWVkLnpo"><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</span> の下のライセンスで保護されています。</li></ul></div></footer></article></div><div class="post-nav"><div class="item left"><a href="/computer-science/java-learning-path/3-advanced/redis-tutorial/" itemprop="url" rel="prev" data-background-image="https:&#x2F;&#x2F;reference-1301046789.cos.ap-nanjing.myqcloud.com&#x2F;blog-img&#x2F;82c137a7170d4b2cad69db1263f73469.jpg" title="Redis 如何保证高性能"><span class="type">前の記事</span> <span class="category"><i class="ic i-flag"></i> 进阶篇</span><h3>Redis 如何保证高性能</h3></a></div><div class="item right"></div></div><div class="wrap" id="comments"></div></div><div id="sidebar"><div class="inner"><div class="panels"><div class="inner"><div class="contents panel pjax" data-title="見出し"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#react-%E5%85%A5%E9%97%A8"><span class="toc-number">1.</span> <span class="toc-text">React 入门</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AE%80%E4%BB%8B"><span class="toc-number">1.1.</span> <span class="toc-text">简介</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="toc-number">1.2.</span> <span class="toc-text">基本使用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#react-jsx"><span class="toc-number">1.3.</span> <span class="toc-text">React JSX</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A8%A1%E5%9D%97-%E7%BB%84%E4%BB%B6-%E6%A8%A1%E5%9D%97%E5%8C%96-%E7%BB%84%E4%BB%B6%E5%8C%96"><span class="toc-number">1.4.</span> <span class="toc-text">模块、组件、模块化、组件化</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#react-%E9%9D%A2%E5%90%91%E7%BB%84%E4%BB%B6%E7%BC%96%E7%A8%8B"><span class="toc-number">2.</span> <span class="toc-text">React 面向组件编程</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E7%90%86%E8%A7%A3%E5%92%8C%E4%BD%BF%E7%94%A8"><span class="toc-number">2.1.</span> <span class="toc-text">基本理解和使用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%89%E5%A4%A7%E6%A0%B8%E5%BF%83%E5%B1%9E%E6%80%A7state"><span class="toc-number">2.2.</span> <span class="toc-text">三大核心属性：state</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%89%E5%A4%A7%E6%A0%B8%E5%BF%83%E5%B1%9E%E6%80%A7props"><span class="toc-number">2.3.</span> <span class="toc-text">三大核心属性：props</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%89%E5%A4%A7%E6%A0%B8%E5%BF%83%E5%B1%9E%E6%80%A7refs"><span class="toc-number">2.4.</span> <span class="toc-text">三大核心属性：ref (s)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A1%A8%E5%8D%95%E5%A4%84%E7%90%86"><span class="toc-number">2.5.</span> <span class="toc-text">表单处理</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BB%84%E4%BB%B6%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-number">2.6.</span> <span class="toc-text">组件的生命周期</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%99%9A%E6%8B%9F-dom-%E4%B8%8E-diffing-%E7%AE%97%E6%B3%95"><span class="toc-number">2.7.</span> <span class="toc-text">虚拟 DOM 与 Diffing 算法</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#react-%E8%84%9A%E6%89%8B%E6%9E%B6"><span class="toc-number">3.</span> <span class="toc-text">React 脚手架</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%84%9A%E6%89%8B%E6%9E%B6%E5%AE%89%E8%A3%85%E4%B8%8E%E9%A1%B9%E7%9B%AE%E5%88%9D%E5%A7%8B%E5%8C%96"><span class="toc-number">3.1.</span> <span class="toc-text">脚手架安装与项目初始化</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%A1%B9%E7%9B%AE%E6%A1%88%E4%BE%8B"><span class="toc-number">3.2.</span> <span class="toc-text">项目案例</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#react-ajax"><span class="toc-number">4.</span> <span class="toc-text">React Ajax</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#axios"><span class="toc-number">4.1.</span> <span class="toc-text">axios</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%89%8D%E7%AB%AF%E4%BB%A3%E7%90%86"><span class="toc-number">4.2.</span> <span class="toc-text">前端代理</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%A1%B9%E7%9B%AE%E6%A1%88%E4%BE%8B-2"><span class="toc-number">4.3.</span> <span class="toc-text">项目案例</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#react-%E8%B7%AF%E7%94%B1"><span class="toc-number">5.</span> <span class="toc-text">React 路由</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#spa"><span class="toc-number">5.1.</span> <span class="toc-text">SPA</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#react-%E4%B8%AD%E7%9A%84%E8%B7%AF%E7%94%B1"><span class="toc-number">5.2.</span> <span class="toc-text">React 中的路由</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%A1%B9%E7%9B%AE%E6%A1%88%E4%BE%8B-3"><span class="toc-number">5.3.</span> <span class="toc-text">项目案例</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#redux"><span class="toc-number">6.</span> <span class="toc-text">Redux</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#redux-%E7%AE%80%E4%BB%8B"><span class="toc-number">6.1.</span> <span class="toc-text">Redux 简介</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#redux-%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5%E5%8F%8A%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86"><span class="toc-number">6.2.</span> <span class="toc-text">Redux 核心概念及工作原理</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#redux-%E6%A0%B8%E5%BF%83-api"><span class="toc-number">6.3.</span> <span class="toc-text">Redux 核心 API</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#redux-%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B"><span class="toc-number">6.4.</span> <span class="toc-text">Redux 异步编程</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#react-redux"><span class="toc-number">6.5.</span> <span class="toc-text">react-redux</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%A1%B9%E7%9B%AE%E6%A1%88%E4%BE%8B-4"><span class="toc-number">6.6.</span> <span class="toc-text">项目案例</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#react-%E6%89%A9%E5%B1%95"><span class="toc-number">7.</span> <span class="toc-text">React 扩展</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98"><span class="toc-number">8.</span> <span class="toc-text">项目实战</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%82%E8%80%83"><span class="toc-number">9.</span> <span class="toc-text">参考</span></a></li></ol></div><div class="related panel pjax" data-title="関連記事"><ul><li class="active"><a href="/computer-science/web/react-tutorial/" rel="bookmark" title="React 通关指南">React 通关指南</a></li></ul></div><div class="overview panel" data-title="概要"><div class="author" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="image" itemprop="image" alt="チンモク" data-src="/images/avatar.jpg"><p class="name" itemprop="name">チンモク</p><div class="description" itemprop="description">本站主要以 Java 开发总结文章为主，也会向技术周边进行适当的扩展。此外，偶尔会更新部分其他学习或感兴趣的内容，如语言学习、文本翻译、文艺创作等。</div></div><nav class="state"><div class="item posts"><a href="/archives/"><span class="count">23</span> <span class="name">ポスト</span></a></div><div class="item categories"><a href="/categories/"><span class="count">15</span> <span class="name">カテゴリ</span></a></div><div class="item tags"><a href="/tags/"><span class="count">20</span> <span class="name">タグ</span></a></div></nav><div class="social"><span class="exturl item github" data-url="aHR0cHM6Ly9naXRodWIuY29tL3hmYy1leGNsYXZl" title="https:&#x2F;&#x2F;github.com&#x2F;xfc-exclave"><i class="ic i-github"></i></span> <span class="exturl item twitter" data-url="aHR0cHM6Ly90d2l0dGVyLmNvbS95b3VybmFtZQ==" title="https:&#x2F;&#x2F;twitter.com&#x2F;yourname"><i class="ic i-twitter"></i></span> <span class="exturl item zhihu" data-url="aHR0cHM6Ly93d3cuemhpaHUuY29tL3Blb3BsZS95b3VybmFtZQ==" title="https:&#x2F;&#x2F;www.zhihu.com&#x2F;people&#x2F;yourname"><i class="ic i-zhihu"></i></span> <span class="exturl item music" data-url="aHR0cHM6Ly9tdXNpYy4xNjMuY29tLyMvdXNlci9ob21lP2lkPTExMjg2ODg2Mw==" title="https:&#x2F;&#x2F;music.163.com&#x2F;#&#x2F;user&#x2F;home?id&#x3D;112868863"><i class="ic i-cloud-music"></i></span> <span class="exturl item weibo" data-url="aHR0cHM6Ly93ZWliby5jb20vYW1laGltZQ==" title="https:&#x2F;&#x2F;weibo.com&#x2F;amehime"><i class="ic i-weibo"></i></span> <span class="exturl item about" data-url="aHR0cHM6Ly9hYm91dC5tZS95b3VybmFtZQ==" title="https:&#x2F;&#x2F;about.me&#x2F;yourname"><i class="ic i-address-card"></i></span> <span class="exturl item email" data-url="bWFpbHRvOnhmY19leGNsYXZlQDE2My5jb20=" title="mailto:xfc_exclave@163.com"><i class="ic i-envelope"></i></span></div><ul class="menu"><li class="item"><a href="/" rel="section"><i class="ic i-home"></i>ホーム</a></li><li class="item dropdown"><a href="javascript:void(0);"><i class="ic i-feather"></i>投稿</a><ul class="submenu"><li class="item"><a href="/archives/" rel="section"><i class="ic i-list-alt"></i>アーカイブ</a></li><li class="item"><a href="/categories/" rel="section"><i class="ic i-th"></i>カテゴリ</a></li><li class="item"><a href="/tags/" rel="section"><i class="ic i-tags"></i>タグ</a></li></ul></li><li class="item dropdown"><a href="javascript:void(0);"><i class="ic i-link-circle"></i>リンク</a><ul class="submenu"><li class="item"><a href="/friends/" rel="section"><i class="ic i-heart"></i>友人帳</a></li><li class="item"><a href="/websites/" rel="section"><i class="ic i-sun"></i>サイト</a></li></ul></li><li class="item"><a href="/plan/" rel="section"><i class="ic i-stars"></i>学習計画</a></li></ul></div></div></div><ul id="quick"><li class="prev pjax"></li><li class="up"><i class="ic i-arrow-up"></i></li><li class="down"><i class="ic i-arrow-down"></i></li><li class="next pjax"></li><li class="percent"></li></ul></div></div><div class="dimmer"></div></div></main><footer id="footer"><div class="inner"><div class="widgets"><div class="rpost pjax"><h2>ランダムな記事</h2><ul><li class="item"><div class="breadcrumb"><a href="/categories/language/" title="カテゴリ 语言学习">语言学习</a> <i class="ic i-angle-right"></i> <a href="/categories/language/japanese/" title="カテゴリ 日语">日语</a> <i class="ic i-angle-right"></i> <a href="/categories/language/japanese/standard-japanese/" title="カテゴリ 標準日本語入門">標準日本語入門</a></div><span><a href="/language/japanese/standard-japanese/standard-japanese-01/" title="標準日本語の入門（一）">標準日本語の入門（一）</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="カテゴリ 计算机科学">计算机科学</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/java-learning-path/" title="カテゴリ JAVA 学习路线">JAVA 学习路线</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/java-learning-path/%E8%BF%9B%E9%98%B6%E7%AF%87/" title="カテゴリ 进阶篇">进阶篇</a></div><span><a href="/computer-science/java-learning-path/2-intermediate/spring-tutorial/" title="Spring 教程">Spring 教程</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="カテゴリ 计算机科学">计算机科学</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/java-learning-path/" title="カテゴリ JAVA 学习路线">JAVA 学习路线</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/java-learning-path/%E5%9F%BA%E7%A1%80%E7%AF%87/" title="カテゴリ 基础篇">基础篇</a></div><span><a href="/computer-science/java-learning-path/1-basic/01-java-basic/" title="JAVA 基础知识大盘点">JAVA 基础知识大盘点</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="カテゴリ 计算机科学">计算机科学</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/WEB%E5%89%8D%E7%AB%AF/" title="カテゴリ WEB 前端">WEB 前端</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/WEB%E5%89%8D%E7%AB%AF/React-%E6%95%99%E7%A8%8B/" title="カテゴリ React 教程">React 教程</a></div><span><a href="/computer-science/web/react-tutorial/" title="React 通关指南">React 通关指南</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/%E8%B5%84%E6%BA%90%E6%94%B6%E9%9B%86/" title="カテゴリ 资源收集">资源收集</a></div><span><a href="/computer-science/resource/wallpaper_site/" title="高清壁纸网站推荐">高清壁纸网站推荐</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="カテゴリ 计算机科学">计算机科学</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/Python%E5%85%A5%E9%97%A8%E6%95%99%E7%A8%8B/" title="カテゴリ Python 入门教程">Python 入门教程</a></div><span><a href="/computer-science/python/django-tutorial/" title="Django 网站全栈开发教程">Django 网站全栈开发教程</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="カテゴリ 计算机科学">计算机科学</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/java-learning-path/" title="カテゴリ JAVA 学习路线">JAVA 学习路线</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/java-learning-path/%E8%BF%9B%E9%98%B6%E7%AF%87/" title="カテゴリ 进阶篇">进阶篇</a></div><span><a href="/computer-science/java-learning-path/2-intermediate/webservice-tutorial/" title="WebService，如此而已">WebService，如此而已</a></span></li><li class="item"><div class="breadcrumb"></div><span><a href="/blog-log/" title="【长期置顶】博客文章更新日志">【长期置顶】博客文章更新日志</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="カテゴリ 计算机科学">计算机科学</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/java-learning-path/" title="カテゴリ JAVA 学习路线">JAVA 学习路线</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/java-learning-path/%E8%BF%9B%E9%98%B6%E7%AF%87/" title="カテゴリ 进阶篇">进阶篇</a></div><span><a href="/computer-science/java-learning-path/2-intermediate/mybatis-tutorial/" title="MyBatis 教程">MyBatis 教程</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="カテゴリ 计算机科学">计算机科学</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/java-learning-path/" title="カテゴリ JAVA 学习路线">JAVA 学习路线</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/java-learning-path/%E9%AB%98%E7%BA%A7%E7%AF%87/" title="カテゴリ 高级篇">高级篇</a></div><span><a href="/computer-science/java-learning-path/3-advanced/zookeeper-tutorial/" title="Zookeeper 基础教程">Zookeeper 基础教程</a></span></li></ul></div><div><h2>最近のコメント</h2><ul class="leancloud-recent-comment"></ul></div></div><div class="status"><div class="copyright">&copy; 2020 – <span itemprop="copyrightYear">2022</span> <span class="with-love"><i class="ic i-sakura rotate"></i> </span><span class="author" itemprop="copyrightHolder">チンモク @ Chinmoku</span></div><div class="count"><span class="post-meta-item-icon"><i class="ic i-chart-area"></i> </span><span title="単語の総数">593k 単語</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="ic i-coffee"></i> </span><span title="読書の合計時間">8:59</span></div><div class="powered-by">Powered by <span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> & Theme.<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2FtZWhpbWUvaGV4by10aGVtZS1zaG9rYQ==">Shoka</span></div></div></div></footer></div><script data-config type="text/javascript">var LOCAL={path:"computer-science/web/react-tutorial/",favicon:{show:"（●´3｀●）やれやれだぜ",hide:"(´Д｀)大変だ！"},search:{placeholder:"検索…",empty:"「 ${query} 」については何も見つかりませんでした",stats:"${time} ms以内に ${hits} 件の結果が見つかりました"},valine:!0,fancybox:!0,copyright:"コピーは成功しました。 <br> 再印刷については、 ％s 契約に従ってください。",ignores:[function(e){return e.includes("#")},function(e){return new RegExp(LOCAL.path+"$").test(e)}]}</script><script src="https://cdn.polyfill.io/v2/polyfill.js"></script><script src="//cdn.jsdelivr.net/combine/npm/pace-js@1.0.2/pace.min.js,npm/pjax@0.2.8/pjax.min.js,npm/whatwg-fetch@3.4.0/dist/fetch.umd.min.js,npm/animejs@3.2.0/lib/anime.min.js,npm/algoliasearch@4/dist/algoliasearch-lite.umd.js,npm/instantsearch.js@4/dist/instantsearch.production.min.js,npm/lozad@1/dist/lozad.min.js,npm/quicklink@2/dist/quicklink.umd.js"></script><script src="/js/app.js?v=0.2.5"></script></body></html>