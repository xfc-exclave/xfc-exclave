{
    "version": "https://jsonfeed.org/version/1",
    "title": "ãƒãƒ³ãƒ¢ã‚¯ã®ãƒ–ãƒ­ã‚°",
    "subtitle": "éœ²ã®ä¸–ã¯ã€€éœ²ã®ä¸–ãªãŒã‚‰ã€€ã•ã‚ŠãªãŒã‚‰",
    "icon": "https://www.chinmoku.cc/images/favicon.ico",
    "description": "æœ¬ç«™ä¸»è¦ä»¥Javaå¼€å‘æ€»ç»“æ–‡ç« ä¸ºä¸»ï¼Œä¹Ÿä¼šå‘æŠ€æœ¯å‘¨è¾¹è¿›è¡Œé€‚å½“çš„æ‰©å±•ã€‚æ­¤å¤–ï¼Œå¶å°”ä¼šæ›´æ–°éƒ¨åˆ†å…¶ä»–å­¦ä¹ æˆ–æ„Ÿå…´è¶£çš„å†…å®¹ï¼Œå¦‚è¯­è¨€å­¦ä¹ ã€æ–‡æœ¬ç¿»è¯‘ã€æ–‡è‰ºåˆ›ä½œç­‰ã€‚",
    "home_page_url": "https://www.chinmoku.cc",
    "items": [
        {
            "id": "https://www.chinmoku.cc/computer-science/java-learning-path/3-advanced/redis-tutorial/",
            "url": "https://www.chinmoku.cc/computer-science/java-learning-path/3-advanced/redis-tutorial/",
            "title": "Redis å¦‚ä½•ä¿è¯é«˜æ€§èƒ½",
            "date_published": "2022-02-14T04:08:17.000Z",
            "content_html": "<div class=\"note info no-icon\">\n<p>æœ€è¿‘æ˜¯çœŸçš„æ˜¯å¤ªæ‡’äº†ğŸ˜¥ï¼Œéƒ½å¿«å¿˜è®°è¦å†™åšå®¢è¿™ä¸€å›äº‹äº†ã€‚ä¹‹å‰è¿˜å¯ä»¥å€Ÿå£è¯´å·¥ä½œå¤ªå¿™ï¼Œç°åœ¨å°±åªèƒ½å¦ç‡åœ°æ‰¿è®¤äº†ã€‚æ„è¯†åˆ°è¿™ç‚¹ï¼Œèµ¶ç´§ç‹ ç‹ åœ°å‘¼äº†è‡ªå·±ä¸€è€³å…‰ï¼Œç»§ç»­å­¦ä¹ ï¼ŒğŸ˜¡Fightingï¼ï¼ï¼ã€‚</p>\n</div>\n<h3 id=\"redis-ç®€ä»‹\"><a class=\"anchor\" href=\"#redis-ç®€ä»‹\">#</a> Redis ç®€ä»‹</h3>\n<blockquote>\n<p>å…³äº NoSQL çš„ä¼˜ç¼ºç‚¹ï¼ŒåŠå…¶ä¸å…³ç³»å‹æ•°æ®åº“çš„å¯¹æ¯”ï¼Œæ­¤å‰å·²åœ¨ <a href=\"/computer-science/java-learning-path/3-advanced/mongodb-tutorial/\">MongoDB åŸºç¡€æ•™ç¨‹</a>ä¸€æ–‡ä¸­å·²æœ‰æè¿°ï¼Œå¯è‡ªè¡Œå‰å¾€æŸ¥çœ‹ã€‚</p>\n</blockquote>\n<p>Redis è¯ç”Ÿäº 2009 å¹´ï¼Œå…¶å…¨ç§°æ˜¯ Remote Dictionary Serverï¼Œè¿œç¨‹è¯å…¸æœåŠ¡å™¨ï¼Œæ˜¯ä¸€ä¸ªåŸºäºå†…å­˜çš„é”®å€¼å‹ NoSQL æ•°æ®åº“ã€‚</p>\n<p>Redis ç‰¹å¾ï¼š</p>\n<ul>\n<li>é”®å€¼å‹ï¼Œvalue æ”¯æŒå¤šç§ä¸åŒæ•°æ®ç»“æ„ï¼ŒåŠŸèƒ½ä¸°å¯Œã€‚</li>\n<li>å•çº¿ç¨‹ï¼Œæ¯ä¸ªå‘½ä»¤å…·å¤‡åŸå­æ€§ã€‚</li>\n<li>ä½å»¶è¿Ÿï¼Œé€Ÿåº¦å¿«ï¼ˆåŸºäºå†…å­˜ï¼ŒIO å¤šè·¯å¤ç”¨ï¼Œè‰¯å¥½çš„ç¼–ç ï¼‰ã€‚</li>\n<li>æ”¯æŒæ•°æ®æŒä¹…åŒ–ã€‚</li>\n<li>æ”¯æŒä¸»ä»é›†ç¾¤ã€åˆ†ç‰‡é›†ç¾¤ã€‚</li>\n<li>æ”¯æŒå¤šè¯­è¨€å®¢æˆ·ç«¯ã€‚</li>\n</ul>\n<h3 id=\"å¸è½½å®‰è£…\"><a class=\"anchor\" href=\"#å¸è½½å®‰è£…\">#</a> å¸è½½å®‰è£…</h3>\n<h4 id=\"redis-å¸è½½\"><a class=\"anchor\" href=\"#redis-å¸è½½\">#</a> Redis å¸è½½</h4>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">ps</span> aux <span class=\"token operator\">|</span> <span class=\"token function\">grep</span> redis <span class=\"token comment\"># æŸ¥çœ‹æ˜¯å¦å¯åŠ¨ redisï¼Œå¦‚å·²å¯åŠ¨åˆ™åœæ­¢</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token function\">whereis</span> redis <span class=\"token comment\"># æœç´¢ redisï¼Œæ ¸å¯¹å¹¶åˆ é™¤å¯¹åº”æ–‡ä»¶åŠç›®å½•</span></pre></td></tr></table></figure><h4 id=\"redis-å®‰è£…\"><a class=\"anchor\" href=\"#redis-å®‰è£…\">#</a> Redis å®‰è£…</h4>\n<ol>\n<li>\n<p>Redis å®‰è£…å¯åŠ¨</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token builtin class-name\">cd</span> /usr/local</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token function\">mkdir</span> redis</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token builtin class-name\">cd</span> redis/</pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token function\">wget</span> https://download.redis.io/releases/redis-6.2.6.tar.gz</pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token function\">tar</span> xzf redis-6.2.6.tar.gz</pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token builtin class-name\">cd</span> redis-6.2.6</pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token function\">make</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">make</span> <span class=\"token function\">install</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token comment\"># æ£€æŸ¥å®‰è£…</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token builtin class-name\">cd</span> /usr/local/bin</pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token comment\"># ä»»æ„ä½ç½®è¿è¡Œ redis</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token builtin class-name\">cd</span> ~</pre></td></tr><tr><td data-num=\"12\"></td><td><pre>redis-server <span class=\"token comment\"># å‰å°å¯åŠ¨</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token comment\"># åå°å¯åŠ¨</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token builtin class-name\">cd</span> /usr/local/redis/redis-6.2.6</pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token function\">cp</span> redis.conf redis.conf.backup <span class=\"token comment\"># backup</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token function\">vi</span> redis.conf <span class=\"token comment\"># æ ¹æ®éœ€è¦ä¿®æ”¹é…ç½®</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>redis-server redis.conf</pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token function\">ps</span> aux <span class=\"token operator\">|</span> <span class=\"token function\">grep</span> redis</pre></td></tr></table></figure><p>redis.conf é…ç½®é¡¹ç¤ºä¾‹ï¼š</p>\n<figure class=\"highlight properties\"><figcaption data-lang=\".properties\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># ç›‘å¬åœ°å€ï¼Œå­¦ä¹ æ—¶å¯ä»¥æ”¾å¼€å…è®¸æ‰€æœ‰ IP</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token attr-name\">bind</span> <span class=\"token attr-value\">0.0.0.0</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\"># åå°è¿è¡Œï¼Œé»˜è®¤ä¸ºå‰å°è¿è¡Œ</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token attr-name\">daemonize</span> <span class=\"token attr-value\">yes</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\"># è®¾ç½® redis å¯†ç </span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token attr-name\">requirepass</span> <span class=\"token attr-value\">foobared</span></pre></td></tr></table></figure></li>\n<li>\n<p>Redis å¼€æœºè‡ªå¯</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># ç¼–è¾‘å¯åŠ¨è„šæœ¬</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token function\">vi</span> /etc/systemd/system/redis.service</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>systemctl daemon-reload <span class=\"token comment\"># é‡è½½ç³»ç»ŸæœåŠ¡</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>systemctl start redis <span class=\"token comment\"># å¯åŠ¨ redis</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>systemctl status redis <span class=\"token comment\"># æŸ¥çœ‹ redis çŠ¶æ€</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>systemctl stop redis <span class=\"token comment\"># åœæ­¢ redis</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>systemctl <span class=\"token builtin class-name\">enable</span> redis <span class=\"token comment\"># å…è®¸ redis å¼€æœºè‡ªå¯</span></pre></td></tr></table></figure><p>redis.service å¯åŠ¨è„šæœ¬å†…å®¹ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight properties\"><figcaption data-lang=\".properties\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>[Unit]</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token attr-name\">Description</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">redis-server</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token attr-name\">After</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">network.target</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>[Service]</pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token attr-name\">Type</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">forking</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token attr-name\">ExecStart</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">/usr/local/bin/redis-server /usr/local/redis/redis-6.2.6/redis.conf</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token attr-name\">PrivateTmp</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">true</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>[Install]</pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token attr-name\">WantedBy</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">multi-user.target</span></pre></td></tr></table></figure><p>æ³¨ï¼š</p>\n<ul>\n<li>å¦‚å¯åŠ¨ä¸æˆåŠŸï¼Œå°è¯•æ£€æŸ¥é…ç½®æ–‡ä»¶å†…å®¹æ˜¯å¦æ­£ç¡®ï¼Œç«¯å£æ˜¯å¦è¢«å ç”¨ã€‚</li>\n</ul>\n</li>\n</ol>\n<h4 id=\"redis-è¿æ¥\"><a class=\"anchor\" href=\"#redis-è¿æ¥\">#</a> Redis è¿æ¥</h4>\n<ol>\n<li>\n<p>å‘½ä»¤è¡Œå®¢æˆ·ç«¯ï¼šredis-cli</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token builtin class-name\">cd</span> ~ <span class=\"token comment\"># ä»»æ„ä½ç½®</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>redis-cli -h <span class=\"token number\">127.0</span>.0.1 -p <span class=\"token number\">6379</span> <span class=\"token comment\"># è¯­æ³•ï¼šredis-cli [options] [commonds]</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>AUTH foobared <span class=\"token comment\"># è¯­æ³•ï¼šAUTH [username] password</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token builtin class-name\">set</span> name chinmoku</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>get name</pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token builtin class-name\">exit</span> <span class=\"token comment\"># é€€å‡º</span></pre></td></tr></table></figure></li>\n<li>\n<p>å›¾å½¢åŒ–å®¢æˆ·ç«¯ï¼šRedisDesktopManager</p>\n<p>æºç åœ°å€ï¼š<span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL3VnbGlkZS9SZWRpc0Rlc2t0b3BNYW5hZ2VyL3JlbGVhc2Vz\">https://github.com/uglide/RedisDesktopManager/releases</span></p>\n<p>æºç ä¸‹è½½åéœ€è¦æ‰‹åŠ¨ç¼–è¯‘ï¼Œä¹Ÿå¯ä»¥<span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL2xld29yay9SZWRpc0Rlc2t0b3BNYW5hZ2VyLVdpbmRvd3MvcmVsZWFzZXM=\">ç‚¹å‡»æ­¤å¤„</span>ä¸‹è½½å¯¹åº”çš„ç¼–è¯‘ç‰ˆæœ¬ã€‚</p>\n<p>æ³¨ï¼š</p>\n<ul>\n<li>\n<p>é€šè¿‡ windows è¿æ¥æœåŠ¡å™¨çš„ redis æœåŠ¡ï¼Œéœ€è¦æ³¨æ„å¯¹åº”çš„é˜²ç«å¢™ã€å®‰å…¨ç»„ç­‰æ˜¯å¦å¼€æ”¾ã€‚</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># æ·»åŠ é˜²ç«å¢™æŒ‡å®šç«¯å£</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>firewall-cmd --add-port<span class=\"token operator\">=</span><span class=\"token number\">6379</span>/tcp --permanent</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>firewall-cmd --reload <span class=\"token comment\"># é‡è½½ç”Ÿæ•ˆ</span></pre></td></tr></table></figure></li>\n</ul>\n</li>\n</ol>\n<h3 id=\"redis-å‘½ä»¤\"><a class=\"anchor\" href=\"#redis-å‘½ä»¤\">#</a> Redis å‘½ä»¤</h3>\n<h4 id=\"æ•°æ®ç»“æ„\"><a class=\"anchor\" href=\"#æ•°æ®ç»“æ„\">#</a> æ•°æ®ç»“æ„</h4>\n<p>Redis æ˜¯ä¸€ä¸ªä»¥  <code>key-value</code>  å½¢å¼å­˜å‚¨æ•°æ®çš„æ•°æ®åº“ï¼Œkey ä¸€èˆ¬æ˜¯ String ç±»å‹ï¼Œä½† value ç±»å‹åˆ™å­˜åœ¨å¤šç§ï¼š</p>\n<p>åŸºæœ¬æ•°æ®ç±»å‹ï¼š</p>\n<ul>\n<li>\n<p>String - å­˜å‚¨å­—ç¬¦ä¸²ï¼Œä¾‹å¦‚ï¼š <code>hello world</code> ã€‚</p>\n</li>\n<li>\n<p>Hash - å­˜å‚¨è¾ƒä¸ºå¤æ‚çš„æ•°æ®ç»“æ„ï¼Œä¾‹å¦‚ï¼š <code>&#123;name: &quot;Chinmoku&quot;, age: 20&#125;</code> ã€‚</p>\n</li>\n<li>\n<p>List - å­˜å‚¨æ•°ç»„åˆ—è¡¨ï¼Œä¾‹å¦‚ï¼š <code>[A, B, C, C]</code> ã€‚</p>\n</li>\n<li>\n<p>Set - å­˜å‚¨å…ƒç´ ä¸å¯é‡å¤çš„æ•°ç»„ï¼Œä¾‹å¦‚ï¼š <code>&#123;A, B, C&#125;</code> ã€‚</p>\n</li>\n<li>\n<p>SortedSet - å­˜å‚¨æœ‰åºçš„ï¼Œä¸”å…ƒç´ ä¸å¯é‡å¤çš„æ•°ç»„ï¼Œä¾‹å¦‚ï¼š <code>&#123;A: 1, B: 2, C: 3&#125;</code> ã€‚</p>\n</li>\n</ul>\n<p>ç‰¹æ®Šç±»å‹ï¼š</p>\n<ul>\n<li>GEO</li>\n<li>BitMap</li>\n<li>HyperLog</li>\n</ul>\n<h4 id=\"é€šç”¨å‘½ä»¤\"><a class=\"anchor\" href=\"#é€šç”¨å‘½ä»¤\">#</a> é€šç”¨å‘½ä»¤</h4>\n<div class=\"note danger no-icon\">\n<p>Redis å‘½ä»¤å‚è€ƒï¼š<span class=\"exturl\" data-url=\"aHR0cHM6Ly9yZWRpcy5pby9jb21tYW5kcw==\">https://redis.io/commands</span></p>\n<p>æˆ–è€…é€šè¿‡  <code>help [commands]</code>  å³å¯æŸ¥çœ‹ç›¸å…³å‘½ä»¤ç”¨æ³•ã€‚</p>\n</div>\n<p>Redis é€šç”¨å‘½ä»¤ç¤ºä¾‹ï¼š</p>\n<ol>\n<li>\n<p>KEYS pattern æŸ¥è¯¢ä»¥å­—æ¯ a å¼€å¤´çš„ keyã€‚</p>\n<blockquote>\n<p>ç”±äº redis æ˜¯å•çº¿ç¨‹æ‰§è¡Œï¼Œå½“æ•°æ®é‡è¾ƒå¤§æ—¶ï¼Œä¼šå¯¼è‡´ä¸šåŠ¡é˜»å¡ï¼Œä¸å»ºè®®åœ¨ç”Ÿäº§ç¯å¢ƒä¸‹ä½¿ç”¨ã€‚</p>\n</blockquote>\n</li>\n<li>\n<p>DEL key [key ...] åˆ é™¤æŒ‡å®šçš„ä¸€ä¸ªæˆ–å¤šä¸ª keyã€‚</p>\n</li>\n<li>\n<p>EXISTS key [key ...] åˆ¤æ–­æŒ‡å®šçš„ key æ˜¯å¦å­˜åœ¨ã€‚</p>\n</li>\n<li>\n<p>EXPIRE key seconds è®¾ç½® key çš„æœ‰æ•ˆæœŸã€‚</p>\n</li>\n<li>\n<p>TTL key è·å– key çš„æœ‰æ•ˆæœŸã€‚</p>\n<blockquote>\n<p>å¦‚ä¸æŒ‡å®šï¼Œåˆ™é»˜è®¤ä¸º -1 è¡¨ç¤ºæ°¸ä¹…æœ‰æ•ˆã€‚å¦‚æœ key ä¸å­˜åœ¨ï¼ŒæŸ¥è¯¢å…¶æœ‰æ•ˆæœŸåˆ™ä¼šè¿”å›  <code>-2</code> ã€‚</p>\n</blockquote>\n</li>\n</ol>\n<h4 id=\"string-ç±»å‹\"><a class=\"anchor\" href=\"#string-ç±»å‹\">#</a> String ç±»å‹</h4>\n<p>String ç±»å‹æ˜¯ redis ä¸­æœ€ç®€å•çš„æ•°æ®ç±»å‹ï¼Œä½†å…¶ value æ ¹æ®å­—ç¬¦ä¸²çš„ä¸åŒæ ¼å¼ï¼Œåˆå¯ä»¥åˆ†ä¸ºä¸‰ç±»ï¼š</p>\n<ul>\n<li>string æ™®é€šå­—ç¬¦ä¸²ã€‚</li>\n<li>int æ•´æ•°ç±»å‹ï¼Œå¯ä»¥è¿›è¡Œè‡ªå¢ã€è‡ªå‡ç­‰æ“ä½œã€‚</li>\n<li>float æµ®ç‚¹ç±»å‹ï¼Œå¯ä»¥è¿›è¡Œè‡ªå¢ã€è‡ªå‡ç­‰æ“ä½œã€‚</li>\n</ul>\n<blockquote>\n<p>ä¸è®ºæ˜¯å“ªç§æ ¼å¼çš„å­—ç¬¦ä¸²ç±»å‹ï¼Œå…¶åº•å±‚éƒ½æ˜¯ä½¿ç”¨å­—èŠ‚æ•°ç»„è¿›è¡Œå­˜å‚¨çš„ï¼Œåªæ˜¯é‡‡ç”¨çš„ç¼–ç æ–¹å¼ä¸åŒè€Œå·²ã€‚å­—ç¬¦ä¸²ç±»å‹çš„æœ€å¤§ç©ºé—´ä¸èƒ½è¶…è¿‡ 512mã€‚</p>\n</blockquote>\n<p>String ç±»å‹å¸¸è§å‘½ä»¤ï¼š</p>\n<ol>\n<li>SET key value</li>\n<li>GET key</li>\n<li>MSET key value [key value ...] æ‰¹é‡æ’å…¥ã€‚</li>\n<li>MGET key [key ...] æ‰¹é‡è·å–ã€‚</li>\n<li>INCR key è®¾ç½®æŸä¸ª key è‡ªå¢ã€‚</li>\n<li>INCRBY key increment è‡ªå¢å¹…åº¦ã€‚</li>\n<li>INCRBYFLOAT key increment è®¾ç½®æµ®ç‚¹æ•°è‡ªå¢ã€‚</li>\n<li>SETNX key value å½“ key ä¸å­˜åœ¨æ—¶ï¼Œæ‰è¿›è¡Œæ’å…¥ã€‚</li>\n<li>SETEX key seconds value è®¾ç½®æŒ‡å®š key çš„æœ‰æ•ˆæœŸã€‚</li>\n</ol>\n<blockquote>\n<p>PS. Redis ä¸­ key çš„å±‚çº§æ ¼å¼ï¼š</p>\n<p>åœ¨ä¸šåŠ¡ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰çš„ key è¦æ±‚å…¨å±€å”¯ä¸€ï¼Œå¾€å¾€æ˜¯ä»¥å¯¹è±¡çš„ ID æ¥è¡¨ç¤ºï¼Œä½†å½“ redis ä¸­å­˜åœ¨ä¸åŒç±»å‹çš„å¯¹è±¡æ—¶ï¼Œkey é‡å¤çš„å‡ ç‡ä¼šç›¸åº”åœ°å¢åŠ ï¼Œå¹¶ä¸”éš¾ä»¥å¯¹ä¸åŒçš„ key è¿›è¡ŒåŒºåˆ†ã€‚å› æ­¤ï¼Œåœ¨ redis ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šå¯¹ redis çš„ key æ ¼å¼åšå‡ºä¸€å®šçš„é™åˆ¶ï¼Œä½†è¿™ç§é™åˆ¶å¹¶ä¸æ˜¯å¼ºåˆ¶çš„ï¼Œä¼ä¸šæˆ–å¼€å‘è€…å¯ä»¥è‡ªè¡Œè®¾è®¡ï¼Œä¾‹å¦‚ï¼š <code>é¡¹ç›®å:ä¸šåŠ¡å:id</code> ã€‚</p>\n<p>æ­¤å¤–ï¼Œè¿™ç§ key çš„è®¾è®¡æ–¹å¼ï¼Œåœ¨éƒ¨åˆ† redis å®¢æˆ·ç«¯ä¸­ï¼Œä¹Ÿå¯ä»¥å½¢æˆä¸åŒçš„å±‚çº§æ˜¾ç¤ºã€‚</p>\n</blockquote>\n<h4 id=\"hash-ç±»å‹\"><a class=\"anchor\" href=\"#hash-ç±»å‹\">#</a> Hash ç±»å‹</h4>\n<p>Hash ç±»å‹ï¼Œä¹Ÿå«æ•£åˆ—ï¼Œå…¶ value æ˜¯ä¸€ä¸ªæ— åºå­—å…¸ï¼Œç±»ä¼¼äº java ä¸­çš„ HashMap ç»“æ„ã€‚</p>\n<p>Hash ç±»å‹å¸¸è§å‘½ä»¤ï¼š</p>\n<ol>\n<li>HSET key field value [field value ...]</li>\n<li>HGET key field</li>\n<li>HMSET key field value [field value ...] è®¾ç½®å¤šä¸ª Hash å­—æ®µã€‚</li>\n<li>HMGET key field [field ...] è·å–å¤šä¸ª Hash å­—æ®µã€‚</li>\n<li>HGETALL key è·å– key å¯¹åº”çš„æ‰€æœ‰ Hash é”®å€¼å¯¹ã€‚</li>\n<li>HKEYS key è·å– key å¯¹åº”çš„æ‰€æœ‰ Hash é”®ã€‚</li>\n<li>HVALS key è·å– key å¯¹åº”çš„æ‰€æœ‰ Hash å€¼ã€‚</li>\n<li>HINCRBY key field increment è®¾ç½® Hash ä¸­æŸä¸€å­—æ®µæŒ‰æ­¥é•¿è‡ªå¢ã€‚</li>\n<li>HSETNX key field value å½“æŸä¸€ key å¯¹åº” Hash çš„å­—æ®µä¸å­˜åœ¨æ—¶ï¼Œæ‰è¿›è¡Œèµ‹å€¼ã€‚</li>\n</ol>\n<p>ğŸˆ <strong>ä¸ºä»€ä¹ˆ redis ä¸­æ¨èä½¿ç”¨ Hash è€Œé String æ¥å­˜å‚¨ JSON çš„æ•°æ®ç»“æ„ï¼Ÿ</strong></p>\n<p>åœ¨ Redis ä¸­ä½¿ç”¨ String çš„æ•°æ®ç»“æ„æ¥å­˜å‚¨ JSONï¼Œå…¶å®æ˜¯å°† JSON å­—ç¬¦ä¸²åºåˆ—åŒ–ä¹‹åå†è¿›è¡Œå­˜å‚¨çš„ï¼Œå½“éœ€è¦è·å– JSON å†…éƒ¨çš„æŸä¸ªå­—æ®µæ—¶ï¼Œå¿…é¡»è·å–æ•´ä¸ªå­—ç¬¦ä¸²å†…å®¹ï¼Œè€Œä½¿ç”¨ Hash ç»“æ„å­˜å‚¨ JSON æ•°æ®æ—¶ï¼Œåˆ™ä¼šå°† JSON ä¸­çš„æ¯ä¸ªå­—æ®µç‹¬ç«‹å­˜å‚¨ï¼Œå®ƒæ›´åŠ æ–¹ä¾¿å¯¹ JSON ä¸­çš„å•ä¸ªå­—æ®µåš CRUD æ“ä½œã€‚</p>\n<h4 id=\"list-ç±»å‹\"><a class=\"anchor\" href=\"#list-ç±»å‹\">#</a> List ç±»å‹</h4>\n<p>Redis ä¸­çš„ List å¯ä»¥çœ‹åšæ˜¯ä¸€ä¸ªåŒå‘é“¾è¡¨ï¼Œæ—¢å¯ä»¥æ”¯æŒæ­£å‘æ£€ç´¢ï¼Œä¹Ÿæ”¯æŒåå‘æ£€ç´¢ã€‚ä¸ Java ä¸­çš„ LinkedList ç›¸ä¼¼ï¼Œå®ƒä¹Ÿå…·æœ‰å¦‚ä¸‹ç‰¹å¾ï¼š</p>\n<ul>\n<li>æœ‰åºã€‚</li>\n<li>å¯é‡å¤ã€‚</li>\n<li>æ’å…¥å’Œåˆ é™¤æ•ˆç‡é«˜ã€‚</li>\n<li>æŸ¥è¯¢æ•ˆç‡è¾ƒä½ã€‚</li>\n</ul>\n<p>List ç±»å‹å¸¸è§å‘½ä»¤ï¼š</p>\n<ol>\n<li>LPUSH key element [element ...] å‘æ•°ç»„å·¦ä¾§è¿½åŠ å…ƒç´ ã€‚</li>\n</ol>\n<blockquote>\n<p>ä½¿ç”¨ LPUSH åï¼Œå…¶æ”¾å…¥å’Œå–å‡ºå…ƒç´ çš„é¡ºåºæ˜¯ç›¸åçš„ï¼Œä¸ä¹‹å¯¹åº”çš„è¿™æ˜¯ RPUSHã€‚</p>\n</blockquote>\n<ol start=\"2\">\n<li>\n<p>LPOP key [count] ä»å·¦ä¾§å¼€å§‹è·å–å¹¶ç§»é™¤æ•°ç»„ä¸­çš„å…ƒç´ ã€‚</p>\n</li>\n<li>\n<p>LRANGE key start stop è·å–æ•°ç»„ä¸­æŒ‡å®šä¸‹æ ‡èŒƒå›´å†…çš„å…ƒç´ ã€‚</p>\n</li>\n<li>\n<p>BLPOP key [key ...] timeout ä»å·¦ä¾§å¼€å§‹é˜»å¡å¼åœ°è·å–å¹¶ç§»é™¤æ•°ç»„ä¸­çš„å…ƒç´ ã€‚</p>\n<blockquote>\n<p>å½“ BLPOP æ— æ³•è·å–åˆ°å…ƒç´ æ—¶ï¼Œä¼šç­‰å¾…æŒ‡å®šçš„æ—¶é—´ï¼Œè‹¥ç­‰å¾…æœŸé—´å¯ä»¥è·å–åˆ°å…ƒç´ ï¼Œåˆ™ç›´æ¥å–å‡ºå¹¶è¿”å›ï¼›å¦‚ç­‰å¾…æ—¶é—´è¿‡æœŸä»æœªè·å–åˆ°å…ƒç´ ï¼Œåˆ™è¿”å›  <code>nil</code> ã€‚</p>\n</blockquote>\n</li>\n</ol>\n<p>ğŸˆ <strong>å¦‚ä½•åˆ©ç”¨ Redis çš„ List æ•°æ®ç»“æ„æ¥æ¨¡æ‹Ÿæ ˆã€é˜Ÿåˆ—åŠé˜»å¡é˜Ÿåˆ—ï¼Ÿ</strong></p>\n<p>ä½¿ç”¨ LPUSH å’Œ LPOPï¼Œæˆ– RPUSH å’Œ RPOPï¼Œéƒ½ä»å·¦ä¾§æˆ–éƒ½ä»å³ä¾§å­˜å…¥å’Œå–å‡ºå…ƒç´ ï¼Œåˆ™å¯ä»¥æ¨¡æ‹Ÿæ ˆçš„æ•°æ®ç»“æ„ï¼›ç›¸ååœ°ï¼Œå·¦ä¾§å­˜å…¥å³ä¾§å–å‡ºï¼Œæˆ–å³ä¾§å­˜å…¥å·¦ä¾§å–å‡ºï¼Œåˆ™å¯ä»¥æ¨¡æ‹Ÿé˜Ÿåˆ—çš„æ•°æ®ç»“æ„ã€‚è€Œå¯¹äºé˜»å¡é˜Ÿåˆ—ï¼Œåˆ™æ˜¯åœ¨é˜Ÿåˆ—ç‰¹å¾åŸºç¡€ä¸Šï¼Œå–å‡ºå…ƒç´ æ—¶ï¼Œä½¿ç”¨ BLOPO æˆ– BRPOP å³å¯ã€‚</p>\n<h4 id=\"set-ç±»å‹\"><a class=\"anchor\" href=\"#set-ç±»å‹\">#</a> Set ç±»å‹</h4>\n<p>Redis ä¸­çš„ Set ç»“æ„ä¸ Java ä¸­çš„ HashSet ç›¸ä¼¼ï¼Œå®ƒä¹Ÿå…·å¤‡ä¸ HashSet ç±»ä¼¼çš„ç‰¹å¾ï¼š</p>\n<ul>\n<li>æ— åºã€‚</li>\n<li>ä¸å¯é‡å¤ã€‚</li>\n<li>æŸ¥è¯¢æ•ˆç‡é«˜ã€‚</li>\n<li>æ”¯æŒäº¤é›†ã€å¹¶é›†ã€å·®é›†ç­‰ã€‚</li>\n</ul>\n<p>Set ç±»å‹å¸¸è§å‘½ä»¤ï¼š</p>\n<ol>\n<li>SADD key member [member ...] å‘ Set ä¸­æ’å…¥å…ƒç´ ã€‚</li>\n<li>SREM key member [member ...] ç§»é™¤ Set ä¸­çš„å…ƒç´ ã€‚</li>\n<li>SCARD key æŸ¥è¯¢ Set ä¸­å…ƒç´ æ•°é‡ã€‚</li>\n<li>SISMEMBER key member åˆ¤æ–­ Set ä¸­æ˜¯å¦å­˜åœ¨æŸå…ƒç´ ã€‚</li>\n<li>SMEMBERS key è·å– Set ä¸­æ‰€æœ‰å…ƒç´ ã€‚</li>\n<li>SINTER key [key ...] äº¤é›†ã€‚</li>\n<li>SDIFF key [key ...] å·®é›†ã€‚</li>\n<li>SUNION key [key ...] å¹¶é›†ã€‚</li>\n</ol>\n<h4 id=\"sortedset-ç±»å‹\"><a class=\"anchor\" href=\"#sortedset-ç±»å‹\">#</a> SortedSet ç±»å‹</h4>\n<p>Redis ä¸­çš„ SortedSet æ˜¯ä¸€ä¸ªå¯æ’åºçš„ Set é›†åˆã€‚SortedSet ä¸­æ¯ä¸€ä¸ªå…ƒç´ éƒ½å¸¦æœ‰ä¸€ä¸ª score å±æ€§ï¼Œå¯ä»¥åŸºäº score å±æ€§å¯¹å…ƒç´ è¿›è¡Œæ’åºï¼Œå…¶åº•å±‚å®ç°æ˜¯ä¸€ä¸ªè·³è¡¨ï¼ˆSkipListï¼‰åŠ  Hash è¡¨ã€‚SortedSet å…·å¤‡å¦‚ä¸‹ç‰¹å¾ï¼š</p>\n<ul>\n<li>å¯æ’åºã€‚</li>\n<li>ä¸é‡å¤ã€‚</li>\n<li>æŸ¥è¯¢æ•ˆç‡é«˜ã€‚</li>\n</ul>\n<p>SortedSet ç±»å‹å¸¸è§å‘½ä»¤ï¼š</p>\n<ol>\n<li>ZADD key</li>\n<li>ZREM key member [member ...]</li>\n<li>ZSCORE key member è·å–æŸå…ƒç´ çš„ score å€¼ã€‚</li>\n<li>ZRANK key member è·å–æŸå…ƒç´ åœ¨è¯¥é›†åˆä¸­çš„æ’åã€‚</li>\n<li>ZCARD key</li>\n<li>ZCOUNT key min max ç»Ÿè®¡æŒ‡å®š score èŒƒå›´å†…çš„å…ƒç´ ä¸ªæ•°ã€‚</li>\n<li>ZINCRBY key increment member ä½¿é›†åˆä¸­æŒ‡å®šå…ƒç´ æŒ‰æ­¥é•¿è‡ªå¢ã€‚</li>\n<li>ZRANGE key min max è·å–æŒ‡å®šæ’åèŒƒå›´çš„å…ƒç´ ã€‚</li>\n<li>ZRANGEBYSCORE key min max è·å–æŒ‡å®š score èŒƒå›´çš„å…ƒç´ ã€‚</li>\n<li>ZINTER numkeys key [key ...] äº¤é›†ã€‚</li>\n<li>ZDIFF numkeys key [key ...] å·®é›†ã€‚</li>\n<li>ZUNION numkeys key [key ...] å¹¶é›†ã€‚</li>\n</ol>\n<blockquote>\n<p>SortedSet æŸ¥è¯¢æ’åºé»˜è®¤é‡‡ç”¨å‡åºï¼Œå¦‚éœ€ä½¿ç”¨é™åºï¼Œåªéœ€åœ¨å­—æ¯ Z ä¹‹åæ·»åŠ  REV å³å¯ï¼Œå¦‚ ZREVRANGEã€‚</p>\n</blockquote>\n<h3 id=\"java-å®¢æˆ·ç«¯\"><a class=\"anchor\" href=\"#java-å®¢æˆ·ç«¯\">#</a> Java å®¢æˆ·ç«¯</h3>\n<p>Redis å®˜æ–¹æ¨èå¦‚ä¸‹ä¸‰æ¬¾å®¢æˆ·ç«¯äº§å“ï¼š</p>\n<ol>\n<li>Jedisï¼Œå…¶ç‰¹ç‚¹æ˜¯å­¦ä¹ æˆæœ¬ä½ï¼ŒåŸºæœ¬ä½¿ç”¨ redis å‘½ä»¤ä½œä¸º API æ–¹æ³•åã€‚ä½†åŸºäº Jedis çš„è¿æ¥æ— æ³•ä¿è¯çº¿ç¨‹å®‰å…¨ï¼Œåœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹éœ€è¦åŸºäºè¿æ¥æ± æ¥ä½¿ç”¨ã€‚</li>\n<li>Lettuceï¼ŒåŸºäº Netty å®ç°ï¼Œæ”¯æŒåŒæ­¥ã€å¼‚æ­¥å’Œå“åº”å¼ç¼–ç¨‹ï¼Œå¹¶ä¸”æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œæ”¯æŒ Redis å“¨å…µæ¨¡å¼ã€é›†ç¾¤æ¨¡å¼å’Œç®¡é“æ¨¡å¼ã€‚</li>\n<li>Redissonï¼Œæ˜¯ä¸€ä¸ªåŸºäº Redis å®ç°çš„åˆ†å¸ƒå¼ã€å¯ä¼¸ç¼©çš„ Java æ•°æ®ç»“æ„é›†åˆï¼ŒåŒ…å«äº†è¯¸å¦‚ Mapã€Queueã€Lockã€Semaphereã€AtomicLong ç­‰å¼ºå¤§åŠŸèƒ½ã€‚</li>\n</ol>\n<blockquote>\n<p>å‡ºäºå¯¹æœ¬æ–‡ç¯‡å¹…çš„è€ƒè™‘ï¼Œæ­¤å¤„ä»…å¯¹ Jedis åšæ‰©å±•ä»‹ç»ï¼Œå¦‚å¯¹å…¶ä»–å®¢æˆ·ç«¯äº§å“æ„Ÿå…´è¶£ï¼Œå¯è‡ªè¡Œäº†è§£ã€‚</p>\n<p>PS. ç»¼åˆå„ç§ Redis å®¢æˆ·ç«¯çš„ä¼˜ç¼ºç‚¹ï¼Œä¹Ÿå¯ä»¥è€ƒè™‘ä½¿ç”¨ Spring é›†æˆçš„å·¥å…·åŒ…  <code>Spring Data Redis</code> ã€‚</p>\n</blockquote>\n<h4 id=\"jedis\"><a class=\"anchor\" href=\"#jedis\">#</a> Jedis</h4>\n<p>é¡¹ç›®åœ°å€ï¼š<span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL3JlZGlzL2plZGlz\">https://github.com/redis/jedis</span></p>\n<p><strong>åŸºæœ¬ä½¿ç”¨æ–¹å¼ï¼š</strong></p>\n<ol>\n<li>\n<p>æ·»åŠ ä¾èµ–ï¼š <code>redis.clients.jedis:4.1.1</code>  ã€‚</p>\n</li>\n<li>\n<p>å»ºç«‹è¿æ¥ï¼š</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">private</span> <span class=\"token class-name\">Jedis</span> jedis<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token annotation punctuation\">@BeforeEach</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">void</span> <span class=\"token function\">setUp</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    jedis <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Jedis</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"127.0.0.1\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">6379</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">// å»ºç«‹è¿æ¥</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    jedis<span class=\"token punctuation\">.</span><span class=\"token function\">auth</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"123456\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">// å¯†ç </span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    jedis<span class=\"token punctuation\">.</span><span class=\"token function\">select</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">// é€‰æ‹©åº“</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure></li>\n<li>\n<p>æµ‹è¯•ä½¿ç”¨ï¼š</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token annotation punctuation\">@Test</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">void</span> <span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token class-name\">String</span> result <span class=\"token operator\">=</span> jedis<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"name\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Chinmoku\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"result = \"</span> <span class=\"token operator\">+</span> result<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token class-name\">String</span> name <span class=\"token operator\">=</span> jedis<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"name\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"name = \"</span> <span class=\"token operator\">+</span> name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><blockquote>\n<p>ç±»ä¼¼åœ°ï¼Œå…¶ä»– redis ç›¸å…³æ“ä½œè°ƒç”¨çš„æ–¹æ³•åç§°ï¼Œä¹ŸåŸºæœ¬ä¸ redis å‘½ä»¤ç›¸åŒã€‚</p>\n</blockquote>\n</li>\n<li>\n<p>é‡Šæ”¾èµ„æºï¼š</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token annotation punctuation\">@AfterEach</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">void</span> <span class=\"token function\">tearDown</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>jedis <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        jedis<span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure></li>\n</ol>\n<p><strong>Jedis è¿æ¥æ± ï¼š</strong></p>\n<p>Jedis æœ¬èº«æ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„ï¼Œå¹¶ä¸”é¢‘ç¹åœ°åˆ›å»ºå’Œé”€æ¯è¿æ¥ä¼šäº§ç”Ÿæå¤§çš„æ€§èƒ½æ¶ˆè€—ï¼Œå› æ­¤åœ¨ä½¿ç”¨ Jedis çš„è¿‡ç¨‹ä¸­ï¼Œä¸æ¨èä½¿ç”¨ Jedis ç›´è¿ï¼Œè€Œå»ºè®®å®ç°è¿æ¥æ± ã€‚</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">JedisConnectionFactory</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">JedisPool</span> jedisPoll<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    </pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">static</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token class-name\">JedisPoolConfig</span> jedisPoolConfig <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">JedisPoolConfig</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        jedisPoolConfig<span class=\"token punctuation\">.</span><span class=\"token function\">setMaxTotal</span><span class=\"token punctuation\">(</span><span class=\"token number\">8</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">// æœ€å¤§è¿æ¥æ•°</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        jedisPoolConfig<span class=\"token punctuation\">.</span><span class=\"token function\">setMaxIdle</span><span class=\"token punctuation\">(</span><span class=\"token number\">8</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">// æœ€å¤§ç©ºé—²è¿æ¥æ•°</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        jedisPoolConfig<span class=\"token punctuation\">.</span><span class=\"token function\">setMinIdle</span><span class=\"token punctuation\">(</span><span class=\"token number\">8</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">// æœ€å°ç©ºé—²è¿æ¥æ•°</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        jedisPoolConfig<span class=\"token punctuation\">.</span><span class=\"token function\">setMaxWaitMillis</span><span class=\"token punctuation\">(</span><span class=\"token number\">200</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">// æœ€é•¿ç­‰å¾…æ—¶é—´</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        jedisPoll <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">JedisPool</span><span class=\"token punctuation\">(</span>jedisPoolConfig<span class=\"token punctuation\">,</span> <span class=\"token string\">\"127.0.0.1\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">6379</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"123456\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    </pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token class-name\">Jedis</span> <span class=\"token function\">getJedis</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token keyword\">return</span> jedisPool<span class=\"token punctuation\">.</span><span class=\"token function\">getResource</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h4 id=\"springdataredis\"><a class=\"anchor\" href=\"#springdataredis\">#</a> SpringDataRedis</h4>\n<p>SpringData æ˜¯ Sring ä¸­æ•°æ®æ“ä½œçš„æ¨¡å—ï¼ŒåŒ…å«å¯¹å„ç§æ•°æ®åº“çš„é›†æˆï¼Œå…¶ä¸­å¯¹ Redis çš„é›†æˆæ¨¡å—å³ä¸º SpringDataRedisï¼š</p>\n<ul>\n<li>æä¾›äº†å¯¹ä¸åŒ Redis å®¢æˆ·ç«¯çš„æ•´åˆï¼ˆLettuce å’Œ Jedisï¼‰ã€‚</li>\n<li>æä¾›äº† RedisTemplate ç»Ÿä¸€ API æ¥æ“ä½œ Redisã€‚</li>\n<li>æ”¯æŒ Redis çš„å‘å¸ƒè®¢é˜…æ¨¡å¼ã€‚</li>\n<li>æ”¯æŒ Redis çš„å“¨å…µæ¨¡å¼å’Œé›†ç¾¤æ¨¡å¼ã€‚</li>\n<li>æ”¯æŒåŸºäº Lettuce çš„å“åº”å¼ç¼–ç¨‹ã€‚</li>\n<li>æ”¯æŒåŸºäº JDKã€JSONã€å­—ç¬¦ä¸²ã€Spring å¯¹è±¡çš„æ•°æ®åºåˆ—å·åŠååºåˆ—åŒ–ã€‚</li>\n<li>æ”¯æŒåŸºäº Redis çš„ JDKCollection å®ç°ã€‚</li>\n</ul>\n<blockquote>\n<p>SpringDataRedis å®˜æ–¹æ–‡æ¡£ï¼š<span class=\"exturl\" data-url=\"aHR0cHM6Ly9zcHJpbmcuaW8vcHJvamVjdHMvc3ByaW5nLWRhdGEtcmVkaXM=\">https://spring.io/projects/spring-data-redis</span></p>\n</blockquote>\n<p>SpringDataRedis æä¾›äº† RedisTemplate å·¥å…·ç±»ï¼Œå…¶ä¸­å°è£…äº†å„ç§å¯¹ Redis çš„æ“ä½œï¼Œå¹¶ä¸”å°†ä¸åŒæ•°æ®ç±»å‹çš„æ“ä½œ API å°è£…åˆ°äº†ä¸åŒçš„ç±»å‹ä¸­ï¼š</p>\n<table>\n<thead>\n<tr>\n<th>API</th>\n<th>è¿”å›å€¼ç±»å‹</th>\n<th>è¯´æ˜</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>redisTemplate.opsForValue()</td>\n<td>valueOperations</td>\n<td>æ“ä½œ String ç±»å‹æ•°æ®</td>\n</tr>\n<tr>\n<td>redisTemplate.opsForHash()</td>\n<td>HashOperations</td>\n<td>æ“ä½œ Hash ç±»å‹æ•°æ®</td>\n</tr>\n<tr>\n<td>redisTemplate.opsForList()</td>\n<td>ListOperations</td>\n<td>æ“ä½œ List ç±»å‹æ•°æ®</td>\n</tr>\n<tr>\n<td>redisTemplate.opsForSet()</td>\n<td>SetOperations</td>\n<td>æ“ä½œ Set ç±»å‹æ•°æ®</td>\n</tr>\n<tr>\n<td>redisTemplate.opsForZSet()</td>\n<td>ZSetOperations</td>\n<td>æ“ä½œ SortedSet ç±»å‹æ•°æ®</td>\n</tr>\n<tr>\n<td>redisTemplate</td>\n<td></td>\n<td>é€šç”¨å‘½ä»¤</td>\n</tr>\n</tbody>\n</table>\n<p><strong>åŸºæœ¬ä½¿ç”¨æ–¹å¼ï¼š</strong></p>\n<ol>\n<li>\n<p>æ·»åŠ ä¾èµ–ï¼š</p>\n<ul>\n<li>Redis ä¾èµ–ï¼š <code>org.springframework.boot.spring-boot-starter-data-redis:2.6.2</code> ã€‚</li>\n<li>è¿æ¥æ± ä¾èµ–ï¼š <code>org.apache.commons.commons-pool2:2.11.1</code> ã€‚</li>\n</ul>\n</li>\n<li>\n<p>é…ç½®æ–‡ä»¶ï¼š</p>\n<figure class=\"highlight yaml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">spring</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token key atrule\">redis</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token key atrule\">host</span><span class=\"token punctuation\">:</span> 127.0.0.1</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token key atrule\">port</span><span class=\"token punctuation\">:</span> <span class=\"token number\">6379</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token key atrule\">password</span><span class=\"token punctuation\">:</span> <span class=\"token number\">123456</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token comment\"># é»˜è®¤ä½¿ç”¨ lettuceï¼Œå¦‚éœ€ä½¿ç”¨ jedisï¼Œéœ€å¼•å…¥å¯¹åº”ä¾èµ–</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token key atrule\">lettuce</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>      <span class=\"token key atrule\">pool</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token key atrule\">max-active</span><span class=\"token punctuation\">:</span> <span class=\"token number\">8</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token key atrule\">max-idle</span><span class=\"token punctuation\">:</span> <span class=\"token number\">8</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token key atrule\">min-idle</span><span class=\"token punctuation\">:</span> <span class=\"token number\">0</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token key atrule\">max-wait</span><span class=\"token punctuation\">:</span> <span class=\"token number\">100</span> <span class=\"token comment\"># è¿æ¥ç­‰å¾…æ—¶é—´</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token key atrule\">timeout</span><span class=\"token punctuation\">:</span> <span class=\"token number\">600</span> <span class=\"token comment\"># è¿æ¥è¶…æ—¶æ—¶é—´</span></pre></td></tr></table></figure></li>\n<li>\n<p>æ³¨å…¥ RedisTemplate å¹¶ä½¿ç”¨ï¼š</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token annotation punctuation\">@Autowired</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">private</span> <span class=\"token class-name\">RedisTemplate</span> redisTemplate<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token annotation punctuation\">@Test</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">void</span> <span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    redisTemplate<span class=\"token punctuation\">.</span><span class=\"token function\">opsForValue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"name\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"chinmoku\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">// æ’å…¥</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token class-name\">Object</span> name <span class=\"token operator\">=</span> redisTemplate<span class=\"token punctuation\">.</span><span class=\"token function\">opsForValue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"name\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">// è¯»å–</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"name = \"</span> <span class=\"token operator\">+</span> name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token comment\">// å­˜å‚¨å¯¹è±¡</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    redisTemplate<span class=\"token punctuation\">.</span><span class=\"token function\">opsForValue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"user:1\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">User</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"chinmoku\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token class-name\">User</span> user <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">User</span><span class=\"token punctuation\">)</span> redisTemplate<span class=\"token punctuation\">.</span><span class=\"token function\">opsForValue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"user:1\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"user = \"</span> <span class=\"token operator\">+</span> user<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure></li>\n</ol>\n<p><strong>SpringDataRedis åºåˆ—åŒ–æ–¹å¼ï¼š</strong></p>\n<p>SpringDataRedis å¯ä»¥æ¥æ”¶ä»»æ„ Object ä½œä¸ºå€¼å†™å…¥ Redisï¼Œä½†åœ¨å†™å…¥ä¹‹å‰éƒ½ä¼šå°†å…¶åºåˆ—åŒ–ä¸ºå­—èŠ‚å½¢å¼ï¼Œå¹¶ä¸”é»˜è®¤é‡‡ç”¨ JdkSerializationRedisSerializerï¼Œè¿™ä¼šå¯¼è‡´å¯è¯»æ€§å·®å’Œä¸å¿…è¦çš„å†…å­˜å ç”¨çš„é—®é¢˜ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹ SpringDataRedis è¿›è¡Œä¸ªæ€§åŒ–å®ç°ï¼š</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">/**</pre></td></tr><tr><td data-num=\"2\"></td><td><pre> * SpringDataRedis è‡ªå®šä¹‰åºåˆ—åŒ–æ–¹å¼</pre></td></tr><tr><td data-num=\"3\"></td><td><pre> */</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token annotation punctuation\">@Configuation</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">RedisConfig</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    </pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token annotation punctuation\">@Bean</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">RedisTemplate</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">Object</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">redisTemplate</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">RedisConnectionFactory</span> redisConnectionFactory<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">UnknownHostException</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token class-name\">RedisTemplate</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">Object</span><span class=\"token punctuation\">></span></span> redisTemplate <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">RedisTemplate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token comment\">// è®¾ç½®è¿æ¥å·¥å‚</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        redisTemplate<span class=\"token punctuation\">.</span><span class=\"token function\">setConnectionFactory</span><span class=\"token punctuation\">(</span>redisConnectionFactory<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token comment\">// è®¾ç½®åºåˆ—åŒ–å·¥å…·ï¼ˆæ³¨ï¼šä½¿ç”¨ json åºåˆ—åŒ–éœ€è¦å¼•å…¥ jackson-databind ä¾èµ–ï¼‰</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token class-name\">GenericJackson2JsonRedisSerializer</span> jsonRedisSerializer <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">GenericJackson2JsonRedisSerializer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        <span class=\"token comment\">//key å’Œ hashKey é‡‡ç”¨ string åºåˆ—åŒ–</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        redisTemplate<span class=\"token punctuation\">.</span><span class=\"token function\">setKeySerializer</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">RedisSerializer</span><span class=\"token punctuation\">.</span><span class=\"token function\">string</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        redisTemplate<span class=\"token punctuation\">.</span><span class=\"token function\">setHashKeySerializer</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">RedisSerializer</span><span class=\"token punctuation\">.</span><span class=\"token function\">string</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        <span class=\"token comment\">//value å’Œ hashValue é‡‡ç”¨ json åºåˆ—åŒ–</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        redisTemplate<span class=\"token punctuation\">.</span><span class=\"token function\">setValueSerializer</span><span class=\"token punctuation\">(</span>jsonRedisSerializer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>        redisTemplate<span class=\"token punctuation\">.</span><span class=\"token function\">setHashValueSerializer</span><span class=\"token punctuation\">(</span>jsonRedisSerializer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>        <span class=\"token keyword\">return</span> redisTemplate<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>å¦‚ä¸Šç¤ºä¾‹ï¼Œå½“å­˜å‚¨ Java å¯¹è±¡æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ JSON åºåˆ—åŒ–å™¨ï¼Œè‡ªåŠ¨å®ç°å¯¹è±¡çš„åºåˆ—åŒ–å’Œååºåˆ—åŒ–ï¼Œä½†è¿™ç§æ–¹å¼ä¼šåœ¨ Redis ä¸­é¢å¤–å­˜å‚¨ä¸€ä¸ª  <code>@class</code>  å­—æ®µï¼Œç”¨äºæŒ‡å®šåºåˆ—åŒ–å’Œååºåˆ—åŒ–å¯¹è±¡æ‰€å±çš„ç±»ï¼Œè¿™ä¹Ÿä¼šåœ¨ä¸€å®šç¨‹åº¦ä¸Šé€ æˆä¸å¿…è¦çš„ç©ºé—´æµªè´¹ã€‚</p>\n<p>ä¸ºäº†èŠ‚çœç©ºé—´ï¼Œåœ¨ç¼–ç è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸æ¨èåœ¨å­˜å‚¨æ•°æ®ä¹‹å‰ï¼Œæ‰‹åŠ¨è¿›è¡Œå¯¹è±¡çš„åºåˆ—åŒ–å¤„ç†ï¼Œç„¶åå†é€šè¿‡ String åºåˆ—åŒ–æ–¹å¼è¿›è¡Œå­˜å‚¨ï¼›å–å€¼æ—¶ï¼Œå†é€šè¿‡ç¨‹åºåˆ¤æ–­è¿›è¡Œååºåˆ—åŒ–ã€‚ä¸ºæ­¤ï¼Œå¯¹äº String ç±»å‹çš„æ•°æ®å­˜å‚¨ï¼ŒSpringDataRedis æä¾›äº†ä¸€ä¸ª StringRedisTemplate ç±»ï¼Œå®ƒé»˜è®¤å³é‡‡ç”¨ String åºåˆ—åŒ–æ–¹å¼ï¼š</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token annotation punctuation\">@Autowired</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">private</span> <span class=\"token class-name\">StringRedisTemplate</span> stringRedisTemplate<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\">// JSON å·¥å…·ï¼ˆä¹Ÿå¯ä»¥ä½¿ç”¨å…¶ä»–åºåˆ—åŒ–å·¥å…·ï¼Œå¦‚ fastjson ç­‰ï¼‰</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">private</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">ObjectMapper</span> mapper <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ObjectMapper</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token annotation punctuation\">@Test</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">void</span> <span class=\"token function\">testStringTemplate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">JsonProcessingException</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token class-name\">User</span> user <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">User</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"chinmoku\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token comment\">// æ‰‹åŠ¨åºåˆ—åŒ–</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token class-name\">String</span> json <span class=\"token operator\">=</span> mapper<span class=\"token punctuation\">.</span><span class=\"token function\">writeValueAsString</span><span class=\"token punctuation\">(</span>user<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    redisTemplate<span class=\"token punctuation\">.</span><span class=\"token function\">opsForValue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"user:1\"</span><span class=\"token punctuation\">,</span> json<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    </pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token class-name\">String</span> value <span class=\"token operator\">=</span> redisTemplate<span class=\"token punctuation\">.</span><span class=\"token function\">opsForValue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"user:1\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token class-name\">User</span> u <span class=\"token operator\">=</span> mapper<span class=\"token punctuation\">.</span><span class=\"token function\">readVal</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">,</span> <span class=\"token class-name\">User</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">// ååºåˆ—åŒ–</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"user = \"</span> <span class=\"token operator\">+</span> u<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p><strong>RedisTemplate æ“ä½œ Hashï¼š</strong></p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token annotation punctuation\">@Test</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">void</span> <span class=\"token function\">testHash</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    stringRedisTemplate<span class=\"token punctuation\">.</span><span class=\"token function\">opsForHash</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">put</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"user:2\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"name\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"zhangsan\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    stringRedisTemplate<span class=\"token punctuation\">.</span><span class=\"token function\">opsForHash</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">put</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"user:2\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"age\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"21\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token class-name\">Map</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Object</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">Object</span><span class=\"token punctuation\">></span></span> entries <span class=\"token operator\">=</span> stringRedisTemplate<span class=\"token punctuation\">.</span><span class=\"token function\">opsForHash</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">entries</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"user:2\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"entries = \"</span> <span class=\"token operator\">+</span> entries<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h3 id=\"ç¼“å­˜é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ\"><a class=\"anchor\" href=\"#ç¼“å­˜é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ\">#</a> ç¼“å­˜é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ</h3>\n<h4 id=\"ç¼“å­˜æ›´æ–°ç­–ç•¥\"><a class=\"anchor\" href=\"#ç¼“å­˜æ›´æ–°ç­–ç•¥\">#</a> ç¼“å­˜æ›´æ–°ç­–ç•¥</h4>\n<p>æ‰€è°“ç¼“å­˜ï¼Œå°±æ˜¯æ•°æ®äº¤æ¢çš„ç¼“å†²åŒºï¼Œæ˜¯å­˜å‚¨æ•°æ®çš„åœ°æ–¹ï¼Œä¸€èˆ¬è¯»å†™æ€§èƒ½è¾ƒé«˜ã€‚</p>\n<p>æ“ä½œç¼“å­˜å’Œæ•°æ®åº“æ—¶ï¼Œéœ€è¦è€ƒè™‘å¦‚ä¸‹ä¸‰ä¸ªé—®é¢˜ï¼š</p>\n<ol>\n<li>\n<p>æ›´æ–°æ•°æ®åº“æ—¶ï¼Œå¯¹äºç¼“å­˜æ•°æ®ï¼Œæ˜¯åº”å½“æ‰§è¡Œæ›´æ–°æ“ä½œè¿˜æ˜¯åˆ é™¤æ“ä½œï¼Ÿ</p>\n<ul>\n<li>æ›´æ–°ç¼“å­˜ï¼šæ¯æ¬¡æ›´æ–°æ•°æ®åº“éƒ½æ›´æ–°ç¼“å­˜ï¼Œå®¹æ˜“äº§ç”Ÿè¾ƒå¤šçš„æ— æ•ˆå†™æ“ä½œã€‚</li>\n<li>åˆ é™¤ç¼“å­˜ï¼šæ›´æ–°æ•°æ®åº“æ—¶ä½¿ç¼“å­˜å¤±æ•ˆï¼ŒæŸ¥è¯¢æ•°æ®åº“æ—¶å†æ›´æ–°ç¼“å­˜ï¼ˆæ¨èï¼‰ã€‚</li>\n</ul>\n</li>\n<li>\n<p>å¦‚ä½•ä¿è¯ç¼“å­˜å’Œæ•°æ®åº“æ“ä½œåŒæ—¶æˆåŠŸæˆ–åŒæ—¶å¤±è´¥ï¼Ÿ</p>\n<ul>\n<li>å•ç³»ç»Ÿç¯å¢ƒä¸‹ï¼Œéœ€è¦å°†ç¼“å­˜å’Œæ•°æ®åº“æ“ä½œæ”¾åœ¨åŒä¸€ä¸ªäº‹åŠ¡ä¸­ã€‚</li>\n<li>åˆ†å¸ƒå¼ç³»ç»Ÿç¯å¢ƒä¸‹ï¼Œå¯ä»¥åˆ©ç”¨ TCC ç­‰åˆ†å¸ƒå¼äº‹åŠ¡æ–¹æ¡ˆã€‚</li>\n</ul>\n</li>\n<li>\n<p>æ‰§è¡Œæ•°æ®æ“ä½œæ—¶ï¼Œå…ˆæ“ä½œç¼“å­˜è¿˜æ˜¯æ•°æ®åº“ï¼Ÿ</p>\n<p><img data-src=\"https://img.xfc-exclave.com/2022/03/d1f36fa6ee35a9c1a98578527399f1e21647090860.png\" alt=\"redis-cache\" /></p>\n<p>å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œä¸è®ºæ˜¯å…ˆæ“ä½œç¼“å­˜è¿˜æ˜¯å…ˆæ“ä½œæ•°æ®åº“ï¼Œåœ¨å¹¶å‘ç¯å¢ƒä¸‹ï¼Œéƒ½æœ‰å¯èƒ½å‡ºç°æ•°æ®ä¸ä¸€è‡´é—®é¢˜ã€‚ä½†é€šå¸¸è€Œè¨€ï¼Œç¼“å­˜æ“ä½œæ•ˆç‡è¿œé«˜äºæ•°æ®åº“æ“ä½œæ•ˆç‡ï¼Œå› æ­¤å…ˆæ“ä½œæ•°æ®åº“ï¼Œå†åˆ é™¤ç¼“å­˜å‡ºç°æ•°æ®ä¸ä¸€è‡´çš„æ¦‚ç‡è¾ƒä½ï¼Œä½†ä¹Ÿä»…é™äºæ¦‚ç‡è¾ƒä½è€Œå·²ï¼Œä»å­˜åœ¨æ•°æ®ä¸ä¸€è‡´çš„é£é™©ã€‚</p>\n</li>\n</ol>\n<p><strong>æ‰©å±•ï¼š</strong></p>\n<p>åŸºäºæ•°æ®åº“ä¸ç¼“å­˜ä¹‹é—´çš„æ•°æ®ä¸ä¸€è‡´é—®é¢˜ï¼Œç›®å‰æœ‰å¦‚ä¸‹å‡ ç§è¾ƒä¸ºå¸¸è§çš„è§£å†³æ–¹æ¡ˆï¼š</p>\n<ol>\n<li>\n<p>å»¶æ—¶åŒåˆ </p>\n<p>æ‰€è°“çš„å»¶æ—¶åŒåˆ ï¼Œå¯ä»¥é€šè¿‡å¦‚ä¸‹ä¼ªä»£ç è¿›è¡Œè¡¨ç¤ºï¼š</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">update</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> key<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Object</span> data<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    redis<span class=\"token punctuation\">.</span><span class=\"token function\">delKey</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    db<span class=\"token punctuation\">.</span><span class=\"token function\">update</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token class-name\">Thread</span><span class=\"token punctuation\">.</span><span class=\"token function\">sleep</span><span class=\"token punctuation\">(</span><span class=\"token number\">500</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    redis<span class=\"token punctuation\">.</span><span class=\"token function\">delKey</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>è¿™é‡Œçš„å»¶æ—¶ï¼Œä¸»è¦æ˜¯ä¸ºäº†ç¡®ä¿åœ¨è¿›è¡Œç¬¬äºŒæ¬¡åˆ é™¤ä¹‹å‰ï¼Œå…¶ä»–äº¤å‰çº¿ç¨‹å·²ç»å®Œæˆæ•°æ®åº“æŸ¥è¯¢å’Œæ›´æ–°ç¼“å­˜æ“ä½œï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>\n<p><img data-src=\"https://img.xfc-exclave.com/2022/03/a3ba9a6e4004b2806121e1c35cb7be771647095968.png\" alt=\"redis-cache-sleep\" /></p>\n<p>åœ¨å»¶æ—¶åŒåˆ è¿‡ç¨‹ä¸­ï¼Œå¦‚æœå­˜åœ¨å…¶ä»–çº¿ç¨‹å¯¹ç¼“å­˜è¿›è¡Œæ›´æ–°ï¼Œé‚£ä¹ˆè¯¥æ›´æ–°ç¼“å­˜çš„çº¿ç¨‹æ‰€å¾—æ•°æ®ä»ä¸ºæ—§æ•°æ®ï¼Œä½†æ–°çš„çº¿ç¨‹è®¿é—®æ—¶ï¼Œèƒ½ä¿è¯å¾—åˆ°çš„æ•°æ®æ˜¯æ–°çš„æ•°æ®ã€‚</p>\n</li>\n<li>\n<p>å¼‚æ­¥æ›´æ–°ç¼“å­˜</p>\n<p>TODO</p>\n<blockquote>\n<p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œåœ¨ä¿è¯ Redis æ€§èƒ½çš„å‰æä¸‹ï¼Œæ•°æ®åº“ä¸ç¼“å­˜ä¹‹é—´çš„æ•°æ®å…¶å®æ˜¯æ— æ³•ä¿è¯ç»å¯¹ä¸€è‡´çš„ï¼Œæˆ‘ä»¬é€šå¸¸æ‰€è¯´çš„ç¼“å­˜ä¸€è‡´æ€§ï¼Œå¾€å¾€éœ€è¦å°†å®é™…ä¸šåŠ¡åœºæ™¯çº³å…¥è€ƒè™‘èŒƒå›´ï¼Œè¿›è¡Œç»¼åˆè€ƒè™‘ã€‚</p>\n</blockquote>\n</li>\n</ol>\n<h4 id=\"ç¼“å­˜ç©¿é€\"><a class=\"anchor\" href=\"#ç¼“å­˜ç©¿é€\">#</a> ç¼“å­˜ç©¿é€</h4>\n<p>ç¼“å­˜ç©¿é€æ˜¯æŒ‡å®¢æˆ·ç«¯è¯·æ±‚çš„æ•°æ®åœ¨ç¼“å­˜å’Œæ•°æ®åº“ä¸­å‡ä¸å­˜åœ¨ï¼Œè¿™æ ·å°±ä½¿å¾—ç¼“å­˜æ°¸è¿œæ— æ³•ç”Ÿæ•ˆï¼Œå¯¼è‡´è¯·æ±‚å§‹ç»ˆéƒ½ä¼šç›´æ¥è®¿é—®æ•°æ®åº“ï¼Œä»è€Œå½±å“æœåŠ¡æ€§èƒ½ã€‚</p>\n<p>é’ˆå¯¹ç¼“å­˜ç©¿é€ï¼Œæœ‰å¦‚ä¸‹ä¸¤ç§å¸¸è§è§£å†³æ–¹æ¡ˆï¼š</p>\n<ol>\n<li>\n<p>ç¼“å­˜ç©ºå¯¹è±¡ï¼šå³å½“æ•°æ®åº“ä¸­ä¸å­˜åœ¨è¯¥æ•°æ®æ—¶ï¼Œåˆ™å‘ç¼“å­˜ä¸­å­˜å…¥ç©ºå¯¹è±¡ï¼ŒåŒæ—¶è®¾ç½®è¾ƒçŸ­çš„è¿‡æœŸæ—¶é—´ã€‚</p>\n<p>ä¼˜ç‚¹ï¼šå®ç°ç®€å•ï¼Œæ–¹ä¾¿ç»´æŠ¤ã€‚</p>\n<p>ç¼ºç‚¹ï¼š</p>\n<ul>\n<li>å ç”¨ä¸å¿…è¦çš„å†…å­˜ã€‚</li>\n<li>å¯èƒ½é€ æˆçŸ­æœŸæ•°æ®ä¸ä¸€è‡´ï¼ˆé’ˆå¯¹è¿™ä¸€ç¼ºç‚¹ï¼Œå¯ä»¥åœ¨æ›´æ–°æ•°æ®æ—¶åŒæ­¥æ›´æ–°åˆ°ç¼“å­˜ï¼‰ã€‚</li>\n</ul>\n</li>\n<li>\n<p>å¸ƒéš†è¿‡æ»¤</p>\n<p>ç›¸å…³ä»‹ç»å¯æŸ¥é˜…<span class=\"exturl\" data-url=\"aHR0cHM6Ly9iYWlrZS5iYWlkdS5jb20vaXRlbS8lRTUlQjglODMlRTklOUElODYlRTglQkYlODclRTYlQkIlQTQlRTUlOTklQTg=\">å¸ƒéš†è¿‡æ»¤å™¨_ç™¾åº¦ç™¾ç§‘</span>ã€‚</p>\n<p>ä¼˜ç‚¹ï¼šå†…å­˜å ç”¨å°‘ï¼Œæ²¡æœ‰å¤šä½™çš„ keyã€‚</p>\n<p>ç¼ºç‚¹ï¼š</p>\n<ul>\n<li>å®ç°å¤æ‚ã€‚</li>\n<li>å­˜åœ¨è¯¯åˆ¤çš„å¯èƒ½ã€‚</li>\n</ul>\n</li>\n</ol>\n<blockquote>\n<p>é™¤æ­¤ä¹‹å¤–ï¼Œåœ¨ä¸šåŠ¡ä¸Šæˆ‘ä»¬ä¹Ÿåº”å½“åšç›¸åº”çš„æ§åˆ¶ï¼Œä¾‹å¦‚å¢åŠ  ID å¤æ‚åº¦ã€åšå¥½æ•°æ®çš„åŸºç¡€æ ¼å¼æ ¡éªŒã€åŠ å¼ºç”¨æˆ·æƒé™æ ¡éªŒã€åšå¥½çƒ­ç‚¹æ•°æ®é™æµç­‰ã€‚</p>\n</blockquote>\n<h4 id=\"ç¼“å­˜é›ªå´©\"><a class=\"anchor\" href=\"#ç¼“å­˜é›ªå´©\">#</a> ç¼“å­˜é›ªå´©</h4>\n<p>ç¼“å­˜é›ªå´©æ˜¯æŒ‡åœ¨åŒä¸€æ—¶æ®µå†…çš„ç¼“å­˜ key åŒæ—¶å¤±æ•ˆæˆ–è€… Redis æœåŠ¡å®•æœºï¼Œå¯¼è‡´å¤§é‡è¯·æ±‚ç›´æ¥åˆ°è¾¾æ•°æ®åº“ï¼Œç»™æ•°æ®åº“å¸¦æ¥å·¨å¤§å‹åŠ›ã€‚</p>\n<p>é’ˆå¯¹ç¼“å­˜é›ªå´©ï¼Œæœ‰å¦‚ä¸‹å‡ ç§å¸¸è§è§£å†³æ–¹æ¡ˆï¼š</p>\n<ol>\n<li>ç»™ä¸åŒ key çš„ TTL æ·»åŠ éšæœºå€¼ï¼Œå°½é‡åˆ†æ•£ç¼“å­˜çš„è¿‡æœŸæ—¶é—´ã€‚</li>\n<li>åˆ©ç”¨ Redis é›†ç¾¤æé«˜æœåŠ¡çš„å¯ç”¨æ€§ï¼ˆä»¥è§£å†³ Redis æœåŠ¡å®•æœºé—®é¢˜ï¼‰ã€‚</li>\n<li>ç»™ç¼“å­˜æœåŠ¡æ·»åŠ é™çº§é™æµç­–ç•¥ï¼Œåšå¥½æœåŠ¡å®¹é”™ã€‚</li>\n<li>ç»™ä¸šåŠ¡æ·»åŠ å¤šçº§ç¼“å­˜ã€‚</li>\n</ol>\n<h4 id=\"ç¼“å­˜å‡»ç©¿\"><a class=\"anchor\" href=\"#ç¼“å­˜å‡»ç©¿\">#</a> ç¼“å­˜å‡»ç©¿</h4>\n<p>ç¼“å­˜å‡»ç©¿ä¹Ÿè¢«ç§°ä¸ºçƒ­ç‚¹ key é—®é¢˜ï¼Œå°±æ˜¯ä¸€ä¸ªè¢«é«˜å¹¶å‘è®¿é—®å¹¶ä¸”ç¼“å­˜é‡å»ºä¸šåŠ¡è¾ƒä¸ºå¤æ‚çš„ key çªç„¶å¤±æ•ˆï¼Œå¤§é‡è¯·æ±‚ç¬é—´è®¿é—®åˆ°æ•°æ®åº“ï¼Œå¯¼è‡´æ•°æ®åº“æ‰¿å—å·¨å¤§å‹åŠ›ã€‚</p>\n<p>é’ˆå¯¹ç¼“å­˜å‡»ç©¿ï¼Œæœ‰å¦‚ä¸‹å‡ ç§å¸¸è§è§£å†³æ–¹æ¡ˆï¼š</p>\n<ol>\n<li>\n<p>äº’æ–¥é”</p>\n<p>é‡å»ºæ•°æ®æ—¶ï¼Œè¿›è¡ŒåŠ é”ï¼Œè·å–åˆ°é”çš„çº¿ç¨‹æ‰è¿›è¡Œæ•°æ®é‡å»ºï¼Œå…¶ä»–çº¿ç¨‹è¿›è¡Œä¸€å®šçš„ç­‰å¾…å’Œé‡è¯•ã€‚è¿™ç§æ–¹æ¡ˆç”±äºéœ€è¦çº¿ç¨‹ç­‰å¾…ï¼Œæ€§èƒ½ç›¸å¯¹è¾ƒå·®ã€‚</p>\n</li>\n<li>\n<p>é€»è¾‘è¿‡æœŸ</p>\n<p>ä¸é‡‡ç”¨ Redis æä¾›çš„ TTLï¼Œè€Œæ˜¯è‡ªå®šä¹‰ä¸€ä¸ªé€»è¾‘è¿‡æœŸå­—æ®µç”¨äºè®°å½•è¿‡æœŸæ—¶é—´ï¼Œå½“ç¨‹åºé€šè¿‡è¯¥å­—æ®µåˆ¤æ–­æ•°æ®è¿‡æœŸæ—¶ï¼Œåˆ™ä½¿ç”¨äº’æ–¥é”å¼€å¯ä¸€ä¸ªæ–°çš„çº¿ç¨‹ï¼Œç”¨è¯¥çº¿ç¨‹æ¥æ‰§è¡Œæ›´æ–°ç¼“å­˜æ•°æ®æ“ä½œï¼Œæ›´æ–°å®Œæ•°æ®åï¼Œé‡Šæ”¾é”ã€‚å…¶ä»–æœªè·å–åˆ°äº’æ–¥é”æ—¶ï¼Œç›´æ¥è¿”å›ç¼“å­˜ä¸­çš„æ—§æ•°æ®ã€‚</p>\n</li>\n</ol>\n<h4 id=\"ä»£ç å®ç°\"><a class=\"anchor\" href=\"#ä»£ç å®ç°\">#</a> ä»£ç å®ç°</h4>\n<blockquote>\n<p>ä¸ºäº†æ›´åŠ æ–¹ä¾¿å¼€å‘è¿‡ç¨‹ä¸­ï¼Œå¯¹è§£å†³ç¼“å­˜ç©¿é€å’Œç¼“å­˜å‡»ç©¿ç­‰é—®é¢˜æ•´ç†æ€è·¯ï¼Œæ­¤å¤„å¼•ç”¨ä¸€ä»½é»‘é©¬æ•™å­¦ç¼–å†™çš„ç¤ºä¾‹ä»£ç ï¼Œ<span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRlZS5jb20vaHV5aTYxMi9obS1kaWFucGluZy9ibG9iL21hc3Rlci9zcmMvbWFpbi9qYXZhL2NvbS9obWRwL3V0aWxzL0NhY2hlQ2xpZW50LmphdmE=\">ç‚¹å‡»æ­¤å¤„</span>å¯ä»¥æŸ¥çœ‹æºä»£ç ä½ç½®ã€‚</p>\n</blockquote>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token annotation punctuation\">@Slf4j</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token annotation punctuation\">@Component</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">CacheClient</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">StringRedisTemplate</span> stringRedisTemplate<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">ExecutorService</span> CACHE_REBUILD_EXECUTOR <span class=\"token operator\">=</span> <span class=\"token class-name\">Executors</span><span class=\"token punctuation\">.</span><span class=\"token function\">newFixedThreadPool</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">CacheClient</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">StringRedisTemplate</span> stringRedisTemplate<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>stringRedisTemplate <span class=\"token operator\">=</span> stringRedisTemplate<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">set</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> key<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Object</span> value<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Long</span> time<span class=\"token punctuation\">,</span> <span class=\"token class-name\">TimeUnit</span> unit<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        stringRedisTemplate<span class=\"token punctuation\">.</span><span class=\"token function\">opsForValue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">,</span> <span class=\"token class-name\">JSONUtil</span><span class=\"token punctuation\">.</span><span class=\"token function\">toJsonStr</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> time<span class=\"token punctuation\">,</span> unit<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">setWithLogicalExpire</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> key<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Object</span> value<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Long</span> time<span class=\"token punctuation\">,</span> <span class=\"token class-name\">TimeUnit</span> unit<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        <span class=\"token comment\">// è®¾ç½®é€»è¾‘è¿‡æœŸ</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        <span class=\"token class-name\">RedisData</span> redisData <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">RedisData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>        redisData<span class=\"token punctuation\">.</span><span class=\"token function\">setData</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>        redisData<span class=\"token punctuation\">.</span><span class=\"token function\">setExpireTime</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">LocalDateTime</span><span class=\"token punctuation\">.</span><span class=\"token function\">now</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">plusSeconds</span><span class=\"token punctuation\">(</span>unit<span class=\"token punctuation\">.</span><span class=\"token function\">toSeconds</span><span class=\"token punctuation\">(</span>time<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>        <span class=\"token comment\">// å†™å…¥ Redis</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>        stringRedisTemplate<span class=\"token punctuation\">.</span><span class=\"token function\">opsForValue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">,</span> <span class=\"token class-name\">JSONUtil</span><span class=\"token punctuation\">.</span><span class=\"token function\">toJsonStr</span><span class=\"token punctuation\">(</span>redisData<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">R</span><span class=\"token punctuation\">,</span>ID<span class=\"token punctuation\">></span></span> <span class=\"token class-name\">R</span> <span class=\"token function\">queryWithPassThrough</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> keyPrefix<span class=\"token punctuation\">,</span> <span class=\"token class-name\">ID</span> id<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Class</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">R</span><span class=\"token punctuation\">></span></span> type<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Function</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span>ID<span class=\"token punctuation\">,</span> <span class=\"token class-name\">R</span><span class=\"token punctuation\">></span></span> dbFallback<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Long</span> time<span class=\"token punctuation\">,</span> <span class=\"token class-name\">TimeUnit</span> unit<span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>        <span class=\"token class-name\">String</span> key <span class=\"token operator\">=</span> keyPrefix <span class=\"token operator\">+</span> id<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>        <span class=\"token comment\">// 1. ä» redis æŸ¥è¯¢å•†é“ºç¼“å­˜</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>        <span class=\"token class-name\">String</span> json <span class=\"token operator\">=</span> stringRedisTemplate<span class=\"token punctuation\">.</span><span class=\"token function\">opsForValue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>        <span class=\"token comment\">// 2. åˆ¤æ–­æ˜¯å¦å­˜åœ¨</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">StrUtil</span><span class=\"token punctuation\">.</span><span class=\"token function\">isNotBlank</span><span class=\"token punctuation\">(</span>json<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>            <span class=\"token comment\">// 3. å­˜åœ¨ï¼Œç›´æ¥è¿”å›</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>            <span class=\"token keyword\">return</span> <span class=\"token class-name\">JSONUtil</span><span class=\"token punctuation\">.</span><span class=\"token function\">toBean</span><span class=\"token punctuation\">(</span>json<span class=\"token punctuation\">,</span> type<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>        <span class=\"token comment\">// åˆ¤æ–­å‘½ä¸­çš„æ˜¯å¦æ˜¯ç©ºå€¼</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>json <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>            <span class=\"token comment\">// è¿”å›ä¸€ä¸ªé”™è¯¯ä¿¡æ¯</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>            <span class=\"token keyword\">return</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>        <span class=\"token comment\">// 4. ä¸å­˜åœ¨ï¼Œæ ¹æ® id æŸ¥è¯¢æ•°æ®åº“</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>        <span class=\"token class-name\">R</span> r <span class=\"token operator\">=</span> dbFallback<span class=\"token punctuation\">.</span><span class=\"token function\">apply</span><span class=\"token punctuation\">(</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>        <span class=\"token comment\">// 5. ä¸å­˜åœ¨ï¼Œè¿”å›é”™è¯¯</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>r <span class=\"token operator\">==</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre>            <span class=\"token comment\">// å°†ç©ºå€¼å†™å…¥ redis</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre>            stringRedisTemplate<span class=\"token punctuation\">.</span><span class=\"token function\">opsForValue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">,</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span> CACHE_NULL_TTL<span class=\"token punctuation\">,</span> <span class=\"token class-name\">TimeUnit</span><span class=\"token punctuation\">.</span>MINUTES<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre>            <span class=\"token comment\">// è¿”å›é”™è¯¯ä¿¡æ¯</span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre>            <span class=\"token keyword\">return</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre>        <span class=\"token comment\">// 6. å­˜åœ¨ï¼Œå†™å…¥ redis</span></pre></td></tr><tr><td data-num=\"51\"></td><td><pre>        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">,</span> r<span class=\"token punctuation\">,</span> time<span class=\"token punctuation\">,</span> unit<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"52\"></td><td><pre>        <span class=\"token keyword\">return</span> r<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"53\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"54\"></td><td><pre></pre></td></tr><tr><td data-num=\"55\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">R</span><span class=\"token punctuation\">,</span> ID<span class=\"token punctuation\">></span></span> <span class=\"token class-name\">R</span> <span class=\"token function\">queryWithLogicalExpire</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> keyPrefix<span class=\"token punctuation\">,</span> <span class=\"token class-name\">ID</span> id<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Class</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">R</span><span class=\"token punctuation\">></span></span> type<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Function</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span>ID<span class=\"token punctuation\">,</span> <span class=\"token class-name\">R</span><span class=\"token punctuation\">></span></span> dbFallback<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Long</span> time<span class=\"token punctuation\">,</span> <span class=\"token class-name\">TimeUnit</span> unit<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"56\"></td><td><pre>        <span class=\"token class-name\">String</span> key <span class=\"token operator\">=</span> keyPrefix <span class=\"token operator\">+</span> id<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"57\"></td><td><pre>        <span class=\"token comment\">// 1. ä» redis æŸ¥è¯¢å•†é“ºç¼“å­˜</span></pre></td></tr><tr><td data-num=\"58\"></td><td><pre>        <span class=\"token class-name\">String</span> json <span class=\"token operator\">=</span> stringRedisTemplate<span class=\"token punctuation\">.</span><span class=\"token function\">opsForValue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"59\"></td><td><pre>        <span class=\"token comment\">// 2. åˆ¤æ–­æ˜¯å¦å­˜åœ¨</span></pre></td></tr><tr><td data-num=\"60\"></td><td><pre>        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">StrUtil</span><span class=\"token punctuation\">.</span><span class=\"token function\">isBlank</span><span class=\"token punctuation\">(</span>json<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"61\"></td><td><pre>            <span class=\"token comment\">// 3. å­˜åœ¨ï¼Œç›´æ¥è¿”å›</span></pre></td></tr><tr><td data-num=\"62\"></td><td><pre>            <span class=\"token keyword\">return</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"63\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"64\"></td><td><pre>        <span class=\"token comment\">// 4. å‘½ä¸­ï¼Œéœ€è¦å…ˆæŠŠ json ååºåˆ—åŒ–ä¸ºå¯¹è±¡</span></pre></td></tr><tr><td data-num=\"65\"></td><td><pre>        <span class=\"token class-name\">RedisData</span> redisData <span class=\"token operator\">=</span> <span class=\"token class-name\">JSONUtil</span><span class=\"token punctuation\">.</span><span class=\"token function\">toBean</span><span class=\"token punctuation\">(</span>json<span class=\"token punctuation\">,</span> <span class=\"token class-name\">RedisData</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"66\"></td><td><pre>        <span class=\"token class-name\">R</span> r <span class=\"token operator\">=</span> <span class=\"token class-name\">JSONUtil</span><span class=\"token punctuation\">.</span><span class=\"token function\">toBean</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">JSONObject</span><span class=\"token punctuation\">)</span> redisData<span class=\"token punctuation\">.</span><span class=\"token function\">getData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> type<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"67\"></td><td><pre>        <span class=\"token class-name\">LocalDateTime</span> expireTime <span class=\"token operator\">=</span> redisData<span class=\"token punctuation\">.</span><span class=\"token function\">getExpireTime</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"68\"></td><td><pre>        <span class=\"token comment\">// 5. åˆ¤æ–­æ˜¯å¦è¿‡æœŸ</span></pre></td></tr><tr><td data-num=\"69\"></td><td><pre>        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>expireTime<span class=\"token punctuation\">.</span><span class=\"token function\">isAfter</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">LocalDateTime</span><span class=\"token punctuation\">.</span><span class=\"token function\">now</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"70\"></td><td><pre>            <span class=\"token comment\">// 5.1. æœªè¿‡æœŸï¼Œç›´æ¥è¿”å›åº—é“ºä¿¡æ¯</span></pre></td></tr><tr><td data-num=\"71\"></td><td><pre>            <span class=\"token keyword\">return</span> r<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"72\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"73\"></td><td><pre>        <span class=\"token comment\">// 5.2. å·²è¿‡æœŸï¼Œéœ€è¦ç¼“å­˜é‡å»º</span></pre></td></tr><tr><td data-num=\"74\"></td><td><pre>        <span class=\"token comment\">// 6. ç¼“å­˜é‡å»º</span></pre></td></tr><tr><td data-num=\"75\"></td><td><pre>        <span class=\"token comment\">// 6.1. è·å–äº’æ–¥é”</span></pre></td></tr><tr><td data-num=\"76\"></td><td><pre>        <span class=\"token class-name\">String</span> lockKey <span class=\"token operator\">=</span> LOCK_SHOP_KEY <span class=\"token operator\">+</span> id<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"77\"></td><td><pre>        <span class=\"token keyword\">boolean</span> isLock <span class=\"token operator\">=</span> <span class=\"token function\">tryLock</span><span class=\"token punctuation\">(</span>lockKey<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"78\"></td><td><pre>        <span class=\"token comment\">// 6.2. åˆ¤æ–­æ˜¯å¦è·å–é”æˆåŠŸ</span></pre></td></tr><tr><td data-num=\"79\"></td><td><pre>        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>isLock<span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"80\"></td><td><pre>            <span class=\"token comment\">// 6.3. æˆåŠŸï¼Œå¼€å¯ç‹¬ç«‹çº¿ç¨‹ï¼Œå®ç°ç¼“å­˜é‡å»º</span></pre></td></tr><tr><td data-num=\"81\"></td><td><pre>            CACHE_REBUILD_EXECUTOR<span class=\"token punctuation\">.</span><span class=\"token function\">submit</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"82\"></td><td><pre>                <span class=\"token keyword\">try</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"83\"></td><td><pre>                    <span class=\"token comment\">// æŸ¥è¯¢æ•°æ®åº“</span></pre></td></tr><tr><td data-num=\"84\"></td><td><pre>                    <span class=\"token class-name\">R</span> newR <span class=\"token operator\">=</span> dbFallback<span class=\"token punctuation\">.</span><span class=\"token function\">apply</span><span class=\"token punctuation\">(</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"85\"></td><td><pre>                    <span class=\"token comment\">// é‡å»ºç¼“å­˜</span></pre></td></tr><tr><td data-num=\"86\"></td><td><pre>                    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setWithLogicalExpire</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">,</span> newR<span class=\"token punctuation\">,</span> time<span class=\"token punctuation\">,</span> unit<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"87\"></td><td><pre>                <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Exception</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"88\"></td><td><pre>                    <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">RuntimeException</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"89\"></td><td><pre>                <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">finally</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"90\"></td><td><pre>                    <span class=\"token comment\">// é‡Šæ”¾é”</span></pre></td></tr><tr><td data-num=\"91\"></td><td><pre>                    <span class=\"token function\">unlock</span><span class=\"token punctuation\">(</span>lockKey<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"92\"></td><td><pre>                <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"93\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"94\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"95\"></td><td><pre>        <span class=\"token comment\">// 6.4. è¿”å›è¿‡æœŸçš„å•†é“ºä¿¡æ¯</span></pre></td></tr><tr><td data-num=\"96\"></td><td><pre>        <span class=\"token keyword\">return</span> r<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"97\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"98\"></td><td><pre></pre></td></tr><tr><td data-num=\"99\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">R</span><span class=\"token punctuation\">,</span> ID<span class=\"token punctuation\">></span></span> <span class=\"token class-name\">R</span> <span class=\"token function\">queryWithMutex</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> keyPrefix<span class=\"token punctuation\">,</span> <span class=\"token class-name\">ID</span> id<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Class</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">R</span><span class=\"token punctuation\">></span></span> type<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Function</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span>ID<span class=\"token punctuation\">,</span> <span class=\"token class-name\">R</span><span class=\"token punctuation\">></span></span> dbFallback<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Long</span> time<span class=\"token punctuation\">,</span> <span class=\"token class-name\">TimeUnit</span> unit<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"100\"></td><td><pre>        <span class=\"token class-name\">String</span> key <span class=\"token operator\">=</span> keyPrefix <span class=\"token operator\">+</span> id<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"101\"></td><td><pre>        <span class=\"token comment\">// 1. ä» redis æŸ¥è¯¢å•†é“ºç¼“å­˜</span></pre></td></tr><tr><td data-num=\"102\"></td><td><pre>        <span class=\"token class-name\">String</span> shopJson <span class=\"token operator\">=</span> stringRedisTemplate<span class=\"token punctuation\">.</span><span class=\"token function\">opsForValue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"103\"></td><td><pre>        <span class=\"token comment\">// 2. åˆ¤æ–­æ˜¯å¦å­˜åœ¨</span></pre></td></tr><tr><td data-num=\"104\"></td><td><pre>        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">StrUtil</span><span class=\"token punctuation\">.</span><span class=\"token function\">isNotBlank</span><span class=\"token punctuation\">(</span>shopJson<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"105\"></td><td><pre>            <span class=\"token comment\">// 3. å­˜åœ¨ï¼Œç›´æ¥è¿”å›</span></pre></td></tr><tr><td data-num=\"106\"></td><td><pre>            <span class=\"token keyword\">return</span> <span class=\"token class-name\">JSONUtil</span><span class=\"token punctuation\">.</span><span class=\"token function\">toBean</span><span class=\"token punctuation\">(</span>shopJson<span class=\"token punctuation\">,</span> type<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"107\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"108\"></td><td><pre>        <span class=\"token comment\">// åˆ¤æ–­å‘½ä¸­çš„æ˜¯å¦æ˜¯ç©ºå€¼</span></pre></td></tr><tr><td data-num=\"109\"></td><td><pre>        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>shopJson <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"110\"></td><td><pre>            <span class=\"token comment\">// è¿”å›ä¸€ä¸ªé”™è¯¯ä¿¡æ¯</span></pre></td></tr><tr><td data-num=\"111\"></td><td><pre>            <span class=\"token keyword\">return</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"112\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"113\"></td><td><pre></pre></td></tr><tr><td data-num=\"114\"></td><td><pre>        <span class=\"token comment\">// 4. å®ç°ç¼“å­˜é‡å»º</span></pre></td></tr><tr><td data-num=\"115\"></td><td><pre>        <span class=\"token comment\">// 4.1. è·å–äº’æ–¥é”</span></pre></td></tr><tr><td data-num=\"116\"></td><td><pre>        <span class=\"token class-name\">String</span> lockKey <span class=\"token operator\">=</span> LOCK_SHOP_KEY <span class=\"token operator\">+</span> id<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"117\"></td><td><pre>        <span class=\"token class-name\">R</span> r <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"118\"></td><td><pre>        <span class=\"token keyword\">try</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"119\"></td><td><pre>            <span class=\"token keyword\">boolean</span> isLock <span class=\"token operator\">=</span> <span class=\"token function\">tryLock</span><span class=\"token punctuation\">(</span>lockKey<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"120\"></td><td><pre>            <span class=\"token comment\">// 4.2. åˆ¤æ–­æ˜¯å¦è·å–æˆåŠŸ</span></pre></td></tr><tr><td data-num=\"121\"></td><td><pre>            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>isLock<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"122\"></td><td><pre>                <span class=\"token comment\">// 4.3. è·å–é”å¤±è´¥ï¼Œä¼‘çœ å¹¶é‡è¯•</span></pre></td></tr><tr><td data-num=\"123\"></td><td><pre>                <span class=\"token class-name\">Thread</span><span class=\"token punctuation\">.</span><span class=\"token function\">sleep</span><span class=\"token punctuation\">(</span><span class=\"token number\">50</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"124\"></td><td><pre>                <span class=\"token keyword\">return</span> <span class=\"token function\">queryWithMutex</span><span class=\"token punctuation\">(</span>keyPrefix<span class=\"token punctuation\">,</span> id<span class=\"token punctuation\">,</span> type<span class=\"token punctuation\">,</span> dbFallback<span class=\"token punctuation\">,</span> time<span class=\"token punctuation\">,</span> unit<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"125\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"126\"></td><td><pre>            <span class=\"token comment\">// 4.4. è·å–é”æˆåŠŸï¼Œæ ¹æ® id æŸ¥è¯¢æ•°æ®åº“</span></pre></td></tr><tr><td data-num=\"127\"></td><td><pre>            r <span class=\"token operator\">=</span> dbFallback<span class=\"token punctuation\">.</span><span class=\"token function\">apply</span><span class=\"token punctuation\">(</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"128\"></td><td><pre>            <span class=\"token comment\">// 5. ä¸å­˜åœ¨ï¼Œè¿”å›é”™è¯¯</span></pre></td></tr><tr><td data-num=\"129\"></td><td><pre>            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>r <span class=\"token operator\">==</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"130\"></td><td><pre>                <span class=\"token comment\">// å°†ç©ºå€¼å†™å…¥ redis</span></pre></td></tr><tr><td data-num=\"131\"></td><td><pre>                stringRedisTemplate<span class=\"token punctuation\">.</span><span class=\"token function\">opsForValue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">,</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span> CACHE_NULL_TTL<span class=\"token punctuation\">,</span> <span class=\"token class-name\">TimeUnit</span><span class=\"token punctuation\">.</span>MINUTES<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"132\"></td><td><pre>                <span class=\"token comment\">// è¿”å›é”™è¯¯ä¿¡æ¯</span></pre></td></tr><tr><td data-num=\"133\"></td><td><pre>                <span class=\"token keyword\">return</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"134\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"135\"></td><td><pre>            <span class=\"token comment\">// 6. å­˜åœ¨ï¼Œå†™å…¥ redis</span></pre></td></tr><tr><td data-num=\"136\"></td><td><pre>            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">,</span> r<span class=\"token punctuation\">,</span> time<span class=\"token punctuation\">,</span> unit<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"137\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">InterruptedException</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"138\"></td><td><pre>            <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">RuntimeException</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"139\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">finally</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"140\"></td><td><pre>            <span class=\"token comment\">// 7. é‡Šæ”¾é”</span></pre></td></tr><tr><td data-num=\"141\"></td><td><pre>            <span class=\"token function\">unlock</span><span class=\"token punctuation\">(</span>lockKey<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"142\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"143\"></td><td><pre>        <span class=\"token comment\">// 8. è¿”å›</span></pre></td></tr><tr><td data-num=\"144\"></td><td><pre>        <span class=\"token keyword\">return</span> r<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"145\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"146\"></td><td><pre></pre></td></tr><tr><td data-num=\"147\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token keyword\">boolean</span> <span class=\"token function\">tryLock</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> key<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"148\"></td><td><pre>        <span class=\"token class-name\">Boolean</span> flag <span class=\"token operator\">=</span> stringRedisTemplate<span class=\"token punctuation\">.</span><span class=\"token function\">opsForValue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">setIfAbsent</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">,</span> <span class=\"token string\">\"1\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">TimeUnit</span><span class=\"token punctuation\">.</span>SECONDS<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"149\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token class-name\">BooleanUtil</span><span class=\"token punctuation\">.</span><span class=\"token function\">isTrue</span><span class=\"token punctuation\">(</span>flag<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"150\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"151\"></td><td><pre></pre></td></tr><tr><td data-num=\"152\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token keyword\">void</span> <span class=\"token function\">unlock</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> key<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"153\"></td><td><pre>        stringRedisTemplate<span class=\"token punctuation\">.</span><span class=\"token function\">delete</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"154\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"155\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h3 id=\"redis-åˆ†å¸ƒå¼é”\"><a class=\"anchor\" href=\"#redis-åˆ†å¸ƒå¼é”\">#</a> Redis åˆ†å¸ƒå¼é”</h3>\n<p>æ‰€è°“åˆ†å¸ƒå¼é”ï¼Œå°±æ˜¯æ»¡è¶³åˆ†å¸ƒå¼ç³»ç»Ÿæˆ–é›†ç¾¤æ¨¡å¼ä¸‹å¤šè¿›ç¨‹å¯è§å¹¶äº’æ–¥çš„é”ã€‚</p>\n<p>åˆ†å¸ƒå¼é”çš„æ ¸å¿ƒæ˜¯å®ç°å¤šçº¿ç¨‹ä¹‹é—´çš„äº’æ–¥ï¼Œå…¶å®ç°æ–¹å¼å¸¸è§æœ‰å¦‚ä¸‹ä¸‰ç§ï¼š</p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th>MySQL</th>\n<th>Redis</th>\n<th>Zookeeper</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>äº’æ–¥</td>\n<td>åˆ©ç”¨ mysql æœ¬èº«çš„äº’æ–¥é”æœºåˆ¶</td>\n<td>åˆ©ç”¨ setnx è¿™æ ·çš„äº’æ–¥å‘½ä»¤</td>\n<td>åˆ©ç”¨èŠ‚ç‚¹å”¯ä¸€æ€§å’Œæœ‰åºæ€§å®ç°äº’æ–¥</td>\n</tr>\n<tr>\n<td>é«˜å¯ç”¨</td>\n<td>å¥½</td>\n<td>å¥½</td>\n<td>å¥½</td>\n</tr>\n<tr>\n<td>é«˜æ€§èƒ½</td>\n<td>ä¸€èˆ¬</td>\n<td>å¥½</td>\n<td>ä¸€èˆ¬</td>\n</tr>\n<tr>\n<td>å®‰å…¨æ€§</td>\n<td>æ–­å¼€è¿æ¥ï¼Œè‡ªåŠ¨é‡Šæ”¾é”</td>\n<td>åˆ©ç”¨è¶…æ—¶æœºåˆ¶ï¼Œåˆ°æœŸé‡Šæ”¾</td>\n<td>ä¸´æ—¶èŠ‚ç‚¹ï¼Œæ–­å¼€è¿æ¥è‡ªåŠ¨é‡Šæ”¾</td>\n</tr>\n</tbody>\n</table>\n<h4 id=\"åŸºäº-redis-å®ç°åˆ†å¸ƒå¼é”\"><a class=\"anchor\" href=\"#åŸºäº-redis-å®ç°åˆ†å¸ƒå¼é”\">#</a> åŸºäº Redis å®ç°åˆ†å¸ƒå¼é”</h4>\n<p>åŸºæœ¬å®ç°æ€è·¯ï¼š</p>\n<ol>\n<li>\n<p>ç‰ˆæœ¬ä¸€ï¼š</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># æ·»åŠ é”ï¼Œåˆ©ç”¨ SETNX çš„äº’æ–¥æ€§</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>SETNX lock thread-1</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\"># æ·»åŠ é”è¿‡æœŸæ—¶é—´ï¼Œé¿å…æœåŠ¡å®•æœºå¯¼è‡´æ­»é”</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>EXPIRE lock <span class=\"token number\">10</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\"># é‡Šæ”¾é”</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>DEL lock</pre></td></tr></table></figure></li>\n<li>\n<p>ç‰ˆæœ¬äºŒï¼š</p>\n<p>åœ¨ç‰ˆæœ¬ä¸€ä¸­ï¼Œç”±äºå‘½ä»¤é€æ¡æ‰§è¡Œï¼Œè€ƒè™‘åˆ°åœ¨æ·»åŠ é”å’Œè®¾ç½®é”è¿‡æœŸæ—¶é—´ä¹‹é—´ä»æœ‰å¯èƒ½å‡ºç°æœåŠ¡å®•æœºçš„æƒ…å†µï¼Œå› æ­¤æˆ‘ä»¬è¿˜éœ€è¦ä¿è¯æ·»åŠ é”å’Œè®¾ç½®é”è¿‡æœŸæ—¶é—´è¿™ä¸¤ä¸ªæ“ä½œåŒæ—¶æ‰§è¡Œï¼Œå…·æœ‰åŸå­æ€§ï¼Œå› æ­¤éœ€è¦å¯¹è¯¥æ–¹æ¡ˆè¿›è¡Œå‡çº§ï¼š</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># æ·»åŠ äº’æ–¥é”å¹¶è®¾ç½®è¿‡æœŸæ—¶é—´ï¼ˆåŸå­æ€§ï¼‰</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>SET lock thread-1 EX <span class=\"token number\">10</span> NX</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\"># é‡Šæ”¾é”</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>DEL lock</pre></td></tr></table></figure></li>\n<li>\n<p>ç‰ˆæœ¬ä¸‰ï¼š</p>\n<p>åŸºäºç‰ˆæœ¬äºŒï¼ŒåŸºæœ¬ä¸Šèƒ½å¤Ÿè§£å†³å¤§éƒ¨åˆ†å¹¶å‘æƒ…å†µï¼Œä½†åœ¨éƒ¨åˆ†æç«¯æƒ…å†µä¸‹ï¼Œä»æ—§å­˜åœ¨çº¿ç¨‹å®‰å…¨é—®é¢˜ã€‚ä¸»è¦è¡¨ç°åœ¨å½“è·å–åˆ°äº’æ–¥é”çš„çº¿ç¨‹ï¼ˆThread-Aï¼‰æ‰§è¡Œæ—¶é—´è¶…è¿‡ Redis TTL è¿‡æœŸæ—¶é—´ï¼Œå°±ä¼šå¯¼è‡´é”æå‰å¤±æ•ˆï¼Œåœ¨å½“å‰çº¿ç¨‹ï¼ˆThread-Aï¼‰æœªé‡Šæ”¾é”çš„æƒ…å†µä¸‹ï¼Œæ­¤æ—¶è¿›å…¥æ–°çš„çº¿ç¨‹ï¼ˆThread-Bï¼‰ä»æ—§å¯ä»¥è·å–é”å¹¶æ‰§è¡Œä¸šåŠ¡é€»è¾‘ï¼Œå¹¶ä¸”ï¼Œåœ¨æ–°çš„çº¿ç¨‹ï¼ˆThread-Bï¼‰æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œå…ˆå‰è·å–åˆ°é”çš„çº¿ç¨‹ï¼ˆThread-Aï¼‰æ‰§è¡Œå®Œä¸šåŠ¡é€»è¾‘åï¼Œå°±ä¼šé‡Šæ”¾çº¿ç¨‹ï¼ˆThread-Bï¼‰æŒæœ‰çš„é”ã€‚è¿™æ ·å°±ä¼šå¯¼è‡´å¤§é‡é”æŒæœ‰å¼‚å¸¸ï¼Œä»è€Œå¼•å‘ä¸šåŠ¡ç¾éš¾ã€‚</p>\n<p>å‡ºç°è¿™æ ·çš„é—®é¢˜ï¼Œæ ¹æœ¬ä¸Šæ˜¯ç”±äºé‡Šæ”¾äº†éå½“å‰çº¿ç¨‹æŒæœ‰çš„é”å¯¼è‡´çš„ï¼Œå› æ­¤ï¼Œè¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œåªéœ€è¦åœ¨çº¿ç¨‹é‡Šæ”¾é”æ—¶ï¼Œåˆ¤æ–­å…¶é‡Šæ”¾çš„é”æ˜¯å¦æ˜¯å½“å‰çº¿ç¨‹æŒæœ‰å³å¯ã€‚</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">/**</pre></td></tr><tr><td data-num=\"2\"></td><td><pre> * æ³¨ï¼šæ­¤æ®µä»£ç åªç”¨äºæ–¹æ¡ˆè¯´æ˜ï¼Œæ— æ³•ç›´æ¥ä½¿ç”¨ã€‚</pre></td></tr><tr><td data-num=\"3\"></td><td><pre> */</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token class-name\">String</span> lockKeyName <span class=\"token operator\">=</span> <span class=\"token string\">\"lock:user:192838\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token class-name\">String</span> threadId <span class=\"token operator\">=</span> UUID<span class=\"token punctuation\">.</span><span class=\"token function\">randomUUID</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">\"-\"</span> <span class=\"token operator\">+</span> <span class=\"token class-name\">Thread</span><span class=\"token punctuation\">.</span><span class=\"token function\">currentThread</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token comment\">// è·å–é”</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token class-name\">Boolean</span> success <span class=\"token operator\">=</span> stringRedisTemplate<span class=\"token punctuation\">.</span><span class=\"token function\">opsForValue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">setIfAbsent</span><span class=\"token punctuation\">(</span>lockKeyName<span class=\"token punctuation\">,</span> threadId<span class=\"token punctuation\">,</span> <span class=\"token number\">200</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">TimeUtil</span><span class=\"token punctuation\">.</span>SECONDS<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\">// é‡Šæ”¾é”</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token class-name\">String</span> id <span class=\"token operator\">=</span> stringRedisTemplate<span class=\"token punctuation\">.</span><span class=\"token function\">opsForValue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>lockKeyName<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token comment\">// æ ¡éªŒé”æ‹¥æœ‰è€…</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>threadId<span class=\"token punctuation\">.</span><span class=\"token function\">equals</span><span class=\"token punctuation\">(</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token comment\">// é‡Šæ”¾é”</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    stringRedisTemplate<span class=\"token punctuation\">.</span><span class=\"token function\">delete</span><span class=\"token punctuation\">(</span>lockKeyName<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure></li>\n<li>\n<p>æœ€ç»ˆç‰ˆï¼š</p>\n<p>å¯ä»¥è¯´å³ä¾¿æ˜¯åŸºäºç‰ˆæœ¬ä¸‰ï¼Œä»æ—§æœ‰å‡ºç°çº¿ç¨‹å®‰å…¨é—®é¢˜çš„å¯èƒ½ã€‚è€ƒè™‘è¿™æ ·ä¸€ç§æƒ…å†µï¼šå½“ç¨‹åºåœ¨é‡Šæ”¾é”æ—¶ï¼Œå…ˆé€šè¿‡æ ¡éªŒé”æ˜¯å¦ä¸ºå½“å‰çº¿ç¨‹æŒæœ‰ï¼Œæ ¡éªŒé€šè¿‡åï¼Œå¦‚æœæ­¤æ—¶çº¿ç¨‹ï¼ˆThread-Aï¼‰çªç„¶å‘ç”Ÿé˜»å¡ï¼ˆå¯èƒ½æ˜¯ç”± JVM åƒåœ¾å›æ”¶å¯¼è‡´ï¼‰ï¼Œå¹¶ä¸”å¯¼è‡´é”è¶…æ—¶è‡ªåŠ¨é‡Šæ”¾ï¼Œæ­¤æ—¶åœ¨è¯¥çº¿ç¨‹é˜»å¡çš„çŠ¶æ€ä¸‹ï¼Œå…¶ä»–çº¿ç¨‹ï¼ˆThread-Bï¼‰å°±ä»å¯ä»¥è·å–åˆ°é”ï¼Œè€Œå½“çº¿ç¨‹ï¼ˆThread-Aï¼‰é˜»å¡é€šè¿‡åï¼Œç”±äºå®ƒå·²ç»é€šè¿‡é”æŒæœ‰è€…æ ¡éªŒï¼Œå› æ­¤å®ƒå°†ä¼šè¿›è¡Œé‡Šæ”¾é”ï¼Œä½†æ­¤æ—¶å®ƒé”é‡Šæ”¾çš„é”ï¼Œå…¶å®é™…ä¸Šå¹¶éè¿™ä¸ªçº¿ç¨‹ï¼ˆThread-Aï¼‰æ‰€æŒæœ‰ï¼Œä»è€Œå†æ¬¡å¼•èµ·ç‰ˆæœ¬ä¸‰ç§æåˆ°çš„é—®é¢˜ã€‚</p>\n<p>å‡ºç°è¿™æ ·çš„é—®é¢˜ï¼Œæ ¹æœ¬ä¸Šæ˜¯å› ä¸ºæ ¡éªŒé”æŒæœ‰è€…çš„æ“ä½œä¸é‡Šæ”¾é”æ“ä½œä¹‹é—´å­˜åœ¨æ—¶é—´ç©ºéš™ï¼Œå¯¼è‡´é”è¢«æå‰é‡Šæ”¾ï¼Œå› æ­¤ï¼Œè¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå°±éœ€è¦ä¿è¯æ ¡éªŒé”æŒæœ‰è€…æ“ä½œå’Œé‡Šæ”¾é”æ“ä½œåŒæ—¶æ‰§è¡Œï¼Œå…·æœ‰åŸå­æ€§ã€‚</p>\n<p>è¿™é‡Œæ¨èä½¿ç”¨  <code>Lua è„šæœ¬</code> ï¼Œæ¥ä¿è¯ä¸€ä¸ªåŸå­æ€§çš„æ“ä½œï¼ŒLua è„šæœ¬åŸºæœ¬è¯­æ³•ï¼Œå¯å‚è€ƒ <span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cucnVub29iLmNvbS9sdWEvbHVhLXR1dG9yaWFsLmh0bWw=\">Lua æ•™ç¨‹ | èœé¸Ÿæ•™ç¨‹</span>ã€‚</p>\n<p>Lua è„šæœ¬ç¤ºä¾‹ï¼š</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># æ— å‚è„šæœ¬</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>EVAL <span class=\"token string\">\"return redis.call('set', 'name', 'chinmoku')\"</span> <span class=\"token number\">0</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\"># å¸¦å‚è„šæœ¬</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>EVAL <span class=\"token string\">\"return redis.call('set', KEYS[1], ARGV[1])\"</span> <span class=\"token number\">2</span> name chinmoku</pre></td></tr></table></figure><p>åŸºäº Lua è„šæœ¬ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å¦‚ä¸‹æ–¹å¼æ¥è§£å†³ç‰ˆæœ¬ä¸‰ä¸­é—ç•™çš„é—®é¢˜ï¼š</p>\n<ul>\n<li>\n<p>ç¼–å†™é‡Šæ”¾é”çš„ Lua è„šæœ¬ï¼š</p>\n<figure class=\"highlight lua\"><figcaption data-lang=\"lua\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">-- FileName: unlock.lua</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\">-- æ ¡éªŒé”æ‹¥æœ‰è€…</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>redis<span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span><span class=\"token string\">'get'</span><span class=\"token punctuation\">,</span> KEYS<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> ARGV<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">then</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token comment\">-- é‡Šæ”¾é” del key</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">return</span> redis<span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span><span class=\"token string\">'del'</span><span class=\"token punctuation\">,</span> KEYS<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">end</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">return</span> <span class=\"token number\">0</span></pre></td></tr></table></figure></li>\n<li>\n<p>åœ¨ä¸šåŠ¡ä¸­æ‰§è¡Œ Lua è„šæœ¬ï¼š</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token class-name\">String</span> lockKeyName <span class=\"token operator\">=</span> <span class=\"token string\">\"lock:user:192838\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token class-name\">String</span> threadId <span class=\"token operator\">=</span> UUID<span class=\"token punctuation\">.</span><span class=\"token function\">randomUUID</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">\"-\"</span> <span class=\"token operator\">+</span> <span class=\"token class-name\">Thread</span><span class=\"token punctuation\">.</span><span class=\"token function\">currentThread</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">private</span> <span class=\"token keyword\">static</span> <span class=\"token class-name\">DefaultRedisScript</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Long</span><span class=\"token punctuation\">></span></span> UNLOCK_SCRIPT<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">static</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    UNLOCK_SCRIPT <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">DefaultRedisScript</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    UNLOCK_SCRIPT<span class=\"token punctuation\">.</span><span class=\"token function\">setLocation</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">ClassPathResource</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"unlock.lua\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    UNLOCK_SCRIPT<span class=\"token punctuation\">.</span><span class=\"token function\">setResultType</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Long</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">unlock</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    stringRedisTemplate<span class=\"token punctuation\">.</span><span class=\"token function\">execute</span><span class=\"token punctuation\">(</span>UNLOCK_SCRIPT<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Collections</span><span class=\"token punctuation\">.</span><span class=\"token function\">singletonList</span><span class=\"token punctuation\">(</span>lockKeyName<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> threadId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure></li>\n</ul>\n</li>\n</ol>\n<h4 id=\"redisson\"><a class=\"anchor\" href=\"#redisson\">#</a> Redisson</h4>\n<p>ä¸Šè¿°å¯¹ Redis åˆ†å¸ƒå¼é”è¿›è¡Œäº†ä¸€ç³»åˆ—æ–¹æ¡ˆæ¢ç´¢ï¼Œå·²ç»èƒ½å¤Ÿè§£å†³å¤§éƒ¨åˆ†å¹¶å‘åœºæ™¯ä¸‹ Redis åˆ†å¸ƒå¼é”é—®é¢˜ï¼Œä½†è¿™ç§åŸºäº SETNX å‘½ä»¤å®ç°çš„åˆ†å¸ƒå¼é”ä»æ—§å­˜åœ¨ä¸€äº›ä¸è¶³ï¼Œä¾‹å¦‚ï¼š</p>\n<ul>\n<li>ä¸å¯é‡å…¥ï¼šåŒä¸€ä¸ªçº¿ç¨‹æ— æ³•å¤šæ¬¡è·å–åŒä¸€æŠŠé”ã€‚</li>\n<li>ä¸å¯é‡è¯•ï¼šçº¿ç¨‹è·å–é”åªå°è¯•äº†ä¸€æ¬¡ï¼Œæ²¡æœ‰é‡è¯•æœºåˆ¶ã€‚</li>\n<li>è¶…æ—¶é‡Šæ”¾ï¼šé”è¶…æ—¶é‡Šæ”¾è™½ç„¶å¯ä»¥é¿å…æ­»é”ï¼Œä½†å¦‚æœä¸šåŠ¡æ‰§è¡Œè€—æ—¶è¾ƒé•¿ï¼Œä»æ—§ä¼šå¯¼è‡´é”é‡Šæ”¾ï¼Œå› è€Œå­˜åœ¨å®‰å…¨éšæ‚£ã€‚</li>\n<li>ä¸»ä»ä¸€è‡´æ€§ï¼šå¦‚æœ Redis æä¾›ä¸»ä»é›†ç¾¤ï¼Œä¸»ä»èŠ‚ç‚¹åŒæ­¥å­˜åœ¨å»¶è¿Ÿæ—¶ï¼Œå¦‚æœä¸»èŠ‚ç‚¹çªç„¶å®•æœºï¼Œæœªèƒ½å®ŒæˆåŒæ­¥ï¼Œåˆ™ä¼šå¯¼è‡´æ•°æ®ä¸ä¸€è‡´ã€‚</li>\n</ul>\n<p>é‰´äºå¦‚ä¸Šé—®é¢˜ï¼Œå¯ä»¥æ¨èä¸€ä¸ªæ›´åŠ ä½¿ç”¨çš„ Redis è§£å†³æ–¹æ¡ˆï¼Œå³ Redissonã€‚</p>\n<p>Redisson æ˜¯ä¸€ä¸ªåœ¨ Redis åŸºç¡€ä¸Šå®ç°æ‰©å±•åº“ï¼Œå®ƒä¸ä»…æä¾›ä¸€ç³»åˆ—åˆ†å¸ƒå¼çš„ Java å¸¸ç”¨å¯¹è±¡ï¼Œè¿˜æä¾›äº†è®¸å¤šåˆ†å¸ƒå¼æœåŠ¡ï¼ŒåŒ…æ‹¬å„ç§åˆ†å¸ƒå¼é”çš„å®ç°ã€‚</p>\n<p>å®˜ç½‘åœ°å€ï¼š<span class=\"exturl\" data-url=\"aHR0cHM6Ly9yZWRpc3Nvbi5vcmc=\">https://redisson.org</span></p>\n<p>Github é¦–é¡µï¼š<span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL3JlZGlzc29uL3JlZGlzc29u\">https://github.com/redisson/redisson</span></p>\n<p><strong>åŸºæœ¬ä½¿ç”¨ï¼š</strong></p>\n<ol>\n<li>\n<p>å¼•å…¥ä¾èµ–ï¼š <code>org.redisson.redisson:3.13.6</code> ã€‚</p>\n</li>\n<li>\n<p>å®¢æˆ·ç«¯é…ç½®ï¼š</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token annotation punctuation\">@Configuration</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">RedisConfig</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token annotation punctuation\">@Bean</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">RedissonClient</span> <span class=\"token function\">redissonClient</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token class-name\">Config</span> config <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Config</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        config<span class=\"token punctuation\">.</span><span class=\"token function\">useSingleServer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">setAddress</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"redis://127.0.0.1:6379\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">setPassword</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"123456\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>      <span class=\"token keyword\">return</span> <span class=\"token class-name\">Redisson</span><span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span>config<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  </pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure></li>\n<li>\n<p>æµ‹è¯•ä½¿ç”¨ï¼š</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token annotation punctuation\">@Resource</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">private</span> <span class=\"token class-name\">RedissonClient</span> redissonClient<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token annotation punctuation\">@Test</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">void</span> <span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">InterruptedException</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token class-name\">RLock</span> lock <span class=\"token operator\">=</span> redissonClient<span class=\"token punctuation\">.</span><span class=\"token function\">getLock</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"lock:order:123764\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">boolean</span> isLock <span class=\"token operator\">=</span> lock<span class=\"token punctuation\">.</span><span class=\"token function\">tryLock</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>isLock<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token keyword\">try</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"---> TODO æ‰§è¡Œä¸šåŠ¡é€»è¾‘\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">finally</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>            lock<span class=\"token punctuation\">.</span><span class=\"token function\">unlock</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure></li>\n</ol>\n<p><strong>Redisson åˆ†å¸ƒå¼é”åŸç†</strong></p>\n<p><img data-src=\"https://img.xfc-exclave.com/2022/03/3a5c08426d7714bd67041598cc8457561647263198.png\" alt=\"redisson-lock\" /></p>\n<p>Redisson å¦‚ä½•å¤„ç†åˆ†å¸ƒå¼é”é—®é¢˜ï¼š</p>\n<ol>\n<li>\n<p>å¯é‡å…¥é—®é¢˜ï¼šåˆ©ç”¨ Hash ç»“æ„è®°å½•çº¿ç¨‹ ID å’Œé‡å…¥æ¬¡æ•°ã€‚</p>\n</li>\n<li>\n<p>å¯é‡è¯•é—®é¢˜ï¼šåˆ©ç”¨ä¿¡å·é‡å’Œ PubSub åŠŸèƒ½å®ç°ç­‰å¾…ã€å”¤é†’ã€è·å–é”å¤±è´¥çš„é‡è¯•æœºåˆ¶ã€‚</p>\n</li>\n<li>\n<p>è¶…æ—¶ç»­çº¦ï¼šåˆ©ç”¨ watchDogï¼Œæ¯éš”ä¸€æ®µæ—¶é—´ï¼ˆreleaseTime / 3ï¼‰é‡ç½®é”çš„è¶…æ—¶æ—¶é—´ã€‚</p>\n</li>\n<li>\n<p>ä¸»ä»ä¸€è‡´æ€§é—®é¢˜ï¼š</p>\n<p>Redisson ä½¿ç”¨è”é”ï¼ˆmultiLockï¼‰æœºåˆ¶ï¼ŒåŒæ—¶å­˜åœ¨å¤šä¸ª Redis ä¸»èŠ‚ç‚¹ï¼Œå¹¶ä¸”è·å–é”æ—¶ï¼Œéœ€è¦ä¿è¯æ‰€æœ‰ä¸»èŠ‚ç‚¹å†…è¯¥é”éƒ½å·²è¢«é‡Šæ”¾ã€‚</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token annotation punctuation\">@Resource</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">private</span> <span class=\"token class-name\">RedissonClient</span> redissonClient1<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token annotation punctuation\">@Resource</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">private</span> <span class=\"token class-name\">RedissonClient</span> redissonClient2<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token annotation punctuation\">@Resource</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">private</span> <span class=\"token class-name\">RedissonClient</span> redissonClient3<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">private</span> <span class=\"token class-name\">RLock</span> lock<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token annotation punctuation\">@BeforeEach</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token keyword\">void</span> <span class=\"token function\">setUp</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token class-name\">RLock</span> lock1 <span class=\"token operator\">=</span> redissonClient1<span class=\"token punctuation\">.</span><span class=\"token function\">getLock</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"order\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token class-name\">RLock</span> lock2 <span class=\"token operator\">=</span> redissonClient2<span class=\"token punctuation\">.</span><span class=\"token function\">getLock</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"order\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token class-name\">RLock</span> lock3 <span class=\"token operator\">=</span> redissonClient3<span class=\"token punctuation\">.</span><span class=\"token function\">getLock</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"order\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    lock <span class=\"token operator\">=</span> redissonClient1<span class=\"token punctuation\">.</span><span class=\"token function\">getMultiLock</span><span class=\"token punctuation\">(</span>lock1<span class=\"token punctuation\">,</span> lock2<span class=\"token punctuation\">,</span> lock3<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>å…¶æœ¬è´¨ä¸Šæ˜¯å¯¹ MultiLock å†…æ‰€æœ‰çš„é”è¿›è¡Œéå†ã€‚</p>\n</li>\n</ol>\n<h3 id=\"redis-æ¶ˆæ¯é˜Ÿåˆ—\"><a class=\"anchor\" href=\"#redis-æ¶ˆæ¯é˜Ÿåˆ—\">#</a> Redis æ¶ˆæ¯é˜Ÿåˆ—</h3>\n<p>é€šå¸¸ï¼Œå¯¹äºå¹¶å‘å’Œæ€§èƒ½è¦æ±‚éƒ½è¾ƒé«˜çš„ç³»ç»Ÿæˆ–ä¸šåŠ¡ï¼Œå¾€å¾€éœ€è¦å°†æµç¨‹åˆ†ç‰‡åŒ–ã€‚ä¾‹å¦‚å…¸å‹çš„ç§’æ€é¡¹ç›®ï¼Œå‡ºäºæ€§èƒ½è€ƒè™‘ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šå°†è¾ƒä¸ºå¤æ‚çš„ã€è€—æ—¶è¾ƒé•¿ä½†æ— éœ€å³æ—¶è¿”å›ç»“æœçš„è¯·æ±‚å­˜å‚¨åˆ°æ¶ˆæ¯é˜Ÿåˆ—ä¸­ï¼Œå¼€å¯å¼‚æ­¥çº¿ç¨‹è¿›è¡Œå¤„ç†ï¼Œè¿™æ ·æ—¢ä¸ä¼šåˆ°å½±å“ä¸šåŠ¡ï¼ŒåŒæ—¶ä¹Ÿæé«˜äº†ç³»ç»Ÿçš„æ€§èƒ½ã€‚</p>\n<p>ç›®å‰æ¯”è¾ƒæµè¡Œçš„æ¶ˆæ¯é˜Ÿåˆ—äº§å“åŒ…æ‹¬ï¼šRabbitMQã€ActiveMQã€RocketMQã€kafka ç­‰ã€‚</p>\n<p>æ­¤å¤–ï¼ŒRedis ä¹Ÿæä¾›äº†ä¸‰ç§ä¸åŒçš„æ–¹å¼æ¥å®ç°æ¶ˆæ¯é˜Ÿåˆ—ï¼š</p>\n<ol>\n<li>List ç»“æ„ï¼šåŸºäº List ç»“æ„æ¨¡æ‹Ÿæ¶ˆæ¯é˜Ÿåˆ—ã€‚</li>\n<li>PubSubï¼šåŸºæœ¬çš„ç‚¹å¯¹ç‚¹æ¶ˆæ¯æ¨¡å‹ã€‚</li>\n<li>Streamï¼šæ¯”è¾ƒå®Œå–„çš„æ¶ˆæ¯é˜Ÿåˆ—æ¨¡å‹ï¼ˆæ¨èï¼‰ã€‚</li>\n</ol>\n<h4 id=\"åŸºäº-list-æ¨¡æ‹Ÿæ¶ˆæ¯é˜Ÿåˆ—\"><a class=\"anchor\" href=\"#åŸºäº-list-æ¨¡æ‹Ÿæ¶ˆæ¯é˜Ÿåˆ—\">#</a> åŸºäº List æ¨¡æ‹Ÿæ¶ˆæ¯é˜Ÿåˆ—</h4>\n<p>æ¶ˆæ¯é˜Ÿåˆ—ï¼Œç®€å•ç†è§£å³æ—¶å­˜æ”¾æ¶ˆæ¯çš„é˜Ÿåˆ—ï¼Œè€Œ Redis çš„ List æ•°æ®ç»“æ„æ˜¯ä¸€ä¸ªåŒå‘é“¾è¡¨ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥å¾ˆå®¹æ˜“åœ°é€šè¿‡ LPUSH ç»“åˆ RPOP æˆ– RPUSH ç»“åˆ LPOP æ¥æ¨¡æ‹Ÿå‡ºé˜Ÿåˆ—çš„æ•ˆæœã€‚</p>\n<p>ä½†å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œå½“ Redis List ä¸­æ²¡æœ‰æ¶ˆæ¯æ—¶ï¼ŒRPOP æˆ– LPOP ä¼šè¿”å› nilï¼Œè€Œä¸æ˜¯åƒ JVM çš„é˜»å¡é˜Ÿåˆ—é‚£æ ·é˜»å¡å¹¶ç­‰å¾…æ¶ˆæ¯ï¼Œå› æ­¤ï¼Œåœ¨å–å‡ºæ¶ˆæ¯æ—¶åº”å½“ä½¿ç”¨ BRPOP æˆ– BLPOP æ¥å®ç°é˜»å¡æ•ˆæœã€‚</p>\n<p>ç›¸æ¯” JVM é˜»å¡é˜Ÿåˆ—æ¥è¯´ï¼ŒRedis å®ç°çš„é˜»å¡é˜Ÿåˆ—å…·æœ‰å¦‚ä¸‹ä¼˜ç‚¹ï¼š</p>\n<ol>\n<li>ä¸å— JVM å†…å­˜å¤§å°é™åˆ¶ã€‚</li>\n<li>åŸºäº Redis æŒä¹…åŒ–ï¼Œå¯ä»¥ä¿è¯æ•°æ®å®‰å…¨ã€‚</li>\n<li>å¯ä»¥æ»¡è¶³æ¶ˆæ¯çš„æœ‰åºæ€§ã€‚</li>\n</ol>\n<p>ç¼ºç‚¹ï¼š</p>\n<ol>\n<li>æ— æ³•é¿å…æ¶ˆæ¯ä¸¢å¤±ï¼ˆå½“å–å‡ºæ¶ˆæ¯ä½†æœªåŠæ—¶å¤„ç†æ—¶ï¼ŒæœåŠ¡å‡ºç°å¼‚å¸¸ï¼Œä¼šå¯¼è‡´æ¶ˆæ¯ä¸¢å¤±ï¼‰ã€‚</li>\n<li>åªæ”¯æŒå•æ¶ˆè´¹è€…ï¼Œæ— æ³•å®ç°å¤šæ¶ˆè´¹è€…åŒæ—¶æ¶ˆè´¹ã€‚</li>\n</ol>\n<h4 id=\"åŸºäº-pubsub-çš„æ¶ˆæ¯é˜Ÿåˆ—\"><a class=\"anchor\" href=\"#åŸºäº-pubsub-çš„æ¶ˆæ¯é˜Ÿåˆ—\">#</a> åŸºäº PubSub çš„æ¶ˆæ¯é˜Ÿåˆ—</h4>\n<p>PubSub æ˜¯ Redis 2.0 ç‰ˆæœ¬å¼•å…¥çš„æ¶ˆæ¯ä¼ é€’æ¨¡å‹ï¼Œæ¶ˆè´¹è€…å¯ä»¥è®¢é˜…ä¸€ä¸ªæˆ–å¤šä¸ª channelï¼Œç”Ÿäº§è€…æƒ³å¯¹åº”çš„ channel å‘é€æ¶ˆæ¯åï¼Œæ‰€æœ‰è®¢é˜…è€…éƒ½èƒ½æ”¶åˆ°ç›¸å…³æ¶ˆæ¯ã€‚</p>\n<ul>\n<li>SUBSCRIBE channel [channel] è®¢é˜…ä¸€ä¸ªæˆ–å¤šä¸ªé¢‘é“ã€‚</li>\n<li>PUBLISH channel msg å‘ä¸€ä¸ªé¢‘é“å‘é€æ¶ˆæ¯ã€‚</li>\n<li>PSUBSCRIBE pattern [pattern] è®¢é˜…ä¸ pattern æ ¼å¼åŒ¹é…çš„æ‰€æœ‰é¢‘é“ã€‚</li>\n</ul>\n<p>PubSub æœ‰ç‚¹ï¼š</p>\n<ol>\n<li>é‡‡ç”¨å‘å¸ƒè®¢é˜…æ¨¡å‹ï¼Œæ”¯æŒå¤šç”Ÿäº§ã€å¤šæ¶ˆè´¹ã€‚</li>\n</ol>\n<p>ç¼ºç‚¹ï¼š</p>\n<ol>\n<li>ä¸æ”¯æŒæ•°æ®æŒä¹…åŒ–ã€‚</li>\n<li>æ— æ³•é¿å…æ¶ˆæ¯ä¸¢å¤±ã€‚</li>\n<li>æ¶ˆæ¯å †ç§¯æœ‰ä¸Šé™ï¼Œè¶…å‡ºæ—¶æ¶ˆæ¯ä¼šä¸¢å¤±ã€‚</li>\n</ol>\n<h4 id=\"åŸºäº-stream-çš„æ¶ˆæ¯é˜Ÿåˆ—\"><a class=\"anchor\" href=\"#åŸºäº-stream-çš„æ¶ˆæ¯é˜Ÿåˆ—\">#</a> åŸºäº Stream çš„æ¶ˆæ¯é˜Ÿåˆ—</h4>\n<p>Stream æ˜¯ Redis 5.0 å¼•å…¥çš„ä¸€ç§æ–°çš„æ•°æ®ç±»å‹ï¼Œå¯ä»¥å®ç°ä¸€ä¸ªåŠŸèƒ½éå¸¸å®Œå–„çš„æ¶ˆæ¯é˜Ÿåˆ—ã€‚</p>\n<p>Stream æ¶ˆæ¯é˜Ÿåˆ—ç›¸å…³å‘½ä»¤ï¼š</p>\n<ol>\n<li>\n<p>XADD key *|ID field value [field value ...] å‘é€æ¶ˆæ¯ã€‚</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># æ·»åŠ æ¶ˆæ¯</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>XADD user:1001 * name chinmoku</pre></td></tr></table></figure></li>\n<li>\n<p>XREAD STREAMS key [key ...] ID [ID ...]</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># ä» 0 å¼€å§‹è¯»å–æ¶ˆæ¯</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>XREAD COUNT <span class=\"token number\">1</span> STREAMS user:1001 <span class=\"token number\">0</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\"># è¯»å–æœ€æ–°æ¶ˆæ¯</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>XREAD COUNT <span class=\"token number\">1</span> STREAMS user:1001 $</pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\"># é˜»å¡è¯»å–æ¶ˆæ¯</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>XREAD COUNT <span class=\"token number\">1</span> BLOCK <span class=\"token number\">1000</span> STREAMS user:1001 $</pre></td></tr></table></figure></li>\n</ol>\n<p>å®ç°æ¶ˆæ¯é˜Ÿåˆ—ç¤ºä¾‹ï¼š</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">while</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token comment\">// å°è¯•è¯»å–é˜Ÿåˆ—ä¸­çš„æ¶ˆæ¯ï¼Œæœ€å¤šé˜»å¡ 2s</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token class-name\">Object</span> msg <span class=\"token operator\">=</span> redis<span class=\"token punctuation\">.</span><span class=\"token function\">execute</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"XREAD COUNT 1 BLOCK 2000 STREAMS user:1001 $\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>msg <span class=\"token operator\">==</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token keyword\">continue</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token comment\">// å¤„ç†æ¶ˆæ¯</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token function\">handleMessage</span><span class=\"token punctuation\">(</span>msg<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>STREAM ç±»å‹æ¶ˆæ¯é˜Ÿåˆ—çš„ XREAD å‘½ä»¤ç‰¹ç‚¹ï¼š</p>\n<ul>\n<li>æ¶ˆæ¯å¯å›æº¯ã€‚</li>\n<li>ä¸€ä¸ªæ¶ˆæ¯å¯ä»¥è¢«å¤šä¸ªæ¶ˆè´¹è€…è¯»å–ã€‚</li>\n<li>å¯ä»¥é˜»å¡è¯»å–ã€‚</li>\n<li>æœ‰æ¶ˆæ¯æ¼è¯»çš„é£é™©ã€‚</li>\n</ul>\n<p><strong>æ¶ˆè´¹è€…ç»„ï¼ˆConsumer Groupï¼‰</strong></p>\n<p>ç”±äºå•æ¶ˆè´¹è€…å…·æœ‰æ¶ˆæ¯æ¼è¯»çš„é£é™©ï¼Œå› æ­¤å¼•å…¥äº†æ¶ˆè´¹è€…ç»„æ¦‚å¿µï¼Œæ‰€è°“æ¶ˆè´¹è€…ç»„ï¼Œå°±æ˜¯å°†å¤šä¸ªæ¶ˆè´¹è€…åˆ’åˆ†åˆ°ä¸€ä¸ªç»„ä¸­ï¼Œç›‘å¬åŒä¸€ä¸ªé˜Ÿåˆ—ï¼Œå®ƒå…·å¤‡å¦‚ä¸‹ç‰¹ç‚¹ï¼š</p>\n<ol>\n<li>\n<p>æ¶ˆæ¯åˆ†æµï¼š</p>\n<p>é˜Ÿåˆ—ä¸­çš„æ¶ˆæ¯ä¼šåˆ†æµç»™ç»„å†…çš„ä¸åŒæ¶ˆè´¹è€…ï¼Œè€Œä¸æ˜¯é‡å¤æ¶ˆè´¹ï¼Œä»è€ŒåŠ å¿«æ¶ˆæ¯å¤„ç†çš„é€Ÿåº¦ã€‚</p>\n</li>\n<li>\n<p>æ¶ˆæ¯æ ‡ç¤ºï¼š</p>\n<p>æ¶ˆè´¹è€…ç»„ä¼šç»´æŠ¤ä¸€ä¸ªæ ‡ç¤ºï¼Œè®°å½•æœ€åä¸€ä¸ªè¢«å¤„ç†çš„æ¶ˆæ¯ï¼Œå“ªæ€•æ¶ˆè´¹è€…å®•æœºé‡å¯ï¼Œä»æ—§ä¼šä»æ ‡ç¤ºä¹‹åè¯»å–æ¶ˆæ¯ï¼Œä¿è¯æ¯ä¸€æ¡æ¶ˆæ¯éƒ½ä¼šè¢«æ¶ˆè´¹ã€‚</p>\n</li>\n<li>\n<p>æ¶ˆæ¯ç¡®è®¤ï¼š</p>\n<p>æ¶ˆè´¹è€…è·å–æ¶ˆæ¯åï¼Œæ¶ˆæ¯å¤„äº pending çŠ¶æ€ï¼Œå¹¶å­˜å…¥ä¸€ä¸ª pending-list ä¸­ï¼Œå½“å¤„ç†å®Œæˆåéœ€è¦é€šè¿‡ XACK æ¥ç¡®è®¤æ¶ˆæ¯ï¼Œæ ‡è®°æ¶ˆæ¯ä¸ºå·²å¤„ç†ï¼Œè¿™æ—¶æ‰ä¼šä» pending-list ä¸­ç§»é™¤ã€‚</p>\n</li>\n</ol>\n<p>Stream Consumer Group ç›¸å…³æ“ä½œå‘½ä»¤ï¼š</p>\n<ol>\n<li>XGROUP CREATE key groupName ID [MKSTREAM] åˆ›å»ºæ¶ˆè´¹è€…ç»„ã€‚</li>\n<li>XGROUP DESTORY key groupName åˆ é™¤æ¶ˆè´¹è€…ç»„ã€‚</li>\n<li>XGROUP CREATECONSUMER key groupName consumername ç»™æŒ‡å®šæ¶ˆè´¹è€…ç»„æ·»åŠ æ¶ˆè´¹è€…ã€‚</li>\n<li>XGROUP DELCONSUMER key groupName consumername åˆ é™¤æ¶ˆè´¹è€…ç»„ä¸­æŒ‡å®šæ¶ˆè´¹è€…ã€‚</li>\n<li>XREADGROUP GROUP group consumer STREAMS key [key ...] ID [ID ...] ä»æ¶ˆè´¹è€…ç»„è¯»å–æ¶ˆæ¯ã€‚</li>\n<li>XACK key group ID [ID ...] ç¡®è®¤æ¶ˆæ¯ï¼ˆè¯»å–æ¶ˆæ¯åéœ€è¦è¿›è¡Œç¡®è®¤ï¼‰ã€‚</li>\n<li>XPENDING key group [start end count] è·å–æœªç¡®è®¤çš„æ¶ˆæ¯ã€‚</li>\n</ol>\n<p>ä¼ªä»£ç å®ç°æ¶ˆè´¹è€…ç»„ç›‘å¬é€»è¾‘ï¼š</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">white</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token comment\">// å°è¯•ç›‘å¬é˜Ÿåˆ—ï¼Œä½¿ç”¨é˜»å¡æ¨¡å¼ï¼Œæœ€é•¿ç­‰å¾… 2000ms</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token class-name\">Object</span> msg <span class=\"token operator\">=</span> redis<span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"XREADGROUP GROUP g1 c1 COUNT 1 BLOCK 200 STREAMS S1 >\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>msg <span class=\"token operator\">==</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span><span class=\"token comment\">// æ²¡æœ‰æ¶ˆæ¯ï¼Œåˆ™ç»§ç»­ä¸‹ä¸€æ¬¡</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token keyword\">continue</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">try</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token comment\">// å¤„ç†æ¶ˆæ¯ï¼Œå®Œæˆåå¹¶åš ACK</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token function\">handleMessage</span><span class=\"token punctuation\">(</span>msg<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">catch</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Exception</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token keyword\">while</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>            <span class=\"token comment\">// ä» pending-list ä¸­è¯»å–æ¶ˆæ¯</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>            <span class=\"token class-name\">Object</span> msg <span class=\"token operator\">=</span> redis<span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"XREADGROUP GROUP g1 s1 COUNT 1 STREAMS s1 0\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>msg <span class=\"token operator\">==</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>                <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>            <span class=\"token keyword\">try</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>                <span class=\"token comment\">// å­˜åœ¨å¼‚å¸¸æ¶ˆæ¯ï¼Œå†æ¬¡å¤„ç†</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>                <span class=\"token function\">handleMessage</span><span class=\"token punctuation\">(</span>msg<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">catch</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Exception</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>                <span class=\"token comment\">// å†æ¬¡å‡ºç°å¼‚å¸¸ï¼Œç»§ç»­å¾ªç¯</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>                <span class=\"token keyword\">continue</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>STREAM ç±»å‹æ¶ˆæ¯é˜Ÿåˆ—çš„ XREADGROUP å‘½ä»¤ç‰¹ç‚¹ï¼š</p>\n<ul>\n<li>æ¶ˆæ¯å¯å›æº¯ã€‚</li>\n<li>å¯ä»¥å¤šæ¶ˆè´¹è€…äº‰æŠ¢æ¶ˆæ¯ï¼ŒåŠ å¿«æ¶ˆè´¹é€Ÿåº¦ã€‚</li>\n<li>å¯ä»¥é˜»å¡è¯»å–ã€‚</li>\n<li>æ²¡æœ‰æ¶ˆæ¯æ¼è¯»é£é™©ã€‚</li>\n<li>æœ‰æ¶ˆæ¯ç¡®è®¤æœºåˆ¶ï¼Œä¿è¯æ¶ˆæ¯è‡³å°‘è¢«æ¶ˆè´¹ä¸€æ¬¡ã€‚</li>\n</ul>\n<p><strong>Redis æ¶ˆæ¯é˜Ÿåˆ—å¯¹æ¯”ï¼š</strong></p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th>List</th>\n<th>PubSub</th>\n<th>Stream</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>æ¶ˆæ¯æŒä¹…åŒ–</td>\n<td>æ”¯æŒ</td>\n<td>ä¸æ”¯æŒ</td>\n<td>æ”¯æŒ</td>\n</tr>\n<tr>\n<td>é˜»å¡è¯»å–</td>\n<td>æ”¯æŒ</td>\n<td>æ”¯æŒ</td>\n<td>æ”¯æŒ</td>\n</tr>\n<tr>\n<td>æ¶ˆæ¯å †ç§¯å¤„ç†</td>\n<td>å—å†…å­˜ç©ºé—´é™åˆ¶ï¼Œå¯ä»¥åˆ©ç”¨å¤šæ¶ˆè´¹è€…åŠ å¿«å¤„ç†</td>\n<td>å—é™äºæ¶ˆè´¹è€…ç¼“å†²åŒº</td>\n<td>å—é™äºé˜Ÿåˆ—é•¿åº¦ï¼Œå¯ä»¥åˆ©ç”¨æ¶ˆè´¹è€…ç»„æé«˜æ¶ˆè´¹é€Ÿåº¦ï¼Œå‡å°‘å †ç§¯</td>\n</tr>\n<tr>\n<td>æ¶ˆæ¯ç¡®è®¤æœºåˆ¶</td>\n<td>ä¸æ”¯æŒ</td>\n<td>ä¸æ”¯æŒ</td>\n<td>æ”¯æŒ</td>\n</tr>\n<tr>\n<td>æ¶ˆæ¯å›æº¯</td>\n<td>ä¸æ”¯æŒ</td>\n<td>ä¸æ”¯æŒ</td>\n<td>æ”¯æŒ</td>\n</tr>\n</tbody>\n</table>\n<blockquote>\n<p>ä½¿ç”¨ Redis ä½œä¸ºæ¶ˆæ¯é˜Ÿåˆ—ï¼Œæ¨èä½¿ç”¨ Streamï¼Œä½† Redis æ¯•ç«Ÿå¹¶éä¸»è¦ç”¨äºæ¶ˆæ¯é˜Ÿåˆ—ï¼Œå› æ­¤åœ¨å¯¹æ¶ˆæ¯é˜Ÿåˆ—æ€§èƒ½è¦æ±‚è¾ƒé«˜çš„é¡¹ç›®ä¸­ï¼Œè¿˜æ˜¯æ¨èä½¿ç”¨ä¸“é—¨çš„æ¶ˆæ¯é˜Ÿåˆ—äº§å“ã€‚</p>\n</blockquote>\n<h3 id=\"å‚è€ƒ\"><a class=\"anchor\" href=\"#å‚è€ƒ\">#</a> å‚è€ƒ</h3>\n<blockquote>\n<p>å‚è€ƒå†…å®¹æ¥æºäºç½‘ç»œï¼Œæœ¬æ–‡ä¸ä¿è¯å‚è€ƒé“¾æ¥çš„é•¿æœŸæœ‰æ•ˆæ€§ï¼Œä»¥åŠå‚è€ƒå†…å®¹çš„åŸåˆ›æ€§ã€‚</p>\n</blockquote>\n<ul>\n<li>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9yZWRpcy5pby9jb21tYW5kcw==\">https://redis.io/commands</span></p>\n</li>\n<li>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuYmlsaWJpbGkuY29tL3ZpZGVvL0JWMWNyNHkxNjcxdA==\">https://www.bilibili.com/video/BV1cr4y1671t</span></p>\n<p><span class=\"label primary\">â™¥ï¸ æ¨è</span> è¿™ä¸ªæ•™ç¨‹å¤§è‡´æ¶‰åŠäº† Redis åŸºç¡€åŠåŸç†ã€åˆ†å¸ƒå¼é”å’Œ Redis æ¶ˆæ¯é˜Ÿåˆ—è¿™å‡ å¤§å†…å®¹ï¼Œé‡ç‚¹å€¾å‘äº Redis åŸºç¡€åŠå¹¶å‘è§£å†³æ–¹æ¡ˆï¼Œç›®å‰ä¼¼ä¹ä»åœ¨æŒç»­æ›´æ–°ï¼Œç®¡é“ã€é›†ç¾¤ç­‰çŸ¥è¯†å¤§æ¦‚æ˜¯è¦ç­‰åç»­æ›´æ–°å§ã€‚æ€»ä½“æ„Ÿè§‰ç›¸å½“è‰¯å¥½ï¼Œç‰¹åˆ«æ˜¯ PPT åšå¾—çœŸçš„æ˜¯çœ¼å‰ä¸€äº®ã€‚ï¼ˆå°±äº‹è®ºäº‹ï¼‰</p>\n</li>\n<li>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuY25ibG9ncy5jb20vaXRwbGF5L3AvMTEwOTg5OTAuaHRtbA==\">https://www.cnblogs.com/itplay/p/11098990.html</span></p>\n</li>\n</ul>\n",
            "tags": [
                "è®¡ç®—æœºç§‘å­¦",
                "JAVAå­¦ä¹ è·¯çº¿",
                "è¿›é˜¶ç¯‡",
                "java",
                "Spring Cloud Alibaba"
            ]
        },
        {
            "id": "https://www.chinmoku.cc/blog-log/",
            "url": "https://www.chinmoku.cc/blog-log/",
            "title": "ã€é•¿æœŸç½®é¡¶ã€‘åšå®¢æ–‡ç« æ›´æ–°æ—¥å¿—",
            "date_published": "2022-01-22T15:37:53.000Z",
            "content_html": "<div class=\"note info\">\n<p>è‡ª 2021 å¹´ 10 æœˆèµ·ï¼Œå†³å®šå¼€å§‹å¯¹åšå®¢å†…å®¹çš„æ›´æ–°è¿›è¡Œè®°å½•ã€‚æœ¬æ–‡å°†é•¿æœŸç½®é¡¶å¹¶æŒç»­æ›´æ–°ï¼Œæ­¤å‰åŸæœ‰å†…å®¹äº¦åœ¨æœ¬æ–‡åˆ—å‡ºï¼Œä½†ä¸åšè¯¦ç»†è®°å½•ã€‚æœ¬æ–‡çš„ä¸»è¦ç›®çš„åœ¨äºæ¢³ç†åšå®¢æ–‡ç« çš„å‘å¸ƒäº‹ä»¶ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥è§è¯ä¸€ä¸ªæ™®é€šå¼€å‘è€…çš„æˆé•¿ç»å†ã€‚å•çº¯å°†æœ¬æ–‡å½“åšä¸€ä¸ªåšå®¢å½’æ¡£ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚</p>\n<p>ä¸ºäº†é˜…è¯»æ–¹ä¾¿ï¼Œæœ¬æ–‡è®°å½•å†…å®¹å°†ä¼šæŒ‰æ—¶é—´å€’å™è¿›è¡Œæ’åˆ—ã€‚<span class=\"rainbow\">æœ¬æ–‡ä½œä¸ºåŠ¨æ€æ–‡ç« ï¼Œå°†ä¼šæŒç»­æ›´æ–°ï¼</span></p>\n</div>\n<h3 id=\"å‘å¸ƒæ—¥å¿—\"><a class=\"anchor\" href=\"#å‘å¸ƒæ—¥å¿—\">#</a> å‘å¸ƒæ—¥å¿—</h3>\n<p>åšå®¢æ›´æ–°æ—¥å¿—ï¼š</p>\n<ul>\n<li>2022-02-14 å‘å¸ƒã€Š<a href=\"/computer-science/java-learning-path/3-advanced/redis-tutorial/\">Redis å¦‚ä½•ä¿è¯é«˜æ€§èƒ½</a>ã€‹</li>\n<li>2022-01-22 å‘å¸ƒã€Š<a href=\"/computer-science/java-learning-path/2-intermediate/dubbo-tutorial/\">Dubbo çŸ¥è¯†æ•´ç†</a>ã€‹</li>\n<li>2021-11-03 å‘å¸ƒã€Š<a href=\"/computer-science/python/django-tutorial/\">Django ç½‘ç«™å…¨æ ˆå¼€å‘æ•™ç¨‹</a>ã€‹</li>\n<li>2021-10-18 å‘å¸ƒã€Š<a href=\"/computer-science/java-learning-path/3-advanced/zookeeper-tutorial/\">Zookeeper åŸºç¡€æ•™ç¨‹</a>ã€‹</li>\n<li>2021-10-06 ã€Š<a href=\"/language/japanese/standard-japanese/standard-japanese-02-ing/\">æ¨™æº–æ—¥æœ¬èªã®å…¥é–€ï¼ˆäºŒï¼‰</a>ã€‹ä¸´æ—¶å‘å¸ƒï¼ŒæŒç»­æ›´æ–°ã€‚</li>\n<li>2021-10-01 å‘å¸ƒã€Š<a href=\"/computer-science/python/python-all-base/\">Python åŸºç¡€çŸ¥è¯†å…¨é€šå…³</a>ã€‹</li>\n<li>2021-12-28 å‘å¸ƒã€Š<a href=\"/computer-science/java-learning-path/3-advanced/mongodb-tutorial/\">MongoDB åŸºç¡€æ•™ç¨‹</a>ã€‹</li>\n</ul>\n<p>æ—©æœŸæ–‡ç« å½’æ¡£ï¼š</p>\n<blockquote>\n<p>2021 å¹´ 10 æœˆå‰å·²å‘å¸ƒæ–‡ç« æ•´ç†å½’æ¡£ï¼Œä»…æ•´ç†ç›®å½•ï¼Œä¸è®°å½•å‘å¸ƒæ—¶é—´ã€‚</p>\n<p>å¦å¤–ï¼Œä»¥å‰æ•´ç†çš„æˆ–åœ¨å…¶ä»–å¹³å°å‘å¸ƒçš„ä¸€äº›çŸ¥è¯†ï¼Œä¾‹å¦‚  <code>VUE</code> ã€ <code>Netty</code>  ç­‰ï¼Œç¢äºä»¥å‰çš„æŠ€æœ¯æ°´å¹³è¾ƒä½ï¼Œå¦‚ä»Šå†çœ‹è‡ªæˆ‘æ„Ÿè§‰å°±ä¸é‚£ä¹ˆæ»¡æ„äº†ï¼Œæ‰€ä»¥æ—¥åä¼šå¯¹ç›¸å…³æ–‡ç« è¿›è¡Œé‡æ–°æ•´ç†ã€‚</p>\n</blockquote>\n<ul>\n<li>ã€Š<a href=\"/language/japanese/standard-japanese/standard-japanese-01/\">æ¨™æº–æ—¥æœ¬èªã®å…¥é–€ï¼ˆä¸€ï¼‰</a>ã€‹</li>\n<li>ã€Š<a href=\"/computer-science/java-learning-path/6-extension/quartz-tutorial/\">Quartz å¿«é€Ÿå…¥é—¨åŠå¸¸è§„ä½¿ç”¨</a>ã€‹</li>\n<li>ã€Š<a href=\"/computer-science/java-learning-path/6-extension/elasticsearch-tutorial/\">Elasticsearch æ•™ç¨‹</a>ã€‹</li>\n<li>ã€Š<a href=\"/computer-science/java-learning-path/5-framework/docker-tutorial/\">ç»™ï¼Œä½ è¦çš„ Docker è¯¦ç»†æ•™ç¨‹</a>ã€‹</li>\n<li>ã€Š<a href=\"/computer-science/java-learning-path/3-advanced/rabbitmq-tutorial/\">RabbitMQ - ä»ä¸‹è½½å®‰è£…åˆ°é›†ç¾¤éƒ¨ç½²</a>ã€‹</li>\n<li>ã€Š<a href=\"/computer-science/java-learning-path/3-advanced/activemq-tutorial/\">ActiveMQ - ä»ä¸‹è½½å®‰è£…åˆ°é›†ç¾¤éƒ¨ç½²</a>ã€‹</li>\n<li>ã€Š<a href=\"/computer-science/resource/wallpaper_site/\">é«˜æ¸…å£çº¸ç½‘ç«™æ¨è</a>ã€‹</li>\n<li>ã€Š<a href=\"/computer-science/others/blog-without-server/\">Hexo - æŠ€æœ¯å°ç™½æ­å»ºä¸ªäººåšå®¢</a>ã€‹</li>\n<li>ã€Š<a href=\"/computer-science/java-learning-path/2-intermediate/springcloud-tutorial/\">SpringCloud æ•™ç¨‹ï¼ˆFinchley.RELEASEï¼‰</a>ã€‹</li>\n<li>ã€Š<a href=\"/computer-science/java-learning-path/2-intermediate/webservice-tutorial/\">WebServiceï¼Œå¦‚æ­¤è€Œå·²</a>ã€‹</li>\n<li>ã€Š<a href=\"/computer-science/java-learning-path/2-intermediate/mybatis-tutorial/\">MyBatis æ•™ç¨‹</a>ã€‹</li>\n<li>ã€Š<a href=\"/computer-science/java-learning-path/2-intermediate/spring-tutorial/\">Spring æ•™ç¨‹</a>ã€‹</li>\n<li>ã€Š<a href=\"/computer-science/java-learning-path/1-basic/02-java-concurrency/\">Java å¹¶å‘ç¼–ç¨‹çŸ¥è¯†æ•´ç†</a>ã€‹</li>\n<li>ã€Š<a href=\"/computer-science/java-learning-path/1-basic/01-java-basic/\">JAVA åŸºç¡€çŸ¥è¯†å¤§ç›˜ç‚¹</a>ã€‹</li>\n</ul>\n<h3 id=\"java-å­¦ä¹ è·¯çº¿\"><a class=\"anchor\" href=\"#java-å­¦ä¹ è·¯çº¿\">#</a> Java å­¦ä¹ è·¯çº¿</h3>\n<div class=\"note primary no-icon\">\n<p>æ³¨æ„ï¼šä»¥ä¸‹åœ¨çº¿åœ°å€åŸºäº<strong>ç™¾åº¦è„‘å›¾</strong>ï¼Œåœ¨çº¿æŸ¥çœ‹éœ€è¦ç™»å½•ç™¾åº¦è´¦å·ã€‚</p>\n</div>\n<ol>\n<li>åŸºç¡€ç¯‡ï¼Œ<span class=\"exturl\" data-url=\"aHR0cDovL25hb3R1LmJhaWR1LmNvbS9maWxlL2MyNWRmM2MxZDliYTU0ZmZiMWE4Njc4ZDg0ZDA3ZTIyP3Rva2VuPWQ2OTU2MzQ4NDBlN2U1YmM=\">åœ¨çº¿é¢„è§ˆ</span></li>\n<li>è¿›é˜¶ç¯‡ï¼Œ<span class=\"exturl\" data-url=\"aHR0cDovL25hb3R1LmJhaWR1LmNvbS9maWxlLzdhYzdkNzc0ZDYyNDA1ODI4YzU5ZmZkOTY4ODI0YjFjP3Rva2VuPTM1NjFmMTFhMDRmZmExOTU=\">åœ¨çº¿é¢„è§ˆ</span></li>\n<li>é«˜çº§ç¯‡ï¼Œ<span class=\"exturl\" data-url=\"aHR0cDovL25hb3R1LmJhaWR1LmNvbS9maWxlL2QwNzNmMjdkNzI0YmE3YjhhNGUwMTA5NTUyZWI1OTM3P3Rva2VuPTM2YmIyZjUyNWY4ZmI1MTQ=\">åœ¨çº¿é¢„è§ˆ</span></li>\n<li>åº•å±‚ç¯‡ï¼Œ<span class=\"exturl\" data-url=\"aHR0cDovL25hb3R1LmJhaWR1LmNvbS9maWxlL2MyNjUxYTNiMTZlMDQyOGFhZmM4MTQ3ZmExZWJmOWZiP3Rva2VuPTY0OTE2ZGE2ODllMDA2NzA=\">åœ¨çº¿é¢„è§ˆ</span></li>\n<li>æ¶æ„ç¯‡ï¼Œ<span class=\"exturl\" data-url=\"aHR0cDovL25hb3R1LmJhaWR1LmNvbS9maWxlL2QzNTc4YTkwYzFhZDZmMDZkZmM5MzhkMGI0NjAyMWJmP3Rva2VuPTI2Mjc0Njc5NDUwYzhlZDY=\">åœ¨çº¿é¢„è§ˆ</span></li>\n<li>æ‰©å±•ç¯‡ï¼Œ<span class=\"exturl\" data-url=\"aHR0cDovL25hb3R1LmJhaWR1LmNvbS9maWxlLzA0M2QyOTc3ZTg5N2QwZDhjNmNkMjIzY2Y2ZDRlNGQzP3Rva2VuPWEyYjdjYzA3YTBjOGMzZDA=\">åœ¨çº¿é¢„è§ˆ</span></li>\n</ol>\n<div class=\"note success no-icon\">\n<p>æ³¨æ„ï¼šä»¥ä¸‹åœ°å€å¯ä¸‹è½½ xmind æ ¼å¼æ–‡ä»¶ï¼Œæ–‡ä»¶åŸºäº XMind 2022 ç‰ˆæœ¬è¿›è¡Œç¼–è¾‘ï¼Œç‰ˆæœ¬ä½äº XMind 8 å¯èƒ½å¯¼è‡´æ— æ³•æ‰“å¼€ã€‚</p>\n</div>\n<ol>\n<li>åŸºç¡€ç¯‡ï¼Œ<span class=\"exturl\" data-url=\"aHR0cHM6Ly9yZWZlcmVuY2UtMTMwMTA0Njc4OS5jb3MuYXAtbmFuamluZy5teXFjbG91ZC5jb20veG1pbmQvamF2YS1sZWFybmluZy1wYXRoLzEtYmFzaWMueG1pbmQ=\">ç‚¹å‡»ä¸‹è½½</span></li>\n<li>è¿›é˜¶ç¯‡ï¼Œ<span class=\"exturl\" data-url=\"aHR0cHM6Ly9yZWZlcmVuY2UtMTMwMTA0Njc4OS5jb3MuYXAtbmFuamluZy5teXFjbG91ZC5jb20veG1pbmQvamF2YS1sZWFybmluZy1wYXRoLzItaW50ZXJtZWRpYXRlLnhtaW5k\">ç‚¹å‡»ä¸‹è½½</span></li>\n<li>é«˜çº§ç¯‡ï¼Œ<span class=\"exturl\" data-url=\"aHR0cHM6Ly9yZWZlcmVuY2UtMTMwMTA0Njc4OS5jb3MuYXAtbmFuamluZy5teXFjbG91ZC5jb20veG1pbmQvamF2YS1sZWFybmluZy1wYXRoLzMtYWR2YW5jZWQueG1pbmQ=\">ç‚¹å‡»ä¸‹è½½</span></li>\n<li>åº•å±‚ç¯‡ï¼Œ<span class=\"exturl\" data-url=\"aHR0cHM6Ly9yZWZlcmVuY2UtMTMwMTA0Njc4OS5jb3MuYXAtbmFuamluZy5teXFjbG91ZC5jb20veG1pbmQvamF2YS1sZWFybmluZy1wYXRoLzQtdW5kZXJseWluZy54bWluZA==\">ç‚¹å‡»ä¸‹è½½</span></li>\n<li>æ¶æ„ç¯‡ï¼Œ<span class=\"exturl\" data-url=\"aHR0cHM6Ly9yZWZlcmVuY2UtMTMwMTA0Njc4OS5jb3MuYXAtbmFuamluZy5teXFjbG91ZC5jb20veG1pbmQvamF2YS1sZWFybmluZy1wYXRoLzUtZnJhbWV3b3JrLnhtaW5k\">ç‚¹å‡»ä¸‹è½½</span></li>\n<li>æ‰©å±•ç¯‡ï¼Œ<span class=\"exturl\" data-url=\"aHR0cHM6Ly9yZWZlcmVuY2UtMTMwMTA0Njc4OS5jb3MuYXAtbmFuamluZy5teXFjbG91ZC5jb20veG1pbmQvamF2YS1sZWFybmluZy1wYXRoLzYtZXh0ZW5zaW9uLnhtaW5k\">ç‚¹å‡»ä¸‹è½½</span></li>\n</ol>\n",
            "tags": []
        },
        {
            "id": "https://www.chinmoku.cc/computer-science/java-learning-path/2-intermediate/dubbo-tutorial/",
            "url": "https://www.chinmoku.cc/computer-science/java-learning-path/2-intermediate/dubbo-tutorial/",
            "title": "Dubbo çŸ¥è¯†æ•´ç†",
            "date_published": "2022-01-22T01:01:24.000Z",
            "content_html": "<div class=\"note info\">\n<p>åœ¨å¾®æœåŠ¡çŸ¥è¯†æ•´ç†çš„è¿‡ç¨‹ä¸­ï¼Œæ–­æ–­ç»­ç»­çœ‹äº†å¥½äº›æ–‡æ¡£å’Œè§†é¢‘æ•™ç¨‹ï¼Œå†™ä¸‹çš„ç¬”è®°ä¹Ÿå¾ˆæ‚ä¹±ï¼Œç°å†³å®šç¨å¾®ä¸“æ³¨ä¸€ç‚¹ï¼Œä¸€é¼“ä½œæ°”å°†è¿™å—çŸ¥è¯†æ•´ç†å®Œæ•´ã€‚</p>\n</div>\n<h3 id=\"åŸºç¡€çŸ¥è¯†\"><a class=\"anchor\" href=\"#åŸºç¡€çŸ¥è¯†\">#</a> åŸºç¡€çŸ¥è¯†</h3>\n<p>RPCï¼ˆRemote Procedure Callï¼‰æ„ä¸º<span class=\"blue\">è¿œç¨‹è¿‡ç¨‹è°ƒç”¨</span>ã€‚</p>\n<p>ğŸˆ <strong>RPC æ˜¯ç”¨æ¥å¹²ä»€ä¹ˆçš„ï¼Ÿ</strong></p>\n<p>åœ¨å¾®æœåŠ¡æ¶æ„ä¸­ï¼Œä¸€ä¸ªå®Œæ•´çš„é¡¹ç›®ï¼Œé€šå¸¸ä¼šè¢«æ‹†åˆ†æˆå¤šä¸ªå¾®å‹æœåŠ¡ï¼Œä½†åœ¨ä¸šåŠ¡è¿‡ç¨‹ä¸­ï¼Œè¿™äº›æœåŠ¡å½¼æ­¤ä¹‹é—´æ˜¯å­˜åœ¨è°ƒç”¨å…³ç³»çš„ï¼Œå¯¹äºè¿™ç§è·¨æœåŠ¡ä¹‹é—´çš„è°ƒç”¨ï¼Œé€šå¸¸å°±éœ€è¦é€šè¿‡ RPC æ¥å®Œæˆã€‚ç®€å•æ¥è¯´ï¼Œ<ins>RPC çš„ç›®çš„ï¼Œå°±æ˜¯ä¸ºäº†è®©ç¨‹åºèƒ½å¤Ÿåƒè°ƒç”¨æœ¬åœ°æ–¹æ³•ä¸€æ ·è°ƒç”¨è¿œç¨‹æ–¹æ³•</ins>ã€‚</p>\n<p>ğŸˆ <strong>æ—¢ç„¶æœ‰ HTTP è¯·æ±‚ï¼Œä¸ºä»€ä¹ˆè¿˜è¦ç”¨ RPC è°ƒç”¨ï¼Ÿ</strong></p>\n<ol>\n<li>RPC çš„å‡ºç°æ˜¯æ—©äº HTTP çš„ï¼ŒRPC ä¸»è¦æ˜¯åŸºäº TCP/IP åè®®ï¼Œè€Œ HTTP æ˜¯åŸºäº HTTP åè®®çš„ã€‚</li>\n<li>HTTP å’Œ RPC ä¸æ˜¯ä¸¤ä¸ªå¯ä»¥å¯¹ç­‰çš„æ¯”è¾ƒæ¦‚å¿µã€‚å› ä¸º HTTP æ˜¯ä¸€ä¸ªé€šä¿¡åè®®ï¼Œè€Œ RPC æ˜¯ä¸€ä¸ªå®Œæ•´çš„è¿œç¨‹è°ƒç”¨æ–¹æ¡ˆã€‚</li>\n<li>å¯ä»¥æ›´ç®€å•åœ°ç†è§£ï¼ŒHTTP å…¶å®å°±æ˜¯ä¸€ç§ RPC çš„ä¸€ç§ï¼Œå®ƒæ‹¥æœ‰æ›´åŠ å…·ä½“çš„å®ç°ï¼Œä½†å¯¹äºå¾®æœåŠ¡ä¹‹é—´çš„è¿œç¨‹è°ƒç”¨ï¼Œåˆ™ä¸å¤ªé€‚ç”¨ã€‚</li>\n<li>çŸ¥ä¹é—®ç­”ä¸Šæœ‰æ›´åŠ è¯¦ç»†çš„è®¨è®ºï¼Œå¯<span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuemhpaHUuY29tL3F1ZXN0aW9uLzQxNjA5MDcw\">ç‚¹å‡»æ­¤å¤„</span>å‰å¾€æŸ¥çœ‹ã€‚</li>\n</ol>\n<p>ğŸˆ <strong>RPC çš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ</strong></p>\n<p>è¦æ˜ç™½ RPC çš„åŸç†ï¼Œé¦–å…ˆåº”å½“äº†è§£å¦‚ä¸‹å‡ ä¸ªæ¦‚å¿µï¼š</p>\n<ul>\n<li>å®¢æˆ·ç«¯ï¼šè¿œç¨‹æ–¹æ³•çš„è°ƒç”¨è€…ã€‚</li>\n<li>å®¢æˆ·ç«¯ Stubï¼šå®ƒä¸»è¦è´Ÿè´£å°†è°ƒç”¨çš„æ–¹æ³•ã€ç±»ã€æ–¹æ³•å‚æ•°ç­‰ä¿¡æ¯ä¼ é€’åˆ°æœåŠ¡ç«¯ã€‚</li>\n<li>ç½‘ç»œä¼ è¾“ï¼šç½‘ç»œä¼ è¾“å°±æ˜¯å®¢æˆ·ç«¯å°†è¦è°ƒç”¨çš„ä¿¡æ¯è¾“åˆ°æœåŠ¡ç«¯ï¼Œç„¶åæœåŠ¡ç«¯æ‰§è¡Œå®Œä¹‹åå†æŠŠè¿”å›ç»“æœé€šè¿‡ç½‘ç»œä¼ è¾“ç»™ä½ ä¼ è¾“å›æ¥ã€‚ç½‘ç»œä¼ è¾“å³æ˜¯æŒ‡è¿™ç§åŒå‘çš„æ•°æ®ä¼ è¾“è¿‡ç¨‹ã€‚</li>\n<li>æœåŠ¡ç«¯ Stubï¼šå®ƒçš„ä¸»è¦ä½œç”¨æ˜¯æ¥æ”¶å®¢æˆ·ç«¯çš„è¯·æ±‚ï¼Œå¹¶æŒ‡å®šå¯¹åº”çš„æ–¹æ³•è¿›è¡Œå¤„ç†ï¼Œæœ€ç»ˆå°†å¤„ç†ç»“æœè¿”å›ç»™å®¢æˆ·ç«¯ã€‚</li>\n<li>æœåŠ¡ç«¯ï¼šè¿œç¨‹æ–¹æ³•çš„æä¾›è€…ã€‚</li>\n</ul>\n<p>RPC åŸç†ç¤ºæ„å›¾ï¼š</p>\n<p><img data-src=\"https://img.xfc-exclave.com/2022/03/a9236ce73afce0b86e1fceba4fc737bb1646120102.png\" alt=\"dubbo\" /></p>\n<ol>\n<li>å®¢æˆ·ç«¯ä»¥æœ¬åœ°è°ƒç”¨æ–¹å¼è°ƒç”¨è¿œç¨‹æœåŠ¡ã€‚</li>\n<li>å®¢æˆ·ç«¯ stub æ¥æ”¶åˆ°è°ƒç”¨åï¼Œå°†æ–¹æ³•ã€å‚æ•°ç­‰ç»„è£…æˆèƒ½å¤Ÿè¿›è¡Œç½‘ç»œä¼ è¾“çš„æ¶ˆæ¯ä½“ï¼ˆåºåˆ—å·ï¼‰ï¼š <code>RpcRequest</code> ã€‚</li>\n<li>å®¢æˆ·ç«¯ stub æ‰¾åˆ°è¿œç¨‹æœåŠ¡åœ°å€ï¼Œå¹¶å°†æ¶ˆæ¯å‘é€åˆ°æœåŠ¡ç«¯ã€‚</li>\n<li>æœåŠ¡ç«¯ stub æ¥æ”¶åˆ°æ¶ˆæ¯å¹¶ååºåˆ—åŒ–ä¸º Java å¯¹è±¡ï¼šRpcRequestã€‚</li>\n<li>æœåŠ¡ç«¯ stub æ ¹æ® RpcRequest ä¸­çš„ç±»ã€æ–¹æ³•ã€æ–¹æ³•å‚æ•°ç­‰ä¿¡æ¯è°ƒç”¨æœ¬åœ°æ–¹æ³•ã€‚</li>\n<li>æœåŠ¡ç«¯ stub å¾—åˆ°æ–¹æ³•æ‰§è¡Œç»“æœï¼Œå¹¶å°†å…¶åºåˆ—å·ä¸º  <code>RpcResponse</code>  å¯¹è±¡ï¼Œå¹¶é€šè¿‡ç½‘ç»œä¼ è¾“å‘é€åˆ°å®¢æˆ·ç«¯ã€‚</li>\n<li>å®¢æˆ·ç«¯ stub æ¥æ”¶åˆ°æœåŠ¡ç«¯çš„å“åº”æ•°æ®ï¼Œå¹¶ååºåˆ—åŒ–ä¸º RpcResponse å¯¹è±¡ã€‚</li>\n</ol>\n<h3 id=\"dubbo-æ¦‚è¿°\"><a class=\"anchor\" href=\"#dubbo-æ¦‚è¿°\">#</a> Dubbo æ¦‚è¿°</h3>\n<p>ğŸˆ <strong>Dubbo æ˜¯ä»€ä¹ˆï¼Ÿ</strong></p>\n<p>Dubbo æ˜¯é˜¿é‡Œå·´å·´å¼€æºçš„ä¸€æ¬¾é«˜æ€§èƒ½ã€è½»é‡çº§çš„ RPC æ¡†æ¶ï¼Œå®ƒæä¾›æœåŠ¡è‡ªåŠ¨æ³¨å†Œã€è‡ªåŠ¨å‘ç°ç­‰é«˜æ•ˆæœåŠ¡æ²»ç†æ–¹æ¡ˆï¼Œå¯ä»¥å’Œ Spring æ¡†æ¶æ— ç¼é›†æˆã€‚</p>\n<p>Dubbo æä¾›äº†å…­å¤§æ ¸å¿ƒèƒ½åŠ›ï¼š</p>\n<p><img data-src=\"https://img.xfc-exclave.com/2022/03/45a4b3ecd2e3442d440838353ac3b4f91646121130.png\" alt=\"image-20220301153753633\" /></p>\n<p>ğŸˆ <strong>ä¸ºä»€ä¹ˆè¦ç”¨ Dubboï¼Ÿ</strong></p>\n<p>éšç€æœåŠ¡åŒ–çš„è¿›ä¸€æ­¥å‘å±•ï¼ŒæœåŠ¡è¶Šæ¥è¶Šå¤šï¼ŒæœåŠ¡ä¹‹é—´çš„è°ƒç”¨å’Œä¾èµ–å…³ç³»ä¹Ÿè¶Šæ¥è¶Šå¤æ‚ï¼Œè¯ç”Ÿäº†é¢å‘æœåŠ¡çš„æ¶æ„ä½“ç³»ï¼ˆSOAï¼‰ã€‚åŒæ—¶ï¼Œä¹Ÿç”±æ­¤è¡ç”Ÿå‡ºäº†ä¸€ç³»åˆ—ç›¸åº”çš„æŠ€æœ¯ï¼Œå¦‚å¯¹æœåŠ¡æä¾›ã€æœåŠ¡è°ƒç”¨ã€è¿æ¥å¤„ç†ã€é€šä¿¡åè®®ã€åºåˆ—åŒ–æ–¹å¼ã€æœåŠ¡å‘ç°ã€æœåŠ¡è·¯ç”±ã€æ—¥å¿—è¾“å‡ºç­‰è¡Œä¸ºè¿›è¡Œå°è£…çš„æœåŠ¡æ¡†æ¶ã€‚å°±è¿™æ ·ä¸ºåˆ†å¸ƒå¼ç³»ç»Ÿçš„æœåŠ¡æ²»ç†æ¡†æ¶å°±å‡ºç°äº†ï¼Œè¿™ä¹Ÿæ˜¯ Dubbo æœ€åˆçš„äº§ç”Ÿã€‚</p>\n<p>ğŸˆ <strong>Dubbo çš„æ ¸å¿ƒæ¶æ„</strong></p>\n<p>ä¸‹å›¾æ˜¯ Dubbo å®˜ç½‘æè¿°çš„åŸºæœ¬åŸç†å›¾ï¼š</p>\n<p><img data-src=\"https://img.xfc-exclave.com/2022/03/d2007d024eb6dd4c9c6fa459e7300aab1646120941.png\" alt=\"Dubbo Architecture\" width=\"500px\" /></p>\n<p>å…¶ä¸­ï¼ŒDubbo é»˜è®¤ä½¿ç”¨ zookeeper ä½œä¸ºå…¶æ³¨å†Œä¸­å¿ƒï¼Œç›‘æ§ä¸­å¿ƒåœ¨ Dubbo çš„æ¶æ„ä¸­å¹¶éå¿…é¡»ã€‚</p>\n<h3 id=\"å¿«é€Ÿå…¥é—¨\"><a class=\"anchor\" href=\"#å¿«é€Ÿå…¥é—¨\">#</a> å¿«é€Ÿå…¥é—¨</h3>\n<blockquote>\n<p>å¦‚å‰æ–‡æ‰€è¿°ï¼ŒDubbo é»˜è®¤ä½¿ç”¨ zookeeper ä½œä¸ºå…¶æ³¨å†Œä¸­å¿ƒï¼Œå› æ­¤ï¼Œåœ¨æ­£å¼å…¥é—¨å‰ï¼Œéœ€è¦äº†è§£å¦‚ä½•å®‰è£… zookeeperï¼Œzookeeper å®‰è£…åŠç›¸å…³åŸºç¡€çŸ¥è¯†ï¼Œå¯å‚è€ƒæ–‡ç« ã€Š<a href=\"/computer-science/java-learning-path/3-advanced/zookeeper-tutorial/\">Zookeeper åŸºç¡€æ•™ç¨‹</a>ã€‹ã€‚</p>\n</blockquote>\n<div class=\"note danger no-icon\">\n<p>é›†æˆå®ä¾‹ä»£ç å·²ä¸Šä¼ åˆ° Github ä»“åº“ï¼Œå¯è‡ªè¡ŒæŸ¥çœ‹ï¼Œè‡ªå‡ºä¸è¿›è¡Œè¯¦è¿°ï¼š</p>\n<ul>\n<li>Spring é›†æˆ Dubboï¼Œè¯·<span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL3hmYy1leGNsYXZlL2Jsb2ctcHJvamVjdC90cmVlL21hc3Rlci81YjUzMGQvZHViYm8tcHJv\">ç‚¹å‡»æ­¤å¤„</span>ã€‚</li>\n<li>SpringBoot é›†æˆ Dubboï¼Œè¯·<span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL3hmYy1leGNsYXZlL2Jsb2ctcHJvamVjdC90cmVlL21hc3Rlci81YjUzMGQvc3ByaW5nYm9vdC1kdWJibw==\">ç‚¹å‡»æ­¤å¤„</span>ã€‚</li>\n</ul>\n</div>\n<h3 id=\"é«˜çº§ç‰¹æ€§\"><a class=\"anchor\" href=\"#é«˜çº§ç‰¹æ€§\">#</a> é«˜çº§ç‰¹æ€§</h3>\n<h4 id=\"dubbo-admin\"><a class=\"anchor\" href=\"#dubbo-admin\">#</a> Dubbo Admin</h4>\n<ol>\n<li>\n<p>ä»‹ç»</p>\n<p>Dubbo Admin æ˜¯ä¸€ä¸ªé€šè¿‡ vue + springboot å®ç°çš„ Dubbo å¯è§†åŒ–ç®¡ç†ç•Œé¢ã€‚</p>\n</li>\n<li>\n<p>ä¸‹è½½</p>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL2FwYWNoZS9kdWJiby1hZG1pbg==\">https://github.com/apache/dubbo-admin</span></p>\n</li>\n<li>\n<p>åç«¯éƒ¨ç½²</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">git</span> clone https://github.com/apache/dubbo-admin.git</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token builtin class-name\">cd</span> dubbo-admin-server</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>mvn clean package</pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token builtin class-name\">cd</span> target</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>java -jar dubbo-admin-server-0.1.jar</pre></td></tr></table></figure></li>\n<li>\n<p>å‰ç«¯éƒ¨ç½²</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token builtin class-name\">cd</span> dubbo-admin-ui</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token function\">npm</span> <span class=\"token function\">install</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token function\">npm</span> run dev</pre></td></tr></table></figure></li>\n<li>\n<p>æ³¨æ„äº‹é¡¹</p>\n<ul>\n<li>Dubbo Admin å‰ç«¯ä¾èµ–äº node.js ç¯å¢ƒã€‚</li>\n<li>Dubbo Admin é»˜è®¤è´¦å·å¯†ç å‡ä¸º rootã€‚</li>\n<li>Dubbo é»˜è®¤ä½¿ç”¨ 20880 ç«¯å£è¿æ¥æ³¨å†Œä¸­å¿ƒï¼ŒåŒä¸€ä¸»æœºå¤šä¸ª Dubbo å®¢æˆ·ç«¯æ—¶åº”æ³¨æ„é¿å…ç«¯å£å†²çªã€‚</li>\n<li>æ­¤éƒ¨åˆ†å°½é‡ç®€åŒ–ï¼Œå¦‚æœ‰ç–‘é—®ï¼Œå¯å‚è€ƒ Dubbo å®˜æ–¹æä¾›çš„ <span class=\"exturl\" data-url=\"aHR0cHM6Ly9kdWJiby5hcGFjaGUub3JnL3poL2RvY3MvdjIuNy9hZG1pbi9vcHMv\">Dubbo Admin è¿ç»´æŒ‡å—</span>ã€‚</li>\n</ul>\n</li>\n</ol>\n<h4 id=\"åè®®ä¸åºåˆ—åŒ–\"><a class=\"anchor\" href=\"#åè®®ä¸åºåˆ—åŒ–\">#</a> åè®®ä¸åºåˆ—åŒ–</h4>\n<p>æˆ‘ä»¬æŠŠå¯¹è±¡è½¬æ¢ä¸ºå­—èŠ‚åºåˆ—çš„è¿‡ç¨‹ç§°ä¸ºå¯¹è±¡çš„åºåˆ—åŒ–ï¼ŒæŠŠå­—èŠ‚åºåˆ—æ¢å¤ä¸ºå¯¹è±¡çš„è¿‡ç¨‹ç§°ä¸ºå¯¹è±¡çš„ååºåˆ—åŒ–ã€‚è€Œ Dubbo éœ€è¦è¿›è¡Œç½‘ç»œé€šä¿¡ï¼Œå°±å¿…ç„¶éœ€è¦å®ç°åºåˆ—åŒ–å’Œååºåˆ—åŒ–çš„è¿‡ç¨‹ã€‚å…¶å®ç°åºåˆ—åŒ–çš„æ–¹å¼ä¹Ÿå¾ˆç®€å•ï¼Œåªéœ€è¦ä½¿ä¼ è¾“çš„å¯¹è±¡ç±»å®ç°  <code>Serializable</code>  æ¥å£å³å¯ã€‚</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">User</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">Serializable</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Integer</span> id<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>ğŸˆ <strong>Dubbo æ”¯æŒçš„åè®®</strong></p>\n<p>Dobbo æ”¯æŒçš„åè®®åŒ…æ‹¬ï¼šdubboã€rmiã€hessianã€httpã€webserviceã€thriftã€memcachedã€redisã€restã€‚å…¶ä¸­ï¼Œ <code>dubbo://</code>  æ˜¯ Dobbo é»˜è®¤æ”¯æŒçš„åè®®ã€‚</p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th>Dubbo</th>\n<th>RMI</th>\n<th>Hessian</th>\n<th>Http</th>\n<th>WebService</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>è¿æ¥æ•°</td>\n<td>å•ä¸ª</td>\n<td>å¤šä¸ª</td>\n<td>å¤šä¸ª</td>\n<td>å¤šä¸ª</td>\n<td>å¤šä¸ª</td>\n</tr>\n<tr>\n<td>è¿æ¥ç±»å‹</td>\n<td>é•¿è¿æ¥</td>\n<td>çŸ­è¿æ¥</td>\n<td>çŸ­è¿æ¥</td>\n<td>çŸ­è¿æ¥</td>\n<td>çŸ­è¿æ¥</td>\n</tr>\n<tr>\n<td>é€šä¿¡åè®®</td>\n<td>TCP</td>\n<td>TCP</td>\n<td>HTTP</td>\n<td>HTTP</td>\n<td>HTTP</td>\n</tr>\n<tr>\n<td>ä¼ è¾“æ–¹å¼</td>\n<td>NIO</td>\n<td>åŒæ­¥</td>\n<td>åŒæ­¥</td>\n<td>åŒæ­¥</td>\n<td>åŒæ­¥</td>\n</tr>\n<tr>\n<td>åºåˆ—åŒ–</td>\n<td>Hessian</td>\n<td>Java æ ‡å‡†äºŒè¿›åˆ¶</td>\n<td>Hessian</td>\n<td>è¡¨å•åºåˆ—åŒ–</td>\n<td>SOAP æ–‡æœ¬åºåˆ—åŒ–</td>\n</tr>\n<tr>\n<td>ä½¿ç”¨åœºæ™¯</td>\n<td>å¤§å¹¶å‘ï¼Œå°æ•°æ®</td>\n<td>å¸¸è§„</td>\n<td>æ–‡ä»¶ã€é¡µé¢</td>\n<td>æ”¯æŒå®¢æˆ·ç«¯æˆ– js è°ƒç”¨</td>\n<td>ç³»ç»Ÿé›†æˆï¼Œè·¨è¯­è¨€</td>\n</tr>\n</tbody>\n</table>\n<p>Dubbo é’ˆå¯¹ä¸åŒæœåŠ¡ï¼Œå¯ä»¥é€‰æ‹©ä½¿ç”¨ä¸åŒçš„åè®®ï¼š</p>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token prolog\">&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>beans</span> <span class=\"token attr-name\">xmlns</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.springframework.org/schema/beans<span class=\"token punctuation\">\"</span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>xsi</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.w3.org/2001/XMLSchema-instance<span class=\"token punctuation\">\"</span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>dubbo</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://dubbo.apache.org/schema/dubbo<span class=\"token punctuation\">\"</span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token attr-name\"><span class=\"token namespace\">xsi:</span>schemaLocation</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-4.3.xsd http://dubbo.apache.org/schema/dubbo http://dubbo.apache.org/schema/dubbo/dubbo.xsd<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span> </pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">dubbo:</span>application</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>world<span class=\"token punctuation\">\"</span></span>  <span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">dubbo:</span>registry</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>registry<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">address</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>10.20.141.150:9090<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">username</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>admin<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">password</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>hello1234<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token comment\">&lt;!-- å¤šåè®®é…ç½® --></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">dubbo:</span>protocol</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>dubbo<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">port</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>20880<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">dubbo:</span>protocol</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>rmi<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">port</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>1099<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token comment\">&lt;!-- ä½¿ç”¨ dubbo åè®®æš´éœ²æœåŠ¡ --></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">dubbo:</span>service</span> <span class=\"token attr-name\">interface</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>com.alibaba.hello.api.HelloService<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">version</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>1.0.0<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">ref</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>helloService<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">protocol</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>dubbo<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token comment\">&lt;!-- ä½¿ç”¨ rmi åè®®æš´éœ²æœåŠ¡ --></span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">dubbo:</span>service</span> <span class=\"token attr-name\">interface</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>com.alibaba.hello.api.DemoService<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">version</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>1.0.0<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">ref</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>demoService<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">protocol</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>rmi<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span> </pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>beans</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p>æ­¤å¤–ï¼ŒDubbo ä¹Ÿå¯ä»¥åŒæ—¶ä½¿ç”¨å¤šä¸ªåè®®æš´éœ²æœåŠ¡ï¼š</p>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token prolog\">&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>beans</span> <span class=\"token attr-name\">xmlns</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.springframework.org/schema/beans<span class=\"token punctuation\">\"</span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>xsi</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.w3.org/2001/XMLSchema-instance<span class=\"token punctuation\">\"</span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>dubbo</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://dubbo.apache.org/schema/dubbo<span class=\"token punctuation\">\"</span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token attr-name\"><span class=\"token namespace\">xsi:</span>schemaLocation</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-4.3.xsd http://dubbo.apache.org/schema/dubbo http://dubbo.apache.org/schema/dubbo/dubbo.xsd<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">dubbo:</span>application</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>world<span class=\"token punctuation\">\"</span></span>  <span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">dubbo:</span>registry</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>registry<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">address</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>10.20.141.150:9090<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">username</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>admin<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">password</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>hello1234<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token comment\">&lt;!-- å¤šåè®®é…ç½® --></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">dubbo:</span>protocol</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>dubbo<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">port</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>20880<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">dubbo:</span>protocol</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>hessian<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">port</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>8080<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token comment\">&lt;!-- ä½¿ç”¨å¤šä¸ªåè®®æš´éœ²æœåŠ¡ --></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">dubbo:</span>service</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>helloService<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">interface</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>com.alibaba.hello.api.HelloService<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">version</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>1.0.0<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">protocol</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>dubbo,hessian<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>beans</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><h4 id=\"è¶…æ—¶ä¸é‡è¯•æœºåˆ¶\"><a class=\"anchor\" href=\"#è¶…æ—¶ä¸é‡è¯•æœºåˆ¶\">#</a> è¶…æ—¶ä¸é‡è¯•æœºåˆ¶</h4>\n<p>é€šè¿‡è¿›è¡Œå¦‚ä¸‹é…ç½®ï¼Œå³å¯å®ç° Dubbo æœåŠ¡è°ƒç”¨çš„è¶…æ—¶ä¸é‡è¯•ï¼š</p>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">&lt;!-- æœåŠ¡è°ƒç”¨è¶…æ—¶è®¾ç½®ä¸º 5 ç§’ï¼Œé‡è¯• 3 æ¬¡ --></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">dubbo:</span>service</span> <span class=\"token attr-name\">interface</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>com.provider.service.DemoService<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">ref</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>demoService<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">retries</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>3<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">timeout</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>5000<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\">&lt;!-- &lt;dubbo:consumer timeout=\"1000\">&lt;/dubbo:consumer>--></span></pre></td></tr></table></figure><p>Dubbo è¶…æ—¶è®¾ç½®å¯ä»¥æœ‰ä¸¤ç§æ–¹å¼ï¼š</p>\n<ol>\n<li>æœåŠ¡æä¾›è€…ç«¯è®¾ç½®è¶…æ—¶ï¼ˆæ¨èï¼‰ã€‚</li>\n<li>æœåŠ¡æ¶ˆè´¹è€…ç«¯è®¾ç½®è¶…æ—¶ï¼Œå…¶ä¼˜å…ˆçº§æ›´é«˜ã€‚</li>\n</ol>\n<p>æœåŠ¡è°ƒç”¨è¶…æ—¶ï¼ŒDubbo ä¼šè‡ªåŠ¨è¿›è¡Œé‡è¯•ï¼Œå½“æœªæŒ‡å®šé‡è¯•æ¬¡æ•°æ—¶ï¼Œé»˜è®¤ä¸ºé‡è¯•ä¸¤æ¬¡ã€‚</p>\n<blockquote>\n<p>é™¤äº†é€šè¿‡ xml çš„æ–¹å¼æŒ‡å®š Dubbo è¶…æ—¶é‡è¯•ç­‰ç›¸å…³å‚æ•°å¤–ï¼Œä¹Ÿå¯ä»¥é€šè¿‡æŒ‡å®šæ³¨è§£å‚æ•°çš„æ–¹å¼å®ç°ï¼š</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>apache<span class=\"token punctuation\">.</span>dubbo<span class=\"token punctuation\">.</span>config<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Service</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token annotation punctuation\">@Service</span><span class=\"token punctuation\">(</span>timeout <span class=\"token operator\">=</span> <span class=\"token number\">3000</span><span class=\"token punctuation\">,</span> retries <span class=\"token operator\">=</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>æ³¨ï¼šDubbo æ–°ç‰ˆæœ¬ä¸­  <code>@Service</code>  å’Œ  <code>@Reference</code>  å·²è¢«æ ‡è®°ä¸ºè¿‡æ—¶ï¼Œå¹¶ä½¿ç”¨  <code>DubboService</code>  å’Œ  <code>DubboReference</code>  è¿›è¡Œæ›¿ä»£ã€‚</p>\n</blockquote>\n<h4 id=\"å¤šç‰ˆæœ¬\"><a class=\"anchor\" href=\"#å¤šç‰ˆæœ¬\">#</a> å¤šç‰ˆæœ¬</h4>\n<p>åœ¨ Dubbo ä¸­å¯ä»¥ä¸ºåŒä¸€ä¸ªæœåŠ¡é…ç½®å¤šä¸ªç‰ˆæœ¬ï¼Œå½“ä¸€ä¸ªæ¥å£å®ç°ï¼Œå‡ºç°ä¸å…¼å®¹å‡çº§æ—¶ï¼Œå¯ä»¥ç”¨ç‰ˆæœ¬å·è¿‡æ¸¡ï¼Œç‰ˆæœ¬å·ä¸åŒçš„æœåŠ¡ç›¸äº’é—´ä¸å¼•ç”¨ã€‚</p>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">&lt;!-- æœåŠ¡æä¾›è€…ç«¯ --></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">dubbo:</span>service</span> <span class=\"token attr-name\">interface</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>com.foo.BarService<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">version</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>1.0.0<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\">&lt;!-- æœåŠ¡æ¶ˆè´¹è€…ç«¯ --></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">dubbo:</span>reference</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>barService<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">interface</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>com.foo.BarService<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">version</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>*<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></pre></td></tr></table></figure><p>åŒæ ·ï¼Œé™¤äº†ä½¿ç”¨ xml è¿›è¡Œé…ç½®å¤–ï¼Œå¤šç‰ˆæœ¬å‚æ•°ä¹Ÿå¯ä»¥é€šè¿‡æ³¨è§£çš„æ–¹å¼è¿›è¡ŒæŒ‡å®šï¼š</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// æœåŠ¡æä¾›è€…ç«¯</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token annotation punctuation\">@Service</span><span class=\"token punctuation\">(</span>version <span class=\"token operator\">=</span> <span class=\"token string\">\"1.0.0\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\">// æœåŠ¡æ¶ˆè´¹è€…ç«¯</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token annotation punctuation\">@Reference</span><span class=\"token punctuation\">(</span>version <span class=\"token operator\">=</span> <span class=\"token string\">\"1.0.0\"</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><h4 id=\"è´Ÿè½½å‡è¡¡\"><a class=\"anchor\" href=\"#è´Ÿè½½å‡è¡¡\">#</a> è´Ÿè½½å‡è¡¡</h4>\n<p>åœ¨é›†ç¾¤è´Ÿè½½å‡è¡¡æ—¶ï¼ŒDubbo æä¾›äº†å¤šç§å‡è¡¡ç­–ç•¥ï¼Œç¼ºçœä¸º  <code>random</code>  éšæœºè°ƒç”¨ã€‚å…·ä½“å®ç°ä¸Šï¼ŒDubbo æä¾›çš„æ˜¯å®¢æˆ·ç«¯è´Ÿè½½å‡è¡¡ï¼Œå³ç”± Consumer é€šè¿‡è´Ÿè½½å‡è¡¡ç®—æ³•å¾—å‡ºéœ€è¦å°†è¯·æ±‚æäº¤åˆ°å“ªä¸ª Provider å®ä¾‹ã€‚</p>\n<p>ç›®å‰ Dubbo å†…ç½®äº†å¦‚ä¸‹è´Ÿè½½å‡è¡¡ç®—æ³•ï¼Œç”¨æˆ·å¯ç›´æ¥é…ç½®ä½¿ç”¨ï¼š</p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">ç®—æ³•</th>\n<th style=\"text-align:left\">ç‰¹æ€§</th>\n<th style=\"text-align:left\">å¤‡æ³¨</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">RandomLoadBalance</td>\n<td style=\"text-align:left\">åŠ æƒéšæœº</td>\n<td style=\"text-align:left\">é»˜è®¤ç®—æ³•ï¼Œé»˜è®¤æƒé‡ç›¸åŒ</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">RoundRobinLoadBalance</td>\n<td style=\"text-align:left\">åŠ æƒè½®è¯¢</td>\n<td style=\"text-align:left\">å€Ÿé‰´äº Nginx çš„å¹³æ»‘åŠ æƒè½®è¯¢ç®—æ³•ï¼Œé»˜è®¤æƒé‡ç›¸åŒï¼Œ</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">LeastActiveLoadBalance</td>\n<td style=\"text-align:left\">æœ€å°‘æ´»è·ƒä¼˜å…ˆ + åŠ æƒéšæœº</td>\n<td style=\"text-align:left\">èƒŒåæ˜¯èƒ½è€…å¤šåŠ³çš„æ€æƒ³</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">ShortestResponseLoadBalance</td>\n<td style=\"text-align:left\">æœ€çŸ­å“åº”ä¼˜å…ˆ + åŠ æƒéšæœº</td>\n<td style=\"text-align:left\">æ›´åŠ å…³æ³¨å“åº”é€Ÿåº¦</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">ConsistentHashLoadBalance</td>\n<td style=\"text-align:left\">ä¸€è‡´æ€§ Hash</td>\n<td style=\"text-align:left\">ç¡®å®šçš„å…¥å‚ï¼Œç¡®å®šçš„æä¾›è€…ï¼Œé€‚ç”¨äºæœ‰çŠ¶æ€è¯·æ±‚</td>\n</tr>\n</tbody>\n</table>\n<p>xml é…ç½®æ–¹å¼ï¼š</p>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">&lt;!-- æœåŠ¡ç«¯çº§åˆ« --></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">dubbo:</span>service</span> <span class=\"token attr-name\">interface</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>...<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">loadbalance</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>roundrobin<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\">&lt;!-- æœåŠ¡ç«¯æ–¹æ³•çº§åˆ« --></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">dubbo:</span>service</span> <span class=\"token attr-name\">interface</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>...<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">dubbo:</span>method</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>...<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">loadbalance</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>roundrobin<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token namespace\">dubbo:</span>service</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token comment\">&lt;!-- æ¶ˆè´¹ç«¯çº§åˆ« --></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">dubbo:</span>reference</span> <span class=\"token attr-name\">interface</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>...<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">loadbalance</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>roundrobin<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\">&lt;!-- æ¶ˆè´¹ç«¯æ–¹æ³•çº§åˆ« --></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">dubbo:</span>reference</span> <span class=\"token attr-name\">interface</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>...<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">dubbo:</span>method</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>...<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">loadbalance</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>roundrobin<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token namespace\">dubbo:</span>reference</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p>æ³¨è§£é…ç½®æ–¹å¼ï¼š</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token annotation punctuation\">@Reference</span><span class=\"token punctuation\">(</span>loadbalance <span class=\"token operator\">=</span> <span class=\"token string\">\"random\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token annotation punctuation\">@Service</span><span class=\"token punctuation\">(</span>loadbalance <span class=\"token operator\">=</span> <span class=\"token string\">\"random\"</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><h4 id=\"é›†ç¾¤å®¹é”™\"><a class=\"anchor\" href=\"#é›†ç¾¤å®¹é”™\">#</a> é›†ç¾¤å®¹é”™</h4>\n<p>åœ¨é›†ç¾¤è°ƒç”¨å¤±è´¥æ—¶ï¼ŒDubbo æä¾›äº†å¤šç§å®¹é”™æ–¹æ¡ˆï¼Œç¼ºçœä¸º failover é‡è¯•ã€‚Dubbo ä¸»è¦æœ‰å¦‚ä¸‹å‡ ç§é›†ç¾¤å®¹é”™æ¨¡å¼ï¼š</p>\n<ol>\n<li>Failoverï¼šå¤±è´¥è‡ªåŠ¨åˆ‡æ¢ï¼Œå½“å‡ºç°å¤±è´¥ï¼Œé‡è¯•å…¶å®ƒæœåŠ¡å™¨ã€‚é€šå¸¸ç”¨äºè¯»æ“ä½œï¼Œä½†é‡è¯•ä¼šå¸¦æ¥æ›´é•¿å»¶è¿Ÿã€‚å¯é€šè¿‡  <code>retries=&quot;2&quot;</code>  æ¥è®¾ç½®é‡è¯•æ¬¡æ•°ï¼ˆä¸å«ç¬¬ä¸€æ¬¡ï¼‰ã€‚</li>\n<li>Failfastï¼šå¿«é€Ÿå¤±è´¥ï¼Œåªå‘èµ·ä¸€æ¬¡è°ƒç”¨ï¼Œå¤±è´¥ç«‹å³æŠ¥é”™ã€‚é€šå¸¸ç”¨äºéå¹‚ç­‰æ€§çš„å†™æ“ä½œï¼Œæ¯”å¦‚æ–°å¢è®°å½•ã€‚</li>\n<li>Failsafeï¼šå¤±è´¥å®‰å…¨ï¼Œå‡ºç°å¼‚å¸¸æ—¶ï¼Œç›´æ¥å¿½ç•¥ã€‚é€šå¸¸ç”¨äºå†™å…¥å®¡è®¡æ—¥å¿—ç­‰æ“ä½œã€‚</li>\n<li>Failbackï¼šå¤±è´¥è‡ªåŠ¨æ¢å¤ï¼Œåå°è®°å½•å¤±è´¥è¯·æ±‚ï¼Œå®šæ—¶é‡å‘ã€‚é€šå¸¸ç”¨äºæ¶ˆæ¯é€šçŸ¥æ“ä½œã€‚</li>\n<li>Forkingï¼šå¹¶è¡Œè°ƒç”¨å¤šä¸ªæœåŠ¡å™¨ï¼Œåªè¦ä¸€ä¸ªæˆåŠŸå³è¿”å›ã€‚é€šå¸¸ç”¨äºå®æ—¶æ€§è¦æ±‚è¾ƒé«˜çš„è¯»æ“ä½œï¼Œä½†éœ€è¦æµªè´¹æ›´å¤šæœåŠ¡èµ„æºã€‚å¯é€šè¿‡  <code>forks=&quot;2&quot;</code>  æ¥è®¾ç½®æœ€å¤§å¹¶è¡Œæ•°ã€‚</li>\n<li>Broadcastï¼šå¹¿æ’­è°ƒç”¨æ‰€æœ‰æä¾›è€…ï¼Œé€ä¸ªè°ƒç”¨ï¼Œä»»æ„ä¸€å°æŠ¥é”™åˆ™æŠ¥é”™ã€‚é€šå¸¸ç”¨äºé€šçŸ¥æ‰€æœ‰æä¾›è€…æ›´æ–°ç¼“å­˜æˆ–æ—¥å¿—ç­‰æœ¬åœ°èµ„æºä¿¡æ¯ã€‚</li>\n<li>Availableï¼šè°ƒç”¨ç›®å‰å¯ç”¨çš„å®ä¾‹ï¼ˆåªè°ƒç”¨ä¸€ä¸ªï¼‰ï¼Œå¦‚æœå½“å‰æ²¡æœ‰å¯ç”¨çš„å®ä¾‹ï¼Œåˆ™æŠ›å‡ºå¼‚å¸¸ã€‚é€šå¸¸ç”¨äºä¸éœ€è¦è´Ÿè½½å‡è¡¡çš„åœºæ™¯ã€‚</li>\n<li>Mergeableï¼šå°†é›†ç¾¤ä¸­çš„è°ƒç”¨ç»“æœèšåˆèµ·æ¥è¿”å›ç»“æœï¼Œé€šå¸¸å’Œ group ä¸€èµ·é…åˆä½¿ç”¨ã€‚é€šè¿‡åˆ†ç»„å¯¹ç»“æœè¿›è¡Œèšåˆå¹¶è¿”å›èšåˆåçš„ç»“æœï¼Œæ¯”å¦‚èœå•æœåŠ¡ï¼Œç”¨ group åŒºåˆ†åŒä¸€æ¥å£çš„å¤šç§å®ç°ï¼Œç°åœ¨æ¶ˆè´¹æ–¹éœ€ä»æ¯ç§ group ä¸­è°ƒç”¨ä¸€æ¬¡å¹¶è¿”å›ç»“æœï¼Œå¯¹ç»“æœè¿›è¡Œåˆå¹¶ä¹‹åè¿”å›ï¼Œè¿™æ ·å°±å¯ä»¥å®ç°èšåˆèœå•é¡¹ã€‚</li>\n<li>ZoneAwareï¼šå¤šæ³¨å†Œä¸­å¿ƒè®¢é˜…çš„åœºæ™¯ï¼Œæ³¨å†Œä¸­å¿ƒé›†ç¾¤é—´çš„è´Ÿè½½å‡è¡¡ã€‚</li>\n</ol>\n<p>å¯ä»¥é€šè¿‡å¦‚ä¸‹æ–¹å¼æŒ‡å®šé›†ç¾¤å®¹é”™æ¨¡å¼ï¼š</p>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">&lt;!-- åœ¨æœåŠ¡ç«¯è®¾ç½® --></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">dubbo:</span>service</span> <span class=\"token attr-name\">cluster</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>failsafe<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\">&lt;!-- æˆ–åœ¨æ¶ˆè´¹ç«¯è®¾ç½® --></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">dubbo:</span>reference</span> <span class=\"token attr-name\">cluster</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>failsafe<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></pre></td></tr></table></figure><h4 id=\"æœåŠ¡é™çº§\"><a class=\"anchor\" href=\"#æœåŠ¡é™çº§\">#</a> æœåŠ¡é™çº§</h4>\n<p>Dubbo å¯ä»¥é€šè¿‡æœåŠ¡é™çº§åŠŸèƒ½ä¸´æ—¶å±è”½æŸä¸ªå‡ºé”™çš„éå…³é”®æœåŠ¡ï¼Œå¹¶å®šä¹‰é™çº§åçš„è¿”å›ç­–ç•¥ã€‚</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token annotation punctuation\">@Reference</span><span class=\"token punctuation\">(</span>mock <span class=\"token operator\">=</span> <span class=\"token string\">\"forse:return null\"</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><ul>\n<li><code>mock=force:return null</code>  è¡¨ç¤ºæ¶ˆè´¹æ–¹å¯¹è¯¥æœåŠ¡çš„æ–¹æ³•è°ƒç”¨éƒ½ç›´æ¥è¿”å› null å€¼ï¼Œä¸å‘èµ·è¿œç¨‹è°ƒç”¨ã€‚ç”¨æ¥å±è”½ä¸é‡è¦æœåŠ¡ä¸å¯ç”¨æ—¶å¯¹è°ƒç”¨æ–¹çš„å½±å“ã€‚</li>\n<li>è¿˜å¯ä»¥æ”¹ä¸º  <code>mock=fail:return+null</code>  è¡¨ç¤ºæ¶ˆè´¹æ–¹å¯¹è¯¥æœåŠ¡çš„æ–¹æ³•è°ƒç”¨åœ¨å¤±è´¥åï¼Œå†è¿”å› null å€¼ï¼Œä¸æŠ›å¼‚å¸¸ã€‚ç”¨æ¥å®¹å¿ä¸é‡è¦æœåŠ¡ä¸ç¨³å®šæ—¶å¯¹è°ƒç”¨æ–¹çš„å½±å“ã€‚</li>\n</ul>\n<h3 id=\"é¢è¯•é¢˜\"><a class=\"anchor\" href=\"#é¢è¯•é¢˜\">#</a> é¢è¯•é¢˜</h3>\n<div class=\"note danger no-icon\">\n<p>ç¢äºç²¾åŠ›ï¼Œè¿™ä¸€éƒ¨åˆ†çš„å†…å®¹å¹¶æš‚æ—¶åšçš„æ¯”è¾ƒç®€å•ï¼Œéƒ¨åˆ†é—®é¢˜ä¹Ÿæš‚æœªç»™å‡ºå‚è€ƒç­”æ¡ˆå’Œç›¸å…³æç¤ºã€‚ä½œç­”è€…å¯æ ¹æ®å‰æ–‡ä¸­çš„çŸ¥è¯†å†…å®¹è‡ªè¡Œæ€»ç»“ã€‚</p>\n<p>åç»­çœ‹æƒ…å†µä¼šè¿›è¡Œæ›´æ–°ã€‚</p>\n</div>\n<ol>\n<li class=\"quiz fill\">\n<p>Dubbo æ˜¯ä»€ä¹ˆï¼Ÿ</p>\n<blockquote>\n<p>å‚è€ƒ <strong>Dubbo æ¦‚è¿°</strong>éƒ¨åˆ†ä½œç­”å³å¯ã€‚</p>\n<p><span class=\"mistake\">è¿™é“é¢˜å¾€å¾€æ˜¯ä½œä¸º Dubbo é¢è¯•çš„é¢„çƒ­é¢˜ç›®ï¼Œç®€å•å›ç­”å³å¯ï¼Œç­‰å¾…é¢è¯•å®˜çš„è¿½é—®ã€‚ä½†å…¶æœ¬è´¨éœ€è¦æ˜ç¡®ï¼ŒDubbo æœ¬è´¨ä¸Šå°±æ˜¯ä¸€æ¬¾ RPC æ¡†æ¶ã€‚</span></p>\n</blockquote>\n</li>\n<li class=\"quiz fill\">\n<p>è¯•ä¸¾å‡ ä¸ª Dubbo æ”¯æŒçš„åè®®ã€‚</p>\n<blockquote>\n<p>Dobbo æ”¯æŒçš„åè®®åŒ…æ‹¬ï¼šdubboã€rmiã€hessianã€httpã€webserviceã€thriftã€memcachedã€redisã€restã€‚å…¶ä¸­ï¼Œ <code>dubbo://</code>  æ˜¯ Dobbo é»˜è®¤æ”¯æŒçš„åè®®ã€‚</p>\n<p><span class=\"mistake\">é€‰æ‹©å‡ ä¸ªç†ŸçŸ¥çš„åè®®ä½œç­”å³å¯ã€‚</span></p>\n</blockquote>\n</li>\n<li class=\"quiz fill\">\n<p>Dubbo å†…ç½®äº†å“ªå‡ ç§æœåŠ¡å®¹å™¨ï¼Ÿ</p>\n</li>\n<li class=\"quiz fill\">\n<p>Dubbo ä¸­æœ‰å“ªå‡ ç§ä¸»è¦è§’è‰²ï¼Ÿ</p>\n</li>\n<li class=\"quiz fill\">\n<p>Dubbo æœåŠ¡æ³¨å†Œä¸å‘ç°æµç¨‹ã€‚</p>\n</li>\n<li class=\"quiz fill\">\n<p>Dubbo çš„æ³¨å†Œä¸­å¿ƒå¦‚ä½•å®ç°ï¼Œå®ç°æ–¹æ¡ˆå’Œæ¨èæ–¹æ¡ˆã€‚</p>\n</li>\n<li class=\"quiz\">\n<p>Dubbo é»˜è®¤é‡‡ç”¨çš„é€šä¿¡æ¡†æ¶æ˜¯<span class=\"gap\"></span>ã€‚</p>\n<ul class=\"options\">\n<li>Mina</li>\n<li class=\"correct\">Netty</li>\n<li>Grizzly</li>\n<li>xSocket</li>\n</ul>\n<blockquote>\n<p><span class=\"mistake\">é™¤ xSocket å¤–ï¼Œå…¶ä»–ä¸‰ä¸ªé€‰é¡¹å‡æ˜¯ Dubbo æ”¯æŒçš„é€šä¿¡æ¡†æ¶ã€‚</span></p>\n</blockquote>\n</li>\n<li class=\"quiz fill\">\n<p>Dubbo æ˜¯å¦‚ä½•è¿›è¡Œåºåˆ—å·ä¸ååºåˆ—åŒ–çš„ï¼Ÿ</p>\n</li>\n</ol>\n<h3 id=\"å‚è€ƒ\"><a class=\"anchor\" href=\"#å‚è€ƒ\">#</a> å‚è€ƒ</h3>\n<ul>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuYmlsaWJpbGkuY29tL3ZpZGVvL0JWMVZFNDExcTdkWA==\">https://www.bilibili.com/video/BV1VE411q7dX</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kdWJiby5hcGFjaGUub3JnL3poL2RvY3Mv\">https://dubbo.apache.org/zh/docs/</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly96aGFuZ2MyMzMuZ2l0aHViLmlvLzIwMjEvMDgvMTgvRHViYm8v\">https://zhangc233.github.io/2021/08/18/Dubbo/</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuY25ibG9ncy5jb20vamFtZXN6aGVuZy9wLzEwMjcxMzQxLmh0bWw=\">https://www.cnblogs.com/jameszheng/p/10271341.html</span></li>\n</ul>\n",
            "tags": [
                "è®¡ç®—æœºç§‘å­¦",
                "JAVAå­¦ä¹ è·¯çº¿",
                "è¿›é˜¶ç¯‡",
                "java",
                "Spring Cloud"
            ]
        },
        {
            "id": "https://www.chinmoku.cc/computer-science/java-learning-path/3-advanced/mongodb-tutorial/",
            "url": "https://www.chinmoku.cc/computer-science/java-learning-path/3-advanced/mongodb-tutorial/",
            "title": "MongoDB åŸºç¡€æ•™ç¨‹",
            "date_published": "2021-12-28T14:12:53.000Z",
            "content_html": "<div class=\"note info\">\n<p>å·¥ä½œä¸­çš„é¡¹ç›®ç”¨åˆ° MongoDB çš„åœ°æ–¹è¿˜æ˜¯ä¸å°‘çš„ï¼Œåªæ˜¯å‰å‡ ä¸ªæœˆéƒ½æ¯”è¾ƒå¿™ç¢Œï¼Œä¸€ç›´æ²¡è…¾å‡ºæ—¶é—´å¥½å¥½æ¢³ç†ä¸€ä¸‹ã€‚è¿™ä¸¤å‘¨ç¨å¾®è½»æ¾äº›äº†ï¼Œå°±å†³å®šæŠŠ MongoDB è¿™å—çŸ¥è¯†è¿‡ä¸€éï¼Œä¹Ÿæ–¹ä¾¿ä»¥åå‚è€ƒï¼ˆå®åœ¨è®¨åŒå„å¤§åšå®¢ç½‘ç«™çš„è½¬è½½æœºåˆ¶ï¼ŒåŠ£è´¨æ— ç”¨çš„æ–‡ç« è¢«è½¬è½½çš„åˆ°å¤„éƒ½æ˜¯ï¼ŒçœŸæ­£é‡åˆ°é—®é¢˜æ—¶ï¼Œæƒ³è¦æ‰¾åˆ°ä¸€ç¯‡å…·æœ‰å‚è€ƒæ€§çš„æ–‡ç« å®åœ¨å¤ªéš¾ï¼‰ã€‚ç”±äºå·¥ä½œä¸­æš‚æ—  MongoDB é›†ç¾¤çš„ä½¿ç”¨åœºæ™¯ï¼Œå› æ­¤<mark>æœ¬æ–‡æš‚æœªæ•´ç†åˆ†ç‰‡é›†ç¾¤è¿™å—çš„çŸ¥è¯†</mark>ï¼ˆæ ‡è®°ä¸º  <code>TODO</code> ï¼Œæˆ–è®¸æ—¥åä¼šè¡¥å……ï¼‰ã€‚</p>\n</div>\n<p><img data-src=\"https://img.xfc-exclave.com/2021/12/88c902e77a46c54c6e3bd9eaa6601ab51640271078.png\" alt=\"mongodb-logo\" /></p>\n<h3 id=\"nosql-ç®€ä»‹\"><a class=\"anchor\" href=\"#nosql-ç®€ä»‹\">#</a> NoSQL ç®€ä»‹</h3>\n<p>NoSQLï¼ŒæŒ‡çš„æ˜¯éå…³ç³»å‹çš„æ•°æ®åº“ã€‚NoSQL æ˜¯ Not Only SQL çš„ç¼©å†™ï¼Œæ˜¯å¯¹ä¸åŒäºä¼ ç»Ÿçš„å…³ç³»å‹æ•°æ®åº“çš„æ•°æ®åº“ç®¡ç†ç³»ç»Ÿçš„ç»Ÿç§°ã€‚NoSQL é€šå¸¸ç”¨äºè¶…å¤§è§„æ¨¡æ•°æ®çš„å­˜å‚¨ï¼ˆå¦‚è°·æ­Œæˆ– Facebook æ¯å¤©ä¸ºä»–ä»¬çš„ç”¨æˆ·æ”¶é›†ä¸‡äº¿æ¯”ç‰¹çš„æ•°æ®ï¼‰ï¼Œè¿™äº›ç±»å‹çš„æ•°æ®å­˜å‚¨ä¸éœ€è¦å›ºå®šçš„æ¨¡å¼ï¼Œæ— éœ€å¤šä½™æ“ä½œå°±å¯ä»¥æ¨ªå‘æ‰©å±•ã€‚</p>\n<h4 id=\"nosql-ä¼˜ç¼ºç‚¹\"><a class=\"anchor\" href=\"#nosql-ä¼˜ç¼ºç‚¹\">#</a> NoSQL ä¼˜ç¼ºç‚¹</h4>\n<p>ä¼˜ç‚¹ï¼š</p>\n<ul>\n<li>é«˜å¯æ‰©å±•æ€§</li>\n<li>åˆ†å¸ƒå¼è®¡ç®—</li>\n<li>ä½æˆæœ¬</li>\n<li>æ¶æ„çš„çµæ´»æ€§ï¼ŒåŠç»“æ„åŒ–æ•°æ®</li>\n<li>æ²¡æœ‰å¤æ‚çš„å…³ç³»</li>\n</ul>\n<p>ç¼ºç‚¹ï¼š</p>\n<ul>\n<li>æ²¡æœ‰æ ‡å‡†åŒ–</li>\n<li>æœ‰é™çš„æŸ¥è¯¢åŠŸèƒ½ï¼ˆåˆ°ç›®å‰ä¸ºæ­¢ï¼‰</li>\n<li>æœ€ç»ˆä¸€è‡´æ˜¯ä¸ç›´è§‚çš„ç¨‹åº</li>\n</ul>\n<h4 id=\"rdbms-vs-nosql\"><a class=\"anchor\" href=\"#rdbms-vs-nosql\">#</a> RDBMS vs NoSQL</h4>\n<p>å…³ç³»å‹æ•°æ®åº“ï¼ˆRDBMSï¼‰ä¸éå…³ç³»å‹æ•°æ®åº“ï¼ˆNoSQLï¼‰å¯¹æ¯”ï¼š</p>\n<table>\n<thead>\n<tr>\n<th>å¯¹æ¯”é¡¹</th>\n<th>RDBMS</th>\n<th>NoSQL</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>å­˜å‚¨æ ¼å¼</td>\n<td>è¡¨æ ¼å¼ï¼Œè¡Œå’Œåˆ—</td>\n<td>æ–‡æ¡£ã€é”®å€¼å¯¹ã€å›¾ç»“æ„</td>\n</tr>\n<tr>\n<td>å­˜å‚¨è§„èŒƒ</td>\n<td>è§„èŒƒæ€§ï¼Œé¿å…é‡å¤</td>\n<td>é¼“åŠ±å†—ä½™</td>\n</tr>\n<tr>\n<td>å­˜å‚¨æ‰©å±•</td>\n<td>çºµå‘æ‰©å±• (æ¨ªå‘æ‰©å±•æœ‰é™)</td>\n<td>æ¨ªå‘æ‰©å±•ï¼Œåˆ†å¸ƒå¼</td>\n</tr>\n<tr>\n<td>æŸ¥è¯¢æ–¹å¼</td>\n<td>ç»“æ„åŒ–æŸ¥è¯¢</td>\n<td>éç»“æ„åŒ–æŸ¥è¯¢è¯­è¨€ SQL</td>\n</tr>\n<tr>\n<td>äº‹åŠ¡</td>\n<td>æ”¯æŒäº‹åŠ¡</td>\n<td>ä¸æ”¯æŒäº‹åŠ¡ä¸€è‡´æ€§</td>\n</tr>\n<tr>\n<td>æ€§èƒ½</td>\n<td>è¯»å†™æ€§èƒ½å·®</td>\n<td>è¯»å†™æ€§èƒ½é«˜</td>\n</tr>\n<tr>\n<td>æˆæœ¬</td>\n<td>æˆæœ¬é«˜</td>\n<td>ç®€å•æ˜“éƒ¨ç½²ï¼Œå¼€æºï¼Œæˆæœ¬ä½</td>\n</tr>\n<tr>\n<td>å­˜å‚¨æ–¹å¼</td>\n<td>æ•°æ®ä¸»è¦å­˜å‚¨åœ¨ç£ç›˜ä¸­</td>\n<td>æ•°æ®ä¸»è¦å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼ˆéƒ¨åˆ†å¯ä»¥æŒä¹…åŒ–åˆ°ç£ç›˜ï¼‰</td>\n</tr>\n<tr>\n<td>å»ºè¡¨åŸåˆ™</td>\n<td>ä¾é å…³ç³»æ¨¡å‹æ„å»ºå…³è”</td>\n<td>æ•°æ®æ¨¡å‹æ¯”è¾ƒç®€å•ï¼Œç”¨ K/V çš„å½¢å¼æ¥å­˜å‚¨æ•°æ®</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"mongodb-ç®€ä»‹\"><a class=\"anchor\" href=\"#mongodb-ç®€ä»‹\">#</a> MongoDB ç®€ä»‹</h3>\n<p>MongoDB æ˜¯ç”±  <code>C++</code>  è¯­è¨€ç¼–å†™çš„ï¼Œæ˜¯ä¸€ä¸ªåŸºäºåˆ†å¸ƒå¼æ–‡ä»¶å­˜å‚¨çš„å¼€æºéå…³ç³»å‹æ•°æ®åº“ç³»ç»Ÿã€‚åœ¨é«˜è´Ÿè½½çš„æƒ…å†µä¸‹ï¼Œæ·»åŠ æ›´å¤šçš„èŠ‚ç‚¹ï¼Œå¯ä»¥ä¿è¯æœåŠ¡å™¨æ€§èƒ½ã€‚MongoDB æ—¨åœ¨ä¸º WEB åº”ç”¨æä¾›å¯æ‰©å±•çš„é«˜æ€§èƒ½æ•°æ®å­˜å‚¨è§£å†³æ–¹æ¡ˆã€‚MongoDB å°†æ•°æ®å­˜å‚¨ä¸ºä¸€ä¸ªæ–‡æ¡£ï¼Œæ•°æ®ç»“æ„ç”±é”®å€¼ï¼ˆkey=&gt;valueï¼‰å¯¹ç»„æˆã€‚MongoDB æ–‡æ¡£ç±»ä¼¼äº JSON å¯¹è±¡ã€‚å­—æ®µå€¼å¯ä»¥åŒ…å«å…¶ä»–æ–‡æ¡£ï¼Œæ•°ç»„åŠæ–‡æ¡£æ•°ç»„ã€‚</p>\n<p>MongoDB ä½¿ç”¨ BSONï¼ˆBinary JSONï¼‰å¯¹è±¡æ¥å­˜å‚¨ï¼Œä¸ JSON æ ¼å¼çš„é”®å€¼å¯¹ï¼ˆkey/valueï¼‰ç±»ä¼¼ï¼Œå­—æ®µå€¼å¯ä»¥åŒ…å«å…¶ä»–æ–‡æ¡£ï¼Œæ•°ç»„åŠæ–‡æ¡£æ•°ç»„ã€‚æ”¯æŒçš„æŸ¥è¯¢è¯­è¨€éå¸¸å¼ºå¤§ï¼Œå…¶è¯­æ³•æœ‰ç‚¹ç±»ä¼¼äºé¢å‘å¯¹è±¡çš„æŸ¥è¯¢è¯­è¨€ï¼Œå‡ ä¹å¯ä»¥å®ç°ç±»ä¼¼å…³ç³»å‹æ•°æ®åº“å•è¡¨æŸ¥è¯¢çš„ç»å¤§éƒ¨åˆ†åŠŸèƒ½ï¼Œè€Œä¸”è¿˜æ”¯æŒå¯¹æ•°æ®å»ºç«‹ç´¢å¼•ã€‚</p>\n<h4 id=\"mongodb-ä¸»è¦ç‰¹ç‚¹\"><a class=\"anchor\" href=\"#mongodb-ä¸»è¦ç‰¹ç‚¹\">#</a> MongoDB ä¸»è¦ç‰¹ç‚¹</h4>\n<ul>\n<li>MongoDB æ˜¯ä¸€ä¸ªé¢å‘æ–‡æ¡£å­˜å‚¨çš„æ•°æ®åº“ï¼Œæ“ä½œèµ·æ¥æ¯”è¾ƒç®€å•å’Œå®¹æ˜“ã€‚</li>\n<li>ä½ å¯ä»¥åœ¨ MongoDB è®°å½•ä¸­è®¾ç½®ä»»ä½•å±æ€§çš„ç´¢å¼• ï¼ˆå¦‚ï¼šFirstName=&quot;Sameer&quot;,Address=&quot;8 Gandhi Road&quot;ï¼‰æ¥å®ç°æ›´å¿«çš„æ’åºã€‚</li>\n<li>ä½ å¯ä»¥é€šè¿‡æœ¬åœ°æˆ–è€…ç½‘ç»œåˆ›å»ºæ•°æ®é•œåƒï¼Œè¿™ä½¿å¾— MongoDB æœ‰æ›´å¼ºçš„æ‰©å±•æ€§ã€‚</li>\n<li>å¦‚æœè´Ÿè½½çš„å¢åŠ ï¼ˆéœ€è¦æ›´å¤šçš„å­˜å‚¨ç©ºé—´å’Œæ›´å¼ºçš„å¤„ç†èƒ½åŠ›ï¼‰ ï¼Œå®ƒå¯ä»¥åˆ†å¸ƒåœ¨è®¡ç®—æœºç½‘ç»œä¸­çš„å…¶ä»–èŠ‚ç‚¹ä¸Šè¿™å°±æ˜¯æ‰€è°“çš„åˆ†ç‰‡ã€‚</li>\n<li>Mongo æ”¯æŒä¸°å¯Œçš„æŸ¥è¯¢è¡¨è¾¾å¼ã€‚æŸ¥è¯¢æŒ‡ä»¤ä½¿ç”¨ JSON å½¢å¼çš„æ ‡è®°ï¼Œå¯è½»æ˜“æŸ¥è¯¢æ–‡æ¡£ä¸­å†…åµŒçš„å¯¹è±¡åŠæ•°ç»„ã€‚</li>\n<li>MongoDB ä½¿ç”¨ update () å‘½ä»¤å¯ä»¥å®ç°æ›¿æ¢å®Œæˆçš„æ–‡æ¡£ï¼ˆæ•°æ®ï¼‰æˆ–è€…ä¸€äº›æŒ‡å®šçš„æ•°æ®å­—æ®µ ã€‚</li>\n<li>MongoDB ä¸­çš„ Map/reduce ä¸»è¦æ˜¯ç”¨æ¥å¯¹æ•°æ®è¿›è¡Œæ‰¹é‡å¤„ç†å’Œèšåˆæ“ä½œã€‚</li>\n<li>Map å’Œ Reduceã€‚Map å‡½æ•°è°ƒç”¨ emit (key,value) éå†é›†åˆä¸­æ‰€æœ‰çš„è®°å½•ï¼Œå°† key ä¸ value ä¼ ç»™ Reduce å‡½æ•°è¿›è¡Œå¤„ç†ã€‚</li>\n<li>Map å‡½æ•°å’Œ Reduce å‡½æ•°æ˜¯ä½¿ç”¨ Javascript ç¼–å†™çš„ï¼Œå¹¶å¯ä»¥é€šè¿‡ db.runCommand æˆ– mapreduce å‘½ä»¤æ¥æ‰§è¡Œ MapReduce æ“ä½œã€‚</li>\n<li>GridFS æ˜¯ MongoDB ä¸­çš„ä¸€ä¸ªå†…ç½®åŠŸèƒ½ï¼Œå¯ä»¥ç”¨äºå­˜æ”¾å¤§é‡å°æ–‡ä»¶ã€‚</li>\n<li>MongoDB å…è®¸åœ¨æœåŠ¡ç«¯æ‰§è¡Œè„šæœ¬ï¼Œå¯ä»¥ç”¨ Javascript ç¼–å†™æŸä¸ªå‡½æ•°ï¼Œç›´æ¥åœ¨æœåŠ¡ç«¯æ‰§è¡Œï¼Œä¹Ÿå¯ä»¥æŠŠå‡½æ•°çš„å®šä¹‰å­˜å‚¨åœ¨æœåŠ¡ç«¯ï¼Œä¸‹æ¬¡ç›´æ¥è°ƒç”¨å³å¯ã€‚</li>\n<li>MongoDB æ”¯æŒå„ç§ç¼–ç¨‹è¯­è¨€ï¼šRUBYï¼ŒPYTHONï¼ŒJAVAï¼ŒC++ï¼ŒPHPï¼ŒC# ç­‰å¤šç§è¯­è¨€ã€‚</li>\n<li>MongoDB å®‰è£…ç®€å•ã€‚</li>\n</ul>\n<h4 id=\"mongodb-æ•°æ®ç±»å‹\"><a class=\"anchor\" href=\"#mongodb-æ•°æ®ç±»å‹\">#</a> MongoDB æ•°æ®ç±»å‹</h4>\n<table>\n<thead>\n<tr>\n<th>æ•°æ®ç±»å‹</th>\n<th>æè¿°</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>String</td>\n<td>å­—ç¬¦ä¸²ã€‚å­˜å‚¨æ•°æ®å¸¸ç”¨çš„æ•°æ®ç±»å‹ã€‚åœ¨ MongoDB ä¸­ï¼ŒUTF-8 ç¼–ç çš„å­—ç¬¦ä¸²æ‰æ˜¯åˆæ³•çš„ã€‚</td>\n</tr>\n<tr>\n<td>Integer</td>\n<td>æ•´å‹æ•°å€¼ã€‚ç”¨äºå­˜å‚¨æ•°å€¼ã€‚æ ¹æ®ä½ æ‰€é‡‡ç”¨çš„æœåŠ¡å™¨ï¼Œå¯åˆ†ä¸º 32 ä½æˆ– 64 ä½ã€‚</td>\n</tr>\n<tr>\n<td>Boolean</td>\n<td>å¸ƒå°”å€¼ã€‚ç”¨äºå­˜å‚¨å¸ƒå°”å€¼ï¼ˆçœŸ / å‡ï¼‰ã€‚</td>\n</tr>\n<tr>\n<td>Double</td>\n<td>åŒç²¾åº¦æµ®ç‚¹å€¼ã€‚ç”¨äºå­˜å‚¨æµ®ç‚¹å€¼ã€‚</td>\n</tr>\n<tr>\n<td>Min/Max keys</td>\n<td>å°†ä¸€ä¸ªå€¼ä¸ BSONï¼ˆäºŒè¿›åˆ¶çš„ JSONï¼‰å…ƒç´ çš„æœ€ä½å€¼å’Œæœ€é«˜å€¼ç›¸å¯¹æ¯”ã€‚</td>\n</tr>\n<tr>\n<td>Arrays</td>\n<td>ç”¨äºå°†æ•°ç»„æˆ–åˆ—è¡¨æˆ–å¤šä¸ªå€¼å­˜å‚¨ä¸ºä¸€ä¸ªé”®ã€‚</td>\n</tr>\n<tr>\n<td>Timestamp</td>\n<td>æ—¶é—´æˆ³ã€‚è®°å½•æ–‡æ¡£ä¿®æ”¹æˆ–æ·»åŠ çš„å…·ä½“æ—¶é—´ã€‚</td>\n</tr>\n<tr>\n<td>Object</td>\n<td>ç”¨äºå†…åµŒæ–‡æ¡£ã€‚</td>\n</tr>\n<tr>\n<td>Null</td>\n<td>ç”¨äºåˆ›å»ºç©ºå€¼ã€‚</td>\n</tr>\n<tr>\n<td>Symbol</td>\n<td>ç¬¦å·ã€‚è¯¥æ•°æ®ç±»å‹åŸºæœ¬ä¸Šç­‰åŒäºå­—ç¬¦ä¸²ç±»å‹ï¼Œä½†ä¸åŒçš„æ˜¯ï¼Œå®ƒä¸€èˆ¬ç”¨äºé‡‡ç”¨ç‰¹æ®Šç¬¦å·ç±»å‹çš„è¯­è¨€ã€‚</td>\n</tr>\n<tr>\n<td>Date</td>\n<td>æ—¥æœŸæ—¶é—´ã€‚ç”¨ UNIX æ—¶é—´æ ¼å¼æ¥å­˜å‚¨å½“å‰æ—¥æœŸæˆ–æ—¶é—´ã€‚ä½ å¯ä»¥æŒ‡å®šè‡ªå·±çš„æ—¥æœŸæ—¶é—´ï¼šåˆ›å»º Date å¯¹è±¡ï¼Œä¼ å…¥å¹´æœˆæ—¥ä¿¡æ¯ã€‚</td>\n</tr>\n<tr>\n<td>Object ID</td>\n<td>å¯¹è±¡ IDã€‚ç”¨äºåˆ›å»ºæ–‡æ¡£çš„ IDã€‚</td>\n</tr>\n<tr>\n<td>Binary Data</td>\n<td>äºŒè¿›åˆ¶æ•°æ®ã€‚ç”¨äºå­˜å‚¨äºŒè¿›åˆ¶æ•°æ®ã€‚</td>\n</tr>\n<tr>\n<td>Code</td>\n<td>ä»£ç ç±»å‹ã€‚ç”¨äºåœ¨æ–‡æ¡£ä¸­å­˜å‚¨ JavaScript ä»£ç ã€‚</td>\n</tr>\n<tr>\n<td>Regular expression</td>\n<td>æ­£åˆ™è¡¨è¾¾å¼ç±»å‹ã€‚ç”¨äºå­˜å‚¨æ­£åˆ™è¡¨è¾¾å¼ã€‚</td>\n</tr>\n</tbody>\n</table>\n<h4 id=\"mongodb-æ”¯æŒè¯­è¨€\"><a class=\"anchor\" href=\"#mongodb-æ”¯æŒè¯­è¨€\">#</a> MongoDB æ”¯æŒè¯­è¨€</h4>\n<p><img data-src=\"https://img.xfc-exclave.com/2021/12/561f02944ca42fc819c495e03c2b43bc1640271138.png\" alt=\"mongodb_lang\" /></p>\n<h3 id=\"ä¸‹è½½ä¸å®‰è£…\"><a class=\"anchor\" href=\"#ä¸‹è½½ä¸å®‰è£…\">#</a> ä¸‹è½½ä¸å®‰è£…</h3>\n<h4 id=\"windows-ç¯å¢ƒ\"><a class=\"anchor\" href=\"#windows-ç¯å¢ƒ\">#</a> Windows ç¯å¢ƒ</h4>\n<ul>\n<li>\n<p>å®˜ç½‘åœ°å€ï¼š<span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubW9uZ29kYi5jb20=\">https://www.mongodb.com</span></p>\n</li>\n<li>\n<p>ä¸‹è½½åœ°å€ï¼š<span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubW9uZ29kYi5jb20vdHJ5L2Rvd25sb2Fk\">https://www.mongodb.com/try/download</span></p>\n</li>\n</ul>\n<p><img data-src=\"https://img.xfc-exclave.com/2021/12/1dc378837afe9e2bbf8e8f1b3d240c171640271166.png\" alt=\"mongo_download\" /></p>\n<p>åŒå‡»å¯æ‰§è¡Œæ–‡ä»¶  <code>.msi</code>  ï¼Œè¿›è¡Œå®‰è£…ï¼ˆåŸºæœ¬ä¸Šä¸‹ä¸€æ­¥å³å¯ï¼‰ã€‚</p>\n<p>æ¨èé€‰æ‹©è‡ªå®šä¹‰å®‰è£…ï¼š</p>\n<p><img data-src=\"https://img.xfc-exclave.com/2021/12/40520416960e56e4da5556ef7a688b271640273049.png\" alt=\"mongo_install\" /></p>\n<p>æ¨èå–æ¶ˆé»˜è®¤çš„  <code>Install MongoDB Compass</code>  å®‰è£…ã€‚</p>\n<p>MongoDB é…ç½®ï¼š</p>\n<ol>\n<li>\n<p>ç¯å¢ƒå˜é‡</p>\n<p>ç¼–è¾‘ç³»ç»Ÿå˜é‡  <code>Path</code>  å¹¶æ·»åŠ  MongoDB çš„ bin ç›®å½•ä½ç½®ã€‚ä¾‹å¦‚ï¼š <code>A:\\MongoDB\\Server\\5.0\\bin</code></p>\n</li>\n<li>\n<p>åˆ›å»ºæ•°æ®åº“æ–‡ä»¶çš„å­˜æ”¾ä½ç½®</p>\n<p>åˆ›å»ºæ–‡ä»¶å¤¹  <code>[MongoDB]\\data\\db</code>  ã€‚</p>\n<blockquote>\n<p>è¿™æ˜¯å› ä¸º MongoDB æœåŠ¡åœ¨å¯åŠ¨ä¹‹å‰å¿…é¡»åˆ›å»ºæ•°æ®åº“æ–‡ä»¶çš„å­˜æ”¾æ–‡ä»¶å¤¹ï¼Œå¦åˆ™å‘½ä»¤ä¸ä¼šè‡ªåŠ¨åˆ›å»ºï¼Œä¸”æœåŠ¡æ— æ³•å¯åŠ¨æˆåŠŸã€‚</p>\n</blockquote>\n</li>\n<li>\n<p>å¯åŠ¨ MongoDB æœåŠ¡</p>\n<p><code>cmd</code>  å‘½ä»¤è¿›å…¥å®‰è£…ç›®å½•  <code>[MongoDB]\\data\\bin</code>  ä½ç½®ï¼Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>A:<span class=\"token punctuation\">\\</span>MongoDB<span class=\"token punctuation\">\\</span>Server<span class=\"token punctuation\">\\</span><span class=\"token number\">5.0</span><span class=\"token punctuation\">\\</span>bin<span class=\"token operator\">></span> mongod --dbpath A:<span class=\"token punctuation\">\\</span>MongoDB<span class=\"token punctuation\">\\</span>Server<span class=\"token punctuation\">\\</span><span class=\"token number\">5.0</span><span class=\"token punctuation\">\\</span>data<span class=\"token punctuation\">\\</span>db</pre></td></tr></table></figure><p>æµè§ˆå™¨è®¿é—®ï¼š<span class=\"exturl\" data-url=\"aHR0cDovLzEyNy4wLjAuMToyNzAxNw==\">http://127.0.0.1:27017</span>ï¼Œå¦‚æœå‡ºç°å¦‚ä¸‹ä¿¡æ¯ï¼Œåˆ™è¡¨ç¤ºé…ç½®æˆåŠŸä¸”æœåŠ¡å·²å¯åŠ¨ï¼š</p>\n<blockquote>\n<p>It looks like you are trying to access MongoDB over HTTP on the native driver port.</p>\n</blockquote>\n</li>\n<li>\n<p>é…ç½®æœ¬åœ° MongoDB æœåŠ¡</p>\n<p>åˆ›å»ºæ–‡ä»¶å¤¹  <code>[MongoDB]\\data\\log</code>  ï¼Œç”¨äºå­˜æ”¾æ—¥å¿—æ–‡ä»¶ã€‚</p>\n<p>åˆ›å»ºé…ç½®æ–‡ä»¶  <code>[MongoDB]\\mongo.config</code> ï¼š</p>\n<figure class=\"highlight properties\"><figcaption data-lang=\".properties\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token attr-name\">dbpath</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">A:\\MongoDB\\Server\\5.0\\data\\db</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token attr-name\">logpath</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">A:\\MongoDB\\Server\\5.0\\data\\log\\mongo.log</span></pre></td></tr></table></figure><p>ä½¿ç”¨ç®¡ç†å‘˜è§’è‰²æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># åœæ­¢å·²å¯åŠ¨çš„ MongoDB æœåŠ¡</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>net stop MongoDB</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\"># ç§»é™¤ MongoDB æœåŠ¡</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>sc delete MongoDB</pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\"># å®‰è£… MongoDB æœåŠ¡</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>mongod -dbpath <span class=\"token string\">\"A:\\MongoDB\\Server<span class=\"token entity\" title=\"\\5\">\\5</span>.0\\data\\db\"</span> -logpath <span class=\"token string\">\"A:\\MongoDB\\Server<span class=\"token entity\" title=\"\\5\">\\5</span>.0\\data\\log\\mongo.log\"</span> -install -serviceName <span class=\"token string\">\"MongoDB\"</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token comment\"># å¯åŠ¨ MongoDB æœåŠ¡</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>net start MongoDB</pre></td></tr></table></figure><p>æµè§ˆå™¨è®¿é—®ï¼š<span class=\"exturl\" data-url=\"aHR0cDovLzEyNy4wLjAuMToyNzAxNw==\">http://127.0.0.1:27017</span></p>\n<p>å®¢æˆ·ç«¯è¿æ¥ï¼š</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>A:<span class=\"token punctuation\">\\</span>MongoDB<span class=\"token punctuation\">\\</span>Server<span class=\"token punctuation\">\\</span><span class=\"token number\">5.0</span><span class=\"token punctuation\">\\</span>bin<span class=\"token operator\">></span> mongo.exe</pre></td></tr></table></figure></li>\n</ol>\n<h4 id=\"linux-ç¯å¢ƒ\"><a class=\"anchor\" href=\"#linux-ç¯å¢ƒ\">#</a> Linux ç¯å¢ƒ</h4>\n<ol>\n<li>\n<p>å¸è½½åˆ é™¤</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># åœæ­¢æœåŠ¡</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token function\">ps</span> -ef <span class=\"token operator\">|</span> <span class=\"token function\">grep</span> mongo</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token function\">kill</span> -9 xxx</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>net stop mongodb</pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token function\">sudo</span> yum erase <span class=\"token variable\"><span class=\"token variable\">$(</span><span class=\"token function\">rpm</span> -qa <span class=\"token operator\">|</span> <span class=\"token function\">grep</span> mongodb-org<span class=\"token variable\">)</span></span> <span class=\"token comment\">#å¸è½½ MongoDB</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token function\">sudo</span> <span class=\"token function\">rm</span> -r /var/log/mongodb <span class=\"token comment\">#åˆ é™¤æ—¥å¿—æ–‡ä»¶</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token function\">sudo</span> <span class=\"token function\">rm</span> -r /var/lib/mongo  <span class=\"token comment\">#åˆ é™¤æ•°æ®æ–‡ä»¶</span></pre></td></tr></table></figure></li>\n<li>\n<p>å®‰è£…</p>\n<p>é…ç½® yum æºï¼š</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token builtin class-name\">cd</span> /etc/yum.repos.d</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token function\">vi</span> mongodb-org-5.0.repo</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\"># ç‰ˆæœ¬é€‰æ‹©å¯å‰å¾€ https://repo.mongodb.org è¿›è¡ŒæŸ¥çœ‹ã€‚</span></pre></td></tr></table></figure><p>ç¼–è¾‘å¦‚ä¸‹å†…å®¹ï¼ˆç‰ˆæœ¬å·è§†ä¸ªäººéœ€è¦è€Œå®šï¼‰ï¼š</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span>mongodb-org-5.0<span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token assign-left variable\">name</span><span class=\"token operator\">=</span>MongoDB Repository</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token assign-left variable\">baseurl</span><span class=\"token operator\">=</span>https://repo.mongodb.org/yum/redhat/7Server/mongodb-org/5.0/x86_64/</pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token assign-left variable\">gpgcheck</span><span class=\"token operator\">=</span><span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token assign-left variable\">enabled</span><span class=\"token operator\">=</span><span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token assign-left variable\">gpgkey</span><span class=\"token operator\">=</span>https://www.mongodb.org/static/pgp/server-5.0.asc</pre></td></tr></table></figure><blockquote>\n<p>æç¤ºï¼šå…·ä½“ç‰ˆæœ¬ï¼Œå¯å‰å¾€æºåœ°å€è¿›è¡ŒæŸ¥çœ‹é€‰æ‹©ï¼š<span class=\"exturl\" data-url=\"aHR0cHM6Ly9yZXBvLm1vbmdvZGIub3Jn\">https://repo.mongodb.org</span></p>\n</blockquote>\n<p>æ‰§è¡Œå®‰è£…ï¼š</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>yum <span class=\"token function\">install</span> -y mongodb-org</pre></td></tr></table></figure><p>ä¿®æ”¹é…ç½®ï¼š</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">vim</span> /etc/mongod.conf</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\"># network interfaces</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>net:</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  port: <span class=\"token number\">27017</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  bindIp: <span class=\"token number\">0.0</span>.0.0  <span class=\"token comment\"># Enter 0.0.0.0,:: to bind to all IPv4 and IPv6 addresses or, alternatively, use the net.bindIpAll setting.</span></pre></td></tr></table></figure><p>åŸºæœ¬å‘½ä»¤ï¼š</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>systemctl start mongod.serviceã€€ã€€<span class=\"token comment\"># å¯åŠ¨</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>systemctl status mongod.serviceã€€ <span class=\"token comment\"># æŸ¥çœ‹çŠ¶æ€</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>systemctl stop mongod.service ã€€ã€€<span class=\"token comment\"># åœæ­¢</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>systemctl <span class=\"token builtin class-name\">enable</span> mongod.service ã€€<span class=\"token comment\"># è‡ªå¯</span></pre></td></tr></table></figure><p>æµ‹è¯•è¿æ¥ï¼š</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>mongo <span class=\"token number\">127.0</span>.0.1:27017 <span class=\"token comment\"># å¦‚æœæ˜¯é»˜è®¤ IP ç«¯å£ï¼Œå¯ä»¥ä¸æŒ‡å®š</span></pre></td></tr></table></figure><p>æƒé™æ§åˆ¶ï¼š</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>use admin <span class=\"token comment\"># å…¶ä»–æ•°æ®åº“ä¹Ÿç±»ä¼¼</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>switched to db admin</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>db.createUser<span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span> user:<span class=\"token string\">\"admin\"</span>, pwd:<span class=\"token string\">\"123456\"</span>, roles:<span class=\"token punctuation\">[</span><span class=\"token string\">\"root\"</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>Successfully added user: <span class=\"token punctuation\">&#123;</span> <span class=\"token string\">\"user\"</span> <span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"admin\"</span>, <span class=\"token string\">\"roles\"</span> <span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">[</span> <span class=\"token string\">\"root\"</span> <span class=\"token punctuation\">]</span> <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>db.auth<span class=\"token punctuation\">(</span><span class=\"token string\">\"admin\"</span>, <span class=\"token string\">\"123456\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token builtin class-name\">exit</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>bye</pre></td></tr><tr><td data-num=\"9\"></td><td><pre>mongo -u root -p <span class=\"token number\">123456</span> <span class=\"token comment\"># è´¦å·ç™»å½•</span></pre></td></tr></table></figure><p>å¯ç”¨èº«ä»½éªŒè¯ï¼š</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">vi</span> /etc/mongod.conf</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>   </pre></td></tr><tr><td data-num=\"3\"></td><td><pre>security:</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>     authorization: enabled   <span class=\"token comment\"># disable or enabled</span></pre></td></tr></table></figure></li>\n<li>\n<p>é—®é¢˜æ’æŸ¥</p>\n<ul>\n<li>\n<p>MongoDB æœåŠ¡å¯åŠ¨å¤±è´¥ï¼Œå¯ä»¥ä½¿ç”¨  <code>journalctl -xe</code>  å‘½ä»¤è·Ÿè¸ªæ›´åŠ è¯¦ç»†çš„ä¿¡æ¯ï¼Œé€šå¸¸æ˜¯ç”±äºä»¥ä¸‹å‡ ç§åŸå› å¯¼è‡´çš„ï¼š</p>\n<ol>\n<li>mongod.conf é…ç½®å†…å®¹æˆ–è¯­æ³•é”™è¯¯ã€‚</li>\n<li>æ—¥å¿—è®¿é—®æƒé™ä¸è¶³ã€‚</li>\n<li>é”å®š</li>\n</ol>\n</li>\n<li>\n<p>å¦‚æœæœåŠ¡å™¨æœ¬åœ°å¯ä»¥è®¿é—® MongoDBï¼Œä½†è¿œç¨‹è®¿é—®å¤±è´¥ï¼Œè¯·æ£€æŸ¥ï¼š</p>\n<ol>\n<li>æ£€æŸ¥é…ç½®æ–‡ä»¶  <code>/etc/mongod.conf</code>  IP æ˜¯å¦æ”¾å¼€ã€æ˜¯å¦å…è®¸è¿œç¨‹è®¿é—®ï¼Œä»¥åŠè®¿é—®è´¦å·å¯†é’¥ä¿¡æ¯ã€‚</li>\n<li>äº‘æœåŠ¡å™¨éœ€æ³¨æ„é…ç½®å®‰å…¨ç»„è§„åˆ™ã€‚</li>\n<li>å¦‚å·²å¼€å¯é˜²ç«å¢™ï¼Œéœ€æ·»æ”¾å¼€å¯¹åº”ç«¯å£ã€‚</li>\n</ol>\n</li>\n<li>\n<p>å‘½ä»¤æç¤º</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># æŸ¥çœ‹ä¸ä¿®æ”¹</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token function\">vi</span> /etc/mongod.conf <span class=\"token comment\"># MongoDB é…ç½®æ–‡ä»¶</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token function\">cat</span> /usr/lib/systemd/system/mongod.service <span class=\"token comment\"># MongoDB æœåŠ¡</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\"># æƒé™æˆ– mongodb é”æ–‡ä»¶</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token function\">sudo</span> <span class=\"token function\">chown</span> -Rc mongodb. /var/log/mongodb</pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token function\">sudo</span> <span class=\"token function\">chown</span> -Rc mongodb. /var/lib/mongo</pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token function\">rm</span> -rf /var/lib/mongo/mongod.lock</pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token function\">rm</span> -rf /tmp/mongodb-27017.sock</pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\"># é˜²ç«å¢™</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>firewall-cmd --state <span class=\"token comment\"># æŸ¥çœ‹é˜²ç«å¢™çŠ¶æ€</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>systemctl stop firewalld.service <span class=\"token comment\"># å…³é—­é˜²ç«å¢™</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>systemctl start firewalld.service <span class=\"token comment\"># å¼€å¯é˜²ç«å¢™</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>firewall-cmd --add-port<span class=\"token operator\">=</span><span class=\"token number\">27017</span>/tcp --permanent <span class=\"token comment\"># é˜²ç«å¢™æ”¾å¼€æŒ‡å®šç«¯å£ï¼ˆæ°¸ä¹…ï¼‰</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>firewall-cmd --zone<span class=\"token operator\">=</span>public --list-ports <span class=\"token comment\"># æŸ¥çœ‹é˜²ç«å¢™å·²å¼€æ”¾ç«¯å£</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>firewall-cmd --reload <span class=\"token comment\"># é˜²ç«å¢™é…ç½®é‡æ–°è½½å…¥</span></pre></td></tr></table></figure><blockquote>\n<p>é…ç½®å‚è€ƒï¼š<span class=\"exturl\" data-url=\"aHR0cHM6Ly9kb2NzLm1vbmdvZGIuY29tL21hbnVhbC9yZWZlcmVuY2UvY29uZmlndXJhdGlvbi1vcHRpb25z\">https://docs.mongodb.com/manual/reference/configuration-options</span></p>\n</blockquote>\n</li>\n</ul>\n</li>\n</ol>\n<h4 id=\"mongodb-gui\"><a class=\"anchor\" href=\"#mongodb-gui\">#</a> MongoDB GUI</h4>\n<ul>\n<li>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9yb2JvbW9uZ28ub3JnL2Rvd25sb2Fk\">Robo 3T / Studio 3T</span></p>\n<p><img data-src=\"https://img.xfc-exclave.com/2021/12/76413eb9f3f06806e7ebad3a7605d7dc1640331051.png\" alt=\"Robo 3T / Studio 3T\" /></p>\n</li>\n<li>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubmF2aWNhdC5jb20=\">Navicat</span></p>\n<p><img data-src=\"https://img.xfc-exclave.com/2021/12/67a7e58152813db91e164a9718259ceb1640331382.png\" alt=\"image-20211224153611400\" /></p>\n</li>\n</ul>\n<h3 id=\"æœ¯è¯­ä¸æ¦‚å¿µ\"><a class=\"anchor\" href=\"#æœ¯è¯­ä¸æ¦‚å¿µ\">#</a> æœ¯è¯­ä¸æ¦‚å¿µ</h3>\n<p>SQL æ•°æ®åº“ä¸ MongoDB æ•°æ®åº“æœ¯è¯­åŠæ¦‚å¿µçš„å¯¹æ¯”ï¼š</p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">SQL æœ¯è¯­ / æ¦‚å¿µ</th>\n<th style=\"text-align:left\">MongoDB æœ¯è¯­ / æ¦‚å¿µ</th>\n<th style=\"text-align:left\">è§£é‡Š / è¯´æ˜</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">database</td>\n<td style=\"text-align:left\">database</td>\n<td style=\"text-align:left\">æ•°æ®åº“</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">table</td>\n<td style=\"text-align:left\">collection</td>\n<td style=\"text-align:left\">æ•°æ®åº“è¡¨ / é›†åˆ</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">row</td>\n<td style=\"text-align:left\">document</td>\n<td style=\"text-align:left\">æ•°æ®è®°å½•è¡Œ / æ–‡æ¡£</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">column</td>\n<td style=\"text-align:left\">field</td>\n<td style=\"text-align:left\">æ•°æ®å­—æ®µ / åŸŸ</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">index</td>\n<td style=\"text-align:left\">index</td>\n<td style=\"text-align:left\">ç´¢å¼•</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">table joins</td>\n<td style=\"text-align:left\"></td>\n<td style=\"text-align:left\">è¡¨è¿æ¥ï¼ŒMongoDB ä¸æ”¯æŒ</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">primary key</td>\n<td style=\"text-align:left\">primary key</td>\n<td style=\"text-align:left\">ä¸»é”®ï¼ŒMongoDB è‡ªåŠ¨å°†_id å­—æ®µè®¾ç½®ä¸ºä¸»é”®</td>\n</tr>\n</tbody>\n</table>\n<h4 id=\"æ•°æ®åº“\"><a class=\"anchor\" href=\"#æ•°æ®åº“\">#</a> æ•°æ®åº“</h4>\n<p>ä¸€ä¸ª mongodb ä¸­å¯ä»¥å»ºç«‹å¤šä¸ªæ•°æ®åº“ã€‚MongoDB çš„é»˜è®¤æ•°æ®åº“ä¸º  <code>db</code>  ï¼Œè¯¥æ•°æ®åº“å­˜å‚¨åœ¨ data ç›®å½•ä¸­ï¼Œè¿™ä¸€ç‚¹æˆ‘ä»¬åœ¨å®‰è£…é…ç½®æ—¶å·²æœ‰æåŠã€‚</p>\n<p>MongoDB çš„å•ä¸ªå®ä¾‹å¯ä»¥å®¹çº³å¤šä¸ªç‹¬ç«‹çš„æ•°æ®åº“ï¼Œæ¯ä¸€ä¸ªéƒ½æœ‰è‡ªå·±çš„é›†åˆå’Œæƒé™ï¼Œä¸åŒçš„æ•°æ®åº“ä¹Ÿæ”¾ç½®åœ¨ä¸åŒçš„æ–‡ä»¶ä¸­ã€‚</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token operator\">></span> show dbs <span class=\"token comment\"># æ˜¾ç¤ºæ‰€æœ‰æ•°æ®åˆ—è¡¨</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>admin   <span class=\"token number\">0</span>.000GB</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>config  <span class=\"token number\">0</span>.000GB</pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token builtin class-name\">local</span>   <span class=\"token number\">0</span>.000GB</pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token operator\">></span> db <span class=\"token comment\"># æ˜¾ç¤ºå½“å‰æ•°æ®åº“å¯¹è±¡æˆ–é›†åˆ</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token builtin class-name\">test</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token operator\">></span> use <span class=\"token builtin class-name\">local</span> <span class=\"token comment\"># åˆ‡æ¢åˆ°æŒ‡å®šæ•°æ®åº“</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>switched to db <span class=\"token builtin class-name\">local</span></pre></td></tr></table></figure><p>MongoDB é»˜è®¤æœ‰ä¸‰ä¸ªæ•°æ®åº“ï¼š</p>\n<ul>\n<li>adminï¼šä»æƒé™çš„è§’åº¦æ¥çœ‹ï¼Œè¿™æ˜¯ root æ•°æ®åº“ã€‚è¦æ˜¯å°†ä¸€ä¸ªç”¨æˆ·æ·»åŠ åˆ°è¿™ä¸ªæ•°æ®åº“ï¼Œè¿™ä¸ªç”¨æˆ·è‡ªåŠ¨ç»§æ‰¿æ‰€æœ‰æ•°æ®åº“çš„æƒé™ã€‚ä¸€äº›ç‰¹å®šçš„æœåŠ¡å™¨ç«¯å‘½ä»¤ä¹Ÿåªèƒ½ä»è¿™ä¸ªæ•°æ®åº“è¿è¡Œï¼Œæ¯”å¦‚åˆ—å‡ºæ‰€æœ‰çš„æ•°æ®åº“æˆ–è€…å…³é—­æœåŠ¡å™¨ã€‚</li>\n<li>localï¼šè¿™ä¸ªæ•°æ®æ°¸è¿œä¸ä¼šè¢«å¤åˆ¶ï¼Œå¯ä»¥ç”¨æ¥å­˜å‚¨é™äºæœ¬åœ°å•å°æœåŠ¡å™¨çš„ä»»æ„é›†åˆ</li>\n<li>configï¼š å½“ Mongo ç”¨äºåˆ†ç‰‡è®¾ç½®æ—¶ï¼Œconfig æ•°æ®åº“åœ¨å†…éƒ¨ä½¿ç”¨ï¼Œç”¨äºä¿å­˜åˆ†ç‰‡çš„ç›¸å…³ä¿¡æ¯ã€‚</li>\n</ul>\n<h4 id=\"æ–‡æ¡£\"><a class=\"anchor\" href=\"#æ–‡æ¡£\">#</a> æ–‡æ¡£</h4>\n<p>æ–‡æ¡£æ˜¯ä¸€ç»„é”®å€¼å¯¹ï¼ˆå³ BSONï¼‰ï¼Œç¤ºä¾‹ï¼š</p>\n<figure class=\"highlight json\"><figcaption data-lang=\"JSON\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">&#123;</span><span class=\"token property\">\"site\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"www.chinmoku.cc\"</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"author\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"Chinmoku\"</span><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>RDBMS ä¸ MongoDB æœ¯è¯­å¯¹æ¯”ï¼š</p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">RDBMS</th>\n<th style=\"text-align:left\">MongoDB</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">æ•°æ®åº“</td>\n<td style=\"text-align:left\">æ•°æ®åº“</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">è¡¨æ ¼</td>\n<td style=\"text-align:left\">é›†åˆ</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">è¡Œ</td>\n<td style=\"text-align:left\">æ–‡æ¡£</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">åˆ—</td>\n<td style=\"text-align:left\">å­—æ®µ</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">è¡¨è”åˆ</td>\n<td style=\"text-align:left\">åµŒå…¥æ–‡æ¡£</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">ä¸»é”®</td>\n<td style=\"text-align:left\">ä¸»é”®ï¼ˆMongoDB æä¾›äº† key ä¸º _idï¼‰</td>\n</tr>\n</tbody>\n</table>\n<p>æ³¨æ„ï¼š</p>\n<ol>\n<li>æ–‡æ¡£ä¸­çš„é”®å€¼å¯¹æ˜¯æœ‰åºçš„ã€‚</li>\n<li>æ–‡æ¡£ä¸­çš„å€¼ä¸ä»…å¯ä»¥æ˜¯åœ¨åŒå¼•å·é‡Œé¢çš„å­—ç¬¦ä¸²ï¼Œè¿˜å¯ä»¥æ˜¯å…¶ä»–å‡ ç§æ•°æ®ç±»å‹ï¼ˆç”šè‡³å¯ä»¥æ˜¯æ•´ä¸ªåµŒå…¥çš„æ–‡æ¡£)ã€‚</li>\n<li>MongoDB åŒºåˆ†ç±»å‹å’Œå¤§å°å†™ã€‚</li>\n<li>MongoDB çš„æ–‡æ¡£ä¸èƒ½æœ‰é‡å¤çš„é”®ã€‚</li>\n<li>æ–‡æ¡£çš„é”®æ˜¯å­—ç¬¦ä¸²ï¼Œé™¤å°‘æ•°ä¾‹å¤–æƒ…å†µï¼Œé”®å¯ä»¥ä½¿ç”¨ä»»æ„ UTF-8 å­—ç¬¦ã€‚</li>\n</ol>\n<p>æ–‡æ¡£é”®å‘½åè§„èŒƒï¼š</p>\n<ul>\n<li>é”®ä¸èƒ½å«æœ‰ç©ºå­—ç¬¦ã€‚è¿™ä¸ªå­—ç¬¦ç”¨æ¥è¡¨ç¤ºé”®çš„ç»“å°¾ã€‚</li>\n<li><code>.</code>  å’Œ  <code>$</code>  æœ‰ç‰¹åˆ«çš„æ„ä¹‰ï¼Œåªæœ‰åœ¨ç‰¹å®šç¯å¢ƒä¸‹æ‰èƒ½ä½¿ç”¨ã€‚</li>\n<li>ä»¥ä¸‹åˆ’çº¿å¼€å¤´çš„é”®æ˜¯ä¿ç•™çš„ï¼ˆä¸æ˜¯ä¸¥æ ¼è¦æ±‚çš„ï¼‰ã€‚</li>\n</ul>\n<h4 id=\"é›†åˆ\"><a class=\"anchor\" href=\"#é›†åˆ\">#</a> é›†åˆ</h4>\n<p>é›†åˆå°±æ˜¯ MongoDB æ–‡æ¡£ç»„ï¼Œç±»ä¼¼äº RDBMS ä¸­çš„è¡¨ã€‚é›†åˆå­˜åœ¨äºæ•°æ®åº“ä¸­ï¼Œé›†åˆæ²¡æœ‰å›ºå®šçš„ç»“æ„ã€‚</p>\n<p>é›†åˆçš„åˆæ³•æ€§ï¼š</p>\n<ul>\n<li>é›†åˆåä¸èƒ½æ˜¯ç©ºå­—ç¬¦ä¸²ã€‚</li>\n<li>é›†åˆåä¸èƒ½å«æœ‰  <code>\\0</code>  ç©ºå­—ç¬¦ï¼Œè¿™ä¸ªå­—ç¬¦è¡¨ç¤ºé›†åˆåçš„ç»“å°¾ã€‚</li>\n<li>é›†åˆåä¸èƒ½ä»¥  <code>system.</code>  å¼€å¤´ï¼Œè¿™æ˜¯ä¸ºç³»ç»Ÿé›†åˆä¿ç•™çš„å‰ç¼€ã€‚</li>\n<li>ç”¨æˆ·åˆ›å»ºçš„é›†åˆåå­—ä¸èƒ½å«æœ‰ä¿ç•™å­—ç¬¦ã€‚æœ‰äº›é©±åŠ¨ç¨‹åºçš„ç¡®æ”¯æŒåœ¨é›†åˆåé‡Œé¢åŒ…å«ï¼Œè¿™æ˜¯å› ä¸ºæŸäº›ç³»ç»Ÿç”Ÿæˆçš„é›†åˆä¸­åŒ…å«è¯¥å­—ç¬¦ã€‚</li>\n</ul>\n<h5 id=\"capped-collections\"><a class=\"anchor\" href=\"#capped-collections\">#</a> Capped Collections</h5>\n<p>Capped collections å°±æ˜¯å›ºå®šå¤§å°çš„ collectionï¼Œå®ƒæ˜¯é«˜æ€§èƒ½è‡ªåŠ¨çš„ç»´æŠ¤å¯¹è±¡çš„æ’å…¥é¡ºåºã€‚å®ƒéå¸¸é€‚åˆç±»ä¼¼è®°å½•æ—¥å¿—çš„åŠŸèƒ½å’Œæ ‡å‡†çš„ collection ä¸åŒï¼Œä½ å¿…é¡»è¦æ˜¾å¼çš„åˆ›å»ºä¸€ä¸ª capped collectionï¼ŒæŒ‡å®šä¸€ä¸ª collection çš„å¤§å°ï¼Œå•ä½æ˜¯å­—èŠ‚ã€‚collection çš„æ•°æ®å­˜å‚¨ç©ºé—´å€¼æå‰åˆ†é…çš„ã€‚</p>\n<p>Capped collections å¯ä»¥æŒ‰ç…§æ–‡æ¡£çš„æ’å…¥é¡ºåºä¿å­˜åˆ°é›†åˆä¸­ï¼Œè€Œä¸”è¿™äº›æ–‡æ¡£åœ¨ç£ç›˜ä¸Šå­˜æ”¾ä½ç½®ä¹Ÿæ˜¯æŒ‰ç…§æ’å…¥é¡ºåºæ¥ä¿å­˜çš„ï¼Œæ‰€ä»¥å½“æˆ‘ä»¬æ›´æ–° Capped collections ä¸­æ–‡æ¡£çš„æ—¶å€™ï¼Œæ›´æ–°åçš„æ–‡æ¡£ä¸å¯ä»¥è¶…è¿‡ä¹‹å‰æ–‡æ¡£çš„å¤§å°ï¼Œè¿™æ ·è¯å°±å¯ä»¥ç¡®ä¿æ‰€æœ‰æ–‡æ¡£åœ¨ç£ç›˜ä¸Šçš„ä½ç½®ä¸€ç›´ä¿æŒä¸å˜ã€‚</p>\n<p>ç”±äº Capped collection æ˜¯æŒ‰ç…§æ–‡æ¡£çš„æ’å…¥é¡ºåºè€Œä¸æ˜¯ä½¿ç”¨ç´¢å¼•ç¡®å®šæ’å…¥ä½ç½®ï¼Œè¿™æ ·çš„è¯å¯ä»¥æé«˜å¢æ·»æ•°æ®çš„æ•ˆç‡ã€‚MongoDB çš„æ“ä½œæ—¥å¿—æ–‡ä»¶ <span class=\"exturl\" data-url=\"aHR0cDovL29wbG9nLnJz\">oplog.rs</span> å°±æ˜¯åˆ©ç”¨ Capped Collection æ¥å®ç°çš„ã€‚</p>\n<p>è¦æ³¨æ„çš„æ˜¯æŒ‡å®šçš„å­˜å‚¨å¤§å°åŒ…å«äº†æ•°æ®åº“çš„å¤´ä¿¡æ¯ã€‚</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>db<span class=\"token punctuation\">.</span><span class=\"token function\">createCollection</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"mycoll\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span>capped<span class=\"token operator\">:</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span> size<span class=\"token operator\">:</span><span class=\"token number\">100000</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><h4 id=\"å…ƒæ•°æ®\"><a class=\"anchor\" href=\"#å…ƒæ•°æ®\">#</a> å…ƒæ•°æ®</h4>\n<p>åœ¨ MongoDB æ•°æ®åº“ä¸­å‘½åç©ºé—´  <code>&lt;dbname&gt;.system.*</code>  æ˜¯åŒ…å«å¤šç§ç³»ç»Ÿä¿¡æ¯çš„ç‰¹æ®Šé›†åˆï¼ˆCollectionï¼‰ï¼Œå¦‚ä¸‹ï¼š</p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">é›†åˆå‘½åç©ºé—´</th>\n<th style=\"text-align:left\">æè¿°</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">dbname.system.namespaces</td>\n<td style=\"text-align:left\">åˆ—å‡ºæ‰€æœ‰åå­—ç©ºé—´ã€‚</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">dbname.system.indexes</td>\n<td style=\"text-align:left\">åˆ—å‡ºæ‰€æœ‰ç´¢å¼•ã€‚</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">dbname.system.profile</td>\n<td style=\"text-align:left\">åŒ…å«æ•°æ®åº“æ¦‚è¦ï¼ˆprofileï¼‰ä¿¡æ¯ã€‚</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">dbname.system.users</td>\n<td style=\"text-align:left\">åˆ—å‡ºæ‰€æœ‰å¯è®¿é—®æ•°æ®åº“çš„ç”¨æˆ·ã€‚</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">dbname.local.sources</td>\n<td style=\"text-align:left\">åŒ…å«å¤åˆ¶å¯¹ç«¯ï¼ˆslaveï¼‰çš„æœåŠ¡å™¨ä¿¡æ¯å’ŒçŠ¶æ€ã€‚</td>\n</tr>\n</tbody>\n</table>\n<h4 id=\"objectid\"><a class=\"anchor\" href=\"#objectid\">#</a> ObjectId</h4>\n<p>ObjectId ç±»ä¼¼å”¯ä¸€ä¸»é”®ï¼Œå¯ä»¥å¾ˆå¿«çš„å»ç”Ÿæˆå’Œæ’åºï¼Œå®ƒåŒ…å« 12 ä¸ªå­—èŠ‚ï¼Œå…¶å«ä¹‰å¦‚ä¸‹ï¼š</p>\n<ul>\n<li>å‰ 4 ä¸ªå­—èŠ‚è¡¨ç¤ºåˆ›å»º unix æ—¶é—´æˆ³ï¼Œæ ¼æ—å°¼æ²»æ—¶é—´ UTC æ—¶é—´ï¼Œæ¯”åŒ—äº¬æ—¶é—´æ™šäº† 8 ä¸ªå°æ—¶ã€‚</li>\n<li>æ¥ä¸‹æ¥çš„ 3 ä¸ªå­—èŠ‚æ˜¯æœºå™¨æ ‡è¯†ç ã€‚</li>\n<li>ç´§æ¥çš„ä¸¤ä¸ªå­—èŠ‚ç”±è¿›ç¨‹ id ç»„æˆ PIDã€‚</li>\n<li>æœ€åä¸‰ä¸ªå­—èŠ‚æ˜¯éšæœºæ•°ã€‚</li>\n</ul>\n<p>ä½¿ç”¨æ–¹å¼ï¼š</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">var</span> newObject <span class=\"token operator\">=</span> <span class=\"token function\">ObjectId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>newObject<span class=\"token punctuation\">.</span><span class=\"token function\">getTimestamp</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>newObject<span class=\"token punctuation\">.</span>str</pre></td></tr></table></figure><h4 id=\"æ—¶é—´ä¸å­—ç¬¦ä¸²\"><a class=\"anchor\" href=\"#æ—¶é—´ä¸å­—ç¬¦ä¸²\">#</a> æ—¶é—´ä¸å­—ç¬¦ä¸²</h4>\n<ol>\n<li>\n<p>BSON å­—ç¬¦ä¸²</p>\n<p>BSON å­—ç¬¦ä¸²éƒ½æ˜¯ UTF-8 ç¼–ç ã€‚</p>\n</li>\n<li>\n<p>æ—¶é—´æˆ³</p>\n<p>BSON æœ‰ä¸€ä¸ªç‰¹æ®Šçš„æ—¶é—´æˆ³ç±»å‹ç”¨äº MongoDB å†…éƒ¨ä½¿ç”¨ï¼Œä¸æ™®é€šçš„æ—¥æœŸç±»å‹ä¸ç›¸å…³ã€‚</p>\n<p>åœ¨å•ä¸ª mongod å®ä¾‹ä¸­ï¼Œæ—¶é—´æˆ³å€¼é€šå¸¸æ˜¯å”¯ä¸€çš„ã€‚</p>\n<p>åœ¨å¤åˆ¶é›†ä¸­ï¼Œoplog æœ‰ä¸€ä¸ª ts å­—æ®µã€‚è¿™ä¸ªå­—æ®µä¸­çš„å€¼ä½¿ç”¨ BSON æ—¶é—´æˆ³è¡¨ç¤ºäº†æ“ä½œæ—¶é—´ã€‚</p>\n<blockquote>\n<p>BSON æ—¶é—´æˆ³ç±»å‹ä¸»è¦ç”¨äº MongoDB å†…éƒ¨ä½¿ç”¨ã€‚</p>\n</blockquote>\n</li>\n<li>\n<p>æ—¥æœŸ</p>\n<p>è¡¨ç¤ºå½“å‰è·ç¦» Unix æ–°çºªå…ƒï¼ˆ1970 å¹´ 1 æœˆ 1 æ—¥ï¼‰çš„æ¯«ç§’æ•°ã€‚æ—¥æœŸç±»å‹æ˜¯æœ‰ç¬¦å·çš„ï¼Œè´Ÿæ•°è¡¨ç¤º 1970 å¹´ä¹‹å‰çš„æ—¥æœŸï¼Œåˆ›å»ºåŠä½¿ç”¨æ–¹å¼å¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">var</span> mydate <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">typeof</span> mydate</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>mydate<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token function\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>è¿™æ ·åˆ›å»ºçš„æ—¶é—´æ˜¯æ—¥æœŸç±»å‹ï¼Œå¯ä»¥ä½¿ç”¨ JS ä¸­çš„ Date ç±»å‹çš„æ–¹æ³•ã€‚</p>\n</li>\n</ol>\n<h3 id=\"åŸºæœ¬æ“ä½œ\"><a class=\"anchor\" href=\"#åŸºæœ¬æ“ä½œ\">#</a> åŸºæœ¬æ“ä½œ</h3>\n<h4 id=\"æ•°æ®åº“æ“ä½œ\"><a class=\"anchor\" href=\"#æ•°æ®åº“æ“ä½œ\">#</a> æ•°æ®åº“æ“ä½œ</h4>\n<ol>\n<li>\n<p>åˆ›å»ºè¿æ¥</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># è¿æ¥å®ä¾‹ï¼š</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>mongodb://root:123456@127.0.0.1/test</pre></td></tr></table></figure><blockquote>\n<p>æ›´å¤š MongoDB è¿æ¥é…ç½®ï¼Œå‚è€ƒï¼š<span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cucnVub29iLmNvbS9tb25nb2RiL21vbmdvZGItY29ubmVjdGlvbnMuaHRtbA==\">https://www.runoob.com/mongodb/mongodb-connections.html</span></p>\n</blockquote>\n</li>\n<li>\n<p>åˆ›å»ºæˆ–åˆ‡æ¢æ•°æ®åº“</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># å¦‚æœä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»ºï¼Œå¦‚æœå·²å­˜åœ¨ï¼Œåˆ™åˆ‡æ¢</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>use mytest</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\"># æŸ¥çœ‹æ‰€æœ‰æ•°æ®åº“ï¼ˆå½“åˆ›å»ºçš„æ•°æ®åº“æ²¡æœ‰æ•°æ®æ—¶ï¼Œä¸ä¼šæ˜¾ç¤ºï¼‰</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>show dbs</pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\"># æ’å…¥ä¸€æ¡æ•°æ®</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>db.col1.insert<span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span><span class=\"token string\">\"name\"</span><span class=\"token builtin class-name\">:</span><span class=\"token string\">\"Chinmoku\"</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token comment\"># å†æ¬¡æŸ¥è¯¢æ•°æ®åº“åˆ—è¡¨</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>show dbs</pre></td></tr></table></figure></li>\n<li>\n<p>åˆ é™¤æ•°æ®åº“</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>use mytest</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>db.dropDatabase<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure></li>\n</ol>\n<h4 id=\"é›†åˆä¸æ–‡æ¡£æ“ä½œ\"><a class=\"anchor\" href=\"#é›†åˆä¸æ–‡æ¡£æ“ä½œ\">#</a> é›†åˆä¸æ–‡æ¡£æ“ä½œ</h4>\n<ol>\n<li>\n<p>åˆ›å»ºé›†åˆ</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># åˆ›å»ºé›†åˆ</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>db.createCollection<span class=\"token punctuation\">(</span><span class=\"token string\">\"test\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\"># æŸ¥çœ‹æ‰€æœ‰é›†åˆ</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>show collections</pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\"># æŸ¥çœ‹æ‰€æœ‰é›†åˆï¼ˆæ–¹å¼äºŒï¼‰</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>show tables</pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token comment\"># åˆ›å»ºå›ºå®šé›†åˆ</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>db.createCollection<span class=\"token punctuation\">(</span><span class=\"token string\">\"col2\"</span>,<span class=\"token punctuation\">&#123;</span>capped:true,autoIndexId:true,size:6142800,max:10000<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># é›†åˆå¤§å°ï¼š6142800Bï¼Œæœ€å¤§æ–‡æ¡£ä¸ªæ•°ï¼š10000</span></pre></td></tr></table></figure><blockquote>\n<p>åœ¨ MongoDB ä¸­ï¼Œå…¶å®ä¸éœ€è¦æ˜¾å¼åˆ›å»ºé›†åˆï¼Œåœ¨æ’å…¥æ–‡æ¡£æ—¶ï¼ŒMongoDB å°±ä¼šè‡ªåŠ¨åˆ›å»ºé›†åˆã€‚</p>\n</blockquote>\n</li>\n<li>\n<p>åˆ é™¤é›†åˆ</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># db.collection.drop ()ï¼Œè¿”å›å¸ƒå°”å€¼</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>db.col2.drop<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure></li>\n<li>\n<p>æ–‡æ¡£åŸºæœ¬æ“ä½œ</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># æ’å…¥æ–‡æ¡£</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>db.col.insert<span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span>title: <span class=\"token string\">'Telephone Book'</span>, user: <span class=\"token string\">'Jason'</span>,mobile: <span class=\"token string\">'138****2573'</span>,site: <span class=\"token string\">'https://www.jason.com'</span>,label: <span class=\"token punctuation\">[</span><span class=\"token string\">'classmate'</span>, <span class=\"token string\">'friend'</span><span class=\"token punctuation\">]</span>,description: <span class=\"token string\">''</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>db.col.find<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># æŸ¥çœ‹æ–‡æ¡£å†…å®¹</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\"># ä¹Ÿå¯ä»¥å°†æ•°æ®å®šä¹‰ä¸ºå˜é‡ï¼Œç„¶åæ’å…¥è¯¥å˜é‡</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token assign-left variable\">jason_document</span><span class=\"token operator\">=</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span>title: <span class=\"token string\">'Telephone Book'</span>, user: <span class=\"token string\">'Jason'</span>,mobile: <span class=\"token string\">'138****2573'</span>,site: <span class=\"token string\">'https://www.jason.com'</span>,label: <span class=\"token punctuation\">[</span><span class=\"token string\">'classmate'</span>, <span class=\"token string\">'friend'</span><span class=\"token punctuation\">]</span>,description: <span class=\"token string\">''</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>db.col.insert<span class=\"token punctuation\">(</span>jason_document<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token comment\"># v3.2 ç‰ˆæœ¬ä¹‹åæ–°å¢äº† insertOne å’Œ insertMany æ–¹æ³•</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>db.col2.insertOne<span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span><span class=\"token string\">\"name\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"Lily\"</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>db.col2.insertMany<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">&#123;</span><span class=\"token string\">\"name\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"Charles\"</span><span class=\"token punctuation\">&#125;</span>,<span class=\"token punctuation\">&#123;</span><span class=\"token string\">\"name\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"James\"</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><blockquote>\n<p>save æ–¹æ³•ä¹Ÿå¯ä»¥åˆ›å»ºæ–‡æ¡£ã€‚</p>\n</blockquote>\n</li>\n<li>\n<p>æ›´æ–°æ–‡æ¡£</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># å‚æ•°ï¼ˆ1. ç­›é€‰æ¡ä»¶ï¼Œ2. æ›´æ–°å†…å®¹ï¼Œ3.***ï¼Œ4.***ï¼‰</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>db.col.update<span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span><span class=\"token string\">'title'</span><span class=\"token builtin class-name\">:</span><span class=\"token string\">'Telephone Book'</span><span class=\"token punctuation\">&#125;</span>,<span class=\"token punctuation\">&#123;</span><span class=\"token variable\">$set</span>:<span class=\"token punctuation\">&#123;</span><span class=\"token string\">'title'</span><span class=\"token builtin class-name\">:</span><span class=\"token string\">'Telephone Book: Jason'</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># æŸ¥è¯¢æ ‡é¢˜ä¸º Telephone Book çš„æ•°æ®ï¼Œå¹¶æ›´æ–°æ ‡é¢˜</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\"># åŒæ—¶æ›´æ–°å¤šæ¡æ–‡æ¡£å†…å®¹</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>db.col.update<span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span><span class=\"token string\">'user'</span><span class=\"token builtin class-name\">:</span><span class=\"token string\">'Jason'</span><span class=\"token punctuation\">&#125;</span>,<span class=\"token punctuation\">&#123;</span><span class=\"token variable\">$set</span>:<span class=\"token punctuation\">&#123;</span><span class=\"token string\">'title'</span><span class=\"token builtin class-name\">:</span><span class=\"token string\">'Telephone Book: Jason'</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">&#125;</span>,<span class=\"token punctuation\">&#123;</span>multi:true<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token comment\"># saveï¼ˆå¦‚æœæŒ‡å®šäº† _id å­—æ®µï¼Œåˆ™æ›´æ–°å¯¹åº”æ–‡æ¡£ï¼Œå¦‚æœæœªæŒ‡å®šï¼Œåˆ™æ–°å¢æ–‡æ¡£ï¼‰</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>db.col.save<span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span><span class=\"token string\">\"_id\"</span> <span class=\"token builtin class-name\">:</span> ObjectId<span class=\"token punctuation\">(</span><span class=\"token string\">\"61c9ad7bba2a467651726dba\"</span><span class=\"token punctuation\">)</span>,title: <span class=\"token string\">'Telephone Book: Bill'</span>, user: <span class=\"token string\">'Bill'</span>,mobile: <span class=\"token string\">'187****0966'</span>,site: <span class=\"token string\">'https://www.bill.com'</span>,label: <span class=\"token punctuation\">[</span><span class=\"token string\">'classmate'</span><span class=\"token punctuation\">]</span>,description: <span class=\"token string\">''</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>db.col.find<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># æŸ¥è¯¢å¹¶æ ¼å¼åŒ–æ˜¾ç¤º</span></pre></td></tr></table></figure><blockquote>\n<p>ä½¿ç”¨ save æ–¹æ³•æ›´æ–°æ–‡æ¡£æ—¶ï¼Œæ–‡æ¡£å†…æ‰€æœ‰å­—æ®µéƒ½ä¼šè¢«æ›´æ–°ï¼Œå³ save ä¸­æœªæŒ‡å®šå­—æ®µä¼šè¢«ç§»é™¤ï¼Œsave æŒ‡å®šä½†æ•°æ®åº“ä¸å­˜åœ¨å­—æ®µä¼šè¢«æ–°å¢ã€‚</p>\n</blockquote>\n</li>\n<li>\n<p>åˆ é™¤æ–‡æ¡£</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># åˆ é™¤æŒ‡å®šæ•°æ®</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>db.col.remove<span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span><span class=\"token string\">'user'</span><span class=\"token builtin class-name\">:</span><span class=\"token string\">'Jason'</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\"># åˆ é™¤æ‰€æœ‰</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>db.col.remove<span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure></li>\n<li>\n<p>æŸ¥è¯¢æ–‡æ¡£</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># æŸ¥è¯¢æ‰€æœ‰</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>db.col.find<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\"># æŸ¥è¯¢å¹¶è¿”å›æŒ‡å®šçš„é”®</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>db.col.find<span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span>,<span class=\"token punctuation\">&#123;</span><span class=\"token string\">\"title\"</span>:1,_id:0<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>db.col.find<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token comment\"># æŸ¥è¯¢å¹¶æ ¼å¼åŒ–æ˜¾ç¤º</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>db.col.find<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>.pretty<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token comment\"># æŸ¥è¯¢ä¸€æ¡</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>db.col.findOne<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>æ¯”è¾ƒæŸ¥è¯¢ï¼š</p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">æ“ä½œ</th>\n<th style=\"text-align:left\">æ ¼å¼</th>\n<th style=\"text-align:left\">ç¤ºä¾‹</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">ç­‰äº</td>\n<td style=\"text-align:left\"><code>&#123;&lt;key&gt;:&lt;value&gt;&#125;</code></td>\n<td style=\"text-align:left\">db.col.find({&quot;title&quot;:&quot;John&quot;})</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">å°äº</td>\n<td style=\"text-align:left\"><code>&#123;&lt;key&gt;:&#123;$lt:&lt;value&gt;&#125;&#125;</code></td>\n<td style=\"text-align:left\">db.col.find({&quot;age&quot;:{$lt:18}})</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">å°äºç­‰äº</td>\n<td style=\"text-align:left\"><code>&#123;&lt;key&gt;:&#123;$lte:&lt;value&gt;&#125;&#125;</code></td>\n<td style=\"text-align:left\">db.col.find({&quot;age&quot;:{$lte:18}})</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">å¤§äº</td>\n<td style=\"text-align:left\"><code>&#123;&lt;key&gt;:&#123;$gt:&lt;value&gt;&#125;&#125;</code></td>\n<td style=\"text-align:left\">db.col.find({&quot;age&quot;:{$gt:18}})</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">å¤§äºç­‰äº</td>\n<td style=\"text-align:left\"><code>&#123;&lt;key&gt;:&#123;$gte:&lt;value&gt;&#125;&#125;</code></td>\n<td style=\"text-align:left\">db.col.find({&quot;age&quot;:{$gte:18}})</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">ä¸ç­‰äº</td>\n<td style=\"text-align:left\"><code>&#123;&lt;key&gt;:&#123;$ne:&lt;value&gt;&#125;&#125;</code></td>\n<td style=\"text-align:left\">db.col.find({&quot;age&quot;:{$ne:18}})</td>\n</tr>\n</tbody>\n</table>\n<p>è¿™äº›æ¯”è¾ƒæŸ¥è¯¢è¯­å¥ï¼Œç±»ä¼¼äºå…³ç³»å‹æ•°æ®åº“ä¸­çš„  <code>select * from col where age &gt; 18;</code> ã€‚</p>\n<p>AND å’Œ ORï¼š</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># AND</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>db.col.find<span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span>key1:value1, key2:value2<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\"># OR</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>db.col.find<span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span><span class=\"token variable\">$or</span>:<span class=\"token punctuation\">[</span><span class=\"token punctuation\">&#123;</span>key1: value1<span class=\"token punctuation\">&#125;</span>,<span class=\"token punctuation\">&#123;</span>key2:value2<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\"># AND å’Œ OR è”åˆä½¿ç”¨</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>db.col.find<span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span><span class=\"token string\">\"site\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"https://www.jason.com\"</span>, <span class=\"token variable\">$or</span><span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">&#123;</span><span class=\"token string\">\"user\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"Jason\"</span><span class=\"token punctuation\">&#125;</span>,<span class=\"token punctuation\">&#123;</span><span class=\"token string\">\"age\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">&#123;</span><span class=\"token variable\">$gt</span>:18<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure></li>\n</ol>\n<h3 id=\"è¿›é˜¶æ“ä½œ\"><a class=\"anchor\" href=\"#è¿›é˜¶æ“ä½œ\">#</a> è¿›é˜¶æ“ä½œ</h3>\n<h4 id=\"type\"><a class=\"anchor\" href=\"#type\">#</a> $type</h4>\n<p><img data-src=\"https://img.xfc-exclave.com/2021/12/150a87c9c43d3543ba943f30492c02af1640610969.png\" alt=\"image-20211227211354948\" /></p>\n<p>ä½¿ç”¨ç¤ºä¾‹ï¼š</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># æŸ¥è¯¢ title ç±»å‹ä¸º string çš„æ•°æ®</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>db.col.find<span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span><span class=\"token string\">\"title\"</span> <span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">&#123;</span><span class=\"token variable\">$type</span> <span class=\"token builtin class-name\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\"># ç­‰ä»·äº</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>db.col.find<span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span><span class=\"token string\">\"title\"</span> <span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">&#123;</span><span class=\"token variable\">$type</span> <span class=\"token builtin class-name\">:</span> <span class=\"token string\">'string'</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><h4 id=\"limit-å’Œ-skip\"><a class=\"anchor\" href=\"#limit-å’Œ-skip\">#</a> limit å’Œ skip</h4>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># æŸ¥è¯¢ 2 æ¡è®°å½•</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>db.col.find<span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span>,<span class=\"token punctuation\">&#123;</span><span class=\"token string\">\"user\"</span>:1,_id:0<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span>.limit<span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\"># è·³è¿‡ 1 æ¡æ•°ï¼Œå¹¶æŸ¥è¯¢å…¶åç»­çš„ 2 æ¡è®°å½•</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>db.col.find<span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span>,<span class=\"token punctuation\">&#123;</span><span class=\"token string\">\"user\"</span>:1,_id:0<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span>.limit<span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span>.skip<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><h4 id=\"æ’åº\"><a class=\"anchor\" href=\"#æ’åº\">#</a> æ’åº</h4>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># æ’åºä½¿ç”¨ 1 å’Œ - 1 æ¥åˆ†åˆ«è¡¨ç¤ºæ­£åºå’Œå€’å™</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>db.col.find<span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span>,<span class=\"token punctuation\">&#123;</span><span class=\"token string\">\"user\"</span>:1,_id:0<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span>.sort<span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span><span class=\"token string\">\"age\"</span>:-1<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><h4 id=\"ç´¢å¼•\"><a class=\"anchor\" href=\"#ç´¢å¼•\">#</a> ç´¢å¼•</h4>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># æ ¹æ®é”®å user æŒ‰é¡ºåºåˆ›å»ºç´¢å¼•ï¼Œ1 ä¸ºå‡åºï¼Œ-1 ä¸ºé™åº</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>db.col.createIndex<span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span><span class=\"token string\">\"user\"</span>:-1<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\"># å¤åˆç´¢å¼•</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>db.col.createIndex<span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span><span class=\"token string\">\"title\"</span>:1,<span class=\"token string\">\"description\"</span>:-1<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\"># æŸ¥çœ‹é›†åˆç´¢å¼•</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>db.col.getIndexes<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token comment\"># æŸ¥çœ‹é›†åˆç´¢å¼•å¤§å°</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>db.col.totalIndexSize<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\"># åˆ é™¤æ‰€æœ‰é›†åˆç´¢å¼•</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>db.col.dropIndexes<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token comment\"># åˆ é™¤é›†åˆæŒ‡å®šç´¢å¼•</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>db.col.dropIndex<span class=\"token punctuation\">(</span><span class=\"token string\">\"myindex\"</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><blockquote>\n<p>åˆ›å»ºç´¢å¼•è¿˜å¯ä»¥æ¥å—è®¸å¤šå‚æ•°ï¼Œå¦‚ç´¢å¼•åç§°ã€æ˜¯å¦å”¯ä¸€ã€è®¾ç½®è¿‡æœŸæ—¶é—´ç­‰ï¼Œè¯¦æƒ…å¯è‡ªè¡Œå‚è€ƒ<span class=\"exturl\" data-url=\"aHR0cHM6Ly9kb2NzLm1vbmdvZGIuY29tL21hbnVhbC9yZWZlcmVuY2UvY29tbWFuZC9jcmVhdGVJbmRleGVz\">å®˜æ–¹æ–‡æ¡£</span>ã€‚</p>\n</blockquote>\n<h4 id=\"èšåˆ\"><a class=\"anchor\" href=\"#èšåˆ\">#</a> èšåˆ</h4>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>db.mypost.aggregate<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">&#123;</span><span class=\"token variable\">$group</span> <span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">&#123;</span>_id <span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"<span class=\"token variable\">$author</span>\"</span>, post_count <span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">&#123;</span><span class=\"token variable\">$sum</span> <span class=\"token builtin class-name\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\"># ç±»ä¼¼äºå¦‚ä¸‹ SQL</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">select</span> author, count<span class=\"token punctuation\">(</span>*<span class=\"token punctuation\">)</span> as post_count from mypost group by author</pre></td></tr></table></figure><ol>\n<li>\n<p>ç®¡é“ï¼š</p>\n<p>åœ¨æ­¤å¤„çš„ç¤ºä¾‹ä¸­ï¼Œ <code>$group</code>  æ˜¯ MongoDB ç®¡é“çš„ä¸€ç§ï¼ŒMongoDB çš„èšåˆç®¡é“å°† MongoDB æ–‡æ¡£åœ¨ä¸€ä¸ªç®¡é“å¤„ç†å®Œæ¯•åå°†ç»“æœä¼ é€’ç»™ä¸‹ä¸€ä¸ªç®¡é“å¤„ç†ï¼Œå¹¶ä¸”ç®¡é“æ“ä½œæ˜¯å¯ä»¥é‡å¤çš„ã€‚</p>\n<p>å¸¸ç”¨ç®¡é“æ“ä½œç¬¦ï¼š</p>\n<ul>\n<li>$projectï¼šä¿®æ”¹è¾“å…¥æ–‡æ¡£çš„ç»“æ„ã€‚å¯ä»¥ç”¨æ¥é‡å‘½åã€å¢åŠ æˆ–åˆ é™¤åŸŸï¼Œä¹Ÿå¯ä»¥ç”¨äºåˆ›å»ºè®¡ç®—ç»“æœä»¥åŠåµŒå¥—æ–‡æ¡£ã€‚</li>\n<li><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>m</mi><mi>a</mi><mi>t</mi><mi>c</mi><mi>h</mi><mtext>ï¼šç”¨äºè¿‡æ»¤æ•°æ®ï¼Œåªè¾“å‡ºç¬¦åˆæ¡ä»¶çš„æ–‡æ¡£ã€‚</mtext></mrow><annotation encoding=\"application/x-tex\">matchï¼šç”¨äºè¿‡æ»¤æ•°æ®ï¼Œåªè¾“å‡ºç¬¦åˆæ¡ä»¶çš„æ–‡æ¡£ã€‚</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">m</span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\">t</span><span class=\"mord mathnormal\">c</span><span class=\"mord mathnormal\">h</span><span class=\"mord cjk_fallback\">ï¼š</span><span class=\"mord cjk_fallback\">ç”¨</span><span class=\"mord cjk_fallback\">äº</span><span class=\"mord cjk_fallback\">è¿‡</span><span class=\"mord cjk_fallback\">æ»¤</span><span class=\"mord cjk_fallback\">æ•°</span><span class=\"mord cjk_fallback\">æ®</span><span class=\"mord cjk_fallback\">ï¼Œ</span><span class=\"mord cjk_fallback\">åª</span><span class=\"mord cjk_fallback\">è¾“</span><span class=\"mord cjk_fallback\">å‡º</span><span class=\"mord cjk_fallback\">ç¬¦</span><span class=\"mord cjk_fallback\">åˆ</span><span class=\"mord cjk_fallback\">æ¡</span><span class=\"mord cjk_fallback\">ä»¶</span><span class=\"mord cjk_fallback\">çš„</span><span class=\"mord cjk_fallback\">æ–‡</span><span class=\"mord cjk_fallback\">æ¡£</span><span class=\"mord cjk_fallback\">ã€‚</span></span></span></span>match ä½¿ç”¨ MongoDB çš„æ ‡å‡†æŸ¥è¯¢æ“ä½œã€‚</li>\n<li>$limitï¼šç”¨æ¥é™åˆ¶ MongoDB èšåˆç®¡é“è¿”å›çš„æ–‡æ¡£æ•°ã€‚</li>\n<li>$skipï¼šåœ¨èšåˆç®¡é“ä¸­è·³è¿‡æŒ‡å®šæ•°é‡çš„æ–‡æ¡£ï¼Œå¹¶è¿”å›ä½™ä¸‹çš„æ–‡æ¡£ã€‚</li>\n<li>$unwindï¼šå°†æ–‡æ¡£ä¸­çš„æŸä¸€ä¸ªæ•°ç»„ç±»å‹å­—æ®µæ‹†åˆ†æˆå¤šæ¡ï¼Œæ¯æ¡åŒ…å«æ•°ç»„ä¸­çš„ä¸€ä¸ªå€¼ã€‚</li>\n<li>$groupï¼šå°†é›†åˆä¸­çš„æ–‡æ¡£åˆ†ç»„ï¼Œå¯ç”¨äºç»Ÿè®¡ç»“æœã€‚</li>\n<li>$sortï¼šå°†è¾“å…¥æ–‡æ¡£æ’åºåè¾“å‡ºã€‚</li>\n<li>$geoNearï¼šè¾“å‡ºæ¥è¿‘æŸä¸€åœ°ç†ä½ç½®çš„æœ‰åºæ–‡æ¡£ã€‚</li>\n</ul>\n</li>\n<li>\n<p>è¡¨è¾¾å¼ï¼š</p>\n<p>æ­¤å¤„ç¤ºä¾‹ä¸­çš„  <code>$sum</code>  å³æ˜¯è¡¨ç¤ºèšåˆæ“ä½œçš„è¡¨è¾¾å¼ã€‚</p>\n<p>å¸¸ç”¨è¡¨è¾¾å¼ï¼š</p>\n<ul>\n<li>$sumï¼šè®¡ç®—æ€»å’Œã€‚</li>\n<li>$avgï¼šè®¡ç®—å¹³å‡å€¼</li>\n<li>$minï¼šè·å–é›†åˆä¸­æ‰€æœ‰æ–‡æ¡£å¯¹åº”å€¼å¾—æœ€å°å€¼ã€‚</li>\n<li>$maxï¼šè·å–é›†åˆä¸­æ‰€æœ‰æ–‡æ¡£å¯¹åº”å€¼å¾—æœ€å¤§å€¼ã€‚</li>\n<li>$pushï¼šå°†å€¼åŠ å…¥ä¸€ä¸ªæ•°ç»„ä¸­ï¼Œä¸ä¼šåˆ¤æ–­æ˜¯å¦æœ‰é‡å¤çš„å€¼ã€‚</li>\n<li>$addToSetï¼šå°†å€¼åŠ å…¥ä¸€ä¸ªæ•°ç»„ä¸­ï¼Œä¼šåˆ¤æ–­æ˜¯å¦æœ‰é‡å¤çš„å€¼ï¼Œè‹¥ç›¸åŒçš„å€¼åœ¨æ•°ç»„ä¸­å·²ç»å­˜åœ¨äº†ï¼Œåˆ™ä¸åŠ å…¥ã€‚</li>\n<li>$firstï¼šæ ¹æ®èµ„æºæ–‡æ¡£çš„æ’åºè·å–ç¬¬ä¸€ä¸ªæ–‡æ¡£æ•°æ®ã€‚</li>\n<li>$lastï¼šæ ¹æ®èµ„æºæ–‡æ¡£çš„æ’åºè·å–æœ€åä¸€ä¸ªæ–‡æ¡£æ•°æ®</li>\n</ul>\n</li>\n</ol>\n<h4 id=\"å¤åˆ¶å‰¯æœ¬é›†\"><a class=\"anchor\" href=\"#å¤åˆ¶å‰¯æœ¬é›†\">#</a> å¤åˆ¶ï¼ˆå‰¯æœ¬é›†ï¼‰</h4>\n<p>MongoDB å¤åˆ¶æ˜¯å°†æ•°æ®åŒæ­¥åœ¨å¤šä¸ªæœåŠ¡å™¨çš„è¿‡ç¨‹ã€‚å¤åˆ¶æä¾›äº†æ•°æ®çš„å†—ä½™å¤‡ä»½ï¼Œå¹¶åœ¨å¤šä¸ªæœåŠ¡å™¨ä¸Šå­˜å‚¨æ•°æ®å‰¯æœ¬ï¼Œæé«˜äº†æ•°æ®çš„å¯ç”¨æ€§ï¼Œ å¹¶å¯ä»¥ä¿è¯æ•°æ®çš„å®‰å…¨æ€§ã€‚å¤åˆ¶è¿˜å…è®¸æ‚¨ä»ç¡¬ä»¶æ•…éšœå’ŒæœåŠ¡ä¸­æ–­ä¸­æ¢å¤æ•°æ®ã€‚</p>\n<p><strong>MongoDB å¤åˆ¶åŸç†ï¼š</strong></p>\n<p>MongoDB å¤åˆ¶è‡³å°‘éœ€è¦ä¸¤ä¸ªèŠ‚ç‚¹ï¼Œå…¶ä¸­ä¸€ä¸ªæ˜¯ä¸»èŠ‚ç‚¹ï¼Œè´Ÿè´£å¤„ç†å®¢æˆ·ç«¯è¯·æ±‚ï¼Œå…¶ä½™çš„éƒ½æ˜¯ä»èŠ‚ç‚¹ï¼Œè´Ÿè´£å¤åˆ¶ä¸»èŠ‚ç‚¹ä¸Šçš„æ•°æ®ã€‚</p>\n<p>ä¸»èŠ‚ç‚¹è®°å½•åœ¨å…¶ä¸Šçš„æ‰€æœ‰æ“ä½œ oplogï¼Œä»èŠ‚ç‚¹å®šæœŸè½®è¯¢ä¸»èŠ‚ç‚¹è·å–è¿™äº›æ“ä½œï¼Œç„¶åå¯¹è‡ªå·±çš„æ•°æ®å‰¯æœ¬æ‰§è¡Œè¿™äº›æ“ä½œï¼Œä»è€Œä¿è¯ä»èŠ‚ç‚¹çš„æ•°æ®ä¸ä¸»èŠ‚ç‚¹ä¸€è‡´ã€‚</p>\n<p>MongoDB å¤åˆ¶ç»“æ„å›¾å¦‚ä¸‹æ‰€ç¤ºï¼š</p>\n<p><img data-src=\"https://img.xfc-exclave.com/2021/12/3ff8e97233badeaa61c8cc333404a57b1640616478.png\" alt=\"image-20211227222410409\" /></p>\n<p>å‰¯æœ¬é›†å…·æœ‰å¦‚ä¸‹ç‰¹å¾ï¼š</p>\n<ul>\n<li>N ä¸ªèŠ‚ç‚¹çš„é›†ç¾¤</li>\n<li>ä»»ä½•èŠ‚ç‚¹å¯ä½œä¸ºä¸»èŠ‚ç‚¹</li>\n<li>æ‰€æœ‰å†™å…¥æ“ä½œéƒ½åœ¨ä¸»èŠ‚ç‚¹ä¸Š</li>\n<li>è‡ªåŠ¨æ•…éšœè½¬ç§»</li>\n<li>è‡ªåŠ¨æ¢å¤</li>\n</ul>\n<p><strong>å‰¯æœ¬é›†è®¾ç½®ï¼š</strong></p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># å¯åŠ¨ä¸€ä¸ªåä¸º rs0 çš„ MongoDB å®ä¾‹</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>mongod --port <span class=\"token number\">27017</span> --dbpath <span class=\"token string\">\"A:\\MongoDB\\Server<span class=\"token entity\" title=\"\\5\">\\5</span>.0\\data\"</span> --replSet rs0</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\"># å®¢æˆ·ç«¯è¿æ¥å¹¶å¯åŠ¨ä¸€ä¸ªæ–°çš„å‰¯æœ¬é›†</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>rs.initiate<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\"># æŸ¥çœ‹å‰¯æœ¬é›†é…ç½®</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>rs.conf<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token comment\"># æŸ¥çœ‹å‰¯æœ¬é›†çŠ¶æ€</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>rs.status<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p><strong>æ·»åŠ å‰¯æœ¬é›†æˆå‘˜ï¼š</strong></p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># å‰¯æœ¬é›†æ·»åŠ æˆå‘˜</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>rs.add<span class=\"token punctuation\">(</span><span class=\"token string\">\"192.168.0.101:27017\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\"># åˆ¤æ–­å½“å‰è¿è¡Œçš„ Mongo æœåŠ¡æ˜¯å¦ä¸ºä¸»èŠ‚ç‚¹</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>db.isMaster<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><blockquote>\n<p>MongoDB ä¸­ä½ åªèƒ½é€šè¿‡ä¸»èŠ‚ç‚¹å°† Mongo æœåŠ¡æ·»åŠ åˆ°å‰¯æœ¬é›†ä¸­ï¼Œå¹¶ä¸”ï¼ŒMongoDB çš„å‰¯æœ¬é›†ä¸æˆ‘ä»¬å¸¸è§çš„ä¸»ä»æœ‰æ‰€ä¸åŒï¼Œä¸»ä»åœ¨ä¸»æœºå®•æœºåæ‰€æœ‰æœåŠ¡å°†åœæ­¢ï¼Œè€Œå‰¯æœ¬é›†åœ¨ä¸»æœºå®•æœºåï¼Œå‰¯æœ¬ä¼šæ¥ç®¡ä¸»èŠ‚ç‚¹æˆä¸ºä¸»èŠ‚ç‚¹ã€‚</p>\n</blockquote>\n<h4 id=\"åˆ†ç‰‡\"><a class=\"anchor\" href=\"#åˆ†ç‰‡\">#</a> åˆ†ç‰‡</h4>\n<p>MongoDB ä¸­å­˜åœ¨ä¸€ç§åˆ†ç‰‡æŠ€æœ¯ï¼Œå®ƒå¯ä»¥é€šè¿‡åœ¨å¤šå°æœºå™¨ä¸Šåˆ†å‰²æ•°æ®çš„æ–¹å¼ï¼Œæ¥ä½¿å¾—æ•°æ®åº“ç³»ç»Ÿèƒ½å­˜å‚¨å’Œå¤„ç†æ›´å¤šçš„æ•°æ®æˆ–æé«˜è¯»å†™ååé‡ã€‚</p>\n<p>åˆ†ç‰‡ç»“æ„é›†ç¾¤éƒ¨ç½²å›¾ä¾‹ï¼š</p>\n<p><img data-src=\"https://img.xfc-exclave.com/2021/12/d2d8f131c1e59a0a634c2953b12c1b891640618022.png\" alt=\"image-20211227231337940\" /></p>\n<p>ç»„ä»¶è¯´æ˜ï¼š</p>\n<ul>\n<li>Shardï¼šç”¨äºå­˜å‚¨å®é™…çš„æ•°æ®å—ï¼Œå®é™…ç”Ÿäº§ç¯å¢ƒä¸­ä¸€ä¸ª shard server è§’è‰²å¯ç”±å‡ å°æœºå™¨ç»„ä¸ªä¸€ä¸ª replica set æ‰¿æ‹…ï¼Œé˜²æ­¢ä¸»æœºå•ç‚¹æ•…éšœã€‚</li>\n<li>Config Serversï¼šmongod å®ä¾‹ï¼Œå­˜å‚¨äº†æ•´ä¸ª ClusterMetadataï¼Œå…¶ä¸­åŒ…æ‹¬ chunk ä¿¡æ¯ã€‚</li>\n<li>Query Routersï¼šå‰ç«¯è·¯ç”±ï¼Œå®¢æˆ·ç«¯ç”±æ­¤æ¥å…¥ï¼Œä¸”è®©æ•´ä¸ªé›†ç¾¤çœ‹ä¸Šå»åƒå•ä¸€æ•°æ®åº“ï¼Œå‰ç«¯åº”ç”¨å¯ä»¥é€æ˜ä½¿ç”¨ã€‚</li>\n</ul>\n<p><span class=\"label danger\">â—ï¸TODO</span> æœªå®Œå¾…è¡¥å……</p>\n<h4 id=\"å¤‡ä»½ä¸æ¢å¤\"><a class=\"anchor\" href=\"#å¤‡ä»½ä¸æ¢å¤\">#</a> å¤‡ä»½ä¸æ¢å¤</h4>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># æ•°æ®å¤‡ä»½ï¼Œè¯­æ³•ï¼šmongodump -h &lt;hostname>&lt;:port> -d dbname -o &lt;path></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\"># ä¸æŒ‡å®šå‚æ•°ï¼Œåˆ™è¿æ¥æœ¬åœ° 27017 ç«¯å£æœåŠ¡ï¼Œé»˜è®¤å¤‡ä»½åˆ°ç›®å½• [mongodb]/bin/dump/ ä¸­</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>mongodump</pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\"># å¤‡ä»½æ¢å¤ï¼Œè¯­æ³•ï¼šmongorestore -h &lt;hostname>&lt;:port> -d dbname &lt;path></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\"># ä¸æŒ‡å®šå‚æ•°ï¼Œåˆ™è¿æ¥æœ¬åœ° 27017 ç«¯å£æœåŠ¡ï¼Œé»˜è®¤ä»ç›®å½• [mongodb]/bin/dump/ ä¸­è·å–å¤‡ä»½æ–‡ä»¶</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>mongorestore</pre></td></tr></table></figure><h4 id=\"ç›‘æ§\"><a class=\"anchor\" href=\"#ç›‘æ§\">#</a> ç›‘æ§</h4>\n<p><code>mongostat</code>  æ˜¯ MongoDB è‡ªå¸¦çš„çŠ¶æ€æ£€æµ‹å·¥å…·ï¼Œåœ¨å‘½ä»¤è¡Œä¸‹ä½¿ç”¨ã€‚å®ƒä¼šé—´éš”å›ºå®šæ—¶é—´è·å– MongoDB çš„å½“å‰è¿è¡ŒçŠ¶æ€ï¼Œå¹¶è¾“å‡ºã€‚</p>\n<p>ä½¿ç”¨æ–¹å¼ï¼š</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>mongostat <span class=\"token comment\"># æ— å¯†ç ç›‘æ§é»˜è®¤æ•°æ®åº“</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>mongostat -uroot -p123456 --authenticationDatabase<span class=\"token operator\">=</span>admin</pre></td></tr></table></figure><blockquote>\n<p>å¦‚æç¤º command serverStatus requires authenticationï¼Œé‚£ä¹ˆå¤šåŠæ˜¯å› ä¸º MongoDB éœ€è¦ç™»å½•æƒé™ï¼Œè¯¦æƒ…å¯é€šè¿‡å‘½ä»¤  <code>mongostat --help</code>  æŸ¥çœ‹ã€‚</p>\n</blockquote>\n<p><code>mongotop</code>  ä¹Ÿæ˜¯ MongoDB ä¸‹çš„ä¸€ä¸ªå†…ç½®å·¥å…·ï¼Œmongotop æä¾›äº†ä¸€ä¸ªæ–¹æ³•ï¼Œç”¨æ¥è·Ÿè¸ªä¸€ä¸ª MongoDB çš„å®ä¾‹ï¼ŒæŸ¥çœ‹å“ªäº›å¤§é‡çš„æ—¶é—´èŠ±è´¹åœ¨è¯»å–å’Œå†™å…¥æ•°æ®ã€‚ mongotop æä¾›æ¯ä¸ªé›†åˆçš„æ°´å¹³çš„ç»Ÿè®¡æ•°æ®ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œmongotop è¿”å›å€¼çš„æ¯ä¸€ç§’ã€‚</p>\n<p>ä½¿ç”¨æ–¹å¼ï¼š</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>mongotop <span class=\"token comment\"># æ— å¯†ç ç›‘æ§é»˜è®¤æ•°æ®åº“</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>mongotop -uroot -p123456 --authenticationDatabase<span class=\"token operator\">=</span>admin</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>mongotop -uroot -p123456 --authenticationDatabase<span class=\"token operator\">=</span>admin --lock <span class=\"token comment\"># ç›‘æ§å„ä¸ªæ•°æ®åº“é”ä½¿ç”¨æƒ…å†µ</span></pre></td></tr></table></figure><h3 id=\"api\"><a class=\"anchor\" href=\"#api\">#</a> API</h3>\n<h4 id=\"java-api\"><a class=\"anchor\" href=\"#java-api\">#</a> Java API</h4>\n<blockquote>\n<p>æ­¤å¤„ MongoDB Java API ä»¥ SpringBoot æ¡†æ¶ä½œä¸ºç¤ºä¾‹ã€‚</p>\n</blockquote>\n<p>å‡†å¤‡å·¥ä½œï¼š</p>\n<ol>\n<li>\n<p>ä½¿ç”¨ SpringInitializer åˆ›å»ºä¸€ä¸ªæµ‹è¯•é¡¹ç›®ã€‚</p>\n</li>\n<li>\n<p>é…ç½®ä¾èµ–åŒ…ã€‚</p>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>org.springframework.boot<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>spring-boot-starter-data-mongodb<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>org.projectlombok<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>lombok<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>org.springframework.boot<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>spring-boot-starter-web<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure></li>\n<li>\n<p>å¯åŠ¨æ–‡ä»¶é…ç½®ï¼š</p>\n<figure class=\"highlight yaml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">spring</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token key atrule\">data</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token key atrule\">mongodb</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>      <span class=\"token key atrule\">uri</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"mongodb://localhost:27017/test\"</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>      <span class=\"token comment\"># å¦‚æœªè®¾ç½®åˆ™ä¸éœ€è¦æŒ‡å®šç”¨æˆ·ååŠå¯†ç </span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>      <span class=\"token comment\"># username:</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>      <span class=\"token comment\"># password:</span></pre></td></tr></table></figure></li>\n<li>\n<p>åˆ›å»ºç”¨äºæµ‹è¯•çš„å®ä½“ç±»ï¼š</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token annotation punctuation\">@Data</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">User</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token comment\">//id ä¼šè¢«æ˜ å°„ä¸º mongodb æ–‡æ¡£çš„ä¸»é”®</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> id<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> name<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token keyword\">int</span> age<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure></li>\n</ol>\n<p>åŸºç¡€å¢åˆ æ”¹æŸ¥ï¼š</p>\n<ol>\n<li>\n<p>åˆ›å»ºæ¥å£ï¼š</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">UserService</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token class-name\">User</span> <span class=\"token function\">insert</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">User</span> user<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token class-name\">User</span> <span class=\"token function\">save</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">User</span> user<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token class-name\">User</span> <span class=\"token function\">update</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">User</span> user<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">User</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">findAll</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token keyword\">boolean</span> <span class=\"token function\">remove</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">User</span> user<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure></li>\n<li>\n<p>å®ç°ç±»ï¼š</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token annotation punctuation\">@Service</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">UserServiceImpl</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">UserService</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token annotation punctuation\">@Autowired</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">MongoTemplate</span> mongoTemplate<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">User</span> <span class=\"token function\">insert</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">User</span> user<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>mongoTemplate<span class=\"token punctuation\">.</span><span class=\"token function\">insert</span><span class=\"token punctuation\">(</span>user<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">User</span> <span class=\"token function\">save</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">User</span> user<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>mongoTemplate<span class=\"token punctuation\">.</span><span class=\"token function\">save</span><span class=\"token punctuation\">(</span>user<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">User</span> <span class=\"token function\">update</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">User</span> user<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>mongoTemplate<span class=\"token punctuation\">.</span><span class=\"token function\">save</span><span class=\"token punctuation\">(</span>user<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    <span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">User</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">findAll</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>mongoTemplate<span class=\"token punctuation\">.</span><span class=\"token function\">findAll</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">User</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>    <span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">boolean</span> <span class=\"token function\">remove</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">User</span> user<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>        <span class=\"token class-name\">DeleteResult</span> result <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>mongoTemplate<span class=\"token punctuation\">.</span><span class=\"token function\">remove</span><span class=\"token punctuation\">(</span>user<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>        <span class=\"token keyword\">return</span> result<span class=\"token punctuation\">.</span><span class=\"token function\">getDeletedCount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">></span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure></li>\n<li>\n<p>æä¾› API è®¿é—®ï¼š</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token annotation punctuation\">@RestController</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">UserController</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token annotation punctuation\">@Autowired</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">UserService</span> userService<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token annotation punctuation\">@GetMapping</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/list\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">User</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">findAll</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>userService<span class=\"token punctuation\">.</span><span class=\"token function\">findAll</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token annotation punctuation\">@PostMapping</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/insert\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">User</span> <span class=\"token function\">insert</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">User</span> user<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>userService<span class=\"token punctuation\">.</span><span class=\"token function\">insert</span><span class=\"token punctuation\">(</span>user<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token annotation punctuation\">@PostMapping</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/save\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">User</span> <span class=\"token function\">save</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">User</span> user<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>userService<span class=\"token punctuation\">.</span><span class=\"token function\">save</span><span class=\"token punctuation\">(</span>user<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    <span class=\"token annotation punctuation\">@PostMapping</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/update\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">User</span> <span class=\"token function\">update</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">User</span> user<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>userService<span class=\"token punctuation\">.</span><span class=\"token function\">update</span><span class=\"token punctuation\">(</span>user<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>    <span class=\"token annotation punctuation\">@PostMapping</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/remove\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">boolean</span> <span class=\"token function\">remove</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">User</span> user<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>userService<span class=\"token punctuation\">.</span><span class=\"token function\">remove</span><span class=\"token punctuation\">(</span>user<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure></li>\n<li>\n<p>æµ‹è¯•å‘é€è¯·æ±‚ï¼š</p>\n<figure class=\"highlight http\"><figcaption data-lang=\"HTTP\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>### æ·»åŠ ç”¨æˆ·</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>POST http://localhost:8080/insert?name=Lily&amp;age=21</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token header-name keyword\">Accept:</span> application/json</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>###</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>POST http://localhost:8080/insert?name=Mike&amp;age=26</pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token header-name keyword\">Accept:</span> application/json</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>###</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>POST http://localhost:8080/insert?name=Jason&amp;age=27</pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token header-name keyword\">Accept:</span> application/json</pre></td></tr><tr><td data-num=\"10\"></td><td><pre>###</pre></td></tr><tr><td data-num=\"11\"></td><td><pre>POST http://localhost:8080/insert?name=Philips&amp;age=14</pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token header-name keyword\">Accept:</span> application/json</pre></td></tr><tr><td data-num=\"13\"></td><td><pre>### æ·»åŠ </pre></td></tr><tr><td data-num=\"14\"></td><td><pre>POST http://localhost:8080/save?name=Jill&amp;age=28</pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token header-name keyword\">Accept:</span> application/json</pre></td></tr><tr><td data-num=\"16\"></td><td><pre>### ä¿®æ”¹</pre></td></tr><tr><td data-num=\"17\"></td><td><pre>POST http://localhost:8080/save?name=Jill&amp;age=28&amp;id=61caf27055120f6b62234917</pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token header-name keyword\">Accept:</span> application/json</pre></td></tr><tr><td data-num=\"19\"></td><td><pre>### ä¿®æ”¹</pre></td></tr><tr><td data-num=\"20\"></td><td><pre>POST http://localhost:8080/update?name=Tom&amp;age=33&amp;id=61caf27055120f6b62234917</pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token header-name keyword\">Accept:</span> application/json</pre></td></tr><tr><td data-num=\"22\"></td><td><pre>### æŸ¥è¯¢åˆ—è¡¨</pre></td></tr><tr><td data-num=\"23\"></td><td><pre>GET http://localhost:8080/list</pre></td></tr><tr><td data-num=\"24\"></td><td><pre><span class=\"token header-name keyword\">Accept:</span> application/json</pre></td></tr></table></figure></li>\n</ol>\n<p>æ‰©å±•æŸ¥è¯¢ï¼š</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// å•ä¸€æ¡ä»¶æŸ¥è¯¢ç¤ºä¾‹</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token class-name\">User</span> <span class=\"token function\">queryById</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> id<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token class-name\">Criteria</span> criteria <span class=\"token operator\">=</span> <span class=\"token class-name\">Criteria</span><span class=\"token punctuation\">.</span><span class=\"token function\">where</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"id\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">is</span><span class=\"token punctuation\">(</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token class-name\">Query</span> query <span class=\"token operator\">=</span> <span class=\"token class-name\">Query</span><span class=\"token punctuation\">.</span><span class=\"token function\">query</span><span class=\"token punctuation\">(</span>criteria<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>mongoTemplate<span class=\"token punctuation\">.</span><span class=\"token function\">findOne</span><span class=\"token punctuation\">(</span>query<span class=\"token punctuation\">,</span> <span class=\"token class-name\">User</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// è¿”å›ä¸€æ¡</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\">// ç¬¦åˆæ¡ä»¶æŸ¥è¯¢ç¤ºä¾‹</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">User</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">queryByCondition</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> age<span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span> name<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token class-name\">Criteria</span> criteria <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Criteria</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    criteria<span class=\"token punctuation\">.</span><span class=\"token function\">orOperator</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Criteria</span><span class=\"token punctuation\">.</span><span class=\"token function\">where</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"age\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">gt</span><span class=\"token punctuation\">(</span>age<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">Criteria</span><span class=\"token punctuation\">.</span><span class=\"token function\">where</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"name\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">is</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token class-name\">Query</span> query <span class=\"token operator\">=</span> <span class=\"token class-name\">Query</span><span class=\"token punctuation\">.</span><span class=\"token function\">query</span><span class=\"token punctuation\">(</span>criteria<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token comment\">// æ’åº</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token class-name\">Sort</span> sort <span class=\"token operator\">=</span> <span class=\"token class-name\">Sort</span><span class=\"token punctuation\">.</span><span class=\"token function\">by</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Sort<span class=\"token punctuation\">.</span>Order</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Sort<span class=\"token punctuation\">.</span>Direction</span><span class=\"token punctuation\">.</span>DESC<span class=\"token punctuation\">,</span> <span class=\"token string\">\"id\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    query<span class=\"token punctuation\">.</span><span class=\"token keyword\">with</span><span class=\"token punctuation\">(</span>sort<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>mongoTemplate<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span>query<span class=\"token punctuation\">,</span> <span class=\"token class-name\">User</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// è¿”å›å¤šæ¡</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token comment\">// åˆ†é¡µæŸ¥è¯¢</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">User</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">queryWithPage</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> index<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> limit<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>    <span class=\"token class-name\">Query</span> query <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Query</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>    query<span class=\"token punctuation\">.</span><span class=\"token function\">skip</span><span class=\"token punctuation\">(</span>index<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">limit</span><span class=\"token punctuation\">(</span>limit<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">// ä»ä¸‹æ ‡ä¸º index å¼€å§‹æŸ¥è¯¢æ¥ä¸‹æ¥çš„ limit æ¡æ•°æ®</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>mongoTemplate<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span>query<span class=\"token punctuation\">,</span> <span class=\"token class-name\">User</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre></pre></td></tr><tr><td data-num=\"29\"></td><td><pre><span class=\"token comment\">// æ¨¡ç³ŠæŸ¥è¯¢</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre><span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">User</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">like</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> chars<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>    <span class=\"token class-name\">Query</span> query <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Query</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Criteria</span><span class=\"token punctuation\">.</span><span class=\"token function\">where</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"name\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">regex</span><span class=\"token punctuation\">(</span>chars<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">// æŸ¥è¯¢ name ä¸­åŒ…å«æŒ‡å®šå­—ç¬¦çš„æ•°æ®</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>mongoTemplate<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span>query<span class=\"token punctuation\">,</span> <span class=\"token class-name\">User</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre></pre></td></tr><tr><td data-num=\"36\"></td><td><pre><span class=\"token comment\">// æŸ¥è¯¢å¹¶åˆ é™¤</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre><span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">boolean</span> <span class=\"token function\">queryToRemove</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> id<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>    <span class=\"token class-name\">Query</span> query <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Query</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Criteria</span><span class=\"token punctuation\">.</span><span class=\"token function\">where</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"id\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">is</span><span class=\"token punctuation\">(</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>    <span class=\"token class-name\">DeleteResult</span> result <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>mongoTemplate<span class=\"token punctuation\">.</span><span class=\"token function\">remove</span><span class=\"token punctuation\">(</span>query<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>    <span class=\"token keyword\">return</span> result<span class=\"token punctuation\">.</span><span class=\"token function\">getDeletedCount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">></span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><blockquote>\n<p>æ›´å¤š Java API ç”¨æ³•ï¼Œè¯·æŸ¥è¯¢ <span class=\"exturl\" data-url=\"aHR0cHM6Ly9kb2NzLnNwcmluZy5pby9zcHJpbmctZGF0YS9tb25nb2RiL2RvY3MvY3VycmVudC9hcGkvb3JnL3NwcmluZ2ZyYW1ld29yay9kYXRhL21vbmdvZGIvY29yZS9Nb25nb1RlbXBsYXRlLmh0bWw=\">spring-boot-starter-data-mongodb æ–‡æ¡£</span>ã€‚</p>\n</blockquote>\n<h4 id=\"python-api\"><a class=\"anchor\" href=\"#python-api\">#</a> Python API</h4>\n<ol>\n<li>\n<p>å®‰è£… pymongo è¿æ¥å·¥å…·ï¼š</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>python3 -m pip3 <span class=\"token function\">install</span> pymongo</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\"># å¦‚éœ€æ›´æ–°ï¼Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>python3 -m pip3 <span class=\"token function\">install</span> --upgrade pymongo</pre></td></tr></table></figure></li>\n<li>\n<p>æ•°æ®åº“ä¸é›†åˆæ“ä½œï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">#!/usr/bin/python3</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre> </pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> pymongo</pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\"># å»ºç«‹è¿æ¥</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>myclient <span class=\"token operator\">=</span> pymongo<span class=\"token punctuation\">.</span>MongoClient<span class=\"token punctuation\">(</span><span class=\"token string\">\"mongodb://localhost:27017/\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token comment\"># åˆ›å»ºæ•°æ®åº“</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>mydb <span class=\"token operator\">=</span> myclient<span class=\"token punctuation\">[</span><span class=\"token string\">\"test\"</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\"># æŸ¥è¯¢æ•°æ®åº“åˆ—è¡¨</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>dblist <span class=\"token operator\">=</span> myclient<span class=\"token punctuation\">.</span>list_database_names<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token comment\"># dblist = myclient.database_names() </span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token keyword\">if</span> <span class=\"token string\">\"test\"</span> <span class=\"token keyword\">in</span> dblist<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>  <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"æ•°æ®åº“å·²å­˜åœ¨ï¼\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token comment\"># åˆ›å»ºé›†åˆ</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>mydb <span class=\"token operator\">=</span> myclient<span class=\"token punctuation\">[</span><span class=\"token string\">\"test\"</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>mycol <span class=\"token operator\">=</span> mydb<span class=\"token punctuation\">[</span><span class=\"token string\">\"col\"</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token comment\"># æŸ¥è¯¢é›†åˆåˆ—è¡¨</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>collist <span class=\"token operator\">=</span> mydb<span class=\"token punctuation\">.</span>list_collection_names<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token keyword\">if</span> <span class=\"token string\">\"col\"</span> <span class=\"token keyword\">in</span> collist<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>  <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"é›†åˆå·²å­˜åœ¨ï¼\"</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure></li>\n<li>\n<p>å¢åˆ æ”¹æŸ¥</p>\n<p>æ–°å¢ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># æ’å…¥ä¸€æ¡æ•°æ®</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>mydict <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token string\">\"name\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"Chinmoku\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"site\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"https://www.chinmoku.cc\"</span> <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>x <span class=\"token operator\">=</span> mycol<span class=\"token punctuation\">.</span>insert_one<span class=\"token punctuation\">(</span>mydict<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">.</span>inserted_id<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># æ–‡æ¡£æ•°æ® ID</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token comment\"># æ’å…¥å¤šæ¡æ•°æ®</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>mylist <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span> <span class=\"token string\">\"name\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"Facebook\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"url\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"https://www.facebook.com\"</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span> <span class=\"token string\">\"name\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"çŸ¥ä¹\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"url\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"https://www.zhihu.com\"</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span> <span class=\"token string\">\"name\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"Github\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"url\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"https://www.github.com\"</span> <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>x <span class=\"token operator\">=</span> mycol<span class=\"token punctuation\">.</span>insert_many<span class=\"token punctuation\">(</span>mylist<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">.</span>inserted_ids<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token comment\"># ä¹Ÿå¯ä»¥æŒ‡å®š ID</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>mylist <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span> <span class=\"token string\">\"_id\"</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"name\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"ç™¾åº¦\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"url\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"https://www.baidu.com\"</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span> <span class=\"token string\">\"_id\"</span><span class=\"token punctuation\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"name\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"Google\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"url\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"https://www.google.com\"</span><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>x <span class=\"token operator\">=</span> mycol<span class=\"token punctuation\">.</span>insert_many<span class=\"token punctuation\">(</span>mylist<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">.</span>inserted_ids<span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>åˆ é™¤ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># åˆ é™¤å•æ¡</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>myquery <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token string\">\"name\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"ç™¾åº¦\"</span> <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>mycol<span class=\"token punctuation\">.</span>delete_one<span class=\"token punctuation\">(</span>myquery<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\"># åˆ é™¤å¤šæ¡ (åˆ é™¤ http åè®®ç½‘ç«™)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>myquery <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token string\">\"url\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">&#123;</span><span class=\"token string\">\"$regex\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"^http:\"</span><span class=\"token punctuation\">&#125;</span> <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>x <span class=\"token operator\">=</span> mycol<span class=\"token punctuation\">.</span>delete_many<span class=\"token punctuation\">(</span>myquery<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"å·²åˆ é™¤æ–‡æ¡£ä¸ªæ•°ï¼š\"</span><span class=\"token punctuation\">,</span> x<span class=\"token punctuation\">.</span>deleted_count<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token comment\"># åˆ é™¤æ‰€æœ‰æ–‡æ¡£</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>x <span class=\"token operator\">=</span> mycol<span class=\"token punctuation\">.</span>delete_many<span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token comment\"># åˆ é™¤é›†åˆ</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>mycol<span class=\"token punctuation\">.</span>drop<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>ä¿®æ”¹ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># ä¿®æ”¹å•æ¡</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>myquery <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token string\">\"id\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"1\"</span> <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>newvalues <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token string\">\"$set\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token string\">\"name\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"No 1\"</span> <span class=\"token punctuation\">&#125;</span> <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>mycol<span class=\"token punctuation\">.</span>update_one<span class=\"token punctuation\">(</span>myquery<span class=\"token punctuation\">,</span> newvalues<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token comment\"># ä¿®æ”¹å¤šæ¡</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>myquery <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token string\">\"url\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">&#123;</span><span class=\"token string\">\"$regex\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"^http:\"</span><span class=\"token punctuation\">&#125;</span> <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>newvalues <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token string\">\"$set\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token string\">\"name\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"éHTTPSåè®®ç½‘ç«™\"</span> <span class=\"token punctuation\">&#125;</span> <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>x <span class=\"token operator\">=</span> mycol<span class=\"token punctuation\">.</span>update_many<span class=\"token punctuation\">(</span>myquery<span class=\"token punctuation\">,</span> newvalues<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"å·²æ›´æ–°æ–‡æ¡£ä¸ªæ•°ï¼š\"</span><span class=\"token punctuation\">,</span> x<span class=\"token punctuation\">.</span>modified_count<span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>æŸ¥è¯¢ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># æŸ¥è¯¢æ–‡æ¡£ç¬¬ä¸€æ¡æ•°æ®</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>x <span class=\"token operator\">=</span> mycol<span class=\"token punctuation\">.</span>find_one<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\"># æŸ¥è¯¢æ–‡æ¡£æ‰€æœ‰æ•°æ®</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">for</span> x <span class=\"token keyword\">in</span> mycol<span class=\"token punctuation\">.</span>find<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token comment\"># æŸ¥è¯¢æŒ‡å®šå­—æ®µï¼ˆæŒ‡å®š 1ï¼Œè¡¨ç¤ºéœ€è¦è¿”å›çš„å­—æ®µï¼‰ï¼Œæ³¨æ„ï¼Œé™¤_id å¤–ï¼Œå…¶ä»–å­—æ®µä¸èƒ½ 0 æˆ– 1 å¿…é¡»ä¸€è‡´</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token keyword\">for</span> x <span class=\"token keyword\">in</span> mycol<span class=\"token punctuation\">.</span>find<span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">&#123;</span> <span class=\"token string\">\"_id\"</span><span class=\"token punctuation\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"name\"</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"url\"</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>  <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token comment\"># åå‘è¿”å›å­—æ®µï¼ˆè¿”å›é™¤ url ä¹‹å¤–çš„å…¶ä»–å­—æ®µï¼‰</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token keyword\">for</span> x <span class=\"token keyword\">in</span> mycol<span class=\"token punctuation\">.</span>find<span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">&#123;</span> <span class=\"token string\">\"url\"</span><span class=\"token punctuation\">:</span> <span class=\"token number\">0</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>  <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token comment\"># æ ¹æ®æ¡ä»¶æŸ¥è¯¢</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>myquery <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token string\">\"name\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"Chinmoku\"</span> <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>mydoc <span class=\"token operator\">=</span> mycol<span class=\"token punctuation\">.</span>find<span class=\"token punctuation\">(</span>myquery<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token keyword\">for</span> x <span class=\"token keyword\">in</span> mydoc<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>  <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre></pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token comment\"># ä½¿ç”¨ä¿®é¥°ç¬¦æŸ¥è¯¢ï¼ˆæ¯”è¾ƒ name é¦–å­—æ¯ï¼‰</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>myquery <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token string\">\"name\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token string\">\"$gt\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"H\"</span> <span class=\"token punctuation\">&#125;</span> <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>mydoc <span class=\"token operator\">=</span> mycol<span class=\"token punctuation\">.</span>find<span class=\"token punctuation\">(</span>myquery<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre><span class=\"token keyword\">for</span> x <span class=\"token keyword\">in</span> mydoc<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>  <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre></pre></td></tr><tr><td data-num=\"28\"></td><td><pre><span class=\"token comment\"># æ­£åˆ™æŸ¥è¯¢ï¼ˆæŸ¥è¯¢ name ä»¥ C å¼€å¤´çš„æ•°æ®ï¼‰</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>myquery <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token string\">\"name\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token string\">\"$regex\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"^C\"</span> <span class=\"token punctuation\">&#125;</span> <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>mydoc <span class=\"token operator\">=</span> mycol<span class=\"token punctuation\">.</span>find<span class=\"token punctuation\">(</span>myquery<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre><span class=\"token keyword\">for</span> x <span class=\"token keyword\">in</span> mydoc<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>  <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre></pre></td></tr><tr><td data-num=\"34\"></td><td><pre><span class=\"token comment\"># è¿”å›æŒ‡å®šæ¡æ•°</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>myresult <span class=\"token operator\">=</span> mycol<span class=\"token punctuation\">.</span>find<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>limit<span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre><span class=\"token keyword\">for</span> x <span class=\"token keyword\">in</span> myresult<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>  <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span></pre></td></tr></table></figure></li>\n</ol>\n<h3 id=\"å‚è€ƒ\"><a class=\"anchor\" href=\"#å‚è€ƒ\">#</a> å‚è€ƒ</h3>\n<div class=\"note danger no-icon\">\n<p>æœ¬æ–‡ç›¸å…³ä»£ç å·²è®°å½•åœ¨ githubï¼Œ<span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL3hmYy1leGNsYXZlL2Jsb2ctcHJvamVjdC90cmVlL21hc3Rlci80MTc3MjcxOWJmMTA0NTc3OTU5NmZkMTM0YjY1NDU0ZS9tb25nb3N0dWR5\">ç‚¹å‡»æ­¤å¤„</span>å‰å¾€æŸ¥çœ‹ã€‚æœ¬æ–‡å†…å®¹å¦‚æœ‰é”™è¯¯ä¹‹å¤„ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºç•™è¨€å‘ŠçŸ¥ã€‚</p>\n</div>\n<ul>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kb2NzLm1vbmdvZGIuY29t\">https://docs.mongodb.com</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cucnVub29iLmNvbS9tb25nb2Ri\">https://www.runoob.com/mongodb</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubXJoZWxsb3dvcmxkLmNvbS9tb25nb2Ri\">https://www.mrhelloworld.com/mongodb</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuY25ibG9ncy5jb20vaGV4cnVpL3AvMTQ4ODU3ODUuaHRtbA==\">https://www.cnblogs.com/hexrui/p/14885785.html</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2ExMTIwNDY3ODAwL2FydGljbGUvZGV0YWlscy8xMDk5NTQxNDU=\">https://blog.csdn.net/a1120467800/article/details/109954145</span></li>\n</ul>\n",
            "tags": [
                "è®¡ç®—æœºç§‘å­¦",
                "JAVAå­¦ä¹ è·¯çº¿",
                "é«˜çº§ç¯‡",
                "java"
            ]
        },
        {
            "id": "https://www.chinmoku.cc/computer-science/python/django-tutorial/",
            "url": "https://www.chinmoku.cc/computer-science/python/django-tutorial/",
            "title": "Django ç½‘ç«™å…¨æ ˆå¼€å‘æ•™ç¨‹",
            "date_published": "2021-11-02T16:12:44.000Z",
            "content_html": "<div class=\"note info\">\n<p>è¿™ç¯‡æ–‡ç« æ˜¯åœ¨ Python åŸºç¡€çŸ¥è¯†å…¨é€šå…³çš„åŸºç¡€ä¸Šè¿›è¡Œçš„è¿›é˜¶å­¦ä¹ ã€‚</p>\n</div>\n<div class=\"note danger\">\n<p>æ³¨æ„ï¼šç”±äºæœ¬åšå®¢ä¸»é¢˜ä½¿ç”¨  <code>Prism.js</code>  å¯¹ä»£ç æ®µè¿›è¡Œæ¸²æŸ“ï¼Œæ¸²æŸ“è¿‡ç¨‹ä¸­ï¼Œä¼šä¸ä»£ç å—ä¸­çš„åŒ  <code>&#123;</code>  å’Œ  <code>&#123;</code>  +  <code>%</code>  çš„è¯­æ³•äº§ç”Ÿå†²çªï¼Œå› æ­¤ï¼Œæœ¬æ–‡å°†æ‰€æœ‰ç›¸å…³ç¬¦å·éƒ½æ›¿æ¢ä¸º  <code>&#123;.&#123;</code>  å’Œ  <code>&#123;.%</code>  å½¢å¼ï¼Œä»¥è§£å†³ä»£ç æ¸²æŸ“çš„é—®é¢˜ã€‚è¯»è€…åœ¨é˜…è¯»å’Œæ‹·è´ä»£ç çš„è¿‡ç¨‹ä¸­ï¼Œè¯·åŠ¡å¿…æ³¨æ„è¯¥é—®é¢˜å¹¶å¿½ç•¥ç¬¦å·ä¹‹é—´å¤šå‡ºçš„  <code>.</code> ï¼Œå¦‚å› æ­¤é€ æˆé˜…è¯»ä¸Šçš„ä¸ä¾¿ï¼Œè¿˜è¯·è§è°…ã€‚</p>\n</div>\n<h3 id=\"å­¦ä¹ å‰æ\"><a class=\"anchor\" href=\"#å­¦ä¹ å‰æ\">#</a> å­¦ä¹ å‰æ</h3>\n<h4 id=\"çŸ¥è¯†å‚¨å¤‡è¦æ±‚\"><a class=\"anchor\" href=\"#çŸ¥è¯†å‚¨å¤‡è¦æ±‚\">#</a> çŸ¥è¯†å‚¨å¤‡è¦æ±‚</h4>\n<ol>\n<li>äº†è§£ Python åŸºç¡€ï¼Œå¦‚æœä¸äº†è§£ï¼Œè¯·å…ˆè¡Œé˜…è¯»ã€Š<a href=\"/computer-science/python/python-all-base/\">Python åŸºç¡€çŸ¥è¯†å…¨é€šå…³</a>ã€‹ã€‚</li>\n<li>æ‹¥æœ‰å‰ç«¯å¼€å‘ç›¸å…³åŸºç¡€æŠ€èƒ½ï¼Œè‡³å°‘åŒ…æ‹¬ï¼šCSSã€JSã€HTMLã€‚</li>\n<li>ä¼šä½¿ç”¨å¸¸ç”¨çš„ Liunx å‘½ä»¤ã€‚</li>\n</ol>\n<h4 id=\"ç¯å¢ƒè¯´æ˜\"><a class=\"anchor\" href=\"#ç¯å¢ƒè¯´æ˜\">#</a> ç¯å¢ƒè¯´æ˜</h4>\n<p>æœ¬ç¯‡æ–‡ç« åœ¨ç¼–å†™è¿‡ç¨‹ä¸­ï¼Œå°†ä»¥å¦‚ä¸‹ä¿¡æ¯ä½œä¸ºå‚è€ƒç¯å¢ƒï¼š</p>\n<ol>\n<li>ç³»ç»Ÿä¿¡æ¯ï¼š<span class=\"label primary\">VMware 16.1.2</span> + <span class=\"label info\">CentOS 8.4</span>, <span class=\"label info\">windows10</span></li>\n<li>Python ç‰ˆæœ¬ï¼š<span class=\"label success\">Python 3.9.6</span></li>\n<li>å¼€å‘å·¥å…·ï¼š<span class=\"label danger\">Pycharm</span></li>\n<li>å‘½ä»¤è¡Œå·¥å…·ï¼š<span class=\"label warning\">Termius</span></li>\n</ol>\n<blockquote>\n<p>å…³äº linux ç¯å¢ƒï¼Œæœ¬æ–‡ä»…åœ¨å®‰è£…ã€éƒ¨ç½²ç­‰å°‘æ•°éƒ¨åˆ†æä¾›ç›¸å…³è¯´æ˜ï¼Œå…¶ä»–å¤§éƒ¨åˆ†ç¯å¢ƒå°†åœ¨ windows ä¸‹è¿›è¡Œã€‚</p>\n</blockquote>\n<h3 id=\"ç®€ä»‹\"><a class=\"anchor\" href=\"#ç®€ä»‹\">#</a> ç®€ä»‹</h3>\n<p>Django æ˜¯ä¸€ä¸ªç”± Python ç¼–å†™çš„ä¸€ä¸ªå¼€æ”¾æºä»£ç çš„ Web åº”ç”¨æ¡†æ¶ï¼ŒDjango æœ¬èº«åŸºäº MVC æ¨¡å‹ã€‚</p>\n<p>Django æ¡†æ¶ä½¿ç”¨ MTV æ¨¡å¼ï¼Œä½†å…¶æœ¬è´¨ä¸Šå’Œ MVC æ˜¯ä¸€æ ·çš„ï¼Œä¹Ÿæ˜¯ä¸ºäº†å„ç»„ä»¶é—´ä¿æŒæ¾è€¦åˆå…³ç³»ï¼Œåªæ˜¯å®šä¹‰ä¸Šæœ‰äº›è®¸ä¸åŒï¼ŒDjango çš„ MTV åˆ†åˆ«æ˜¯æŒ‡ï¼š</p>\n<ol>\n<li>Modelï¼šç¼–å†™ç¨‹åºåº”æœ‰çš„åŠŸèƒ½ï¼Œè´Ÿè´£ä¸šåŠ¡å¯¹è±¡ä¸æ•°æ®åº“çš„æ˜ å°„ï¼ˆORMï¼‰ã€‚</li>\n<li>Templateï¼šè´Ÿè´£å¦‚ä½•æŠŠé¡µé¢ï¼ˆhtmlï¼‰å±•ç¤ºç»™ç”¨æˆ·ã€‚</li>\n<li>Viewï¼šè´Ÿè´£ä¸šåŠ¡é€»è¾‘ï¼Œå¹¶åœ¨é€‚å½“æ—¶å€™è°ƒç”¨ Model å’Œ Templateã€‚</li>\n</ol>\n<p>é™¤äº†ä»¥ä¸Šä¸‰å±‚ä¹‹å¤–ï¼Œè¿˜éœ€è¦ä¸€ä¸ª URL åˆ†å‘å™¨ï¼Œå®ƒçš„ä½œç”¨æ˜¯å°†ä¸€ä¸ªä¸ª URL çš„é¡µé¢è¯·æ±‚åˆ†å‘ç»™ä¸åŒçš„ View å¤„ç†ï¼ŒView å†è°ƒç”¨ç›¸åº”çš„ Model å’Œ Templateã€‚</p>\n<p><img data-src=\"https://img.xfc-exclave.com/2021/10/fe81387a526f303ff097080034e919de1635158549.jpg\" alt=\"Python MTV\" /></p>\n<h3 id=\"å®‰è£…ä¸åˆå§‹åŒ–\"><a class=\"anchor\" href=\"#å®‰è£…ä¸åˆå§‹åŒ–\">#</a> å®‰è£…ä¸åˆå§‹åŒ–</h3>\n<h4 id=\"è™šæ‹Ÿç¯å¢ƒå®‰è£…\"><a class=\"anchor\" href=\"#è™šæ‹Ÿç¯å¢ƒå®‰è£…\">#</a> è™šæ‹Ÿç¯å¢ƒå®‰è£…</h4>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>pip3 list <span class=\"token comment\"># æŸ¥çœ‹åˆ—è¡¨ï¼Œæ£€æŸ¥æ˜¯å¦å­˜åœ¨ virtualenv</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>pip3 <span class=\"token function\">install</span> virtualenv -i https://pypi.douban.com/simple <span class=\"token comment\"># ä¸å­˜åœ¨åˆ™å®‰è£…</span></pre></td></tr></table></figure><div class=\"note danger\">\n<p>æ³¨ï¼šå®‰è£… Python ç¯å¢ƒï¼Œé»˜è®¤ä¼šå®‰è£… pip å·¥å…·åŒ…ï¼Œå¯ä»¥é€šè¿‡å¦‚ä¸‹å‘½ä»¤ç»Ÿä¸€æŒ‡å®šé•œåƒæºï¼š</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>pip config <span class=\"token builtin class-name\">set</span> global.index-url https://pypi.douban.com/simple/</pre></td></tr></table></figure></div>\n<p>åˆ›å»ºå¹¶è¿›å…¥è™šæ‹Ÿç¯å¢ƒï¼š</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># ä¸ºç®€æ´èµ·è§ï¼Œæ­¤å¤„å°† cd å‘½ä»¤åˆå¹¶ä¸ºé•¿ç›®å½•</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token function\">mkdir</span> /app/projects/django_venv</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>virtualenv /app/projects/django_venv</pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token builtin class-name\">source</span> /app/projects/django_venv/bin/activate</pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\"># æ­¤æ—¶è™šæ‹Ÿç¯å¢ƒå·²å¯åŠ¨æˆåŠŸï¼Œå‘½ä»¤è¡Œå¸¦æœ‰å‰ç¼€ (django_venv)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>pip3 list</pre></td></tr></table></figure><p>å¦‚éœ€é€€å‡ºè™šæ‹Ÿç¯å¢ƒï¼Œä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ï¼š</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>deactivate <span class=\"token comment\"># é€€å‡ºè™šæ‹Ÿç¯å¢ƒ</span></pre></td></tr></table></figure><blockquote>\n<p>æç¤ºï¼š</p>\n<ol>\n<li>å¦‚æœåœ¨è™šæ‹Ÿæœºåˆ›å»ºè¿‡ç¨‹ä¸­æç¤º  <code>-bash: virtualenv: command not found</code>  ï¼Œè¿™æ˜¯å› ä¸º  <code>/usr/bin</code>  ä¸­è¿˜æœªåˆ›å»ºè½¯è¿æ¥ã€‚</li>\n<li>æŸ¥æ‰¾ virtualenv æ‰€åœ¨ä½ç½®ï¼š <code>find / -name virtualenv</code>  ï¼ˆç¨å¾®è€—æ—¶ä¸€ç‚¹ï¼‰ã€‚</li>\n<li>åˆ›å»º virtualenv è½¯è¿æ¥ï¼š <code>ln -s /usr/local/bin/python3/bin/virtualenv /usr/bin/virtualenv</code>  ã€‚</li>\n</ol>\n</blockquote>\n<h4 id=\"å®‰è£…-django\"><a class=\"anchor\" href=\"#å®‰è£…-django\">#</a> å®‰è£… Django</h4>\n<p>è¿›å…¥è™šæ‹Ÿç¯å¢ƒï¼Œå¹¶ä¸ºè¯¥è™šæ‹Ÿç¯å¢ƒå®‰è£… Djangoã€‚</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>pip3 <span class=\"token function\">install</span> <span class=\"token assign-left variable\">django</span><span class=\"token operator\">==</span><span class=\"token number\">3.2</span>.8 -i https://pypi.douban.com/simple</pre></td></tr></table></figure><p>åˆ›å»ºå¹¶å¯åŠ¨ç½‘ç«™å·¥ç¨‹ï¼š</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token builtin class-name\">cd</span> /app/projects</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>django-admin startproject firstsite <span class=\"token comment\"># åˆ›å»ºé¡¹ç›®</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>python firstsite/manage.py runserver <span class=\"token comment\"># å¯åŠ¨é¡¹ç›®</span></pre></td></tr></table></figure><p>æµ‹è¯•è®¿é—®ï¼š</p>\n<p><img data-src=\"https://img.xfc-exclave.com/2021/10/5f3532ce1015e2ee81c6a2c93e3969cf1635158673.png\" alt=\"First Django\" /></p>\n<blockquote>\n<p>æ³¨ï¼šå¦‚éœ€é€šè¿‡å¤–éƒ¨ç½‘ç»œè®¿é—®è™šæ‹Ÿæœºå†…éƒ¨æä¾›çš„æœåŠ¡ï¼Œéœ€è¦é…ç½®ç›¸åº”çš„é˜²ç«å¢™å‡ºå…¥ç«™è§„åˆ™ã€‚</p>\n<p>å¦å¤–ï¼Œå¦‚éœ€å…±äº«æ–‡ä»¶å¤¹ï¼Œå¯å‚è€ƒï¼š</p>\n<ul>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly96aHVhbmxhbi56aGlodS5jb20vcC8xNDY3NDU0MzE=\">Win10 ä¸‹ä¸è™šæ‹Ÿæœºä¸­çš„ linux å…±äº«æ–‡ä»¶å¤¹</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzU0MDUzMy9hcnRpY2xlL2RldGFpbHMvMTA5MDAzNjY1\">VMware ä¸ win10 å…±äº«æ–‡ä»¶å¤¹</span></li>\n</ul>\n</blockquote>\n<h4 id=\"windows-ä¸‹å®‰è£…\"><a class=\"anchor\" href=\"#windows-ä¸‹å®‰è£…\">#</a> windows ä¸‹å®‰è£…</h4>\n<p>åœ¨ win10 ç¯å¢ƒä¸‹å®‰è£… python3 å¾ˆç®€å•ï¼Œå¦‚æœæœªå®‰è£…ï¼Œåªéœ€è¦åœ¨å‘½ä»¤è¡Œè¾“å…¥  <code>python3</code>  å³å¯è¿›å…¥å¾®è½¯å•†åº—å…è´¹è·å–ï¼Œç‚¹å‡»ä¸‹è½½å®‰è£…å³å¯ã€‚</p>\n<p>åˆ›å»ºæ–‡ä»¶å¤¹  <code>A:\\python-venv\\django_venv</code> ã€‚</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>C:<span class=\"token punctuation\">\\</span>Users<span class=\"token punctuation\">\\</span>Administrator<span class=\"token operator\">></span>virtualenv A:<span class=\"token punctuation\">\\</span>python-venv<span class=\"token punctuation\">\\</span>django_venv <span class=\"token comment\"># åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>A:<span class=\"token punctuation\">\\</span>python-venv<span class=\"token punctuation\">\\</span>django_venv<span class=\"token punctuation\">\\</span>Scripts<span class=\"token operator\">></span>activate <span class=\"token comment\"># æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token punctuation\">(</span>django_venv<span class=\"token punctuation\">)</span> A:<span class=\"token punctuation\">\\</span>python-venv<span class=\"token punctuation\">\\</span>django_venv<span class=\"token punctuation\">\\</span>Scripts<span class=\"token operator\">></span>pip3 <span class=\"token function\">install</span> <span class=\"token assign-left variable\">django</span><span class=\"token operator\">==</span><span class=\"token number\">3.2</span>.8 -i https://pypi.douban.com/simple <span class=\"token comment\"># ä¸ºè™šæ‹Ÿç¯å¢ƒå®‰è£… django</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token punctuation\">(</span>django_venv<span class=\"token punctuation\">)</span> A:<span class=\"token punctuation\">\\</span>python-venv<span class=\"token punctuation\">\\</span>django_venv<span class=\"token punctuation\">\\</span>Scripts<span class=\"token operator\">></span>cd A:<span class=\"token punctuation\">\\</span>pycharm-workspace</pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token punctuation\">(</span>django_venv<span class=\"token punctuation\">)</span> A:<span class=\"token punctuation\">\\</span>pycharm-workspace<span class=\"token operator\">></span>django-admin startproject firstsite <span class=\"token comment\"># åˆ›å»ºé¡¹ç›®</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token punctuation\">(</span>django_venv<span class=\"token punctuation\">)</span> A:<span class=\"token punctuation\">\\</span>pycharm-workspace<span class=\"token operator\">></span>python firstsite/manage.py runserver <span class=\"token comment\"># å¯åŠ¨é¡¹ç›®</span></pre></td></tr></table></figure><blockquote>\n<p>å…¶å®æ€»ä½“ä¸Šï¼Œlinux å’Œ windows å¹³å°çš„å®‰è£…æ²¡æœ‰å¤ªå¤§åŒºåˆ«ã€‚</p>\n</blockquote>\n<p>åœ¨ Pycharm ä¸­ï¼Œå¯ä»¥é€šè¿‡å¦‚ä¸‹æ–¹å¼åˆ¶å®šè™šæ‹Ÿç¯å¢ƒï¼š</p>\n<p><img data-src=\"https://img.xfc-exclave.com/2021/10/ccedb26db60dd0aee68a1d552f8826391635158698.png\" alt=\"Pycharm venv\" /></p>\n<p>åœ¨ Pycharm ä¸­å¯åŠ¨é¡¹ç›®å°±æ›´ç®€å•äº†ï¼Œç›´æ¥ç‚¹å‡»å³ä¸Šè§’çš„è¿è¡ŒæŒ‰é’®å³å¯ã€‚</p>\n<h4 id=\"é¡¹ç›®ç»“æ„\"><a class=\"anchor\" href=\"#é¡¹ç›®ç»“æ„\">#</a> é¡¹ç›®ç»“æ„</h4>\n<p>åœ¨ Pycharm ä¸­é…ç½®å¥½ç¯å¢ƒï¼Œåç»­æ“ä½œåœ¨ç¼–è¾‘å™¨ä¸­è¿›è¡Œï¼Œå°†ä¼šæ›´åŠ æ–¹ä¾¿ã€‚</p>\n<p>ç”Ÿæˆé¡µé¢å­åº”ç”¨ï¼š</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>python manage.py startapp index</pre></td></tr></table></figure><p>æ‰§è¡Œå®Œæˆåï¼Œç›®å½•ç»“æ„å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>\n<p><img data-src=\"https://img.xfc-exclave.com/2021/10/1e086365a34fdd07c562a3359b33b0ac1635158722.png\" alt=\"Django Project Structure\" /></p>\n<h4 id=\"é¡¹ç›®é…ç½®\"><a class=\"anchor\" href=\"#é¡¹ç›®é…ç½®\">#</a> é¡¹ç›®é…ç½®</h4>\n<p>ä¸é¡¹ç›®åŒåçš„å­æ–‡ä»¶å¤¹ä¸­å­˜æ”¾äº†é¡¹ç›®ç›¸å…³é…ç½®ï¼Œéƒ¨åˆ†æ–‡ä»¶è¯´æ˜å¦‚ä¸‹ï¼š</p>\n<ul>\n<li>\n<p><span class=\"exturl\" data-url=\"aHR0cDovL3NldHRpbmdzLnB5\">settings.py</span> - é¡¹ç›®é…ç½®</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># è¿”å›é¡¹ç›®ç»å¯¹è·¯å¾„</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>BASE_DIR <span class=\"token operator\">=</span> Path<span class=\"token punctuation\">(</span>__file__<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>resolve<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>parent<span class=\"token punctuation\">.</span>parent</pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\"># æ•°æ®åŠ å¯†ï¼Œæ”¾ç½®è·¨åŸŸæ”»å‡»</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>SECRET_KEY <span class=\"token operator\">=</span> <span class=\"token string\">'django-insecure-7)s64=kl*o2zm$wc86k&amp;s(4*&amp;!%a)ecs_k&amp;jskmai2dmss10$8'</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token comment\"># æ˜¯å¦å¤„äºå¼€å‘ç¯å¢ƒ</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>DEBUG <span class=\"token operator\">=</span> <span class=\"token boolean\">True</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token comment\"># ç™½åå•ï¼Œ* è¡¨ç¤ºæ‰€æœ‰</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>ALLOWED_HOSTS <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'*'</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token comment\"># åº”ç”¨æ³¨å†Œ</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>INSTALLED_APPS <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token string\">'django.contrib.admin'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token string\">'django.contrib.auth'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token string\">'django.contrib.contenttypes'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token string\">'django.contrib.sessions'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token string\">'django.contrib.messages'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token string\">'django.contrib.staticfiles'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    <span class=\"token string\">'index'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre></pre></td></tr><tr><td data-num=\"24\"></td><td><pre><span class=\"token comment\"># é¡¹ç›®æ ¹è·¯ç”±</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>ROOT_URLCONF <span class=\"token operator\">=</span> <span class=\"token string\">'firstsite.urls'</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre></pre></td></tr><tr><td data-num=\"27\"></td><td><pre><span class=\"token comment\"># é…ç½®å¼€å‘æœåŠ¡å™¨</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>WSGI_APPLICATION <span class=\"token operator\">=</span> <span class=\"token string\">'firstsite.wsgi.application'</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre></pre></td></tr><tr><td data-num=\"30\"></td><td><pre><span class=\"token comment\"># é…ç½®æ•°æ®åº“</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>DATABASES <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>    <span class=\"token string\">'default'</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>        <span class=\"token string\">'ENGINE'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'django.db.backends.sqlite3'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>        <span class=\"token string\">'NAME'</span><span class=\"token punctuation\">:</span> BASE_DIR <span class=\"token operator\">/</span> <span class=\"token string\">'db.sqlite3'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre></pre></td></tr><tr><td data-num=\"38\"></td><td><pre><span class=\"token comment\"># ç”¨æˆ·å¯†ç åŠ å¯†</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>AUTH_PASSWORD_VALIDATORS <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>    <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>        <span class=\"token string\">'NAME'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'django.contrib.auth.password_validation.UserAttributeSimilarityValidator'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>    <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>        <span class=\"token string\">'NAME'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'django.contrib.auth.password_validation.MinimumLengthValidator'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre>    <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre>        <span class=\"token string\">'NAME'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'django.contrib.auth.password_validation.CommonPasswordValidator'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre>    <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre>        <span class=\"token string\">'NAME'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'django.contrib.auth.password_validation.NumericPasswordValidator'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"51\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"52\"></td><td><pre><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"53\"></td><td><pre></pre></td></tr><tr><td data-num=\"54\"></td><td><pre><span class=\"token comment\"># ç½‘ç«™é»˜è®¤è¯­è¨€ # zh-hans</span></pre></td></tr><tr><td data-num=\"55\"></td><td><pre>LANGUAGE_CODE <span class=\"token operator\">=</span> <span class=\"token string\">'en-us'</span></pre></td></tr><tr><td data-num=\"56\"></td><td><pre>TIME_ZONE <span class=\"token operator\">=</span> <span class=\"token string\">'UTC'</span> <span class=\"token comment\"># æ—¶åŒº Asia/Shanghai</span></pre></td></tr><tr><td data-num=\"57\"></td><td><pre></pre></td></tr><tr><td data-num=\"58\"></td><td><pre><span class=\"token comment\"># æ¨¡æ¿é…ç½®</span></pre></td></tr><tr><td data-num=\"59\"></td><td><pre>TEMPLATES <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"60\"></td><td><pre>    <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"61\"></td><td><pre>        <span class=\"token string\">'BACKEND'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'django.template.backends.django.DjangoTemplates'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"62\"></td><td><pre>        <span class=\"token string\">'DIRS'</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>os<span class=\"token punctuation\">.</span>path<span class=\"token punctuation\">.</span>join<span class=\"token punctuation\">(</span>BASE_DIR<span class=\"token punctuation\">,</span> <span class=\"token string\">'templates'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token comment\"># æŒ‡å®šæ¨¡æ¿æ–‡ä»¶ä½ç½®ï¼šå½“å‰é¡¹ç›®ä¸‹çš„ templates æ–‡ä»¶å¤¹</span></pre></td></tr><tr><td data-num=\"63\"></td><td><pre>        <span class=\"token string\">'APP_DIRS'</span><span class=\"token punctuation\">:</span> <span class=\"token boolean\">True</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"64\"></td><td><pre>        <span class=\"token string\">'OPTIONS'</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"65\"></td><td><pre>            <span class=\"token string\">'context_processors'</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"66\"></td><td><pre>                <span class=\"token string\">'django.template.context_processors.debug'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"67\"></td><td><pre>                <span class=\"token string\">'django.template.context_processors.request'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"68\"></td><td><pre>                <span class=\"token string\">'django.contrib.auth.context_processors.auth'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"69\"></td><td><pre>                <span class=\"token string\">'django.contrib.messages.context_processors.messages'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"70\"></td><td><pre>            <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"71\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"72\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"73\"></td><td><pre><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"74\"></td><td><pre></pre></td></tr><tr><td data-num=\"75\"></td><td><pre><span class=\"token comment\"># æŒ‡å®šé™æ€æ–‡ä»¶ä½ç½®</span></pre></td></tr><tr><td data-num=\"76\"></td><td><pre>STATICFILES_DIRS <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"77\"></td><td><pre>    <span class=\"token punctuation\">(</span>os<span class=\"token punctuation\">.</span>path<span class=\"token punctuation\">.</span>join<span class=\"token punctuation\">(</span>BASE_DIR<span class=\"token punctuation\">,</span> <span class=\"token string\">'static'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"78\"></td><td><pre><span class=\"token punctuation\">]</span></pre></td></tr></table></figure></li>\n<li>\n<p><span class=\"exturl\" data-url=\"aHR0cDovL3VybHMucHk=\">urls.py</span> - è·¯ç”±é…ç½®</p>\n<p>ç¼–è¾‘  <code>index/views.py</code></p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>shortcuts <span class=\"token keyword\">import</span> render</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>http <span class=\"token keyword\">import</span> HttpResponse</pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">index</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">return</span> HttpResponse<span class=\"token punctuation\">(</span><span class=\"token string\">'Hello world'</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># è¿”å›æ•°æ®</span></pre></td></tr></table></figure><p>åœ¨ <span class=\"exturl\" data-url=\"aHR0cDovL3VybHMucHk=\">urls.py</span> ä¸­å¯ä»¥é€šè¿‡å¦‚ä¸‹æ–¹å¼æŒ‡å®šè·¯ç”±ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>contrib <span class=\"token keyword\">import</span> admin</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>urls <span class=\"token keyword\">import</span> path</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">from</span> index<span class=\"token punctuation\">.</span>views <span class=\"token keyword\">import</span> index</pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>urlpatterns <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    path<span class=\"token punctuation\">(</span><span class=\"token string\">'admin/'</span><span class=\"token punctuation\">,</span> admin<span class=\"token punctuation\">.</span>site<span class=\"token punctuation\">.</span>urls<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    path<span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">,</span> index<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>  <span class=\"token comment\"># è·¯ç”±ç»‘å®šè§†å›¾</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token punctuation\">]</span></pre></td></tr></table></figure><p>æ­¤æ—¶è¿è¡Œå¹¶è®¿é—®ï¼Œé¡µé¢å°†ä¼šè¾“å‡º Hello world å­—æ ·ã€‚</p>\n</li>\n<li>\n<p>templates - æ¨¡æ¿é…ç½®</p>\n<p>templates ç›®å½•ä¸‹å¯åˆ›å»º html æ¨¡æ¿æ–‡ä»¶ã€‚</p>\n<p>åœ¨ templates åŒçº§ç›®å½•ä¸‹å¯åˆ›å»º  <code>static</code>  æ–‡ä»¶å¤¹ï¼Œç”¨äºå­˜å‚¨é™æ€æ–‡ä»¶ï¼Œé™æ€æ–‡ä»¶ä½ç½®éœ€è¦åœ¨ <span class=\"exturl\" data-url=\"aHR0cDovL3NldHRpbmdzLnB5\">settings.py</span> ä¸­æŒ‡å®šï¼Œè§ä¸Šæ–‡ã€‚</p>\n<p>åœ¨ static æ–‡ä»¶å¤¹ä¸‹ï¼Œå¯æ”¾ç½®å›¾ç‰‡ã€css æ ·å¼æ–‡ä»¶ã€js è„šæœ¬ç­‰ï¼Œåœ¨æ¨¡æ¿æ–‡ä»¶ä¸­å¯é€šè¿‡å¦‚ä¸‹æ–¹å¼å¼•ç”¨ï¼š</p>\n<figure class=\"highlight html\"><figcaption data-lang=\"HTML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>head</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">charset</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>utf-8<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>title</span><span class=\"token punctuation\">></span></span>çº¯CSSè®¡æ—¶å™¨æ¼”ç¤º<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>title</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>viewport<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">content</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>width=device-width, initial-scale=1<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>link</span> <span class=\"token attr-name\">rel</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>stylesheet<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>static/css/normalize.min.css<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>link</span> <span class=\"token attr-name\">rel</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>stylesheet<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>static/css/style.css<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>head</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p>ä¿®æ”¹ index/views.py ä¸­çš„ index å‡½æ•°ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">index</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">return</span> render<span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">,</span> <span class=\"token string\">'index.html'</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># è§†å›¾ç»‘å®šæ¨¡æ¿</span></pre></td></tr></table></figure><blockquote>\n<p>ä½œä¸ºå­¦ä¹ å’Œæ•ˆæœå±•ç¤ºï¼Œå¯ä»¥é€‰æ‹©ç›´æ¥ä½¿ç”¨ä¸€äº›æˆå“æ•ˆæœçš„ä»£ç ï¼Œä¾‹å¦‚ï¼Œå¯ä»¥ä»<span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuMTdzdWNhaS5jb20vcHJldmlldy8xNjczMzY1LzIwMTktMDYtMDgvanNxL2luZGV4Lmh0bWw=\">çº¯ CSS è®¡æ—¶å™¨æ¼”ç¤º</span>è·å–æºç å¹¶åœ¨å½“å‰é¡¹ç›®è¿›è¡Œæ•ˆæœé‡ç°ã€‚</p>\n<p>å¦å¤–ï¼ŒDjango æ”¯æŒçƒ­ä¿®æ”¹ï¼Œé™¤é…ç½®æ–‡ä»¶ä¹‹å¤–ï¼Œå…¶ä»–æ–‡ä»¶ä¿®æ”¹åï¼Œæ— éœ€é‡å¯å³å¯ç”Ÿæ•ˆã€‚</p>\n</blockquote>\n</li>\n</ul>\n<h4 id=\"django-åŸºç¡€å‘½ä»¤\"><a class=\"anchor\" href=\"#django-åŸºç¡€å‘½ä»¤\">#</a> Django åŸºç¡€å‘½ä»¤</h4>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>django-admin startproject <span class=\"token punctuation\">[</span>project_name<span class=\"token punctuation\">]</span> <span class=\"token comment\"># åˆå§‹åŒ–ä¸€ä¸ªé¡¹ç›®</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>python3 manage.py startapp <span class=\"token punctuation\">[</span>app_name<span class=\"token punctuation\">]</span> <span class=\"token comment\"># åœ¨é¡¹ç›®å†…åˆ›å»ºé¡µé¢å­åº”ç”¨</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>python3 manage.py shell <span class=\"token comment\"># è¿›å…¥ä»£ç è°ƒè¯•æ¨¡å¼</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>python3 manage.py makemigrations <span class=\"token comment\"># æ•°æ®åº“åˆ›å»ºæ›´æ”¹æ–‡ä»¶</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>python3 manage.py migrate <span class=\"token comment\"># åŒæ­¥åˆ°æ•°æ®åº“è¿›è¡Œæ›´æ–°</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>python3 manage.py flush <span class=\"token comment\"># æ¸…ç©ºæ•°æ®åº“</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>python3 manage.py runserver <span class=\"token number\">0.0</span>.0.0:8000 <span class=\"token comment\"># å¯åŠ¨æœåŠ¡</span></pre></td></tr></table></figure><h3 id=\"django-æ¨¡æ¿\"><a class=\"anchor\" href=\"#django-æ¨¡æ¿\">#</a> Django æ¨¡æ¿</h3>\n<h4 id=\"å‡†å¤‡å·¥ä½œ\"><a class=\"anchor\" href=\"#å‡†å¤‡å·¥ä½œ\">#</a> å‡†å¤‡å·¥ä½œ</h4>\n<ol>\n<li>\n<p>ä½¿ç”¨è™šæ‹Ÿç¯å¢ƒåˆ›å»ºé¡¹ç›®  <code>mydjango</code> ã€‚</p>\n</li>\n<li>\n<p>åˆ›å»ºåº”ç”¨  <code>app</code> ã€‚</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token operator\">-</span> app</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token operator\">-</span> migrations</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    __init__<span class=\"token punctuation\">.</span>py</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  __init__<span class=\"token punctuation\">.</span>py</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  admin<span class=\"token punctuation\">.</span>py # </pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  apps<span class=\"token punctuation\">.</span>py # </pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  models<span class=\"token punctuation\">.</span>py # æ•°æ®åº“è¿æ¥æ–‡ä»¶</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>  tests<span class=\"token punctuation\">.</span>py # æµ‹è¯•æ–‡ä»¶</pre></td></tr><tr><td data-num=\"9\"></td><td><pre>  views<span class=\"token punctuation\">.</span>py # è§†å›¾æ–‡ä»¶</pre></td></tr><tr><td data-num=\"10\"></td><td><pre>  urls<span class=\"token punctuation\">.</span>py  # å­è·¯ç”±ä¿¡æ¯ï¼Œé€šè¿‡æ‰‹åŠ¨åˆ›å»º</pre></td></tr></table></figure><blockquote>\n<p>æ³¨æ„ï¼šåæ–‡ä¸­ä¼šå‡ºç°ä¸€äº›  <code>mydjango</code>  å’Œ  <code>app</code> ï¼Œå¹¶ä¸æ˜¯ä»€ä¹ˆç‰¹æ®Šåç§°ï¼Œè€Œæ˜¯æŒ‡å½“å‰é¡¹ç›®å’Œåº”ç”¨æ–‡ä»¶å¤¹çš„åç§°ï¼Œé¡¹ç›®åˆ›å»ºä¸åŒï¼Œè‡ªç„¶å°±ä¸åŒã€‚</p>\n</blockquote>\n</li>\n<li>\n<p>å°è¯•å¯åŠ¨é¡¹ç›®ï¼Œç¡®ä¿æ²¡æœ‰é—®é¢˜ã€‚</p>\n</li>\n<li>\n<p>åœ¨ mydjango é¡¹ç›®ä¸‹åˆ›å»ºæ–‡ä»¶å¤¹  <code>templates</code>  å’Œ  <code>static</code>  åˆ†åˆ«ç”¨äºå­˜æ”¾æ¨¡æ¿æ–‡ä»¶å’Œé™æ€èµ„æºã€‚</p>\n</li>\n<li>\n<p>ä¿®æ”¹ mydjango/mydjango/settings.py é…ç½®ã€‚</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>ALLOWED_HOSTS <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'*'</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>INSTALLED_APPS <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token string\">'django.contrib.admin'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token string\">'django.contrib.auth'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token string\">'django.contrib.contenttypes'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token string\">'django.contrib.sessions'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token string\">'django.contrib.messages'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token string\">'django.contrib.staticfiles'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token string\">'app'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token comment\"># æ¨¡æ¿é…ç½®</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>TEMPLATES <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        <span class=\"token string\">'BACKEND'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'django.template.backends.django.DjangoTemplates'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        <span class=\"token string\">'DIRS'</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>os<span class=\"token punctuation\">.</span>path<span class=\"token punctuation\">.</span>join<span class=\"token punctuation\">(</span>BASE_DIR<span class=\"token punctuation\">,</span> <span class=\"token string\">'templates'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>  <span class=\"token comment\"># æŒ‡å®šæ¨¡æ¿æ–‡ä»¶ä½ç½®ï¼šå½“å‰é¡¹ç›®ä¸‹çš„ templates æ–‡ä»¶å¤¹</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        <span class=\"token string\">'APP_DIRS'</span><span class=\"token punctuation\">:</span> <span class=\"token boolean\">True</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        <span class=\"token string\">'OPTIONS'</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>            <span class=\"token string\">'context_processors'</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>                <span class=\"token string\">'django.template.context_processors.debug'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>                <span class=\"token string\">'django.template.context_processors.request'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>                <span class=\"token string\">'django.contrib.auth.context_processors.auth'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>                <span class=\"token string\">'django.contrib.messages.context_processors.messages'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>            <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre></pre></td></tr><tr><td data-num=\"30\"></td><td><pre><span class=\"token comment\"># æŒ‡å®šé™æ€æ–‡ä»¶ä½ç½®</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>STATICFILES_DIRS <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>    <span class=\"token punctuation\">(</span>os<span class=\"token punctuation\">.</span>path<span class=\"token punctuation\">.</span>join<span class=\"token punctuation\">(</span>BASE_DIR<span class=\"token punctuation\">,</span> <span class=\"token string\">'static'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre><span class=\"token punctuation\">]</span></pre></td></tr></table></figure></li>\n</ol>\n<h4 id=\"è·¯ç”±ä¸æ¨¡æ¿\"><a class=\"anchor\" href=\"#è·¯ç”±ä¸æ¨¡æ¿\">#</a> è·¯ç”±ä¸æ¨¡æ¿</h4>\n<p>åœ¨åˆå§‹åˆ›å»ºé¡¹ç›®æ—¶ï¼Œé»˜è®¤ä¼šæŒ‡å®šå¦‚ä¸‹è·¯ç”±ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># mydjango/mydjango/urls.py</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>contrib <span class=\"token keyword\">import</span> admin</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>urls <span class=\"token keyword\">import</span> path</pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>urlpatterns <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    path<span class=\"token punctuation\">(</span><span class=\"token string\">'admin/'</span><span class=\"token punctuation\">,</span> admin<span class=\"token punctuation\">.</span>site<span class=\"token punctuation\">.</span>urls<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token punctuation\">]</span></pre></td></tr></table></figure><p>ä½†åœ¨ app ç›®å½•ä¸‹ä¸­ä¹Ÿå¯ä»¥åˆ›å»ºå­è·¯ç”±ï¼Œä½†å…¶åç§°å¿…é¡»æŒ‡å®šä¸º  <code>urls.py</code> ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># mydjango/app/urls.py</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>urls <span class=\"token keyword\">import</span> path</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">from</span> <span class=\"token punctuation\">.</span> <span class=\"token keyword\">import</span> views</pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>urlpatterns <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    path<span class=\"token punctuation\">(</span><span class=\"token string\">'index/'</span><span class=\"token punctuation\">,</span> views<span class=\"token punctuation\">.</span>Index<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    path<span class=\"token punctuation\">(</span><span class=\"token string\">'data/'</span><span class=\"token punctuation\">,</span> views<span class=\"token punctuation\">.</span>Data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token punctuation\">]</span></pre></td></tr></table></figure><p>ä½†æ˜¯ï¼Œå¦‚æœè¦ä½¿å­è·¯ç”±ç”Ÿæ•ˆï¼Œå¿…é¡»åœ¨é¡¹ç›®è·¯ç”±ä¸­è¿›è¡ŒæŒ‡å®šï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># mydjango/mydjango/urls.py</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>urls <span class=\"token keyword\">import</span> path<span class=\"token punctuation\">,</span> include</pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>urlpatterns <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    path<span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">,</span> include<span class=\"token punctuation\">(</span><span class=\"token string\">'app.urls'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token punctuation\">]</span></pre></td></tr></table></figure><p>è¿™æ ·ï¼Œå½“æµè§ˆå™¨è®¿é—® <span class=\"exturl\" data-url=\"aHR0cDovLzEyNy4wLjAuMTo4MDAwL2luZGV4Lw==\">http://127.0.0.1:8000/index/</span> æ—¶ï¼Œå°±ä¼šé€šè¿‡é¡¹ç›®è·¯ç”±è½¬åˆ°å­è·¯ç”±ï¼Œå¹¶æœ€ç»ˆäº¤ç”±å­è·¯ç”±ä¸­æŒ‡å®šçš„è§†å›¾è§£æå™¨  <code>views.Index</code>  è¿›è¡Œè§£æã€‚</p>\n<p>åœ¨è¿›è¡Œè§†å›¾è§£ææ—¶ï¼Œæˆ‘ä»¬å¯ä»¥æœ‰å¦‚ä¸‹ä¸¤ç§è§£æå½¢å¼ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># mydjango/app/views.py</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>http <span class=\"token keyword\">import</span> HttpResponse</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>shortcuts <span class=\"token keyword\">import</span> render</pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\"># å½¢å¼ä¸€ï¼šè¿”å›æ•°æ®</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">Data</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">return</span> HttpResponse<span class=\"token punctuation\">(</span><span class=\"token string\">'Hello'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\"># å½¢å¼äºŒï¼šè¿”å›æ¸²æŸ“åçš„æ¨¡æ¿</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">Index</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    data <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span><span class=\"token string\">'title'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'My Resume!'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'author'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'Chinmoku'</span><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token keyword\">return</span> render<span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">,</span> <span class=\"token string\">'index.html'</span><span class=\"token punctuation\">,</span> data<span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>å½“è¿”å›æ•°æ®æ—¶ï¼Œç›´æ¥è®¿é—®è·¯ç”±åœ°å€ï¼Œå³å¯è·å–åˆ°å¯¹åº”çš„æ•°æ®ã€‚å½“è¿”å›è§†å›¾æ¨¡æ¿æ—¶ï¼Œä¼šå°†å‚æ•°ä¼ é€’åˆ°æ¨¡æ¿ä¸­ï¼Œæ¨¡æ¿ä¼šè§£æå‚æ•°ï¼Œå¹¶è¡¥å……åˆ°å¯¹åº”ä½ç½®ï¼Œæ­¤å¤„ä½¿ç”¨åˆ°çš„æ¨¡æ¿å¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight html\"><figcaption data-lang=\"HTML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token doctype\"><span class=\"token punctuation\">&lt;!</span><span class=\"token doctype-tag\">DOCTYPE</span> <span class=\"token name\">html</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span> <span class=\"token attr-name\">lang</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>zh-CN<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>head</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>title</span><span class=\"token punctuation\">></span></span>&#123;.&#123; title &#125;&#125;<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>title</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>head</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span>å§“åï¼š<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span><span class=\"token punctuation\">></span></span>&#123;.&#123; author &#125;&#125;<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>html</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p>è¿™ç§  <code>&#123;.&#123; value &#125;&#125;</code>  çš„æ¨¡æ¿å ä½æ–¹å¼ï¼Œè¢«ç§°ä¸º Mustache è¯­æ³•ï¼Œè¿™ç§è¯­æ³•åº”ç”¨å…¶å®å¾ˆå¹¿ï¼Œä¸ä»…æ˜¯åœ¨ python æˆ– java çš„ä¸€äº›æ¨¡æ¿å¼•æ“ä¸­ç”¨åˆ°ï¼Œåœ¨ä¸€äº›å‰ç«¯åœºæ™¯ä¸­é€šå¸¸ä½¿ç”¨å°¤ä¸ºå¹¿æ³›ï¼Œå¦‚ï¼šVueã€‚</p>\n<h4 id=\"æ¨¡æ¿åˆ—è¡¨\"><a class=\"anchor\" href=\"#æ¨¡æ¿åˆ—è¡¨\">#</a> æ¨¡æ¿ï¼šåˆ—è¡¨</h4>\n<p>åŸºæœ¬è¯­æ³•ï¼š</p>\n<figure class=\"highlight html\"><figcaption data-lang=\"HTML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>&#123;.% for item in list %&#125;</pre></td></tr><tr><td data-num=\"2\"></td><td><pre> \t... item display</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>&#123;.% endfor %&#125;</pre></td></tr></table></figure><p>è§†å›¾æ–‡ä»¶è¿”å›æ•°æ®åˆ—è¡¨ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># mydjango/app/views.py</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>shortcuts <span class=\"token keyword\">import</span> render</pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">Index</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    skills <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'java web'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'html/css/js'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'vue'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'wx mini-program'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'sql'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'python'</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    data <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span><span class=\"token string\">'title'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'My Resume!'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'author'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'Chinmoku'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'skills'</span><span class=\"token punctuation\">:</span> skills<span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">return</span> render<span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">,</span> <span class=\"token string\">'index.html'</span><span class=\"token punctuation\">,</span> data<span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>åœ¨æ¨¡æ¿ä¸­å¯¹åˆ—è¡¨è¿›è¡Œéå†ï¼š</p>\n<figure class=\"highlight html\"><figcaption data-lang=\"HTML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token doctype\"><span class=\"token punctuation\">&lt;!</span><span class=\"token doctype-tag\">DOCTYPE</span> <span class=\"token name\">html</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span> <span class=\"token attr-name\">lang</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>zh-CN<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>head</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>title</span><span class=\"token punctuation\">></span></span>&#123;.&#123; title &#125;&#125;<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>title</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>head</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span>ä½œè€…ï¼š<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span><span class=\"token punctuation\">></span></span>&#123;.&#123; author &#125;&#125;<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span>æˆ‘çš„æŠ€èƒ½ï¼š<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token special-attr\"><span class=\"token attr-name\">style</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token value css language-css\"><span class=\"token property\">text-indent</span><span class=\"token punctuation\">:</span> 2em<span class=\"token punctuation\">;</span></span><span class=\"token punctuation\">\"</span></span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        &#123;.% for skill in skills %&#125;</pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span>&#123;.&#123; forloop.counter &#125;&#125;. &#123;.&#123; skill &#125;&#125;<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        &#123;.% endfor %&#125;</pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span>ä¸»æŠ€èƒ½ï¼š&#123;.&#123; skills.0 &#125;&#125;<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>html</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p>è¿™å°±æ˜¯éå†çš„åŸºæœ¬ä½¿ç”¨æ–¹å¼ï¼Œä½†åœ¨éå†è¿‡ç¨‹ä¸­ï¼Œdjango ä¹Ÿæä¾›äº†ä¸€äº›æ–¹æ³•å¸®åŠ©æˆ‘ä»¬è·å–å¾ªç¯ç›¸å…³çš„ä¿¡æ¯ï¼š</p>\n<ol>\n<li>forloop.counter</li>\n<li>forloop.counter0ï¼šä¸‹æ ‡ä» 0 å¼€å§‹ã€‚</li>\n<li>forloop.revcounter</li>\n<li>forloop.revcounter0</li>\n<li>forloop.first</li>\n<li>forloop.last</li>\n<li>empty</li>\n</ol>\n<blockquote>\n<p>è¿™äº›ä¿¡æ¯æ˜¯ä¸€çœ¼å°±èƒ½çœ‹æ‡‚çš„ï¼Œç›¸ä¿¡ä¸ç”¨å¤šåšè§£é‡Šï¼Œè¦æ˜¯ä¸€çœ¼çœ‹ä¸æ‡‚ï¼Œå°±å¤šçœ‹ä¸€çœ¼ï¼Œä½ ä¼šæ‡‚çš„ã€‚</p>\n</blockquote>\n<h4 id=\"æ¨¡æ¿å­—å…¸\"><a class=\"anchor\" href=\"#æ¨¡æ¿å­—å…¸\">#</a> æ¨¡æ¿ï¼šå­—å…¸</h4>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># mydjango/app/views.py</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>shortcuts <span class=\"token keyword\">import</span> render</pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">Index</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    data <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token string\">'info'</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">&#123;</span><span class=\"token string\">'age'</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'birthday'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'xxxx-xx-xx xx:xx:xx'</span><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token keyword\">return</span> render<span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">,</span> <span class=\"token string\">'index.html'</span><span class=\"token punctuation\">,</span> data<span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>ä½¿ç”¨ï¼š</p>\n<figure class=\"highlight html\"><figcaption data-lang=\"HTML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span>ç”Ÿæ—¥ï¼š&#123;.&#123; info.birthday &#125;&#125;<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span>å¹´é¾„ï¼š&#123;.&#123; info.age &#125;&#125;<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><h4 id=\"æ¨¡æ¿è¿‡æ»¤å™¨\"><a class=\"anchor\" href=\"#æ¨¡æ¿è¿‡æ»¤å™¨\">#</a> æ¨¡æ¿ï¼šè¿‡æ»¤å™¨</h4>\n<p>åŸºæœ¬è¯­æ³•ï¼š <code>&#123;.&#123; var | filter_name: not_required_params &#125;&#125;</code> ã€‚</p>\n<p>è¿‡æ»¤å™¨çš„ä½¿ç”¨æ–¹å¼å¤§æ¦‚æ˜¯è¿™æ ·ï¼š</p>\n<figure class=\"highlight html\"><figcaption data-lang=\"HTML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span>å¹´é¾„ï¼š&#123;.&#123; info.age | add:18 &#125;&#125;<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p>æŒ‰ç…§è¿™æ ·çš„ä½¿ç”¨æ–¹å¼ï¼Œå°±å¯ä»¥å°†åŸæœ‰çš„å€¼ï¼Œé€šè¿‡æŸç§è§„åˆ™ï¼Œè¿”å›ä¸€ä¸ªè¢«è®¡ç®—æˆ–å¤„ç†åçš„å€¼ï¼Œä¾‹å¦‚è¿™é‡Œçš„è‡ªå¢ 18ã€‚</p>\n<p>è¿™ç§ç±»ä¼¼çš„è¢« Django å†…ç½®æ”¯æŒçš„è¿‡æ»¤å™¨è¿˜æœ‰ä¸å°‘ï¼Œå¯ä»¥åœ¨ç½‘ä¸Š<span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuY25ibG9ncy5jb20vbGF2ZW5kZXIxMjIxL3AvMTIyOTk2ODguaHRtbA==\">çœ‹ä¸€çœ‹</span>ã€‚</p>\n<p>æ ¹æ®ä¸‡ç‰©çš†å¯å¥—å¨ƒåŸåˆ™ï¼Œè¿‡æ»¤å™¨ä¹Ÿå¯ä»¥è¿™æ ·ä½¿ç”¨ï¼š</p>\n<figure class=\"highlight html\"><figcaption data-lang=\"HTML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span>å¹´é¾„ï¼š&#123;.&#123; info.age | add:18 | divisibleby:5 | upper | linenumbers | length &#125;&#125;<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p>ä»¥ä¸Šæ˜¯ Django å†…ç½®çš„è¿‡æ»¤å™¨ï¼Œä½†åœ¨ä¸šåŠ¡è¿‡ç¨‹ä¸­ï¼Œæœ‰æ—¶ä¹Ÿéœ€è¦å¯¹è¿‡æ»¤å™¨è¿›è¡Œè‡ªå®šä¹‰ï¼Œè¿™é‡Œæä¾›ä¸€ä¸‹è‡ªå®šä¹‰è¿‡æ»¤å™¨çš„æµç¨‹ï¼š</p>\n<ol>\n<li>\n<p>åœ¨ app åº”ç”¨ä¸‹åˆ›å»ºæ–‡ä»¶å¤¹  <code>templatetags</code> ï¼ˆå›ºå®šåç§°ï¼‰ã€‚</p>\n</li>\n<li>\n<p>åœ¨ templatetags ä¸‹åˆ›å»ºæ–‡ä»¶ï¼Œä¾‹å¦‚ <span class=\"exturl\" data-url=\"aHR0cDovL215ZmlsdGVycy5weQ==\">myfilters.py</span>ï¼ˆåç§°è‡ªå®šä¹‰ï¼‰ã€‚</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># mydjango/app/templatetags/myfilters.py</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>template <span class=\"token keyword\">import</span> Library</pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>register <span class=\"token operator\">=</span> Library<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># register åå­—å›ºå®šä¸å¯å˜</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token decorator annotation punctuation\">@register<span class=\"token punctuation\">.</span>filter</span><span class=\"token punctuation\">(</span>name<span class=\"token operator\">=</span><span class=\"token string\">'append'</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># ä¸æŒ‡å®šåå­—ï¼Œå°±ä¼šä½¿ç”¨å‡½æ•°å</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">years</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">,</span> param<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># è¿‡æ»¤ä¹‹å‰çš„åŸå€¼</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token keyword\">return</span> value<span class=\"token punctuation\">.</span>__str__<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">' '</span> <span class=\"token operator\">+</span> param</pre></td></tr></table></figure></li>\n<li>\n<p>åœ¨æ¨¡æ¿ä¸­è¿›è¡Œä½¿ç”¨ã€‚</p>\n<figure class=\"highlight html\"><figcaption data-lang=\"HTML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>&#123;.% load myfilters %&#125;</pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\"></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span>å¹´é¾„ï¼š&#123;.&#123; info.age | append:'year(s)' &#125;&#125;<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure></li>\n</ol>\n<blockquote>\n<p>æ³¨æ„ï¼šè‡ªå®šä¹‰è¿‡æ»¤å™¨åªæ”¯æŒä¸¤ä¸ªå‚æ•°ï¼Œå‚æ•°ä¸€æ˜¯è¿‡æ»¤å‰çš„åŸå€¼ï¼Œå‚æ•°äºŒæ˜¯å¯é€‰çš„è¿‡æ»¤å‚æ•°ã€‚</p>\n</blockquote>\n<h4 id=\"æ¨¡æ¿æ¡ä»¶åˆ¤æ–­\"><a class=\"anchor\" href=\"#æ¨¡æ¿æ¡ä»¶åˆ¤æ–­\">#</a> æ¨¡æ¿ï¼šæ¡ä»¶åˆ¤æ–­</h4>\n<p>åŸºæœ¬è¯­æ³•ï¼š</p>\n<figure class=\"highlight html\"><figcaption data-lang=\"HTML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>&#123;.% if condition1 %&#125;</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>   ... display 1</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>&#123;.% elif condition2 %&#125;</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>   ... display 2</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>&#123;.% else %&#125;</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>   ... display 3</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>&#123;.% endif %&#125;</pre></td></tr></table></figure><p>ä½¿ç”¨ç¤ºä¾‹ï¼š</p>\n<figure class=\"highlight html\"><figcaption data-lang=\"HTML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span>ç§°å‘¼ï¼šç‹</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    &#123;.% if info.age &lt; 35 %&#125; å”å”</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>\t&#123;.% elif info.age &lt; 80 %&#125; å¤§çˆ·</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    &#123;.% else %&#125; è€å¦–æ€ª</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    &#123;.% endif %&#125;</pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p>æ¡ä»¶åˆ¤æ–­ä¸­ï¼Œä¹Ÿæ”¯æŒä¸ã€æˆ–ã€éçš„åˆ¤æ–­ï¼Œåˆ†åˆ«ä½¿ç”¨ andï¼Œorï¼Œnotï¼Œä¸æã€‚</p>\n<h4 id=\"æ¨¡æ¿ifequal\"><a class=\"anchor\" href=\"#æ¨¡æ¿ifequal\">#</a> æ¨¡æ¿ï¼šifequal</h4>\n<figure class=\"highlight html\"><figcaption data-lang=\"HTML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>&#123;.% ifequal user currentuser %&#125;</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span>Welcome!<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>&#123;.% endifequal %&#125;</pre></td></tr></table></figure><p>ä¸ä¹‹ç›¸åçš„æ˜¯  <code>ifnotequal</code>  ã€‚</p>\n<h4 id=\"æ¨¡æ¿æ ‡ç­¾\"><a class=\"anchor\" href=\"#æ¨¡æ¿æ ‡ç­¾\">#</a> æ¨¡æ¿ï¼šæ ‡ç­¾</h4>\n<p>Django æ¨¡æ¿å†…ç½®æ ‡ç­¾ï¼š</p>\n<ul>\n<li><code>&#123;.% for %&#125;</code>  ä¸  <code>&#123;.% endfor %&#125;</code> ï¼šéå†è¾“å‡ºå†…å®¹ã€‚</li>\n<li><code>&#123;.% if %&#125;</code> ã€ <code>&#123;.% elif %&#125;</code>  åŠ  <code>&#123;.% endif %&#125;</code> ï¼šæ¡ä»¶åˆ¤æ–­ã€‚</li>\n<li><code>&#123;.% url name args %&#125;</code> ï¼šå¼•ç”¨è·¯ç”±é…ç½®åã€‚</li>\n<li><code>&#123;.% load %&#125;</code> ï¼šåŠ è½½ Django æ ‡ç­¾åº“ã€‚</li>\n<li><code>&#123;.% load static %&#125;</code> ï¼š</li>\n<li><code>&#123;.% static static_path %&#125;</code> ï¼šè¯»å–é™æ€èµ„æºã€‚</li>\n<li><code>&#123;.% extends base_template %&#125;</code> ï¼šæ¨¡æ¿ç»§æ‰¿ã€‚</li>\n<li><code>&#123;.% block data %&#125;</code>  ä¸  <code>&#123;.% endblock %&#125;</code> ï¼šé‡å†™çˆ¶æ¨¡æ¿ä»£ç ã€‚</li>\n<li><code>&#123;.% csrf_token %&#125;</code> ï¼šè·¨åŸŸå¯†é’¥ã€‚</li>\n</ul>\n<h4 id=\"é™æ€èµ„æº\"><a class=\"anchor\" href=\"#é™æ€èµ„æº\">#</a> é™æ€èµ„æº</h4>\n<p>ä½¿ç”¨é™æ€èµ„æºä¹‹å‰ï¼Œéœ€è¦åœ¨ <span class=\"exturl\" data-url=\"aHR0cDovL3NldHRpbmdzLnB5\">settings.py</span> ä¸­è¿›è¡Œé…ç½®ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># æŒ‡å®šé™æ€æ–‡ä»¶ä½ç½®</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>STATICFILES_DIRS <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token punctuation\">(</span>os<span class=\"token punctuation\">.</span>path<span class=\"token punctuation\">.</span>join<span class=\"token punctuation\">(</span>BASE_DIR<span class=\"token punctuation\">,</span> <span class=\"token string\">'static'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token punctuation\">]</span></pre></td></tr></table></figure><p>æ¨¡æ¿ä¸­ä½¿ç”¨ï¼š</p>\n<figure class=\"highlight html\"><figcaption data-lang=\"HTML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>&#123;.%% load static files %&#125;</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>&#123;.% static <span class=\"token punctuation\">'</span>images/test.jpg<span class=\"token punctuation\">'</span> %&#125;<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></pre></td></tr></table></figure><h4 id=\"è‡ªå®šä¹‰æ ‡ç­¾\"><a class=\"anchor\" href=\"#è‡ªå®šä¹‰æ ‡ç­¾\">#</a> è‡ªå®šä¹‰æ ‡ç­¾</h4>\n<p>è‡ªå®šä¹‰æ ‡ç­¾æ­¥éª¤ï¼š</p>\n<ol>\n<li>\n<p>åº”ç”¨ç›®å½•ä¸‹åˆ›å»º templatetags ç›®å½•ã€‚</p>\n</li>\n<li>\n<p>åœ¨ templatetags ç›®å½•ä¸‹åˆ›å»ºä»»æ„æ–‡ä»¶ï¼Œå¦‚  <code>my_tags.py</code> ã€‚</p>\n</li>\n<li>\n<p>é…ç½®æ–‡ä»¶ä¸­æŒ‡å®šé…ç½®ã€‚</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>TEMPLATES <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        <span class=\"token string\">'BACKEND'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'django.template.backends.django.DjangoTemplates'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token string\">'DIRS'</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>os<span class=\"token punctuation\">.</span>path<span class=\"token punctuation\">.</span>join<span class=\"token punctuation\">(</span>BASE_DIR<span class=\"token punctuation\">,</span> <span class=\"token string\">'templates'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>  <span class=\"token comment\"># æŒ‡å®šæ¨¡æ¿æ–‡ä»¶ä½ç½®ï¼šå½“å‰é¡¹ç›®ä¸‹çš„ templates æ–‡ä»¶å¤¹</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token string\">'APP_DIRS'</span><span class=\"token punctuation\">:</span> <span class=\"token boolean\">True</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token string\">'OPTIONS'</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>            <span class=\"token string\">'context_processors'</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>                <span class=\"token string\">'django.template.context_processors.debug'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>                <span class=\"token string\">'django.template.context_processors.request'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>                <span class=\"token string\">'django.contrib.auth.context_processors.auth'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>                <span class=\"token string\">'django.contrib.messages.context_processors.messages'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>            <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>            <span class=\"token string\">\"libraries\"</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>                <span class=\"token string\">'my_tags'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'app.templatetags.my_tags'</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token punctuation\">]</span></pre></td></tr></table></figure></li>\n<li>\n<p>ç¼–è¾‘ my_tags.py</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># mydjango/app/templatetags/my_tags.py</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">from</span> django <span class=\"token keyword\">import</span> template</pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>register <span class=\"token operator\">=</span> template<span class=\"token punctuation\">.</span>Library<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token decorator annotation punctuation\">@register<span class=\"token punctuation\">.</span>simple_tag</span><span class=\"token punctuation\">(</span>name<span class=\"token operator\">=</span><span class=\"token string\">'mytag'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">my_tag1</span><span class=\"token punctuation\">(</span>v1<span class=\"token punctuation\">,</span> v2<span class=\"token punctuation\">,</span> v3<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token keyword\">return</span> v1 <span class=\"token operator\">*</span> v2 <span class=\"token operator\">*</span> v3</pre></td></tr></table></figure></li>\n<li>\n<p>åœ¨æ¨¡æ¿æ–‡ä»¶ä¸­ä½¿ç”¨</p>\n<figure class=\"highlight html\"><figcaption data-lang=\"HTML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>&#123;.% load my_tags %&#125;</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span>11 * 22 * 33 = &#123;.% mytag 11 22 33 %&#125;<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure></li>\n</ol>\n<p>æ­¤å¤–ï¼Œè‡ªå®šä¹‰æ ‡ç­¾æ—¶ï¼Œä¹Ÿå¯ä»¥å¯¹æ ‡ç­¾å†…å®¹è¿›è¡Œè¯­ä¹‰åŒ–å¤„ç†ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># mydjango/app/templatetags/my_tags.py</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">from</span> django <span class=\"token keyword\">import</span> template</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>utils<span class=\"token punctuation\">.</span>safestring <span class=\"token keyword\">import</span> mark_safe</pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>register <span class=\"token operator\">=</span> template<span class=\"token punctuation\">.</span>Library<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token decorator annotation punctuation\">@register<span class=\"token punctuation\">.</span>simple_tag</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">my_html</span><span class=\"token punctuation\">(</span>v1<span class=\"token punctuation\">,</span> v2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    temp_html <span class=\"token operator\">=</span> <span class=\"token string\">\"&lt;input type='text' id='%s' placeholder='%s' />\"</span> <span class=\"token operator\">%</span> <span class=\"token punctuation\">(</span>v1<span class=\"token punctuation\">,</span> v2<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token keyword\">return</span> mark_safe<span class=\"token punctuation\">(</span>temp_html<span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>åœ¨æ¨¡æ¿æ–‡ä»¶ä¸­ä½¿ç”¨ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token operator\">&lt;</span>!<span class=\"token operator\">-</span><span class=\"token operator\">-</span>mydjango<span class=\"token operator\">/</span>templates<span class=\"token operator\">/</span>index<span class=\"token punctuation\">.</span>html<span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">.</span><span class=\"token operator\">%</span> load my_tags <span class=\"token operator\">%</span><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span><span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">.</span><span class=\"token operator\">%</span> my_html <span class=\"token number\">20</span> <span class=\"token string\">'è¯·è¾“å…¥å¹´é¾„'</span> <span class=\"token operator\">%</span><span class=\"token punctuation\">&#125;</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span></pre></td></tr></table></figure><h4 id=\"å…¶ä»–æ¨¡æ¿çŸ¥è¯†\"><a class=\"anchor\" href=\"#å…¶ä»–æ¨¡æ¿çŸ¥è¯†\">#</a> å…¶ä»–æ¨¡æ¿çŸ¥è¯†</h4>\n<ol>\n<li>\n<p>æ³¨é‡Š</p>\n<figure class=\"highlight html\"><figcaption data-lang=\"HTML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"></span></pre></td></tr></table></figure></li>\n<li>\n<p>include æ ‡ç­¾</p>\n<p>include æ ‡ç­¾å…è®¸åœ¨æ¨¡æ¿ä¹‹ä¸­åŒ…å«å…¶ä»–æ¨¡æ¿ï¼š</p>\n<figure class=\"highlight html\"><figcaption data-lang=\"HTML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>&#123;.% include \"nav.html\" %&#125;</pre></td></tr></table></figure></li>\n<li>\n<p>csrf_token</p>\n<p><code>csrf_token</code>  ç”¨äº form è¡¨å•ä¸­ï¼Œä½œç”¨æ˜¯è·¨ç«™è¯·æ±‚ä¼ªé€ ä¿æŠ¤ï¼Œä½¿ç”¨è¿™ä¸ªæ ‡ç­¾ï¼Œè¡¨å•æäº¤æ•°æ®æ‰ä¼šæˆåŠŸï¼Œå¦åˆ™è¿›è¡Œå†æ¬¡è·³è½¬é¡µé¢æ—¶ä¼šæŠ›å‡º 403 é”™è¯¯ã€‚</p>\n</li>\n<li>\n<p>å…¶ä»–æ¨¡æ¿å¦‚  <code>jinja2</code> ã€ <code>mako</code>  ç­‰ï¼Œäº†è§£å³å¯ï¼Œå¦‚æœ‰éœ€æ±‚ï¼Œè‡ªè¡Œæ‘¸ç´¢ã€‚</p>\n</li>\n</ol>\n<h3 id=\"django-æ¨¡å‹\"><a class=\"anchor\" href=\"#django-æ¨¡å‹\">#</a> Django æ¨¡å‹</h3>\n<p>Django å¯¹å„ç§æ•°æ®åº“æä¾›äº†å¾ˆå¥½çš„æ”¯æŒï¼ŒåŒ…æ‹¬ï¼šPostgreSQLã€MySQLã€SQLiteã€Oracleï¼Œæœ¬æ–‡å°†ä»¥ MySQL ä½œä¸ºç¤ºä¾‹è¿›è¡Œå­¦ä¹ ã€‚</p>\n<p>å®‰è£… python mysql é©±åŠ¨ï¼š</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>pip3 <span class=\"token function\">install</span> pymysql -i https://pypi.douban.com/simple</pre></td></tr></table></figure><h4 id=\"æ•°æ®åº“é…ç½®\"><a class=\"anchor\" href=\"#æ•°æ®åº“é…ç½®\">#</a> æ•°æ®åº“é…ç½®</h4>\n<p>æ‰‹åŠ¨åˆ›å»ºæ•°æ®åº“ï¼š</p>\n<figure class=\"highlight sql\"><figcaption data-lang=\"SQL\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">create</span> <span class=\"token keyword\">database</span> mydjango <span class=\"token keyword\">default</span> <span class=\"token keyword\">charset</span><span class=\"token operator\">=</span>utf8<span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p>é…ç½®æ•°æ®åº“ä¿¡æ¯ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># mydjango/mydjango/settings.py</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>DATABASES <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token string\">'default'</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token string\">'ENGINE'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'django.db.backends.mysql'</span><span class=\"token punctuation\">,</span>  <span class=\"token comment\"># æ•°æ®åº“å¼•æ“</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token string\">'NAME'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'mydjango'</span><span class=\"token punctuation\">,</span>  <span class=\"token comment\"># æ•°æ®åº“åç§°</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token string\">'HOST'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'127.0.0.1'</span><span class=\"token punctuation\">,</span>  <span class=\"token comment\"># æ•°æ®åº“åœ°å€ï¼Œæœ¬æœº ip åœ°å€ 127.0.0.1</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token string\">'PORT'</span><span class=\"token punctuation\">:</span> <span class=\"token number\">3306</span><span class=\"token punctuation\">,</span>  <span class=\"token comment\"># ç«¯å£</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token string\">'USER'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'root'</span><span class=\"token punctuation\">,</span>   <span class=\"token comment\"># æ•°æ®åº“ç”¨æˆ·å</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token string\">'PASSWORD'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'123456'</span><span class=\"token punctuation\">,</span>  <span class=\"token comment\"># æ•°æ®åº“å¯†ç </span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>åœ¨ <span class=\"exturl\" data-url=\"aHR0cDovL3NldHRpbmdzLnB5\">settings.py</span> åŒçº§ç›®å½•ä¸‹çš„  <code>__init__.py</code>  ä¸­ç¼–è¾‘å†…å®¹ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># mydjango/mydjango/__init__.py</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> pymysql</pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>pymysql<span class=\"token punctuation\">.</span>install_as_MySQLdb<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><h4 id=\"å®šä¹‰æ¨¡å‹\"><a class=\"anchor\" href=\"#å®šä¹‰æ¨¡å‹\">#</a> å®šä¹‰æ¨¡å‹</h4>\n<p>ç¼–è¾‘æ¨¡å‹æ–‡ä»¶ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># mydjango/app/models.py</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>db <span class=\"token keyword\">import</span> models</pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">Test</span><span class=\"token punctuation\">(</span>models<span class=\"token punctuation\">.</span>Model<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    name <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>CharField<span class=\"token punctuation\">(</span>max_length<span class=\"token operator\">=</span><span class=\"token number\">20</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>åˆ›å»ºè¡¨ç»“æ„ï¼š</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>python3 manage.py migrate <span class=\"token comment\"># åˆ›å»ºè¡¨ç»“æ„</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>python3 manage.py makemigrations</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>python3 manage.py migrate</pre></td></tr></table></figure><p>æ‰§è¡ŒæˆåŠŸåï¼Œå°±ä¼šè‡ªåŠ¨å‘æ•°æ®åº“åˆ›å»ºä¸€å¼ è¡¨  <code>app_test</code> ï¼ˆè¡¨åä¸å½“å‰æ¨¡å—å’Œæ¨¡å‹å†…çš„ç±»åæœ‰å…³ï¼‰ã€‚</p>\n<blockquote>\n<p>æç¤ºï¼š</p>\n<ol>\n<li>\n<p>å¦‚éœ€åœ¨ PyCharm Terminal ä¸­è‡ªåŠ¨æ¿€æ´»è™šæ‹Ÿç¯å¢ƒï¼Œå¯åœ¨ settings -&gt; Tools -&gt; Terminal -&gt; Shell path ä¸­è¿›è¡Œç±»ä¼¼å¦‚ä¸‹çš„é…ç½®ï¼š</p>\n<p><code>&quot;cmd.exe&quot; /k &quot;&quot;A:\\python-venv\\django_venv\\Scripts\\activate&quot;&quot; </code></p>\n</li>\n<li>\n<p>æ‰§è¡Œ  <code>python3 manage.py migrate</code>  æ—¶æŠ¥é”™ï¼š'str' object has no attribute 'decode'</p>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L29uZV9kYXk0MTUvYXJ0aWNsZS9kZXRhaWxzLzEwMTIzMjk2Mg==\">ç‚¹å‡»æ­¤å¤„</span>å‰å¾€æŸ¥çœ‹è§£å†³æ–¹æ³•ã€‚</p>\n</li>\n</ol>\n</blockquote>\n<h4 id=\"æ•°æ®åº“æ“ä½œ\"><a class=\"anchor\" href=\"#æ•°æ®åº“æ“ä½œ\">#</a> æ•°æ®åº“æ“ä½œ</h4>\n<p>é…ç½®è·¯ç”±ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># mydjango/app/urls.py</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>urls <span class=\"token keyword\">import</span> path</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">from</span> <span class=\"token punctuation\">.</span> <span class=\"token keyword\">import</span> views</pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>urlpatterns <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    path<span class=\"token punctuation\">(</span><span class=\"token string\">'user/add/&lt;str:name>'</span><span class=\"token punctuation\">,</span> views<span class=\"token punctuation\">.</span>UserAdd<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token punctuation\">]</span></pre></td></tr></table></figure><p>è§†å›¾å¤„ç†ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># mydjango/app/views.py</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>http <span class=\"token keyword\">import</span> HttpResponse</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">from</span> app<span class=\"token punctuation\">.</span>models <span class=\"token keyword\">import</span> Test</pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">UserAdd</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">,</span> name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    test1 <span class=\"token operator\">=</span> Test<span class=\"token punctuation\">(</span>name<span class=\"token operator\">=</span>name<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    test1<span class=\"token punctuation\">.</span>save<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token keyword\">return</span> HttpResponse<span class=\"token punctuation\">(</span><span class=\"token string\">\"&lt;p>æ•°æ®æ·»åŠ æˆåŠŸï¼&lt;/p>\"</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>æµè§ˆå™¨è®¿é—® <span class=\"exturl\" data-url=\"aHR0cDovLzEyNy4wLjAuMTo4MDAwL3VzZXIvYWRkL3poYW5n\">http://127.0.0.1:8000/user/add/zhang</span> å³å¯å‘æ•°æ®åº“æ·»åŠ ä¸€æ¡è®°å½•ï¼Œä¸”å…¶ä¸»é”®é»˜è®¤é‡‡ç”¨è‡ªå¢ç­–ç•¥ã€‚</p>\n<p>ç±»ä¼¼åœ°ï¼Œé€šè¿‡å¯¹è±¡ç›´æ¥è°ƒç”¨æ–¹æ³•ï¼Œå³å¯å®Œæˆå¯¹æ•°æ®åº“çš„å¢åˆ æ”¹æŸ¥ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># æŸ¥è¯¢æ•°æ®</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>Test<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span><span class=\"token builtin\">all</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># æŸ¥è¯¢æ‰€æœ‰ï¼Œç›¸å½“äº => select *</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>Test<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span><span class=\"token builtin\">filter</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">id</span><span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># è¿‡æ»¤æŸ¥è¯¢ï¼Œç›¸å½“äº => where</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>Test<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token builtin\">id</span><span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># æŸ¥è¯¢å•ä¸ªå¯¹è±¡</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>Test<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>order_by<span class=\"token punctuation\">(</span><span class=\"token string\">'name'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">:</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span>  <span class=\"token comment\"># æ’åºå¹¶é™åˆ¶ï¼Œç›¸å½“äº => order by 'name' offset 0 limit 2</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>Test<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>order_by<span class=\"token punctuation\">(</span><span class=\"token string\">\"id\"</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># æ’åº</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>Test<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span><span class=\"token builtin\">filter</span><span class=\"token punctuation\">(</span>name<span class=\"token operator\">=</span><span class=\"token string\">\"runoob\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>order_by<span class=\"token punctuation\">(</span><span class=\"token string\">\"id\"</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># è¿é”ä½¿ç”¨</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token comment\"># æ›´æ–°æ•°æ®</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>test1 <span class=\"token operator\">=</span> Test<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token builtin\">id</span><span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>test1<span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> <span class=\"token string\">'Ouyang'</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>test1<span class=\"token punctuation\">.</span>save<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>Test<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span><span class=\"token builtin\">filter</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">id</span><span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>update<span class=\"token punctuation\">(</span>name<span class=\"token operator\">=</span><span class=\"token string\">'Ouyang'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>Test<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span><span class=\"token builtin\">all</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>update<span class=\"token punctuation\">(</span>name<span class=\"token operator\">=</span><span class=\"token string\">'Xxx'</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># ä¿®æ”¹æ‰€æœ‰</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token comment\"># åˆ é™¤æ•°æ®</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>test2 <span class=\"token operator\">=</span> Test<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token builtin\">id</span><span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>test2<span class=\"token punctuation\">.</span>delete<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>Test<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span><span class=\"token builtin\">filter</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">id</span><span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>delete<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>Test<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span><span class=\"token builtin\">all</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>delete<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># åˆ é™¤æ‰€æœ‰</span></pre></td></tr></table></figure><h3 id=\"django-è¡¨å•\"><a class=\"anchor\" href=\"#django-è¡¨å•\">#</a> Django è¡¨å•</h3>\n<h4 id=\"get\"><a class=\"anchor\" href=\"#get\">#</a> GET</h4>\n<p>åˆ›å»ºæ¨¡æ¿æ–‡ä»¶ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token operator\">&lt;</span>!<span class=\"token operator\">-</span><span class=\"token operator\">-</span>mydjango<span class=\"token operator\">/</span>templates<span class=\"token operator\">/</span>search_form<span class=\"token punctuation\">.</span>html<span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token operator\">&lt;</span>!DOCTYPE html<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token operator\">&lt;</span>html lang<span class=\"token operator\">=</span><span class=\"token string\">\"en\"</span><span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token operator\">&lt;</span>head<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token operator\">&lt;</span>meta charset<span class=\"token operator\">=</span><span class=\"token string\">\"UTF-8\"</span><span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token operator\">&lt;</span>title<span class=\"token operator\">></span>Django form get<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>title<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>head<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token operator\">&lt;</span>body<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token operator\">&lt;</span>form action<span class=\"token operator\">=</span><span class=\"token string\">\"/search/\"</span> method<span class=\"token operator\">=</span><span class=\"token string\">\"get\"</span><span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token operator\">&lt;</span><span class=\"token builtin\">input</span> <span class=\"token builtin\">type</span><span class=\"token operator\">=</span><span class=\"token string\">\"text\"</span> name<span class=\"token operator\">=</span><span class=\"token string\">\"q\"</span> placeholder<span class=\"token operator\">=</span><span class=\"token string\">\"è¯·è¾“å…¥æœç´¢å†…å®¹\"</span><span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token operator\">&lt;</span><span class=\"token builtin\">input</span> <span class=\"token builtin\">type</span><span class=\"token operator\">=</span><span class=\"token string\">\"submit\"</span> value<span class=\"token operator\">=</span><span class=\"token string\">\"æœç´¢\"</span><span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>form<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>body<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>html<span class=\"token operator\">></span></pre></td></tr></table></figure><p>ç¼–è¾‘è§†å›¾æ–‡ä»¶ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># mydjango/app/views.py</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>http <span class=\"token keyword\">import</span> HttpResponse</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>shortcuts <span class=\"token keyword\">import</span> render</pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\"># è¡¨å•</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">search_form</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">return</span> render<span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">,</span> <span class=\"token string\">'search_form.html'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\"># æ¥æ”¶è¯·æ±‚æ•°æ®</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">search</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    request<span class=\"token punctuation\">.</span>encoding <span class=\"token operator\">=</span> <span class=\"token string\">'utf-8'</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token keyword\">if</span> <span class=\"token string\">'q'</span> <span class=\"token keyword\">in</span> request<span class=\"token punctuation\">.</span>GET <span class=\"token keyword\">and</span> request<span class=\"token punctuation\">.</span>GET<span class=\"token punctuation\">[</span><span class=\"token string\">'q'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        message <span class=\"token operator\">=</span> <span class=\"token string\">'ä½ æœç´¢çš„å†…å®¹ä¸º: '</span> <span class=\"token operator\">+</span> request<span class=\"token punctuation\">.</span>GET<span class=\"token punctuation\">[</span><span class=\"token string\">'q'</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        message <span class=\"token operator\">=</span> <span class=\"token string\">'ä½ æäº¤äº†ç©ºè¡¨å•'</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token keyword\">return</span> HttpResponse<span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>é…ç½®è·¯ç”±ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># mydjango/app/urls.py</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>conf<span class=\"token punctuation\">.</span>urls <span class=\"token keyword\">import</span> url</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">from</span> <span class=\"token punctuation\">.</span> <span class=\"token keyword\">import</span> views</pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>urlpatterns <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    url<span class=\"token punctuation\">(</span><span class=\"token string\">r'^search-form/$'</span><span class=\"token punctuation\">,</span> views<span class=\"token punctuation\">.</span>search_form<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    url<span class=\"token punctuation\">(</span><span class=\"token string\">r'^search/$'</span><span class=\"token punctuation\">,</span> views<span class=\"token punctuation\">.</span>search<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token punctuation\">]</span></pre></td></tr></table></figure><h4 id=\"post\"><a class=\"anchor\" href=\"#post\">#</a> Post</h4>\n<p>åˆ›å»ºæ¨¡æ¿æ–‡ä»¶ï¼š</p>\n<figure class=\"highlight html\"><figcaption data-lang=\"HTML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token doctype\"><span class=\"token punctuation\">&lt;!</span><span class=\"token doctype-tag\">DOCTYPE</span> <span class=\"token name\">html</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span> <span class=\"token attr-name\">lang</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>en<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>head</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">charset</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>UTF-8<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>title</span><span class=\"token punctuation\">></span></span>Django form post<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>title</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>head</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>form</span> <span class=\"token attr-name\">action</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/search-post/<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">method</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>post<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    &#123;.% csrf_token %&#125;<span class=\"token comment\"></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>q<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">placeholder</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>è¯·è¾“å…¥æœç´¢å†…å®¹<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>submit<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>æœç´¢<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>form</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span>&#123;.&#123; keyword &#125;&#125;<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>html</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p>ç¼–è¾‘è§†å›¾æ–‡ä»¶ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># mydjango/app/views.py</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>shortcuts <span class=\"token keyword\">import</span> render</pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">search_post</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    ctx <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">if</span> request<span class=\"token punctuation\">.</span>POST<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        ctx<span class=\"token punctuation\">[</span><span class=\"token string\">'keyword'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> request<span class=\"token punctuation\">.</span>POST<span class=\"token punctuation\">[</span><span class=\"token string\">'q'</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token keyword\">return</span> render<span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">,</span> <span class=\"token string\">\"post.html\"</span><span class=\"token punctuation\">,</span> ctx<span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>é…ç½®è·¯ç”±ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># mydjango/app/urls.py</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>conf<span class=\"token punctuation\">.</span>urls <span class=\"token keyword\">import</span> url</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">from</span> <span class=\"token punctuation\">.</span> <span class=\"token keyword\">import</span> views</pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>urlpatterns <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    url<span class=\"token punctuation\">(</span><span class=\"token string\">r'^search-post/$'</span><span class=\"token punctuation\">,</span> views<span class=\"token punctuation\">.</span>search_post<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token punctuation\">]</span></pre></td></tr></table></figure><p>é€šè¿‡è¿™ç§æ–¹å¼ï¼Œå¯ä»¥å°†æäº¤çš„æ•°æ®å¤„ç†åï¼Œé‡æ–°æ¸²æŸ“åˆ°é¡µé¢ä¸Šã€‚</p>\n<h4 id=\"request-å¯¹è±¡\"><a class=\"anchor\" href=\"#request-å¯¹è±¡\">#</a> Request å¯¹è±¡</h4>\n<p>æ¯ä¸ªè§†å›¾å‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°éƒ½å¿…é¡»æ˜¯  <code>HttpRequest</code>  å¯¹è±¡ï¼Œé€šè¿‡è¯¥å¯¹è±¡ï¼Œå¯ä»¥è·å–ä¸€äº›åˆ—å±æ€§ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>http <span class=\"token keyword\">import</span> HttpResponse</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">dj_test</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">.</span>path<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">return</span> HttpResponse<span class=\"token punctuation\">(</span><span class=\"token string\">\"Hello world!\"</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>request ä¸­çš„å±æ€§ä¸»è¦æœ‰ï¼š</p>\n<ol>\n<li>path</li>\n<li>method</li>\n<li>GET</li>\n<li>POST</li>\n<li>REQUESTï¼šä¸ºäº†æ–¹ä¾¿ï¼Œè¯¥å±æ€§æ˜¯ POST å’Œ GET å±æ€§çš„é›†åˆä½“ï¼Œä½†æ˜¯æœ‰ç‰¹æ®Šæ€§ï¼Œå…ˆæŸ¥æ‰¾ POST å±æ€§ï¼Œç„¶åå†æŸ¥æ‰¾ GET å±æ€§ã€‚ï¼ˆä¸å»ºè®®ä½¿ç”¨ï¼‰</li>\n<li>COOKIES</li>\n<li>FILES</li>\n<li>METAï¼šåŒ…å«æ‰€æœ‰å¯ç”¨ HTTP å¤´éƒ¨ä¿¡æ¯çš„å­—å…¸ã€‚</li>\n<li>userï¼šæ˜¯ä¸€ä¸ª  <code>django.contrib.auth.models.User</code>  å¯¹è±¡ï¼Œä»£è¡¨å½“å‰ç™»å½•çš„ç”¨æˆ·ã€‚å¯ä»¥é€šè¿‡ user çš„  <code>is_authenticated()</code>  æ–¹æ³•æ¥è¾¨åˆ«ç”¨æˆ·æ˜¯å¦ç™»å½•ã€‚</li>\n<li>session</li>\n<li>raw_post_dataï¼šåŸå§‹ HTTP POST æ•°æ®ï¼Œæœªè§£æè¿‡ã€‚é«˜çº§å¤„ç†æ—¶ä¼šæœ‰ç”¨å¤„ã€‚</li>\n</ol>\n<p>request ä¹Ÿæä¾›äº†ä¸€äº›æ–¹æ³•ï¼š</p>\n<ol>\n<li><code>__getitem__(key)</code> ï¼šè¿”å› GET/POST çš„é”®å€¼ï¼Œå…ˆå– POSTï¼Œåå– GETã€‚å¦‚æœé”®ä¸å­˜åœ¨åˆ™æŠ›å‡º KeyErrorã€‚</li>\n<li><code>has_key()</code> ï¼šæ£€æŸ¥ request.GET or request.POST ä¸­æ˜¯å¦åŒ…å«å‚æ•°æŒ‡å®šçš„ Keyã€‚</li>\n<li><code>get_full_path()</code></li>\n<li><code>is_secure()</code> ï¼šæ£€éªŒ HTTPSã€‚</li>\n</ol>\n<h4 id=\"querydict-å¯¹è±¡\"><a class=\"anchor\" href=\"#querydict-å¯¹è±¡\">#</a> QueryDict å¯¹è±¡</h4>\n<p>åœ¨ HttpRequest å¯¹è±¡ä¸­ï¼ŒGET å’Œ POST å±æ€§æ˜¯ django.http.QueryDict ç±»çš„å®ä¾‹ã€‚QueryDict ç±»ä¼¼å­—å…¸çš„è‡ªå®šä¹‰ç±»ï¼Œç”¨æ¥å¤„ç†å•é”®å¯¹åº”å¤šå€¼çš„æƒ…å†µï¼Œå®ƒä¸ä»…å®ç°æ‰€æœ‰æ ‡å‡†çš„è¯å…¸æ–¹æ³•ï¼Œè¿˜åŒ…æ‹¬äº†ä¸€äº›ç‰¹æœ‰çš„æ–¹æ³•ï¼š</p>\n<ol>\n<li>\n<p><code>__getitem__(key)</code> ï¼šå’Œæ ‡å‡†å­—å…¸çš„å¤„ç†æœ‰ä¸€ç‚¹ä¸åŒï¼Œå°±æ˜¯ï¼Œå¦‚æœ Key å¯¹åº”å¤šä¸ª Valueï¼Œåˆ™ä¼šè¿”å›æœ€åä¸€ä¸ª valueã€‚</p>\n</li>\n<li>\n<p><code>__setitem__(key, value)</code> ï¼šè¿™é‡Œçš„ value æ˜¯ä¸€ä¸ª listï¼Œå®ƒåªèƒ½åœ¨ä¸€ä¸ª mutable QueryDict å¯¹è±¡ä¸Šè¢«è°ƒç”¨ï¼ˆå³é€šè¿‡ copy äº§ç”Ÿçš„ä¸€ä¸ª QueryDict å¯¹è±¡çš„æ‹·è´ï¼‰ã€‚</p>\n</li>\n<li>\n<p><code>get()</code> ï¼šå¦‚æœå¯¹åº”å¤šä¸ª valueï¼Œåˆ™è¿”å›æœ€åä¸€ä¸ªã€‚</p>\n</li>\n<li>\n<p><code>update()</code> ï¼šå‚æ•°å¯ä»¥æ˜¯ QueryDictï¼Œä¹Ÿå¯ä»¥æ˜¯æ ‡å‡†å­—å…¸ã€‚å’Œæ ‡å‡†å­—å…¸çš„ update æ–¹æ³•ä¸åŒï¼Œè¯¥æ–¹æ³•æ·»åŠ å­—å…¸ itemsï¼Œè€Œä¸æ˜¯æ›¿æ¢å®ƒä»¬ã€‚</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>q <span class=\"token operator\">=</span> QueryDict<span class=\"token punctuation\">(</span><span class=\"token string\">'a=1'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>q <span class=\"token operator\">=</span> q<span class=\"token punctuation\">.</span>copy<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># to make it mutable</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>q<span class=\"token punctuation\">.</span>update<span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span><span class=\"token string\">'a'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'2'</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>q<span class=\"token punctuation\">.</span>getlist<span class=\"token punctuation\">(</span><span class=\"token string\">'a'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># ['1', '2']</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>q<span class=\"token punctuation\">[</span><span class=\"token string\">'a'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># ['2'] # return the last one</span></pre></td></tr></table></figure></li>\n<li>\n<p><code>items()</code> ï¼šå’Œæ ‡å‡†å­—å…¸åŒåæ–¹æ³•æœ‰ä¸€ç‚¹ä¸åŒï¼Œè¯¥æ–¹æ³•ä½¿ç”¨å•å€¼é€»è¾‘çš„ <em>_getitem</em>_()ã€‚</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>q <span class=\"token operator\">=</span> QueryDict<span class=\"token punctuation\">(</span><span class=\"token string\">'a=1&amp;a=2&amp;a=3'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>q<span class=\"token punctuation\">.</span>items<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># [('a', '3')]</span></pre></td></tr></table></figure></li>\n<li>\n<p><code>values()</code> ï¼šåŒæ ·æ˜¯å•å€¼ã€‚</p>\n</li>\n<li>\n<p>copy</p>\n</li>\n<li>\n<p>getlist</p>\n</li>\n<li>\n<p>setlist</p>\n</li>\n<li>\n<p>appendlist</p>\n</li>\n<li>\n<p>setlistdefault</p>\n</li>\n<li>\n<p>lists</p>\n</li>\n<li>\n<p>urlencode</p>\n</li>\n</ol>\n<h3 id=\"django-è§†å›¾\"><a class=\"anchor\" href=\"#django-è§†å›¾\">#</a> Django è§†å›¾</h3>\n<p>ä¸€ä¸ªè§†å›¾å‡½æ•°ï¼Œç®€ç§°è§†å›¾ï¼Œæ˜¯ä¸€ä¸ªç®€å•çš„ Python å‡½æ•°ï¼Œå®ƒæ¥å— Web è¯·æ±‚å¹¶ä¸”è¿”å› Web å“åº”ã€‚å“åº”å¯ä»¥æ˜¯ä¸€ä¸ª HTML é¡µé¢ã€ä¸€ä¸ª 404 é”™è¯¯é¡µé¢ã€é‡å®šå‘é¡µé¢ã€XML æ–‡æ¡£ã€æˆ–è€…ä¸€å¼ å›¾ç‰‡ç­‰ã€‚è§†å›¾é€»è¾‘ä¸€èˆ¬æ”¾åœ¨é¡¹ç›®çš„ <span class=\"exturl\" data-url=\"aHR0cDovL3ZpZXdzLnB5\">views.py</span> æ–‡ä»¶ä¸­ï¼Œä½†å¹¶ä¸é™åˆ¶ã€‚</p>\n<p>è§†å›¾å“åº”æ–¹å¼åŒ…æ‹¬ï¼šHttpResponseã€renderã€redirectã€‚</p>\n<h4 id=\"httpresponse\"><a class=\"anchor\" href=\"#httpresponse\">#</a> HttpResponse</h4>\n<p>è¿”å›å­—ç¬¦ä¸²æ–‡æœ¬ï¼ŒåŒ…æ‹¬ html å½¢å¼çš„å­—ç¬¦ä¸²åœ¨å†…ã€‚</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>http <span class=\"token keyword\">import</span> HttpResponse</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">http_response_text</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">return</span> HttpResponse<span class=\"token punctuation\">(</span><span class=\"token string\">'Hello world!'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">http_response_html</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">return</span> HttpResponse<span class=\"token punctuation\">(</span><span class=\"token string\">'&lt;a href=\"https://www.chinmoku.cc\">ãƒãƒ³ãƒ¢ã‚¯ã®ãƒ–ãƒ­ã‚°&lt;/>'</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><blockquote>\n<p>HttpResponse è¿”å› html ä»£ç æ—¶ï¼Œä»£ç å†…å®¹ç”±æ¨¡æ¿è¿›è¡Œæ¸²æŸ“å¤„ç†ã€‚</p>\n</blockquote>\n<h4 id=\"render\"><a class=\"anchor\" href=\"#render\">#</a> render</h4>\n<p>è¿”å›æ–‡æœ¬ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸ºæ¨¡æ¿é¡µé¢åç§°ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°ä¸ºå­—å…¸ï¼ˆå¯é€‰ï¼‰ã€‚</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>shortcuts <span class=\"token keyword\">import</span> render</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">Home</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">,</span> age<span class=\"token punctuation\">,</span> name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    data <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span><span class=\"token string\">'name'</span><span class=\"token punctuation\">:</span> name<span class=\"token punctuation\">,</span> <span class=\"token string\">'age'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'age'</span><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">return</span> render<span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">,</span> <span class=\"token string\">\"home.html\"</span><span class=\"token punctuation\">,</span> data<span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>render åº•å±‚è¿”å›çš„ä¹Ÿæ˜¯ HttpResponse å¯¹è±¡ã€‚</p>\n<h4 id=\"redirect\"><a class=\"anchor\" href=\"#redirect\">#</a> redirect</h4>\n<p>é‡å®šå‘ï¼Œè·³è½¬æ–°é¡µé¢ã€‚å‚æ•°ä¸ºå­—ç¬¦ä¸²ï¼Œå­—ç¬¦ä¸²ä¸­å¡«å†™é¡µé¢è·¯å¾„ã€‚ä¸€èˆ¬ç”¨äº form è¡¨å•æäº¤åï¼Œè·³è½¬åˆ°æ–°é¡µé¢ã€‚</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>shortcuts <span class=\"token keyword\">import</span> redirect</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">to_index</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">return</span> redirect<span class=\"token punctuation\">(</span><span class=\"token string\">'/index/'</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>redirect åº•å±‚ç»§æ‰¿è‡ª HttpResponseã€‚</p>\n<h4 id=\"jsonresponse\"><a class=\"anchor\" href=\"#jsonresponse\">#</a> JsonResponse</h4>\n<p>JsonResponse è¿”å›æ ‡å‡† JSONï¼Œä¸ HttpResponse ä¸åŒçš„æ˜¯ï¼ŒJsonResponse æ— éœ€æ‰‹åŠ¨è¿›è¡Œåºåˆ—åŒ–ä¸ååºåˆ—åŒ–ã€‚HttpResponse å­—ç¬¦ä¸² JSON åˆ™éœ€è¦å¯¹åºåˆ—åŒ–å’Œååºåˆ—åŒ–æ‰‹åŠ¨è¿›è¡Œå¤„ç†ã€‚</p>\n<h3 id=\"django-è·¯ç”±\"><a class=\"anchor\" href=\"#django-è·¯ç”±\">#</a> Django è·¯ç”±</h3>\n<p>è·¯ç”±ç®€å•çš„æ¥è¯´å°±æ˜¯æ ¹æ®ç”¨æˆ·è¯·æ±‚çš„ URL é“¾æ¥æ¥åˆ¤æ–­å¯¹åº”çš„å¤„ç†ç¨‹åºï¼Œå¹¶è¿”å›å¤„ç†ç»“æœï¼Œä¹Ÿå°±æ˜¯ URL ä¸ Django çš„è§†å›¾å»ºç«‹æ˜ å°„å…³ç³»ã€‚Django è·¯ç”±åœ¨ <span class=\"exturl\" data-url=\"aHR0cDovL3VybHMucHk=\">urls.py</span> é…ç½®ï¼Œ<span class=\"exturl\" data-url=\"aHR0cDovL3VybHMucHk=\">urls.py</span> ä¸­çš„æ¯ä¸€æ¡é…ç½®å¯¹åº”ç›¸åº”çš„å¤„ç†æ–¹æ³•ã€‚</p>\n<h4 id=\"è·¯ç”±é…ç½®æ–¹å¼\"><a class=\"anchor\" href=\"#è·¯ç”±é…ç½®æ–¹å¼\">#</a> è·¯ç”±é…ç½®æ–¹å¼</h4>\n<ol>\n<li>\n<p>Django 1.1.x</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>conf<span class=\"token punctuation\">.</span>urls <span class=\"token keyword\">import</span> url <span class=\"token comment\"># ç”¨ url éœ€è¦å¼•å…¥</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>urlpatterns <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    url<span class=\"token punctuation\">(</span><span class=\"token string\">r'^admin/$'</span><span class=\"token punctuation\">,</span> admin<span class=\"token punctuation\">.</span>site<span class=\"token punctuation\">.</span>urls<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    url<span class=\"token punctuation\">(</span><span class=\"token string\">r'^index/$'</span><span class=\"token punctuation\">,</span> views<span class=\"token punctuation\">.</span>Index<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token comment\"># æ™®é€šè·¯å¾„</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    url<span class=\"token punctuation\">(</span><span class=\"token string\">r'^articles/([0-9]&#123;4&#125;)/$'</span><span class=\"token punctuation\">,</span> views<span class=\"token punctuation\">.</span>Articles<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token comment\"># æ­£åˆ™è·¯å¾„</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token punctuation\">]</span></pre></td></tr></table></figure></li>\n<li>\n<p>Django 2.2.x+</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>urls <span class=\"token keyword\">import</span> re_path <span class=\"token comment\"># ç”¨ re_path éœ€è¦å¼•å…¥</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>urlpatterns <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    path<span class=\"token punctuation\">(</span><span class=\"token string\">'admin/'</span><span class=\"token punctuation\">,</span> admin<span class=\"token punctuation\">.</span>site<span class=\"token punctuation\">.</span>urls<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    path<span class=\"token punctuation\">(</span><span class=\"token string\">'index/'</span><span class=\"token punctuation\">,</span> views<span class=\"token punctuation\">.</span>index<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token comment\"># æ™®é€šè·¯å¾„</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    re_path<span class=\"token punctuation\">(</span><span class=\"token string\">r'^articles/([0-9]&#123;4&#125;)/$'</span><span class=\"token punctuation\">,</span> views<span class=\"token punctuation\">.</span>articles<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token comment\"># æ­£åˆ™è·¯å¾„ï¼ˆç‰ˆæœ¬å‘ä¸‹å…¼å®¹ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ url ()ï¼‰</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token punctuation\">]</span></pre></td></tr></table></figure><ul>\n<li>pathï¼šç”¨äºæ™®é€šè·¯å¾„ï¼Œä¸éœ€è¦è‡ªå·±æ‰‹åŠ¨æ·»åŠ æ­£åˆ™é¦–ä½é™åˆ¶ç¬¦å·ï¼Œåº•å±‚å·²ç»æ·»åŠ ã€‚</li>\n<li>re_pathï¼šç”¨äºæ­£åˆ™è·¯å¾„ï¼Œéœ€è¦è‡ªå·±æ‰‹åŠ¨æ·»åŠ æ­£åˆ™é¦–ä½é™åˆ¶ç¬¦å·ã€‚</li>\n</ul>\n</li>\n</ol>\n<h4 id=\"æ­£åˆ™è·¯ç”±\"><a class=\"anchor\" href=\"#æ­£åˆ™è·¯ç”±\">#</a> æ­£åˆ™è·¯ç”±</h4>\n<ol>\n<li>\n<p>æ­£åˆ™è·¯å¾„ä¸­çš„æ— ååˆ†ç»„</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># mydjango/app/urls.py</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>conf<span class=\"token punctuation\">.</span>urls <span class=\"token keyword\">import</span> re_path</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">from</span> <span class=\"token punctuation\">.</span> <span class=\"token keyword\">import</span> views</pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>urlpatterns <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    path<span class=\"token punctuation\">(</span><span class=\"token string\">'home/&lt;str:name>/&lt;int:age>'</span><span class=\"token punctuation\">,</span> views<span class=\"token punctuation\">.</span>Home<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    re_path<span class=\"token punctuation\">(</span><span class=\"token string\">r\"^index/(?P&lt;age>[0-9]&#123;2&#125;)/(?P&lt;name>[A-Z]&#123;2&#125;)/\"</span><span class=\"token punctuation\">,</span> views<span class=\"token punctuation\">.</span>Home<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token punctuation\">]</span></pre></td></tr></table></figure><p>è§†å›¾å¤„ç†ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>shortcuts <span class=\"token keyword\">import</span> render</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>shortcuts <span class=\"token keyword\">import</span> HttpResponse</pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">Articles</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">,</span> year<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>year<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># ä¸€ä¸ªå½¢å‚ä»£è¡¨è·¯å¾„ä¸­ä¸€ä¸ªåˆ†ç»„çš„å†…å®¹ï¼ŒæŒ‰é¡ºåºåŒ¹é…</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    articleId <span class=\"token operator\">=</span> request<span class=\"token punctuation\">.</span>GET<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">'articleId'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">''</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># è·å–éè·¯å¾„å‚æ•°çš„ get å‚æ•°</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>articleId<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token comment\"># ... å¤„ç†é€»è¾‘</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token keyword\">return</span> HttpResponse<span class=\"token punctuation\">(</span><span class=\"token string\">'Django tutorial!'</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure></li>\n<li>\n<p>æ­£åˆ™è·¯å¾„ä¸­çš„æœ‰ååˆ†ç»„</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># mydjango/app/urls.py</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>conf<span class=\"token punctuation\">.</span>urls <span class=\"token keyword\">import</span> re_path</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">from</span> <span class=\"token punctuation\">.</span> <span class=\"token keyword\">import</span> views</pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>urlpatterns <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    path<span class=\"token punctuation\">(</span><span class=\"token string\">'home/&lt;str:name>/&lt;int:age>'</span><span class=\"token punctuation\">,</span> views<span class=\"token punctuation\">.</span>Home<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    re_path<span class=\"token punctuation\">(</span><span class=\"token string\">r\"^home2/(?P&lt;age>[0-9]&#123;2&#125;)/(?P&lt;name>[A-Z]&#123;2&#125;)/\"</span><span class=\"token punctuation\">,</span> views<span class=\"token punctuation\">.</span>Home<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token punctuation\">]</span></pre></td></tr></table></figure><p>è§†å›¾å¤„ç†ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>shortcuts <span class=\"token keyword\">import</span> render</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>shortcuts <span class=\"token keyword\">import</span> HttpResponse</pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">Home</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">,</span> age<span class=\"token punctuation\">,</span> name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    data <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span><span class=\"token string\">'name'</span><span class=\"token punctuation\">:</span> name<span class=\"token punctuation\">,</span> <span class=\"token string\">'age'</span><span class=\"token punctuation\">:</span> age<span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">return</span> render<span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">,</span> <span class=\"token string\">\"home.html\"</span><span class=\"token punctuation\">,</span> data<span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>æœ‰ååˆ†ç»„ä¼šåœ¨è·¯ç”±ä¸­æŒ‡å®šå‚æ•°åç§°ï¼Œè§†å›¾è§£ææ—¶åˆ™ä¸éœ€è¦æŒ‰ç…§è§„å®šé¡ºåºï¼Œåªéœ€è¦æ ¹æ®åç§°è¿›è¡ŒåŒ¹é…å³å¯ã€‚</p>\n</li>\n<li>\n<p>è·¯ç”±åˆ†å‘</p>\n<p>Django é¡¹ç›®ä¸­å¤šä¸ª app å…±ç”¨ä¸€ä¸ª <span class=\"exturl\" data-url=\"aHR0cDovL3VybHMucHk=\">urls.py</span> å®¹æ˜“é€ æˆæ··æ·†ï¼Œå› æ­¤ï¼Œæ¯ä¸ª app å¯ä»¥æ‹¥æœ‰è‡ªå·±çš„ <span class=\"exturl\" data-url=\"aHR0cDovL3VybHMucHk=\">urls.py</span> æ–‡ä»¶é…ç½®è·¯ç”±ã€‚</p>\n<p>è€Œåœ¨é¡¹ç›®è·¯ç”±ä¸­ï¼Œåªéœ€è¦é€šè¿‡å¦‚ä¸‹æ–¹å¼é…ç½®è·¯ç”±åˆ†å‘å³å¯ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>urls <span class=\"token keyword\">import</span> path<span class=\"token punctuation\">,</span> include</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>urlpatterns <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    path<span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">,</span> include<span class=\"token punctuation\">(</span><span class=\"token string\">'app.urls'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token punctuation\">]</span></pre></td></tr></table></figure></li>\n</ol>\n<h4 id=\"åå‘è§£æ\"><a class=\"anchor\" href=\"#åå‘è§£æ\">#</a> åå‘è§£æ</h4>\n<p>åœ¨è·¯ç”±é…ç½®ä¸­ï¼ŒæŒ‡å®šè·¯ç”±çš„  <code>name</code>  å±æ€§ï¼Œå³å¯è®¾ç½®åå‘è§£æçš„å‚è€ƒç‚¹ï¼Œä¾‹å¦‚ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># mydjango/app/urls.py</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>conf<span class=\"token punctuation\">.</span>urls <span class=\"token keyword\">import</span> url</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>urls <span class=\"token keyword\">import</span> path</pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">from</span> <span class=\"token punctuation\">.</span> <span class=\"token keyword\">import</span> views</pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>urlpatterns <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    path<span class=\"token punctuation\">(</span><span class=\"token string\">'index/'</span><span class=\"token punctuation\">,</span> views<span class=\"token punctuation\">.</span>Index<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    path<span class=\"token punctuation\">(</span><span class=\"token string\">'search-form/'</span><span class=\"token punctuation\">,</span> views<span class=\"token punctuation\">.</span>Index<span class=\"token punctuation\">,</span> name<span class=\"token operator\">=</span><span class=\"token string\">'toForm'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token punctuation\">]</span></pre></td></tr></table></figure><p>åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨ï¼š</p>\n<figure class=\"highlight html\"><figcaption data-lang=\"HTML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">&lt;!-- mydjango/templates/index.html --></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>&#123;.% url <span class=\"token punctuation\">'</span>toForm<span class=\"token punctuation\">'</span> %&#125;<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>å¡«å†™ä¿¡æ¯<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p>ç‚¹å‡»é“¾æ¥å³å¯å°†è¯·æ±‚å‘é€åˆ° views.Index è¿›è¡Œå¤„ç†ã€‚</p>\n<p>åœ¨è§†å›¾ä¸­ä½¿ç”¨ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># mydjango/app/views.py</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>shortcuts <span class=\"token keyword\">import</span> render<span class=\"token punctuation\">,</span> redirect</pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">redirectForm</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">return</span> redirect<span class=\"token punctuation\">(</span><span class=\"token builtin\">reversed</span><span class=\"token punctuation\">(</span><span class=\"token string\">'toForm'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>å½“æŸä¸€è¯·æ±‚è°ƒç”¨æ‰§è¡Œ redirectForm æ—¶ï¼Œå°±ä¼šé‡å®šå‘åˆ° views.Index è¿›è¡Œåç»­å¤„ç†ã€‚</p>\n<p>åœ¨åå‘è§£æè·¯ç”±æ—¶ï¼ŒåŒæ ·å¯ä»¥ä¼ é€’å‚æ•°ï¼ŒåŒ…æ‹¬æœ‰åå’Œæ— ååˆ†ç»„åœ¨å†…ï¼Œä¼ é€’å‚æ•°æ–¹å¼å¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight html\"><figcaption data-lang=\"HTML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>&#123;.% url <span class=\"token punctuation\">'</span>toForm<span class=\"token punctuation\">'</span> 19 %&#125;<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>å¡«å†™ä¿¡æ¯<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>&#123;.% url <span class=\"token punctuation\">'</span>toForm<span class=\"token punctuation\">'</span> age=19 %&#125;<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>å¡«å†™ä¿¡æ¯<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p>åœ¨è§†å›¾ä¸­åå‘è§£ææ—¶ä¼ é€’å‚æ•°ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># mydjango/app/views.py</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>shortcuts <span class=\"token keyword\">import</span> render<span class=\"token punctuation\">,</span> redirect</pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">redirectForm</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">return</span> redirect<span class=\"token punctuation\">(</span><span class=\"token builtin\">reversed</span><span class=\"token punctuation\">(</span><span class=\"token string\">'toForm'</span><span class=\"token punctuation\">,</span> args<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span><span class=\"token number\">19</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># æ— ååˆ†ç»„</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token comment\"># return redirect (reversed ('toForm', kwargs=&#123;'age': 19&#125;))  # æ— ååˆ†ç»„</span></pre></td></tr></table></figure><blockquote>\n<p>è·¯ç”±åˆ«å name æ²¡æœ‰ä½œç”¨åŸŸï¼ŒDjango åœ¨åå‘è§£æ URL æ—¶ï¼Œä¼šåœ¨é¡¹ç›®å…¨å±€é¡ºåºæœç´¢ï¼Œå½“æŸ¥æ‰¾åˆ°ç¬¬ä¸€ä¸ªè·¯ç”±åˆ«å name æŒ‡å®š URL æ—¶ï¼Œç«‹å³è¿”å›ã€‚å½“åœ¨ä¸åŒçš„ app ç›®å½•ä¸‹çš„ urls ä¸­å®šä¹‰ç›¸åŒçš„è·¯ç”±åˆ«å name æ—¶ï¼Œå¯èƒ½ä¼šå¯¼è‡´ URL åå‘è§£æé”™è¯¯ã€‚</p>\n</blockquote>\n<h4 id=\"å‘½åç©ºé—´\"><a class=\"anchor\" href=\"#å‘½åç©ºé—´\">#</a> å‘½åç©ºé—´</h4>\n<p>å‘½åç©ºé—´æ˜¯è¡¨ç¤ºæ ‡è¯†ç¬¦çš„å¯è§èŒƒå›´ã€‚</p>\n<ul>\n<li>ä¸€ä¸ªæ ‡è¯†ç¬¦å¯åœ¨å¤šä¸ªå‘½åç©ºé—´ä¸­å®šä¹‰ï¼Œå®ƒåœ¨ä¸åŒå‘½åç©ºé—´ä¸­çš„å«ä¹‰æ˜¯äº’ä¸ç›¸å¹²çš„ã€‚</li>\n<li>ä¸€ä¸ªæ–°çš„å‘½åç©ºé—´ä¸­å¯å®šä¹‰ä»»ä½•æ ‡è¯†ç¬¦ï¼Œå®ƒä»¬ä¸ä¼šä¸ä»»ä½•é‡å¤çš„æ ‡è¯†ç¬¦å‘ç”Ÿå†²çªï¼Œå› ä¸ºé‡å¤çš„å®šä¹‰éƒ½å¤„äºå…¶å®ƒå‘½åç©ºé—´ä¸­ã€‚</li>\n</ul>\n<p>ç”±äºè·¯ç”±åˆ«åæ²¡æœ‰ä½œç”¨äºï¼Œå› æ­¤å¤šä¸ª app å­˜åœ¨åŒååˆ«åæ—¶ï¼Œä¼šå¯¼è‡´åå‘è§£æé”™è¯¯ï¼Œä½†å¦‚æœå¯¹å…¶é™å®šå‘½åç©ºé—´ï¼Œå°±å¯ä»¥é¿å…è¯¥é”™è¯¯ã€‚</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># mydjango/mydjango/urls.py</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>urls <span class=\"token keyword\">import</span> path<span class=\"token punctuation\">,</span> include</pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>urlpatterns <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    path<span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">,</span> include<span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token string\">'app.urls'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'app'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token punctuation\">]</span></pre></td></tr></table></figure><p>åœ¨å­è·¯ç”±ä¸­æŒ‡å®šåå‘è§£æåˆ«åï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># mydjango/app/urls.py</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>urls <span class=\"token keyword\">import</span> path</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">from</span> <span class=\"token punctuation\">.</span> <span class=\"token keyword\">import</span> views</pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>urlpatterns <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    path<span class=\"token punctuation\">(</span><span class=\"token string\">'search-form/'</span><span class=\"token punctuation\">,</span> views<span class=\"token punctuation\">.</span>Index<span class=\"token punctuation\">,</span> name<span class=\"token operator\">=</span><span class=\"token string\">'toForm'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token punctuation\">]</span></pre></td></tr></table></figure><p>æ­¤æ—¶ä½¿ç”¨å¦‚ä¸‹æ–¹å¼è¿›è¡Œè·¯ç”±åå‘è§£æï¼Œåˆ™åªä¼šåœ¨å‘½åç©ºé—´æŒ‡å®šçš„ app ä¸‹æŸ¥æ‰¾è·¯ç”±ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># mydjango/app/views.py</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>shortcuts <span class=\"token keyword\">import</span> render<span class=\"token punctuation\">,</span> redirect</pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">redirectForm</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">return</span> redirect<span class=\"token punctuation\">(</span><span class=\"token builtin\">reversed</span><span class=\"token punctuation\">(</span><span class=\"token string\">'app:toForm'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>åœ¨æ¨¡æ¿ä¸­çš„ä½¿ç”¨æ–¹å¼ä¹Ÿæ˜¯ç±»ä¼¼ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token operator\">&lt;</span>!<span class=\"token operator\">-</span><span class=\"token operator\">-</span>swigï¿¼<span class=\"token number\">12</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span><span class=\"token operator\">&lt;</span>a href<span class=\"token operator\">=</span><span class=\"token string\">\"&#123;.% url 'app:toForm' 19 %&#125;\"</span><span class=\"token operator\">></span>å¡«å†™ä¿¡æ¯<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>a<span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span></pre></td></tr></table></figure><h3 id=\"django-admin\"><a class=\"anchor\" href=\"#django-admin\">#</a> Django Admin</h3>\n<h4 id=\"é…ç½®\"><a class=\"anchor\" href=\"#é…ç½®\">#</a> é…ç½®</h4>\n<p>Django æä¾›äº†åŸºäº web çš„ç®¡ç†å·¥å…·ã€‚Django è‡ªåŠ¨ç®¡ç†å·¥å…·æ˜¯ django.contrib çš„ä¸€éƒ¨åˆ†ã€‚Django Admin é»˜è®¤æƒ…å†µä¸‹å³è¢«æ³¨å†Œå¯ç”¨ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># mydjango/mydjango/settings.py</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>INSTALLED_APPS <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token string\">'django.contrib.admin'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token string\">'django.contrib.auth'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token string\">'django.contrib.contenttypes'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token string\">'django.contrib.sessions'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token string\">'django.contrib.messages'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token string\">'django.contrib.staticfiles'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token punctuation\">]</span></pre></td></tr></table></figure><p>å¦‚éœ€ä½¿ç”¨ï¼Œåªéœ€åœ¨è·¯ç”±ä¸­è¿›è¡ŒæŒ‡å®šå³å¯ï¼ˆé€šå¸¸åˆ›å»ºé¡¹ç›®æ—¶é»˜è®¤å³æŒ‡å®šäº†ï¼‰ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># mydjango/mydjango/urls.py</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>conf<span class=\"token punctuation\">.</span>urls <span class=\"token keyword\">import</span> url</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>contrib <span class=\"token keyword\">import</span> admin</pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>urlpatterns <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    url<span class=\"token punctuation\">(</span><span class=\"token string\">r'^admin/'</span><span class=\"token punctuation\">,</span> admin<span class=\"token punctuation\">.</span>site<span class=\"token punctuation\">.</span>urls<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token punctuation\">]</span></pre></td></tr></table></figure><p>é€šè¿‡è®¿é—® <span class=\"exturl\" data-url=\"aHR0cDovLzEyNy4wLjAuMTo4MDAwL2FkbWluLw==\">http://127.0.0.1:8000/admin/</span> å³å¯è·³è½¬ç™»å½•ç•Œé¢ã€‚</p>\n<h4 id=\"ç™»å½•ä¸ä½¿ç”¨\"><a class=\"anchor\" href=\"#ç™»å½•ä¸ä½¿ç”¨\">#</a> ç™»å½•ä¸ä½¿ç”¨</h4>\n<p>å¯ä»¥é€šè¿‡å‘½ä»¤  <code>python3 manage.py createsuperuser</code>  æ¥åˆ›å»ºè¶…çº§ç”¨æˆ·ï¼Œåˆ›å»ºæˆåŠŸåï¼Œå³å¯ç™»å½•ï¼Œç™»å½•æˆåŠŸåå°†è·³è½¬å¦‚ä¸‹é¡µé¢ï¼š</p>\n<p><img data-src=\"https://img.xfc-exclave.com/2021/10/08daa75223cafee969ae81742a4186b61635348370.png\" alt=\"image-20211027232541350\" /></p>\n<p>å¦‚éœ€åœ¨ admin ç•Œé¢ç®¡ç†æŸä¸ªæ•°æ®æ¨¡å‹ï¼Œåªéœ€è¦åœ¨åº”ç”¨ä¸‹çš„ <span class=\"exturl\" data-url=\"aHR0cDovL2FkbWluLnB5\">admin.py</span> æ–‡ä»¶ä¸­æ³¨å†Œå¯¹åº”çš„æ•°æ®æ¨¡å‹å³å¯ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>contrib <span class=\"token keyword\">import</span> admin</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">from</span> app<span class=\"token punctuation\">.</span>models <span class=\"token keyword\">import</span> Test</pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\"># Register your models here.</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>admin<span class=\"token punctuation\">.</span>site<span class=\"token punctuation\">.</span>register<span class=\"token punctuation\">(</span>Test<span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>ç„¶ååˆ·æ–° admin ç•Œé¢ï¼Œå³å¯çœ‹åˆ°å¯¹åº”çš„æ•°æ®æ¨¡å‹ã€‚</p>\n<h4 id=\"è‡ªå®šä¹‰è¡¨å•\"><a class=\"anchor\" href=\"#è‡ªå®šä¹‰è¡¨å•\">#</a> è‡ªå®šä¹‰è¡¨å•</h4>\n<blockquote>\n<p>è‡ªè¡Œæ‘¸ç´¢å§ï¼Œæ„Ÿè§‰æ²¡å•¥æ„æ€ã€‚</p>\n</blockquote>\n<h3 id=\"django-orm\"><a class=\"anchor\" href=\"#django-orm\">#</a> Django ORM</h3>\n<h4 id=\"å•è¡¨å®ä¾‹\"><a class=\"anchor\" href=\"#å•è¡¨å®ä¾‹\">#</a> å•è¡¨å®ä¾‹</h4>\n<ol>\n<li>\n<p>å‡†å¤‡å·¥ä½œ</p>\n<p>æ³¨å†Œå½“å‰åº”ç”¨ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># mydjango/mydjango/settings.py</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>INSTALLED_APPS <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token string\">'django.contrib.admin'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token string\">'django.contrib.auth'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token string\">'django.contrib.contenttypes'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token string\">'django.contrib.sessions'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token string\">'django.contrib.messages'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token string\">'django.contrib.staticfiles'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token string\">'app01'</span><span class=\"token punctuation\">,</span>  <span class=\"token comment\"># æ·»åŠ æ­¤é¡¹</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>æŒ‡å®šæ•°æ®åº“è¿æ¥ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># mydjango/mydjango/__init__.py</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> pymysql</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>pymysql<span class=\"token punctuation\">.</span>install_as_MySQLdb<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure></li>\n<li>\n<p>åˆ›å»ºæ¨¡å‹</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># mydjango/app/models.py</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>db <span class=\"token keyword\">import</span> models</pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">Book</span><span class=\"token punctuation\">(</span>models<span class=\"token punctuation\">.</span>Model<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token builtin\">id</span> <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>AutoField<span class=\"token punctuation\">(</span>primary_key<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># id ä¼šè‡ªåŠ¨åˆ›å»ºï¼Œå¯ä»¥æ‰‹åŠ¨å†™å…¥</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    title <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>CharField<span class=\"token punctuation\">(</span>max_length<span class=\"token operator\">=</span><span class=\"token number\">32</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># ä¹¦ç±åç§°</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    price <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>DecimalField<span class=\"token punctuation\">(</span>max_digits<span class=\"token operator\">=</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span> decimal_places<span class=\"token operator\">=</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># ä¹¦ç±ä»·æ ¼</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    publish <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>CharField<span class=\"token punctuation\">(</span>max_length<span class=\"token operator\">=</span><span class=\"token number\">32</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># å‡ºç‰ˆç¤¾åç§°</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    pub_date <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>DateField<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># å‡ºç‰ˆæ—¶é—´</span></pre></td></tr></table></figure><p>æ‰§è¡Œæ•°æ®è¿ç§»å‘½ä»¤ï¼š</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>python3 manage.py migrate  <span class=\"token comment\"># åˆ›å»ºè¡¨ç»“æ„</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>python3 manage.py makemigrations app  <span class=\"token comment\"># è®© Django çŸ¥é“æˆ‘ä»¬åœ¨æˆ‘ä»¬çš„æ¨¡å‹æœ‰ä¸€äº›å˜æ›´</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>python3 manage.py migrate app  <span class=\"token comment\"># åˆ›å»ºè¡¨ç»“æ„</span></pre></td></tr></table></figure><p>æ‰§è¡Œå®Œæ¯•åï¼Œæ•°æ®åº“ä¼šç”Ÿæˆä¸€å¼   <code>app_book</code>  è¡¨ã€‚</p>\n</li>\n<li>\n<p>æ–°å¢æ•°æ®</p>\n<p>ç¼–å†™æ–°å¢æ•°æ®çš„è§†å›¾å‡½æ•°ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># mydjango/app/views.py</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>http <span class=\"token keyword\">import</span> HttpResponse</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">from</span> app <span class=\"token keyword\">import</span> models</pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">add_book</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    book <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>Book<span class=\"token punctuation\">(</span>title<span class=\"token operator\">=</span><span class=\"token string\">\"æ•é±¼å¥³\"</span><span class=\"token punctuation\">,</span> price<span class=\"token operator\">=</span><span class=\"token number\">35.00</span><span class=\"token punctuation\">,</span> publish<span class=\"token operator\">=</span><span class=\"token string\">\"æ±Ÿè‹å‡¤å‡°æ–‡è‰ºå‡ºç‰ˆç¤¾\"</span><span class=\"token punctuation\">,</span> pub_date<span class=\"token operator\">=</span><span class=\"token string\">\"2015-10-01\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    book<span class=\"token punctuation\">.</span>save<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token keyword\">return</span> HttpResponse<span class=\"token punctuation\">(</span><span class=\"token string\">'&lt;p>&lt;script>alert(\"æ•°æ®æ·»åŠ æˆåŠŸï¼\")&lt;/script>&lt;/p>'</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>é…ç½®è·¯ç”±è§„åˆ™ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># mydjango/app/urls.py</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>urls <span class=\"token keyword\">import</span> path</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">from</span> <span class=\"token punctuation\">.</span> <span class=\"token keyword\">import</span> views</pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>urlpatterns <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    path<span class=\"token punctuation\">(</span><span class=\"token string\">'book/add/'</span><span class=\"token punctuation\">,</span> views<span class=\"token punctuation\">.</span>add_book<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token punctuation\">]</span></pre></td></tr></table></figure><p>æµè§ˆå™¨è®¿é—® <span class=\"exturl\" data-url=\"aHR0cDovLzEyNy4wLjAuMTo4MDAw\">http://127.0.0.1:8000</span> å³å¯åœ¨å‘æ•°æ®åº“ä¸­æ–°å¢ä¸€æ¡è®°å½•ã€‚</p>\n<p>æ­¤å¤–ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å¦‚ä¸‹æ–¹å¼æ–°å¢æ•°æ®ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>books <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>Book<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>create<span class=\"token punctuation\">(</span>title<span class=\"token operator\">=</span><span class=\"token string\">\"æ—¥æœ¬æ–‡å­¦å²\"</span><span class=\"token punctuation\">,</span> price<span class=\"token operator\">=</span><span class=\"token number\">48.00</span><span class=\"token punctuation\">,</span> publish<span class=\"token operator\">=</span><span class=\"token string\">\"è¯‘æ—å‡ºç‰ˆç¤¾\"</span><span class=\"token punctuation\">,</span> pub_date<span class=\"token operator\">=</span><span class=\"token string\">\"2020-06-01\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>books<span class=\"token punctuation\">,</span> <span class=\"token builtin\">type</span><span class=\"token punctuation\">(</span>books<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># Book object (4)</span></pre></td></tr></table></figure></li>\n<li>\n<p>æŸ¥è¯¢æ•°æ®</p>\n<ul>\n<li>\n<p>æŸ¥è¯¢åˆ—è¡¨</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">get_books</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    books <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>Book<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span><span class=\"token builtin\">all</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>books<span class=\"token punctuation\">,</span> <span class=\"token builtin\">type</span><span class=\"token punctuation\">(</span>books<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># QuerySet ç±»å‹</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">return</span> HttpResponse<span class=\"token punctuation\">(</span><span class=\"token string\">'&lt;p>&lt;script>alert(\"æ•°æ®åˆ—è¡¨æŸ¥è¯¢æˆåŠŸï¼\")&lt;/script>&lt;/p>'</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure></li>\n<li>\n<p>è¿‡æ»¤æŸ¥è¯¢</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">get_book</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">,</span> book_id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    books <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>Book<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span><span class=\"token builtin\">filter</span><span class=\"token punctuation\">(</span>pk<span class=\"token operator\">=</span>book_id<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># è¿™é‡Œ pk ç›¸å½“äº primary keyï¼Œå› ä¸º id æœ‰å…¶ä»–ç‰¹æ®Šæ„ä¹‰æ‰€ä»¥ä½¿ç”¨ pk æ›¿ä»£ id</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token comment\"># books = models.Book.objects.filter(price__lt=40.00)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token comment\"># books = models.Book.objects.filter (title__iendswith=' æ–‡å­¦å² ')</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>books<span class=\"token punctuation\">,</span> <span class=\"token builtin\">type</span><span class=\"token punctuation\">(</span>books<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># QuerySet ç±»å‹</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">for</span> book <span class=\"token keyword\">in</span> books<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>book<span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token keyword\">return</span> HttpResponse<span class=\"token punctuation\">(</span><span class=\"token string\">'&lt;p>&lt;script>alert(\"æ•°æ®åˆ—è¡¨è¿‡æ»¤æŸ¥è¯¢æˆåŠŸï¼\")&lt;/script>&lt;/p>'</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>filter ä¹Ÿå†…ç½®äº†ä¸€äº›å…¶ä»–å¸¸ç”¨çš„ç­›é€‰æ–¹å¼ï¼Œé€šè¿‡å¦‚ä¸‹æç¤ºå³å¯æŸ¥çœ‹ï¼š</p>\n<p><img data-src=\"https://img.xfc-exclave.com/2021/11/51fe7dd6bd601bbe7f2d413faa24f0dc1635813491.png\" alt=\"image-20211101204130217\" /></p>\n<p>å…³äºè¿‡æ»¤è§„åˆ™åŠå…¶æ„ä¹‰ï¼Œå¯ä»¥<span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuamI1MS5uZXQvYXJ0aWNsZS8xODI3NjcuaHRt\">ç‚¹å‡»æ­¤å¤„</span>ä½œä¸ºå‚è€ƒï¼Œè¿™é‡Œä¸åå¤ä¹¦å†™ç¤ºä¾‹ã€‚</p>\n<blockquote>\n<p>filter ä¸­åªèƒ½ä½¿ç”¨  <code>=</code> ï¼Œæ— æ³•ä½¿ç”¨å¤§äºå°äºç­‰å…¶ä»–æ¯”è¾ƒç¬¦å·ã€‚ä½†æ˜¯ï¼Œå¯ä»¥ä½¿ç”¨  <code>__gt</code>  è¿™æ ·çš„æ–¹å¼æ¥é—´æ¥è¡¨ç¤ºã€‚</p>\n</blockquote>\n</li>\n<li>\n<p>åå‘æŸ¥è¯¢</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># æŸ¥è¯¢ä¸ç¬¦åˆæ¡ä»¶ï¼ˆpk=book_idï¼‰çš„æ‰€æœ‰æ•°æ®</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>books <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>Book<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>exclude<span class=\"token punctuation\">(</span>pk<span class=\"token operator\">=</span>book_id<span class=\"token punctuation\">)</span></pre></td></tr></table></figure></li>\n<li>\n<p>å•æ¡æŸ¥è¯¢</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>book <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>Book<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span>pk<span class=\"token operator\">=</span>book_id<span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>å•æ¡æŸ¥è¯¢çš„æŸ¥è¯¢æ¡ä»¶ä¸ä¸€å®šæ˜¯ä¸»é”®ï¼Œä½†å¿…é¡»ä¿è¯æŸ¥è¯¢ç»“æœæ˜¯å•ä¸€çš„ï¼Œå¦åˆ™ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚</p>\n</li>\n<li>\n<p>æ’åº</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>books <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>Book<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span><span class=\"token builtin\">filter</span><span class=\"token punctuation\">(</span>price__lt<span class=\"token operator\">=</span><span class=\"token number\">40.00</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>order_by<span class=\"token punctuation\">(</span><span class=\"token string\">'title'</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># å‡åº</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\"># books = models.Book.objects.filter (price__lt=40.00).order_by ('-title')  # é™åºï¼ˆåœ¨æ¡ä»¶å‰æ·»åŠ è´Ÿå· â€œ-â€ å³å¯ï¼‰</span></pre></td></tr></table></figure></li>\n<li>\n<p>æ’åºç¿»è½¬</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>books <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>Book<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span><span class=\"token builtin\">filter</span><span class=\"token punctuation\">(</span>price__lt<span class=\"token operator\">=</span><span class=\"token number\">40.00</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>order_by<span class=\"token punctuation\">(</span><span class=\"token string\">'title'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>reverse<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># å°†åŸæœ¬çš„æ’åºè¿›è¡Œç¿»è½¬</span></pre></td></tr></table></figure></li>\n<li>\n<p>è®¡æ•°</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>count <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>Book<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span><span class=\"token builtin\">filter</span><span class=\"token punctuation\">(</span>price__gt<span class=\"token operator\">=</span><span class=\"token number\">40.00</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>count<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>count<span class=\"token punctuation\">,</span> <span class=\"token builtin\">type</span><span class=\"token punctuation\">(</span>count<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># int ç±»å‹</span></pre></td></tr></table></figure></li>\n<li>\n<p>æŸ¥è¯¢ç¬¬ä¸€æ¡</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>books <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>Book<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>first<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># è¿”å›æ‰€æœ‰æ•°æ®çš„ç¬¬ä¸€æ¡æ•°æ®</span></pre></td></tr></table></figure><p>å…¶å®å°±æ˜¯åœ¨æ‰€æœ‰æŸ¥è¯¢çš„æ•°æ®åˆ—è¡¨ä¸­ï¼Œå–ä¸‹æ ‡ä¸º 0 çš„æ•°æ®ã€‚</p>\n</li>\n<li>\n<p>æŸ¥è¯¢æœ€åä¸€æ¡ï¼ˆåŒä¸Šï¼‰</p>\n</li>\n<li>\n<p>ä»…æŸ¥è¯¢æŒ‡å®šçš„å­—æ®µ</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>book_vals <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>Book<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>values<span class=\"token punctuation\">(</span><span class=\"token string\">'pk'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'title'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>book_vals<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># QuerySet å†…éƒ¨æ˜¯å¯è¿­ä»£çš„å­—å…¸åºåˆ—</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>book_val_list <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>Book<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>values_list<span class=\"token punctuation\">(</span><span class=\"token string\">'pk'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'title'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>book_val_list<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># QuerySet å†…éƒ¨æ˜¯å…ƒç»„</span></pre></td></tr></table></figure></li>\n<li>\n<p>å»é‡å¤</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>books <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>Book<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>values_list<span class=\"token punctuation\">(</span><span class=\"token string\">\"publish\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>distinct<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure></li>\n</ul>\n</li>\n<li>\n<p>ä¿®æ”¹æ•°æ®</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">update_book</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">,</span> book_id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    book <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>Book<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span>pk<span class=\"token operator\">=</span>book_id<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    book<span class=\"token punctuation\">.</span>price <span class=\"token operator\">=</span> <span class=\"token number\">40.00</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    book<span class=\"token punctuation\">.</span>save<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token comment\"># books = models.Book.objects.filter(pk__in=[7, 8]).update(price=35.00)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">return</span> HttpResponse<span class=\"token punctuation\">(</span><span class=\"token string\">'&lt;p>&lt;script>alert(\"æ•°æ®æ›´æ–°æˆåŠŸï¼\")&lt;/script>&lt;/p>'</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure></li>\n<li>\n<p>åˆ é™¤æ•°æ®</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>books<span class=\"token operator\">=</span>models<span class=\"token punctuation\">.</span>Book<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span><span class=\"token builtin\">filter</span><span class=\"token punctuation\">(</span>pk<span class=\"token operator\">=</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>delete<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\"># books = models.Book.objects.all ().delete ()  # åˆ é™¤æ‰€æœ‰</span></pre></td></tr></table></figure><blockquote>\n<p>æ³¨æ„ï¼šæ•°æ®åˆ é™¤å±äºéå¸¸è§„æ“ä½œï¼Œåœ¨ä¸šåŠ¡è¿‡ç¨‹ä¸­ï¼Œä¸€èˆ¬åˆ é™¤éƒ½è¿›è¡Œé€»è¾‘åˆ é™¤ï¼Œè€Œéç‰©ç†åˆ é™¤ã€‚</p>\n</blockquote>\n</li>\n</ol>\n<h4 id=\"å¤šè¡¨å®ä¾‹\"><a class=\"anchor\" href=\"#å¤šè¡¨å®ä¾‹\">#</a> å¤šè¡¨å®ä¾‹</h4>\n<p>è¡¨ä¸è¡¨ä¹‹é—´çš„å…³ç³»ï¼Œé€šå¸¸æœ‰å¦‚ä¸‹ä¸‰ç§ï¼š</p>\n<ol>\n<li>ä¸€å¯¹ä¸€ã€‚</li>\n<li>ä¸€å¯¹å¤šã€‚</li>\n<li>å¤šå¯¹å¤šã€‚</li>\n</ol>\n<blockquote>\n<p>æ³¨æ„ï¼šè¿™ç§å¯¹åº”å…³ç³»æ—¶ç›¸å¯¹è€Œè¨€çš„ï¼Œè‹¥ç”²ä¸ä¹™æ˜¯ä¸€å¯¹å¤šå…³ç³»ï¼Œé‚£ä¹ˆï¼Œä¹™ä¸ç”²åˆ™æ˜¯ä¸€å¯¹ä¸€å…³ç³»ï¼ˆä¹Ÿå¯ä»¥è¯´æ˜¯å¤šå¯¹ä¸€ï¼‰ï¼Œåä¹‹ï¼Œåˆ™ä¸ä¸€å®šæˆç«‹ã€‚</p>\n</blockquote>\n<ol>\n<li>\n<p>å‡†å¤‡å·¥ä½œ</p>\n<ul>\n<li>\n<p>ç§»é™¤ä¸Šä¸€å®ä¾‹ç”Ÿæˆçš„æ•°æ®åº“è¡¨ï¼Œä»¥åŠåˆ é™¤å¯¹åº”çš„æ•°æ®æ¨¡å‹ï¼Œæˆ–è€…é‡æ–°æ–°å»ºåº”ç”¨ã€‚</p>\n</li>\n<li>\n<p>æ¸…é™¤ mydjango/app/migrations ä¸‹çš„ sql è„šæœ¬æ–‡ä»¶ã€‚</p>\n</li>\n<li>\n<p>åˆ é™¤æ•°æ®åº“è¡¨  <code>django_migrations</code>  ä¸­æ—§æœ‰ç”Ÿæˆè®°å½•ã€‚</p>\n<figure class=\"highlight sql\"><figcaption data-lang=\"SQL\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">delete</span> <span class=\"token keyword\">from</span> django_migrations <span class=\"token keyword\">where</span> app <span class=\"token operator\">=</span> <span class=\"token string\">'app'</span></pre></td></tr></table></figure></li>\n</ul>\n</li>\n<li>\n<p>åˆ›å»ºæ¨¡å‹</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># mydjango/app/models.py</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>db <span class=\"token keyword\">import</span> models</pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">Book</span><span class=\"token punctuation\">(</span>models<span class=\"token punctuation\">.</span>Model<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    title <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>CharField<span class=\"token punctuation\">(</span>max_length<span class=\"token operator\">=</span><span class=\"token number\">32</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    price <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>DecimalField<span class=\"token punctuation\">(</span>max_digits<span class=\"token operator\">=</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span> decimal_places<span class=\"token operator\">=</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    pub_date <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>DateField<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    publish <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>ForeignKey<span class=\"token punctuation\">(</span><span class=\"token string\">\"Publish\"</span><span class=\"token punctuation\">,</span> on_delete<span class=\"token operator\">=</span>models<span class=\"token punctuation\">.</span>CASCADE<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    authors <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>ManyToManyField<span class=\"token punctuation\">(</span><span class=\"token string\">\"Author\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">Publish</span><span class=\"token punctuation\">(</span>models<span class=\"token punctuation\">.</span>Model<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    name <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>CharField<span class=\"token punctuation\">(</span>max_length<span class=\"token operator\">=</span><span class=\"token number\">32</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    city <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>CharField<span class=\"token punctuation\">(</span>max_length<span class=\"token operator\">=</span><span class=\"token number\">64</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    email <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>EmailField<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">Author</span><span class=\"token punctuation\">(</span>models<span class=\"token punctuation\">.</span>Model<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    name <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>CharField<span class=\"token punctuation\">(</span>max_length<span class=\"token operator\">=</span><span class=\"token number\">32</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    age <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>SmallIntegerField<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    au_detail <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>OneToOneField<span class=\"token punctuation\">(</span><span class=\"token string\">\"AuthorDetail\"</span><span class=\"token punctuation\">,</span> on_delete<span class=\"token operator\">=</span>models<span class=\"token punctuation\">.</span>CASCADE<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">AuthorDetail</span><span class=\"token punctuation\">(</span>models<span class=\"token punctuation\">.</span>Model<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    gender_choices <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>        <span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"å¥³\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>        <span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"ç”·\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>        <span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"æœªçŸ¥\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>    <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>    gender <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>SmallIntegerField<span class=\"token punctuation\">(</span>choices<span class=\"token operator\">=</span>gender_choices<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>    phone <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>CharField<span class=\"token punctuation\">(</span>max_length<span class=\"token operator\">=</span><span class=\"token number\">32</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>    address <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>CharField<span class=\"token punctuation\">(</span>max_length<span class=\"token operator\">=</span><span class=\"token number\">64</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>    birthday <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>DateField<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><blockquote>\n<p>è¯´æ˜ï¼š</p>\n<ol>\n<li>EmailField æ•°æ®ç±»å‹æ˜¯é‚®ç®±æ ¼å¼ï¼Œåº•å±‚ç»§æ‰¿ CharFieldï¼Œè¿›è¡Œäº†å°è£…ï¼Œç›¸å½“äº MySQL ä¸­çš„ varcharã€‚</li>\n<li>Django1.1 ç‰ˆæœ¬ä¸éœ€è¦è”çº§åˆ é™¤ï¼šon_delete=models.CASCADEï¼ŒDjango2.2 éœ€è¦ã€‚</li>\n</ol>\n</blockquote>\n<p>æ‰§è¡Œæ•°æ®è¿ç§»å‘½ä»¤ï¼š</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>python3 manage.py migrate</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>python3 manage.py makemigrations app</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>python3 manage.py migrate app</pre></td></tr></table></figure><p>æ‰§è¡Œå®Œæ¯•åï¼Œæ•°æ®åº“ä¼šç”Ÿæˆå¦‚ä¸‹è¡¨ç»“æ„ï¼š</p>\n<p><img data-src=\"https://img.xfc-exclave.com/2021/11/feb0ba77917d6af9622e1675fe5e21da1635813491.png\" alt=\"image-20211102081211144\" /></p>\n</li>\n<li>\n<p>åˆå§‹åŒ–æ•°æ®</p>\n<p>ä¸ºæ–¹ä¾¿åç»­æ“ä½œï¼Œä¸ºå½“å‰ç”Ÿæˆçš„è¡¨ç»“æ„åˆå§‹åŒ–éƒ¨åˆ†æ•°æ®ï¼š</p>\n<figure class=\"highlight sql\"><figcaption data-lang=\"SQL\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">insert</span> <span class=\"token keyword\">into</span> app_publish<span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">,</span> city<span class=\"token punctuation\">,</span> email<span class=\"token punctuation\">)</span> <span class=\"token keyword\">values</span> <span class=\"token punctuation\">(</span><span class=\"token string\">\"å±±ä¸œæ–‡è‰ºå‡ºç‰ˆç¤¾\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"å±±ä¸œ\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"602666251@qq.com\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token string\">\"å•†åŠ¡å°ä¹¦é¦†\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"åŒ—äº¬\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"bainianziyuan@cp.com.cn\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token string\">\"æ—¶ä»£æ–‡è‰ºå‡ºç‰ˆç¤¾\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"å‰æ—\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"367036063@qq.com\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token string\">\"èŠ±åŸå‡ºç‰ˆç¤¾\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"å¹¿ä¸œ\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"gdhctsyx@126.com\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">insert</span> <span class=\"token keyword\">into</span> app_book<span class=\"token punctuation\">(</span>title<span class=\"token punctuation\">,</span> price<span class=\"token punctuation\">,</span> pub_date<span class=\"token punctuation\">,</span> publish_id<span class=\"token punctuation\">)</span> <span class=\"token keyword\">values</span><span class=\"token punctuation\">(</span><span class=\"token string\">'æ·±å¤„çš„é•œå­'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">42.00</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'2018-08-01'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token string\">'è¯—å­¦'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">36.00</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'2009-07-01'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token string\">'ç¥æ®¿çš„åŸºçŸ³'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">38.00</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'2014-04-01'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">insert</span> <span class=\"token keyword\">into</span> app_authordetail<span class=\"token punctuation\">(</span>gender<span class=\"token punctuation\">,</span> phone<span class=\"token punctuation\">,</span> address<span class=\"token punctuation\">,</span> birthday<span class=\"token punctuation\">)</span> <span class=\"token keyword\">values</span> <span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">13432335433</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"ç½—é©¬å°¼äºš\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"1895-5-23\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">13943454554</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"å¤å¸Œè…Š\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"1000-8-13\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">insert</span> <span class=\"token keyword\">into</span> app_author<span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">,</span> age<span class=\"token punctuation\">,</span> au_detail_id<span class=\"token punctuation\">)</span> <span class=\"token keyword\">values</span> <span class=\"token punctuation\">(</span><span class=\"token string\">\"å¢é½å®‰Â·å¸ƒæ‹‰åŠ \"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">60</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token string\">\"äºšé‡Œå£«å¤šå¾·\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">58</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token keyword\">insert</span> <span class=\"token keyword\">into</span> app_book_authors<span class=\"token punctuation\">(</span>book_id<span class=\"token punctuation\">,</span> author_id<span class=\"token punctuation\">)</span> <span class=\"token keyword\">values</span> <span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><blockquote>\n<p>æ³¨æ„ï¼šç”±äºè¡¨ä¹‹é—´å­˜åœ¨å¤–é”®å…³è”å…³ç³»ï¼Œå› æ­¤ï¼Œåœ¨æ‰‹åŠ¨æ’å…¥æ•°æ®æ—¶ï¼Œéœ€è¦éµå¾ªå…³è”é¡ºåºè¿›è¡Œæ’å…¥ã€‚</p>\n</blockquote>\n</li>\n<li>\n<p>æ–°å¢æ•°æ®</p>\n<p>ä¸€å¯¹å¤šæ·»åŠ æ•°æ®ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">addBook</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    pub_obj <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>Publish<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span><span class=\"token builtin\">filter</span><span class=\"token punctuation\">(</span>pk<span class=\"token operator\">=</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>first<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    book <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>Book<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>create<span class=\"token punctuation\">(</span>title<span class=\"token operator\">=</span><span class=\"token string\">\"ä¸€ä¹å…«å››\"</span><span class=\"token punctuation\">,</span> price<span class=\"token operator\">=</span><span class=\"token number\">32.00</span><span class=\"token punctuation\">,</span> pub_date<span class=\"token operator\">=</span><span class=\"token string\">\"2021-01-01\"</span><span class=\"token punctuation\">,</span> publish<span class=\"token operator\">=</span>pub_obj<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token comment\"># book = models.Book.objects.create (title=\"å…ˆçŸ¥ãƒ»æ²™ä¸æ²«\", price=35.00, pub_date=\"2018-07-01\", publish_id=pub_obj.pk)  # æ–¹æ³•äºŒ</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>book<span class=\"token punctuation\">,</span> <span class=\"token builtin\">type</span><span class=\"token punctuation\">(</span>book<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">return</span> HttpResponse<span class=\"token punctuation\">(</span>book<span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>å¤šå¯¹å¤šæ·»åŠ æ•°æ®ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">addBook</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token comment\">#  è·å–ä¹¦ç±å¯¹è±¡</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    book1 <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>Book<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span><span class=\"token builtin\">filter</span><span class=\"token punctuation\">(</span>title<span class=\"token operator\">=</span><span class=\"token string\">\"ç¥æ®¿çš„åŸºçŸ³\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>first<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    book2 <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>Book<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span><span class=\"token builtin\">filter</span><span class=\"token punctuation\">(</span>title<span class=\"token operator\">=</span><span class=\"token string\">\"æ·±å¤„çš„é•œå­\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>first<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token comment\">#  è·å–ä½œè€…å¯¹è±¡</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    author <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>Author<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span><span class=\"token builtin\">filter</span><span class=\"token punctuation\">(</span>name<span class=\"token operator\">=</span><span class=\"token string\">\"å¢é½å®‰Â·å¸ƒæ‹‰åŠ \"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>first<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token comment\">#  ç»™ä½œè€…å¯¹è±¡çš„ book_set å±æ€§ç”¨ add æ–¹æ³•ä¼ ä¹¦ç±å¯¹è±¡</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    author<span class=\"token punctuation\">.</span>book_set<span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">(</span>book1<span class=\"token punctuation\">,</span> book2<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token comment\"># author.book_set.add (book1.pk)  # æ–¹æ³•äºŒ</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token keyword\">return</span> HttpResponse<span class=\"token punctuation\">(</span>author<span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>å…¶ä»–ç”¨æ³•ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>book_obj <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>Book<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token builtin\">id</span><span class=\"token operator\">=</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>author_list <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>Author<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span><span class=\"token builtin\">filter</span><span class=\"token punctuation\">(</span>id__gt<span class=\"token operator\">=</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>book_obj<span class=\"token punctuation\">.</span>authors<span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">(</span><span class=\"token operator\">*</span>author_list<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># å°† id å¤§äº 2 çš„ä½œè€…å¯¹è±¡æ·»åŠ åˆ°è¿™æœ¬ä¹¦çš„ä½œè€…é›†åˆä¸­</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\"># æ–¹å¼äºŒï¼šä¼ å¯¹è±¡ id</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>book_obj<span class=\"token punctuation\">.</span>authors<span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">(</span><span class=\"token operator\">*</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># å°† id=1 å’Œ id=3 çš„ä½œè€…å¯¹è±¡æ·»åŠ åˆ°è¿™æœ¬ä¹¦çš„ä½œè€…é›†åˆä¸­</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>pub <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>Publish<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span><span class=\"token builtin\">filter</span><span class=\"token punctuation\">(</span>name<span class=\"token operator\">=</span><span class=\"token string\">\"å•†åŠ¡å°ä¹¦é¦†\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>first<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>wo <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>Author<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span><span class=\"token builtin\">filter</span><span class=\"token punctuation\">(</span>name<span class=\"token operator\">=</span><span class=\"token string\">\"ç”³å¿ ä¿¡\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>first<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>book <span class=\"token operator\">=</span> wo<span class=\"token punctuation\">.</span>book_set<span class=\"token punctuation\">.</span>create<span class=\"token punctuation\">(</span>title<span class=\"token operator\">=</span><span class=\"token string\">\"è¯—éŸµè¯éŸµé€ŸæŸ¥æ‰‹å†Œ\"</span><span class=\"token punctuation\">,</span> price<span class=\"token operator\">=</span><span class=\"token number\">38.00</span><span class=\"token punctuation\">,</span> pub_date<span class=\"token operator\">=</span><span class=\"token string\">\"2014-07-01\"</span><span class=\"token punctuation\">,</span> publish<span class=\"token operator\">=</span>pub<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>author_obj <span class=\"token operator\">=</span>models<span class=\"token punctuation\">.</span>Author<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token builtin\">id</span><span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>book_obj <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>Book<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token builtin\">id</span><span class=\"token operator\">=</span><span class=\"token number\">11</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>author_obj<span class=\"token punctuation\">.</span>book_set<span class=\"token punctuation\">.</span>remove<span class=\"token punctuation\">(</span>book_obj<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># ç§»é™¤æŒ‡å®šå…³è”</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>book <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>Book<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span><span class=\"token builtin\">filter</span><span class=\"token punctuation\">(</span>title<span class=\"token operator\">=</span><span class=\"token string\">\"èœé¸Ÿæ•™ç¨‹\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>first<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>book<span class=\"token punctuation\">.</span>authors<span class=\"token punctuation\">.</span>clear<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># ç§»é™¤æ‰€æœ‰å…³è”</span></pre></td></tr></table></figure></li>\n<li>\n<p>æŸ¥è¯¢æ•°æ®</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># æŸ¥è¯¢æŸä¹¦ç±å‡ºç‰ˆç¤¾ä½ç½®</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>book <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>Book<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span><span class=\"token builtin\">filter</span><span class=\"token punctuation\">(</span>pk<span class=\"token operator\">=</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>first<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>res <span class=\"token operator\">=</span> book<span class=\"token punctuation\">.</span>publish<span class=\"token punctuation\">.</span>city</pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>res<span class=\"token punctuation\">,</span> <span class=\"token builtin\">type</span><span class=\"token punctuation\">(</span>res<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token comment\"># æŸ¥è¯¢æŸå‡ºç‰ˆç¤¾çš„å‡ºç‰ˆè®°å½•</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>pub <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>Publish<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span><span class=\"token builtin\">filter</span><span class=\"token punctuation\">(</span>name<span class=\"token operator\">=</span><span class=\"token string\">\"äººæ°‘æ–‡å­¦å‡ºç‰ˆç¤¾\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>first<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>res <span class=\"token operator\">=</span> pub<span class=\"token punctuation\">.</span>book_set<span class=\"token punctuation\">.</span><span class=\"token builtin\">all</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> res<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token comment\"># æŸ¥è¯¢æŸä½œè€…è”ç³»æ–¹å¼</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>author <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>Author<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span><span class=\"token builtin\">filter</span><span class=\"token punctuation\">(</span>name<span class=\"token operator\">=</span><span class=\"token string\">\"è´¾å¹³å‡¹\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>first<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>res <span class=\"token operator\">=</span> author<span class=\"token punctuation\">.</span>au_detail<span class=\"token punctuation\">.</span>phone</pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>res<span class=\"token punctuation\">,</span> <span class=\"token builtin\">type</span><span class=\"token punctuation\">(</span>res<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token comment\"># æŸ¥è¯¢æˆéƒ½ä½œè€…</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>addr <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>AuthorDetail<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span><span class=\"token builtin\">filter</span><span class=\"token punctuation\">(</span>addr<span class=\"token operator\">=</span><span class=\"token string\">\"æˆéƒ½\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>first<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>res <span class=\"token operator\">=</span> addr<span class=\"token punctuation\">.</span>author<span class=\"token punctuation\">.</span>name</pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>res<span class=\"token punctuation\">,</span> <span class=\"token builtin\">type</span><span class=\"token punctuation\">(</span>res<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre></pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token comment\"># æŸ¥è¯¢æŸä¹¦ç±çš„è”åä½œè€…</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>book <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>Book<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span><span class=\"token builtin\">filter</span><span class=\"token punctuation\">(</span>title<span class=\"token operator\">=</span><span class=\"token string\">\"è„‚ç šæ–‹é‡è¯„çŸ³å¤´è®°\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>first<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>res <span class=\"token operator\">=</span> book<span class=\"token punctuation\">.</span>authors<span class=\"token punctuation\">.</span><span class=\"token builtin\">all</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre><span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> res<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">,</span> i<span class=\"token punctuation\">.</span>au_detail<span class=\"token punctuation\">.</span>phone<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre></pre></td></tr><tr><td data-num=\"28\"></td><td><pre><span class=\"token comment\"># æŸ¥è¯¢æŸä½œè€…çš„æ‰€æœ‰ä¹¦ç±</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>author <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>Author<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span><span class=\"token builtin\">filter</span><span class=\"token punctuation\">(</span>name<span class=\"token operator\">=</span><span class=\"token string\">\"å¨å»‰Â·è¨é»˜å¡ç‰¹Â·æ¯›å§†\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>first<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>res <span class=\"token operator\">=</span> author<span class=\"token punctuation\">.</span>book_set<span class=\"token punctuation\">.</span><span class=\"token builtin\">all</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre><span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> res<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">)</span></pre></td></tr></table></figure></li>\n<li>\n<p>åŒä¸‹åˆ’çº¿è·¨è¡¨æŸ¥è¯¢</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># æŸ¥è¯¢æŸå‡ºç‰ˆç¤¾ä¹¦ç±åŠä»·æ ¼</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>res <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>Book<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span><span class=\"token builtin\">filter</span><span class=\"token punctuation\">(</span>publish__name<span class=\"token operator\">=</span><span class=\"token string\">\"å‡¤å‡°æ–‡è‰ºå‡ºç‰ˆç¤¾\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>values_list<span class=\"token punctuation\">(</span><span class=\"token string\">\"title\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"price\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>res <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>Publish<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span><span class=\"token builtin\">filter</span><span class=\"token punctuation\">(</span>name<span class=\"token operator\">=</span><span class=\"token string\">\"å‡¤å‡°æ–‡è‰ºå‡ºç‰ˆç¤¾\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>values_list<span class=\"token punctuation\">(</span><span class=\"token string\">\"book__title\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"book__price\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\"># æŸ¥è¯¢æŸä½œè€…æ‰€æœ‰ä¹¦ç±åç§°</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>res <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>Book<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span><span class=\"token builtin\">filter</span><span class=\"token punctuation\">(</span>authors__name<span class=\"token operator\">=</span><span class=\"token string\">\"å¼ çˆ±ç²\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>values_list<span class=\"token punctuation\">(</span><span class=\"token string\">\"title\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>res <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>Author<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span><span class=\"token builtin\">filter</span><span class=\"token punctuation\">(</span>name<span class=\"token operator\">=</span><span class=\"token string\">\"å¼ çˆ±ç²\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>values_list<span class=\"token punctuation\">(</span><span class=\"token string\">\"book__title\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\"># æŸ¥è¯¢æŸä½œè€…è”ç³»æ–¹å¼</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>res <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>Author<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span><span class=\"token builtin\">filter</span><span class=\"token punctuation\">(</span>name<span class=\"token operator\">=</span><span class=\"token string\">\"æ±ªæ›¾ç¥º\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>values_list<span class=\"token punctuation\">(</span><span class=\"token string\">\"au_detail__phone\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>res <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>AuthorDetail<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span><span class=\"token builtin\">filter</span><span class=\"token punctuation\">(</span>author__name<span class=\"token operator\">=</span><span class=\"token string\">\"æ±ªæ›¾ç¥º\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>values_list<span class=\"token punctuation\">(</span><span class=\"token string\">\"phone\"</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure></li>\n</ol>\n<blockquote>\n<p>Django ORM ä¸»è¦æ€æƒ³åœ¨äºé€šè¿‡æ“ä½œå¯¹è±¡æ¥å®ç°å¯¹æ•°æ®åº“å…³è”è¡¨çš„å¢åˆ æ”¹æŸ¥ï¼Œå…¶å®è¿™ç§é€šè¿‡å¯¹è±¡å®ä½“ä¹‹é—´çš„å…³ç³»æ¥æ“ä½œæ•°æ®åº“å…³è”è¡¨çš„æŠ€æœ¯ï¼ˆæˆ–æ¡†æ¶ï¼‰å¹¶ä¸é²œè§ï¼Œä¾‹å¦‚ Java ä¸­çš„ Spring Data JPAï¼Œç†è§£äº†å¯¹è±¡æ“ä½œçš„æœ¬è´¨ï¼Œè‡ªç„¶ä¸€é€šç™¾é€šï¼Œè€Œä¸éœ€è¦å¼ºè¡Œè®°å¿†ã€‚</p>\n</blockquote>\n<h3 id=\"django-form-ç»„ä»¶\"><a class=\"anchor\" href=\"#django-form-ç»„ä»¶\">#</a> Django Form ç»„ä»¶</h3>\n<p>Django Form ç»„ä»¶ç”¨äºå¯¹é¡µé¢è¿›è¡Œåˆå§‹åŒ–ï¼Œç”Ÿæˆ HTML æ ‡ç­¾ï¼Œæ­¤å¤–è¿˜å¯ä»¥å¯¹ç”¨æˆ·æäº¤å¯¹æ•°æ®è¿›è¡Œæ ¡éªŒï¼ˆæ˜¾ç¤ºé”™è¯¯ä¿¡æ¯ï¼‰ã€‚</p>\n<h4 id=\"ä½¿ç”¨æ–¹å¼\"><a class=\"anchor\" href=\"#ä½¿ç”¨æ–¹å¼\">#</a> ä½¿ç”¨æ–¹å¼</h4>\n<ol>\n<li>\n<p>åˆ›å»º Form ç»„ä»¶æ–‡ä»¶ã€‚</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># mydjango/app/My_forms.py</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">from</span> django <span class=\"token keyword\">import</span> forms</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>core<span class=\"token punctuation\">.</span>exceptions <span class=\"token keyword\">import</span> ValidationError</pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">from</span> app <span class=\"token keyword\">import</span> models</pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">EmpForm</span><span class=\"token punctuation\">(</span>forms<span class=\"token punctuation\">.</span>Form<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    name <span class=\"token operator\">=</span> forms<span class=\"token punctuation\">.</span>CharField<span class=\"token punctuation\">(</span>min_length<span class=\"token operator\">=</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span> label<span class=\"token operator\">=</span><span class=\"token string\">\"å§“å\"</span><span class=\"token punctuation\">,</span> error_messages<span class=\"token operator\">=</span><span class=\"token punctuation\">&#123;</span><span class=\"token string\">\"min_length\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"è‡³å°‘éœ€è¦4ä¸ªå­—ç¬¦\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"required\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"è¯¥å­—æ®µä¸èƒ½ä¸ºç©º!\"</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    age <span class=\"token operator\">=</span> forms<span class=\"token punctuation\">.</span>IntegerField<span class=\"token punctuation\">(</span>label<span class=\"token operator\">=</span><span class=\"token string\">\"å¹´é¾„\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    salary <span class=\"token operator\">=</span> forms<span class=\"token punctuation\">.</span>DecimalField<span class=\"token punctuation\">(</span>label<span class=\"token operator\">=</span><span class=\"token string\">\"å·¥èµ„\"</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure></li>\n<li>\n<p>è§†å›¾å¤„ç†é€»è¾‘</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># mydjango/app/views.py</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>http <span class=\"token keyword\">import</span> HttpResponse</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>shortcuts <span class=\"token keyword\">import</span> render<span class=\"token punctuation\">,</span> redirect</pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">from</span> app <span class=\"token keyword\">import</span> models</pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">from</span> app<span class=\"token punctuation\">.</span>My_forms <span class=\"token keyword\">import</span> EmpForm</pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">add_emp</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token keyword\">if</span> request<span class=\"token punctuation\">.</span>method <span class=\"token operator\">==</span> <span class=\"token string\">\"GET\"</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        form <span class=\"token operator\">=</span> EmpForm<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token keyword\">return</span> render<span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">,</span> <span class=\"token string\">\"add_emp.html\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span><span class=\"token string\">\"form\"</span><span class=\"token punctuation\">:</span> form<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        form <span class=\"token operator\">=</span> EmpForm<span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">.</span>POST<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token keyword\">if</span> form<span class=\"token punctuation\">.</span>is_valid<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>  <span class=\"token comment\"># è¿›è¡Œæ•°æ®æ ¡éªŒ</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>            <span class=\"token comment\"># æ ¡éªŒæˆåŠŸ</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>            data <span class=\"token operator\">=</span> form<span class=\"token punctuation\">.</span>cleaned_data  <span class=\"token comment\"># æ ¡éªŒæˆåŠŸçš„å€¼ï¼Œä¼šæ”¾åœ¨ cleaned_data é‡Œã€‚</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>            data<span class=\"token punctuation\">.</span>pop<span class=\"token punctuation\">(</span><span class=\"token string\">'r_salary'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>            <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>            models<span class=\"token punctuation\">.</span>Emp<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>create<span class=\"token punctuation\">(</span><span class=\"token operator\">**</span>data<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>            <span class=\"token keyword\">return</span> HttpResponse<span class=\"token punctuation\">(</span><span class=\"token string\">'ok'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>            <span class=\"token comment\"># return render(request, \"add_emp.html\", &#123;\"form\": form&#125;)</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>        <span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>            <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>form<span class=\"token punctuation\">.</span>errors<span class=\"token punctuation\">)</span>    <span class=\"token comment\"># æ‰“å°é”™è¯¯ä¿¡æ¯</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>            clean_errors <span class=\"token operator\">=</span> form<span class=\"token punctuation\">.</span>errors</pre></td></tr><tr><td data-num=\"26\"></td><td><pre>        <span class=\"token keyword\">return</span> render<span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">,</span> <span class=\"token string\">\"add_emp.html\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span><span class=\"token string\">\"form\"</span><span class=\"token punctuation\">:</span> form<span class=\"token punctuation\">,</span> <span class=\"token string\">\"clean_errors\"</span><span class=\"token punctuation\">:</span> clean_errors<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>é…ç½®è·¯ç”±ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>path<span class=\"token punctuation\">(</span><span class=\"token string\">'add_emp/'</span><span class=\"token punctuation\">,</span> views<span class=\"token punctuation\">.</span>add_emp<span class=\"token punctuation\">)</span></pre></td></tr></table></figure></li>\n<li>\n<p>æ–°å»ºæ¨¡æ¿æ–‡ä»¶</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token operator\">&lt;</span>!<span class=\"token operator\">-</span><span class=\"token operator\">-</span> mydjango<span class=\"token operator\">/</span>templates<span class=\"token operator\">/</span>add_emp<span class=\"token punctuation\">.</span>html<span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token operator\">&lt;</span>!DOCTYPE html<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token operator\">&lt;</span>html lang<span class=\"token operator\">=</span><span class=\"token string\">\"en\"</span><span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token operator\">&lt;</span>head<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token operator\">&lt;</span>meta charset<span class=\"token operator\">=</span><span class=\"token string\">\"UTF-8\"</span><span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token operator\">&lt;</span>title<span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>title<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>head<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token operator\">&lt;</span>body<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token operator\">&lt;</span>h3<span class=\"token operator\">></span>æ·»åŠ å‘˜å·¥<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h3<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token operator\">&lt;</span>!<span class=\"token operator\">-</span><span class=\"token operator\">-</span> <span class=\"token number\">1</span>ã€è‡ªå·±æ‰‹åŠ¨å†™HTMLé¡µé¢<span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token operator\">&lt;</span>form action<span class=\"token operator\">=</span><span class=\"token string\">\"\"</span> method<span class=\"token operator\">=</span><span class=\"token string\">\"post\"</span><span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token operator\">&lt;</span>p<span class=\"token operator\">></span>å§“åï¼š<span class=\"token operator\">&lt;</span><span class=\"token builtin\">input</span> <span class=\"token builtin\">type</span><span class=\"token operator\">=</span><span class=\"token string\">\"text\"</span> name<span class=\"token operator\">=</span><span class=\"token string\">\"name\"</span><span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>p<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token operator\">&lt;</span>p<span class=\"token operator\">></span>å¹´é¾„ï¼š<span class=\"token operator\">&lt;</span><span class=\"token builtin\">input</span> <span class=\"token builtin\">type</span><span class=\"token operator\">=</span><span class=\"token string\">\"text\"</span> name<span class=\"token operator\">=</span><span class=\"token string\">\"age\"</span><span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>p<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token operator\">&lt;</span>p<span class=\"token operator\">></span>å·¥èµ„ï¼š<span class=\"token operator\">&lt;</span><span class=\"token builtin\">input</span> <span class=\"token builtin\">type</span><span class=\"token operator\">=</span><span class=\"token string\">\"text\"</span> name<span class=\"token operator\">=</span><span class=\"token string\">\"salary\"</span><span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>p<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">.</span><span class=\"token operator\">%</span> csrf_token <span class=\"token operator\">%</span><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token operator\">&lt;</span><span class=\"token builtin\">input</span> <span class=\"token builtin\">type</span><span class=\"token operator\">=</span><span class=\"token string\">\"submit\"</span><span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">&#123;</span> clean_errors <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>form<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre></pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token operator\">&lt;</span>!<span class=\"token operator\">-</span><span class=\"token operator\">-</span> <span class=\"token number\">2</span>ã€é€šè¿‡formå¯¹è±¡çš„as_pæ–¹æ³•å®ç°<span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token operator\">&lt;</span>form action<span class=\"token operator\">=</span><span class=\"token string\">\"\"</span> method<span class=\"token operator\">=</span><span class=\"token string\">\"post\"</span> novalidate<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>    <span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">.</span><span class=\"token operator\">%</span> csrf_token <span class=\"token operator\">%</span><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>    <span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">&#123;</span> form<span class=\"token punctuation\">.</span>as_p <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>    <span class=\"token operator\">&lt;</span><span class=\"token builtin\">input</span> <span class=\"token builtin\">type</span><span class=\"token operator\">=</span><span class=\"token string\">\"submit\"</span><span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>form<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre></pre></td></tr><tr><td data-num=\"29\"></td><td><pre><span class=\"token operator\">&lt;</span>!<span class=\"token operator\">-</span><span class=\"token operator\">-</span> <span class=\"token number\">3</span>ã€æ‰‹åŠ¨è·å–formå¯¹è±¡çš„å­—æ®µ<span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre><span class=\"token operator\">&lt;</span>form action<span class=\"token operator\">=</span><span class=\"token string\">\"\"</span> method<span class=\"token operator\">=</span><span class=\"token string\">\"post\"</span> novalidate<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>    <span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">.</span><span class=\"token operator\">%</span> csrf_token <span class=\"token operator\">%</span><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>    <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>        <span class=\"token operator\">&lt;</span>label <span class=\"token keyword\">for</span><span class=\"token operator\">=</span><span class=\"token string\">\"id_&#123;.&#123; form.name.name &#125;&#125;\"</span><span class=\"token operator\">></span>å§“å<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>label<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>        <span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">&#123;</span> form<span class=\"token punctuation\">.</span>name <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">&#125;</span> <span class=\"token operator\">&lt;</span>span<span class=\"token operator\">></span><span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">&#123;</span> form<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">.</span>errors<span class=\"token punctuation\">.</span><span class=\"token number\">0</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">&#125;</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>span<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>    <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>        <span class=\"token operator\">&lt;</span>label <span class=\"token keyword\">for</span><span class=\"token operator\">=</span><span class=\"token string\">\"id_&#123;.&#123; form.age.name &#125;&#125;\"</span><span class=\"token operator\">></span>å¹´é¾„<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>label<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>        <span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">&#123;</span> form<span class=\"token punctuation\">.</span>age <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">&#125;</span> <span class=\"token operator\">&lt;</span>span<span class=\"token operator\">></span><span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">&#123;</span> form<span class=\"token punctuation\">.</span>age<span class=\"token punctuation\">.</span>errors<span class=\"token punctuation\">.</span><span class=\"token number\">0</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">&#125;</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>span<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>    <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>        <span class=\"token operator\">&lt;</span>label <span class=\"token keyword\">for</span><span class=\"token operator\">=</span><span class=\"token string\">\"id_salary\"</span><span class=\"token operator\">></span>å·¥èµ„<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>label<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>        <span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">&#123;</span> form<span class=\"token punctuation\">.</span>salary <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">&#125;</span> <span class=\"token operator\">&lt;</span>span<span class=\"token operator\">></span><span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">&#123;</span> form<span class=\"token punctuation\">.</span>salary<span class=\"token punctuation\">.</span>errors<span class=\"token punctuation\">.</span><span class=\"token number\">0</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">&#125;</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>span<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>    <span class=\"token operator\">&lt;</span><span class=\"token builtin\">input</span> <span class=\"token builtin\">type</span><span class=\"token operator\">=</span><span class=\"token string\">\"submit\"</span><span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>form<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre></pre></td></tr><tr><td data-num=\"47\"></td><td><pre></pre></td></tr><tr><td data-num=\"48\"></td><td><pre><span class=\"token operator\">&lt;</span>!<span class=\"token operator\">-</span><span class=\"token operator\">-</span> <span class=\"token number\">4</span>ã€ç”¨<span class=\"token keyword\">for</span>å¾ªç¯å±•ç¤ºæ‰€æœ‰å­—æ®µ <span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre><span class=\"token operator\">&lt;</span>form action<span class=\"token operator\">=</span><span class=\"token string\">\"\"</span> method<span class=\"token operator\">=</span><span class=\"token string\">\"post\"</span> novalidate<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre>    <span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">.</span><span class=\"token operator\">%</span> csrf_token <span class=\"token operator\">%</span><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"51\"></td><td><pre>    <span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">.</span><span class=\"token operator\">%</span> <span class=\"token keyword\">for</span> field <span class=\"token keyword\">in</span> form <span class=\"token operator\">%</span><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"52\"></td><td><pre>        <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"53\"></td><td><pre>            <span class=\"token operator\">&lt;</span>label <span class=\"token keyword\">for</span><span class=\"token operator\">=</span><span class=\"token string\">\"id_&#123;.&#123; field.name &#125;&#125;\"</span><span class=\"token operator\">></span><span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">&#123;</span> field<span class=\"token punctuation\">.</span>label <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">&#125;</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>label<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"54\"></td><td><pre>            <span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">&#123;</span> field <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">&#125;</span> <span class=\"token operator\">&lt;</span>span<span class=\"token operator\">></span><span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">&#123;</span> field<span class=\"token punctuation\">.</span>errors<span class=\"token punctuation\">.</span><span class=\"token number\">0</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">&#125;</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>span<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"55\"></td><td><pre>        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"56\"></td><td><pre>    <span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">.</span><span class=\"token operator\">%</span> endfor <span class=\"token operator\">%</span><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"57\"></td><td><pre>    <span class=\"token operator\">&lt;</span><span class=\"token builtin\">input</span> <span class=\"token builtin\">type</span><span class=\"token operator\">=</span><span class=\"token string\">\"submit\"</span><span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"58\"></td><td><pre><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>form<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"59\"></td><td><pre></pre></td></tr><tr><td data-num=\"60\"></td><td><pre><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>body<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"61\"></td><td><pre><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>html<span class=\"token operator\">></span></pre></td></tr></table></figure></li>\n</ol>\n<h4 id=\"å±€éƒ¨é’©å­å’Œå…¨å±€é’©å­\"><a class=\"anchor\" href=\"#å±€éƒ¨é’©å­å’Œå…¨å±€é’©å­\">#</a> å±€éƒ¨é’©å­å’Œå…¨å±€é’©å­</h4>\n<p>è¡¨å•ç»„ä»¶ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># mydjango/app/My_forms.py</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">from</span> django <span class=\"token keyword\">import</span> forms</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>core<span class=\"token punctuation\">.</span>exceptions <span class=\"token keyword\">import</span> ValidationError</pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">from</span> app <span class=\"token keyword\">import</span> models</pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">EmpForm</span><span class=\"token punctuation\">(</span>forms<span class=\"token punctuation\">.</span>Form<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    name <span class=\"token operator\">=</span> forms<span class=\"token punctuation\">.</span>CharField<span class=\"token punctuation\">(</span>min_length<span class=\"token operator\">=</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span> label<span class=\"token operator\">=</span><span class=\"token string\">\"å§“å\"</span><span class=\"token punctuation\">,</span> error_messages<span class=\"token operator\">=</span><span class=\"token punctuation\">&#123;</span><span class=\"token string\">\"required\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"è¯¥å­—æ®µä¸èƒ½ä¸ºç©º!\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"min_length\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"ç”¨æˆ·åå¤ªçŸ­ã€‚\"</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    age <span class=\"token operator\">=</span> forms<span class=\"token punctuation\">.</span>IntegerField<span class=\"token punctuation\">(</span>label<span class=\"token operator\">=</span><span class=\"token string\">\"å¹´é¾„\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    salary <span class=\"token operator\">=</span> forms<span class=\"token punctuation\">.</span>DecimalField<span class=\"token punctuation\">(</span>max_digits<span class=\"token operator\">=</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span> decimal_places<span class=\"token operator\">=</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> label<span class=\"token operator\">=</span><span class=\"token string\">\"å·¥èµ„\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    r_salary <span class=\"token operator\">=</span> forms<span class=\"token punctuation\">.</span>DecimalField<span class=\"token punctuation\">(</span>max_digits<span class=\"token operator\">=</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span> decimal_places<span class=\"token operator\">=</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> label<span class=\"token operator\">=</span><span class=\"token string\">\"è¯·å†è¾“å…¥å·¥èµ„\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token keyword\">def</span> <span class=\"token function\">clean_name</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>  <span class=\"token comment\"># å±€éƒ¨é’©å­</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        val <span class=\"token operator\">=</span> self<span class=\"token punctuation\">.</span>cleaned_data<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">\"name\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token keyword\">if</span> val<span class=\"token punctuation\">.</span>isdigit<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>            <span class=\"token keyword\">raise</span> ValidationError<span class=\"token punctuation\">(</span><span class=\"token string\">\"ç”¨æˆ·åä¸èƒ½æ˜¯çº¯æ•°å­—\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        <span class=\"token keyword\">elif</span> models<span class=\"token punctuation\">.</span>Emp<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span><span class=\"token builtin\">filter</span><span class=\"token punctuation\">(</span>name<span class=\"token operator\">=</span>val<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>            <span class=\"token keyword\">raise</span> ValidationError<span class=\"token punctuation\">(</span><span class=\"token string\">\"ç”¨æˆ·åå·²å­˜åœ¨ï¼\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        <span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>            <span class=\"token keyword\">return</span> val</pre></td></tr><tr><td data-num=\"20\"></td><td><pre></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    <span class=\"token keyword\">def</span> <span class=\"token function\">clean</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>  <span class=\"token comment\"># å…¨å±€é’©å­ ç¡®è®¤ä¸¤æ¬¡è¾“å…¥çš„å·¥èµ„æ˜¯å¦ä¸€è‡´ã€‚</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>        val <span class=\"token operator\">=</span> self<span class=\"token punctuation\">.</span>cleaned_data<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">\"salary\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>        r_val <span class=\"token operator\">=</span> self<span class=\"token punctuation\">.</span>cleaned_data<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">\"r_salary\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre></pre></td></tr><tr><td data-num=\"25\"></td><td><pre></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>        <span class=\"token keyword\">if</span> val <span class=\"token operator\">==</span> r_val<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>            <span class=\"token keyword\">return</span> self<span class=\"token punctuation\">.</span>cleaned_data</pre></td></tr><tr><td data-num=\"28\"></td><td><pre>        <span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>            <span class=\"token keyword\">raise</span> ValidationError<span class=\"token punctuation\">(</span><span class=\"token string\">\"è¯·ç¡®è®¤å·¥èµ„æ˜¯å¦ä¸€è‡´ã€‚\"</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>è§†å›¾å¤„ç†ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">add_emp</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">if</span> request<span class=\"token punctuation\">.</span>method <span class=\"token operator\">==</span> <span class=\"token string\">\"GET\"</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        form <span class=\"token operator\">=</span> EmpForm<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># åˆå§‹åŒ– form å¯¹è±¡</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token keyword\">return</span> render<span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">,</span> <span class=\"token string\">\"add_emp.html\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span><span class=\"token string\">\"form\"</span><span class=\"token punctuation\">:</span>form<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        form <span class=\"token operator\">=</span> EmpForm<span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">.</span>POST<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># å°†æ•°æ®ä¼ ç»™ form å¯¹è±¡</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token keyword\">if</span> form<span class=\"token punctuation\">.</span>is_valid<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>  <span class=\"token comment\"># è¿›è¡Œæ ¡éªŒ</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>            data <span class=\"token operator\">=</span> form<span class=\"token punctuation\">.</span>cleaned_data</pre></td></tr><tr><td data-num=\"9\"></td><td><pre>            data<span class=\"token punctuation\">.</span>pop<span class=\"token punctuation\">(</span><span class=\"token string\">\"r_salary\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>            models<span class=\"token punctuation\">.</span>Emp<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>create<span class=\"token punctuation\">(</span><span class=\"token operator\">**</span>data<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>            <span class=\"token keyword\">return</span> redirect<span class=\"token punctuation\">(</span><span class=\"token string\">\"/index/\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span>  <span class=\"token comment\"># æ ¡éªŒå¤±è´¥</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>            clear_errors <span class=\"token operator\">=</span> form<span class=\"token punctuation\">.</span>errors<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">\"__all__\"</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># è·å–å…¨å±€é’©å­é”™è¯¯ä¿¡æ¯</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>            <span class=\"token keyword\">return</span> render<span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">,</span> <span class=\"token string\">\"add_emp.html\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span><span class=\"token string\">\"form\"</span><span class=\"token punctuation\">:</span> form<span class=\"token punctuation\">,</span> <span class=\"token string\">\"clear_errors\"</span><span class=\"token punctuation\">:</span> clear_errors<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>æ¨¡æ¿ï¼š</p>\n<figure class=\"highlight html\"><figcaption data-lang=\"HTML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>form</span> <span class=\"token attr-name\">action</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">method</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>post<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">novalidate</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    &#123;.% csrf_token %&#125;</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>label</span> <span class=\"token attr-name\">for</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>id_&#123;.&#123; form.name.name &#125;&#125;<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>å§“å<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>label</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        &#123;.&#123; form.name &#125;&#125; <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span><span class=\"token punctuation\">></span></span>&#123;.&#123; form.name.errors.0 &#125;&#125;<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>label</span> <span class=\"token attr-name\">for</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>id_&#123;.&#123; form.age.name &#125;&#125;<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>å¹´é¾„<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>label</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        &#123;.&#123; form.age &#125;&#125; <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span><span class=\"token punctuation\">></span></span>&#123;.&#123; form.age.errors.0 &#125;&#125;<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>label</span> <span class=\"token attr-name\">for</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>id_salary<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>å·¥èµ„<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>label</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        &#123;.&#123; form.salary &#125;&#125; <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span><span class=\"token punctuation\">></span></span>&#123;.&#123; form.salary.errors.0 &#125;&#125;&#123;.&#123; clear_errors.0 &#125;&#125;<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>label</span> <span class=\"token attr-name\">for</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>id_r_salary<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>è¯·å†è¾“å…¥å·¥èµ„<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>label</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        &#123;.&#123; form.r_salary &#125;&#125; <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span><span class=\"token punctuation\">></span></span>&#123;.&#123; form.r_salary.errors.0 &#125;&#125;&#123;.&#123; clear_errors.0 &#125;&#125;<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>submit<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>form</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><blockquote>\n<p>æ³¨ï¼šè¿™ä¸€éƒ¨åˆ†çš„ä»£ç ç¤ºä¾‹åŸºæœ¬æ˜¯ä»<span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cucnVub29iLmNvbS9kamFuZ28vZGphbmdvLWZvcm0tY29tcG9uZW50Lmh0bWw=\"> Django Form ç»„ä»¶ | èœé¸Ÿæ•™ç¨‹</span>ç›´æ¥æ‹·è´è¿‡æ¥çš„ã€‚ï¼ˆç›®å‰çš„ WEB åº”ç”¨åŸºæœ¬éƒ½æ˜¯å‰åç«¯åˆ†ç¦»çš„ï¼Œå°±å®é™…è€Œè¨€ï¼Œè¿™ä¸€å°èŠ‚å†…å®¹çš„ä»·å€¼å¹¶ä¸å¤§ï¼Œå› æ­¤ï¼Œå¯¹äºè¿™ä¸€éƒ¨åˆ†çš„ä»£ç ä¹Ÿæœªåšå®é™…çš„æ“ä½œéªŒè¯ï¼‰</p>\n</blockquote>\n<h3 id=\"django-auth\"><a class=\"anchor\" href=\"#django-auth\">#</a> Django Auth</h3>\n<p>Django ç”¨æˆ·è®¤è¯ç»„ä»¶éœ€è¦å¯¼å…¥ auth æ¨¡å—ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># è®¤è¯æ¨¡å—</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>contrib <span class=\"token keyword\">import</span> auth</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\"># å¯¹åº”æ•°æ®åº“</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>contrib<span class=\"token punctuation\">.</span>auth<span class=\"token punctuation\">.</span>models <span class=\"token keyword\">import</span> User</pre></td></tr></table></figure><h4 id=\"ç”¨æˆ·çº§åˆ«\"><a class=\"anchor\" href=\"#ç”¨æˆ·çº§åˆ«\">#</a> ç”¨æˆ·çº§åˆ«</h4>\n<p>å¯ä»¥é€šè¿‡å¦‚ä¸‹æ–¹æ³•åˆ›å»ºç”¨æˆ·å¯¹è±¡ï¼š</p>\n<ol>\n<li>\n<p><code>create()</code>  åˆ›å»ºä¸€ä¸ªæ™®é€šç”¨æˆ·ï¼Œå¯†ç æ˜¯æ˜æ–‡çš„ã€‚</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>User<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>create<span class=\"token punctuation\">(</span>username<span class=\"token operator\">=</span><span class=\"token string\">'test'</span><span class=\"token punctuation\">,</span> password<span class=\"token operator\">=</span><span class=\"token string\">'123456'</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure></li>\n<li>\n<p><code>create_user()</code>  åˆ›å»ºä¸€ä¸ªæ™®é€šç”¨æˆ·ï¼Œå¯†ç æ˜¯å¯†æ–‡çš„ã€‚</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>User<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>create_user<span class=\"token punctuation\">(</span>username<span class=\"token operator\">=</span><span class=\"token string\">'zhangsan'</span><span class=\"token punctuation\">,</span> password<span class=\"token operator\">=</span><span class=\"token string\">'123456'</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure></li>\n<li>\n<p><code>create_superuser</code>  åˆ›å»ºä¸€ä¸ªè¶…çº§ç”¨æˆ·ï¼Œå¯†ç æ˜¯å¯†æ–‡çš„ï¼Œè¦å¤šä¼ ä¸€ä¸ªé‚®ç®± email å‚æ•°ã€‚</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>User<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>create_superuser<span class=\"token punctuation\">(</span>username<span class=\"token operator\">=</span><span class=\"token string\">'chinmoku'</span><span class=\"token punctuation\">,</span> password<span class=\"token operator\">=</span><span class=\"token string\">'123456'</span><span class=\"token punctuation\">,</span> email<span class=\"token operator\">=</span><span class=\"token string\">'chinmoku@xxx.com'</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure></li>\n</ol>\n<h4 id=\"ç”¨æˆ·éªŒè¯\"><a class=\"anchor\" href=\"#ç”¨æˆ·éªŒè¯\">#</a> ç”¨æˆ·éªŒè¯</h4>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>contrib <span class=\"token keyword\">import</span> auth</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">login</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">if</span> request<span class=\"token punctuation\">.</span>method <span class=\"token operator\">==</span> <span class=\"token string\">\"GET\"</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token keyword\">return</span> render<span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">,</span> <span class=\"token string\">\"login.html\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    username <span class=\"token operator\">=</span> request<span class=\"token punctuation\">.</span>POST<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">\"username\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    password <span class=\"token operator\">=</span> request<span class=\"token punctuation\">.</span>POST<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">\"pwd\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    valid_num <span class=\"token operator\">=</span> request<span class=\"token punctuation\">.</span>POST<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">\"valid_num\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    keep_str <span class=\"token operator\">=</span> request<span class=\"token punctuation\">.</span>session<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">\"keep_str\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token keyword\">if</span> keep_str<span class=\"token punctuation\">.</span>upper<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> valid_num<span class=\"token punctuation\">.</span>upper<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        user_obj <span class=\"token operator\">=</span> auth<span class=\"token punctuation\">.</span>authenticate<span class=\"token punctuation\">(</span>username<span class=\"token operator\">=</span>username<span class=\"token punctuation\">,</span> password<span class=\"token operator\">=</span>password<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>user_obj<span class=\"token punctuation\">.</span>username<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token keyword\">if</span> <span class=\"token keyword\">not</span> user_obj<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>            <span class=\"token keyword\">return</span> redirect<span class=\"token punctuation\">(</span><span class=\"token string\">\"/login/\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        <span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>            auth<span class=\"token punctuation\">.</span>login<span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">,</span> user_obj<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>            path <span class=\"token operator\">=</span> request<span class=\"token punctuation\">.</span>GET<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">\"next\"</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">or</span> <span class=\"token string\">\"/index/\"</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>            <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>path<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>            <span class=\"token keyword\">return</span> redirect<span class=\"token punctuation\">(</span>path<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>        <span class=\"token keyword\">return</span> redirect<span class=\"token punctuation\">(</span><span class=\"token string\">\"/login/\"</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>å¦‚æœç”¨æˆ·è´¦å·å¯†ç éªŒè¯é€šè¿‡ï¼Œåˆ™è¿”å›è¯¥ç”¨æˆ·å¯¹è±¡ï¼Œå¦åˆ™ï¼Œè¿”å› Noneã€‚</p>\n<h4 id=\"ç”¨æˆ·æ³¨é”€\"><a class=\"anchor\" href=\"#ç”¨æˆ·æ³¨é”€\">#</a> ç”¨æˆ·æ³¨é”€</h4>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>contrib <span class=\"token keyword\">import</span> auth</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">logout</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    _out <span class=\"token operator\">=</span> auth<span class=\"token punctuation\">.</span>logout<span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>_out<span class=\"token punctuation\">)</span> <span class=\"token comment\"># None</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">return</span> redirect<span class=\"token punctuation\">(</span><span class=\"token string\">\"/login/\"</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><h4 id=\"ç™»å½•é‡å®šå‘\"><a class=\"anchor\" href=\"#ç™»å½•é‡å®šå‘\">#</a> ç™»å½•é‡å®šå‘</h4>\n<p>å¯ä»¥é€šè¿‡è£…é¥°å™¨ï¼ŒæŒ‡å®šæŸé¡µé¢éœ€è¦ç™»å½•æ‰èƒ½è®¿é—®ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>contrib<span class=\"token punctuation\">.</span>auth<span class=\"token punctuation\">.</span>decorators <span class=\"token keyword\">import</span> login_required</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token decorator annotation punctuation\">@login_required</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">index</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    data <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">return</span> render<span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">,</span> <span class=\"token string\">'index.html'</span><span class=\"token punctuation\">,</span> data<span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>æ­¤æ—¶è®¿é—® <span class=\"exturl\" data-url=\"aHR0cDovLzEyNy4wLjAuMTo4MDAwL2luZGV4Lw==\">http://127.0.0.1:8000/index/</span> ï¼Œå¦‚æœç”¨æˆ·æœªç™»å½•ï¼Œåˆ™ä¼šè¢«é‡å®šå‘åˆ° <span class=\"exturl\" data-url=\"aHR0cDovLzEyNy4wLjAuMTo4MDAwL2xvZ2luLz9uZXh0PS9pbmRleC8=\">http://127.0.0.1:8000/login/?next=/index/</span> é¡µé¢ã€‚</p>\n<p>å½“ç”¨æˆ·ç™»å½•æ—¶ï¼Œå¯ä»¥é€šè¿‡å¦‚ä¸‹æ–¹å¼è¿›è¡Œå¤„ç†ï¼Œä½¿å…¶ç™»å½•æˆåŠŸåé‡å®šå‘åˆ° <span class=\"exturl\" data-url=\"aHR0cDovLzEyNy4wLjAuMTo4MDAwL2luZGV4Lw==\">http://127.0.0.1:8000/index/</span> é¡µé¢ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>path <span class=\"token operator\">=</span> request<span class=\"token punctuation\">.</span>GET<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">\"next\"</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">or</span> <span class=\"token string\">\"/index/\"</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">return</span> redirect<span class=\"token punctuation\">(</span>path<span class=\"token punctuation\">)</span></pre></td></tr></table></figure><h3 id=\"cookies-session\"><a class=\"anchor\" href=\"#cookies-session\">#</a> Cookies &amp; Session</h3>\n<h4 id=\"django-cookies-æ“ä½œ\"><a class=\"anchor\" href=\"#django-cookies-æ“ä½œ\">#</a> Django Cookies æ“ä½œ</h4>\n<p>Cookies åœ¨ Django ä¸­çš„ç®€å•åº”ç”¨å¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">login</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">if</span> request<span class=\"token punctuation\">.</span>method <span class=\"token operator\">==</span> <span class=\"token string\">\"GET\"</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        <span class=\"token keyword\">return</span> render<span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">,</span> <span class=\"token string\">\"login.html\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    username <span class=\"token operator\">=</span> request<span class=\"token punctuation\">.</span>POST<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">\"username\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    password <span class=\"token operator\">=</span> request<span class=\"token punctuation\">.</span>POST<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">\"pwd\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    user_obj <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>UserInfo<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span><span class=\"token builtin\">filter</span><span class=\"token punctuation\">(</span>username<span class=\"token operator\">=</span>username<span class=\"token punctuation\">,</span> password<span class=\"token operator\">=</span>password<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>first<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>user_obj<span class=\"token punctuation\">.</span>username<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token keyword\">if</span> <span class=\"token keyword\">not</span> user_obj<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token keyword\">return</span> redirect<span class=\"token punctuation\">(</span><span class=\"token string\">\"/login/\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        rep <span class=\"token operator\">=</span> redirect<span class=\"token punctuation\">(</span><span class=\"token string\">\"/index/\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        rep<span class=\"token punctuation\">.</span>set_cookie<span class=\"token punctuation\">(</span><span class=\"token string\">\"is_login\"</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># è®¾ç½® Cookies</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        <span class=\"token keyword\">return</span> rep</pre></td></tr><tr><td data-num=\"16\"></td><td><pre>       </pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">index</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">.</span>COOKIES<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">'is_login'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    status <span class=\"token operator\">=</span> request<span class=\"token punctuation\">.</span>COOKIES<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">'is_login'</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># è·å– Cookies</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token keyword\">if</span> <span class=\"token keyword\">not</span> status<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>        <span class=\"token keyword\">return</span> redirect<span class=\"token punctuation\">(</span><span class=\"token string\">'/login/'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    <span class=\"token keyword\">return</span> render<span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">,</span> <span class=\"token string\">\"index.html\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre></pre></td></tr><tr><td data-num=\"24\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">logout</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>    rep <span class=\"token operator\">=</span> redirect<span class=\"token punctuation\">(</span><span class=\"token string\">'/login/'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>    rep<span class=\"token punctuation\">.</span>delete_cookie<span class=\"token punctuation\">(</span><span class=\"token string\">\"is_login\"</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># åˆ é™¤ Cookies</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>    <span class=\"token keyword\">return</span> rep</pre></td></tr><tr><td data-num=\"28\"></td><td><pre>   </pre></td></tr><tr><td data-num=\"29\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">order</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">.</span>COOKIES<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">'is_login'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>    status <span class=\"token operator\">=</span> request<span class=\"token punctuation\">.</span>COOKIES<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">'is_login'</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># è·å– Cookies</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>    <span class=\"token keyword\">if</span> <span class=\"token keyword\">not</span> status<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>        <span class=\"token keyword\">return</span> redirect<span class=\"token punctuation\">(</span><span class=\"token string\">'/login/'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>    <span class=\"token keyword\">return</span> render<span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">,</span> <span class=\"token string\">\"order.html\"</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><h4 id=\"django-session-æ“ä½œ\"><a class=\"anchor\" href=\"#django-session-æ“ä½œ\">#</a> Django Session æ“ä½œ</h4>\n<p>Session åœ¨ Django ä¸­çš„ç®€å•åº”ç”¨å¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">login</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">if</span> request<span class=\"token punctuation\">.</span>method <span class=\"token operator\">==</span> <span class=\"token string\">\"GET\"</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        <span class=\"token keyword\">return</span> render<span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">,</span> <span class=\"token string\">\"login.html\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    username <span class=\"token operator\">=</span> request<span class=\"token punctuation\">.</span>POST<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">\"username\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    password <span class=\"token operator\">=</span> request<span class=\"token punctuation\">.</span>POST<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">\"pwd\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    user_obj <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>UserInfo<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span><span class=\"token builtin\">filter</span><span class=\"token punctuation\">(</span>username<span class=\"token operator\">=</span>username<span class=\"token punctuation\">,</span> password<span class=\"token operator\">=</span>password<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>first<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>user_obj<span class=\"token punctuation\">.</span>username<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token keyword\">if</span> <span class=\"token keyword\">not</span> user_obj<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token keyword\">return</span> redirect<span class=\"token punctuation\">(</span><span class=\"token string\">\"/session_login/\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        request<span class=\"token punctuation\">.</span>session<span class=\"token punctuation\">[</span><span class=\"token string\">'is_login'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token boolean\">True</span>  <span class=\"token comment\"># è®¾ç½® session</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        request<span class=\"token punctuation\">.</span>session<span class=\"token punctuation\">[</span><span class=\"token string\">'user1'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> username</pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        <span class=\"token keyword\">return</span> redirect<span class=\"token punctuation\">(</span><span class=\"token string\">\"/s_index/\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">s_index</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    status <span class=\"token operator\">=</span> request<span class=\"token punctuation\">.</span>session<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">'is_login'</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># è·å– session</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token keyword\">if</span> <span class=\"token keyword\">not</span> status<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>        <span class=\"token keyword\">return</span> redirect<span class=\"token punctuation\">(</span><span class=\"token string\">'/session_login/'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    <span class=\"token keyword\">return</span> render<span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">,</span> <span class=\"token string\">\"s_index.html\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre></pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">s_logout</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>    <span class=\"token comment\"># del request.session [\"is_login\"] # åˆ é™¤ session_data é‡Œçš„ä¸€ç»„é”®å€¼å¯¹</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>    request<span class=\"token punctuation\">.</span>session<span class=\"token punctuation\">.</span>flush<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># åˆ é™¤ä¸€æ¡è®°å½•åŒ…æ‹¬ (session_key session_data expire_date) ä¸‰ä¸ªå­—æ®µ</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>    <span class=\"token keyword\">return</span> redirect<span class=\"token punctuation\">(</span><span class=\"token string\">'/session_login/'</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><h3 id=\"django-ä¸­é—´ä»¶\"><a class=\"anchor\" href=\"#django-ä¸­é—´ä»¶\">#</a> Django ä¸­é—´ä»¶</h3>\n<p>Django ä¸­é—´ä»¶æ˜¯ä¿®æ”¹ Django request æˆ–è€… response å¯¹è±¡çš„é’©å­ï¼Œå®ƒå¯ä»¥åœ¨ç”¨æˆ·è¯·æ±‚ä¹‹åã€æœåŠ¡å“åº”ä¹‹å‰åšå‡ºä¸€äº›ç‰¹å®šçš„å¤„ç†ã€‚</p>\n<blockquote>\n<p>æ¯ä¸ªä¸­é—´ä»¶éƒ½éœ€è¦åœ¨ <span class=\"exturl\" data-url=\"aHR0cDovL3NldHRpbmdzLnB5\">settings.py</span> ä¸­çš„  <code>MIDDLEWARE</code>  ä¸‹è¿›è¡Œé…ç½®ã€‚</p>\n</blockquote>\n<h4 id=\"è‡ªå®šä¹‰ä¸­é—´ä»¶\"><a class=\"anchor\" href=\"#è‡ªå®šä¹‰ä¸­é—´ä»¶\">#</a> è‡ªå®šä¹‰ä¸­é—´ä»¶</h4>\n<p>åˆ›å»ºä¸­é—´ä»¶æ–‡ä»¶ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># mydjango/app/middlewares.py</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>utils<span class=\"token punctuation\">.</span>deprecation <span class=\"token keyword\">import</span> MiddlewareMixin</pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">MD1</span><span class=\"token punctuation\">(</span>MiddlewareMixin<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token comment\"># ä¸­é—´ä»¶éœ€è¦ç»§æ‰¿ MiddlewareMixin</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">pass</span></pre></td></tr></table></figure><p>åœ¨ <span class=\"exturl\" data-url=\"aHR0cDovL3NldHRpbmdzLnB5\">settings.py</span> ä¸­è¿›è¡Œæ³¨å†Œï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># mydjango/mydjango/settings.py</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>MIDDLEWARE <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token string\">'django.middleware.security.SecurityMiddleware'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token string\">'django.contrib.sessions.middleware.SessionMiddleware'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token string\">'django.middleware.common.CommonMiddleware'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token string\">'django.middleware.csrf.CsrfViewMiddleware'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token string\">'django.contrib.auth.middleware.AuthenticationMiddleware'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token string\">'django.contrib.messages.middleware.MessageMiddleware'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token string\">'django.middleware.clickjacking.XFrameOptionsMiddleware'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token string\">'app.middlewares.MD1'</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token punctuation\">]</span></pre></td></tr></table></figure><h4 id=\"ä¸­é—´ä»¶æ–¹æ³•\"><a class=\"anchor\" href=\"#ä¸­é—´ä»¶æ–¹æ³•\">#</a> ä¸­é—´ä»¶æ–¹æ³•</h4>\n<p>ä¸­é—´ä»¶ç±»ä¸­å¯ä»¥å®šä¹‰å¦‚ä¸‹æ–¹æ³•ï¼š</p>\n<ol>\n<li>process_request</li>\n<li>process_view</li>\n<li>process_exception</li>\n<li>process_response</li>\n</ol>\n<p>æ–¹æ³•å®šä¹‰å®ä¾‹ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># mydjango/app/middlewares.py</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>utils<span class=\"token punctuation\">.</span>deprecation <span class=\"token keyword\">import</span> MiddlewareMixin</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>shortcuts <span class=\"token keyword\">import</span> render<span class=\"token punctuation\">,</span> HttpResponse</pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">MD1</span><span class=\"token punctuation\">(</span>MiddlewareMixin<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">def</span> <span class=\"token function\">process_request</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"md1  process_request æ–¹æ³•ã€‚\"</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">id</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># åœ¨è§†å›¾ä¹‹å‰æ‰§è¡Œ</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token keyword\">def</span> <span class=\"token function\">process_response</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> request<span class=\"token punctuation\">,</span> response<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>  <span class=\"token comment\"># åŸºäºè¯·æ±‚å“åº”</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"md1  process_response æ–¹æ³•ï¼\"</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">id</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># åœ¨è§†å›¾ä¹‹å</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token keyword\">return</span> response</pre></td></tr><tr><td data-num=\"13\"></td><td><pre></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token keyword\">def</span> <span class=\"token function\">process_view</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> request<span class=\"token punctuation\">,</span> view_func<span class=\"token punctuation\">,</span> view_args<span class=\"token punctuation\">,</span> view_kwargs<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"md1  process_view æ–¹æ³•ï¼\"</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># åœ¨è§†å›¾ä¹‹å‰æ‰§è¡Œ é¡ºåºæ‰§è¡Œ</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        <span class=\"token keyword\">return</span> view_func<span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token keyword\">def</span> <span class=\"token function\">process_exception</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> request<span class=\"token punctuation\">,</span> exception<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>  <span class=\"token comment\"># å¼•å‘é”™è¯¯ æ‰ä¼šè§¦å‘è¿™ä¸ªæ–¹æ³•</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"md1  process_exception æ–¹æ³•ï¼\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>        <span class=\"token keyword\">return</span> HttpResponse<span class=\"token punctuation\">(</span>exception<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># è¿”å›é”™è¯¯ä¿¡æ¯</span></pre></td></tr></table></figure><blockquote>\n<p>æ³¨ï¼šä¸ªäººï¼ˆåŸºäº JAVAï¼‰ç†è§£ï¼Œè¿™é‡Œçš„ã€ä¸­é—´ä»¶ã€‘æ¦‚å¿µï¼Œå…¶å®ç›¸å½“äº Spring çš„åˆ‡é¢ï¼Œæˆ–è€…æ‹¦æˆªå™¨ç­‰ï¼Œèƒ½å¤Ÿåœ¨ä¸€ä¸ªè¯·æ±‚çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸä¸­è¿›è¡Œç›‘æ§å¤„ç†ã€‚</p>\n</blockquote>\n<h3 id=\"fbv-cbv\"><a class=\"anchor\" href=\"#fbv-cbv\">#</a> FBV &amp; CBV</h3>\n<ol>\n<li>\n<p>FBV</p>\n<p>FBVï¼ˆfunction base viewsï¼‰åŸºäºå‡½æ•°çš„è§†å›¾ï¼Œå°±æ˜¯åœ¨è§†å›¾é‡Œä½¿ç”¨å‡½æ•°å¤„ç†è¯·æ±‚ã€‚</p>\n<p>å…¶å®å°±æ˜¯ä¸Šæ–‡ä¸­é¢‘ç¹ä½¿ç”¨çš„è¯·æ±‚å¤„ç†æ–¹å¼ã€‚</p>\n</li>\n<li>\n<p>CBV</p>\n<p>CBVï¼ˆclass base viewsï¼‰åŸºäºç±»çš„è§†å›¾ï¼Œå°±æ˜¯åœ¨è§†å›¾é‡Œä½¿ç”¨ç±»å¤„ç†è¯·æ±‚ã€‚</p>\n<p>CBV ä¸»è¦é€šè¿‡ View æä¾›çš„é™æ€æ–¹æ³•  <code>as_view()</code>  æ¥å®ç°ï¼Œas_view æ–¹æ³•æ˜¯åŸºäºç±»çš„å¤–éƒ¨æ¥å£ï¼Œä»–è¿”å›ä¸€ä¸ªè§†å›¾å‡½æ•°ï¼Œè°ƒç”¨åè¯·æ±‚ä¼šä¼ é€’ç»™ dispatch æ–¹æ³•ï¼Œdispatch æ–¹æ³•å†æ ¹æ®ä¸åŒè¯·æ±‚æ¥å¤„ç†ä¸åŒçš„æ–¹æ³•ã€‚</p>\n<p>ç¤ºä¾‹ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>shortcuts <span class=\"token keyword\">import</span> render<span class=\"token punctuation\">,</span>HttpResponse</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>views <span class=\"token keyword\">import</span> View</pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">Login</span><span class=\"token punctuation\">(</span>View<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>  <span class=\"token comment\"># CBV ç±»éœ€è¦ç»§æ‰¿ View</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">def</span> <span class=\"token function\">get</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span>request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token keyword\">return</span> HttpResponse<span class=\"token punctuation\">(</span><span class=\"token string\">\"GET æ–¹æ³•\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token keyword\">def</span> <span class=\"token function\">post</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span>request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        user <span class=\"token operator\">=</span> request<span class=\"token punctuation\">.</span>POST<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">\"user\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        pwd <span class=\"token operator\">=</span> request<span class=\"token punctuation\">.</span>POST<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">\"pwd\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token keyword\">if</span> user <span class=\"token operator\">==</span> <span class=\"token string\">\"runoob\"</span> <span class=\"token keyword\">and</span> pwd <span class=\"token operator\">==</span> <span class=\"token string\">\"123456\"</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>            <span class=\"token keyword\">return</span> HttpResponse<span class=\"token punctuation\">(</span><span class=\"token string\">\"POST æ–¹æ³•\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>            <span class=\"token keyword\">return</span> HttpResponse<span class=\"token punctuation\">(</span><span class=\"token string\">\"POST æ–¹æ³• 1\"</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>è·¯ç”±ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>urlpatterns <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    path<span class=\"token punctuation\">(</span><span class=\"token string\">\"login/\"</span><span class=\"token punctuation\">,</span> views<span class=\"token punctuation\">.</span>Login<span class=\"token punctuation\">.</span>as_view<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token punctuation\">]</span></pre></td></tr></table></figure></li>\n</ol>\n<h3 id=\"django-éƒ¨ç½²\"><a class=\"anchor\" href=\"#django-éƒ¨ç½²\">#</a> Django éƒ¨ç½²</h3>\n<h4 id=\"nginx-uwsgi\"><a class=\"anchor\" href=\"#nginx-uwsgi\">#</a> Nginx + uwsgi</h4>\n<p><span class=\"label danger\">â—ï¸TODO</span> å¾…å®Œå–„</p>\n<h3 id=\"æ–‡æœ«æ€»ç»“\"><a class=\"anchor\" href=\"#æ–‡æœ«æ€»ç»“\">#</a> æ–‡æœ«æ€»ç»“</h3>\n<div class=\"note info\">\n<p>å†™è¿™ä¸€ç¯‡åšå®¢æ—¶ï¼Œå…ˆæ˜¯è·Ÿç€ B ç«™è§†é¢‘å­¦äº†ä¸€æ®µï¼Œåé¢è§‰å¾—è®²å¾—ä¸€èˆ¬ï¼Œå°±æ”¾å¼ƒäº†ï¼Œè½¬è€Œè·Ÿç€èœé¸Ÿæ•™ç¨‹ç¼–å†™ç¬”è®°ï¼Œæ–­æ–­ç»­ç»­ï¼Œå·®ä¸å¤šç”¨äº†ä¸¤å‘¨å¤šçš„æ—¶é—´ã€‚ä¸­é€”ä¹Ÿåœ¨çœ‹ Django å¼€å‘çš„å¼€æºé¡¹ç›®ï¼Œæ„Ÿè§‰æŒºæœ‰è¶£çš„ï¼Œè¿™é‡Œå¼ºçƒˆæ¨èä¸€ä¸‹ï¼š<span class=\"exturl\" data-url=\"aHR0cHM6Ly9kamFuZ28tdnVlLWFkbWluLmNvbS8=\">Django-Vue-Admin</span>ï¼Œä¹Ÿå¯èƒ½æ˜¯å› ä¸ºæˆ‘å¯¹è‹¥ä¾ Java é‚£ä¸€å¥—å¾ˆç†Ÿæ‚‰ï¼Œæ‰€ä»¥è¿™ä¸ªå¼€æºé¡¹ç›®å¯¹æˆ‘æ¥è¯´ï¼Œè¦çœ‹æ‡‚ä¹Ÿä¸å¤ªéš¾ã€‚</p>\n</div>\n<h3 id=\"å‚è€ƒ\"><a class=\"anchor\" href=\"#å‚è€ƒ\">#</a> å‚è€ƒ</h3>\n<ul>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuYmlsaWJpbGkuY29tL3ZpZGVvL0JWMWkzNDExaTdhTA==\">https://www.bilibili.com/video/BV1i3411i7aL</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cucnVub29iLmNvbS9kamFuZ28vZGphbmdvLXR1dG9yaWFsLmh0bWw=\">https://www.runoob.com/django/django-tutorial.html</span></li>\n</ul>\n",
            "tags": [
                "è®¡ç®—æœºç§‘å­¦",
                "Pythonå…¥é—¨æ•™ç¨‹",
                "python"
            ]
        },
        {
            "id": "https://www.chinmoku.cc/computer-science/java-learning-path/3-advanced/zookeeper-tutorial/",
            "url": "https://www.chinmoku.cc/computer-science/java-learning-path/3-advanced/zookeeper-tutorial/",
            "title": "Zookeeper åŸºç¡€æ•™ç¨‹",
            "date_published": "2021-10-18T12:55:42.000Z",
            "content_html": "<div class=\"note info\">\n<p>è¿™ç¯‡æ–‡ç« åŸæœ¬æ˜¯è·Ÿç€ B ç«™æ•™å­¦è§†é¢‘å­¦ä¹  Zookeeper æ—¶è®°å½•ä¸‹çš„ç¬”è®°ï¼Œä½†åæ¥å†æ¬¡æŸ¥çœ‹æ—¶ï¼Œå‘ç°åŸæœ¬ç¬”è®°ä¸­å¾ˆå¤šå†…å®¹å¹¶ä¸æ˜¯å¤ªæ¸…æ™°ï¼Œå› æ­¤ä¹Ÿæ•´ç†å‚è€ƒäº†ä¸€äº›å…¶ä»–çš„æ–‡ç« ï¼Œè¿›è¡Œç»¼åˆæ•´ç†ï¼Œå¸Œæœ›èƒ½å¤Ÿå°½å¯èƒ½è¯¦å°½åœ°è§¦åŠåˆ° ZK ç›¸å…³çš„æ‰€æœ‰åŸºç¡€çŸ¥è¯†ç‚¹ã€‚</p>\n</div>\n<h3 id=\"æ¦‚è¿°\"><a class=\"anchor\" href=\"#æ¦‚è¿°\">#</a> æ¦‚è¿°</h3>\n<blockquote>\n<p>Zookeeper æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼çš„ï¼Œå¼€æ”¾æºç çš„åˆ†å¸ƒå¼åº”ç”¨ç¨‹åºåè°ƒæœåŠ¡ï¼Œæ˜¯ Google çš„ Chubby ä¸€ä¸ªå¼€æºçš„å®ç°ï¼Œæ˜¯ Hadoop å’Œ Hbase çš„é‡è¦ç»„ä»¶ã€‚å®ƒæ˜¯ä¸€ä¸ªä¸ºåˆ†å¸ƒå¼åº”ç”¨æä¾›ä¸€è‡´æ€§æœåŠ¡çš„è½¯ä»¶ï¼Œæä¾›çš„åŠŸèƒ½åŒ…æ‹¬ï¼šé…ç½®ç»´æŠ¤ã€åŸŸåæœåŠ¡ã€åˆ†å¸ƒå¼åŒæ­¥ã€ç»„æœåŠ¡ç­‰ã€‚</p>\n<p>quote from <span class=\"exturl\" data-url=\"aHR0cHM6Ly9iYWlrZS5iYWlkdS5jb20vaXRlbS96b29rZWVwZXI=\">ç™¾åº¦ç™¾ç§‘_zookeeper</span></p>\n</blockquote>\n<p><code>Zookeeper</code>  ä»è®¾è®¡æ¨¡å¼è§’åº¦æ¥ç†è§£ï¼šæ˜¯ä¸€ä¸ªåŸºäºè§‚å¯Ÿè€…æ¨¡å¼è®¾è®¡çš„åˆ†å¸ƒå¼æœåŠ¡ç®¡ç†æ¡†æ¶ï¼Œå®ƒè´Ÿè´£å­˜å‚¨æ•°æ®ï¼Œå¹¶æ¥å—è§‚å¯Ÿè€…çš„æ³¨å†Œï¼Œä¸€æ—¦è¿™äº›æ•°æ®çš„çŠ¶æ€å‘ç”Ÿå˜åŒ–ï¼ŒZK å°±ä¼šè´Ÿè´£é€šçŸ¥å·²ç»åœ¨ ZK ä¸Šæ³¨å†Œçš„é‚£äº›è§‚å¯Ÿè€…åšå‡ºç›¸åº”çš„ååº”ã€‚</p>\n<h4 id=\"zookeeper-çš„ç‰¹ç‚¹\"><a class=\"anchor\" href=\"#zookeeper-çš„ç‰¹ç‚¹\">#</a> Zookeeper çš„ç‰¹ç‚¹</h4>\n<ol>\n<li>å®ƒæ˜¯ç”±ä¸€ä¸ª  <code>Leader</code> ï¼Œå¤šä¸ª  <code>Follower</code>  ç»„æˆçš„ç»§æ‰¿ã€‚</li>\n<li>å…¨å±€æ•°æ®ä¸€è‡´ï¼šæ¯ä¸ª Server ä¿å­˜ä¸€ä»½ç›¸åŒçš„æ•°æ®å‰¯æœ¬ï¼ŒClient æ— è®ºè¿æ¥åˆ°å“ªä¸ª Serverï¼Œæ•°æ®éƒ½æ˜¯ä¸€è‡´çš„ã€‚</li>\n<li>å¯é æ€§ï¼šå¦‚æœæ¶ˆæ¯è¢«å…¶ä¸­ä¸€å°æœåŠ¡å™¨æ¥æ”¶ï¼Œé‚£ä¹ˆå°†è¢«æ‰€æœ‰æœåŠ¡å™¨æ¥æ”¶ã€‚</li>\n<li>é¡ºåºæ€§ï¼šæ›´æ–°è¯·æ±‚é¡ºåºæ‰§è¡Œï¼Œæ¥è‡ªåŒä¸€ä¸ªå®¢æˆ·ç«¯çš„æ›´æ–°è¯·æ±‚æŒ‰å…¶å‘é€é¡ºåºä¾æ¬¡æ‰§è¡Œã€‚</li>\n<li>åŸå­æ€§ï¼šä¸€æ¬¡æ•°æ®æ›´æ–°è¦ä¹ˆæˆåŠŸï¼Œè¦ä¹ˆå¤±è´¥ã€‚</li>\n<li>å®æ—¶æ€§ï¼šåœ¨ä¸€å®šæ—¶é—´èŒƒå›´å†…ï¼Œå®¢æˆ·ç«¯èƒ½è¯»åˆ°æœ€æ–°çš„æ•°æ®ã€‚</li>\n<li>åŠæ•°æœºåˆ¶ï¼šé›†ç¾¤ä¸­åªè¦æœ‰<ins>åŠæ•°ä»¥ä¸Š</ins>çš„èŠ‚ç‚¹å­˜æ´»ï¼Œzookeeper é›†ç¾¤å°±èƒ½æ­£å¸¸æä¾›æœåŠ¡ï¼Œæ‰€ä»¥ zookeeper é€‚åˆå®‰è£…å¥‡æ•°å°æœåŠ¡å™¨ã€‚</li>\n</ol>\n<h4 id=\"zookeeper-æ¶æ„å›¾\"><a class=\"anchor\" href=\"#zookeeper-æ¶æ„å›¾\">#</a> Zookeeper æ¶æ„å›¾</h4>\n<p>Zookeeper æ•°æ®æ¨¡å‹çš„ç»“æ„ä¸ Unix æ–‡ä»¶ç³»ç»Ÿç±»ä¼¼ï¼Œæ•´ä½“ä¸Šå¯ä»¥çœ‹åšæ˜¯ä¸€æ£µæ ‘ï¼Œæ¯ä¸ªèŠ‚ç‚¹è¢«ç§°ä¸ºä¸€ä¸ª  <code>ZNode</code> ã€‚æ¯ä¸ª ZNode é»˜è®¤èƒ½å¤Ÿå­˜å‚¨ 1MB çš„æ•°æ®ï¼Œæ¯ä¸ª ZNode éƒ½å¯ä»¥é€šè¿‡å…¶è·¯å¾„å”¯ä¸€æ ‡è¯†ã€‚</p>\n<p><img data-src=\"https://img.xfc-exclave.com/2021/10/d4ced668cec031d5ddc5b7cd1fb4c13d1634485347.jpg\" alt=\"Zookeeper æ¶æ„å›¾\" /></p>\n<p>Zookeeper è§’è‰²ï¼š</p>\n<ol>\n<li>Leaderï¼šå®ƒæ˜¯ Zookeeper é›†ç¾¤å·¥ä½œçš„æ ¸å¿ƒï¼Œäº‹åŠ¡è¯·æ±‚ï¼ˆå†™æ“ä½œï¼‰çš„å”¯ä¸€è°ƒåº¦å’Œå¤„ç†è€…ï¼Œä¿è¯é›†ç¾¤äº‹åŠ¡å¤„ç†çš„é¡ºåºæ€§ï¼›é›†ç¾¤å†…éƒ¨å„ä¸ªæœåŠ¡çš„è°ƒåº¦è€…ã€‚å¯¹äºæ‰€æœ‰æœåŠ¡èŠ‚ç‚¹ä¸­å…·æœ‰ createï¼ŒsetDataï¼Œdelete ç­‰æœ‰å†™æ€§è´¨çš„è¯·æ±‚ï¼Œéœ€è¦ç»Ÿä¸€è½¬å‘ç»™ leader å¤„ç†ï¼ŒLeader éœ€è¦å†³å®šç¼–å·ã€æ‰§è¡Œæ“ä½œï¼Œè¿™ä¸ªè¿‡ç¨‹ç§°ä¸ºä¸€ä¸ªäº‹åŠ¡ã€‚</li>\n<li>Followerï¼šå¤„ç†å®¢æˆ·ç«¯éäº‹åŠ¡ï¼ˆè¯»æ“ä½œï¼‰è¯·æ±‚ï¼Œè½¬å‘äº‹åŠ¡è¯·æ±‚ç»™ Leader å‚ä¸é›†ç¾¤ leader é€‰ä¸¾æŠ•ç¥¨ï¼Œå‚ä¸é€‰ä¸¾çš„æ‰€æœ‰æœåŠ¡å™¨èŠ‚ç‚¹æ•°åº”ä¸º  <code>2 * n - 1</code>  å°ã€‚æ­¤å¤–ï¼Œé’ˆå¯¹è®¿é—®é‡è¾ƒå¤§çš„ zookeeper é›†ç¾¤ï¼Œè¿˜å¯ä»¥æ–°å¢è§‚å¯Ÿè€…è§’è‰²ã€‚</li>\n<li>Observerï¼šè§‚å¯Ÿè€…è§’è‰²ï¼Œè§‚å¯Ÿ zooKeeper é›†ç¾¤çš„æœ€æ–°çŠ¶æ€å˜åŒ–å¹¶å°†è¿™äº›çŠ¶æ€è¿›è¡ŒåŒæ­¥ï¼Œå…¶å¯¹äºéäº‹åŠ¡è¯·æ±‚å¯ä»¥è¿›è¡Œç‹¬ç«‹å¤„ç†ï¼Œå¯¹äºäº‹åŠ¡è¯·æ±‚ï¼Œåˆ™ä¼šè½¬å‘ç»™ Leader æœåŠ¡å™¨å¤„ç†ã€‚å®ƒåªæä¾›æœåŠ¡ï¼Œä¸å‚ä¸ä»»ä½•å½¢å¼çš„æŠ•ç¥¨ï¼Œé€šå¸¸ç”¨äºåœ¨ä¸å½±å“é›†ç¾¤äº‹åŠ¡å¤„ç†èƒ½åŠ›çš„å‰æä¸‹æå‡é›†ç¾¤çš„éäº‹åŠ¡å¤„ç†èƒ½åŠ›ã€‚</li>\n</ol>\n<h4 id=\"zookeeper-çš„åº”ç”¨åœºæ™¯\"><a class=\"anchor\" href=\"#zookeeper-çš„åº”ç”¨åœºæ™¯\">#</a> Zookeeper çš„åº”ç”¨åœºæ™¯</h4>\n<p>Zookeeper æ˜¯ä¸€ä¸ªå…¸å‹çš„  <code>å‘å¸ƒ/è®¢é˜…æ¨¡å¼</code>  çš„åˆ†å¸ƒå¼æ•°æ®ç®¡ç†ä¸åè°ƒæ¡†æ¶ï¼Œå®ƒæä¾›åŸºäºç±»ä¼¼äºæ–‡ä»¶ç³»ç»Ÿçš„ç›®å½•èŠ‚ç‚¹æ ‘æ–¹å¼çš„æ•°æ®è¿›è¡Œå­˜å‚¨ï¼ˆå…±äº«çš„å†…å­˜ä¸­çš„æ ‘å‹ç»“æ„ï¼‰ã€‚åˆ©ç”¨ zooKeeper å¯ä»¥éå¸¸æ–¹ä¾¿æ„å»ºä¸€ç³»åˆ—åˆ†å¸ƒå¼åº”ç”¨ä¸­éƒ½ä¼šæ¶‰åŠåˆ°çš„æ ¸å¿ƒåŠŸèƒ½ã€‚</p>\n<p>Zookeeper æä¾›çš„æœåŠ¡ä¸»è¦åŒ…æ‹¬ï¼š</p>\n<ol>\n<li>\n<p>æ•°æ®çš„å‘å¸ƒå’Œè®¢é˜…</p>\n<p>æ•°æ®å‘å¸ƒ / è®¢é˜…çš„ä¸€ä¸ªå¸¸è§çš„åœºæ™¯æ˜¯é…ç½®ä¸­å¿ƒï¼Œå‘å¸ƒè€…å°†æ•°æ®å‘å¸ƒåˆ° zookeeper ä¸Šä¾›è®¢é˜…è€…è®¢é˜…ï¼Œä»è€Œè¾¾åˆ°åŠ¨æ€è·å–æ•°æ®çš„ç›®çš„ã€‚</p>\n<p>è¿™ç§åº”ç”¨åœºæ™¯é€šå¸¸æœ‰ä»¥ä¸‹å‡ ä¸ªç‰¹ç‚¹ï¼š</p>\n<ul>\n<li>æ•°æ®å†…å®¹é€šå¸¸æ˜¯æ•°æ®é‡è¾ƒå°çš„é”®å€¼å¯¹ã€‚</li>\n<li>æ•°æ®åœ¨å®¢æˆ·ç«¯è¿è¡ŒæœŸé—´ï¼Œå¯èƒ½ä¼šå‘ç”ŸåŠ¨æ€å˜åŒ–ã€‚</li>\n<li>é›†ç¾¤ç¯å¢ƒä¸‹ï¼Œåœ¨ä¸åŒå®¢æˆ·ç«¯ä¹‹é—´éœ€è¦è¿›è¡Œé…ç½®å…±äº«å’Œä¿æŒä¸€è‡´ã€‚</li>\n</ul>\n<p>Zookeeper å‘å¸ƒä¸è®¢é˜…é‡‡ç”¨æ¨æ‹‰ç»“åˆçš„æ–¹å¼ï¼š</p>\n<ol>\n<li>æ¨ï¼šæœåŠ¡ç«¯å°†äº‹ä»¶æ¨é€ç»™æ³¨å†Œäº†ç›‘æ§èŠ‚ç‚¹çš„å®¢æˆ·ç«¯ï¼Œå®¢æˆ·ç«¯é€šè¿‡ Watcher è·å–åˆ°äº‹ä»¶é€šçŸ¥ã€‚</li>\n<li>æ‹‰ï¼šå®¢æˆ·ç«¯è·å–åˆ°é€šçŸ¥åï¼Œä¸»åŠ¨åˆ°æœåŠ¡ç«¯æ‹‰å–æœ€æ–°æ•°æ®ã€‚</li>\n</ol>\n</li>\n<li>\n<p>è½¯è´Ÿè½½å‡è¡¡</p>\n<p>Zookeeper ä¸­è®°å½•äº†æ¯å°æœåŠ¡å™¨çš„è®¿é—®æ•°ï¼Œå®ƒå¯ä»¥æ ¹æ®ä¸€å®šçš„ç®—æ³•å°†è¯·æ±‚åˆ†å‘åˆ°å‹åŠ›æœ€å°çš„æœåŠ¡å™¨è¿›è¡Œå¤„ç†ã€‚</p>\n</li>\n<li>\n<p>ç»Ÿä¸€å‘½åæœåŠ¡</p>\n<ul>\n<li>\n<p>æä¾›ç±» JNDI åŠŸèƒ½ï¼Œå¯ä»¥æŠŠç³»ç»Ÿä¸­å„ç§æœåŠ¡çš„åç§°ã€åœ°å€ä»¥åŠç›®å½•ä¿¡æ¯å­˜æ”¾åœ¨ Zookeeperï¼Œéœ€è¦çš„æ—¶å€™å» Zookeeper ä¸­è¯»å–ã€‚</p>\n</li>\n<li>\n<p>åˆ¶ä½œåˆ†å¸ƒå¼çš„åºåˆ—å·ç”Ÿæˆå™¨ã€‚</p>\n<p>åˆ©ç”¨ zooKeeper <ins>é¡ºåºèŠ‚ç‚¹</ins>çš„ç‰¹æ€§ï¼Œåˆ¶ä½œåˆ†å¸ƒå¼çš„åºåˆ—å·ç”Ÿæˆå™¨ï¼Œæˆ–è€…å« id ç”Ÿæˆå™¨ã€‚åœ¨åˆ›å»ºèŠ‚ç‚¹æ—¶è®¾ç½®èŠ‚ç‚¹æ˜¯æœ‰åºçš„ï¼Œzookeeper å°±ä¼šè‡ªåŠ¨åœ¨åˆ›å»ºçš„èŠ‚ç‚¹åç§°åè¿½åŠ åºå·ã€‚</p>\n</li>\n</ul>\n</li>\n<li>\n<p>åˆ†å¸ƒå¼åè°ƒ / é€šçŸ¥</p>\n<p>åœ¨ zookeeper ä¸­ï¼Œå¯ä»¥ä½¿ç”¨å…¶ä¸´æ—¶èŠ‚ç‚¹çš„ç‰¹æ€§ï¼Œä¸åŒæœºå™¨åœ¨ zooKeeper çš„ä¸€ä¸ªæŒ‡å®šèŠ‚ç‚¹ä¸‹åˆ›å»ºä¸´æ—¶å­èŠ‚ç‚¹ï¼Œä¸åŒæœºå™¨ä¹‹é—´å¯ä»¥æ ¹æ®è¿™ä¸ªä¸´æ—¶èŠ‚ç‚¹æ¥åˆ¤æ–­å®¢æˆ·ç«¯æœºå™¨æ˜¯å¦å­˜æ´»ã€‚</p>\n</li>\n<li>\n<p>ç»Ÿä¸€é›†ç¾¤ç®¡ç†</p>\n<p>é›†ç¾¤ç®¡ç†ä¸»è¦æŒ‡é›†ç¾¤ç›‘æ§å’Œé›†ç¾¤æ§åˆ¶ä¸¤ä¸ªæ–¹é¢ã€‚å‰è€…ä¾§é‡äºé›†ç¾¤è¿è¡Œæ—¶çš„çŠ¶æ€çš„æ”¶é›†ï¼Œåè€…åˆ™æ˜¯å¯¹é›†ç¾¤è¿›è¡Œæ“ä½œä¸æ§åˆ¶ã€‚</p>\n<p>åˆ©ç”¨ zookeeper å¯ä»¥å¾ˆæ–¹ä¾¿åœ°å®ç°é›†ç¾¤ç®¡ç†å’Œç›‘æ§ç»„ä»¶ï¼Œå…¶æ€è·¯ä¸»è¦å¦‚ä¸‹ï¼š</p>\n<p>å½“æŸä¸€ä¸»æœºä¸Šçº¿æ—¶ï¼Œå°†è¯¥ä¸»æœºèŠ‚ç‚¹æ·»åŠ åˆ°æŒ‡å®šçš„ zookeeper ç›®å½•ä¸‹ï¼Œå¦‚  <code>/servers/[hostname]</code> ï¼Œæ­¤æ—¶å…³æ³¨  <code>/servers</code>  èŠ‚ç‚¹çš„ç›‘æ§ä¸­å¿ƒå°†ä¼šæ”¶åˆ°å­èŠ‚ç‚¹å˜æ›´äº‹ä»¶ï¼ˆå³ä¸Šçº¿é€šçŸ¥ï¼‰ï¼Œå¹¶å¯ä»¥è¿›è¡Œç›¸åº”çš„ä¸šåŠ¡é€»è¾‘å¤„ç†ï¼Œä»è€Œå®ç°äº†æœåŠ¡å™¨åŠ¨æ€ä¸Šä¸‹çº¿ã€‚</p>\n</li>\n<li>\n<p>åˆ†å¸ƒå¼é”</p>\n<p>é€šè¿‡å¯¹ zookeeper è¿›è¡Œé€»è¾‘å¤„ç†ï¼Œä¹Ÿå¯ä»¥å®ç°åˆ†å¸ƒå¼é”æ§åˆ¶ã€‚ï¼ˆåæ–‡å°†åšè¯¦ç»†è®²è§£ï¼‰</p>\n</li>\n<li>\n<p>åˆ†å¸ƒå¼é˜Ÿåˆ—</p>\n</li>\n</ol>\n<h3 id=\"å®‰è£…\"><a class=\"anchor\" href=\"#å®‰è£…\">#</a> å®‰è£…</h3>\n<h4 id=\"æœ¬åœ°å®‰è£…\"><a class=\"anchor\" href=\"#æœ¬åœ°å®‰è£…\">#</a> æœ¬åœ°å®‰è£…</h4>\n<p>ä¸‹è½½åœ°å€ï¼š<span class=\"exturl\" data-url=\"aHR0cHM6Ly96b29rZWVwZXIuYXBhY2hlLm9yZy9yZWxlYXNlcy5odG1s\">https://zookeeper.apache.org/releases.html</span></p>\n<ol>\n<li>\n<p>å®‰è£…å‰æ</p>\n<ul>\n<li>\n<p>ç¯å¢ƒå‡†å¤‡</p>\n<blockquote>\n<p>å‚è€ƒæ–‡ç« ï¼š</p>\n<ol>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzMzMTgwMDY5L2FydGljbGUvZGV0YWlscy8xMTMzODc4NDI=\">VMware15 ä¸Šå®‰è£… CentOS8 å›¾å½¢åŒ–ç•Œé¢</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuY25ibG9ncy5jb20vaW15YWxvc3QvcC84NzA5NTc4Lmh0bWw=\">Linux ä¸‹å®‰è£… JDK</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuY25ibG9ncy5jb20vc2hpcmVlbmxlZTR0ZXN0aW5nL3AvOTQ2OTY1MC5odG1s\">å¦‚ä½•ä½¿ç”¨ Xshell è¿æ¥ VMware ä¸Šçš„ Linux è™šæ‹Ÿæœº</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNzc0MzI1L2FydGljbGUvZGV0YWlscy84MTE4OTAzMw==\">VMware å¦‚ä½•é€šè¿‡ç°æœ‰è™šæ‹Ÿæœºå…‹éš†æ–°çš„è™šæ‹Ÿæœº</span></li>\n</ol>\n</blockquote>\n</li>\n<li>\n<p>å°†ä¸‹è½½çš„ zookeeper å®‰è£…åŒ…æ‹·è´åˆ° Linux ç›®å½•ä¸‹ã€‚</p>\n<p>å‡å®šä¸Šä¼ åçš„æ–‡ä»¶ä½ç½®ä¸º  <code>/opt/software/apache-zookeeper-3.5.7-bin.tar.gz</code> ã€‚</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">tar</span> -zxvf apache-zookeeper-3.5.7-bin.tar.gz -C /opt/module/</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token builtin class-name\">cd</span> <span class=\"token punctuation\">..</span>/module/</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token function\">mv</span> apache-zookeeper-3.5.7-bin/ zookeeper-3.5.7</pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token builtin class-name\">cd</span> zookeeper-3.5.7/conf/</pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token function\">mv</span> zoo_sample.cfg zoo.cfg</pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token function\">mkdir</span> <span class=\"token punctuation\">..</span>/zkData</pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token function\">vim</span> zoo.cfg</pre></td></tr></table></figure></li>\n<li>\n<p>ä¿®æ”¹é…ç½®æ–‡ä»¶</p>\n<figure class=\"highlight properties\"><figcaption data-lang=\".properties\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># æ­¤å¤„ä¸ºç®€æ´æ˜¾ç¤ºï¼Œåˆ é™¤äº†åŸæ–‡ä»¶çš„æ³¨é‡Š</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token attr-name\">tickTime</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">2000</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token attr-name\">initLimit</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">10</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token attr-name\">syncLimit</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">5</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token attr-name\">dataDir</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">/opt/module/zookeeper-3.5.7/zkData</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token attr-name\">clientPort</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">2181</span></pre></td></tr></table></figure></li>\n<li>\n<p>å¯åŠ¨</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">..</span>/bin/zkServer.sh start</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>jps -l</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token punctuation\">..</span>/bin/zkCli.sh</pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token function\">ls</span> /</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>quit</pre></td></tr></table></figure></li>\n<li>\n<p>å…¶ä»–æ“ä½œ</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">..</span>/bin/zkServer.sh status</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token punctuation\">..</span>/bin/zkServer.sh stop</pre></td></tr></table></figure></li>\n</ul>\n</li>\n<li>\n<p>é…ç½®å‚æ•°è¯´æ˜</p>\n<p>ä»å®˜ç½‘ä¸‹è½½ zookeeper åï¼Œå…¶æä¾›çš„é…ç½®ç¤ºä¾‹æ–‡ä»¶  <code>zoo_sample.cfg</code>  å†…å®¹å¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight properties\"><figcaption data-lang=\".properties\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># æ­¤å¤„ä¸ºç®€æ´æ˜¾ç¤ºï¼Œåˆ é™¤äº†åŸæ–‡ä»¶çš„æ³¨é‡Š</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token attr-name\">tickTime</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">2000</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token attr-name\">initLimit</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">10</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token attr-name\">syncLimit</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">5</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token attr-name\">dataDir</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">/tmp/zookeeper</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token attr-name\">clientPort</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">2181</span></pre></td></tr></table></figure><ul>\n<li>tickTime è¡¨ç¤ºé€šä¿¡å¿ƒè·³æ—¶é—´ï¼Œå³ zk å®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯é€šä¿¡é¢‘ç‡ï¼Œå•ä½ï¼šæ¯«ç§’ã€‚</li>\n<li>initLimit è¡¨ç¤º Leader ä¸ Follower åˆå§‹é€šä¿¡æ—¶é™ï¼Œè¶…å‡ºè¯¥æ—¶é—´æ„å‘³ç€é€šä¿¡è¿æ¥å¤±è´¥ï¼Œå•ä½ï¼štickTimeã€‚</li>\n<li>syncLimit è¡¨ç¤º Leader ä¸ Follower åŒæ­¥é€šä¿¡æ—¶é™ï¼Œå¦‚æœè¶…å‡ºè¯¥æ—¶é—´ï¼ŒLeader åˆ™ Follower åˆ¤å®šä¸ºæ­»äº¡ï¼Œå•ä½ï¼štickTimeã€‚</li>\n<li>dataDirï¼šä¿å­˜ zk çš„æ•°æ®ç›®å½•ã€‚</li>\n<li>clientPortï¼šå®¢æˆ·ç«¯è¿æ¥ç«¯å£ã€‚</li>\n</ul>\n</li>\n</ol>\n<h4 id=\"é›†ç¾¤å®‰è£…\"><a class=\"anchor\" href=\"#é›†ç¾¤å®‰è£…\">#</a> é›†ç¾¤å®‰è£…</h4>\n<ol>\n<li>\n<p>å‡†å¤‡<ins>å¥‡æ•°å°</ins>æœåŠ¡å™¨ï¼ˆæˆ–è™šæ‹Ÿæœºï¼‰ã€‚</p>\n</li>\n<li>\n<p>å°†ç›¸åŒç¯å¢ƒéƒ¨ç½²åˆ°å…¶ä»–ä¸»æœºã€‚</p>\n<p>æŒ‰ç…§æœ¬åœ°å®‰è£…æ­¥éª¤ï¼Œåˆ†åˆ«åœ¨å…¶ä»–æœåŠ¡å™¨ä¸Šå®‰è£… zkã€‚ï¼ˆä¹Ÿå¯ä»¥ç›´æ¥å…‹éš†å½“å‰æœåŠ¡å™¨ï¼Œç„¶åä¿®æ”¹ä¸»æœºã€ç½‘ç»œç­‰ä¿¡æ¯ï¼‰</p>\n<p>è¿™é‡Œå‡å®šä¸‰å°ä¸»æœºåˆ†åˆ«ä¸ºï¼šhadoop01ï¼Œhadoop02ï¼Œhadoop03ã€‚</p>\n</li>\n<li>\n<p>é…ç½® myid</p>\n<p>å¯¹äº zk é›†ç¾¤ç¯å¢ƒï¼Œå¿…é¡»åœ¨æ¯ä¸€å°ä¸»æœºä¸Šé…ç½®å”¯ä¸€æ ‡è¯†ã€‚</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token builtin class-name\">cd</span> /opt/module/zookeeper-3.5.7/zkData</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token function\">vim</span> myid</pre></td></tr></table></figure><p><code>myid</code>  æ–‡ä»¶ä¸­è¾“å…¥å½“å‰ zk çš„æ•°å­—ç¼–å·ï¼Œå¯ä»¥éšæ„æŒ‡å®šï¼Œä½†éœ€è¦ä¸åŒé›†ç¾¤ä¸‹çš„å…¶ä»–ä¸»æœºçš„ zk æ•°å­—ç¼–å·ä¸åŒã€‚</p>\n<p>è¿™é‡Œå‡å®šä¸»æœºä¸ myid çš„å¯¹åº”å…³ç³»ä¸ºï¼šhadoop01 -&gt; 1ï¼Œhadoop02 -&gt; 2ï¼Œhadoop03 -&gt; 3ã€‚</p>\n<p>ç¼–è¾‘æ‰€æœ‰ä¸»æœºä¸Šçš„æ–‡ä»¶ /opt/module/zookeeper-3.5.7/conf/zoo.cfg å¹¶åœ¨å…¶æœ«å°¾è¿½åŠ å†…å®¹ï¼š</p>\n<figure class=\"highlight properties\"><figcaption data-lang=\".properties\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token attr-name\">server.1</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">hadoop01:2888:3888;2181</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token attr-name\">server.2</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">hadoop02:2888:3888;2181</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token attr-name\">server.3</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">hadoop03:2888:3888;2181</span></pre></td></tr></table></figure><p>æ³¨æ„ï¼šæ­¤å¤„çš„  <code>server.[myid]:[hostname]:2888:3888;2181</code>  å¿…é¡»ä¸  <code>myid</code>  åŠä¸»æœºåä¿æŒä¸€è‡´ã€‚</p>\n</li>\n<li>\n<p>ä¾æ¬¡å¯åŠ¨</p>\n<blockquote>\n<p>ç”±äºåŒé›†ç¾¤ä¸‹çš„ä¸»æœºå„è‡ªæœªé…ç½®é˜²ç«å¢™å‡ºå…¥ç«™è§„åˆ™ï¼Œå¯ä»¥é€‰æ‹©å…³é—­é˜²ç«å¢™ã€‚</p>\n</blockquote>\n<p>é˜²ç«å¢™ç›¸å…³å‘½ä»¤ï¼š</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>systemctl status firewalld.service <span class=\"token comment\"># æŸ¥çœ‹é˜²ç«å¢™çŠ¶æ€</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>systemctl start firewalld.service <span class=\"token comment\"># æ‰“å¼€é˜²ç«å¢™</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>systemctl stop firewalld.service <span class=\"token comment\"># å…³é—­é˜²ç«å¢™</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>systemctl <span class=\"token builtin class-name\">enable</span> firewalld.service <span class=\"token comment\"># å¼€å¯é˜²ç«å¢™</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>systemctl disable firewalld.service <span class=\"token comment\"># ç¦ç”¨é˜²ç«å¢™</span></pre></td></tr></table></figure><p>ä¾æ¬¡å¯åŠ¨ zk æœåŠ¡ï¼š</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>/opt/module/zookeeper-3.5.7/bin/zkServer.sh start</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>/opt/module/zookeeper-3.5.7/bin/zkServer.sh status <span class=\"token comment\"># æŸ¥çœ‹ zk çŠ¶æ€</span></pre></td></tr></table></figure><p>å½“æ‰€æœ‰æœåŠ¡èŠ‚ç‚¹å¯åŠ¨æˆåŠŸåï¼Œåˆ†åˆ«æŸ¥çœ‹å„è‡ªçŠ¶æ€ï¼Œå¯ä»¥å‘ç°å…¶ä¸­æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªæœåŠ¡èŠ‚ç‚¹ä¸º  <code>Mode: leader</code> ï¼Œå…¶ä»–èŠ‚ç‚¹å‡ä¸º  <code>Mode: follower</code> ï¼Œè¿™å…¶ä¸­æ¶‰åŠåˆ° zookeeper çš„  <code>é€‰ä¸¾æœºåˆ¶</code>  ï¼Œè¿™å°†åœ¨åæ–‡è¿›è¡Œè¯´æ˜ã€‚</p>\n</li>\n</ol>\n<h4 id=\"é›†ç¾¤å¯åŠ¨è„šæœ¬\"><a class=\"anchor\" href=\"#é›†ç¾¤å¯åŠ¨è„šæœ¬\">#</a> é›†ç¾¤å¯åŠ¨è„šæœ¬</h4>\n<p>åˆ›å»ºè„šæœ¬æ–‡ä»¶  <code>zk.sh</code></p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># !/bin/bash</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">case</span> <span class=\"token variable\">$1</span> <span class=\"token keyword\">in</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token string\">\"start\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>\t<span class=\"token keyword\">for</span> <span class=\"token for-or-select variable\">i</span> <span class=\"token keyword\">in</span> hadoop01 hadoop02 hadoop03</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>\t<span class=\"token keyword\">do</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>\t\t<span class=\"token function\">ssh</span> <span class=\"token variable\">$i</span> <span class=\"token string\">\"/opt/module/zookeeper-3.5.7/bin/zkServer.sh start\"</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>\t\t<span class=\"token builtin class-name\">echo</span> ------------ zookeeper <span class=\"token variable\">$i</span> is started ------------</pre></td></tr><tr><td data-num=\"9\"></td><td><pre>\t<span class=\"token keyword\">done</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token string\">\"stop\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>\t<span class=\"token keyword\">for</span> <span class=\"token for-or-select variable\">i</span> <span class=\"token keyword\">in</span> hadoop01 hadoop02 hadoop03</pre></td></tr><tr><td data-num=\"13\"></td><td><pre>\t<span class=\"token keyword\">do</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>\t\t<span class=\"token function\">ssh</span> <span class=\"token variable\">$i</span> <span class=\"token string\">\"/opt/module/zookeeper-3.5.7/bin/zkServer.sh stop\"</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>\t\t<span class=\"token builtin class-name\">echo</span> ------------ zookeeper <span class=\"token variable\">$i</span> is stopped ------------</pre></td></tr><tr><td data-num=\"16\"></td><td><pre>\t<span class=\"token keyword\">done</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token string\">\"stop\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>\t<span class=\"token keyword\">for</span> <span class=\"token for-or-select variable\">i</span> <span class=\"token keyword\">in</span> hadoop01 hadoop02 hadoop03</pre></td></tr><tr><td data-num=\"20\"></td><td><pre>\t<span class=\"token keyword\">do</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>\t\t<span class=\"token builtin class-name\">echo</span> ------------ zookeeper <span class=\"token variable\">$i</span> status ------------</pre></td></tr><tr><td data-num=\"22\"></td><td><pre>\t\t<span class=\"token function\">ssh</span> <span class=\"token variable\">$i</span> <span class=\"token string\">\"/opt/module/zookeeper-3.5.7/bin/zkServer.sh status\"</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>\t<span class=\"token keyword\">done</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre><span class=\"token keyword\">esac</span></pre></td></tr></table></figure><p>ä¿®æ”¹æ–‡ä»¶æƒé™ï¼š</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">chmod</span> a+x zk.sh</pre></td></tr></table></figure><blockquote>\n<p>æ³¨æ„ï¼š</p>\n<ol>\n<li>è„šæœ¬ä¸­ hadoop01 ç­‰ä½œä¸ºä¸»æœºåï¼Œéœ€è¦åœ¨å¯¹åº”çš„ä¸»æœºä¸Šé…ç½®äº†å¯¹åº”çš„ hosts æ‰ä¼šæœ‰æ•ˆã€‚</li>\n<li>è„šæœ¬æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œå¦‚æœä¸»æœºæƒé™æ‹¦æˆªï¼Œéœ€è¦è¾“å…¥å¯†ç ã€‚</li>\n</ol>\n</blockquote>\n<h4 id=\"docker-å®‰è£…\"><a class=\"anchor\" href=\"#docker-å®‰è£…\">#</a> Docker å®‰è£…</h4>\n<p>ä½¿ç”¨ Docker å®‰è£… Zookeeperï¼ˆå•èŠ‚ç‚¹ï¼‰</p>\n<p>æ‹‰å– zookeeper é•œåƒï¼š</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>docker pull zookeeper <span class=\"token comment\"># æ‹‰å–æŒ‡å®šç‰ˆæœ¬é•œåƒ</span></pre></td></tr></table></figure><p>é¢„å…ˆåˆ›å»º zookeeper æŒ‚è½½ç›®å½•ï¼š</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">mkdir</span> -p /home/docker/zookeeper/conf</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token function\">chmod</span> <span class=\"token number\">777</span> /home/docker/zookeeper/conf</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token function\">mkdir</span> -p /home/docker/zookeeper/data</pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token function\">mkdir</span> -p /home/docker/zookeeper/log</pre></td></tr></table></figure><p>åˆ›å»ºè‡ªå®šä¹‰ç½‘ç»œï¼š</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>docker network create --driver bridge --subnet <span class=\"token number\">127.0</span>.0.1/16 zk_network</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>docker network <span class=\"token function\">ls</span> <span class=\"token comment\"># æŸ¥çœ‹æ˜¯å¦åˆ›å»ºæˆåŠŸ</span></pre></td></tr></table></figure><p>å¯åŠ¨é•œåƒï¼š</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>docker run -d -p <span class=\"token number\">2181</span>:2181 -p <span class=\"token number\">2888</span>:2888 -p <span class=\"token number\">3888</span>:3888 --name zookeeper --privileged --restart always --network zk_network <span class=\"token punctuation\">\\</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>-v /home/docker/zookeeper/conf:/conf <span class=\"token punctuation\">\\</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>-v /home/docker/zookeeper/data:/data <span class=\"token punctuation\">\\</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>-v /home/docker/zookeeper/datalog:/datalog <span class=\"token punctuation\">\\</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>zookeeper</pre></td></tr></table></figure><p>æ£€éªŒæ˜¯å¦å¯åŠ¨æˆåŠŸï¼š</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>docker <span class=\"token builtin class-name\">exec</span> -it zookeeper zkCli.sh</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\"># è¿›å…¥å®¢æˆ·ç«¯åï¼Œå¦‚éœ€é€€å‡ºï¼Œå¯ä»¥ä½¿ç”¨ quit æŒ‡ä»¤</span></pre></td></tr></table></figure><p>è¯¥å‘½ä»¤å…¶å®ç›¸å½“äºï¼š</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>docker <span class=\"token builtin class-name\">exec</span> -it zookeeper /bin/bash</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token builtin class-name\">cd</span> bin/</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>./zkCli.sh -server <span class=\"token number\">127.0</span>.0.1:2181</pre></td></tr></table></figure><p>å¦‚æœå‡ºç°  <code>[zk: localhost:2181(CONNECTED) 0]</code>  åˆ™è¡¨ç¤º zookeeper å¯åŠ¨æˆåŠŸã€‚</p>\n<p>æŸ¥çœ‹å½“å‰ zookeeper æ¨¡å¼åŠé…ç½®ï¼š</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>./zkServer.sh status</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>Zookeeper JMX enabled by default</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>Using config: /conf/zoo.cfg</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>Client port found: <span class=\"token number\">2181</span>. Client address: localhost. Client SSL: false.</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>Mode: standalone</pre></td></tr></table></figure><p>æ³¨æ„ï¼šè¿™é‡Œçš„ zookeeper çš„é…ç½®æ–‡ä»¶ä½äºå®¹å™¨ä¸­çš„ /conf/zoo.cfg ä½ç½®ï¼Œå¹¶è¢«æ˜ å°„åˆ°å®¿ä¸»æœºçš„ /home/docker/zookeeper/conf ç›®å½•ã€‚</p>\n<blockquote>\n<p>è¿™é‡Œä»…åˆ—å‡ºäº†å¿…è¦çš„å‘½ä»¤ï¼Œæ›´å¤š Docker ç›¸å…³çŸ¥è¯†ï¼Œå¯å‚è€ƒæ–‡ç« ã€Š<a href=\"/computer-science/java-learning-path/5-framework/docker-tutorial/\">ç»™ï¼Œä½ è¦çš„ Docker è¯¦ç»†æ•™ç¨‹</a>ã€‹ã€‚</p>\n<p>æç¤ºï¼š</p>\n<p>é€€å‡ºå®¹å™¨ä½¿ç”¨  <code>Ctrl + P + Q</code>  ã€‚</p>\n<p>Docker å®‰è£… zookeeper é»˜è®¤æœªæŒ‡å®šæ—¥å¿—æ–‡ä»¶ï¼Œå¦‚éœ€è¦æ—¥å¿—æ–‡ä»¶é…ç½®ï¼Œå¯ä»å®˜ç½‘ä¸‹è½½å®Œæ•´ zookeeperï¼Œå¹¶å°†  <code>/conf/log4j.properties</code>  æ‹·è´è‡³é…ç½®ç›®å½•ï¼Œç„¶åé‡å¯å³å¯ã€‚</p>\n</blockquote>\n<p>å¯åŠ¨å’Œåœæ­¢ zookeeper æœåŠ¡ï¼š</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>./zkServer.sh start <span class=\"token comment\"># å¯åŠ¨ zookeeper æœåŠ¡</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>./zkServer.sh stop <span class=\"token comment\"># åœæ­¢ zookeeper æœåŠ¡</span></pre></td></tr></table></figure><h3 id=\"zookeeper-é€‰ä¸¾æœºåˆ¶\"><a class=\"anchor\" href=\"#zookeeper-é€‰ä¸¾æœºåˆ¶\">#</a> Zookeeper é€‰ä¸¾æœºåˆ¶</h3>\n<p>ä¾æ¬¡å¯åŠ¨é›†ç¾¤èŠ‚ç‚¹ï¼Œå½“èŠ‚ç‚¹è¶…è¿‡åŠæ•°æ—¶ï¼Œå°†åœ¨å·²å¯åŠ¨çš„é›†ç¾¤èŠ‚ç‚¹ä¸­æ‰¾å‡º ID æœ€å¤§çš„èŠ‚ç‚¹ï¼Œå¹¶è¢«é€‰ä¸¾ä¸º Leaderã€‚ä¸€æ—¦ Leader ç¡®å®šï¼Œæ–°åŠ å…¥èŠ‚ç‚¹è‡ªåŠ¨æ ‡è®°ä¸º Followerã€‚</p>\n<p>Zookeeper èŠ‚ç‚¹çŠ¶æ€ï¼š</p>\n<ul>\n<li>LOOKINGï¼šå¯»æ‰¾ Leader çŠ¶æ€ï¼Œå¤„äºè¯¥çŠ¶æ€éœ€è¦è¿›å…¥é€‰ä¸¾æµç¨‹ã€‚</li>\n<li>LEADINGï¼šé¢†å¯¼è€…çŠ¶æ€ï¼Œå¤„äºè¯¥çŠ¶æ€çš„èŠ‚ç‚¹è¯´æ˜æ˜¯è§’è‰²å·²ç»æ˜¯ Leaderã€‚</li>\n<li>FOLLOWINGï¼šè·Ÿéšè€…çŠ¶æ€ï¼Œè¡¨ç¤º Leader å·²ç»é€‰ä¸¾å‡ºæ¥ï¼Œå½“å‰èŠ‚ç‚¹è§’è‰²æ˜¯ Followerã€‚</li>\n<li>OBSERVERï¼šè§‚å¯Ÿè€…çŠ¶æ€ï¼Œè¡¨æ˜å½“å‰èŠ‚ç‚¹è§’è‰²æ˜¯ observerã€‚</li>\n</ul>\n<p>é€‰ä¸¾ç›¸å…³æ¦‚å¿µï¼š</p>\n<ul>\n<li>SIDï¼šæœåŠ¡å™¨ IDï¼Œç”¨æ¥å”¯ä¸€æ ‡è¯† ZK é›†ç¾¤ä¸­çš„æ¯ä¸€å°åŠå…¶ï¼Œå®ƒå’Œ myid ä¿æŒä¸€è‡´ã€‚</li>\n<li>ZXIDï¼šäº‹åŠ¡ IDï¼Œç”¨æ¥æ ‡è¯†ä¸€æ¬¡æœåŠ¡å™¨çŠ¶æ€çš„å˜æ›´ã€‚</li>\n<li>Epochï¼šæ¯ä¸ª Leader ä»»æœŸçš„ä»£å·ã€‚</li>\n</ul>\n<p>è‡ªåˆ¶å›¾ä¾‹ï¼ˆç‚¹å‡»æŸ¥çœ‹å¤§å›¾ï¼‰ï¼š</p>\n<p><img data-src=\"https://img.xfc-exclave.com/2021/10/90feafd997e82ebe2fc3d53560158e3f1634544405.png\" alt=\"Zookeeperé€‰ä¸¾æœºåˆ¶\" height=\"400px\" /></p>\n<blockquote>\n<p>æ³¨ï¼šå›¾æ˜¯ç”»ç€ç©çš„ï¼Œèƒ½ç†è§£å°±å¥½ï¼Œä¸ç›¸å…³çš„ä¸è¦çº ç»“å“ˆã€‚</p>\n</blockquote>\n<h3 id=\"zookeeper-å·¥ä½œæµ\"><a class=\"anchor\" href=\"#zookeeper-å·¥ä½œæµ\">#</a> Zookeeper å·¥ä½œæµ</h3>\n<p>ä¸€æ—¦ Zookeeper é›†åˆå¯åŠ¨ï¼Œå®ƒå°†ç­‰å¾…å®¢æˆ·ç«¯è¿æ¥ã€‚å®¢æˆ·ç«¯å°†è¿æ¥åˆ° Zookeeper é›†åˆä¸­çš„ä¸€ä¸ªèŠ‚ç‚¹ã€‚å®ƒå¯ä»¥æ˜¯ Leader æˆ– Follower èŠ‚ç‚¹ã€‚ä¸€æ—¦å®¢æˆ·ç«¯è¢«è¿æ¥ï¼ŒèŠ‚ç‚¹å°†å‘ç‰¹å®šå®¢æˆ·ç«¯åˆ†é…ä¼šè¯ ID å¹¶å‘è¯¥å®¢æˆ·ç«¯å‘é€ç¡®è®¤ã€‚å¦‚æœå®¢æˆ·ç«¯æ²¡æœ‰æ”¶åˆ°ç¡®è®¤ï¼Œå®ƒå°†å°è¯•è¿æ¥ Zookeeper é›†åˆä¸­çš„å¦ä¸€ä¸ªèŠ‚ç‚¹ã€‚ ä¸€æ—¦è¿æ¥åˆ°èŠ‚ç‚¹ï¼Œå®¢æˆ·ç«¯å°†ä»¥æœ‰è§„å¾‹çš„é—´éš”å‘èŠ‚ç‚¹å‘é€å¿ƒè·³ï¼Œä»¥ç¡®ä¿è¿æ¥ä¸ä¼šä¸¢å¤±ã€‚</p>\n<ol>\n<li>å¦‚æœå®¢æˆ·ç«¯æƒ³è¦è¯»å–ç‰¹å®šçš„ znodeï¼Œå®ƒå°†ä¼šå‘å…·æœ‰ znode è·¯å¾„çš„èŠ‚ç‚¹å‘é€è¯»å–è¯·æ±‚ï¼Œå¹¶ä¸”èŠ‚ç‚¹é€šè¿‡ä»å…¶è‡ªå·±çš„æ•°æ®åº“è·å–æ¥è¿”å›æ‰€è¯·æ±‚çš„ znodeã€‚å› æ­¤ï¼Œåœ¨ Zookeeper é›†åˆä¸­è¯»å–é€Ÿåº¦å¿«ã€‚</li>\n<li>å¦‚æœå®¢æˆ·ç«¯æƒ³è¦å°†æ•°æ®å­˜å‚¨åœ¨ Zookeeper é›†åˆä¸­ï¼Œåˆ™ä¼šå°† znode è·¯å¾„å’Œæ•°æ®å‘é€åˆ°æœåŠ¡å™¨ã€‚è¿æ¥çš„æœåŠ¡å™¨å°†è¯¥è¯·æ±‚è½¬å‘ç»™ Leaderï¼Œç„¶å Leader å°†å‘æ‰€æœ‰çš„ Follower é‡æ–°å‘å‡ºå†™å…¥è¯·æ±‚ã€‚å¦‚æœåªæœ‰å¤§éƒ¨åˆ†èŠ‚ç‚¹æˆåŠŸå“åº”ï¼Œè€Œå†™å…¥è¯·æ±‚æˆåŠŸï¼Œåˆ™æˆåŠŸè¿”å›ä»£ç å°†è¢«å‘é€åˆ°å®¢æˆ·ç«¯ã€‚ å¦åˆ™ï¼Œå†™å…¥è¯·æ±‚å¤±è´¥ã€‚ç»å¤§å¤šæ•°èŠ‚ç‚¹è¢«ç§°ä¸º  <code>Quorum</code> ã€‚</li>\n</ol>\n<p>Zookeeper å·¥ä½œæµç¤ºæ„å›¾ï¼š</p>\n<p><img data-src=\"https://img.xfc-exclave.com/2021/10/97d5eb34bb51d80ffed555b47aa2d45e1634527137.png\" alt=\"ZKå·¥ä½œæµ\" /></p>\n<p>Zookeeper å·¥ä½œæµç»„ä»¶æè¿°ï¼š</p>\n<ul>\n<li>\n<p>å†™å…¥ï¼ˆwriteï¼‰</p>\n<p>å†™å…¥è¿‡ç¨‹ç”± Leader èŠ‚ç‚¹å¤„ç†ã€‚Leader å°†å†™å…¥è¯·æ±‚è½¬å‘åˆ°æ‰€æœ‰ znodeï¼Œå¹¶ç­‰å¾… znode çš„å›å¤ã€‚å¦‚æœä¸€åŠçš„ znode å›å¤ï¼Œåˆ™å†™å…¥è¿‡ç¨‹å®Œæˆã€‚</p>\n</li>\n<li>\n<p>è¯»å–ï¼ˆreadï¼‰</p>\n<p>è¯»å–ç”±ç‰¹å®šè¿æ¥çš„ znode åœ¨å†…éƒ¨æ‰§è¡Œï¼Œå› æ­¤ä¸éœ€è¦ä¸é›†ç¾¤è¿›è¡Œäº¤äº’ã€‚</p>\n</li>\n<li>\n<p>å¤åˆ¶æ•°æ®åº“ï¼ˆreplicated databaseï¼‰</p>\n<p>å®ƒç”¨äºåœ¨ zookeeper ä¸­å­˜å‚¨æ•°æ®ã€‚æ¯ä¸ª znode éƒ½æœ‰è‡ªå·±çš„æ•°æ®åº“ï¼Œæ¯ä¸ª znode åœ¨ä¸€è‡´æ€§çš„å¸®åŠ©ä¸‹æ¯æ¬¡éƒ½æœ‰ç›¸åŒçš„æ•°æ®ã€‚</p>\n</li>\n<li>\n<p>é¢†å¯¼è€…ï¼ˆLeaderï¼‰</p>\n<p>Leader æ˜¯è´Ÿè´£å¤„ç†å†™å…¥è¯·æ±‚çš„ znodeã€‚</p>\n</li>\n<li>\n<p>è·Ÿéšè€…ï¼ˆFollowerï¼‰</p>\n<p>Follower ä»å®¢æˆ·ç«¯æ¥æ”¶å†™å…¥è¯·æ±‚ï¼Œå¹¶å°†å®ƒä»¬è½¬å‘åˆ° Leader znodeã€‚</p>\n</li>\n<li>\n<p>è¯·æ±‚å¤„ç†å™¨ï¼ˆrequest processorï¼‰</p>\n<p>åªå­˜åœ¨äº Leader èŠ‚ç‚¹ã€‚å®ƒç®¡ç†æ¥è‡ª Follower èŠ‚ç‚¹çš„å†™å…¥è¯·æ±‚ã€‚</p>\n</li>\n<li>\n<p>åŸå­å¹¿æ’­ï¼ˆatomic broadcastsï¼‰</p>\n<p>è´Ÿè´£å¹¿æ’­ä» Leader èŠ‚ç‚¹åˆ° Follower èŠ‚ç‚¹çš„å˜åŒ–ã€‚</p>\n</li>\n</ul>\n<h3 id=\"zookeeper-cli\"><a class=\"anchor\" href=\"#zookeeper-cli\">#</a> Zookeeper CLI</h3>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>/opt/module/zookeeper-3.5.7/bin/zkCli.sh -server hadoop01:2181</pre></td></tr></table></figure><h4 id=\"èŠ‚ç‚¹ç±»å‹\"><a class=\"anchor\" href=\"#èŠ‚ç‚¹ç±»å‹\">#</a> èŠ‚ç‚¹ç±»å‹</h4>\n<p>Zookeeper åˆ›å»ºèŠ‚ç‚¹çš„è¯­æ³•ä¸º  <code>create -[params] [path] [data]</code> ï¼Œå®ƒä¸»è¦æœ‰ä»¥ä¸‹å››ç§èŠ‚ç‚¹ç±»å‹ï¼š</p>\n<ol>\n<li>\n<p>PERSISTENTï¼ˆæŒä¹…èŠ‚ç‚¹ï¼‰</p>\n<p>èŠ‚ç‚¹åˆ›å»ºåï¼Œå³ä½¿æœåŠ¡å™¨é‡å¯ï¼ŒèŠ‚ç‚¹éƒ½ä¼šä¸€ç›´å­˜åœ¨ï¼Œç›´åˆ°ä¸»åŠ¨åˆ é™¤è¯¥èŠ‚ç‚¹ã€‚</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>create /node <span class=\"token string\">\"node\"</span></pre></td></tr></table></figure></li>\n<li>\n<p>PERSISTENT_SEQUENTIALï¼ˆæŒä¹…é¡ºåºèŠ‚ç‚¹ï¼‰</p>\n<p>å…·æœ‰é¡ºåºå‘½åç‰¹ç‚¹çš„æŒä¹…èŠ‚ç‚¹ï¼Œçˆ¶èŠ‚ç‚¹ä¼šä¸ºå…¶ç¬¬ä¸€å­£å­èŠ‚ç‚¹ç»´æŠ¤ä¸€ä»½æ—¶åºï¼Œè®°å½•å­èŠ‚ç‚¹çš„å…ˆåé¡ºåºã€‚è¯¥èŠ‚ç‚¹ç±»å‹å¯ä»¥é€šè¿‡å‚æ•°  <code>-s</code>  è¿›è¡ŒæŒ‡å®šã€‚</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>create -s /node/seq_node <span class=\"token string\">\"seq_node\"</span></pre></td></tr></table></figure></li>\n<li>\n<p>EPHEMERALï¼ˆä¸´æ—¶èŠ‚ç‚¹ï¼‰</p>\n<p>åœ¨å®¢æˆ·ç«¯ä¼šè¯å¤±æ•ˆåèŠ‚ç‚¹è‡ªåŠ¨æ¸…é™¤ï¼Œä¸´æ—¶èŠ‚ç‚¹ä¸‹ä¸èƒ½åˆ›å»ºå­èŠ‚ç‚¹ã€‚è¯¥èŠ‚ç‚¹ç±»å‹å¯ä»¥é€šè¿‡å‚æ•°  <code>-e</code>  è¿›è¡ŒæŒ‡å®šã€‚</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>create -e /node/temp_node <span class=\"token string\">\"temp_node\"</span></pre></td></tr></table></figure></li>\n<li>\n<p>EPHEMERAL_SEQUENTIALï¼ˆé¡ºåºä¸´æ—¶èŠ‚ç‚¹ï¼‰</p>\n<p>å…·æœ‰é¡ºåºå‘½åç‰¹ç‚¹çš„ä¸´æ—¶èŠ‚ç‚¹ï¼Œè¯¥èŠ‚ç‚¹ç±»å‹å¯ä»¥é€šè¿‡å‚æ•°  <code>-e -s</code>  è¿›è¡ŒæŒ‡å®šã€‚</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>create -e -s /node/temp_seq_node <span class=\"token string\">\"temp_seq_node\"</span></pre></td></tr></table></figure></li>\n</ol>\n<h4 id=\"èŠ‚ç‚¹æ“ä½œ\"><a class=\"anchor\" href=\"#èŠ‚ç‚¹æ“ä½œ\">#</a> èŠ‚ç‚¹æ“ä½œ</h4>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">ls</span> / <span class=\"token comment\"># æŸ¥çœ‹æ ¹èŠ‚ç‚¹åˆ—è¡¨</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>create /nodeA <span class=\"token string\">\"info about nodeA\"</span> <span class=\"token comment\"># åˆ›å»ºèŠ‚ç‚¹å¹¶æŒ‡å®šå†…å®¹ï¼ˆæŒä¹…èŠ‚ç‚¹ï¼‰</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>create /nodeA/node <span class=\"token string\">\"info about node, parent is nodeA\"</span> <span class=\"token comment\"># åˆ›å»ºå­èŠ‚ç‚¹å¹¶æŒ‡å®šå†…å®¹</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token function\">ls</span> /nodeA <span class=\"token comment\"># æŸ¥çœ‹å­èŠ‚ç‚¹åˆ—è¡¨</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>get -s /zodeA <span class=\"token comment\"># è·å–èŠ‚ç‚¹å†…å®¹</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>create -s /node <span class=\"token string\">\"info about node which sorted by no\"</span> <span class=\"token comment\"># åˆ›å»ºé¡ºåºç¼–å·çš„èŠ‚ç‚¹å¹¶æŒ‡å®šå†…å®¹</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>quit <span class=\"token comment\"># é€€å‡ºèŠ‚ç‚¹ï¼ˆé€€å‡ºåï¼Œå†æ¬¡è¿›å…¥æŒä¹…èŠ‚ç‚¹ä»ç„¶å­˜åœ¨ ----------ï¼‰</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>create -e /nodeB <span class=\"token string\">\"info about nodeB, temp node\"</span> <span class=\"token comment\"># åˆ›å»ºä¸´æ—¶èŠ‚ç‚¹</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>create -e -s /nodeB/node <span class=\"token string\">\"info about nodeB, temp node, sorted by no\"</span> <span class=\"token comment\"># åˆ›å»ºé¡ºåºç¼–å·çš„ä¸´æ—¶èŠ‚ç‚¹</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token builtin class-name\">set</span> /nodeA/node <span class=\"token string\">\"node info is updated\"</span> <span class=\"token comment\"># ä¿®æ”¹èŠ‚ç‚¹å†…å®¹</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>delete /nodeA/node <span class=\"token comment\"># ç§»é™¤èŠ‚ç‚¹</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>deleteall /nodeA <span class=\"token comment\"># é€’å½’ç§»é™¤èŠ‚ç‚¹åŠå…¶å­èŠ‚ç‚¹</span></pre></td></tr></table></figure><h4 id=\"ç›‘å¬å™¨\"><a class=\"anchor\" href=\"#ç›‘å¬å™¨\">#</a> ç›‘å¬å™¨</h4>\n<p>Zookeeper é€šè¿‡å‚æ•°  <code>-w</code>  å¯ä»¥è®¾ç½®ç›‘å¬èŠ‚ç‚¹æ•°æ®åŠèŠ‚ç‚¹çš„å¢åˆ å˜åŒ–ï¼š</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>get -w /nodeA <span class=\"token comment\"># ç›‘å¬èŠ‚ç‚¹æ•°æ®çš„å˜åŒ–</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token function\">ls</span> -w /nodeA <span class=\"token comment\"># ç›‘å¬å­èŠ‚ç‚¹å¢åˆ å˜åŒ–</span></pre></td></tr></table></figure><p>Zookeeper ç›‘å¬å™¨åŸç†ï¼š</p>\n<ol>\n<li>åœ¨åˆ›å»º zookeeper å®¢æˆ·ç«¯æ—¶ï¼Œä¼šåˆ›å»ºä¸¤ä¸ªçº¿ç¨‹ï¼Œä¸€ä¸ªè´Ÿè´£ç½‘ç»œè¿æ¥é€šä¿¡ï¼ˆconnetï¼‰ï¼Œä¸€ä¸ªè´Ÿè´£äº‹ä»¶ç›‘å¬ï¼ˆlistenerï¼‰ã€‚</li>\n<li>é€šè¿‡ connet çº¿ç¨‹å°†æ³¨å†Œçš„ç›‘å¬äº‹ä»¶å‘é€ç»™ zookeeperã€‚</li>\n<li>zookeeper å°†æ³¨å†Œçš„ç›‘å¬äº‹ä»¶æ·»åŠ åˆ°ç›‘å¬å™¨åˆ—è¡¨ã€‚</li>\n<li>å½“ zookeeper ç›‘å¬åˆ°æ•°æ®æˆ–è·¯å¾„å‘ç”Ÿå˜åŒ–ï¼Œå°±ä¼šå°†æ¶ˆæ¯å‘é€ç»™ listener çº¿ç¨‹ã€‚</li>\n<li>listener çº¿ç¨‹å†…éƒ¨è°ƒç”¨äº†  <code>process()</code>  æ–¹æ³•è¿›è¡Œå¤„ç†ã€‚</li>\n</ol>\n<h3 id=\"zookeeper-api\"><a class=\"anchor\" href=\"#zookeeper-api\">#</a> Zookeeper API</h3>\n<p>Zookeeper æœ‰ä¸€ä¸ªç»‘å®š Java å’Œ C çš„å®˜æ–¹ APIã€‚Zookeeper ç¤¾åŒºä¸ºå¤§å¤šæ•°è¯­è¨€ï¼ˆ.NETï¼Œpython ç­‰ï¼‰æä¾›éå®˜æ–¹ APIã€‚ä½¿ç”¨ Zookeeper APIï¼Œåº”ç”¨ç¨‹åºå¯ä»¥è¿æ¥ï¼Œäº¤äº’ï¼Œæ“ä½œæ•°æ®ï¼Œåè°ƒï¼Œæœ€åæ–­å¼€ä¸ Zookeeper é›†åˆçš„è¿æ¥ã€‚</p>\n<blockquote>\n<p>æœ¬æ–‡ä»¥ Java è¯­è¨€ä½œä¸ºç¤ºä¾‹ã€‚</p>\n</blockquote>\n<h4 id=\"java-ç®€å•ç¤ºä¾‹\"><a class=\"anchor\" href=\"#java-ç®€å•ç¤ºä¾‹\">#</a> Java ç®€å•ç¤ºä¾‹</h4>\n<ol>\n<li>\n<p>å‡†å¤‡å·¥ä½œ</p>\n<ul>\n<li>åˆ›å»ºæ™®é€š maven å·¥ç¨‹ã€‚</li>\n<li>å¯åŠ¨å¯ç”¨çš„ zookeeper é›†ç¾¤æœåŠ¡ã€‚</li>\n</ul>\n</li>\n<li>\n<p>å¼•å…¥ä¾èµ–</p>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>junit<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>junit<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>version</span><span class=\"token punctuation\">></span></span>RELEASE<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>version</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>org.apache.zookeeper<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>zookeeper<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>version</span><span class=\"token punctuation\">></span></span>3.5.5<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>version</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure></li>\n<li>\n<p>æµ‹è¯•æ–‡ä»¶</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">ZkTest</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> connectString <span class=\"token operator\">=</span> <span class=\"token string\">\"hadoop01:2181,hadoop02:2181,hadoop03:2181\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token keyword\">int</span> sessionTimeout <span class=\"token operator\">=</span> <span class=\"token number\">2000</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// ä¼šè¯è¶…æ—¶ï¼Œæ¯«ç§’</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Zookeeper</span> zkClient <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token annotation punctuation\">@Before</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">init</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">IOException</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        zkClient <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Zookeeper</span><span class=\"token punctuation\">(</span>connectString<span class=\"token punctuation\">,</span> sessionTimeout<span class=\"token punctuation\">,</span> watchedEvent <span class=\"token operator\">-></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>            <span class=\"token comment\">// å¤„ç†ç›‘è§†å™¨ä»»åŠ¡ï¼šè·å–æ‰€æœ‰æ ¹èŠ‚ç‚¹</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>            <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">></span></span> children <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>            <span class=\"token keyword\">try</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>                children <span class=\"token operator\">=</span> zkClient<span class=\"token punctuation\">.</span><span class=\"token function\">getChildren</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/\"</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">KeeperException</span> <span class=\"token operator\">|</span> <span class=\"token class-name\">InterruptedException</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>                e<span class=\"token punctuation\">.</span><span class=\"token function\">printStackTrace</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>            <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> child <span class=\"token operator\">:</span> children<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>                <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>child<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    <span class=\"token annotation punctuation\">@Test</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">KeeperException</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">InterruptedException</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>        <span class=\"token class-name\">String</span> result <span class=\"token operator\">=</span> zkClient<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/test\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"node for test\"</span><span class=\"token punctuation\">.</span><span class=\"token function\">getBytes</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">ZooDefs<span class=\"token punctuation\">.</span>Ids</span><span class=\"token punctuation\">.</span>OPEN_ACL_UNSAFE<span class=\"token punctuation\">,</span> <span class=\"token class-name\">CreateMode</span><span class=\"token punctuation\">.</span>PERSISTENT<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>    <span class=\"token annotation punctuation\">@Test</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">exists</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">KeeperException</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">InterruptedException</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>        <span class=\"token class-name\">Stat</span> stat <span class=\"token operator\">=</span> zkClient<span class=\"token punctuation\">.</span><span class=\"token function\">exists</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/test\"</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>stat <span class=\"token operator\">==</span> <span class=\"token keyword\">null</span> <span class=\"token operator\">?</span> <span class=\"token string\">\"not exist\"</span> <span class=\"token operator\">:</span> <span class=\"token string\">\"exist\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure></li>\n<li>\n<p>ä»£ç ä¼˜åŒ–</p>\n<p>åœ¨å®é™…ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šå°†ç›¸å…³çš„è¿æ¥æ–¹æ³•æå–ä½œä¸ºå•ç‹¬çš„è¿æ¥å™¨ï¼Œä¾‹å¦‚ï¼š</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">ZookeeperConnector</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Zookeeper</span> client<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">final</span> <span class=\"token class-name\">CountDownLatch</span> connectedSignal <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">CountDownLatch</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Zookeeper</span> <span class=\"token function\">connect</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> host<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">IOException</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">InterruptedException</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        client <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Zookeeper</span><span class=\"token punctuation\">(</span>host<span class=\"token punctuation\">,</span> <span class=\"token number\">5000</span><span class=\"token punctuation\">,</span> watcher <span class=\"token operator\">-></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>watcher<span class=\"token punctuation\">.</span><span class=\"token function\">getState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token class-name\">Watcher<span class=\"token punctuation\">.</span>Event<span class=\"token punctuation\">.</span>KeeperState<span class=\"token punctuation\">.</span>SyncConnected</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>                connectedSignal<span class=\"token punctuation\">.</span><span class=\"token function\">countDown</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        connectedSignal<span class=\"token punctuation\">.</span><span class=\"token function\">await</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        <span class=\"token keyword\">return</span> client<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">InterruptedException</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        client<span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>åœ¨ä½¿ç”¨æ—¶ç›´æ¥è°ƒç”¨è¿æ¥å™¨ç¤ºä¾‹å³å¯ï¼š</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">ZkCreate</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token keyword\">static</span> <span class=\"token class-name\">Zookeeper</span> zk<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token keyword\">static</span> <span class=\"token class-name\">ZookeeperConnector</span> conn<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> path<span class=\"token punctuation\">,</span> <span class=\"token keyword\">byte</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> data<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">KeeperException</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">InterruptedException</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        zk<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span>path<span class=\"token punctuation\">,</span> data<span class=\"token punctuation\">,</span> <span class=\"token class-name\">ZooDefs<span class=\"token punctuation\">.</span>Ids</span><span class=\"token punctuation\">.</span>OPEN_ACL_UNSAFE<span class=\"token punctuation\">,</span> <span class=\"token class-name\">CreateMode</span><span class=\"token punctuation\">.</span>PERSISTENT<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token class-name\">String</span> path <span class=\"token operator\">=</span> <span class=\"token string\">\"/MyZnode\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        <span class=\"token keyword\">byte</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> data <span class=\"token operator\">=</span> <span class=\"token string\">\"My Znode\"</span><span class=\"token punctuation\">.</span><span class=\"token function\">getBytes</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        <span class=\"token keyword\">try</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>            conn <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ZookeeperConnector</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>            zk <span class=\"token operator\">=</span> conn<span class=\"token punctuation\">.</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"hadoop01:2181,hadoop02:2181,hadoop03:2181\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>            <span class=\"token function\">create</span><span class=\"token punctuation\">(</span>path<span class=\"token punctuation\">,</span> data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>            conn<span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Exception</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">.</span><span class=\"token function\">getMessage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure></li>\n</ol>\n<h3 id=\"curator-æ¡†æ¶\"><a class=\"anchor\" href=\"#curator-æ¡†æ¶\">#</a> Curator æ¡†æ¶</h3>\n<p>å®˜æ–¹åœ°å€ï¼š<span class=\"exturl\" data-url=\"aHR0cDovL2N1cmF0b3IuYXBhY2hlLm9yZy9jdXJhdG9yLWZyYW1ld29yaw==\">http://curator.apache.org/curator-framework</span></p>\n<p>ç”¨æ³•ç¤ºä¾‹ï¼š</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">ZkCurator</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">String</span> connectString <span class=\"token operator\">=</span> <span class=\"token string\">\"hadoop01:2181,hadoop02:2181,hadoop03:2181\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token annotation punctuation\">@Test</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">Exception</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token comment\">// é‡è¯•ç­–ç•¥</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token class-name\">RetryPolicy</span> retryPolicy <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ExponentialBackoffRetry</span><span class=\"token punctuation\">(</span><span class=\"token number\">1000</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token comment\">// åˆ›å»ºå®¢æˆ·ç«¯ï¼Œæ–¹å¼ä¸€</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token comment\">//        CuratorFramework client = CuratorFrameworkFactory.newClient(connectString, 5000, 5000, retryPolicy);</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token comment\">// åˆ›å»ºå®¢æˆ·ç«¯ï¼Œæ–¹å¼äºŒ</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token class-name\">CuratorFramework</span> client <span class=\"token operator\">=</span> <span class=\"token class-name\">CuratorFrameworkFactory</span><span class=\"token punctuation\">.</span><span class=\"token function\">builder</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>                <span class=\"token punctuation\">.</span><span class=\"token function\">connectString</span><span class=\"token punctuation\">(</span>connectString<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>                <span class=\"token punctuation\">.</span><span class=\"token function\">sessionTimeoutMs</span><span class=\"token punctuation\">(</span><span class=\"token number\">5000</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\">// ä¼šè¯è¶…æ—¶æ—¶é—´</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>                <span class=\"token punctuation\">.</span><span class=\"token function\">connectionTimeoutMs</span><span class=\"token punctuation\">(</span><span class=\"token number\">5000</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// è¿æ¥è¶…æ—¶æ—¶é—´</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>                <span class=\"token punctuation\">.</span><span class=\"token function\">retryPolicy</span><span class=\"token punctuation\">(</span>retryPolicy<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>                <span class=\"token punctuation\">.</span><span class=\"token function\">namespace</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"base\"</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// åŒ…å«éš”ç¦»åç§°</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>                <span class=\"token punctuation\">.</span><span class=\"token function\">build</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>        client<span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"å·²åˆ›å»ºå¹¶å¯åŠ¨å®¢æˆ·ç«¯\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>        <span class=\"token comment\">// åˆ›å»ºæ•°æ®èŠ‚ç‚¹</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>        client<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">creatingParentContainersIfNeeded</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// é€’å½’åˆ›å»ºæ‰€éœ€çˆ¶èŠ‚ç‚¹</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>                <span class=\"token punctuation\">.</span><span class=\"token function\">withMode</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">CreateMode</span><span class=\"token punctuation\">.</span>PERSISTENT<span class=\"token punctuation\">)</span> <span class=\"token comment\">// åˆ›å»ºç±»å‹ä¸ºæŒä¹…èŠ‚ç‚¹</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>                <span class=\"token punctuation\">.</span><span class=\"token function\">forPath</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/nodeA\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"init\"</span><span class=\"token punctuation\">.</span><span class=\"token function\">getBytes</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// ç›®å½•åŠå†…å®¹</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"æˆåŠŸåˆ›å»ºæŒä¹…èŠ‚ç‚¹\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>        <span class=\"token comment\">// è·å–èŠ‚ç‚¹æ•°æ®</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>        <span class=\"token keyword\">byte</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> bytes <span class=\"token operator\">=</span> client<span class=\"token punctuation\">.</span><span class=\"token function\">getData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">forPath</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/nodeA\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">(</span>bytes<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">// init</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>        <span class=\"token comment\">// ä¿®æ”¹èŠ‚ç‚¹æ•°æ®</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>        client<span class=\"token punctuation\">.</span><span class=\"token function\">setData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>                <span class=\"token punctuation\">.</span><span class=\"token function\">withVersion</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// æŒ‡å®šç‰ˆæœ¬ä¿®æ”¹</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>                <span class=\"token punctuation\">.</span><span class=\"token function\">forPath</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/nodeA\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"data\"</span><span class=\"token punctuation\">.</span><span class=\"token function\">getBytes</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>        <span class=\"token comment\">// äº‹åŠ¡å¤„ç†</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>        <span class=\"token class-name\">Collection</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">CuratorTransactionResult</span><span class=\"token punctuation\">></span></span> commit <span class=\"token operator\">=</span> client<span class=\"token punctuation\">.</span><span class=\"token function\">inTransaction</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">check</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">forPath</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/nodeA\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>                <span class=\"token punctuation\">.</span><span class=\"token function\">and</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>                <span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">withMode</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">CreateMode</span><span class=\"token punctuation\">.</span>EPHEMERAL<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">forPath</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/nodeB\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"init\"</span><span class=\"token punctuation\">.</span><span class=\"token function\">getBytes</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>                <span class=\"token punctuation\">.</span><span class=\"token function\">and</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>                <span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">withMode</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">CreateMode</span><span class=\"token punctuation\">.</span>EPHEMERAL<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">forPath</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/nodeC\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"init\"</span><span class=\"token punctuation\">.</span><span class=\"token function\">getBytes</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre>                <span class=\"token punctuation\">.</span><span class=\"token function\">and</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre>                <span class=\"token punctuation\">.</span><span class=\"token function\">commit</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre>        commit<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span>c <span class=\"token operator\">-></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre>            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Path: \"</span> <span class=\"token operator\">+</span> c<span class=\"token punctuation\">.</span><span class=\"token function\">getForPath</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre></pre></td></tr><tr><td data-num=\"51\"></td><td><pre>        <span class=\"token class-name\">Stat</span> stat <span class=\"token operator\">=</span> client<span class=\"token punctuation\">.</span><span class=\"token function\">checkExists</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">forPath</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/nodeA\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">// æ£€æŸ¥æ˜¯å¦å­˜åœ¨</span></pre></td></tr><tr><td data-num=\"52\"></td><td><pre>        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>stat <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"53\"></td><td><pre>            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/base/nodeA èŠ‚ç‚¹å­˜åœ¨ã€‚\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"54\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"55\"></td><td><pre>        <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">></span></span> strings <span class=\"token operator\">=</span> client<span class=\"token punctuation\">.</span><span class=\"token function\">getChildren</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">forPath</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/nodeA\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">// è·å–å­èŠ‚ç‚¹çš„è·¯å¾„</span></pre></td></tr><tr><td data-num=\"56\"></td><td><pre>        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> string <span class=\"token operator\">:</span> strings<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"57\"></td><td><pre>            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"path: \"</span> <span class=\"token operator\">+</span> string<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"58\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"59\"></td><td><pre>        <span class=\"token comment\">// å¼‚æ­¥å›è°ƒ</span></pre></td></tr><tr><td data-num=\"60\"></td><td><pre>        <span class=\"token class-name\">Executor</span> executor <span class=\"token operator\">=</span> <span class=\"token class-name\">Executors</span><span class=\"token punctuation\">.</span><span class=\"token function\">newFixedThreadPool</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"61\"></td><td><pre>        client<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"62\"></td><td><pre>                <span class=\"token punctuation\">.</span><span class=\"token function\">creatingParentsIfNeeded</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"63\"></td><td><pre>                <span class=\"token punctuation\">.</span><span class=\"token function\">withMode</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">CreateMode</span><span class=\"token punctuation\">.</span>PERSISTENT<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"64\"></td><td><pre>                <span class=\"token punctuation\">.</span><span class=\"token function\">inBackground</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>curatorFramework<span class=\"token punctuation\">,</span> curatorEvent<span class=\"token punctuation\">)</span> <span class=\"token operator\">-></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"65\"></td><td><pre>                    <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">.</span><span class=\"token function\">format</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"eventType:%s,resultCode:%s\"</span><span class=\"token punctuation\">,</span> curatorEvent<span class=\"token punctuation\">.</span><span class=\"token function\">getType</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> curatorEvent<span class=\"token punctuation\">.</span><span class=\"token function\">getResultCode</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"66\"></td><td><pre>                <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> executor<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"67\"></td><td><pre>                <span class=\"token punctuation\">.</span><span class=\"token function\">forPath</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/syncNode\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"68\"></td><td><pre>        <span class=\"token class-name\">Thread</span><span class=\"token punctuation\">.</span><span class=\"token function\">sleep</span><span class=\"token punctuation\">(</span><span class=\"token number\">2000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"69\"></td><td><pre></pre></td></tr><tr><td data-num=\"70\"></td><td><pre>        <span class=\"token comment\">// åˆ é™¤æ•°æ®èŠ‚ç‚¹</span></pre></td></tr><tr><td data-num=\"71\"></td><td><pre>        client<span class=\"token punctuation\">.</span><span class=\"token function\">delete</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"72\"></td><td><pre>                <span class=\"token punctuation\">.</span><span class=\"token function\">guaranteed</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\">// å¼ºåˆ¶ä¿è¯åˆ é™¤</span></pre></td></tr><tr><td data-num=\"73\"></td><td><pre>                <span class=\"token punctuation\">.</span><span class=\"token function\">deletingChildrenIfNeeded</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// é€’å½’åˆ é™¤å­èŠ‚ç‚¹</span></pre></td></tr><tr><td data-num=\"74\"></td><td><pre>                <span class=\"token punctuation\">.</span><span class=\"token function\">withVersion</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// æŒ‡å®šåˆ é™¤çš„ç‰ˆæœ¬å·</span></pre></td></tr><tr><td data-num=\"75\"></td><td><pre>                <span class=\"token punctuation\">.</span><span class=\"token function\">forPath</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"76\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"å·²æˆåŠŸåˆ é™¤èŠ‚ç‚¹[/base]\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"77\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"78\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h3 id=\"å‚è€ƒ\"><a class=\"anchor\" href=\"#å‚è€ƒ\">#</a> å‚è€ƒ</h3>\n<div class=\"note danger no-icon\">\n<p>æœ¬æ–‡ç›¸å…³ä»£ç å·²è®°å½•åœ¨ githubï¼Œ<span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL3hmYy1leGNsYXZlL2Jsb2ctcHJvamVjdC90cmVlL21hc3Rlci9hNmE1MWE4Y2U3Y2Q0YjY5ODA2OWZiN2I5N2IzMzNiMS96a3N0dWR5\">ç‚¹å‡»æ­¤å¤„</span>å‰å¾€æŸ¥çœ‹ã€‚æœ¬æ–‡å†…å®¹å¦‚æœ‰é”™è¯¯ä¹‹å¤„ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºç•™è¨€å‘ŠçŸ¥ã€‚</p>\n</div>\n<ul>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuYmlsaWJpbGkuY29tL3ZpZGVvL0JWMXRvNHkxQzdndw==\">https://www.bilibili.com/video/BV1to4y1C7gw</span> ï¼ˆä¸ªäººæ„Ÿè§‰è®²å¾—ä¸æ˜¯å¤ªå¥½ï¼‰</li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly96aHVhbmxhbi56aGlodS5jb20vcC81OTY2OTk4NQ==\">https://zhuanlan.zhihu.com/p/59669985</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cudzNjc2Nob29sLmNuL3pvb2tlZXBlcg==\">https://www.w3cschool.cn/zookeeper</span></li>\n</ul>\n",
            "tags": [
                "è®¡ç®—æœºç§‘å­¦",
                "JAVAå­¦ä¹ è·¯çº¿",
                "é«˜çº§ç¯‡",
                "java"
            ]
        },
        {
            "id": "https://www.chinmoku.cc/language/japanese/standard-japanese/standard-japanese-02-ing/",
            "url": "https://www.chinmoku.cc/language/japanese/standard-japanese/standard-japanese-02-ing/",
            "title": "æ¨™æº–æ—¥æœ¬èªã®å…¥é–€ï¼ˆäºŒï¼‰",
            "date_published": "2021-10-05T16:00:00.000Z",
            "content_html": "<div class=\"note info\">\n<p>æœ¬æ–‡å¯¹æ—¥è¯­åŸºç¡€è¿›è¡Œæ·±ä¸€æ­¥ä»‹ç»ï¼Œå…¶ä¸­æœ‰è®¸å¤šè¾ƒä¸ºé‡è¦çš„å†…å®¹ï¼ŒåŒ…æ‹¬åŠ¨è¯ä¸‰åˆ†ç±»ã€‚</p>\n<p>æœ¬æ–‡ä¸»è¦å†…å®¹å‚è€ƒè‡ªã€Šä¸­æ—¥äº¤æµæ ‡å‡†æ—¥æœ¬è¯­åˆçº§ã€‹ã€‚</p>\n</div>\n<h3 id=\"åŠ¨è¯ä¸‰åˆ†ç±»\"><a class=\"anchor\" href=\"#åŠ¨è¯ä¸‰åˆ†ç±»\">#</a> åŠ¨è¯ä¸‰åˆ†ç±»</h3>\n<h4 id=\"åŠ¨è¯\"><a class=\"anchor\" href=\"#åŠ¨è¯\">#</a> åŠ¨è¯</h4>\n<p>æ‰€æœ‰çš„åŠ¨è¯åŸå‹éƒ½æ˜¯ç”±  <code>ã†</code>  æ®µç»“å°¾ã€‚</p>\n<h5 id=\"ä¸€ç±»åŠ¨è¯äº”æ®µåŠ¨è¯-ã†-æ®µ\"><a class=\"anchor\" href=\"#ä¸€ç±»åŠ¨è¯äº”æ®µåŠ¨è¯-ã†-æ®µ\">#</a> ä¸€ç±»åŠ¨è¯ï¼ˆäº”æ®µåŠ¨è¯ï¼‰  <code>ã†</code>  æ®µ</h5>\n<ol>\n<li>\n<p>ç»“å°¾æ˜¯  <code>ã†</code>  æ®µé  <code>ã‚‹</code>  çš„åŠ¨è¯ï¼Œè‚¯å®šæ˜¯ 5 æ®µåŠ¨è¯ã€‚</p>\n<p>ä¾‹å¦‚ï¼š</p>\n<p><ruby>æ›¸<rp> (</rp><rt>ã‹</rt><rp>)</rp> ã<rt></rt></ruby>ã€<ruby>æ¢<rp> (</rp><rt>ã•ãŒ</rt><rp>)</rp> ã™<rt></rt></ruby>ã€<ruby>å‹<rp> (</rp><rt>ã‹</rt><rp>)</rp> ã¤<rt></rt></ruby>ã€<ruby>éŠ<rp> (</rp><rt>ã‚ã</rt><rp>)</rp> ã¶<rt></rt></ruby>ã€<ruby>èª­<rp> (</rp><rt>ã‚ˆ</rt><rp>)</rp> ã‚€<rt></rt></ruby></p>\n</li>\n<li>\n<p>ã‚æ®µ + ã‚‹ã€ã†æ®µ + ã‚‹ã€ãŠæ®µ + ã‚‹</p>\n<p><ruby>å›°<rp> (</rp><rt>ã“ã¾</rt><rp>)</rp> ã‚‹<rt></rt></ruby>ã€<ruby>æ€’<rp> (</rp><rt>ãŠã“</rt><rp>)</rp> ã‚‹<rt></rt></ruby>ã€ã‚„ã‚‹</p>\n</li>\n<li>\n<p>ç‰¹ä¾‹ã€‚</p>\n<p><ruby>åˆ‡<rp> (</rp><rt>ã</rt><rp>)</rp> ã‚‹<rt></rt></ruby>ã€<ruby>å¸°<rp> (</rp><rt>ã‹ãˆ</rt><rp>)</rp> ã‚‹<rt></rt></ruby>ã€<ruby>èµ°<rp> (</rp><rt>ã¯ã—</rt><rp>)</rp> ã‚‹<rt></rt></ruby></p>\n</li>\n</ol>\n<h5 id=\"äºŒç±»åŠ¨è¯ä¸Šä¸€æ®µåŠ¨è¯-ä¸‹ä¸€æ®µåŠ¨è¯\"><a class=\"anchor\" href=\"#äºŒç±»åŠ¨è¯ä¸Šä¸€æ®µåŠ¨è¯-ä¸‹ä¸€æ®µåŠ¨è¯\">#</a> äºŒç±»åŠ¨è¯ï¼ˆä¸Šä¸€æ®µåŠ¨è¯ã€ä¸‹ä¸€æ®µåŠ¨è¯ï¼‰</h5>\n<ol>\n<li>\n<p>ã„æ®µ + ã‚‹ï¼ˆä¸Šä¸€æ®µï¼‰</p>\n</li>\n<li>\n<p>ãˆæ®µ + ã‚‹ï¼ˆä¸‹ä¸€æ®µï¼‰</p>\n</li>\n</ol>\n<h5 id=\"ä¸‰ç±»åŠ¨è¯ã‚«å˜-ã‚µå˜\"><a class=\"anchor\" href=\"#ä¸‰ç±»åŠ¨è¯ã‚«å˜-ã‚µå˜\">#</a> ä¸‰ç±»åŠ¨è¯ï¼ˆã‚«å˜ã€ã‚µå˜ï¼‰</h5>\n<p>ä»¥  <code>ãã‚‹</code>  ï¼ˆã‚«å˜ï¼‰å’Œ  <code>ã™ã‚‹</code>  ï¼ˆã‚µå˜ï¼‰ç»“å°¾çš„åŠ¨è¯ï¼Œä¸ºä¸‰ç±»åŠ¨è¯ã€‚</p>\n<h4 id=\"åŠ¨è¯å˜å½¢\"><a class=\"anchor\" href=\"#åŠ¨è¯å˜å½¢\">#</a> åŠ¨è¯å˜å½¢</h4>\n<ol>\n<li>\n<p>ä¸€ç±»åŠ¨è¯å˜å½¢</p>\n<p>å°†  <code>ã†</code>  æ®µç»“å°¾çš„éŸ³èŠ‚å‘å‰æŒªä¸€ä½ï¼Œå¹¶åŠ   <code>ã¾ã™</code> ã€‚</p>\n<p>æ›¸ãã€€ã‹ãã€€ãƒ¼ã€€æ›¸ãã¾ã™</p>\n<p>å¸ã†ã€€ã™ã†ã€€ãƒ¼ã€€å¸ã„ã¾ã™</p>\n<p>åˆ‡ã‚‹ã€€ãã‚‹ã€€ãƒ¼ã€€åˆ‡ã‚Šã¾ã™</p>\n<p>å‘¼ã¶ã€€ã‚ˆã¶ã€€ãƒ¼ã€€å‘¼ã³ã¾ã™</p>\n</li>\n<li>\n<p>äºŒç±»åŠ¨è¯å˜å½¢</p>\n<p>å°†  <code>ã‚‹</code>  å˜ä¸º  <code>ã¾ã™</code></p>\n<p>æ•™ãˆã‚‹ã€€ãŠã—ãˆã‚‹ã€€ãƒ¼ã€€æ•™ãˆã¾ã™</p>\n<p>é–‹ã‘ã‚‹ã€€ã‚ã‘ã‚‹ã€€ã€€ãƒ¼ã€€é–‹ã‘ã¾ã™</p>\n<p>èª¿ã¹ã‚‹ã€€ã—ã‚‰ã¹ã‚‹ã€€ãƒ¼ã€€èª¿ã¹ã¾ã™</p>\n<p>å¾—ã‚‹ã€€ã€€ãˆã‚‹ã€€ã€€ã€€ãƒ¼ã€€å¾—ã¾ã™</p>\n</li>\n<li>\n<p>ä¸‰ç±»åŠ¨è¯å˜å½¢</p>\n<p><code>ãã‚‹</code>  å˜ä¸º  <code>ãã¾ã™</code> ï¼Œ <code>ã™ã‚‹</code>  å˜ä¸º  <code>ã—ã¾ã™</code>  ã€‚</p>\n<p>å‹‰å¼·ã™ã‚‹ã€€ã¹ã‚“ãã‚‡ã†ã™ã‚‹ã€€ãƒ¼ã€€å‹‰å¼·ã—ã¾ã™</p>\n<p>æ•£æ­©ã™ã‚‹ã€€ã•ã‚“ã½ã™ã‚‹ã€€ã€€ã€€ãƒ¼ã€€æ•£æ­©ã—ã¾ã™</p>\n<p>åŠªåŠ›ã™ã‚‹ã€€ã©ã‚Šã‚‡ãã™ã‚‹ã€€ã€€ãƒ¼ã€€åŠªåŠ›ã—ã¾ã™</p>\n</li>\n</ol>\n<p>è¯¾å‰ç»ƒä¹ ï¼š</p>\n<ol>\n<li class=\"quiz\">\n<p>å¯¹äºå¥å­ â€œå¢™ä¸Šæœ‰å¼€å…³â€ çš„ç¿»è¯‘ï¼Œä¸‹åˆ—æ­£ç¡®çš„æ˜¯ <span class=\"gap\"></span> ã€‚</p>\n<ul class=\"options\">\n<li class=\"correct\">å£ã«ã‚¹ã‚¤ãƒƒãƒãŒã‚ã‚Šã¾ã™ã€‚</li>\n<li>å£ã®ä¸Šã«ã‚¹ã‚¤ãƒƒãƒãŒã‚ã‚Šã¾ã™ã€‚</li>\n<li>å£ã«ã‚¹ã‚¤ãƒƒãƒãŒã„ã¾ã™ã€‚</li>\n<li>å£ã®ä¸Šã«ã‚¹ã‚¤ãƒƒãƒãŒã„ã¾ã™ã€‚</li>\n</ul>\n</li>\n<li class=\"quiz fill\">\n<p>åŠ¨è¯  <code>é–‹ã‘ã‚‹</code>  çš„å˜å½¢æ˜¯ <span class=\"gap\">é–‹ã‘ã¾ã™</span>ã€‚</p>\n<blockquote>\n<p>è€ƒå¯ŸåŠ¨è¯åˆ†ç±»åŠå…¶å˜å½¢è§„åˆ™ã€‚</p>\n<p><span class=\"mistake\">ä»¥  <code>ã‘ã‚‹</code>  ç»“å°¾ï¼Œè¡¨ç¤ºè¯¥è¯æ˜¯ä¸‰ç±»åŠ¨è¯ï¼Œå…¶å˜å½¢è§„åˆ™ä¸ºï¼š  <code>ã™ã‚‹</code>  å˜ä¸º  <code>ã—ã¾ã™</code>  ã€‚</span></p>\n</blockquote>\n</li>\n</ol>\n<h3 id=\"è¯¾ç›®\"><a class=\"anchor\" href=\"#è¯¾ç›®\">#</a> è¯¾ç›®</h3>\n<h4 id=\"ç¬¬äº”è¯¾æ£®ã•ã‚“ã¯-7æ™‚ã«-èµ·ãã¾ã™\"><a class=\"anchor\" href=\"#ç¬¬äº”è¯¾æ£®ã•ã‚“ã¯-7æ™‚ã«-èµ·ãã¾ã™\">#</a> ç¬¬äº”è¯¾ï¼šæ£®ã•ã‚“ã¯ã€€ï¼—æ™‚ã«ã€€èµ·ãã¾ã™</h4>\n<h5 id=\"å•è¯\"><a class=\"anchor\" href=\"#å•è¯\">#</a> å•è¯</h5>\n<table>\n<thead>\n<tr>\n<th>å•è¯</th>\n<th>å‡å</th>\n<th>å£°è°ƒ</th>\n<th>è¯ä¹‰</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>ä»Š</td>\n<td>ã„ã¾</td>\n<td>1</td>\n<td>ç°åœ¨</td>\n</tr>\n<tr>\n<td>å…ˆé€±</td>\n<td>ã›ã‚“ã—ã‚…ã†</td>\n<td>0</td>\n<td>ä¸Šä¸ªæ˜ŸæœŸ</td>\n</tr>\n<tr>\n<td>æ¥é€±</td>\n<td>ã‚‰ã„ã—ã‚…ã†</td>\n<td>0</td>\n<td>ä¸‹ä¸ªæ˜ŸæœŸ</td>\n</tr>\n<tr>\n<td>å†æ¥é€±</td>\n<td>ã•ã‚‰ã„ã—ã‚…ã†</td>\n<td>0</td>\n<td>ä¸‹ä¸‹ä¸ªæ˜ŸæœŸ</td>\n</tr>\n<tr>\n<td>ä»Šé€±</td>\n<td>ã“ã‚“ã—ã‚…ã†</td>\n<td>0</td>\n<td>è¿™ä¸ªæ˜ŸæœŸ</td>\n</tr>\n<tr>\n<td>æ˜¨æ—¥</td>\n<td>ãã®ã†</td>\n<td>0</td>\n<td>æ˜¨å¤©</td>\n</tr>\n<tr>\n<td>æ˜æ—¥</td>\n<td>ã‚ã—ãŸ</td>\n<td>3</td>\n<td>æ˜å¤©</td>\n</tr>\n<tr>\n<td>æ˜å¾Œæ—¥</td>\n<td>ã‚ã•ã£ã¦</td>\n<td>2</td>\n<td>åå¤©</td>\n</tr>\n<tr>\n<td>ä¸€æ˜¨æ—¥</td>\n<td>ãŠã¨ã¨ã„</td>\n<td>3</td>\n<td>å‰å¤©</td>\n</tr>\n<tr>\n<td>æ¯æ—¥</td>\n<td>ã¾ã„ã«ã¡</td>\n<td>1</td>\n<td>æ¯å¤©</td>\n</tr>\n<tr>\n<td>æ¯æœ</td>\n<td>ã¾ã„ã‚ã•</td>\n<td>1</td>\n<td>æ¯å¤©æ—©ä¸Š</td>\n</tr>\n<tr>\n<td>æ¯æ™©</td>\n<td>ã¾ã„ã°ã‚“</td>\n<td>1</td>\n<td>æ¯å¤©æ™šä¸Š</td>\n</tr>\n<tr>\n<td>æ¯é€±</td>\n<td>ã¾ã„ã—ã‚…ã†</td>\n<td>0</td>\n<td>æ¯ä¸ªæ˜ŸæœŸ</td>\n</tr>\n<tr>\n<td>åˆå‰</td>\n<td>ã”ãœã‚“</td>\n<td>1</td>\n<td>ä¸Šåˆ</td>\n</tr>\n<tr>\n<td>åˆå¾Œ</td>\n<td>ã”ã”</td>\n<td>1</td>\n<td>ä¸‹åˆ</td>\n</tr>\n<tr>\n<td>æ—¥æ›œæ—¥</td>\n<td>ã«ã¡ã‚ˆã†ã³</td>\n<td>3</td>\n<td>æ˜ŸæœŸå¤©</td>\n</tr>\n<tr>\n<td>æœˆæ›œæ—¥</td>\n<td>ã’ã¤ã‚ˆã†ã³</td>\n<td>3</td>\n<td>æ˜ŸæœŸä¸€</td>\n</tr>\n<tr>\n<td>ç«æ›œæ—¥</td>\n<td>ã‹ã‚ˆã†ã³</td>\n<td>2</td>\n<td>æ˜ŸæœŸäºŒ</td>\n</tr>\n<tr>\n<td>æ°´æ›œæ—¥</td>\n<td>ã™ã„ã‚ˆã†ã³</td>\n<td>3</td>\n<td>æ˜ŸæœŸä¸‰</td>\n</tr>\n<tr>\n<td>æœ¨æ›œæ—¥</td>\n<td>ã‚‚ãã‚ˆã†ã³</td>\n<td>3</td>\n<td>æ˜ŸæœŸå››</td>\n</tr>\n<tr>\n<td>é‡‘æ›œæ—¥</td>\n<td>ãã‚“ã‚ˆã†ã³</td>\n<td>3</td>\n<td>æ˜ŸæœŸäº”</td>\n</tr>\n<tr>\n<td>åœŸæ›œæ—¥</td>\n<td>ã©ã‚ˆã†ã³</td>\n<td>2</td>\n<td>æ˜ŸæœŸå…­</td>\n</tr>\n<tr>\n<td>ä»Šæœ</td>\n<td>ã‘ã•</td>\n<td>1</td>\n<td>ä»Šå¤©æ—©ä¸Š</td>\n</tr>\n<tr>\n<td>ä»Šæ™©</td>\n<td>ã“ã‚“ã°ã‚“</td>\n<td>1</td>\n<td>ä»Šå¤©æ™šä¸Š</td>\n</tr>\n<tr>\n<td>æ¥å¹´</td>\n<td>ã‚‰ã„ã­ã‚“</td>\n<td>0</td>\n<td>æ˜å¹´</td>\n</tr>\n<tr>\n<td>å»å¹´</td>\n<td>ãã‚‡ã­ã‚“</td>\n<td>1</td>\n<td>å»å¹´</td>\n</tr>\n<tr>\n<td>å¤œ</td>\n<td>ã‚ˆã‚‹</td>\n<td>1</td>\n<td>æ™šä¸Šï¼Œå¤œé‡Œï¼Œå¤œæ™š</td>\n</tr>\n<tr>\n<td>æ™©</td>\n<td>ã°ã‚“</td>\n<td>0</td>\n<td>æ™šä¸Š</td>\n</tr>\n<tr>\n<td>æœ</td>\n<td>ã‚ã•</td>\n<td>1</td>\n<td>æ—©æ™¨</td>\n</tr>\n<tr>\n<td>å­¦æ ¡</td>\n<td>ãŒã£ã“ã†</td>\n<td>0</td>\n<td>å­¦æ ¡</td>\n</tr>\n<tr>\n<td>è©¦é¨“</td>\n<td>ã—ã‘ã‚“</td>\n<td>2</td>\n<td>è€ƒè¯•</td>\n</tr>\n<tr>\n<td>ä»•äº‹</td>\n<td>ã—ã”ã¨</td>\n<td>0</td>\n<td>å·¥ä½œ</td>\n</tr>\n<tr>\n<td>é…åˆ»</td>\n<td>ã¡ã“ã</td>\n<td>0</td>\n<td>è¿Ÿåˆ°</td>\n</tr>\n<tr>\n<td>ä¼‘ã¿</td>\n<td>ã‚„ã™ã¿</td>\n<td>0</td>\n<td>ä¼‘æ¯</td>\n</tr>\n<tr>\n<td>å‡ºå¼µ</td>\n<td>ã—ã‚…ã£ã¡ã‚‡ã†</td>\n<td>0</td>\n<td>å‡ºå·®</td>\n</tr>\n<tr>\n<td>ç ”ä¿®</td>\n<td>ã‘ã‚“ã—ã‚…ã†</td>\n<td>0</td>\n<td>è¿›ä¿®</td>\n</tr>\n<tr>\n<td>æ—…è¡Œ</td>\n<td>ã‚Šã‚‡ã“ã†</td>\n<td>0</td>\n<td>æ—…è¡Œ</td>\n</tr>\n<tr>\n<td>å±•è¦§ä¼š</td>\n<td>ã¦ã‚“ã‚‰ã‚“ã‹ã„</td>\n<td>3</td>\n<td>å±•è§ˆä¼š</td>\n</tr>\n<tr>\n<td>æ­“è¿ä¼š</td>\n<td>ã‹ã‚“ã’ã„ã‹ã„</td>\n<td>3</td>\n<td>æ¬¢è¿ä¼š</td>\n</tr>\n<tr>\n<td>ãƒãƒ¼ãƒ†ã‚£ãƒ¼</td>\n<td>ã½ãƒ¼ã¦ãƒãƒ¼</td>\n<td>1</td>\n<td>è”æ¬¢ä¼š</td>\n</tr>\n<tr>\n<td>ãŠå®…</td>\n<td>ãŠãŸã</td>\n<td>0</td>\n<td>åºœä¸Šï¼Œï¼ˆæ‚¨ï¼‰å®¶</td>\n</tr>\n<tr>\n<td>ã„ã¤</td>\n<td>ã„ã¤</td>\n<td>1</td>\n<td>ä»€ä¹ˆæ—¶å€™</td>\n</tr>\n<tr>\n<td>ä¼‘ã¿ã¾ã™</td>\n<td>ã‚„ã™ã¿ã¾ã™ãƒ»ã‚„ã™ã‚€</td>\n<td>4</td>\n<td>ä¼‘æ¯</td>\n</tr>\n<tr>\n<td>åƒãã¾ã™</td>\n<td>ã¯ãŸã‚‰ãã¾ã™ãƒ»ã¯ãŸã‚‰ã</td>\n<td>5</td>\n<td>å·¥ä½œ</td>\n</tr>\n<tr>\n<td>å§‹ã¾ã‚Šã¾ã™</td>\n<td>ã¯ã˜ã¾ã‚Šã¾ã™ãƒ»ã¯ã˜ã¾ã‚‹</td>\n<td>5</td>\n<td>å¼€å§‹</td>\n</tr>\n<tr>\n<td>çµ‚ã‚ã‚Šã¾ã™</td>\n<td>ãŠã‚ã‚Šã¾ã™ãƒ»ãŠã‚ã‚‹</td>\n<td>4</td>\n<td>ç»“æŸ</td>\n</tr>\n<tr>\n<td>èµ·ãã¾ã™</td>\n<td>ãŠãã¾ã™ãƒ»ãŠãã‚‹</td>\n<td>3</td>\n<td>èµ·åºŠ</td>\n</tr>\n<tr>\n<td>å¯ã¾ã™</td>\n<td>ã­ã¾ã™ãƒ»ã­ã‚‹</td>\n<td>2</td>\n<td>ç¡è§‰</td>\n</tr>\n<tr>\n<td>å‹‰å¼·ã—ã¾ã™</td>\n<td>ã¹ã‚“ãã‚‡ã†ã—ã¾ã™ãƒ»ã¹ã‚“ãã‚‡ã†ã™ã‚‹</td>\n<td>6</td>\n<td>å­¦ä¹ </td>\n</tr>\n<tr>\n<td>ã„ã¤ã‚‚</td>\n<td>ã„ã¤ã‚‚</td>\n<td>1</td>\n<td>ç»å¸¸</td>\n</tr>\n<tr>\n<td>åŒ—äº¬æ”¯ç¤¾</td>\n<td>ãƒšã‚­ãƒ³ã—ã—ã‚ƒ</td>\n<td>4</td>\n<td>åŒ—äº¬åˆ†ç¤¾</td>\n</tr>\n<tr>\n<td>ç¥æˆ¸</td>\n<td>ã“ã†ã¹</td>\n<td>1</td>\n<td>ç¥æˆ·</td>\n</tr>\n<tr>\n<td>ãŠã¯ã‚ˆã†</td>\n<td>ãŠã¯ã‚ˆã†</td>\n<td>0</td>\n<td>æ—©</td>\n</tr>\n</tbody>\n</table>\n<p>ä¸€è‡³åäºŒæ—¶å‘éŸ³ï¼š</p>\n<p>ã„ã¡ã˜ã€ã«ã˜ã€ã•ã‚“ã˜ã€ã‚ˆã˜ã€ã”ã˜ã€ã‚ãã˜ã€ã—ã¡ã˜ã€ã¯ã¡ã˜ã€ãã˜ã€ã˜ã‚…ã†ã˜ã€ã˜ã‚…ã†ã„ã¡ã˜ã€ã˜ã‚…ã†ã«ã˜</p>\n<p>å¸¸è§åˆ†é’Ÿå‘éŸ³ï¼š</p>\n<p>ä¸€åˆ†ã€äºŒåˆ†ã€ä¸‰åˆ†ã€å››åˆ†ã€äº”åˆ†ã€å…­åˆ†ã€ä¸ƒåˆ†ã€å…«åˆ†ã€ä¹åˆ†ã€ååˆ†ã€åä¸€åˆ†ã€åäº”åˆ†ã€ä¸‰ååˆ†ã€å››åäº”åˆ†ã€ä½•åˆ†</p>\n<p>ã„ã£ã·ã‚“ã€ã«ãµã‚“ã€ã•ã‚“ã·ã‚“ã€ã‚ˆã‚“ã·ã‚“ã€ã”ãµã‚“ã€ã‚ã£ã·ã‚“ã€ãªãªãµã‚“ã€ã¯ã£ã·ã‚“ã€ãã‚…ã†ãµã‚“ã€ã˜ã‚…ã£ã·ã‚“ã€ã˜ã‚…ã†ã„ã£ã·ã‚“ã€ã˜ã‚…ã†ã”ãµã‚“ã€ã‚ˆã‚“ã˜ã‚…ã†ã”ãµã‚“ã€ãªã‚“ã·ã‚“</p>\n<h5 id=\"è¯¾æ–‡\"><a class=\"anchor\" href=\"#è¯¾æ–‡\">#</a> è¯¾æ–‡</h5>\n<ol>\n<li>\n<p>è¯¾æ–‡ä¸€</p>\n<p>ä»Šã€å››æ™‚ã§ã™ã€‚</p>\n<p>æ£®ã•ã‚“ã¯ã€€ä¸ƒæ™‚ã«ã€€èµ·ãã¾ã™ã€‚</p>\n<p>æ£®ã•ã‚“ã¯ã€€å…ˆé€±ã€€ä¼‘ã¿ã¾ã—ãŸã€‚</p>\n<p>ç§ã¯ã€€æ˜¨æ—¥ã€€åƒãã¾ã›ã‚“ã¦ã—ãŸã€‚</p>\n</li>\n<li>\n<p>è¯¾æ–‡äºŒ</p>\n</li>\n</ol>\n<h5 id=\"è¯­æ³•\"><a class=\"anchor\" href=\"#è¯­æ³•\">#</a> è¯­æ³•</h5>\n<ol>\n<li>\n<p>ä»Šã€€ï½æ™‚ã€€ï½åˆ†ã§ã™ã€‚</p>\n<p>è¡¨ç¤ºç°åœ¨çš„æ—¶é—´ã€‚è¯´è¯åŒæ–¹éƒ½æ˜ç¡®åœ¨è®²ç°åœ¨çš„æ—¶é—´æ—¶ï¼Œâ€œä»Šâ€ å¯ä»¥çœç•¥ã€‚è¯¢é—®å…·ä½“çš„æ—¶é—´æ—¶ç”¨ â€œä½•æ™‚â€ã€‚</p>\n<ul>\n<li>ä»Šä½•æ™‚ã§ã™ã‹ã€‚</li>\n</ul>\n</li>\n</ol>\n<ul>\n<li>å››æ™‚åŠã§ã™ã€‚</li>\n</ul>\n<ol start=\"2\">\n<li>\n<p>å‹•è©</p>\n<p>å¸¸æ€ï¼šã¾ã™</p>\n<p>è¿‡å»æ—¶è‚¯å®šï¼šã¾ã›ã‚“</p>\n<p>å¦å®šï¼šã¾ã—ãŸ</p>\n<p>è¿‡å»æ—¶å¦å®šï¼šã¾ã›ã‚“ã§ã—ãŸ</p>\n<table>\n<thead>\n<tr>\n<th>åŸå‹</th>\n<th>ã¾ã™å‹</th>\n<th>è¿‡å»æ—¶</th>\n<th>å¦å®š</th>\n<th>è¿‡å»æ—¶å¦å®š</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>åƒã</td>\n<td>åƒãã¾ã™</td>\n<td>åƒãã¾ã—ãŸ</td>\n<td>åƒãã¾ã›ã‚“</td>\n<td>åƒãã¾ã›ã‚“ã§ã—ãŸ</td>\n</tr>\n<tr>\n<td><ruby>å¸°<rp> (</rp><rt>ã‹ãˆ</rt><rp>)</rp> ã‚‹<rt></rt></ruby></td>\n<td>å¸°ã‚Šã¾ã™</td>\n<td>å¸°ã‚Šã¾ã—ãŸ</td>\n<td>å¸°ã‚Šã¾ã›ã‚“</td>\n<td>å¸°ã‚Šã¾ã›ã‚“ã§ã—ãŸ</td>\n</tr>\n<tr>\n<td><ruby>è¡Œ<rp> (</rp><rt>ã„</rt><rp>)</rp> ã<rt></rt></ruby></td>\n<td>è¡Œãã¾ã™</td>\n<td>è¡Œãã¾ã—ãŸ</td>\n<td>è¡Œãã¾ã›ã‚“</td>\n<td>è¡Œãã¾ã›ã‚“ã§ã—ãŸ</td>\n</tr>\n<tr>\n<td><ruby>å‡ºä¼š<rp> (</rp><rt>ã§ã‚</rt><rp>)</rp> ã†<rt></rt></ruby></td>\n<td></td>\n<td></td>\n<td></td>\n<td></td>\n</tr>\n</tbody>\n</table>\n</li>\n<li>\n<p>å [æ—¶é—´] ã«ã€€å‹•è©</p>\n<p>è¡¨ç¤ºåŠ¨ä½œå‘ç”Ÿçš„æ—¶é—´æ—¶ï¼Œè¦åœ¨å…·ä½“æ—¶é—´è¯è¯­ååŠ ä¸ŠåŠ©è¯ â€œã«â€ã€‚</p>\n<p>ä¹Ÿå­˜åœ¨éƒ¨åˆ†æƒ…å†µä¸éœ€è¦åŠ åŠ©è¯ â€œã«â€ï¼Œå¦‚ï¼šä»Šã€æ˜¨æ—¥ã€ä»Šæ—¥ã€æ˜æ—¥ã€æ¯æ—¥ã€å»å¹´ã€æ¥å¹´ã€‚</p>\n<p>æœˆæ›œæ—¥ãƒ¼æ—¥æ›œæ—¥ï¼Œä¸€èˆ¬éœ€è¦åŠ åŠ©è¯ â€œã«â€ï¼Œä½†æœ‰æ—¶æ ¹æ®æƒ…å†µä¹Ÿå¯ä»¥ä¸åŠ ã€‚</p>\n<p>ä¾‹å¥ï¼š</p>\n<ul>\n<li>æ£®ã•ã‚“ã¯ã€€ä¸ƒæ™‚ã«ã€€èµ·ãã¾ã™ã€‚ï¼ˆï¼—æ™‚ã€æ£®ã•ã‚“ã¯èµ·ãã¾ã™ï¼‰</li>\n<li>å­¦æ ¡ã¯ã€€å…«æ™‚åŠã«ã€€å§‹ã¾ã‚Šã¾ã™ã€‚ï¼ˆå…«æ™‚åŠã€å­¦æ ¡ã¯å§‹ã¾ã‚Šã¾ã™ï¼‰</li>\n<li>æ˜¨æ—¥ã®ï¼˜æ™‚ã€ç§ã¯èµ·ãã¾ã—ãŸã€‚</li>\n</ul>\n</li>\n<li>\n<p>å [æ—¶é—´] ã‹ã‚‰ã€€å [æ—¶é—´] ã¾ã§ã€€å‹•è©ã€‚</p>\n<p>è¡¨ç¤ºæŸä¸ªåŠ¨ä½œå‘ç”Ÿåœ¨æŸä¸ªæ—¶æœŸä¹‹é—´æ—¶ï¼Œä½¿ç”¨ â€œ~ ã‹ã‚‰ã€€ï½ã¾ã§â€ã€‚</p>\n<ul>\n<li>ç§ã¯ã€€ä¹æ™‚ã‹ã‚‰ã€€äº”æ™‚ã¾ã§ã€€åƒãã¾ã™ã€‚</li>\n<li>æ£®ã•ã‚“ã¯ã€€æœˆæ›œæ—¥ã‹ã‚‰ã€€æ°´æ›œæ—¥ã¾ã§ã€€ä¼‘ã¿ã¾ã—ã ã€‚</li>\n</ul>\n<p>ä¹Ÿå¯ä»¥åˆ†å¼€ä½¿ç”¨ï¼š</p>\n<ul>\n<li>ç§ã¯ã€€ä¹æ™‚ã‹ã‚‰ã€€åƒãã¾ã™ã€‚ï¼ˆæˆ‘ä»ä¹ç‚¹å¼€å§‹å·¥ä½œï¼‰</li>\n<li>ç‹ã•ã‚“ã¯ã€€ä¹æ™‚ã¾ã§ã€€åƒãã¾ã™ã€‚ï¼ˆç‹å…ˆç”Ÿå·¥ä½œåˆ°ä¹ç‚¹ï¼‰</li>\n</ul>\n</li>\n<li>\n<p>ã¡ã¤ã€€å‹•è©ã¾ã™ãŒ</p>\n<p>è¯¢é—®ä»€ä¹ˆæ—¶å€™åšæŸäº‹ã€‚</p>\n<p>å¸¸è§è¯ï¼šä½•æ™‚ã«ã€ä½•æ›œæ—¥ã«ã€ä½•æ—¥ã«ã€‚</p>\n<ul>\n<li>\n<p>è©¦é¨“ã¯ã€€ã„ã¤ã€€å§‹ã¾ã‚Šã¾ã™ã‹ã€‚ï¼ˆè€ƒè¯•ä»€ä¹ˆæ—¶å€™å¼€å§‹ï¼‰</p>\n</li>\n<li>\n<p>ä»•äº‹ã¯ã€€ä½•æ™‚ã«ã€€çµ‚ã‚ã‚Šã¾ã™ãŒã€‚ï¼ˆå·¥ä½œå‡ ç‚¹ç»“æŸï¼‰</p>\n</li>\n<li>\n<p>å±•è¦§ä¼šã¯ã€€ã„ã¤ã‹ã‚‰ã€€å§‹ã¾ã‚Šã¾ã™ã‹ã€‚ï¼ˆå±•è§ˆä¼šå‡ ç‚¹å¼€å§‹ï¼‰</p>\n</li>\n<li>\n<p>å¼µã•ã‚“ã¯ã€€ä½•æ›œæ—¥ã¾ã§ã€€ä¼‘ã¿ã¾ã™ãŒã€‚ï¼ˆå°å¼ ä¼‘æ¯å€’æ˜ŸæœŸå‡ ï¼‰</p>\n<p>â€”â€” ç«æ›œæ—¥ã¾ã§ã§ã™ã€‚</p>\n</li>\n</ul>\n</li>\n</ol>\n",
            "tags": [
                "è¯­è¨€å­¦ä¹ ",
                "æ—¥è¯­",
                "æ¨™æº–æ—¥æœ¬èªå…¥é–€",
                "æ—¥æœ¬èª"
            ]
        },
        {
            "id": "https://www.chinmoku.cc/computer-science/python/python-all-base/",
            "url": "https://www.chinmoku.cc/computer-science/python/python-all-base/",
            "title": "Python åŸºç¡€çŸ¥è¯†å…¨é€šå…³",
            "date_published": "2021-10-01T09:22:15.000Z",
            "content_html": "<div class=\"note info\">\n<p>æœ€è¿‘åœ¨å·¥ä½œçš„é¡¹ç›®ä¸­ï¼Œæœ‰ä¸€ä¸ªæ¨¡å—çš„æœåŠ¡æ˜¯ä½¿ç”¨ Python è„šæœ¬ç¼–å†™çš„ï¼Œåˆšå·§æœ€è¿‘é€šè¿‡ç”¨æˆ·çš„åé¦ˆå‘ç°è¿™ä¸ªè„šæœ¬æœ‰äº› bug ï¼Œè€Œæˆ‘å‘¨å›´åŒäº‹åˆéƒ½æ˜¯ Java ä½“ç³»çš„ï¼Œå¯¹ Python ä¸å¤ªäº†è§£ã€‚åŸºäºè¿™ä¸ªåŸå› ï¼ŒåŠ ä¸Šæˆ‘ä¹‹å‰ä¹Ÿæ¨¡ç³Šäº†è§£è¿‡ï¼Œå¤§æ¦‚çŸ¥é“ Python çš„å…¥é—¨æ˜¯å¾ˆç®€å•çš„ã€‚æ‰€ä»¥å°±å¹²è„†èŠ±ç‚¹æ—¶é—´å¥½å¥½åœ°å­¦ä¸€ä¸‹ Python ï¼Œé¢„æœŸèƒ½å¤Ÿå…¥é—¨å¹¶é€‚ç”¨åˆ°ä¸€äº›ç®€å•çš„å·¥ä½œåœºæ™¯ä¸­ã€‚</p>\n<p>å…³äºå¼€å‘è¯­è¨€çš„çƒ­åº¦ï¼š<span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cudGlvYmUuY29tL3Rpb2JlLWluZGV4\">https://www.tiobe.com/tiobe-index</span></p>\n<p>å½“ç„¶ï¼Œä¸åŒå¼€å‘è¯­è¨€å„æœ‰ä¼˜åŠ£ï¼Œè„±ç¦»å®é™…éœ€è¦è¿›è¡Œå¯¹æ¯”ä¹Ÿæ— æ„ä¹‰ï¼Œèƒ½é€‚åº”éœ€è¦çš„è¯­è¨€ï¼Œå°±æ˜¯å¥½çš„è¯­è¨€ã€‚</p>\n<p>å¦å¤–ï¼Œæœ¬æ–‡ä½œä¸º Python åŸºç¡€å­¦ä¹ çš„ç¬”è®°ï¼Œé™äºç¯‡å¹…ï¼Œå¯¹äºéƒ¨åˆ†è¾ƒä¸ºæ·±å¹¿çš„çŸ¥è¯†ä¸åšæ‰©å±•ï¼Œä½†å“åº”éƒ¨åˆ†éƒ½ä¼šå°½é‡ç•™å‡ºæ‰©å±•é“¾æ¥ï¼Œä¾›æœ‰å…´è¶£çš„è¯»è€…è¿›è¡Œæ·±åŒ–äº†è§£ã€‚</p>\n</div>\n<h3 id=\"ç®€ä»‹\"><a class=\"anchor\" href=\"#ç®€ä»‹\">#</a> ç®€ä»‹</h3>\n<p>Python çš„ä¼˜ç‚¹å¾ˆå¤šï¼Œç®€å•çš„å¯ä»¥æ€»ç»“ä¸ºä»¥ä¸‹å‡ ç‚¹ã€‚</p>\n<ol>\n<li>ç®€å•å’Œæ˜ç¡®ï¼Œåšä¸€ä»¶äº‹åªæœ‰ä¸€ç§æ–¹æ³•ã€‚</li>\n<li>å­¦ä¹ æ›²çº¿ä½ï¼Œè·Ÿå…¶ä»–å¾ˆå¤šè¯­è¨€ç›¸æ¯”ï¼ŒPython æ›´å®¹æ˜“ä¸Šæ‰‹ã€‚</li>\n<li>å¼€æ”¾æºä»£ç ï¼Œæ‹¥æœ‰å¼ºå¤§çš„ç¤¾åŒºå’Œç”Ÿæ€åœˆã€‚</li>\n<li>è§£é‡Šå‹è¯­è¨€ï¼Œå¤©ç”Ÿå…·æœ‰å¹³å°å¯ç§»æ¤æ€§ã€‚</li>\n<li>æ”¯æŒä¸¤ç§ä¸»æµçš„ç¼–ç¨‹èŒƒå¼ï¼ˆé¢å‘å¯¹è±¡ç¼–ç¨‹å’Œå‡½æ•°å¼ç¼–ç¨‹ï¼‰éƒ½æä¾›äº†æ”¯æŒã€‚</li>\n<li>å¯æ‰©å±•æ€§å’Œå¯åµŒå…¥æ€§ï¼Œå¯ä»¥è°ƒç”¨  <code>C/C++</code>  ä»£ç ï¼Œä¹Ÿå¯ä»¥åœ¨  <code>C/C++</code>  ä¸­è°ƒç”¨ Pythonã€‚</li>\n<li>ä»£ç è§„èŒƒç¨‹åº¦é«˜ï¼Œå¯è¯»æ€§å¼ºï¼Œé€‚åˆæœ‰ä»£ç æ´ç™–å’Œå¼ºè¿«ç—‡çš„äººç¾¤ã€‚</li>\n</ol>\n<p>Python çš„ç¼ºç‚¹ä¸»è¦é›†ä¸­åœ¨ä»¥ä¸‹å‡ ç‚¹ã€‚</p>\n<ol>\n<li>è¿è¡Œé€Ÿåº¦æ…¢ï¼Œå’Œ C ç¨‹åºç›¸æ¯”éå¸¸æ…¢ï¼Œå› ä¸º Python æ˜¯è§£é‡Šå‹è¯­è¨€ï¼Œä½ çš„ä»£ç åœ¨æ‰§è¡Œæ—¶ä¼šä¸€è¡Œä¸€è¡Œåœ°ç¿»è¯‘æˆ CPU èƒ½ç†è§£çš„æœºå™¨ç ï¼Œè¿™ä¸ªç¿»è¯‘è¿‡ç¨‹éå¸¸è€—æ—¶ï¼Œæ‰€ä»¥å¾ˆæ…¢ã€‚</li>\n<li>ä»£ç æ— æ³•åŠ å¯†ï¼Œå‘å¸ƒå‡ºå»çš„ Python ä»£ç éƒ½æ˜¯æºä»£ç ï¼Œè¿™æ˜¯æ‰€æœ‰è§£é‡Šå‹è¯­è¨€çš„å…±æ€§ã€‚</li>\n<li>åœ¨å¼€å‘æ—¶å¯ä»¥é€‰æ‹©çš„æ¡†æ¶å¤ªå¤šï¼ˆå¦‚ Web æ¡†æ¶å°±æœ‰ 100 å¤šä¸ªï¼‰ï¼Œæœ‰é€‰æ‹©çš„åœ°æ–¹å°±æœ‰é”™è¯¯ã€‚</li>\n</ol>\n<p>ç›®å‰ Python åœ¨ Web åº”ç”¨å¼€å‘ã€äº‘åŸºç¡€è®¾æ–½ã€DevOpsã€ç½‘ç»œçˆ¬è™«å¼€å‘ã€æ•°æ®åˆ†ææŒ–æ˜ã€æœºå™¨å­¦ä¹ ç­‰é¢†åŸŸéƒ½æœ‰ç€å¹¿æ³›çš„åº”ç”¨ï¼Œå› æ­¤ä¹Ÿäº§ç”Ÿäº† Web åç«¯å¼€å‘ã€æ•°æ®æ¥å£å¼€å‘ã€è‡ªåŠ¨åŒ–è¿ç»´ã€è‡ªåŠ¨åŒ–æµ‹è¯•ã€ç§‘å­¦è®¡ç®—å’Œå¯è§†åŒ–ã€æ•°æ®åˆ†æã€é‡åŒ–äº¤æ˜“ã€æœºå™¨äººå¼€å‘ã€å›¾åƒè¯†åˆ«å’Œå¤„ç†ç­‰ä¸€ç³»åˆ—çš„èŒä½ã€‚</p>\n<h3 id=\"å®‰è£…\"><a class=\"anchor\" href=\"#å®‰è£…\">#</a> å®‰è£…</h3>\n<blockquote>\n<p>æœ¬æ–‡ä½œä¸ºå­¦ä¹ ç¤ºä¾‹ï¼Œä»¥ windows ä½œä¸ºå­¦ä¹ ç¯å¢ƒï¼ŒPython å½“å‰æ–‡æ¡£ç‰ˆæœ¬å·ï¼š  <code>3.9.6</code></p>\n</blockquote>\n<h4 id=\"windows-ç¯å¢ƒ\"><a class=\"anchor\" href=\"#windows-ç¯å¢ƒ\">#</a> Windows ç¯å¢ƒ</h4>\n<p>å®˜ç½‘ä¸‹è½½ï¼š<span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cucHl0aG9uLm9yZw==\">https://www.python.org</span></p>\n<p><img data-src=\"https://img.xfc-exclave.com/2021/08/1d551f6f77ba7c6dfd11272639e424981629963175.png\" alt=\"Pythonå®˜ç½‘é¦–é¡µ\" /></p>\n<p>ä»å®˜ç½‘ä¸‹è½½å®‰è£…æ–‡ä»¶  <code>python-3.9.6-amd64.exe</code>  å¹¶åŒå‡»æ‰§è¡Œå®‰è£…ï¼š</p>\n<p><img data-src=\"https://img.xfc-exclave.com/2021/08/dfa4fe1ca0aa52c76328e36fa6d4a78d1629963181.png\" alt=\"Pythonå®‰è£…å¼•å¯¼\" /></p>\n<blockquote>\n<p>æ³¨æ„ï¼šå®‰è£…æ—¶è¯·å‹¾é€‰  <code>Add Python *.* to PATH</code>  ï¼Œå®ƒå°†ä¼šä¸ºæ‚¨è‡ªåŠ¨é…ç½®ç¯å¢ƒå˜é‡ã€‚</p>\n</blockquote>\n<p>æ£€éªŒæ˜¯å¦å®‰è£…æˆåŠŸï¼š</p>\n<p><img data-src=\"https://img.xfc-exclave.com/2021/08/e21b309abd82d2f79572f8ad2f308cbb1629963192.png\" alt=\"æ ¡éªŒPythonå®‰è£…\" /></p>\n<p>å¦‚å›¾æ‰€ç¤ºï¼Œåˆ™è¡¨ç¤º Python å®‰è£…æˆåŠŸï¼</p>\n<h4 id=\"linux-ç¯å¢ƒ\"><a class=\"anchor\" href=\"#linux-ç¯å¢ƒ\">#</a> Linux ç¯å¢ƒ</h4>\n<p>éƒ¨åˆ†ä¸»æœºæˆ–è™šæ‹Ÿæœºç‰ˆæœ¬ä¼šå†…ç½®å®‰è£… Pythonï¼Œå¦‚å†…ç½® Python ä»¥è¶³å¤Ÿï¼Œå³å¯è·³è¿‡æ­¤å°èŠ‚ã€‚</p>\n<ol>\n<li>\n<p>é€‰æ‹© Python ç‰ˆæœ¬ï¼ˆå¯é€‰ï¼‰ã€‚</p>\n<p>å¦‚éœ€æŒ‡å®šç‰ˆæœ¬å·ï¼Œ<span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cucHl0aG9uLm9yZy9mdHAvcHl0aG9uLw==\">ç‚¹å‡»æ­¤å¤„</span>å‰å¾€å®˜ç½‘è¿›è¡Œé€‰æ‹©ï¼Œæœ¬æ–‡å°†ä»¥  <code>3.9.6</code>  ä½œä¸ºç¤ºä¾‹ã€‚</p>\n</li>\n<li>\n<p>å®‰è£…å¹¶æ›´æ–°ã€‚</p>\n<p>åœ¨åˆé€‚çš„ä½ç½®ä¸‹è½½å®‰è£…åŒ…ï¼š</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">wget</span> https://www.python.org/ftp/python/3.9.6/Python-3.9.6.tgz <span class=\"token comment\"># ä¸‹è½½</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token function\">tar</span> -zxvf Python-3.9.6.tgz -C /opt/module/ <span class=\"token comment\"># è§£å‹</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>yum -y <span class=\"token function\">install</span> gcc zlib* libffi-devel <span class=\"token comment\"># å®‰è£…ç¼–è¯‘ Python æ‰€éœ€è¦çš„å¼€å‘åŒ…</span></pre></td></tr></table></figure><p>è¿›å…¥è§£å‹ç›®å½•ï¼Œè¿›è¡Œç¼–è¯‘å’Œå®‰è£…ï¼š</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token builtin class-name\">cd</span> /opt/module/Python-3.9.6</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>./configure --prefix<span class=\"token operator\">=</span>/usr/local/bin/python3</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token function\">make</span><span class=\"token operator\">&amp;&amp;</span><span class=\"token function\">make</span> <span class=\"token function\">install</span></pre></td></tr></table></figure><blockquote>\n<p>å¦‚åœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­æç¤º make å‘½ä»¤ä¸å­˜åœ¨ï¼Œä¼šç»™å‡ºç›¸åº”çš„æç¤ºï¼Œå¯æ ¹æ®æç¤ºè¿›è¡Œå®‰è£…ã€‚</p>\n</blockquote>\n<p>åˆ é™¤åŸå…ˆçš„å‘½ä»¤ï¼Œå¹¶å»ºç«‹æ–°çš„è½¯è¿æ¥ï¼š</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>python3 -V <span class=\"token comment\"># æ­¤æ—¶ä»æ˜¯æ—§ç‰ˆæœ¬</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token function\">rm</span> -rf /usr/bin/python3</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token function\">ln</span> -s /usr/local/bin/python3/bin/python3 /usr/bin/python3</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>python3 -V <span class=\"token comment\"># æ­¤æ—¶è¢«æ›¿æ¢ä¸ºæ–°å®‰è£…çš„ç‰ˆæœ¬</span></pre></td></tr></table></figure><blockquote>\n<p>æ³¨æ„ï¼š</p>\n<ol>\n<li>å¦‚æœå®‰è£…è¿‡ç¨‹ä¸­å‡ºç°ç½‘ç»œé—®é¢˜ï¼Œå¯å°è¯•ä¸´æ—¶å…³é—­é˜²ç«å¢™ã€‚</li>\n<li>å¦‚æœå‡ºç°æƒé™é—®é¢˜ï¼Œå¯å°è¯•ä½¿ç”¨ root æˆ– sudo ç”¨æˆ·èº«ä»½ã€‚</li>\n</ol>\n</blockquote>\n</li>\n</ol>\n<h3 id=\"hello-world\"><a class=\"anchor\" href=\"#hello-world\">#</a> Hello World</h3>\n<p>å®‰è£…æˆåŠŸåï¼Œæˆ‘ä»¬å°†å¼€å§‹å­¦ä¹ å¦‚ä½•ç¼–å†™ç¬¬ä¸€ä¸ª Python ç¨‹åºã€‚</p>\n<h4 id=\"å‘½ä»¤è¡Œæ¨¡å¼ä¸-python-äº¤äº’æ¨¡å¼\"><a class=\"anchor\" href=\"#å‘½ä»¤è¡Œæ¨¡å¼ä¸-python-äº¤äº’æ¨¡å¼\">#</a> å‘½ä»¤è¡Œæ¨¡å¼ä¸ Python äº¤äº’æ¨¡å¼</h4>\n<p>æ­£å¼ç¼–å†™ Python ç¨‹åºä¹‹å‰ï¼Œéœ€è¦å…ˆäº†è§£ä¸€ä¸‹ä»€ä¹ˆæ˜¯å‘½ä»¤è¡Œæ¨¡å¼ï¼Œä»€ä¹ˆæ˜¯ Python æ¨¡å¼ã€‚</p>\n<ol>\n<li>\n<p>å‘½ä»¤è¡Œæ¨¡å¼</p>\n<p>å‘½ä»¤è¡Œæ¨¡å¼ï¼Œå³å‘½ä»¤æç¤ºç¬¦ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„  <code>CMD</code>  ã€å°é»‘æ¡†ç­‰ï¼Œå®ƒç”¨äºæ‰§è¡Œä¸€äº› Windows å‘½ä»¤ã€‚</p>\n</li>\n<li>\n<p>Python äº¤äº’æ¨¡å¼</p>\n<p>åœ¨å‘½ä»¤è¡Œæ¨¡å¼ä¸‹ï¼Œè¾“å…¥  <code>python</code>  ï¼Œå³å¯è¿›å…¥ Python äº¤äº’æ¨¡å¼ï¼Œå®ƒä»¥  <code>&gt;&gt;&gt;</code>  ä½œä¸ºæç¤ºç¬¦ã€‚</p>\n<p>åœ¨ Python äº¤äº’æ¨¡å¼ä¸‹ï¼Œè¾“å…¥  <code>exit()</code>  æˆ–ä½¿ç”¨å¿«æ·é”®  <code>Ctrl + Z</code>  å¹¶å›è½¦ï¼Œå³å¯é€€å‡ºï¼Œå›åˆ°å‘½ä»¤è¡Œæ¨¡å¼ã€‚</p>\n<blockquote>\n<p>Python åªæ˜¯ä¸ºè°ƒè¯•ä»£ç æä¾›æ–¹ä¾¿ï¼Œå¹¶éæ­£å¼è¿è¡Œ Python ä»£ç çš„ç¯å¢ƒã€‚</p>\n</blockquote>\n</li>\n</ol>\n<p>å°è¯•åœ¨ Python äº¤äº’æ¨¡å¼ä¸‹ï¼Œæ‰§è¡Œä¸€äº›ç®€å•çš„æŒ‡ä»¤ï¼š</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token operator\">>></span><span class=\"token operator\">></span> <span class=\"token number\">100</span> + <span class=\"token number\">20</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token number\">120</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token operator\">>></span><span class=\"token operator\">></span> print<span class=\"token punctuation\">(</span><span class=\"token string\">'Hello World~'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>Hello World~</pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token operator\">>></span><span class=\"token operator\">></span> <span class=\"token number\">2</span> ** <span class=\"token number\">10</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token number\">1024</span></pre></td></tr></table></figure><p>åœ¨å‘½ä»¤è¡Œæ¨¡å¼ä¸‹ï¼Œä¹Ÿå¯ä»¥æ‰§è¡Œ  <code>python hello.py</code>  è¿è¡Œä¸€ä¸ª  <code>.py</code>  æ–‡ä»¶ã€‚</p>\n<p><code>hello.py</code>  å†…å®¹ç¤ºä¾‹ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token number\">100</span> <span class=\"token operator\">+</span> <span class=\"token number\">20</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Hello World~'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span> <span class=\"token operator\">**</span> <span class=\"token number\">10</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>åœ¨å‘½ä»¤è¡Œæ¨¡å¼ä¸‹æ‰§è¡Œï¼š</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>C:<span class=\"token punctuation\">\\</span><span class=\"token operator\">></span>python hello.py</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>Hello World~</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token number\">1024</span></pre></td></tr></table></figure><h4 id=\"é€‰æ‹©å¼€å‘å·¥å…·\"><a class=\"anchor\" href=\"#é€‰æ‹©å¼€å‘å·¥å…·\">#</a> é€‰æ‹©å¼€å‘å·¥å…·</h4>\n<p>åœ¨ä¸Šæ–‡ä¸­ï¼Œæˆ‘ä»¬å·²ç»èƒ½å¤Ÿé€šè¿‡å‘½ä»¤è¡Œæ‰§è¡Œä¸€äº›ç®€å•çš„ Python æŒ‡ä»¤ï¼Œä½†â€¦â€¦ æ€»æœ‰ç‚¹é‡ä¸Šå¹¼å„¿å›­çš„æ„Ÿè§‰ã€‚å¥½å§ï¼Œè¿™ä¸æ€ªæˆ‘ä»¬ï¼Œæ€ªåªæ€ªæ²¡æœ‰ç”¨ä¸Šè¶æ‰‹çš„å·¥å…·ã€‚è¿™é‡Œæå‡ºå‡ æ¬¾å¯ä¾›é€‰æ‹©çš„ Python å¼€å‘å·¥å…·ï¼š</p>\n<ul>\n<li>\n<p>PyCharmï¼ˆæ¨è 1ï¼‰</p>\n<p>ä¸‹è½½åœ°å€ï¼š<span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuamV0YnJhaW5zLmNvbS9weWNoYXJt\">https://www.jetbrains.com/pycharm</span></p>\n</li>\n<li>\n<p>Visual Studio Codeï¼ˆæ¨è 2ï¼‰</p>\n</li>\n<li>\n<p>Eclipseï¼ˆä¸æ¨èï¼‰</p>\n</li>\n</ul>\n<blockquote>\n<p>PyCharm ç¤¾åŒºç‰ˆæ˜¯å…è´¹çš„ï¼Œå•†ä¸šç‰ˆæ˜¯æ”¶è´¹çš„ã€‚æˆ‘å¯¹ç”¨è¿‡çš„æ‰€æœ‰ JetBrains çš„äº§å“éƒ½æ¬²ç½¢ä¸èƒ½ï¼Œåœ¨é€‰æ‹©å¼€å‘å·¥å…·æ–¹é¢ï¼Œæˆ‘ä¸ªäººçš„é¦–é€‰å½“ç„¶æ˜¯ PyCharm å•¦ã€‚</p>\n</blockquote>\n<p>ä½¿ç”¨ PyCharm åˆ›å»ºä¸€ä¸ª Python é¡¹ç›®å¹¶è¿è¡Œï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>\n<p><img data-src=\"https://img.xfc-exclave.com/2021/08/0868aaf999e563773eb14044b3b6e4be1630046231.png\" alt=\"PyCharmç¬¬ä¸€ä¸ªç¨‹åº\" /></p>\n<h4 id=\"è¾“å…¥æ‰“å°\"><a class=\"anchor\" href=\"#è¾“å…¥æ‰“å°\">#</a> è¾“å…¥æ‰“å°</h4>\n<p>åœ¨ä¸Šè¿°ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬åå¤ç”¨åˆ°äº†  <code>print()</code>  è¿™ä¸ªå‡½æ•°ï¼Œå®ƒçš„ä½œç”¨å°±æ˜¯å°†å†…å®¹æ‰“å°ï¼ˆè¾“å‡ºï¼‰åˆ°æ§åˆ¶å°ã€‚è€Œå¦‚æœéœ€è¦ä»æ§åˆ¶å°è·å–ç”¨æˆ·è‡ªå®šä¹‰è¾“å…¥çš„å†…å®¹ï¼Œåˆ™éœ€è¦ä½¿ç”¨åˆ°  <code>input()</code>  å‡½æ•°ï¼Œä½¿ç”¨æ–¹å¼å¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>name <span class=\"token operator\">=</span> <span class=\"token builtin\">input</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Please input your name: '</span><span class=\"token punctuation\">)</span><span class=\"token comment\"># å¼€å¯è¾“å…¥ï¼Œå¹¶æç¤º</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Hello, '</span> <span class=\"token operator\">+</span> name<span class=\"token punctuation\">)</span><span class=\"token comment\"># æ‰“å°ç”¨æˆ·è¾“å…¥çš„å†…å®¹</span></pre></td></tr></table></figure><blockquote>\n<p>æ³¨æ„ï¼Œä¸ Java ä¸åŒï¼ŒPython æ¯ä¸€è¡Œä»£ç çš„ç»“å°¾éƒ¨åˆ†ä¸éœ€è¦æ·»åŠ   <code>;</code>  ã€‚</p>\n</blockquote>\n<h3 id=\"python-åŸºç¡€\"><a class=\"anchor\" href=\"#python-åŸºç¡€\">#</a> Python åŸºç¡€</h3>\n<p>Python çš„è¯­æ³•æ¯”è¾ƒç®€å•ï¼Œé‡‡ç”¨ç¼©è¿›æ–¹å¼ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># print absolute value of an integer:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>a <span class=\"token operator\">=</span> <span class=\"token number\">100</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">if</span> a <span class=\"token operator\">>=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span>a<span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>Python è¯­æ³•ç‰¹ç‚¹ï¼š</p>\n<ol>\n<li>\n<p>å…³äºæ³¨é‡Š</p>\n<p>Python ä»¥  <code>#</code>  æ¥è¡¨ç¤ºæ³¨é‡Šï¼Œä¸å…¶ä»–è¯­è¨€ä¸€æ ·ï¼Œæ³¨é‡Šçš„ä½œç”¨åªæ˜¯ä¸ºå¼€å‘äººå‘˜æä¾›æ–¹ä¾¿ï¼Œå¯¹ç¨‹åºæ²¡æœ‰å®é™…æ„ä¹‰ï¼Œè§£é‡Šå™¨ï¼ˆæˆ–ç¼–è¯‘å™¨ï¼‰ä¼šå¿½ç•¥æ‰æ³¨é‡Šå†…å®¹ã€‚</p>\n</li>\n<li>\n<p>ä»£ç å—</p>\n<p>å½“ç¼©è¿›çš„è¯­å¥ä»¥å†’å·  <code>:</code>  ç»“å°¾æ—¶ï¼Œç¼©è¿›çš„è¯­å¥è¢«è§†ä¸ºä»£ç å—ã€‚</p>\n</li>\n<li>\n<p>ç¼©è¿›</p>\n<p>Python é‡‡ç”¨ç¼©è¿›æ–¹å¼ç»„ç»‡ä»£ç ï¼Œå®ƒå¯¹ç¼©è¿›æ˜¯ååˆ†æ•æ„Ÿçš„ï¼Œä½†åŒæ—¶ï¼Œå®ƒåˆå¹¶æœªè§„å®šå…·ä½“çš„ç¼©è¿›æ–¹å¼ï¼Œç†è®ºä¸Šä¸¤ä¸ªæˆ–å››ä¸ªç©ºæ ¼çš„ç¼©è¿›æ–¹å¼ä¸ä¸€ä¸ªåˆ¶è¡¨ç¬¦çš„ç¼©è¿›æ–¹å¼éƒ½æ˜¯å¯ä»¥çš„ï¼Œç”šè‡³åœ¨å¾ˆå¤šæƒ…å†µä¸‹æ··åˆä½¿ç”¨ä¹Ÿèƒ½å¤Ÿæ­£å¸¸æ‰§è¡Œã€‚ä½†ç¼©è¿›ä½œä¸º Python è¯­æ³•çš„ä¸€éƒ¨åˆ†ï¼Œå®ƒæ˜¯éœ€è¦ä¸¥è°¨å¯¹å¾…çš„ï¼Œç¼–ç äººå‘˜ä¸€å®šè¦å¼ºåˆ¶è¦æ±‚è‡ªå·±ï¼Œåœ¨ä¹¦å†™ Python ä»£ç æ—¶ï¼Œä½¿ç”¨ 4 ä¸ªç©ºæ ¼ä½œä¸ºç¼©è¿›æ–¹å¼ã€‚</p>\n<blockquote>\n<p>æ³¨æ„åŒºåˆ† 4 ä¸ªç©ºæ ¼ä¸ 1 ä¸ª tab çš„åŒºåˆ«ã€‚</p>\n<p>å¦å¤–ï¼ŒPython çš„ç¼©è¿›ä¸ Java ä¸åŒï¼ŒJava ç¼©è¿›çš„ä½œç”¨ä»…ä»…æ˜¯ä¸ºäº†ä»£ç çš„ç¾è§‚å’Œå¯è¯»æ€§ã€‚</p>\n</blockquote>\n</li>\n<li>\n<p>å­—æ¯å¤§å°å†™</p>\n<p>å’Œ Java ä¸€æ ·ï¼ŒPython ç¨‹åºä¹Ÿæ˜¯å¤§å°å†™æ•æ„Ÿçš„ã€‚</p>\n</li>\n</ol>\n<h4 id=\"æ•°æ®ç±»å‹å’Œå˜é‡\"><a class=\"anchor\" href=\"#æ•°æ®ç±»å‹å’Œå˜é‡\">#</a> æ•°æ®ç±»å‹å’Œå˜é‡</h4>\n<ol>\n<li>\n<p>æ•´æ•°</p>\n<p>Python å¯ä»¥å¤„ç†ä»»æ„å¤§å°çš„æ•´æ•°ï¼ˆåŒ…æ‹¬è´Ÿæ•´æ•°ï¼‰ï¼Œå¦‚éœ€ä½¿ç”¨åå…­è¿›åˆ¶ï¼Œåˆ™éœ€è¦ä»¥  <code>0x</code>  ä½œä¸ºå‰ç¼€ï¼Œä¾‹å¦‚  <code>0xff00</code>  ã€‚</p>\n<p>å¯¹äºè¾ƒå¤§çš„æ•°å€¼ï¼Œä¸ºäº†æé«˜å¯è¯»æ€§ï¼ŒPython æ”¯æŒä½¿ç”¨ä¸‹åˆ’çº¿æ¥åˆ†å‰²ä½æ•°ï¼Œä¾‹å¦‚  <code>10_000_000_000</code>  ã€‚</p>\n</li>\n<li>\n<p>æµ®ç‚¹æ•°</p>\n<p>æµ®ç‚¹æ•°ä¹Ÿå°±æ˜¯å°æ•°ï¼Œä¹‹æ‰€ä»¥ç§°ä¸ºæµ®ç‚¹æ•°ï¼Œæ˜¯å› ä¸ºæŒ‰ç…§ç§‘å­¦è®°æ•°æ³•è¡¨ç¤ºæ—¶ï¼Œä¸€ä¸ªæµ®ç‚¹æ•°çš„å°æ•°ç‚¹ä½ç½®æ˜¯å¯å˜çš„ã€‚æµ®ç‚¹æ•°å¯ä»¥ç”¨æ•°å­¦å†™æ³•ï¼Œä¾‹å¦‚  <code>3.14</code>  ã€‚ä½†æ˜¯å¯¹äºå¾ˆå¤§æˆ–å¾ˆå°çš„æµ®ç‚¹æ•°ï¼Œå°±å¿…é¡»ç”¨ç§‘å­¦è®¡æ•°æ³•è¡¨ç¤ºã€‚</p>\n<p>æ•´æ•°å’Œæµ®ç‚¹æ•°åœ¨è®¡ç®—æœºå†…éƒ¨å­˜å‚¨çš„æ–¹å¼æ˜¯ä¸åŒçš„ï¼Œæ•´æ•°è¿ç®—æ°¸è¿œæ˜¯ç²¾ç¡®çš„ï¼Œè€Œæµ®ç‚¹æ•°è¿ç®—åˆ™å¯èƒ½ä¼šæœ‰å››èˆäº”å…¥çš„è¯¯å·®ã€‚</p>\n</li>\n<li>\n<p>å­—ç¬¦ä¸²</p>\n<p>å­—ç¬¦ä¸²æ˜¯ä»¥è‹±æ–‡å•å¼•å·æˆ–åŒå¼•å·æ‹¬èµ·æ¥çš„ä»»æ„æ–‡æœ¬ï¼Œå¼•å·æœ¬èº«åªæ˜¯ä¸€ç§è¡¨ç¤ºæ–¹å¼ï¼Œä¸æ˜¯å­—ç¬¦ä¸²çš„ä¸€éƒ¨åˆ†ã€‚å¦‚æœå­—ç¬¦ä¸²å†…å®¹æœ¬èº«å¸¦æœ‰å¼•å·ï¼Œåˆ™è¦è¿›è¡ŒåŒºåˆ†ï¼Œå…³äºå¼•å·çš„å„ç§æƒ…å†µï¼Œå¯ä»¥å‚ç…§ä»¥ä¸‹ä»£ç æ¸…å•ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'It\\'s a nice day!'</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># è¾“å‡ºç»“æœï¼šIt's a nice day!</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"It's a nice day!\"</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># è¾“å‡ºç»“æœï¼šIt's a nice day!</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"He said: \\\"It's a nice day!\\\"\"</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># He said: \"It's a nice day!\"</span></pre></td></tr></table></figure><p>è¿™é‡Œä½¿ç”¨åˆ°çš„  <code>\\</code>  è¢«ç§°ä¸ºè½¬ä¹‰å­—ç¬¦ï¼Œå®ƒé™¤äº†å¯ä»¥å¯¹å¼•å·è¿›è¡Œè½¬ä¹‰ä¹‹å¤–ï¼Œè¿˜å¯ä»¥è¡¨ç¤ºæ¢è¡Œï¼ˆ <code>\\n</code> ï¼‰ã€åˆ¶è¡¨ç¬¦ï¼ˆ <code>\\t</code> ï¼‰ä»¥åŠè¯¥å­—ç¬¦æœ¬èº«ï¼ˆ <code>\\\\</code> ï¼‰ã€‚ä½†æ˜¯ï¼Œå½“å­—ç¬¦ä¸²ä¸­å­˜åœ¨è¾ƒå¤šéœ€è¦è¿›è¡Œè½¬ä¹‰å¤„ç†çš„å­—ç¬¦æ—¶ï¼ŒPython è¿˜å…è®¸ä½¿ç”¨  <code>r''</code>  æ¥è¡¨ç¤ºå¼•å·å†…éƒ¨çš„å­—ç¬¦ä¸²å†…å®¹ä¸è½¬ä¹‰ï¼Œä¾‹å¦‚ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">r'\\nè¡¨ç¤ºæ¢è¡Œ'</span> <span class=\"token operator\">+</span> <span class=\"token string\">\"\\nr''è¡¨ç¤ºå¼•ç”¨åŸå­—ç¬¦\"</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>ä½†å¦‚æœå­—ç¬¦ä¸²å†…å­˜åœ¨å¤šä¸ªæ¢è¡Œï¼Œä½¿ç”¨  <code>\\n</code>  æ¢è¡Œæ—¶å€™ï¼Œä¼šå¯¹é˜…è¯»é€ æˆä¸ä¾¿ï¼Œå› æ­¤ Python å…è®¸ä½¿ç”¨  <code>'''...'''</code>  çš„æ ¼å¼è¡¨ç¤ºå¤šè¡Œå†…å®¹ï¼Œä¾‹å¦‚ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token triple-quoted-string string\">'''My learning tasks:</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>Java</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>Python</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>Golang</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>'''</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>åŒæ ·ï¼Œå¤šè¡Œå­—ç¬¦  <code>'''...'''</code>  å‰ä¹Ÿå¯ä»¥åŠ ä¸Š  <code>r</code>  å­—ç¬¦ç»“åˆä½¿ç”¨ã€‚</p>\n</li>\n<li>\n<p>å¸ƒå°”å€¼</p>\n<p>å¸ƒå°”å€¼å’Œå¸ƒå°”ä»£æ•°çš„è¡¨ç¤ºå®Œå…¨ä¸€è‡´ï¼Œä¸€ä¸ªå¸ƒå°”å€¼åªæœ‰  <code>True</code>  ã€  <code>False</code>  ä¸¤ç§å€¼ï¼Œè¦ä¹ˆæ˜¯  <code>True</code>  ï¼Œè¦ä¹ˆæ˜¯  <code>False</code>  ï¼Œåœ¨ Python ä¸­ï¼Œå¯ä»¥ç›´æ¥ç”¨  <code>True</code>  ã€  <code>False</code>  è¡¨ç¤ºå¸ƒå°”å€¼ï¼ˆæ³¨æ„å¤§å°å†™ï¼‰ï¼Œä¹Ÿå¯ä»¥é€šè¿‡å¸ƒå°”è¿ç®—è®¡ç®—å‡ºæ¥ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token builtin\">bool</span> <span class=\"token operator\">=</span> <span class=\"token number\">1</span> <span class=\"token operator\">&lt;</span> <span class=\"token number\">2</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span> <span class=\"token operator\">></span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># False</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">bool</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># True</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># True</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">bool</span> <span class=\"token operator\">==</span> <span class=\"token boolean\">False</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># False</span></pre></td></tr></table></figure><p>å¸ƒå°”å€¼å¯ä»¥ä½¿ç”¨  <code>and</code>  ã€  <code>or</code>  å’Œ  <code>not</code>  è¿›è¡Œè¿ç®—ã€‚</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>t1 <span class=\"token operator\">=</span> <span class=\"token number\">1</span> <span class=\"token operator\">&lt;</span> <span class=\"token number\">2</span>  <span class=\"token comment\"># True</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>f1 <span class=\"token operator\">=</span> <span class=\"token number\">1</span> <span class=\"token operator\">></span> <span class=\"token number\">2</span>  <span class=\"token comment\"># False</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>t2 <span class=\"token operator\">=</span> <span class=\"token number\">2</span> <span class=\"token operator\">></span> <span class=\"token number\">1</span>  <span class=\"token comment\"># True</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>f2 <span class=\"token operator\">=</span> <span class=\"token number\">2</span> <span class=\"token operator\">&lt;</span> <span class=\"token number\">1</span>  <span class=\"token comment\"># False</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'and ------->'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>t1 <span class=\"token keyword\">and</span> f1<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># True and False => False</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>t1 <span class=\"token keyword\">and</span> t2<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># True and True => True</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>f1 <span class=\"token keyword\">and</span> f2<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># False and False => False</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'or ------->'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>t1 <span class=\"token keyword\">or</span> f1<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># True or False => True</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>t1 <span class=\"token keyword\">or</span> t2<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># True or True => True</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>f1 <span class=\"token keyword\">or</span> f2<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># False or False => False</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'not ------->'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">not</span> t1<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># not True => False</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">not</span> f1<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># not False => True</span></pre></td></tr></table></figure></li>\n<li>\n<p>ç©ºå€¼</p>\n<p>ç©ºå€¼æ˜¯ Python é‡Œä¸€ä¸ªç‰¹æ®Šçš„å€¼ï¼Œç”¨  <code>None</code>  è¡¨ç¤ºã€‚</p>\n</li>\n<li>\n<p>å˜é‡</p>\n<p>å˜é‡åå¿…é¡»æ˜¯å¤§å°å†™è‹±æ–‡ã€æ•°å­—å’Œ  <code>_</code>  çš„ç»„åˆï¼Œä¸”ä¸èƒ½ç”¨æ•°å­—å¼€å¤´ï¼Œä¾‹å¦‚ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>age <span class=\"token operator\">=</span> <span class=\"token number\">20</span>  <span class=\"token comment\"># age æ˜¯ä¸€ä¸ªæ•°å€¼å‹çš„å˜é‡ï¼Œå®ƒçš„å€¼ä¸º 20</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>birth_98 <span class=\"token operator\">=</span> <span class=\"token string\">'1998å¹´'</span>  <span class=\"token comment\"># birth_98 æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ç±»å‹çš„å˜é‡ï¼Œå®ƒçš„å€¼ä¸ºã€1998 å¹´ã€‘</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>MyAnswer <span class=\"token operator\">=</span> <span class=\"token boolean\">True</span>  <span class=\"token comment\"># å¸ƒå°”å‹å˜é‡...</span></pre></td></tr></table></figure><p>åœ¨ Python ä¸­ï¼Œç­‰å·  <code>=</code>  æ˜¯èµ‹å€¼è¯­å¥ï¼Œå¯ä»¥æŠŠä»»æ„æ•°æ®ç±»å‹èµ‹å€¼ç»™å˜é‡ï¼ŒåŒä¸€ä¸ªå˜é‡å¯ä»¥åå¤èµ‹å€¼ï¼Œè€Œä¸”å¯ä»¥æ˜¯ä¸åŒç±»å‹çš„å˜é‡ï¼Œä¾‹å¦‚ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>totalPrice <span class=\"token operator\">=</span> <span class=\"token number\">0</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>bookPrice <span class=\"token operator\">=</span> <span class=\"token number\">299</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>pencilPrice <span class=\"token operator\">=</span> <span class=\"token number\">84</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'ã“ã®æœ¬ã¯ã€€ã„ãã‚‰ã§ã™ã‹ï¼Ÿ'</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># è¯¢é—®ä»·æ ¼</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>priceAStr <span class=\"token operator\">=</span> bookPrice<span class=\"token punctuation\">.</span>__str__<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">'å††ã§ã™'</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>priceAStr<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>totalPrice <span class=\"token operator\">=</span> totalPrice <span class=\"token operator\">+</span> bookPrice</pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'ãã®é‰›ç­†ã¯ï¼Ÿ'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>pencilPrice<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>totalPrice <span class=\"token operator\">+=</span> pencilPrice  <span class=\"token comment\"># A += B ==> A = A + B</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'å…¨éƒ¨ã§ã„ãã‚‰ã§ã™ã‹ï¼Ÿ'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>totalPrice <span class=\"token operator\">=</span> totalPrice<span class=\"token punctuation\">.</span>__str__<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">'å††ã§ã™'</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>totalPrice<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token comment\"># å“ˆå“ˆï¼Œæœ€è¿‘åœ¨æ—¥è¯­å…¥é—¨ï¼Œæœ‰ç‚¹ç–¯é­”ï¼Œä¸è¦ä»‹æ„</span></pre></td></tr></table></figure><p>ç¤ºä¾‹ä¸­ï¼Œå˜é‡ totalPrice è¢«è¿›è¡Œäº†å¤šæ¬¡èµ‹å€¼ï¼Œè€Œä¸”å¯ä»¥çœ‹åˆ°ï¼Œå¯¹äºåŒä¸€å˜é‡ï¼Œå¯ä»¥ä¸ºå…¶èµ‹äºˆä¸åŒç±»å‹çš„å€¼ã€‚</p>\n<p>è¿™ç§å˜é‡æœ¬èº«ç±»å‹ä¸å›ºå®šçš„è¯­è¨€ç§°ä¹‹ä¸ºåŠ¨æ€è¯­è¨€ï¼Œä¸ä¹‹å¯¹åº”çš„æ˜¯é™æ€è¯­è¨€ã€‚é™æ€è¯­è¨€åœ¨å®šä¹‰å˜é‡æ—¶å¿…é¡»æŒ‡å®šå˜é‡ç±»å‹ï¼Œå¦‚æœèµ‹å€¼çš„æ—¶å€™ç±»å‹ä¸åŒ¹é…ï¼Œå°±ä¼šæŠ¥é”™ã€‚ä¹Ÿå¯ä»¥ç†è§£ä¸ºå¼ºç±»å‹ä¸å¼±ç±»å‹ï¼ŒPython æ˜¯å¼±ç±»å‹çš„è¯­è¨€ã€‚</p>\n<p>å’Œé™æ€è¯­è¨€ç›¸æ¯”ï¼ŒåŠ¨æ€è¯­è¨€æ›´çµæ´»ã€‚</p>\n<blockquote>\n<p>æ³¨æ„ç†è§£èµ‹å€¼è¯­å¥ä¸æ•°å­¦ä¸Šçš„ç­‰å·çš„åŒºåˆ«ã€‚</p>\n</blockquote>\n</li>\n<li>\n<p>å¸¸é‡</p>\n<p>æ‰€è°“å¸¸é‡å°±æ˜¯ä¸èƒ½å˜çš„å˜é‡ï¼Œæ¯”å¦‚å¸¸ç”¨çš„æ•°å­¦å¸¸æ•°  <code>Ï€</code>  å°±æ˜¯ä¸€ä¸ªå¸¸é‡ã€‚åœ¨ Python ä¸­ï¼Œé€šå¸¸ç”¨å…¨éƒ¨å¤§å†™çš„å˜é‡åè¡¨ç¤ºå¸¸é‡ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>PI <span class=\"token operator\">=</span> <span class=\"token number\">3.14159265359</span></pre></td></tr></table></figure><blockquote>\n<p>ä½†å…¶å® Python ä¸­å¹¶ä¸å­˜åœ¨å¸¸é‡ï¼Œå› ä¸ºå³ä¾¿æ˜¯é€šè¿‡å¤§å†™çš„æ–¹å¼ç”Ÿå‘½å˜é‡åï¼Œä½†å®ƒå¹¶æ²¡æœ‰ä¸å…¶ä»–è¯­è¨€çš„  <code>const</code>  ç±»ä¼¼çš„ä¿®é¥°ç¬¦ï¼Œå®ƒä¸èƒ½ä¿è¯å®ƒæ‰€è°“çš„å¸¸é‡ä¸è¢«ä¿®æ”¹ã€‚è€Œä½¿ç”¨å¤§å†™æ ‡è¯†å¸¸é‡ä¹Ÿåªæ˜¯äººä¸ºçš„è§„å®šè€Œå·²ï¼Œå®é™…ä¸Šæ˜¯å¯ä»¥è¢«ä¿®æ”¹çš„ã€‚ç®€å•æ¥è¯´ï¼Œ<ins>Python ä¸­æ²¡æœ‰å¸¸é‡</ins>ã€‚</p>\n</blockquote>\n</li>\n</ol>\n<p><strong>Python ä¸­çš„é™¤æ³•ï¼š</strong></p>\n<p>Python çš„é™¤æ³•æœ‰ä¸¤ç§æ–¹å¼ï¼š</p>\n<ol>\n<li>\n<p><code>/</code>  è·å–æµ®ç‚¹æ•°ç»“æœã€‚</p>\n<p>è¿™ç§é™¤æ³•æ–¹å¼çš„ç»“æœå§‹ç»ˆéƒ½æ˜¯æµ®ç‚¹æ•°ï¼Œä¸è®ºæ˜¯å¦èƒ½å¤Ÿè¢«æ•´é™¤ã€‚</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span> <span class=\"token operator\">/</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># 3.3333333333333335</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token number\">9</span> <span class=\"token operator\">/</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># 3.0</span></pre></td></tr></table></figure></li>\n<li>\n<p><code>//</code>  è¢«ç§°ä¸ºåœ°æ¿é™¤ã€‚</p>\n<p>è¿™ç§é™¤æ³•ä¼šèˆå»è¿ç®—ç»“æœçš„å°æ•°éƒ¨åˆ†ï¼Œå¦‚æœæ˜¯æ•´æ•°ç›¸é™¤ï¼Œåˆ™ç»“æœä¸ºæ•´æ•°ç±»å‹ï¼Œå¦åˆ™ï¼Œç»“æœä¸ºæµ®ç‚¹ç±»å‹ï¼Œä¾‹å¦‚ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span> <span class=\"token operator\">//</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># 3</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token number\">9</span> <span class=\"token operator\">//</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># 3</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token number\">9.6</span> <span class=\"token operator\">//</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># 3.0</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token number\">9.6</span> <span class=\"token operator\">//</span> <span class=\"token number\">3.2</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># 2.0</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token number\">0.0006</span> <span class=\"token operator\">//</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># 0.0</span></pre></td></tr></table></figure></li>\n</ol>\n<blockquote>\n<p>æ³¨æ„ï¼šå’Œ Java ä¸åŒï¼ŒPython çš„æ•´æ•°æ²¡æœ‰å¤§å°é™ã€‚Python çš„æµ®ç‚¹æ•°ä¹Ÿæ²¡æœ‰å¤§å°é™åˆ¶ï¼Œä½†æ˜¯è¶…å‡ºä¸€å®šèŒƒå›´å°±ç›´æ¥è¡¨ç¤ºä¸º  <code>inf</code> ï¼ˆæ— é™å¤§ï¼‰ã€‚</p>\n</blockquote>\n<h4 id=\"å­—ç¬¦ä¸²å’Œç¼–ç \"><a class=\"anchor\" href=\"#å­—ç¬¦ä¸²å’Œç¼–ç \">#</a> å­—ç¬¦ä¸²å’Œç¼–ç </h4>\n<p>åœ¨æœ€æ–°çš„ Python 3 ç‰ˆæœ¬ä¸­ï¼Œå­—ç¬¦ä¸²æ˜¯ä»¥ Unicode ç¼–ç çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼ŒPython çš„å­—ç¬¦ä¸²æ”¯æŒå¤šè¯­è¨€ã€‚</p>\n<p>å¯¹äºå•ä¸ªå­—ç¬¦çš„ç¼–ç ï¼ŒPython æä¾›äº†  <code>ord()</code>  å‡½æ•°è·å–å­—ç¬¦çš„æ•´æ•°è¡¨ç¤ºï¼Œ <code>chr()</code>  å‡½æ•°æŠŠç¼–ç è½¬æ¢ä¸ºå¯¹åº”çš„å­—ç¬¦ï¼Œä¾‹å¦‚ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">ord</span><span class=\"token punctuation\">(</span><span class=\"token string\">'A'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># 65</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">ord</span><span class=\"token punctuation\">(</span><span class=\"token string\">'ç”²'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># 30002</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">ord</span><span class=\"token punctuation\">(</span><span class=\"token string\">'ã‚'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># 12354</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">chr</span><span class=\"token punctuation\">(</span><span class=\"token number\">65</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># A</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">chr</span><span class=\"token punctuation\">(</span><span class=\"token number\">30002</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># ç”²</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">chr</span><span class=\"token punctuation\">(</span><span class=\"token number\">12354</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># ã‚</span></pre></td></tr></table></figure><p>å¦å¤–ï¼Œä½ ä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨å­—ç¬¦çš„æ•´æ•°ç¼–ç ï¼Œä¾‹å¦‚ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'\\u7532\\u4e59\\u4e19\\u4e01'</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># ç”²ä¹™ä¸™ä¸</span></pre></td></tr></table></figure><p>å…³äºä¸­æ–‡è½¬ç ï¼Œå¯ä»¥ä½¿ç”¨åœ¨çº¿è½¬ç å·¥å…·ï¼š<span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuYmVqc29uLmNvbS9jb252ZXJ0L3VuaWNvZGVfY2hpbmVzZQ==\">https://www.bejson.com/convert/unicode_chinese</span></p>\n<p>ç”±äº Python çš„å­—ç¬¦ä¸²ç±»å‹æ˜¯  <code>str</code>  ï¼Œåœ¨å†…å­˜ä¸­ä»¥ Unicode è¡¨ç¤ºï¼Œä¸€ä¸ªå­—ç¬¦å¯¹åº”è‹¥å¹²ä¸ªå­—èŠ‚ã€‚å¦‚æœè¦åœ¨ç½‘ç»œä¸Šä¼ è¾“ï¼Œæˆ–è€…ä¿å­˜åˆ°ç£ç›˜ä¸Šï¼Œå°±éœ€è¦æŠŠ  <code>str</code>  å˜ä¸ºä»¥å­—èŠ‚ä¸ºå•ä½çš„  <code>bytes</code>  ã€‚</p>\n<p>Python å¯¹  <code>bytes</code>  ç±»å‹çš„æ•°æ®ç”¨å¸¦  <code>b</code>  å‰ç¼€çš„å•å¼•å·æˆ–åŒå¼•å·è¡¨ç¤ºï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>x <span class=\"token operator\">=</span> <span class=\"token string\">b'ABC'</span></pre></td></tr></table></figure><p>ä»¥ Unicode è¡¨ç¤ºçš„  <code>str</code>  é€šè¿‡  <code>encode()</code>  æ–¹æ³•å¯ä»¥ç¼–ç ä¸ºæŒ‡å®šçš„  <code>bytes</code>  ï¼Œä¾‹å¦‚ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'ABC'</span><span class=\"token punctuation\">.</span>encode<span class=\"token punctuation\">(</span><span class=\"token string\">'ascii'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># b'ABC'</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'ä¸­æ–‡'</span><span class=\"token punctuation\">.</span>encode<span class=\"token punctuation\">(</span><span class=\"token string\">'utf-8'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># b'\\xe4\\xb8\\xad\\xe6\\x96\\x87'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'ä¸­æ–‡'</span><span class=\"token punctuation\">.</span>encode<span class=\"token punctuation\">(</span><span class=\"token string\">'ascii'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># æŠ¥é”™ï¼Œå› ä¸º ASCII æ— æ³•è¡¨ç¤ºä¸­æ–‡</span></pre></td></tr></table></figure><p>åè¿‡æ¥ï¼Œå¦‚æœéœ€è¦ä»ç£ç›˜ä¸Šè¯»å–å­—èŠ‚æµï¼Œå°±éœ€è¦å°†  <code>bytes</code>  è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼Œè¿™æ—¶å°±éœ€è¦ä½¿ç”¨  <code>decode()</code>  æ–¹æ³•ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">b'ABC'</span><span class=\"token punctuation\">.</span>decode<span class=\"token punctuation\">(</span><span class=\"token string\">'ascii'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># ABC</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">b'\\xe4\\xb8\\xad\\xe6\\x96\\x87'</span><span class=\"token punctuation\">.</span>decode<span class=\"token punctuation\">(</span><span class=\"token string\">'utf-8'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># ä¸­æ–‡</span></pre></td></tr></table></figure><p>Python è¿˜æä¾›äº†ä¸€ä¸ª  <code>len()</code>  å‡½æ•°ï¼Œç”¨äºè®¡ç®—å­—ç¬¦é•¿åº¦æˆ–å­—èŠ‚æ•°ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span><span class=\"token string\">'ä¸­æ–‡'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># 2</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span><span class=\"token string\">b'\\xe4\\xb8\\xad\\xe6\\x96\\x87'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># 6</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span><span class=\"token string\">'ä¸­æ–‡'</span><span class=\"token punctuation\">.</span>encode<span class=\"token punctuation\">(</span><span class=\"token string\">'utf-8'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># 6</span></pre></td></tr></table></figure><blockquote>\n<p>åœ¨ Unicode ç¼–ç ä¸­ï¼Œä¸€ä¸ªä¸­æ–‡å­—ç¬¦å ç”¨ 3 ä¸ªå­—èŠ‚ï¼Œåœ¨å­—ç¬¦ä¸²æ“ä½œè¿‡ç¨‹ä¸­ï¼Œå¦‚æœç»å¸¸éœ€è¦å¯¹å°†å­—ç¬¦ä¸²ä¸å­—èŠ‚æµè¿›è¡Œè½¬æ¢ï¼Œåˆ™éœ€è¦å°½é‡ä¿æŒç¼–ç çš„ä¸€è‡´æ€§ã€‚</p>\n</blockquote>\n<p>æˆ‘ä»¬åœ¨ä¿å­˜ Python æºä»£ç æ—¶ï¼Œä¸ºäº†è®© Python è§£é‡Šå™¨åœ¨è¯»å–æºç æ—¶æŒ‰ç…§ UTF-8 çš„ç¼–ç è¯»å–ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æ–‡ä»¶å¼€å¤´ä½ç½®æŒ‡å®šè¯»å–çš„ç¼–ç æ–¹å¼ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">#!/usr/bin/env python3</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\"># -*- coding: utf-8 -*-</span></pre></td></tr></table></figure><p>å­—ç¬¦ä¸²çš„æ ¼å¼åŒ–æ–¹å¼ï¼š</p>\n<ol>\n<li>\n<p><code>%</code>  å ä½ç¬¦æ ¼å¼åŒ–</p>\n<p>åœ¨ Python ä¸­ï¼Œä¹Ÿå¯ä»¥å¯¹å­—ç¬¦ä¸²è¿›è¡Œæ ¼å¼åŒ–ï¼Œå®ƒé‡‡ç”¨çš„æ ¼å¼åŒ–æ–¹å¼å’Œ C è¯­è¨€æ˜¯ä¸€è‡´çš„ï¼Œç”¨  <code>%</code>  å®ç°ï¼Œä¾‹å¦‚ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Hello, %s!'</span> <span class=\"token operator\">%</span> <span class=\"token string\">'World'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'I\\'m learning %s! It had took me %d hours yet.'</span> <span class=\"token operator\">%</span> <span class=\"token punctuation\">(</span><span class=\"token string\">'Python'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p><code>%</code>  ç”¨äºå ä½å’Œæ›¿æ¢ï¼Œå…¶å¯¹åº”çš„å ä½ç¬¦æœ‰å››ç§ç±»å‹ï¼š</p>\n<ol>\n<li><code>%s</code>  è¡¨ç¤ºå­—ç¬¦ä¸²å ä½ã€‚</li>\n<li><code>%d</code>  è¡¨ç¤ºæ•´æ•°å ä½ã€‚</li>\n<li><code>%f</code>  è¡¨ç¤ºæµ®ç‚¹æ•°å ä½ã€‚</li>\n<li><code>%x</code>  è¡¨ç¤ºåå…­è¿›åˆ¶æ•´æ•°å ä½ã€‚</li>\n</ol>\n<p>å…¶ä¸­ï¼Œæ ¼å¼åŒ–æ•´æ•°å’Œæµ®ç‚¹æ•°è¿˜å¯ä»¥æŒ‡å®šæ˜¯å¦è¡¥ 0 å’Œæ•´æ•°ä¸å°æ•°çš„ä½æ•°ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'%.2f'</span> <span class=\"token operator\">%</span> <span class=\"token number\">3.1415926</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># ä¿ç•™ 2 ä½å°æ•°</span></pre></td></tr></table></figure></li>\n<li>\n<p><code>format()</code>  æ ¼å¼åŒ–</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Hello, &#123;0&#125;, æˆç»©æå‡äº† &#123;1:.1f&#125;%'</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">format</span><span class=\"token punctuation\">(</span><span class=\"token string\">'å°æ˜'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">17.125</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>è¿™ç§æ–¹å¼ç›¸æ¯”å ä½ç¬¦æ›´åŠ éº»çƒ¦ã€‚</p>\n</li>\n<li>\n<p><code>f-string</code>  æ ¼å¼åŒ–</p>\n<p>è¿™ç§æ ¼å¼åŒ–å­—ç¬¦ä¸²çš„æ–¹æ³•æ˜¯ä½¿ç”¨ä»¥  <code>f</code>  å¼€å¤´çš„å­—ç¬¦ä¸²ï¼Œç§°ä¹‹ä¸º  <code>f-string</code>  ï¼Œå®ƒå’Œæ™®é€šå­—ç¬¦ä¸²ä¸åŒä¹‹å¤„åœ¨äºï¼Œå­—ç¬¦ä¸²å¦‚æœåŒ…å«  <code>&#123;xxx&#125;</code>  ï¼Œå°±ä¼šä»¥å¯¹åº”çš„å˜é‡æ›¿æ¢ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>r <span class=\"token operator\">=</span> <span class=\"token number\">2.5</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>s <span class=\"token operator\">=</span> <span class=\"token number\">3.14</span> <span class=\"token operator\">*</span> r <span class=\"token operator\">**</span> <span class=\"token number\">2</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string-interpolation\"><span class=\"token string\">f'The area of a circle with radius </span><span class=\"token interpolation\"><span class=\"token punctuation\">&#123;</span>r<span class=\"token punctuation\">&#125;</span></span><span class=\"token string\"> is </span><span class=\"token interpolation\"><span class=\"token punctuation\">&#123;</span>s<span class=\"token punctuation\">:</span><span class=\"token format-spec\">.2f</span><span class=\"token punctuation\">&#125;</span></span><span class=\"token string\">'</span></span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\"># The area of a circle with radius 2.5 is 19.62</span></pre></td></tr></table></figure></li>\n</ol>\n<h4 id=\"list-å’Œ-tuple\"><a class=\"anchor\" href=\"#list-å’Œ-tuple\">#</a> list å’Œ tuple</h4>\n<h5 id=\"list\"><a class=\"anchor\" href=\"#list\">#</a> list</h5>\n<p>listï¼ˆåˆ—è¡¨ï¼‰æ˜¯ Python å†…ç½®çš„ä¸€ç§æ•°æ®ç±»å‹ï¼Œå®ƒæ˜¯ä¸€ç§æœ‰åºçš„é›†åˆï¼Œå¯ä»¥éšæ—¶æ·»åŠ å’Œåˆ é™¤å…¶ä¸­çš„å…ƒç´ ã€‚</p>\n<p>ä½¿ç”¨  <code>len()</code>  å‡½æ•°åˆ™å¯ä»¥è·å–åˆ°é›†åˆçš„å¤§å°ã€‚</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>language <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'Zh-CN'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'En'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Ja'</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>language<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># 3</span></pre></td></tr></table></figure><p>Python ä¸­çš„åˆ—è¡¨æ¦‚å¿µ Java åŸºæœ¬ä¸€æ ·ï¼Œéƒ½æ˜¯ä¸€ä¸ªæœ‰åºçš„åˆ—è¡¨ï¼Œéƒ½æ˜¯ä»¥ 0 ä½œä¸ºèµ·å§‹ç´¢å¼•ï¼Œæ‰€ä»¥è¶…å‡ºèŒƒå›´ä¼šæŠ¥è¶Šç•Œé”™è¯¯ã€‚</p>\n<p>æˆ‘ä»¬å¯ä»¥å‘åˆ—è¡¨ä¸­æ’å…¥è¿½åŠ æ•°æ®ï¼Œæ•°æ®ä¼šé»˜è®¤è¿½åŠ åˆ°æœ€åä½ç½®ã€‚</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>language <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'Zh-CN'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'En'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Ja'</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>language<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span><span class=\"token string\">'Zh-TW'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>language<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># ['Zh-CN', 'En', 'Ja', 'Zh-TW']</span></pre></td></tr></table></figure><p>å½“ç„¶ï¼Œä¹Ÿå¯ä»¥å°†æ–°çš„æ•°æ®æ’å…¥åˆ°æŒ‡å®šçš„ä¸‹æ ‡ä½ç½®ï¼Œä¾‹å¦‚ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>language <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'Zh-CN'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'En'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Ja'</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>language<span class=\"token punctuation\">.</span>insert<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Zh-TW'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>language<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># ['Zh-CN', 'Zh-TW', 'En', 'Ja']</span></pre></td></tr></table></figure><p>åˆ é™¤åˆ—è¡¨ä¸­çš„å…ƒç´ ï¼Œéœ€è¦ä½¿ç”¨  <code>pop()</code>  ï¼Œå¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>language <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'Zh-CN'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Zh-TW'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Ko'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'En'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Ja'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Fran'</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>language<span class=\"token punctuation\">.</span>pop<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># ä¸æŒ‡å®š pop () å‡½æ•°çš„å‚æ•°ï¼Œåˆ™åˆ é™¤æœ€åä¸€ä¸ªå…ƒç´ </span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>language<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>language<span class=\"token punctuation\">.</span>pop<span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># åˆ é™¤æŒ‡å®šä¸‹æ ‡ä½ç½®çš„å…ƒç´ </span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>language<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># ['Zh-CN', 'Zh-TW', 'En', 'Ja']</span></pre></td></tr></table></figure><p>æ›¿æ¢å…ƒç´ ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>language <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'Zh-CN'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'En'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Ja'</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>language<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token string\">'Zh-TW'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>language<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># ['Zh-TW', 'En', 'Ja']</span></pre></td></tr></table></figure><p>åˆ—è¡¨ä¸­å…ƒç´ çš„æ•°æ®ç±»å‹å¹¶ä¸ä¸€å®šè¦ä¿æŒä¸€è‡´ï¼Œå¦‚æœæ•°ç»„åˆ—è¡¨ä¸­åŒ…å«æœ‰åˆ—è¡¨ç±»å‹çš„å…ƒç´ ï¼Œåˆ™è¢«ç§°ä¸ºå¤šç»´æ•°ç»„ã€‚</p>\n<h5 id=\"tuple\"><a class=\"anchor\" href=\"#tuple\">#</a> tuple</h5>\n<p>tupleï¼ˆå…ƒç»„ï¼‰æ˜¯å¦ä¸€ç§æœ‰åºåˆ—è¡¨ï¼Œå®ƒå’Œ list éå¸¸ç›¸ä¼¼ï¼Œä½† tuple ä¸€æ—¦åˆå§‹åŒ–å°±ä¸èƒ½ä¿®æ”¹ã€‚</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>language <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token string\">'Zh-CN'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'En'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Ja'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>language<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token string\">'Zh-TW'</span>  <span class=\"token comment\"># æŠ¥é”™ï¼š'tuple' object does not support item assignment</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>language<span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>å…ƒç»„åˆ—è¡¨æ²¡æœ‰æä¾›  <code>append()</code>  å’Œ  <code>insert()</code>  ç±»ä¼¼çš„æ–¹æ³•ã€‚</p>\n<p>å› ä¸º tuple åˆå§‹åŒ–åæ˜¯ä¸å¯æ”¹å˜çš„ï¼Œå› è€Œæ›´å…·æœ‰å®‰å…¨æ€§ã€‚</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>tupleA <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># å®šä¹‰ä¸€ä¸ªç©ºçš„ tuple</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>tupleB <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># å½“ tuple å†…åªæœ‰ä¸€ä¸ªå…ƒç´ æ—¶ï¼Œä¹Ÿéœ€è¦æ·»åŠ é€—å·ï¼Œä»¥é¿å…å’Œæ•°å­¦å…¬å¼ç¬¦å·æ··æ·†</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>tupleB<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># 1</span></pre></td></tr></table></figure><p>å¯å˜çš„ tuple ï¼Ÿ</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>t <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token string\">'a'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'b'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'A'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'B'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>t<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token string\">'X'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>t<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token string\">'Y'</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>t<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># ('a', 'b', ['X', 'Y'])</span></pre></td></tr></table></figure><p>è¿™é‡Œçš„å¯å˜å¹¶ä¸æ˜¯çœŸæ­£çš„å¯å˜ï¼Œè¿™é‡Œå˜åŒ–çš„åªæ˜¯ tuple å†…éƒ¨çš„ list å…ƒç´ ï¼Œè€Œ tuple æœ¬èº«çš„æŒ‡é’ˆæŒ‡å‘å¹¶æ²¡æœ‰å˜ã€‚</p>\n<h4 id=\"æ¡ä»¶åˆ¤æ–­\"><a class=\"anchor\" href=\"#æ¡ä»¶åˆ¤æ–­\">#</a> æ¡ä»¶åˆ¤æ–­</h4>\n<p>Python ä½¿ç”¨  <code>if-elif-else</code>  ä½œä¸ºæ¡ä»¶åˆ¤æ–­çš„è¯­æ³•ç»“æ„ï¼Œå…¶ä¸­  <code>elif</code>  å…¶å®æ˜¯  <code>else if</code>  çš„ç¼©å†™ï¼Œè¯¥è¯­æ³•çš„å®Œæ•´å½¢å¼çš„ä½¿ç”¨å¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>condition <span class=\"token operator\">=</span> <span class=\"token string\">'A'</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">if</span> condition<span class=\"token punctuation\">.</span>__eq__<span class=\"token punctuation\">(</span><span class=\"token string\">'A'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'do A'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">elif</span> condition<span class=\"token punctuation\">.</span>__eq__<span class=\"token punctuation\">(</span><span class=\"token string\">'B'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'do B'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">elif</span> condition<span class=\"token punctuation\">.</span>__eq__<span class=\"token punctuation\">(</span><span class=\"token string\">'C'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'do C'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'do D'</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p><code>if</code>  åˆ¤æ–­æ¡ä»¶ä¸ä¸€å®šè¦æ±‚æ˜¯å¸ƒå°”ç±»å‹æˆ–å¸ƒå°”ç±»å‹çš„è¡¨è¾¾å¼ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€äº›å…¶ä»–çš„æ•°æ®ç±»å‹ï¼Œå¦‚æœè¿™äº›æ•°æ®ç±»å‹æ˜¯éé›¶æ•°å€¼ã€éç©ºå­—ç¬¦ä¸²ã€éç©ºæ•°ç»„ç­‰ï¼Œæ¡ä»¶åˆ¤æ–­åˆ™ä¸º  <code>True</code>  ï¼Œå¦åˆ™ä¸º  <code>False</code>  ï¼Œä¾‹å¦‚ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token builtin\">str</span> <span class=\"token operator\">=</span> <span class=\"token builtin\">input</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Please input and enter to judge true or false: '</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">if</span> <span class=\"token builtin\">str</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Your input is: '</span> <span class=\"token operator\">+</span> <span class=\"token builtin\">str</span> <span class=\"token operator\">+</span> <span class=\"token string\">', it\\'s true'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Your input is: '</span> <span class=\"token operator\">+</span> <span class=\"token builtin\">str</span> <span class=\"token operator\">+</span> <span class=\"token string\">', it\\'s false'</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><blockquote>\n<p>é€šè¿‡è¾“å…¥ä¸åŒå†…å®¹ï¼Œå³å¯åˆ¤æ–­è¯¥è¾“å…¥å†…å®¹æ˜¯å¦ä¸º True ï¼Œå¯ä»¥åœ¨æ‚¨çš„å¼€å‘å·¥å…·ä¸­å°è¯•ä¸€ä¸‹ï¼Œå¹¶è§‚å¯Ÿè¿”å›ç»“æœã€‚ä½†åŒæ—¶ï¼Œè¯·æ³¨æ„ï¼Œé€šè¿‡  <code>input()</code>  è·å–åˆ°çš„ç”¨æˆ·è¾“å…¥çš„æ‰€æœ‰å†…å®¹éƒ½æ˜¯å­—ç¬¦ä¸²ç±»å‹ã€‚</p>\n</blockquote>\n<p>å¦‚éœ€è¦å°†å­—ç¬¦ä¸²å†…å®¹è½¬æ¢ä¸ºæ•°å€¼å‹ï¼Œå¯ä»¥ä½¿ç”¨  <code>int()</code>  å‡½æ•°ã€‚</p>\n<h4 id=\"å¾ªç¯\"><a class=\"anchor\" href=\"#å¾ªç¯\">#</a> å¾ªç¯</h4>\n<p>Python ä¸­æœ‰ä¸¤ç§å¾ªç¯æ–¹å¼ï¼š</p>\n<ol>\n<li>\n<p><code>for...in</code></p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>total <span class=\"token operator\">=</span> <span class=\"token number\">0</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>arr <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">for</span> num <span class=\"token keyword\">in</span> arr<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    total <span class=\"token operator\">+=</span> num</pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>total<span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>Python ä¹Ÿæä¾›äº†ä¸€ä¸ª  <code>range()</code>  æ–¹æ³•ç”¨äºç”Ÿæˆæ•´æ•°åºåˆ—ï¼Œè€Œé€šè¿‡  <code>list()</code>  æ–¹æ³•å¯ä»¥å°†æ•´æ•°åºåˆ—è½¬æ¢ä¸ºæ•°ç»„ï¼Œä¾‹å¦‚ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token builtin\">str</span> <span class=\"token operator\">=</span> <span class=\"token string\">'| '</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>arr <span class=\"token operator\">=</span> <span class=\"token builtin\">list</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">for</span> num <span class=\"token keyword\">in</span> arr<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token builtin\">str</span> <span class=\"token operator\">+=</span> num<span class=\"token punctuation\">.</span>__str__<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">' | '</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">str</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># | 0 | 1 | 2 | 3 | 4 |</span></pre></td></tr></table></figure><blockquote>\n<p><code>range()</code>  å‡½æ•°æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œä¸€ä¸ªæ˜¯èµ·å§‹å€¼ï¼Œä¸€ä¸ªæ˜¯ç»ˆæ­¢å€¼ï¼Œå½“èµ·å§‹ä¸º 0 æ—¶ï¼Œå¯ä»¥çœç•¥ä¸å†™ã€‚</p>\n</blockquote>\n</li>\n<li>\n<p><code>while</code></p>\n<p>å¯¹äº while å¾ªç¯ï¼Œåªè¦æ¡ä»¶æ»¡è¶³ï¼Œå°±ä¸æ–­å¾ªç¯ï¼Œæ¡ä»¶ä¸æ»¡è¶³æ—¶é€€å‡ºå¾ªç¯ã€‚</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># è®¡ç®— 100 ä»¥å†…æ‰€æœ‰å¥‡æ•°ä¹‹å’Œ</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token builtin\">sum</span> <span class=\"token operator\">=</span> <span class=\"token number\">0</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>n <span class=\"token operator\">=</span> <span class=\"token number\">99</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">while</span> n <span class=\"token operator\">></span> <span class=\"token number\">0</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token builtin\">sum</span> <span class=\"token operator\">+=</span> n</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    n <span class=\"token operator\">=</span> n <span class=\"token operator\">-</span> <span class=\"token number\">2</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">sum</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure></li>\n</ol>\n<p><code>break</code>  å’Œ  <code>continue</code>  ï¼š</p>\n<ol>\n<li>\n<p><code>break</code></p>\n<p>åœ¨å¾ªç¯ä¸­ï¼Œ <code>break</code>  è¯­å¥å¯ä»¥æå‰é€€å‡ºå¾ªç¯ã€‚</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># è·å–å¤§äº 100 çš„æœ€å°ç«‹æ–¹æ•°</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>result <span class=\"token operator\">=</span> <span class=\"token number\">0</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>n <span class=\"token operator\">=</span> <span class=\"token number\">0</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">while</span> <span class=\"token boolean\">True</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    n <span class=\"token operator\">+=</span> <span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    result <span class=\"token operator\">=</span> n <span class=\"token operator\">*</span> n <span class=\"token operator\">*</span> n</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">if</span> result <span class=\"token operator\">></span> <span class=\"token number\">100</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token keyword\">break</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># 125</span></pre></td></tr></table></figure></li>\n<li>\n<p><code>continue</code></p>\n<p>åœ¨å¾ªç¯è¿‡ç¨‹ä¸­ï¼Œä¹Ÿå¯ä»¥é€šè¿‡  <code>continue</code>  è¯­å¥ï¼Œè·³è¿‡å½“å‰çš„è¿™æ¬¡å¾ªç¯ï¼Œç›´æ¥å¼€å§‹ä¸‹ä¸€æ¬¡å¾ªç¯ã€‚</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># è·å– 100 ä»¥å†…æ‰€æœ‰å¥‡æ•°çš„æ€»å’Œ</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>total <span class=\"token operator\">=</span> <span class=\"token number\">0</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>n <span class=\"token operator\">=</span> <span class=\"token number\">0</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">while</span> n <span class=\"token operator\">&lt;</span> <span class=\"token number\">100</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    n <span class=\"token operator\">+=</span> <span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>n <span class=\"token operator\">%</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token keyword\">continue</span>  <span class=\"token comment\"># å½“æ¡ä»¶æ»¡è¶³æ—¶ï¼Œè¿›å…¥ä¸‹ä¸€æ¬¡å¾ªç¯</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    total <span class=\"token operator\">+=</span> n</pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>total<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># 2500</span></pre></td></tr></table></figure></li>\n</ol>\n<blockquote>\n<p><code>break</code>  å’Œ  <code>continue</code>  çš„åŒºåˆ«åœ¨äºï¼Œå‰è€…æ˜¯ç›´æ¥è·³å‡ºæ•´ä¸ªå¾ªç¯ç»“æ„ï¼Œè€Œåè€…å½“å‰æ­£åœ¨å¾ªç¯çš„æŸä¸€è½®ï¼Œå¯ä»¥ç†è§£ä¸ºè·³è¿‡å½“å‰å¾ªç¯ï¼Œç»§ç»­ä¸‹ä¸€æ¬¡ã€‚å¦å¤–ï¼Œ <code>break</code>  å¾€å¾€é€‚ç”¨äºä»ä¼—å¤šæ•°æ®ä¸­æ‰¾åˆ°æŸä¸€ä¸ªç¬¦åˆç‰¹å®šæ¡ä»¶çš„æ•°æ®ï¼Œè€Œ  <code>continue</code>  åˆ™é€‚ç”¨äºä»ä¼—å¤šæ•°æ®ä¸­æ‰¾åˆ°æŸä¸€ç³»åˆ—ç¬¦åˆæ¡ä»¶çš„æ•°æ®ã€‚</p>\n<p>æ³¨æ„ï¼šç”±äºé€»è¾‘ä¸å¤Ÿå®Œå–„ï¼Œæˆ–å¾ªç¯å’Œè·³å‡ºè¯­å¥ä½¿ç”¨ä¸å½“ï¼Œå¯èƒ½ä¼šå‡ºç°æ­»å¾ªç¯çš„æƒ…å†µï¼Œå°±éœ€è¦ç»ˆæ­¢å½“å‰ç¨‹åºå¹¶æ£€æŸ¥ä»£ç é€»è¾‘ã€‚ï¼ˆåœ¨ç»ˆç«¯å¯ä½¿ç”¨  <code>Ctrl + C</code>  ç»ˆæ­¢ç¨‹åºï¼‰</p>\n</blockquote>\n<h4 id=\"dict-å’Œ-set\"><a class=\"anchor\" href=\"#dict-å’Œ-set\">#</a> dict å’Œ set</h4>\n<h5 id=\"dict\"><a class=\"anchor\" href=\"#dict\">#</a> dict</h5>\n<p>Python å†…ç½®äº†å­—å…¸ï¼ˆåœ¨å…¶ä»–è¯­è¨€ä¸­ä¹Ÿç§°ä¸º  <code>map</code>  ï¼‰ï¼Œå®ƒä½¿ç”¨  <code>key-value</code>  ï¼ˆé”®å€¼å¯¹ï¼‰çš„æ–¹å¼å­˜å‚¨ï¼Œå…·æœ‰æå¿«çš„æŸ¥æ‰¾é€Ÿåº¦ã€‚</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>data <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span><span class=\"token string\">'dataA'</span><span class=\"token punctuation\">:</span> <span class=\"token number\">30</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'dataB'</span><span class=\"token punctuation\">:</span> <span class=\"token number\">73</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'dataC'</span><span class=\"token punctuation\">:</span> <span class=\"token operator\">-</span><span class=\"token number\">7</span><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">[</span><span class=\"token string\">'dataB'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># 73</span></pre></td></tr></table></figure><p>ä¹Ÿå¯ä»¥å¯¹ dict ä¸­çš„å€¼è¿›è¡Œæ·»åŠ ã€ä¿®æ”¹æˆ–ç§»é™¤ç­‰æ“ä½œï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>data <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span><span class=\"token string\">'dataA'</span><span class=\"token punctuation\">:</span> <span class=\"token number\">30</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'dataB'</span><span class=\"token punctuation\">:</span> <span class=\"token number\">73</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'dataC'</span><span class=\"token punctuation\">:</span> <span class=\"token operator\">-</span><span class=\"token number\">7</span><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># è®¡ç®— dict å…ƒç´ ä¸ªæ•°</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>data<span class=\"token punctuation\">[</span><span class=\"token string\">'dataB'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token number\">54</span>  <span class=\"token comment\"># æ ¹æ® key å€¼ä¿®æ”¹ dict ä¸­çš„å…ƒç´ </span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>data<span class=\"token punctuation\">[</span><span class=\"token string\">'dataD'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token number\">108</span>  <span class=\"token comment\"># å‘ dict ä¸­æ·»åŠ å…ƒç´ </span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>data<span class=\"token punctuation\">.</span>pop<span class=\"token punctuation\">(</span><span class=\"token string\">'dataA'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># &#123;'dataB': 54, 'dataC': -7, 'dataD': 108&#125;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token comment\"># dict çš„éå†</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">for</span> key <span class=\"token keyword\">in</span> data<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>data<span class=\"token punctuation\">.</span>clear<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># æ¸…ç©º dict</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># &#123;&#125;</span></pre></td></tr></table></figure><p>ä½†æ˜¯ï¼Œåœ¨æ ¹æ® key ä» dict ä¸­è·å–å€¼æ—¶ï¼Œå¯èƒ½ä¼šå‡ºç° key ä¸å­˜åœ¨çš„æƒ…å†µï¼Œè¿™æ—¶å°±ä¼šå¼•èµ·ç¨‹åºæŠ¥é”™ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å¦‚ä¸‹æ–¹å¼é¿å…ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>data <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span><span class=\"token string\">'dataA'</span><span class=\"token punctuation\">:</span> <span class=\"token number\">30</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'dataB'</span><span class=\"token punctuation\">:</span> <span class=\"token number\">73</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'dataC'</span><span class=\"token punctuation\">:</span> <span class=\"token operator\">-</span><span class=\"token number\">7</span><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\"># æ–¹å¼ä¸€ï¼šåˆ¤æ–­è¦æŸ¥è¯¢çš„ key æ˜¯å¦å­˜åœ¨</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">if</span> <span class=\"token string\">'dataD'</span> <span class=\"token keyword\">in</span> data<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">[</span><span class=\"token string\">'dataD'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\"># æ–¹å¼äºŒï¼šæ¨è</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">'dataD'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># æœªæŸ¥è¯¢åˆ°æ—¶ï¼Œè¿”å› None</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">'dataD'</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># æœªæŸ¥è¯¢åˆ°æ—¶ï¼ŒæŒ‡å®šè¿”å›å†…å®¹ï¼ˆè¿™é‡Œæ˜¯ - 1ï¼‰</span></pre></td></tr></table></figure><blockquote>\n<p>æ³¨æ„ï¼šåœ¨ Python äº¤äº’ç¯å¢ƒä¸­ï¼Œè¿”å›å€¼ä¸º None æ˜¯ä¸ä¼šè¾“å‡ºåˆ°æ§åˆ¶å°çš„ï¼Œå¦å¤–ï¼Œ dict å†…éƒ¨å…ƒç´ çš„å­˜æ”¾é¡ºåºå’Œ key æ”¾å…¥çš„é¡ºåºæ— å…³ã€‚</p>\n</blockquote>\n<p>dict å’Œ list æ¯”è¾ƒï¼š</p>\n<ol>\n<li>å¯¹äºæŸ¥æ‰¾å’Œæ’å…¥ï¼Œdict å¤„ç†æå¿«ï¼Œä¸ä¼šéšç€ key çš„å¢åŠ è€Œå˜æ…¢ï¼Œè€Œ list åˆ™ä¼šå› ä¸ºå…ƒç´ çš„ä¸æ–­å¢åŠ å˜æ…¢ã€‚</li>\n<li>å¯¹äºå†…å­˜å ç”¨è€Œè¨€ï¼Œdict ç”±äºè¦å­˜å‚¨é”®å€¼å¯¹ï¼Œå ç”¨å†…å­˜è¾ƒå¤šï¼Œè€Œ list åˆ™å ç”¨å¾ˆå°‘ã€‚</li>\n</ol>\n<p>æ‰€ä»¥ï¼Œlist çš„ä¼˜åŠ¿åœ¨äºç©ºé—´å ç”¨å°‘ï¼Œè€Œ dict çš„ä¼˜åŠ¿åœ¨äºæ—¶é—´æ¶ˆè€—å°‘ã€‚</p>\n<p>æ­¤å¤–ï¼Œç”±äº dict æ˜¯é€šè¿‡ key æ¥è®¡ç®— value çš„å­˜å‚¨ä½ç½®ï¼Œæ‰€ä»¥ç¨‹åºéœ€è¦ä¿è¯ key çš„å¯¹è±¡çš„ä¸å¯å˜æ€§ï¼Œè¿™ç§ä¸å¯å˜æ€§ï¼Œéœ€è¦é€šè¿‡<ins>å“ˆå¸Œç®—æ³•</ins>è¿›è¡Œä¿è¯ã€‚åœ¨ Python ä¸­ï¼Œå­—ç¬¦ä¸²å’Œæ•´æ•°éƒ½æ˜¯ä¸å¯å˜çš„ï¼Œå¯ä»¥ä½œä¸º dict çš„ key ä½¿ç”¨ï¼Œä½† list å´æ˜¯å¯å˜çš„ï¼Œä¸åº”å½“ä½œä¸º key ä½¿ç”¨ã€‚</p>\n<h5 id=\"set\"><a class=\"anchor\" href=\"#set\">#</a> set</h5>\n<p>set å’Œ dict ç±»ä¼¼ï¼Œä¹Ÿæ˜¯ä¸€ç»„ key çš„é›†åˆï¼Œä½†æ˜¯ set ä¸­ä¸å­˜å‚¨ valueï¼Œç”±äº key æ˜¯ä¸å¯é‡å¤çš„ï¼Œæ‰€ä»¥ set ä¸­ä¸å­˜åœ¨é‡å¤çš„æ•°æ®ã€‚</p>\n<p>è¦åˆ›å»ºä¸€ä¸ª setï¼Œéœ€è¦å…ˆæä¾›ä¸€ä¸ª list ä½œä¸ºè¾“å…¥é›†åˆï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>s1 <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">&#125;</span>  <span class=\"token comment\"># ç›´æ¥å£°æ˜ setï¼Œé‡å¤å€¼æ—¶æ— æ•ˆçš„</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>s1<span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">(</span><span class=\"token number\">4</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># å‘ set ä¸­æ·»åŠ å…ƒç´ </span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>s1<span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># å¦‚æœæ·»åŠ å…ƒç´ å·²å­˜åœ¨ï¼Œä¸ä¼šå¼•èµ·æŠ¥é”™ï¼Œä½†ä¹Ÿä¸ä¼šé‡å¤æ·»åŠ </span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>s1<span class=\"token punctuation\">.</span>remove<span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># ç§»é™¤ set ä¸­æŸä¸ªå…ƒç´ </span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>s1<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># &#123;1, 3, 4&#125;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>s1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># è®¡ç®—å…ƒç´ ä¸ªæ•°</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>list1 <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>s2 <span class=\"token operator\">=</span> <span class=\"token builtin\">set</span><span class=\"token punctuation\">(</span>list1<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># å°† list è½¬ä¸º set</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>s2<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># &#123;1, 2, 3&#125;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>s1<span class=\"token punctuation\">.</span>clear<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># æ¸…ç©º set</span></pre></td></tr></table></figure><p>set æ— åºä¸é‡å¤çš„å…ƒç´ é›†åˆï¼Œå®ƒå¯ä»¥åšæ•°å­¦æ„ä¹‰ä¸Šçš„äº¤é›†ã€å¹¶é›†å¤„ç†ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>s1 <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>s2 <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">6</span><span class=\"token punctuation\">,</span> <span class=\"token number\">8</span><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\"># äº¤é›†</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>s1 <span class=\"token operator\">&amp;</span> s2<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># &#123;2, 4&#125;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\"># å¹¶é›†</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>s1 <span class=\"token operator\">|</span> s2<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># &#123;1, 2, 3, 4, 6, 8&#125;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token comment\"># set ä¸­å­˜æ”¾ list ä¼šå¯¼è‡´æŠ¥é”™</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>s3 <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>s3<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># æŠ¥é”™ï¼šTypeError: unhashable type: 'list'</span></pre></td></tr></table></figure><blockquote>\n<p>set ä¸­å­˜æ”¾ list ä½œä¸ºå…ƒç´ ä¼šå¼•èµ·æŠ¥é”™ï¼Œå…¶åŸç†å’Œ dict æ˜¯ä¸€æ ·çš„ã€‚</p>\n</blockquote>\n<h3 id=\"å‡½æ•°\"><a class=\"anchor\" href=\"#å‡½æ•°\">#</a> å‡½æ•°</h3>\n<p>Python å†…ç½®äº†å¾ˆå¤šæœ‰ç”¨çš„å‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥è°ƒç”¨ï¼Œä¾‹å¦‚åœ¨ä¸Šæ–‡ä¸­é¢‘ç¹ä½¿ç”¨åˆ°çš„  <code>len()</code>  ã€‚</p>\n<h4 id=\"è°ƒç”¨å‡½æ•°\"><a class=\"anchor\" href=\"#è°ƒç”¨å‡½æ•°\">#</a> è°ƒç”¨å‡½æ•°</h4>\n<p>è¦è°ƒç”¨ä¸€ä¸ªå‡½æ•°ï¼Œéœ€è¦çŸ¥é“å‡½æ•°çš„åç§°å’Œå‚æ•°ï¼Œè€Œä¸”éœ€è¦ä¿è¯å‚æ•°çš„ç±»å‹åŠé¡ºåºçš„ä¸€è‡´ï¼Œå¦åˆ™å°±ä¼šå¼•èµ·ç¨‹åºé”™è¯¯ã€‚</p>\n<p>ä¹Ÿæœ‰ä¸€äº›å‡½æ•°å¯ä»¥æ¥æ”¶ä»»æ„å¤šä¸ªå‚æ•°ã€‚</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">abs</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">13.2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># 13.2</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">max</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">18</span><span class=\"token punctuation\">,</span> <span class=\"token number\">9</span><span class=\"token punctuation\">,</span> <span class=\"token number\">33</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># 33</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\"># ç±»å‹è½¬æ¢å‡½æ•°</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span><span class=\"token string\">'15'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># 15</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">float</span><span class=\"token punctuation\">(</span><span class=\"token string\">'2.18'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># 2.18</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">str</span><span class=\"token punctuation\">(</span><span class=\"token number\">1.62</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># 1.62</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">bool</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># True</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">bool</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># False</span></pre></td></tr></table></figure><p>å‡½æ•°åå…¶å®å°±æ˜¯æŒ‡å‘ä¸€ä¸ªå‡½æ•°å¯¹è±¡çš„å¼•ç”¨ï¼Œå®Œå…¨å¯ä»¥æŠŠå‡½æ•°åèµ‹ç»™ä¸€ä¸ªå˜é‡ï¼Œç›¸å½“äºç»™è¿™ä¸ªå‡½æ•°èµ·äº†ä¸€ä¸ªåˆ«åï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>a <span class=\"token operator\">=</span> <span class=\"token builtin\">abs</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">6</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># 6</span></pre></td></tr></table></figure><h4 id=\"å®šä¹‰å‡½æ•°\"><a class=\"anchor\" href=\"#å®šä¹‰å‡½æ•°\">#</a> å®šä¹‰å‡½æ•°</h4>\n<p>åœ¨ Python ä¸­ï¼Œå®šä¹‰ä¸€ä¸ªå‡½æ•°è¦ä½¿ç”¨  <code>def</code>  è¯­å¥ï¼Œä¾æ¬¡å†™å‡ºå‡½æ•°åã€æ‹¬å·ã€æ‹¬å·ä¸­çš„å‚æ•°å’Œå†’å·  <code>:</code>  ï¼Œç„¶åï¼Œåœ¨ç¼©è¿›å—ä¸­ç¼–å†™å‡½æ•°ä½“ï¼Œå‡½æ•°çš„è¿”å›å€¼ç”¨  <code>return</code>  è¯­å¥è¿”å›ï¼ˆæ— è¿”å›å€¼ä¸å†™å³å¯ï¼‰ã€‚</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">division</span><span class=\"token punctuation\">(</span>m<span class=\"token punctuation\">,</span> n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">if</span> n <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        <span class=\"token keyword\">return</span>  <span class=\"token comment\"># return None å¯ä»¥ç›´æ¥ç®€å†™ä¸º return</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token keyword\">return</span> m <span class=\"token operator\">/</span> n</pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>division<span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># 2.5</span></pre></td></tr></table></figure><p>å½“æš‚æœªæƒ³å¥½å¦‚ä½•å®šä¹‰å‡½æ•°çš„å®ç°æ—¶ï¼Œå¯ä»¥å®šä¹‰ä¸€ä¸ªç©ºå‡½æ•°ï¼Œå®ƒçš„ç›®çš„æ˜¯è¿›è¡Œå ä½ï¼Œå½“æƒ³å¥½å‡½æ•°çš„å®ç°å†…å®¹æ—¶åœ¨å¡«å……å³å¯ã€‚</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>i <span class=\"token operator\">=</span> <span class=\"token number\">1001</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>u <span class=\"token operator\">=</span> <span class=\"token number\">1005</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">say</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">str</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">str</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">pass</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">if</span> i <span class=\"token operator\">==</span> u<span class=\"token punctuation\">:</span>  <span class=\"token comment\"># if I were You</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token keyword\">pass</span>  <span class=\"token comment\"># I would ...  # if å†…å®¹æš‚æœªç¡®å®šï¼Œä½†ç•™ç©ºåˆä¼šæŠ¥é”™</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>say<span class=\"token punctuation\">(</span><span class=\"token string\">'Anyway!!!'</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># but I'm not, so, >>></span></pre></td></tr></table></figure><p>è°ƒç”¨å‡½æ•°æ—¶ï¼Œå¦‚æœå‚æ•°ä¸ªæ•°ä¸å¯¹ï¼ŒPython è§£é‡Šå™¨ä¼šè‡ªåŠ¨æ£€æŸ¥å‡ºæ¥ï¼Œå¹¶æŠ›å‡º  <code>TypeError</code>  é”™è¯¯ï¼Œä½†æ˜¯å¦‚æœå‚æ•°ç±»å‹ä¸å¯¹ï¼ŒPython è§£é‡Šå™¨å°±æ— æ³•å¸®æˆ‘ä»¬æ£€æŸ¥ã€‚</p>\n<blockquote>\n<p>ä½†æ˜¯ç°åœ¨çš„ IDE å·¥å…·å¾ˆæ™ºèƒ½äº†ï¼ŒPyCharm åœ¨ä»£ç ç¼–å†™æ—¶å°±å¯ä»¥å¸®åŠ©æˆ‘ä»¬è§„é¿å¾ˆå¤šé”™è¯¯ï¼Œä¾‹å¦‚å‚æ•°æ£€æŸ¥ã€‚</p>\n</blockquote>\n<p>å› æ­¤ï¼Œæˆ‘ä»¬å®šä¹‰å‡½æ•°çš„æ—¶å€™ï¼Œå¯ä»¥è¿›è¡Œå‚æ•°ç±»å‹æ£€æŸ¥ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">division</span><span class=\"token punctuation\">(</span>m<span class=\"token punctuation\">,</span> n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">if</span> <span class=\"token keyword\">not</span> <span class=\"token builtin\">isinstance</span><span class=\"token punctuation\">(</span>m<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">int</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">float</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        <span class=\"token keyword\">raise</span> TypeError<span class=\"token punctuation\">(</span><span class=\"token string\">'æ‚¨ä¼ å…¥çš„é™¤æ•°å¿…é¡»æ˜¯æ•°å€¼å‹'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">if</span> <span class=\"token keyword\">not</span> <span class=\"token builtin\">isinstance</span><span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">,</span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token keyword\">raise</span> TypeError<span class=\"token punctuation\">(</span><span class=\"token string\">'æ‚¨ä¼ å…¥çš„è¢«é™¤æ•°å¿…é¡»æ˜¯æ•´æ•°'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">if</span> n <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token keyword\">return</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token keyword\">return</span> m <span class=\"token operator\">/</span> n</pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>division<span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4.5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># æŠ›å‡ºã€æ‚¨ä¼ å…¥çš„è¢«é™¤æ•°å¿…é¡»æ˜¯æ•´æ•°ã€‘é”™è¯¯</span></pre></td></tr></table></figure><p>Python å‡½æ•°ä¹Ÿå¯ä»¥è¿”å›å¤šä¸ªå€¼ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">maxAndMin</span><span class=\"token punctuation\">(</span>arr<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token builtin\">max</span> <span class=\"token operator\">=</span> arr<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token builtin\">min</span> <span class=\"token operator\">=</span> arr<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">for</span> item <span class=\"token keyword\">in</span> arr<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token keyword\">if</span> item <span class=\"token operator\">></span> <span class=\"token builtin\">max</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>            <span class=\"token builtin\">max</span> <span class=\"token operator\">=</span> item</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token keyword\">if</span> item <span class=\"token operator\">&lt;</span> <span class=\"token builtin\">min</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>            <span class=\"token builtin\">min</span> <span class=\"token operator\">=</span> item</pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token builtin\">max</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">min</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token builtin\">max</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">min</span> <span class=\"token operator\">=</span> maxAndMin<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">53</span><span class=\"token punctuation\">,</span> <span class=\"token number\">6</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">28</span><span class=\"token punctuation\">,</span> <span class=\"token number\">7</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'max = '</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">max</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># max =  53</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'min = '</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">min</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># min =  -1</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>maxAndMin<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">53</span><span class=\"token punctuation\">,</span> <span class=\"token number\">6</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">28</span><span class=\"token punctuation\">,</span> <span class=\"token number\">7</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># (53, -1)</span></pre></td></tr></table></figure><blockquote>\n<p>ä»ç¤ºä¾‹ä¸­å¯ä»¥çœ‹åˆ°ï¼ŒPython å‡½æ•°è¿”å›å¤šä¸ªå€¼å…¶å®æ˜¯ä¸€ç§å‡è±¡ï¼Œå®ƒè¿”å›å¤šä¸ªå€¼ï¼Œå…¶å®æœ¬è´¨ä¸Šæ˜¯è¿”å›ä¸€ä¸ª tuple ã€‚</p>\n</blockquote>\n<p>å°è¯•å®šä¹‰ä¸€ä¸ªå‡½æ•°  <code>quadratic(a, b, c)</code>  æ¥æ±‚å‡ºä¸€å…ƒäºŒæ¬¡æ–¹ç¨‹çš„è§£ï¼Œå…¬å¼å®šä¹‰ï¼š<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>a</mi><msup><mi>x</mi><mn>2</mn></msup><mo>+</mo><mi>b</mi><mi>x</mi><mo>+</mo><mi>c</mi><mo>=</mo><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">ax^2 + bx + c = 0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.897438em;vertical-align:-0.08333em;\"></span><span class=\"mord mathnormal\">a</span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.77777em;vertical-align:-0.08333em;\"></span><span class=\"mord mathnormal\">b</span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">c</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span></span></span></span></p>\n<blockquote>\n<p>æç¤ºï¼š</p>\n<ol>\n<li>\n<p>ä¸€å…ƒäºŒæ¬¡æ–¹ç¨‹çš„æ±‚æ ¹å…¬å¼ä¸ºï¼š</p>\n<p><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mtable rowspacing=\"0.15999999999999992em\" columnalign=\"center\" columnspacing=\"1em\"><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mrow><mi>x</mi><mo>=</mo><mfrac><mrow><mo>âˆ’</mo><mi>b</mi><mo>Â±</mo><msqrt><mrow><msup><mi>b</mi><mn>2</mn></msup><mo>âˆ’</mo><mn>4</mn><mi>a</mi><mi>c</mi></mrow></msqrt></mrow><mrow><mn>2</mn><mi>a</mi></mrow></mfrac></mrow></mstyle></mtd></mtr></mtable><annotation encoding=\"application/x-tex\">\\begin {array}{c}\n\nx = \\frac{-bÂ±\\sqrt {b^2-4ac}}{2a}\n\n\\end {array}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.3994820000000001em;vertical-align:-0.449741em;\"></span><span class=\"mord\"><span class=\"mtable\"><span class=\"arraycolsep\" style=\"width:0.5em;\"></span><span class=\"col-align-c\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9497410000000002em;\"><span style=\"top:-2.949741em;\"><span class=\"pstrut\" style=\"height:3.039482em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.039482em;\"><span style=\"top:-2.6550000000000002em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span><span class=\"mord mathnormal mtight\">a</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.3939999999999997em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">âˆ’</span><span class=\"mord mathnormal mtight\">b</span><span class=\"mbin mtight\">Â±</span><span class=\"mord sqrt mtight\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9221171428571429em;\"><span class=\"svg-align\" style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord mtight\" style=\"padding-left:0.833em;\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">b</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7463142857142857em;\"><span style=\"top:-2.786em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mbin mtight\">âˆ’</span><span class=\"mord mtight\">4</span><span class=\"mord mathnormal mtight\">a</span><span class=\"mord mathnormal mtight\">c</span></span></span><span style=\"top:-2.882117142857143em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"hide-tail mtight\" style=\"min-width:0.853em;height:1.08em;\"><svg width='400em' height='1.08em' viewBox='0 0 400000 1080' preserveAspectRatio='xMinYMin slice'><path d='M95,702\nc-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14\nc0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54\nc44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10\ns173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429\nc69,-144,104.5,-217.7,106.5,-221\nl0 -0\nc5.3,-9.3,12,-14,20,-14\nH400000v40H845.2724\ns-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7\nc-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z\nM834 80h400000v40h-400000z'/></svg></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.11788285714285718em;\"><span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.449741em;\"><span></span></span></span></span></span><span class=\"arraycolsep\" style=\"width:0.5em;\"></span></span></span></span></span></span></span></p>\n</li>\n<li>\n<p>è®¡ç®—å¹³æ–¹æ ¹å¯ä»¥è°ƒç”¨  <code>math.sqrt()</code>  å‡½æ•°ã€‚</p>\n</li>\n</ol>\n</blockquote>\n<p>ä½¿ç”¨ä¸‹é¢çš„ä»£ç æ¥å°è¯•ä¸€ä¸‹å§ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> math</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">quadratic</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">,</span> b<span class=\"token punctuation\">,</span> c<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">pass</span>  <span class=\"token comment\"># åœ¨è¿™é‡Œå†™å…¥ä½ çš„ä»£ç é€»è¾‘</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>a <span class=\"token operator\">=</span> <span class=\"token builtin\">input</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Input parameter a: '</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>b <span class=\"token operator\">=</span> <span class=\"token builtin\">input</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Input parameter b: '</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>c <span class=\"token operator\">=</span> <span class=\"token builtin\">input</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Input parameter c: '</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token keyword\">try</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    a <span class=\"token operator\">=</span> <span class=\"token builtin\">float</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    b <span class=\"token operator\">=</span> <span class=\"token builtin\">float</span><span class=\"token punctuation\">(</span>b<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    c <span class=\"token operator\">=</span> <span class=\"token builtin\">float</span><span class=\"token punctuation\">(</span>c<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token keyword\">except</span> ValueError<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token keyword\">raise</span> ValueError<span class=\"token punctuation\">(</span><span class=\"token string\">'å‚æ•°é”™è¯¯ï¼šè¯·ä¼ å…¥æ•°å€¼ç±»å‹çš„å‚æ•°'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Get result = '</span> <span class=\"token operator\">+</span> quadratic<span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">,</span> b<span class=\"token punctuation\">,</span> c<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>__str__<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><details><summary>ç‚¹å‡»è¿™é‡ŒæŸ¥çœ‹å‚è€ƒç­”æ¡ˆã€‚</summary><div>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> math</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">quadratic</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">,</span> b<span class=\"token punctuation\">,</span> c<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    x1 <span class=\"token operator\">=</span> <span class=\"token boolean\">None</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    x2 <span class=\"token operator\">=</span> <span class=\"token boolean\">None</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token comment\"># 1. å‚æ•°æ ¡éªŒ</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">if</span> a <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'å‚æ•°é”™è¯¯ï¼šä¸€å…ƒäºŒæ¬¡æ–¹ç¨‹çš„aå€¼ä¸èƒ½ä¸º0'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token keyword\">return</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token comment\"># 2. åˆ¤æ–­æœ‰å¤šå°‘ä¸ªè§£</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    d <span class=\"token operator\">=</span> b <span class=\"token operator\">**</span> <span class=\"token number\">2</span> <span class=\"token operator\">-</span> <span class=\"token number\">4</span> <span class=\"token operator\">*</span> a <span class=\"token operator\">*</span> c</pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token keyword\">if</span> d <span class=\"token operator\">&lt;</span> <span class=\"token number\">0</span><span class=\"token punctuation\">:</span>  <span class=\"token comment\"># è¯¥æ–¹ç¨‹åªæœ‰ä¸€ä¸ªè§£ï¼Œæˆ–ä¸¤ä¸ªè§£ç›¸åŒ</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'è¯¥ä¸€å…ƒäºŒæ¬¡æ–¹ç¨‹æ²¡æœ‰ã€æ— è§£ã€‘'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token keyword\">elif</span> d <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        x1 <span class=\"token operator\">=</span> b <span class=\"token operator\">/</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">2</span> <span class=\"token operator\">*</span> a<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        x2 <span class=\"token operator\">=</span> x1</pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span>  <span class=\"token comment\"># è¯¥æ–¹ç¨‹æœ‰ä¸¤ä¸ªè§£</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        x1 <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">-</span>b <span class=\"token operator\">+</span> math<span class=\"token punctuation\">.</span>sqrt<span class=\"token punctuation\">(</span>d<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> <span class=\"token punctuation\">(</span><span class=\"token number\">2</span> <span class=\"token operator\">*</span> a<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        x2 <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">-</span>b <span class=\"token operator\">-</span> math<span class=\"token punctuation\">.</span>sqrt<span class=\"token punctuation\">(</span>d<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> <span class=\"token punctuation\">(</span><span class=\"token number\">2</span> <span class=\"token operator\">*</span> a<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token keyword\">return</span> x1<span class=\"token punctuation\">,</span> x2</pre></td></tr><tr><td data-num=\"21\"></td><td><pre></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>a <span class=\"token operator\">=</span> <span class=\"token builtin\">input</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Input parameter a: '</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>b <span class=\"token operator\">=</span> <span class=\"token builtin\">input</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Input parameter b: '</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>c <span class=\"token operator\">=</span> <span class=\"token builtin\">input</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Input parameter c: '</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre><span class=\"token keyword\">try</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>    a <span class=\"token operator\">=</span> <span class=\"token builtin\">float</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>    b <span class=\"token operator\">=</span> <span class=\"token builtin\">float</span><span class=\"token punctuation\">(</span>b<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>    c <span class=\"token operator\">=</span> <span class=\"token builtin\">float</span><span class=\"token punctuation\">(</span>c<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre><span class=\"token keyword\">except</span> ValueError<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>    <span class=\"token keyword\">raise</span> ValueError<span class=\"token punctuation\">(</span><span class=\"token string\">'å‚æ•°é”™è¯¯ï¼šè¯·ä¼ å…¥æ•°å€¼ç±»å‹çš„å‚æ•°'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Get result = '</span> <span class=\"token operator\">+</span> quadratic<span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">,</span> b<span class=\"token punctuation\">,</span> c<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>__str__<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><blockquote>\n<p>å¯ä»¥å°è¯•è¾“å…¥ä¸€äº›ä¸‹é¢è¿™å‡ ç»„å‚æ•°è¿›è¡ŒéªŒè¯ï¼š</p>\n<p>1, 2, -3 -&gt; (1.0, -3.0)</p>\n<p>4, 6, 0 -&gt; (0.0, -1.5)</p>\n<p>1, 4, 4 -&gt; (-2.0, -2.0)</p>\n</blockquote>\n</div></details>\n<h4 id=\"å‡½æ•°çš„å‚æ•°\"><a class=\"anchor\" href=\"#å‡½æ•°çš„å‚æ•°\">#</a> å‡½æ•°çš„å‚æ•°</h4>\n<ol>\n<li>\n<p>ä½ç½®å‚æ•°</p>\n<p>åœ¨å‰æ–‡ä¸­ï¼Œæˆ‘ä»¬å·²ç»å¤šæ¬¡ä½¿ç”¨åˆ°ä½ç½®å‚æ•°ï¼Œæ‰€è°“ä½ç½®å‚æ•°ï¼Œå°±æ˜¯åœ¨è°ƒç”¨å‡½æ•°æ—¶ï¼ŒæŒ‡å®šçš„å®é™…å‚æ•°çš„æ•°é‡ï¼Œå¿…é¡»å’Œå½¢å¼å‚æ•°çš„æ•°é‡ä¿æŒä¸€è‡´ï¼Œå¦åˆ™å°±ä¼šæŠ›å‡º  <code>TypeError</code>  å¼‚å¸¸ã€‚</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">power</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span> n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    s <span class=\"token operator\">=</span> <span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">while</span> n <span class=\"token operator\">></span> <span class=\"token number\">0</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        s <span class=\"token operator\">*=</span> x</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        n <span class=\"token operator\">-=</span> <span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">return</span> s</pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>power<span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure></li>\n<li>\n<p>é»˜è®¤å‚æ•°</p>\n<p>é»˜è®¤å‚æ•°æ˜¯æŒ‡å½“å‡½æ•°è°ƒç”¨æ–¹ä¸ä¼ é€’æ—¶ï¼Œå‡½æ•°æŒ‡å®šå‚æ•°å…·æœ‰ä¸€ä¸ªé»˜è®¤çš„å€¼ã€‚</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">power</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span> n<span class=\"token operator\">=</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>  <span class=\"token comment\"># æ¬¡æ–¹æ•°é»˜è®¤ä¸º 2</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    s <span class=\"token operator\">=</span> <span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">while</span> n <span class=\"token operator\">></span> <span class=\"token number\">0</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        s <span class=\"token operator\">*=</span> x</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        n <span class=\"token operator\">-=</span> <span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">return</span> s</pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>power<span class=\"token punctuation\">(</span><span class=\"token number\">4</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>ä½¿ç”¨é»˜è®¤å‚æ•°éœ€è¦è®°ä½ä»¥ä¸‹åŸåˆ™ï¼š</p>\n<ul>\n<li>\n<p>ä½ç½®å‚æ•°æ”¾å‰ï¼Œé»˜è®¤å‚æ•°æ”¾åã€‚</p>\n</li>\n<li>\n<p>ç¡®å®šæ€§å¤§çš„å‚æ•°æ”¾å‰ï¼Œç¡®å®šæ€§å°çš„å‚æ•°æ”¾åã€‚</p>\n</li>\n<li>\n<p>è°ƒç”¨çš„å‡½æ•°éœ€è¦ä¼ é€’é»˜è®¤å‚æ•°ï¼Œä½†å‚æ•°ä½ç½®ä¸åŒ¹é…æ—¶ï¼Œéœ€è¦æŒ‡å®šå‚æ•°åã€‚</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">test</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">,</span> age<span class=\"token punctuation\">,</span> school<span class=\"token operator\">=</span><span class=\"token string\">''</span><span class=\"token punctuation\">,</span> gender<span class=\"token operator\">=</span><span class=\"token string\">'Male'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">pass</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>a <span class=\"token operator\">=</span> <span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>test<span class=\"token punctuation\">(</span><span class=\"token string\">'Susan'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">20</span><span class=\"token punctuation\">,</span> gender<span class=\"token operator\">=</span><span class=\"token string\">'Female'</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure></li>\n<li>\n<p>é»˜è®¤å‚æ•°å¿…é¡»æŒ‡å‘ä¸å˜å¯¹è±¡ã€å‘ç‚¹ã€‘ã€‚</p>\n<p>ä¾‹å¦‚ï¼Œå½“é»˜è®¤å‚æ•°å®šä¹‰ä¸ºæ•°ç»„æ—¶ï¼Œå°†å‡ºç°å¦‚ä¸‹æƒ…å†µï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">add_end</span><span class=\"token punctuation\">(</span>l<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    l<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span><span class=\"token string\">'END'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">return</span> l</pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>add_end<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># [1, 2, 3, 'END']</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>add_end<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># ['END']</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>add_end<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># ['END', 'END']</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>add_end<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># ['END', 'END', 'END']</span></pre></td></tr></table></figure><p>è¿™æ˜¯å› ä¸ºé»˜è®¤å‚æ•°æŒ‡å®šä¸º list æ—¶ï¼ŒæŒ‡å®šçš„å…¶å®åªæ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼Œå½“æˆ‘ä»¬æ¯æ¬¡ä½¿ç”¨é»˜è®¤å‚æ•°ï¼Œä½¿ç”¨çš„éƒ½æ˜¯æŒ‡é’ˆå¯¹åº”çš„å€¼ï¼Œå¤šæ¬¡è°ƒç”¨å°±ä¼šåå¤ä¿®æ”¹ list æŒ‡é’ˆå¯¹åº”çš„å€¼ï¼Œå¯¼è‡´å¤šé‡æ‹¼æ¥ã€‚</p>\n<blockquote>\n<p>è¦ç†è§£è¿™ä¸€ç‚¹ï¼Œè¯·åŠ¡å¿…ç†è§£å¯å˜å¯¹è±¡å’Œä¸å¯å˜å¯¹è±¡ã€‚ï¼ˆåœ¨ Java è¯­è¨€ä¸­ï¼Œè¢«ç§°ä¸ºå€¼ç±»å‹å’Œå¼•ç”¨ç±»å‹ï¼‰</p>\n</blockquote>\n</li>\n</ul>\n</li>\n<li>\n<p>å¯å˜å‚æ•°</p>\n<p>å¯å˜å‚æ•°ï¼Œå³å‚æ•°çš„ä¸ªæ•°æ˜¯å¯ä»¥å˜åŒ–çš„ï¼Œå¯ä»¥ä¼ å…¥ä»»æ„å¤šä¸ªå‚æ•°ï¼ˆåŒ…æ‹¬ 0 ä¸ªï¼‰ã€‚å®šä¹‰å‡½æ•°å¯å˜å‚æ•°çš„æ–¹å¼å¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">sum</span><span class=\"token punctuation\">(</span><span class=\"token operator\">*</span>nums<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token builtin\">sum</span> <span class=\"token operator\">=</span> <span class=\"token number\">0</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">for</span> num <span class=\"token keyword\">in</span> nums<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token builtin\">sum</span> <span class=\"token operator\">+=</span> num</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token builtin\">sum</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">sum</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">29</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># 42</span></pre></td></tr></table></figure><p>å¯å˜å‚æ•°æ¥æ”¶åˆ°çš„æ˜¯ä¸€ä¸ª tuple ç±»å‹ã€‚</p>\n<p>å¦‚æœè°ƒç”¨å‡½æ•°æ—¶ï¼ŒæŸä¸€ä¸ªå‚æ•°æœ¬èº«å³æ˜¯ tuple ç±»å‹çš„å‚æ•°ï¼Œä¸ºäº†åŒºåˆ†å¯å˜å‚æ•°ä¸å‚æ•°çš„ tuple ç±»å‹å‚æ•°ï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹æ–¹å¼è°ƒç”¨å‡½æ•°ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">sum</span><span class=\"token punctuation\">(</span><span class=\"token operator\">*</span>nums<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token builtin\">sum</span> <span class=\"token operator\">=</span> <span class=\"token number\">0</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">for</span> num <span class=\"token keyword\">in</span> nums<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token builtin\">sum</span> <span class=\"token operator\">+=</span> num</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token builtin\">sum</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>nums <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">29</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">sum</span><span class=\"token punctuation\">(</span><span class=\"token operator\">*</span>nums<span class=\"token punctuation\">,</span> <span class=\"token number\">8</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># 50</span></pre></td></tr></table></figure><blockquote>\n<p>è¿™é‡Œæ˜¯å°† tuple è½¬æ¢ä¸ºå¯å˜å‚æ•°ï¼Œå†ä¼ å…¥åˆ°å‡½æ•°ä¸­ã€‚</p>\n</blockquote>\n</li>\n<li>\n<p>å…³é”®å­—å‚æ•°</p>\n<p>å…³é”®å­—å‚æ•°å…è®¸ä¼ å…¥ä»»æ„å¤šä¸ªå‚æ•°ï¼Œè¿™äº›å…³é”®å­—å‚æ•°åœ¨å‡½æ•°å†…éƒ¨ä¼šè‡ªåŠ¨ç»„è£…æˆä¸€ä¸ª dict ã€‚</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">person</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">,</span> age<span class=\"token punctuation\">,</span> <span class=\"token operator\">**</span>kw<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'name:'</span><span class=\"token punctuation\">,</span> name<span class=\"token punctuation\">,</span> <span class=\"token string\">'age:'</span><span class=\"token punctuation\">,</span> age<span class=\"token punctuation\">,</span> <span class=\"token string\">'extra:'</span><span class=\"token punctuation\">,</span> kw<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>person<span class=\"token punctuation\">(</span><span class=\"token string\">'Lily'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">24</span><span class=\"token punctuation\">,</span> city<span class=\"token operator\">=</span><span class=\"token string\">'Shanghai'</span><span class=\"token punctuation\">,</span> job<span class=\"token operator\">=</span><span class=\"token string\">'teacher'</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># name: Lily age: 24 extra: &#123;'city': 'Shanghai', 'job': 'teacher'&#125;</span></pre></td></tr></table></figure><p>å…³é”®å­—å‚æ•°å¯ä»¥æ‰©å±•å‡½æ•°çš„åŠŸèƒ½ï¼Œå‡½æ•°è°ƒç”¨æ–¹å¯ä»¥æ ¹æ®æƒ…å†µè‡ªç”±é€‰æ‹©æ˜¯å¦ä¼ é€’æŸäº›å‚æ•°å­—æ®µï¼Œä¸Šé¢çš„å‡½æ•°ä¹Ÿå¯ä»¥åšå¦‚ä¸‹ç®€åŒ–ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">person</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">,</span> age<span class=\"token punctuation\">,</span> <span class=\"token operator\">**</span>kw<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'name:'</span><span class=\"token punctuation\">,</span> name<span class=\"token punctuation\">,</span> <span class=\"token string\">'age:'</span><span class=\"token punctuation\">,</span> age<span class=\"token punctuation\">,</span> <span class=\"token string\">'extra:'</span><span class=\"token punctuation\">,</span> kw<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>extra <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span><span class=\"token string\">'city'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'Shanghai'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'job'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'teacher'</span><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>person<span class=\"token punctuation\">(</span><span class=\"token string\">'Lily'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">24</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">**</span>extra<span class=\"token punctuation\">)</span></pre></td></tr></table></figure><blockquote>\n<p>æ³¨æ„ï¼šå‡½æ•°å†…çš„å…³é”®å­—å‚æ•°åªæ˜¯ä¼ å…¥å®é™…å‚æ•°çš„ä¸€ä»½æ‹·è´ï¼Œå¯¹å®ƒè¿›è¡Œæ”¹åŠ¨å¹¶ä¸ä¼šå½±å“åˆ°å‡½æ•°è°ƒç”¨æ–¹çš„å˜é‡ã€‚</p>\n</blockquote>\n</li>\n<li>\n<p>å‘½åå…³é”®å­—å‚æ•°</p>\n<p>å¯¹äºå…³é”®å­—å‚æ•°ï¼Œè°ƒç”¨æ–¹å¯¹å‚æ•°åç§°å¯ä»¥ä»»æ„æŒ‡å®šï¼Œä½†å¦‚éœ€è¿›è¡Œå‚æ•°åç§°é™åˆ¶ï¼Œæˆ‘ä»¬å¯ä»¥è¿›è¡Œå¦‚ä¸‹å£°æ˜ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">person</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">,</span> age<span class=\"token punctuation\">,</span> <span class=\"token operator\">*</span><span class=\"token punctuation\">,</span> city<span class=\"token punctuation\">,</span> job<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'name:'</span><span class=\"token punctuation\">,</span> name<span class=\"token punctuation\">,</span> <span class=\"token string\">'age:'</span><span class=\"token punctuation\">,</span> age<span class=\"token punctuation\">,</span> <span class=\"token string\">'city:'</span><span class=\"token punctuation\">,</span> city<span class=\"token punctuation\">,</span> <span class=\"token string\">'job:'</span><span class=\"token punctuation\">,</span> job<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>extra <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span><span class=\"token string\">'city'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'Shanghai'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'job'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'teacher'</span><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>person<span class=\"token punctuation\">(</span><span class=\"token string\">'Lily'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">24</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">**</span>extra<span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>è¿™ç§é€šè¿‡  <code>*</code>  åˆ†éš”è¢«å‘½åçš„å…³é”®å­—å‚æ•°ï¼Œå¯ä»¥å®ç°å¯¹å‚æ•°å‘½åçš„é™åˆ¶ï¼Œä½†é€šè¿‡è¿™ç§æ–¹å¼ä¼ é€’å‚æ•°æ—¶ï¼Œè°ƒç”¨æ–¹å¿…é¡»ä¼ é€’æ‰€æœ‰å…³é”®å­—å‚æ•°ï¼ˆé™¤éå…³é”®å­—å‚æ•°ä¸­ä½¿ç”¨äº†é»˜è®¤å‚æ•°ï¼‰ï¼Œå¦åˆ™ä¼šå¼•èµ·æŠ¥é”™ã€‚</p>\n<p>å¦å¤–ï¼Œå½“å‡½æ•°ä¸­å·²ç»å®šä¹‰äº†ä¸€ä¸ªå¯å˜å‚æ•°ï¼Œé‚£ä¹ˆï¼Œè¿™ä¸ªå‡½æ•°ä¸­çš„å¯å˜å‚æ•°å‰å°±ä¸å†éœ€è¦ä½¿ç”¨  <code>*</code>  åˆ†éš”ç¬¦äº†ï¼Œä¾‹å¦‚ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">person</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">,</span> age<span class=\"token punctuation\">,</span> <span class=\"token operator\">*</span>args<span class=\"token punctuation\">,</span> city<span class=\"token operator\">=</span><span class=\"token string\">'Taiyuan'</span><span class=\"token punctuation\">,</span> job<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">pass</span></pre></td></tr></table></figure></li>\n<li>\n<p>å‚æ•°ç»„åˆ</p>\n<p>åœ¨ Python ä¸­å®šä¹‰å‡½æ•°ï¼Œå¯ä»¥ç”¨å¿…é€‰å‚æ•°ã€é»˜è®¤å‚æ•°ã€å¯å˜å‚æ•°ã€å…³é”®å­—å‚æ•°å’Œå‘½åå…³é”®å­—å‚æ•°ï¼Œè¿™ 5 ç§å‚æ•°éƒ½å¯ä»¥ç»„åˆä½¿ç”¨ã€‚ä½†æ˜¯è¯·æ³¨æ„ï¼Œå‚æ•°å®šä¹‰çš„é¡ºåºå¿…é¡»æ˜¯ï¼šå¿…é€‰å‚æ•°ã€é»˜è®¤å‚æ•°ã€å¯å˜å‚æ•°ã€å‘½åå…³é”®å­—å‚æ•°å’Œå…³é”®å­—å‚æ•°ï¼Œä¾‹å¦‚ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">f1</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">,</span> b<span class=\"token punctuation\">,</span> c<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">*</span>args<span class=\"token punctuation\">,</span> school<span class=\"token punctuation\">,</span> <span class=\"token operator\">**</span>kw<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'a ='</span><span class=\"token punctuation\">,</span> a<span class=\"token punctuation\">,</span> <span class=\"token string\">'b ='</span><span class=\"token punctuation\">,</span> b<span class=\"token punctuation\">,</span> <span class=\"token string\">'c ='</span><span class=\"token punctuation\">,</span> c<span class=\"token punctuation\">,</span> <span class=\"token string\">'args ='</span><span class=\"token punctuation\">,</span> args<span class=\"token punctuation\">,</span> school<span class=\"token punctuation\">,</span> <span class=\"token string\">'kw ='</span><span class=\"token punctuation\">,</span> kw<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>f1<span class=\"token punctuation\">(</span><span class=\"token string\">'zhangsan'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'nanjing'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">12</span><span class=\"token punctuation\">,</span> <span class=\"token number\">33</span><span class=\"token punctuation\">,</span> school<span class=\"token operator\">=</span><span class=\"token string\">'NanJin University'</span><span class=\"token punctuation\">,</span> email<span class=\"token operator\">=</span><span class=\"token string\">'abc@q.com'</span><span class=\"token punctuation\">,</span> phone<span class=\"token operator\">=</span><span class=\"token string\">'15625376'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\"># a = zhangsan b = nanjing c = 5 args = (12, 33) NanJin University kw = &#123;'email': 'abc@q.com', 'phone': '15625376'&#125;</span></pre></td></tr></table></figure><blockquote>\n<p>ä½†æ˜¯ï¼Œç”±äºå¤šç§ç±»å‹çš„ç»„åˆå‚æ•°å¯è¯»æ€§å¹¶ä¸å¤ªé«˜ï¼Œä¸æ¨èåŒæ—¶ä½¿ç”¨è¾ƒå¤šç§ç±»å‹çš„å‚æ•°è¿›è¡Œç»„åˆã€‚</p>\n</blockquote>\n</li>\n</ol>\n<h4 id=\"é€’å½’å‡½æ•°\"><a class=\"anchor\" href=\"#é€’å½’å‡½æ•°\">#</a> é€’å½’å‡½æ•°</h4>\n<p>åœ¨å‡½æ•°å†…éƒ¨ï¼Œå¯ä»¥è°ƒç”¨å…¶ä»–å‡½æ•°ã€‚å¦‚æœä¸€ä¸ªå‡½æ•°åœ¨å†…éƒ¨è°ƒç”¨è‡ªèº«æœ¬èº«ï¼Œè¿™ä¸ªå‡½æ•°å°±æ˜¯é€’å½’å‡½æ•°ï¼Œä¾‹å¦‚ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># é˜¶ä¹˜</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">fact</span><span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">if</span> n <span class=\"token operator\">==</span> <span class=\"token number\">1</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">return</span> n <span class=\"token operator\">*</span> fact<span class=\"token punctuation\">(</span>n <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>fact<span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># 120</span></pre></td></tr></table></figure><p>é€’å½’å‡½æ•°çš„ä¼˜ç‚¹æ˜¯å®šä¹‰ç®€å•ï¼Œé€»è¾‘æ¸…æ™°ã€‚ç†è®ºä¸Šï¼Œæ‰€æœ‰çš„é€’å½’å‡½æ•°éƒ½å¯ä»¥å†™æˆå¾ªç¯çš„æ–¹å¼ï¼Œä½†å¾ªç¯çš„é€»è¾‘ä¸å¦‚é€’å½’æ¸…æ™°ã€‚</p>\n<p>ä½¿ç”¨é€’å½’å‡½æ•°éœ€è¦æ³¨æ„é˜²æ­¢æ ˆæº¢å‡ºã€‚åœ¨è®¡ç®—æœºä¸­ï¼Œå‡½æ•°è°ƒç”¨æ˜¯é€šè¿‡æ ˆï¼ˆstackï¼‰è¿™ç§æ•°æ®ç»“æ„å®ç°çš„ï¼Œæ¯å½“è¿›å…¥ä¸€ä¸ªå‡½æ•°è°ƒç”¨ï¼Œæ ˆå°±ä¼šåŠ ä¸€å±‚æ ˆå¸§ï¼Œæ¯å½“å‡½æ•°è¿”å›ï¼Œæ ˆå°±ä¼šå‡ä¸€å±‚æ ˆå¸§ã€‚ç”±äºæ ˆçš„å¤§å°ä¸æ˜¯æ— é™çš„ï¼Œæ‰€ä»¥ï¼Œé€’å½’è°ƒç”¨çš„æ¬¡æ•°è¿‡å¤šï¼Œä¼šå¯¼è‡´æ ˆæº¢å‡ºã€‚ï¼ˆä¾‹å¦‚åœ¨ç¤ºä¾‹ä¸­è°ƒç”¨  <code>fact(1000)</code>  ï¼‰</p>\n<p>è§£å†³é€’å½’è°ƒç”¨æ ˆæº¢å‡ºçš„æ–¹æ³•æ˜¯é€šè¿‡<strong>å°¾é€’å½’</strong>ä¼˜åŒ–ï¼Œäº‹å®ä¸Šå°¾é€’å½’å’Œå¾ªç¯çš„æ•ˆæœæ˜¯ä¸€æ ·çš„ï¼Œæ‰€ä»¥ï¼ŒæŠŠå¾ªç¯çœ‹æˆæ˜¯ä¸€ç§ç‰¹æ®Šçš„å°¾é€’å½’å‡½æ•°ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚</p>\n<blockquote>\n<p>å¯¹äº Python è€Œè¨€ï¼Œå› ä¸ºå…¶è§£é‡Šå™¨å¹¶æœªå¯¹å°¾é€’å½’åšä¼˜åŒ–ï¼Œæ‰€ä»¥ï¼ŒPython ä½¿ç”¨å°¾é€’å½’æ–¹å¼ä¹Ÿä¸èƒ½è§£å†³æ ˆæº¢å‡ºçš„é—®é¢˜ã€‚</p>\n</blockquote>\n<p>å°¾é€’å½’æ˜¯æŒ‡ï¼Œåœ¨å‡½æ•°è¿”å›çš„æ—¶å€™ï¼Œè°ƒç”¨è‡ªèº«æœ¬èº«ï¼Œå¹¶ä¸”ï¼Œreturn è¯­å¥ä¸èƒ½åŒ…å«è¡¨è¾¾å¼ã€‚è¿™æ ·ï¼Œç¼–è¯‘å™¨æˆ–è€…è§£é‡Šå™¨å°±å¯ä»¥æŠŠå°¾é€’å½’åšä¼˜åŒ–ï¼Œä½¿é€’å½’æœ¬èº«æ— è®ºè°ƒç”¨å¤šå°‘æ¬¡ï¼Œéƒ½åªå ç”¨ä¸€ä¸ªæ ˆå¸§ï¼Œä¸ä¼šå‡ºç°æ ˆæº¢å‡ºçš„æƒ…å†µã€‚</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># å°¾é€’å½’é˜¶ä¹˜</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">fact</span><span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">return</span> fact_iter<span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">fact_iter</span><span class=\"token punctuation\">(</span>num<span class=\"token punctuation\">,</span> product<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">if</span> num <span class=\"token operator\">==</span> <span class=\"token number\">1</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token keyword\">return</span> product</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token keyword\">return</span> fact_iter<span class=\"token punctuation\">(</span>num <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> num <span class=\"token operator\">*</span> product<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>fact<span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># 120</span></pre></td></tr></table></figure><p>ä¸¤è€…çš„åŒºåˆ«åœ¨äºï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># é€’å½’æ–¹å¼ï¼š</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>fact<span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token number\">3</span> <span class=\"token operator\">*</span> fact<span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token number\">3</span> <span class=\"token operator\">*</span> <span class=\"token punctuation\">(</span><span class=\"token number\">2</span> <span class=\"token operator\">*</span> fact<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token number\">3</span> <span class=\"token operator\">*</span> <span class=\"token punctuation\">(</span><span class=\"token number\">2</span> <span class=\"token operator\">*</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token number\">3</span> <span class=\"token operator\">*</span> <span class=\"token number\">2</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token number\">6</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token comment\"># å°¾é€’å½’æ–¹å¼ï¼š</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>fact_iter<span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>fact_iter<span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>fact_iter<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">6</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token number\">6</span></pre></td></tr></table></figure><h3 id=\"é«˜çº§ç‰¹æ€§\"><a class=\"anchor\" href=\"#é«˜çº§ç‰¹æ€§\">#</a> é«˜çº§ç‰¹æ€§</h3>\n<h4 id=\"åˆ‡ç‰‡\"><a class=\"anchor\" href=\"#åˆ‡ç‰‡\">#</a> åˆ‡ç‰‡</h4>\n<p>åœ¨ Python ä¸­ï¼Œå¯ä»¥é€šè¿‡åˆ‡ç‰‡æˆªå–æ•°ç»„ä¸­ä»»æ„ä»»æ„ä½ç½®çš„å…ƒç´ ã€‚</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>arr <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    arr<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>arr<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">:</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># [0, 1, 2]</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>arr<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># [0, 1, 2]</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>arr<span class=\"token punctuation\">[</span><span class=\"token number\">10</span><span class=\"token punctuation\">:</span><span class=\"token number\">14</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># [10, 11, 12, 13]</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>arr<span class=\"token punctuation\">[</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># [99] # å€’æ•°ç¬¬ä¸€ä¸ªå…ƒç´ </span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>arr<span class=\"token punctuation\">[</span><span class=\"token operator\">-</span><span class=\"token number\">4</span><span class=\"token punctuation\">:</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># [96, 97, 98]</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>arr<span class=\"token punctuation\">[</span><span class=\"token operator\">-</span><span class=\"token number\">4</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># [96, 97, 98, 99] # å€’æ•°å››ä¸ªå‚æ•°</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>arr<span class=\"token punctuation\">[</span><span class=\"token operator\">-</span><span class=\"token number\">4</span><span class=\"token punctuation\">:</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># []</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>arr<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token number\">10</span><span class=\"token punctuation\">:</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># [0, 2, 4, 6, 8] # å‰ 10 ä¸ªæ•°ä¸­ï¼Œæ¯ 3 ä¸ªæ•°å–ä¸€ä¸ª</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>arr<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># æ‹·è´åŸæ•°ç»„</span></pre></td></tr></table></figure><blockquote>\n<p>å€’æ•°ç¬¬ä¸€ä¸ªå…ƒç´ çš„ç´¢å¼•æ˜¯ -1ã€‚</p>\n</blockquote>\n<p>å­—ç¬¦ä¸²å’Œ tuple ä¹Ÿæ˜¯çœ‹åšæ˜¯ä¸€ç§ list ï¼Œå› æ­¤å®ƒä»¬åŒæ ·æ”¯æŒåˆ‡ç‰‡æ“ä½œï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># (0, 1, 2)</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'PYTHON'</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># PYT</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'PYTHON'</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token number\">5</span><span class=\"token punctuation\">:</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># PTO</span></pre></td></tr></table></figure><p>åœ¨å¾ˆå¤šç¼–ç¨‹è¯­è¨€ä¸­ï¼Œé’ˆå¯¹å­—ç¬¦ä¸²æä¾›äº†å¾ˆå¤šå„ç§æˆªå–å‡½æ•°ï¼ˆä¾‹å¦‚ï¼Œsubstringï¼‰ï¼Œå…¶å®ç›®çš„å°±æ˜¯å¯¹å­—ç¬¦ä¸²åˆ‡ç‰‡ã€‚Python æ²¡æœ‰é’ˆå¯¹å­—ç¬¦ä¸²çš„æˆªå–å‡½æ•°ï¼Œä½†å¯ä»¥ç›´æ¥ä½¿ç”¨åˆ‡ç‰‡æ–¹å¼å®ç°ã€‚</p>\n<h4 id=\"è¿­ä»£\"><a class=\"anchor\" href=\"#è¿­ä»£\">#</a> è¿­ä»£</h4>\n<p>å¯¹äºä¸€ä¸ª list æˆ– tuple ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å¾ªç¯æ¥è¿›è¡Œéå†ï¼Œè¿™ç§éå†è¢«ç§°ä¸ºè¿­ä»£ã€‚</p>\n<p>åœ¨ Python ä¸­ï¼Œè¿­ä»£æ˜¯é€šè¿‡  <code>for ... in</code>  æ¥å®Œæˆçš„ï¼Œå®ƒæ—¢å¯ä»¥è¿­ä»£ä¸€ä¸ª list å’Œ tuple ï¼Œä¹Ÿå¯ä»¥è¿­ä»£å­—ç¬¦ä¸²ã€‚</p>\n<p>è€Œä¸”åœ¨ Python ä¸­ï¼Œç¨‹åºåªéœ€è¦å…³æ³¨å¯¹è±¡æ˜¯å¦å¯è¿­ä»£ï¼Œè€Œä¸éœ€è¦å…³æ³¨è¿­ä»£å¯¹è±¡çš„ç±»å‹ï¼Œåˆ¤æ–­å¯¹è±¡æ˜¯å¦å¯è¿­ä»£ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">from</span> collections<span class=\"token punctuation\">.</span>abc <span class=\"token keyword\">import</span> Iterable</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">isinstance</span><span class=\"token punctuation\">(</span><span class=\"token string\">'abc'</span><span class=\"token punctuation\">,</span> Iterable<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># True</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">isinstance</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> Iterable<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># True</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">isinstance</span><span class=\"token punctuation\">(</span><span class=\"token number\">123</span><span class=\"token punctuation\">,</span> Iterable<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># False # æ•´æ•°ä¸å¯è¿­ä»£</span></pre></td></tr></table></figure><p>å¦å¤–ï¼ŒPython ä¹Ÿå†…ç½®äº†ä¸€ä¸ª  <code>enumerate</code>  å‡½æ•°ï¼Œå¯ä»¥å°† list å˜ä¸ºä¸€ä¸ª  <code>ç´¢å¼•-å…ƒç´ </code>  å¯¹ï¼Œè¿™æ ·å°±å¯ä»¥åœ¨ <code>for</code>  å¾ªç¯ä¸­åŒæ—¶è¿­ä»£ç´¢å¼•å’Œå…ƒç´ æœ¬èº«ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">for</span> i<span class=\"token punctuation\">,</span> v <span class=\"token keyword\">in</span> <span class=\"token builtin\">enumerate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">'A'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'B'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'C'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">,</span> v<span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>Python ä¹Ÿå¯ä»¥åŒæ—¶éå†å¤šä¸ªå†…éƒ¨å…ƒç´ ï¼Œä½†éœ€è¦æ³¨æ„ä¸ªæ•°éœ€è¦å®Œå…¨åŒ¹é…ï¼Œå¦åˆ™ä¼šæŠ¥é”™ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">for</span> x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">,</span> z <span class=\"token keyword\">in</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">9</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">,</span> z<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">for</span> x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">,</span> z <span class=\"token keyword\">in</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">9</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span>  <span class=\"token comment\"># ValueError: not enough values to unpack</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">,</span> z<span class=\"token punctuation\">)</span></pre></td></tr></table></figure><h4 id=\"åˆ—è¡¨ç”Ÿæˆå¼\"><a class=\"anchor\" href=\"#åˆ—è¡¨ç”Ÿæˆå¼\">#</a> åˆ—è¡¨ç”Ÿæˆå¼</h4>\n<p>åˆ—è¡¨ç”Ÿæˆå¼å³  <code>List Comprehensions</code>  ï¼Œæ˜¯ Python å†…ç½®çš„éå¸¸ç®€å•å´å¼ºå¤§çš„å¯ä»¥ç”¨æ¥åˆ›å»º list çš„ç”Ÿæˆå¼ã€‚</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>x <span class=\"token operator\">*</span> x <span class=\"token keyword\">for</span> x <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">11</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># [1, 4, 9, 16, 25, 36, 49, 64, 81, 100]</span></pre></td></tr></table></figure><p>for å¾ªç¯åé¢è¿˜å¯ä»¥åŠ ä¸Šæ¡ä»¶åˆ¤æ–­ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>x <span class=\"token operator\">*</span> x <span class=\"token keyword\">for</span> x <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">11</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">if</span> x <span class=\"token operator\">%</span> <span class=\"token number\">2</span> <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># [4, 16, 36, 64, 100]</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>x <span class=\"token operator\">*</span> <span class=\"token number\">2</span> <span class=\"token keyword\">if</span> x <span class=\"token operator\">></span> <span class=\"token number\">5</span> <span class=\"token keyword\">else</span> x <span class=\"token operator\">*</span> x <span class=\"token keyword\">for</span> x <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">11</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">if</span> x <span class=\"token operator\">%</span> <span class=\"token number\">2</span> <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># [4, 16, 12, 16, 20]</span></pre></td></tr></table></figure><blockquote>\n<p>æ³¨æ„ï¼šåœ¨åˆ—è¡¨ç”Ÿæˆå¼ä¸­ï¼Œ for åé¢çš„æ¡ä»¶åˆ¤æ–­çš„ä½œç”¨æ˜¯è¿›è¡Œç­›é€‰ï¼Œæ‰€ä»¥ä¸èƒ½å¸¦æœ‰  <code>elif</code>  æˆ–  <code>else</code>  åˆ¤æ–­ã€‚è€Œ for å‰é¢ä¹Ÿå¯ä»¥ä½¿ç”¨  <code>if</code>  è¯­å¥ï¼Œä½†å¦‚æœæ˜¯åœ¨ for å‰é¢æ·»åŠ æ¡ä»¶åˆ¤æ–­ï¼Œå®ƒçš„ä½œç”¨åˆ™æ˜¯ä½œä¸ºä¸€ä¸ªè¡¨è¾¾å¼ï¼Œè¿™æ—¶å®ƒå¿…é¡»æœ‰  <code>else</code>  è¯­å¥ï¼Œä»¥ä¾¿èƒ½å¤Ÿä¿è¯æ‰€æœ‰çš„æƒ…å†µéƒ½å¾—åˆ°å¤„ç†ã€‚</p>\n<p>åœ¨ä¸€ä¸ªåˆ—è¡¨ç”Ÿæˆå¼ä¸­ï¼Œ <code>for</code>  å‰é¢çš„  <code>if ... else</code>  æ˜¯è¡¨è¾¾å¼ï¼Œè€Œ  <code>for</code>  åé¢çš„  <code>if</code>  æ˜¯è¿‡æ»¤æ¡ä»¶ï¼Œä¸èƒ½å¸¦  <code>else</code> ã€‚</p>\n</blockquote>\n<p>è¿˜å¯ä»¥ä½¿ç”¨å¤šä¸ª for å¾ªç¯ç”Ÿæˆå…¨æ’åˆ—ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>a <span class=\"token operator\">+</span> b <span class=\"token operator\">+</span> c <span class=\"token keyword\">for</span> a <span class=\"token keyword\">in</span> <span class=\"token string\">'BC'</span> <span class=\"token keyword\">for</span> b <span class=\"token keyword\">in</span> <span class=\"token string\">'12'</span> <span class=\"token keyword\">for</span> c <span class=\"token keyword\">in</span> <span class=\"token string\">'ã‚ã†'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\"># ['B1 ã‚ ', 'B1 ã† ', 'B2 ã‚ ', 'B2 ã† ', 'C1 ã‚ ', 'C1 ã† ', 'C2 ã‚ ', 'C2 ã† ']</span></pre></td></tr></table></figure><p>è¿ç”¨åˆ—è¡¨ç”Ÿæˆå¼ï¼Œå¯ä»¥å†™å‡ºéå¸¸ç®€æ´çš„ä»£ç ã€‚ä¾‹å¦‚ï¼Œåˆ—å‡ºå½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶å’Œç›®å½•åï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> os</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>d <span class=\"token keyword\">for</span> d <span class=\"token keyword\">in</span> os<span class=\"token punctuation\">.</span>listdir<span class=\"token punctuation\">(</span><span class=\"token string\">'.'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># ['.idea', 'main.py', 'venv']</span></pre></td></tr></table></figure><p>for å¾ªç¯å…¶å®å¯ä»¥åŒæ—¶ä½¿ç”¨ä¸¤ä¸ªç”šè‡³å¤šä¸ªå˜é‡ï¼Œæ¯”å¦‚ dict çš„ items () å¯ä»¥åŒæ—¶è¿­ä»£ key å’Œ valueï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>d <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span><span class=\"token string\">'x'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'A'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'y'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'B'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'z'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'C'</span><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">for</span> k<span class=\"token punctuation\">,</span> v <span class=\"token keyword\">in</span> d<span class=\"token punctuation\">.</span>items<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>k<span class=\"token punctuation\">,</span> <span class=\"token string\">'='</span><span class=\"token punctuation\">,</span> v<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>k <span class=\"token operator\">+</span> <span class=\"token string\">'='</span> <span class=\"token operator\">+</span> v <span class=\"token keyword\">for</span> k<span class=\"token punctuation\">,</span> v <span class=\"token keyword\">in</span> d<span class=\"token punctuation\">.</span>items<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># ['x=A', 'y=B', 'z=C']</span></pre></td></tr></table></figure><p>å¦å¤–ï¼Œè¿˜å¯ä»¥å¯¹å­—ç¬¦ä¸²è¿›è¡Œå¤„ç†ï¼Œä¾‹å¦‚ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>L <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'Hello'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'World'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'IBM'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Apple'</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>s<span class=\"token punctuation\">.</span>lower<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">for</span> s <span class=\"token keyword\">in</span> L<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># ['hello', 'world', 'ibm', 'apple']</span></pre></td></tr></table></figure><h4 id=\"ç”Ÿæˆå™¨\"><a class=\"anchor\" href=\"#ç”Ÿæˆå™¨\">#</a> ç”Ÿæˆå™¨</h4>\n<p>é€šè¿‡åˆ—è¡¨ç”Ÿæˆå¼ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥åˆ›å»ºä¸€ä¸ªåˆ—è¡¨ã€‚ä½†æ˜¯ï¼Œå—åˆ°å†…å­˜é™åˆ¶ï¼Œåˆ—è¡¨å®¹é‡è‚¯å®šæ˜¯æœ‰é™çš„ã€‚è€Œä¸”ï¼Œåˆ›å»ºä¸€ä¸ªåŒ…å« 100 ä¸‡ä¸ªå…ƒç´ çš„åˆ—è¡¨ï¼Œä¸ä»…å ç”¨å¾ˆå¤§çš„å­˜å‚¨ç©ºé—´ï¼Œå¦‚æœæˆ‘ä»¬ä»…ä»…éœ€è¦è®¿é—®å‰é¢å‡ ä¸ªå…ƒç´ ï¼Œé‚£åé¢ç»å¤§å¤šæ•°å…ƒç´ å ç”¨çš„ç©ºé—´éƒ½ç™½ç™½æµªè´¹äº†ã€‚</p>\n<p>ä½†å¦‚æœåˆ—è¡¨å…ƒç´ å¯ä»¥æŒ‰ç…§æŸç§ç®—æ³•æ¨ç®—å‡ºæ¥ï¼Œé‚£æˆ‘ä»¬å°±å¯ä»¥åœ¨å¾ªç¯çš„è¿‡ç¨‹ä¸­ä¸æ–­æ¨ç®—å‡ºåç»­çš„å…ƒç´ ï¼Œè¿™æ ·å°±ä¸å¿…åˆ›å»ºå®Œæ•´çš„ listï¼Œä»è€ŒèŠ‚çœå¤§é‡çš„ç©ºé—´ã€‚åœ¨ Python ä¸­ï¼Œè¿™ç§ä¸€è¾¹å¾ªç¯ä¸€è¾¹è®¡ç®—çš„æœºåˆ¶ï¼Œç§°ä¸ºç”Ÿæˆå™¨ï¼š <code>generator</code>  ã€‚</p>\n<p>è¦åˆ›å»ºä¸€ä¸ª generatorï¼Œæœ‰å¾ˆå¤šç§æ–¹æ³•ã€‚ç¬¬ä¸€ç§æ–¹æ³•å¾ˆç®€å•ï¼Œåªè¦æŠŠä¸€ä¸ªåˆ—è¡¨ç”Ÿæˆå¼çš„  <code>[]</code>  æ”¹æˆ  <code>()</code>  ï¼Œå°±åˆ›å»ºäº†ä¸€ä¸ª generatorï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>d <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span><span class=\"token string\">'x'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'A'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'y'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'B'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'z'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'C'</span><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>g <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>k <span class=\"token operator\">+</span> <span class=\"token string\">'='</span> <span class=\"token operator\">+</span> v <span class=\"token keyword\">for</span> k<span class=\"token punctuation\">,</span> v <span class=\"token keyword\">in</span> d<span class=\"token punctuation\">.</span>items<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>g<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># &lt;generator object &lt;genexpr> at 0x00000210690ADBA0></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">next</span><span class=\"token punctuation\">(</span>g<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># x=A</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>g<span class=\"token punctuation\">.</span>__next__<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># y=B</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">next</span><span class=\"token punctuation\">(</span>g<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># z=C</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">next</span><span class=\"token punctuation\">(</span>g<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># æŠ›å‡ºå¼‚å¸¸ StopIteration</span></pre></td></tr></table></figure><p>generator å¯ä»¥é€šè¿‡å®ä¾‹ä¸­  <code>next()</code>  çš„æ–¹å¼ä¾æ¬¡å–å‡ºç›¸åº”çš„å€¼ï¼Œä½†è¿™ç§åšæ³•è¾ƒä¸ºç¬¨æ‹™ï¼Œè€Œä¸”è¶Šç•Œæ—¶ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œç”±äº generator ä¹Ÿæ˜¯å¯éå†å¯¹è±¡ï¼Œå› æ­¤æ›´åŠ å¸¸è§çš„æ˜¯ç»“åˆå¾ªç¯è¿›è¡Œä½¿ç”¨ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>d <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span><span class=\"token string\">'x'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'A'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'y'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'B'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'z'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'C'</span><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>g <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>k <span class=\"token operator\">+</span> <span class=\"token string\">'='</span> <span class=\"token operator\">+</span> v <span class=\"token keyword\">for</span> k<span class=\"token punctuation\">,</span> v <span class=\"token keyword\">in</span> d<span class=\"token punctuation\">.</span>items<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">for</span> n <span class=\"token keyword\">in</span> g<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>å¦ä¸€ç§åˆ›å»º generator çš„æ–¹æ³•ï¼š</p>\n<p>è‘—åçš„æ–æ³¢æ‹‰å¥‘æ•°åˆ—ï¼ˆFibonacciï¼‰ï¼Œé™¤ç¬¬ä¸€ä¸ªå’Œç¬¬äºŒä¸ªæ•°å¤–ï¼Œä»»æ„ä¸€ä¸ªæ•°éƒ½å¯ç”±å‰ä¸¤ä¸ªæ•°ç›¸åŠ å¾—åˆ°ï¼š</p>\n<p>1, 1, 2, 3, 5, 8, 13, 21, 34, ...</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># å‡½æ•°å®ç°æ–æ³¢æ‹‰å¥‘æ•°åˆ—</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">fib</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">max</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    n<span class=\"token punctuation\">,</span> a<span class=\"token punctuation\">,</span> b <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">while</span> n <span class=\"token operator\">&lt;</span> <span class=\"token builtin\">max</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>b<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        a<span class=\"token punctuation\">,</span> b <span class=\"token operator\">=</span> b<span class=\"token punctuation\">,</span> a <span class=\"token operator\">+</span> b</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        n <span class=\"token operator\">=</span> n <span class=\"token operator\">+</span> <span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token string\">'done'</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>fib<span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>å°†ä¸Šè¿°ç®—æ³•ä¿®æ”¹ä¸ºä¸€ä¸ªç”Ÿæˆå™¨ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># æ–æ³¢æ‹‰å¥‘æ•°åˆ—ç”Ÿæˆå™¨</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">fib</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">max</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    n<span class=\"token punctuation\">,</span> a<span class=\"token punctuation\">,</span> b <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">while</span> n <span class=\"token operator\">&lt;</span> <span class=\"token builtin\">max</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token keyword\">yield</span> b  <span class=\"token comment\"># yield ä¸­æ–­æ‰§è¡Œå¹¶è¿”å›æ¯è½®æ‰§è¡Œçš„ç»“æœ</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        a<span class=\"token punctuation\">,</span> b <span class=\"token operator\">=</span> b<span class=\"token punctuation\">,</span> a <span class=\"token operator\">+</span> b</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        n <span class=\"token operator\">=</span> n <span class=\"token operator\">+</span> <span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token string\">'done'</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token comment\"># è¿™é‡Œå¾—åˆ°çš„ fib (10) æ˜¯ä¸€ä¸ª generator å¯¹è±¡</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token keyword\">for</span> n <span class=\"token keyword\">in</span> fib<span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>è¿™å°±æ˜¯ç¬¬äºŒç§åˆ›å»º generator çš„æ–¹æ³•ï¼Œå¦‚æœä¸€ä¸ªå‡½æ•°ä¸­å®šä¹‰äº†  <code>yield</code>  å­—æ®µï¼Œè¿™ä¸ªå‡½æ•°å°±ä¸å†æ˜¯ä¸€ä¸ªæ™®é€šå‡½æ•°ï¼Œè€Œæ˜¯ä¸€ä¸ªç”Ÿæˆå™¨ã€‚</p>\n<p>å‡½æ•°å’Œç”Ÿæˆå™¨æœ‰ä¸€ä¸ªè¾ƒä¸ºçªå‡ºçš„åŒºåˆ«ï¼šå‡½æ•°æ˜¯æŒ‰ç…§é¡ºåºæ‰§è¡Œï¼Œå¦‚æœé‡åˆ° return è¯­å¥æˆ–æ‰§è¡Œåˆ°æœ€åä¸€è¡Œè¯­å¥å°±è¿”å›ï¼›è€Œç”Ÿæˆå™¨å´æ˜¯åœ¨æ¯æ¬¡è°ƒç”¨  <code>next()</code>  æ–¹æ³•æ—¶æ‰æ‰§è¡Œï¼Œé‡åˆ°  <code>yield</code>  è¯­å¥æ—¶å°±è¿”å›ï¼Œè€Œå½“å†æ¬¡æ‰§è¡Œ  <code>next()</code>  æ—¶ï¼Œå°±ä»ä¸Šä¸€æ¬¡  <code>yield</code>  è¿”å›è¯­å¥å¤„ç»§ç»­æ‰§è¡Œã€‚</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># åœ¨è¿™é‡Œï¼Œæ³¨é‡Šä¸­çš„ [ ] è¡¨ç¤ºæ‰§è¡Œé¡ºåºï¼Œå…¶åè¡¨ç¤ºè¾“å‡ºå†…å®¹</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">odd</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'step 1'</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># [1] step 1</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">yield</span> <span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'step 2'</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># [3] step 2</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">yield</span> <span class=\"token number\">3</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'step 3'</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># [5] step 3</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token keyword\">yield</span> <span class=\"token number\">5</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>odd <span class=\"token operator\">=</span> odd<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">next</span><span class=\"token punctuation\">(</span>odd<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># [2] 1</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">next</span><span class=\"token punctuation\">(</span>odd<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># [4] 3</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">next</span><span class=\"token punctuation\">(</span>odd<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># [6] 5</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token comment\"># ä¹Ÿå¯ä»¥ä½¿ç”¨å¾ªç¯è¿›è¡Œéå†</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token comment\"># for n in odd():</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token comment\">#     print(n)</span></pre></td></tr></table></figure><p>å¦‚æœåœ¨å–å‡ºç”Ÿæˆå™¨ä¸­çš„æ‰€æœ‰å€¼ä¹‹åï¼Œå¸Œæœ›è·å¾—ç”Ÿæˆå™¨ä¸­è¿”å›è¯­å¥å®šä¹‰çš„å†…å®¹ï¼Œå¯ä»¥é€šè¿‡å¼‚å¸¸æ•è·çš„æ–¹å¼ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">fib</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">max</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    n<span class=\"token punctuation\">,</span> a<span class=\"token punctuation\">,</span> b <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">while</span> n <span class=\"token operator\">&lt;</span> <span class=\"token builtin\">max</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token keyword\">yield</span> b  <span class=\"token comment\"># yield ä¸­æ–­æ‰§è¡Œå¹¶è¿”å›æ¯è½®æ‰§è¡Œçš„ç»“æœ</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        a<span class=\"token punctuation\">,</span> b <span class=\"token operator\">=</span> b<span class=\"token punctuation\">,</span> a <span class=\"token operator\">+</span> b</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        n <span class=\"token operator\">=</span> n <span class=\"token operator\">+</span> <span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token string\">'done'</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>fib <span class=\"token operator\">=</span> fib<span class=\"token punctuation\">(</span><span class=\"token number\">6</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token keyword\">while</span> <span class=\"token boolean\">True</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token keyword\">try</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        x <span class=\"token operator\">=</span> <span class=\"token builtin\">next</span><span class=\"token punctuation\">(</span>fib<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'g:'</span><span class=\"token punctuation\">,</span> x<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token keyword\">except</span> StopIteration <span class=\"token keyword\">as</span> e<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Generator return value:'</span><span class=\"token punctuation\">,</span> e<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># è·å–åˆ°ç”Ÿæˆå™¨ä¸­ return è¯­å¥çš„è¿”å›å€¼ã€‚</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        <span class=\"token keyword\">break</span></pre></td></tr></table></figure><h4 id=\"è¿­ä»£å™¨\"><a class=\"anchor\" href=\"#è¿­ä»£å™¨\">#</a> è¿­ä»£å™¨</h4>\n<p>åœ¨å‰æ–‡çš„<strong>è¿­ä»£</strong>éƒ¨åˆ†ï¼Œæˆ‘ä»¬å·²ç»æåˆ°è¿‡è¿­ä»£å™¨ï¼Œå¯ä»¥ç›´æ¥ä½œç”¨äº for å¾ªç¯çš„å¯¹è±¡ï¼Œéƒ½è¢«ç§°ä¸ºå¯è¿­ä»£å¯¹è±¡ï¼Œå¹¶ä¸”å¯ä»¥ä½¿ç”¨  <code>isinstance()</code>  å‡½æ•°æ¥åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦å¯è¿­ä»£ã€‚è€Œå…¶å®ï¼Œå¯ä»¥è¢«  <code>next()</code>  å‡½æ•°è°ƒç”¨å¹¶ä¸æ–­è¿”å›ä¸‹ä¸€ä¸ªå€¼çš„å¯¹è±¡ï¼Œå³ä¸ºè¿­ä»£å™¨ï¼ˆIteratorï¼‰ã€‚</p>\n<p>ç”Ÿæˆå™¨éƒ½æ˜¯è¿­ä»£å™¨å¯¹è±¡ï¼Œè€Œæ•°ç»„ã€å­—å…¸ã€å­—ç¬¦ä¸²ç­‰è™½ç„¶å…·æœ‰å¯è¿­ä»£å±æ€§ï¼Œå´å¹¶ä¸æ˜¯è¿­ä»£å™¨å¯¹è±¡ï¼Œè¿™æ˜¯å› ä¸ºè¿­ä»£å™¨å¯¹è±¡å¯ä»¥è¢«  <code>next()</code>  å‡½æ•°ä¸æ–­è·å–ä¸‹ä¸€ä¸ªå€¼ï¼Œä½†å…¶æœ¬èº«å´å¹¶ä¸çŸ¥æ™“å½“å‰åºåˆ—çš„é•¿åº¦ï¼Œåªèƒ½é€šè¿‡  <code>next()</code>  å‡½æ•°å®ç°æŒ‰éœ€è®¡ç®—ä¸‹ä¸€ä¸ªå…ƒç´ ã€‚å› æ­¤ï¼Œè¿­ä»£å™¨çš„è®¡ç®—æ˜¯æƒ°æ€§çš„ï¼Œåªæœ‰åœ¨éœ€è¦è¿”å›ä¸‹ä¸€ä¸ªæ•°æ®çš„æ—¶å€™ï¼Œæ‰ä¼šè¿›è¡Œè®¡ç®—ã€‚</p>\n<blockquote>\n<p>è¿­ä»£å™¨ç”šè‡³å¯ä»¥è¡¨ç¤ºä¸€ä¸ªæ— é™å¤§çš„æ•°æ®æµï¼Œè€Œåˆ—è¡¨ç­‰ç±»å‹åˆ™æ˜¯æœ‰é™çš„ã€‚åˆ¤æ–­æ˜¯å¦æ˜¯è¿­ä»£å™¨å¯¹è±¡å¾ˆç®€å•ï¼Œåªéœ€è¦çŸ¥é“å®ƒæ˜¯å¦æ˜¯å¯ä½œç”¨äº  <code>next()</code>  å‡½æ•°çš„å¯¹è±¡å³å¯ã€‚</p>\n</blockquote>\n<h3 id=\"å‡½æ•°å¼ç¼–ç¨‹\"><a class=\"anchor\" href=\"#å‡½æ•°å¼ç¼–ç¨‹\">#</a> å‡½æ•°å¼ç¼–ç¨‹</h3>\n<p>å‡½æ•°æ˜¯ Python å†…å»ºæ”¯æŒçš„ä¸€ç§å°è£…ï¼Œæˆ‘ä»¬é€šè¿‡æŠŠå¤§æ®µä»£ç æ‹†æˆå‡½æ•°ï¼Œé€šè¿‡ä¸€å±‚ä¸€å±‚çš„å‡½æ•°è°ƒç”¨ï¼Œå°±å¯ä»¥æŠŠå¤æ‚ä»»åŠ¡åˆ†è§£æˆç®€å•çš„ä»»åŠ¡ï¼Œè¿™ç§åˆ†è§£å¯ä»¥ç§°ä¹‹ä¸ºé¢å‘è¿‡ç¨‹çš„ç¨‹åºè®¾è®¡ã€‚å‡½æ•°å°±æ˜¯é¢å‘è¿‡ç¨‹çš„ç¨‹åºè®¾è®¡çš„åŸºæœ¬å•å…ƒã€‚</p>\n<p>è€Œå‡½æ•°å¼ç¼–ç¨‹ï¼ˆFunctional Programmingï¼‰è™½ç„¶ä¹Ÿå¯ä»¥å½’ç»“åˆ°é¢å‘è¿‡ç¨‹çš„ç¨‹åºè®¾è®¡ï¼Œä½†å…¶æ€æƒ³æ›´æ¥è¿‘æ•°å­¦è®¡ç®—ã€‚</p>\n<p>å‡½æ•°å¼ç¼–ç¨‹çš„ä¸€ä¸ªç‰¹ç‚¹å°±æ˜¯ï¼Œå…è®¸æŠŠå‡½æ•°æœ¬èº«ä½œä¸ºå‚æ•°ä¼ å…¥å¦ä¸€ä¸ªå‡½æ•°ï¼Œè¿˜å…è®¸è¿”å›ä¸€ä¸ªå‡½æ•°ï¼</p>\n<p>Python å¯¹å‡½æ•°å¼ç¼–ç¨‹æä¾›éƒ¨åˆ†æ”¯æŒã€‚ç”±äº Python å…è®¸ä½¿ç”¨å˜é‡ï¼Œå› æ­¤ï¼ŒPython ä¸æ˜¯çº¯å‡½æ•°å¼ç¼–ç¨‹è¯­è¨€ã€‚</p>\n<h4 id=\"é«˜é˜¶å‡½æ•°\"><a class=\"anchor\" href=\"#é«˜é˜¶å‡½æ•°\">#</a> é«˜é˜¶å‡½æ•°</h4>\n<p>å‡½æ•°æœ¬èº«å¯ä»¥èµ‹å€¼ç»™ä¸€ä¸ªå˜é‡ï¼Œå³å˜é‡å¯ä»¥æŒ‡å‘å‡½æ•°ã€‚</p>\n<p>å½“ä¸€ä¸ªå˜é‡æŒ‡å‘äº†æŸä¸ªå‡½æ•°ï¼Œé‚£ä¹ˆå°±å¯ä»¥é€šè¿‡è¿™ä¸ªå˜é‡æ¥è°ƒç”¨è¯¥å‡½æ•°ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>f <span class=\"token operator\">=</span> <span class=\"token builtin\">abs</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>f<span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">12</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># 12</span></pre></td></tr></table></figure><p>å…¶å®ï¼Œå‡½æ•°åæœ¬èº«å°±æ˜¯ä¸€ä¸ªæŒ‡å‘å‡½æ•°çš„å˜é‡ï¼Œé‚£ä¹ˆï¼Œè¿™ä¸ªå˜é‡è‡ªç„¶ä¹Ÿå¯ä»¥è¢«é‡æ–°èµ‹å€¼ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">from</span> collections<span class=\"token punctuation\">.</span>abc <span class=\"token keyword\">import</span> Iterable</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token builtin\">abs</span> <span class=\"token operator\">=</span> <span class=\"token builtin\">isinstance</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">abs</span><span class=\"token punctuation\">(</span><span class=\"token string\">'abc'</span><span class=\"token punctuation\">,</span> Iterable<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># True</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">abs</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># æŠ¥é”™ï¼šTypeError</span></pre></td></tr></table></figure><p>ç”±æ­¤å¯çŸ¥ï¼Œå‡½æ•°æœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªå˜é‡ï¼Œåè¿‡æ¥è¯´ï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€ä¸ªå‡½æ•°ç±»å‹çš„å˜é‡ï¼Œè€Œå‡½æ•°æœ¬èº«æ˜¯å¯ä»¥æ¥æ”¶å˜é‡ä½œä¸ºå‚æ•°çš„ï¼Œé‚£ä¹ˆï¼ŒåŒæ ·å‡½æ•°å°±ä¹Ÿå¯ä»¥æ¥æ”¶ä¸€ä¸ªå‡½æ•°ç±»å‹çš„å‚æ•°ã€‚è¿™ç§æ¥æ”¶å‡½æ•°ä½œä¸ºå‚æ•°çš„å‡½æ•°ï¼Œå°±è¢«ç§°ä¸ºé«˜é˜¶å‡½æ•°ï¼Œä¾‹å¦‚ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">add</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">,</span> f<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">return</span> f<span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> f<span class=\"token punctuation\">(</span>y<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>result <span class=\"token operator\">=</span> add<span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">-</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">abs</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># 6</span></pre></td></tr></table></figure><p>æ€»è€Œè¨€ä¹‹ï¼Œ<mark>æŠŠå‡½æ•°ä½œä¸ºå‚æ•°ä¼ å…¥ï¼Œè¿™æ ·çš„å‡½æ•°ç§°ä¸ºé«˜é˜¶å‡½æ•°ï¼Œå‡½æ•°å¼ç¼–ç¨‹å°±æ˜¯æŒ‡è¿™ç§é«˜åº¦æŠ½è±¡çš„ç¼–ç¨‹èŒƒå¼ã€‚</mark></p>\n<h5 id=\"map-reduce\"><a class=\"anchor\" href=\"#map-reduce\">#</a> map / reduce</h5>\n<p>Python å†…å»ºäº†  <code>map()</code>  å’Œ  <code>reduce()</code>  å‡½æ•°ã€‚</p>\n<ol>\n<li>\n<p>map</p>\n<p><code>map()</code>  å‡½æ•°æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œä¸€ä¸ªæ˜¯å‡½æ•°ï¼Œä¸€ä¸ªæ˜¯  <code>Iterable</code> ï¼Œ <code>map</code>  å°†ä¼ å…¥çš„å‡½æ•°ä¾æ¬¡ä½œç”¨åˆ°åºåˆ—çš„æ¯ä¸ªå…ƒç´ ï¼Œå¹¶æŠŠç»“æœä½œä¸ºæ–°çš„  <code>Iterator</code>  è¿”å›ï¼Œä¾‹å¦‚ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">f</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">return</span> x <span class=\"token operator\">*</span> x</pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>r <span class=\"token operator\">=</span> <span class=\"token builtin\">map</span><span class=\"token punctuation\">(</span>f<span class=\"token punctuation\">,</span> <span class=\"token builtin\">list</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># è¿”å›å€¼æ˜¯ä¸€ä¸ª Iterator å¯¹è±¡</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">list</span><span class=\"token punctuation\">(</span>r<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># [1, 4, 9, 16, 25, 36, 49, 64, 81]</span></pre></td></tr></table></figure><p>é€šè¿‡ map ä¼ é€’ä¸åŒçš„å‡½æ•°å‚æ•°ï¼Œå¯ä»¥å®ç°å¯¹æ•°ç»„çš„ä¸åŒå¤„ç†ã€‚</p>\n</li>\n<li>\n<p>reduce</p>\n<p><code>reduce</code>  æŠŠä¸€ä¸ªå‡½æ•°ä½œç”¨åœ¨ä¸€ä¸ªåºåˆ—ä¸Šï¼Œè¿™ä¸ªå‡½æ•°å¿…é¡»æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œ <code>reduce</code>  ä¼šæŠŠç»“æœç»§ç»­å’Œåºåˆ—çš„ä¸‹ä¸€ä¸ªå…ƒç´ åšç´¯ç§¯è®¡ç®—ï¼Œå…¶æ•ˆæœå°±æ˜¯ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token builtin\">reduce</span><span class=\"token punctuation\">(</span>f<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>x1<span class=\"token punctuation\">,</span> x2<span class=\"token punctuation\">,</span> x3<span class=\"token punctuation\">,</span> x4<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span> f<span class=\"token punctuation\">(</span>f<span class=\"token punctuation\">(</span>f<span class=\"token punctuation\">(</span>x1<span class=\"token punctuation\">,</span> x2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> x3<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> x4<span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>ä¾‹å¦‚ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">from</span> functools <span class=\"token keyword\">import</span> <span class=\"token builtin\">reduce</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">f</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>y <span class=\"token operator\">-</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">**</span> x</pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>result <span class=\"token operator\">=</span> <span class=\"token builtin\">reduce</span><span class=\"token punctuation\">(</span>f<span class=\"token punctuation\">,</span> <span class=\"token builtin\">list</span><span class=\"token punctuation\">(</span>x <span class=\"token keyword\">for</span> x <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">7</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">if</span> x <span class=\"token operator\">%</span> <span class=\"token number\">2</span> <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>f<span class=\"token punctuation\">(</span>f<span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">6</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># 256</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token comment\"># f(f(2, 4), 6) ==> (6 - 2) ** ((4 - 2) ** 2) ==> 4 ** (2 ** 2) ==> 4 ** 4 ==> 256</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># 256</span></pre></td></tr></table></figure><p>å½“ç„¶ï¼Œmap å’Œ reduce ä¹Ÿå¯ä»¥è¿›è¡Œç»„åˆä½¿ç”¨ã€‚</p>\n</li>\n</ol>\n<h5 id=\"filter\"><a class=\"anchor\" href=\"#filter\">#</a> filter</h5>\n<p>Python å†…å»ºçš„  <code>filter()</code>  å‡½æ•°ç”¨äºè¿‡æ»¤åºåˆ—ï¼Œå®ƒå’Œ  <code>map()</code>  ç±»ä¼¼ï¼Œä¹Ÿæ¥æ”¶ä¸€ä¸ªå‡½æ•°å’Œä¸€ä¸ªåºåˆ—ã€‚ä½†ä¸åŒçš„æ˜¯ï¼Œ <code>filter()</code>  æŠŠä¼ å…¥çš„å‡½æ•°ä¾æ¬¡ä½œç”¨äºæ¯ä¸ªå…ƒç´ ï¼Œç„¶åæ ¹æ®è¿”å›å€¼æ˜¯  <code>True</code>  è¿˜æ˜¯  <code>False</code>  å†³å®šä¿ç•™è¿˜æ˜¯ä¸¢å¼ƒè¯¥å…ƒç´ ï¼Œä¾‹å¦‚ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># è¿‡æ»¤æ‰å¥‡æ•°ï¼Œä¿ç•™å¶æ•°</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">is_odd</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">return</span> x <span class=\"token operator\">%</span> <span class=\"token number\">2</span> <span class=\"token operator\">==</span> <span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>f <span class=\"token operator\">=</span> <span class=\"token builtin\">filter</span><span class=\"token punctuation\">(</span>is_odd<span class=\"token punctuation\">,</span> <span class=\"token builtin\">list</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">list</span><span class=\"token punctuation\">(</span>f<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># [1, 3, 5, 7, 9]</span></pre></td></tr></table></figure><p>é™¤äº†ä¸Šè¿°ç¤ºä¾‹çš„ç”¨æ³•ï¼Œè¿˜å¯ä»¥æœ‰å¾ˆå¤šç”¨é€”ï¼Œä¾‹å¦‚ï¼šå»é™¤å­—ç¬¦ä¸²ä¸­çš„ç‰¹æ®Šå­—ç¬¦ã€ç§»é™¤æ•°ç»„ä¸­çš„ç©ºå…ƒç´ ã€ä¿ç•™æ•°ç»„ä¸­å…·æœ‰æŸç§ç‰¹å¾çš„å…ƒç´ ç­‰ï¼Œæ€»ä¹‹ï¼Œfilter çš„ä¸»è¦ä½œç”¨åœ¨äºå¯¹åºåˆ—è¿›è¡Œè¿‡æ»¤å’Œèµ›é€‰ã€‚</p>\n<blockquote>\n<p>map å’Œ filter è¿”å›çš„éƒ½æ˜¯ Iterator ã€‚ç”±äºè¿­ä»£å™¨æ˜¯æƒ°æ€§åºåˆ—ï¼Œå› æ­¤ï¼Œè¦å¼ºè¿«å…¶å®Œæˆè®¡ç®—ç»“æœï¼Œéœ€è¦ä½¿ç”¨  <code>list()</code>  å‡½æ•°è·å–æ‰€æœ‰ç»“æœå¹¶è¿”å›æ•°ç»„ã€‚</p>\n</blockquote>\n<p>å¯ä»¥å°è¯•ç”¨å·²æœ‰çŸ¥è¯†æ±‚å‡º 100 ä»¥å†…æ‰€æœ‰ç´ æ•°ã€‚</p>\n<h5 id=\"sorted\"><a class=\"anchor\" href=\"#sorted\">#</a> sorted</h5>\n<p>æ’åºä¹Ÿæ˜¯åœ¨ç¨‹åºä¸­ç»å¸¸ç”¨åˆ°çš„ç®—æ³•ã€‚æ— è®ºä½¿ç”¨å†’æ³¡æ’åºè¿˜æ˜¯å¿«é€Ÿæ’åºï¼Œæ’åºçš„æ ¸å¿ƒæ˜¯æ¯”è¾ƒä¸¤ä¸ªå…ƒç´ çš„å¤§å°ã€‚å¦‚æœæ˜¯æ•°å­—ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥æ¯”è¾ƒï¼Œä½†å¦‚æœæ˜¯å­—ç¬¦ä¸²æˆ–è€…ä¸¤ä¸ª dict æ¯”è¾ƒçš„è¿‡ç¨‹å°±å¿…é¡»é€šè¿‡å‡½æ•°æŠ½è±¡å‡ºæ¥ã€‚</p>\n<p>Python å†…ç½®çš„  <code>sorted()</code>  å‡½æ•°å°±å¯ä»¥å¯¹ list è¿›è¡Œæ’åºï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">sorted</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">36</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">-</span><span class=\"token number\">12</span><span class=\"token punctuation\">,</span> <span class=\"token number\">9</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">-</span><span class=\"token number\">21</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># [-21, -12, 5, 9, 36]</span></pre></td></tr></table></figure><p>ä½†  <code>sort()</code>  ä½œä¸ºä¸€ä¸ªé«˜é˜¶å‡½æ•°ï¼Œé™¤äº†é»˜è®¤çš„æ’åºä¹‹å¤–ï¼Œå®ƒè¿˜å¯ä»¥æ¥æ”¶ä¸€ä¸ª  <code>key</code>  æŒ‡å®šçš„å‡½æ•°æ¥å®ç°è‡ªå®šä¹‰çš„æ’åºï¼Œä¾‹å¦‚ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">f</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">return</span> x <span class=\"token operator\">**</span> x <span class=\"token operator\">-</span> x</pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\"># æŒ‰ç»å¯¹å€¼å¤§å°æ’åº</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">sorted</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">36</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">-</span><span class=\"token number\">12</span><span class=\"token punctuation\">,</span> <span class=\"token number\">9</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">-</span><span class=\"token number\">21</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> key<span class=\"token operator\">=</span><span class=\"token builtin\">abs</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># [5, 9, -12, -21, 36]</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token comment\"># æŒ‰è‡ªå®šä¹‰å‡½æ•°æ–¹å¼è¿›è¡Œæ’åº</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">sorted</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">36</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">-</span><span class=\"token number\">12</span><span class=\"token punctuation\">,</span> <span class=\"token number\">9</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">-</span><span class=\"token number\">21</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> key<span class=\"token operator\">=</span>f<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># [-12, -21, 5, 9, 36]</span></pre></td></tr></table></figure><p>è€Œå¦‚æœè¦å¯¹å­—ç¬¦ä¸²è¿›è¡Œæ’åºï¼Œsort é»˜è®¤ä¼šå¯¹å­—ç¬¦ä¸²çš„ ASCII ç è¿›è¡Œæ¯”è¾ƒã€‚</p>\n<p>è€Œè¦è¿›è¡Œåå‘æ’åºï¼Œåªéœ€è¦æŒ‡å®šä¸€ä¸ª  <code>reverse=True</code>  å‚æ•°å³å¯ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">sorted</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">36</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">-</span><span class=\"token number\">12</span><span class=\"token punctuation\">,</span> <span class=\"token number\">9</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">-</span><span class=\"token number\">21</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># [-21, -12, 5, 9, 36]</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">sorted</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">36</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">-</span><span class=\"token number\">12</span><span class=\"token punctuation\">,</span> <span class=\"token number\">9</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">-</span><span class=\"token number\">21</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> reverse<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># [36, 9, 5, -12, -21]</span></pre></td></tr></table></figure><h4 id=\"è¿”å›å‡½æ•°\"><a class=\"anchor\" href=\"#è¿”å›å‡½æ•°\">#</a> è¿”å›å‡½æ•°</h4>\n<p>é«˜é˜¶å‡½æ•°é™¤äº†å¯ä»¥æ¥å—å‡½æ•°ä½œä¸ºå‚æ•°å¤–ï¼Œè¿˜å¯ä»¥æŠŠå‡½æ•°ä½œä¸ºç»“æœå€¼è¿”å›ï¼Œä¾‹å¦‚ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># å¯å˜å‚æ•°æ±‚å’Œçš„æ‡’æ‰§è¡Œæ–¹å¼</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">lazy_sum</span><span class=\"token punctuation\">(</span><span class=\"token operator\">*</span>args<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">def</span> <span class=\"token function\">sum</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        ax <span class=\"token operator\">=</span> <span class=\"token number\">0</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token keyword\">for</span> n <span class=\"token keyword\">in</span> args<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>            ax <span class=\"token operator\">=</span> ax <span class=\"token operator\">+</span> n</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token keyword\">return</span> ax</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token builtin\">sum</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>f <span class=\"token operator\">=</span> lazy_sum<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">7</span><span class=\"token punctuation\">,</span> <span class=\"token number\">9</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token comment\"># è¿”å›çš„å‡½æ•°å¹¶ä¸æ˜¯ç«‹å³æ‰§è¡Œ</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>f<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># &lt;function lazy_sum.&lt;locals>.sum at 0x000001875C48EB80></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token comment\"># è€Œæ˜¯ f () å‡½æ•°è°ƒç”¨æ—¶æ‰æ‰§è¡Œ</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>f<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># 25</span></pre></td></tr></table></figure><p>è¿™ç§åœ¨å‡½æ•°ä¸­å®šä¹‰çš„å‡½æ•°ï¼Œç§°ä¸ºå†…éƒ¨å‡½æ•°ï¼Œå†…éƒ¨å‡½æ•°å¯ä»¥å¼•ç”¨å¤–éƒ¨å‡½æ•°çš„å‚æ•°å’Œå±€éƒ¨å˜é‡ï¼Œå½“å¤–éƒ¨å‡½æ•°è¢«è°ƒç”¨å¹¶è¿”å›å†…éƒ¨å‡½æ•°æ—¶ï¼Œç›¸å…³çš„å‚æ•°å’Œå˜é‡éƒ½ä¼šä¿å­˜åœ¨è¿”å›çš„å‡½æ•°ä¸­ï¼Œè¿™ç§è¢«ç§°ä¸º<strong>é—­åŒ…</strong>çš„ç»“æ„åœ¨è®¸å¤šç¨‹åºä¸­éƒ½æœ‰å¹¿æ³›çš„åº”ç”¨ã€‚</p>\n<p>å¦å¤–ï¼Œæ¯æ¬¡è°ƒç”¨å¤–éƒ¨å‡½æ•°æ—¶ï¼Œè¿”å›çš„å†…éƒ¨å‡½æ•°éƒ½æ˜¯ä¸€ä¸ªæ–°çš„å®ä¾‹ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">fn</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">def</span> <span class=\"token function\">f</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token builtin\">abs</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">return</span> f</pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>f1 <span class=\"token operator\">=</span> fn<span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>f2 <span class=\"token operator\">=</span> fn<span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>f1 <span class=\"token operator\">==</span> f2<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># False</span></pre></td></tr></table></figure><p>å¦å¤–ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿”å›å‡½æ•°ä¸è¦å¼•ç”¨ä»»ä½•å¾ªç¯å˜é‡ï¼Œæˆ–è€…åç»­ä¼šå‘ç”Ÿå˜åŒ–çš„å˜é‡ï¼Œåä¾‹å¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">count</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    fs <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token keyword\">def</span> <span class=\"token function\">f</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>             <span class=\"token keyword\">return</span> i <span class=\"token operator\">*</span> i</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        fs<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span>f<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">return</span> fs</pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>f1<span class=\"token punctuation\">,</span> f2<span class=\"token punctuation\">,</span> f3 <span class=\"token operator\">=</span> count<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>f1<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># 9 ï¼ˆé¢„æœŸæ˜¯ 1ï¼‰</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>f2<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># 9 ï¼ˆé¢„æœŸæ˜¯ 4ï¼‰</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>f3<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># 9</span></pre></td></tr></table></figure><p>è¿™å°±ä¼šå‡ºç°å‡½æ•°çš„è¿”å›å€¼å’Œé¢„æœŸä¸ä¸€è‡´ï¼Œè¿™æ˜¯å› ä¸ºåœ¨è¿”å›çš„å‡½æ•°ä¸­å¼•ç”¨äº†å¾ªç¯å˜é‡ï¼Œä½†è¿™ç§è¿”å›å‡½æ•°å¹¶éç«‹å³æ‰§è¡Œï¼Œè€Œå½“å¤šä¸ªå¾ªç¯å‡½æ•°éƒ½è¢«è¿”å›æ—¶ï¼Œå¾ªç¯å˜é‡å·²ç»å˜ä¸ºå¾ªç¯å‘¨æœŸçš„æœ€å¤§å€¼ï¼Œæ‰€ä»¥æœ€ç»ˆè°ƒç”¨å‡½æ•°è¿›è¡Œè®¡ç®—æ—¶ï¼Œå°±ä¸ä¼šå¾—åˆ°é¢„æœŸçš„å¾ªç¯æ•ˆæœäº§ç”Ÿçš„å€¼ã€‚</p>\n<p>è€Œå¦‚æœä¸€å®šè¦å¼•ç”¨å¾ªç¯å˜é‡ï¼Œå¯ä»¥é€šè¿‡å¦‚ä¸‹æ–¹å¼ï¼Œå°†å¾ªç¯å˜é‡ä½œä¸ºå‚æ•°ä¼ å…¥åˆ°å¦ä¸€å†…éƒ¨å‡½æ•°ä¸­ï¼Œè¿™æ ·å°±å¯ä»¥ä¿è¯è¢«ç»‘å®šçš„å¾ªç¯å˜é‡å‚æ•°ä¸å˜ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">count</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">def</span> <span class=\"token function\">f</span><span class=\"token punctuation\">(</span>j<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        <span class=\"token keyword\">def</span> <span class=\"token function\">g</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>            <span class=\"token keyword\">return</span> j <span class=\"token operator\">*</span> j</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token keyword\">return</span> g</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    fs <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        fs<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span>f<span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># f (i) ç«‹åˆ»è¢«æ‰§è¡Œï¼Œå› æ­¤ i çš„å½“å‰å€¼è¢«ä¼ å…¥ f ()</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token keyword\">return</span> fs</pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>f1<span class=\"token punctuation\">,</span> f2<span class=\"token punctuation\">,</span> f3 <span class=\"token operator\">=</span> count<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>f1<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># 1</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>f2<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># 4</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>f3<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># 9</span></pre></td></tr></table></figure><h4 id=\"åŒ¿åå‡½æ•°\"><a class=\"anchor\" href=\"#åŒ¿åå‡½æ•°\">#</a> åŒ¿åå‡½æ•°</h4>\n<p>å½“æˆ‘ä»¬åœ¨ä¼ å…¥å‡½æ•°æ—¶ï¼Œæœ‰äº›æ—¶å€™ï¼Œä¸éœ€è¦æ˜¾å¼åœ°å®šä¹‰å‡½æ•°ï¼Œç›´æ¥ä¼ å…¥åŒ¿åå‡½æ•°æ›´æ–¹ä¾¿ã€‚</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>n <span class=\"token operator\">=</span> <span class=\"token builtin\">list</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">map</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">lambda</span> x<span class=\"token punctuation\">:</span> x <span class=\"token operator\">*</span> x<span class=\"token punctuation\">,</span> <span class=\"token builtin\">list</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># [1, 4, 9, 16, 25, 36, 49, 64, 81]</span></pre></td></tr></table></figure><p>å…³é”®å­—  <code>lambda</code>  è¡¨ç¤ºåŒ¿åå‡½æ•°ï¼Œå†’å·å‰é¢çš„å˜é‡è¡¨ç¤ºå‡½æ•°å‚æ•°ã€‚</p>\n<p>åŒ¿åå‡½æ•°æœ‰ä¸ªé™åˆ¶ï¼Œå°±æ˜¯åªèƒ½æœ‰ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œä¸ç”¨å†™  <code>return</code>  ï¼Œè¿”å›å€¼å°±æ˜¯è¯¥è¡¨è¾¾å¼çš„ç»“æœã€‚</p>\n<p>åŒ¿åå‡½æ•°ä¹Ÿæ˜¯ä¸€ä¸ªå‡½æ•°å¯¹è±¡ï¼Œä¹Ÿå¯ä»¥æŠŠåŒ¿åå‡½æ•°èµ‹å€¼ç»™ä¸€ä¸ªå˜é‡ï¼Œå†åˆ©ç”¨å˜é‡æ¥è°ƒç”¨è¯¥å‡½æ•°ï¼›åŒæ ·åœ°ï¼Œä¹Ÿå¯ä»¥æŠŠåŒ¿åå‡½æ•°ä½œä¸ºè¿”å›å€¼è¿”å›ã€‚</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>f <span class=\"token operator\">=</span> <span class=\"token keyword\">lambda</span> x<span class=\"token punctuation\">:</span> x <span class=\"token operator\">*</span> x</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>f<span class=\"token punctuation\">(</span><span class=\"token number\">4</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># 16</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">fn</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token keyword\">lambda</span><span class=\"token punctuation\">:</span> x <span class=\"token operator\">**</span> x</pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>fn<span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># 27</span></pre></td></tr></table></figure><h4 id=\"è£…é¥°å™¨\"><a class=\"anchor\" href=\"#è£…é¥°å™¨\">#</a> è£…é¥°å™¨</h4>\n<p>è£…é¥°å™¨ï¼ˆDecoratorï¼‰å¯ä»¥åœ¨ä»£ç è¿è¡ŒæœŸé—´ï¼ŒåŠ¨æ€åœ°å¢åŠ åŠŸèƒ½ï¼Œè€Œå…¶å®æœ¬è´¨ä¸Šï¼Œè£…é¥°å™¨å°±æ˜¯ä¸€ä¸ªè¿”å›å‡½æ•°çš„é«˜é˜¶å‡½æ•°ã€‚</p>\n<p>ç”±äºå‡½æ•°ä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œè€Œä¸”å‡½æ•°å¯¹è±¡å¯ä»¥è¢«èµ‹å€¼ç»™å˜é‡ï¼Œæ‰€ä»¥ï¼Œé€šè¿‡å˜é‡ä¹Ÿèƒ½è°ƒç”¨è¯¥å‡½æ•°ã€‚è€Œå‡½æ•°å¯¹è±¡æœ‰ä¸€ä¸ª  <code>__name__</code>  å±æ€§ï¼Œå¯ä»¥è·å–åˆ°å‡½æ•°çš„åå­—ï¼Œæ®æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥å°è¯•å®ç°ä¸€ä¸ªç®€å•çš„æ‰“å°æ—¥å¿—çš„åŠŸèƒ½ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">log</span><span class=\"token punctuation\">(</span>func<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">def</span> <span class=\"token function\">wrapper</span><span class=\"token punctuation\">(</span><span class=\"token operator\">*</span>args<span class=\"token punctuation\">,</span> <span class=\"token operator\">**</span>kw<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'call %s()'</span> <span class=\"token operator\">%</span> func<span class=\"token punctuation\">.</span>__name__<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token keyword\">return</span> func<span class=\"token punctuation\">(</span><span class=\"token operator\">*</span>args<span class=\"token punctuation\">,</span> <span class=\"token operator\">**</span>kw<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">return</span> wrapper</pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token decorator annotation punctuation\">@log</span>  <span class=\"token comment\"># é€šè¿‡ Python çš„ @è¯­æ³•ï¼Œå°†è£…é¥°å™¨ç½®äºå‡½æ•°çš„å®šä¹‰å¤„ï¼Œç›¸å½“äºæ‰§è¡Œäº†ï¼šsay_hi = log (say_hi)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">say_hi</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Hi,'</span><span class=\"token punctuation\">,</span> name<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>say_hi<span class=\"token punctuation\">(</span><span class=\"token string\">'Zhang San'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>say_hi<span class=\"token punctuation\">.</span>__name__<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token comment\"># call say_hi()</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token comment\"># Hi, Zhang San</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token comment\"># wrapper  # å‡½æ•°åé”™è¯¯</span></pre></td></tr></table></figure><p>å½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥ä¸ºä»¥ä¸Šç¨‹åºæ·»åŠ æ–­ç‚¹ï¼Œå¹¶è§‚å¯Ÿå…¶æ‰§è¡Œæµç¨‹ã€‚</p>\n<p>ä½†æ˜¯ï¼Œå¦‚æœè£…é¥°å™¨æœ¬èº«éœ€è¦ä¼ å…¥å‚æ•°ï¼Œé‚£å°±éœ€è¦ç¼–å†™ä¸€ä¸ªè¿”å›è£…é¥°å™¨çš„é«˜é˜¶å‡½æ•°ï¼Œç›¸å¯¹è€Œè¨€ä¼šæ›´åŠ å¤æ‚ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">log</span><span class=\"token punctuation\">(</span>text<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">def</span> <span class=\"token function\">decorator</span><span class=\"token punctuation\">(</span>func<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        <span class=\"token keyword\">def</span> <span class=\"token function\">wrapper</span><span class=\"token punctuation\">(</span><span class=\"token operator\">*</span>args<span class=\"token punctuation\">,</span> <span class=\"token operator\">**</span>kw<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>            <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'%s %s()'</span> <span class=\"token operator\">%</span> <span class=\"token punctuation\">(</span>text<span class=\"token punctuation\">,</span> func<span class=\"token punctuation\">.</span>__name__<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>            <span class=\"token keyword\">return</span> func<span class=\"token punctuation\">(</span><span class=\"token operator\">*</span>args<span class=\"token punctuation\">,</span> <span class=\"token operator\">**</span>kw<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token keyword\">return</span> wrapper</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">return</span> decorator</pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token decorator annotation punctuation\">@log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Python\"</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># ç›¸å½“äºæ‰§è¡Œäº†ï¼šnow = log ('Python')(say_hi)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">say_hi</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Hi,'</span><span class=\"token punctuation\">,</span> name<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>say_hi<span class=\"token punctuation\">(</span><span class=\"token string\">'Zhang San'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>say_hi<span class=\"token punctuation\">.</span>__name__<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token comment\"># Python say_hi()</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token comment\"># Hi, Zhang San</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token comment\"># wrapper  # å‡½æ•°åé”™è¯¯</span></pre></td></tr></table></figure><p>ä½†å¦‚ä»£ç æ‰€ç¤ºï¼Œé€šè¿‡ç°åœ¨çš„æ–¹å¼è°ƒç”¨ï¼Œè¢«è£…é¥°å™¨ä¿®é¥°çš„å‡½æ•°ï¼ˆsay_hiï¼‰åœ¨æ‰§è¡Œç»“æŸåï¼Œå…¶å‡½æ•°åç§°è¢«æ›¿æ¢äº†ï¼Œè¿™æ˜¯å› ä¸ºè£…é¥°å™¨æ˜¯å°†è¢«ä¿®é¥°çš„å‡½æ•°ï¼ˆsay_hiï¼‰ä½œä¸ºå‚æ•°ä¼ é€’åˆ°äº†è£…é¥°å™¨çš„å†…éƒ¨ï¼Œå¹¶ä¸”æœ€ç»ˆå°†å…¶èµ‹å€¼ä¸ºè£…é¥°å™¨å†…éƒ¨å®šä¹‰çš„ä¸€ä¸ªå†…éƒ¨å‡½æ•°ï¼ˆwrapperï¼‰ï¼Œå› æ­¤ï¼Œè£…é¥°å™¨ä¿®é¥°çš„å‡½æ•°æ‰€å¯¹åº”çš„åç§°ï¼ˆsay_hiï¼‰ï¼Œå…¶å®é™…ä¸ŠæŒ‡å‘çš„ä¸å†æ˜¯åŸæœ¬å®šä¹‰çš„å‡½æ•°ï¼Œè€Œæ˜¯æŒ‡å‘å…¶ä½œä¸ºå‚æ•°ä¼ é€’ï¼Œå¹¶ä¸”è¢«èµ‹å€¼åˆ°çš„è£…é¥°å™¨çš„ä¸€ä¸ªå†…éƒ¨å‚æ•°ï¼ˆwrapperï¼‰ï¼Œæ‰€ä»¥æœ€ç»ˆé€šè¿‡  <code>say_hi.__name__</code>  è·å–åˆ°çš„å‡½æ•°åç§°å˜ä¸ºäº†  <code>wrapper</code>  ã€‚</p>\n<p>è€Œè¦è§£å†³è¿™æ ·çš„é—®é¢˜ï¼Œæˆ‘ä»¬å°±éœ€è¦åœ¨è£…é¥°å™¨ä¸­å®ç°ç±»ä¼¼  <code>wrapper.__name__ = func.__name__</code>  çš„åŠŸèƒ½ï¼Œä½†æˆ‘ä»¬å…¶å®å¹¶ä¸éœ€è¦æ‰‹åŠ¨ç¼–å†™è¿™æ ·çš„ä»£ç ï¼Œå› ä¸º Python å†…ç½®äº†ä¸€ä¸ª  <code>functools.wraps</code>  å‡½æ•°å¯ä»¥å®ç°è¿™æ ·çš„åŠŸèƒ½ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> functools  <span class=\"token comment\"># å¯¼å…¥ functools æ¨¡å—</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">log</span><span class=\"token punctuation\">(</span>text<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">def</span> <span class=\"token function\">decorator</span><span class=\"token punctuation\">(</span>func<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token decorator annotation punctuation\">@functools<span class=\"token punctuation\">.</span>wraps</span><span class=\"token punctuation\">(</span>func<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token keyword\">def</span> <span class=\"token function\">wrapper</span><span class=\"token punctuation\">(</span><span class=\"token operator\">*</span>args<span class=\"token punctuation\">,</span> <span class=\"token operator\">**</span>kw<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>            <span class=\"token comment\"># wrapper.__name__ = func.__name__  # å½“ç„¶ï¼Œé€šè¿‡è¿™ç§æ–¹å¼ä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œä½†ä¸æ¨è</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>            <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'%s %s()'</span> <span class=\"token operator\">%</span> <span class=\"token punctuation\">(</span>text<span class=\"token punctuation\">,</span> func<span class=\"token punctuation\">.</span>__name__<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>            <span class=\"token keyword\">return</span> func<span class=\"token punctuation\">(</span><span class=\"token operator\">*</span>args<span class=\"token punctuation\">,</span> <span class=\"token operator\">**</span>kw<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token keyword\">return</span> wrapper</pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token keyword\">return</span> decorator</pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token decorator annotation punctuation\">@log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Python\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">say_hi</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Hi,'</span><span class=\"token punctuation\">,</span> name<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>say_hi<span class=\"token punctuation\">(</span><span class=\"token string\">'Zhang San'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>say_hi<span class=\"token punctuation\">.</span>__name__<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token comment\"># Python say_hi()</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token comment\"># Hi, Zhang San</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token comment\"># say_hi  # å‡½æ•°åæ­£ç¡®</span></pre></td></tr></table></figure><h4 id=\"åå‡½æ•°\"><a class=\"anchor\" href=\"#åå‡½æ•°\">#</a> åå‡½æ•°</h4>\n<p>Python çš„  <code>functools</code>  æ¨¡å—æä¾›äº†å¾ˆå¤šæœ‰ç”¨çš„åŠŸèƒ½ï¼Œå…¶ä¸­ä¸€ä¸ªå°±æ˜¯åå‡½æ•°ï¼ˆPartial functionï¼‰ã€‚</p>\n<p>é€šè¿‡å‡½æ•°  <code>functools.partial</code>  ï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªåå‡½æ•°ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># hex å­—ç¬¦ä¸²è½¬ 10 è¿›åˆ¶</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> functools</pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>int2 <span class=\"token operator\">=</span> functools<span class=\"token punctuation\">.</span>partial<span class=\"token punctuation\">(</span><span class=\"token builtin\">int</span><span class=\"token punctuation\">,</span> base<span class=\"token operator\">=</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>int2<span class=\"token punctuation\">(</span><span class=\"token string\">'101000'</span><span class=\"token punctuation\">,</span> base<span class=\"token operator\">=</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># 101000</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>int2<span class=\"token punctuation\">(</span><span class=\"token string\">'101000'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># 40</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token comment\"># ç›¸å½“äº</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span><span class=\"token string\">'101000'</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">**</span><span class=\"token punctuation\">&#123;</span><span class=\"token string\">'base'</span><span class=\"token punctuation\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># 40</span></pre></td></tr></table></figure><p><code>functools.partial</code>  çš„ä½œç”¨å°±æ˜¯ï¼ŒæŠŠä¸€ä¸ªå‡½æ•°çš„æŸäº›å‚æ•°ç»™å›ºå®šä½ï¼ˆä¹Ÿå°±æ˜¯è®¾ç½®é»˜è®¤å€¼ï¼‰ï¼Œè¿”å›ä¸€ä¸ªæ–°çš„å‡½æ•°ï¼Œè¿™æ ·è°ƒç”¨è¿™ä¸ªæ–°å‡½æ•°ä¼šæ›´ç®€å•ã€‚è€Œä¸”ï¼Œè°ƒç”¨æ–¹å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€è¦ï¼Œé€‰æ‹©æ˜¯å¦ä¼ é€’æ–°çš„å€¼è¦†ç›–é»˜è®¤å€¼ã€‚</p>\n<p>åˆ›å»ºåå‡½æ•°æ—¶ï¼Œå®é™…ä¸Šå¯ä»¥æ¥æ”¶å‡½æ•°å¯¹è±¡ã€  <code>*args</code>  å’Œ  <code>**kw</code>  è¿™ 3 ä¸ªå‚æ•°ï¼Œåœ¨ä¸Šé¢çš„äºŒè¿›åˆ¶ç¤ºä¾‹ä¸­ï¼Œå®é™…ä¸Šæ˜¯å›ºå®šäº†  <code>int()</code>  å‡½æ•°çš„å…³é”®å­—å‚æ•°  <code>base</code>  ã€‚è€Œå…¶ä»–åå‡½æ•°ä¹Ÿæ˜¯ç±»ä¼¼åœ°ï¼Œæ˜¯å°†å‘åå‡½æ•°ä¸­ä¼ å…¥çš„å€¼ä½œä¸ºè¿œå‡½æ•°çš„ä¸€éƒ¨åˆ†ï¼Œè‡ªåŠ¨æ·»åŠ åˆ°æ‰€æœ‰å‚æ•°å·¦ä¾§ï¼Œä¾‹å¦‚ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> functools</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>args1 <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">6</span><span class=\"token punctuation\">,</span> <span class=\"token number\">7</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>max1 <span class=\"token operator\">=</span> functools<span class=\"token punctuation\">.</span>partial<span class=\"token punctuation\">(</span><span class=\"token builtin\">max</span><span class=\"token punctuation\">,</span> <span class=\"token number\">10</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>max1<span class=\"token punctuation\">(</span><span class=\"token operator\">*</span>args1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token comment\"># ç›¸å½“äº</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>args2 <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">6</span><span class=\"token punctuation\">,</span> <span class=\"token number\">7</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>max2 <span class=\"token operator\">=</span> <span class=\"token builtin\">max</span><span class=\"token punctuation\">(</span><span class=\"token operator\">*</span>args2<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>max2<span class=\"token punctuation\">)</span></pre></td></tr></table></figure><blockquote>\n<p>å½“å‡½æ•°çš„å‚æ•°ä¸ªæ•°å¤ªå¤šï¼Œéœ€è¦ç®€åŒ–æ—¶ï¼Œä½¿ç”¨  <code>functools.partial</code>  å¯ä»¥åˆ›å»ºä¸€ä¸ªæ–°çš„å‡½æ•°ï¼Œè¿™ä¸ªæ–°å‡½æ•°å¯ä»¥å›ºå®šä½åŸå‡½æ•°çš„éƒ¨åˆ†å‚æ•°ï¼Œä»è€Œåœ¨è°ƒç”¨æ—¶æ›´ç®€å•ã€‚</p>\n</blockquote>\n<p>è¯¾é—´ä¼‘æ¯ï¼Œå¬å¬éŸ³ä¹å§ï¼</p>\n<p><div class=\"media-container\"><div class=\"player\" data-type=\"audio\" data-src='[{\"title\":\"éŸ³ä¹æ¨è\",\"list\":[\"https://music.163.com/#/song?id=1501450521\",\"https://music.163.com/#/song?id=28461702\",\"https://music.163.com/#/song?id=857606\",\"http://music.163.com/#/song?id=31545838\",\"https://music.163.com/#/song?id=1815109509\",\"https://music.163.com/#/song?id=1485319473\"]}]'></div></div></p>\n<h3 id=\"æ¨¡å—\"><a class=\"anchor\" href=\"#æ¨¡å—\">#</a> æ¨¡å—</h3>\n<p>åœ¨è®¡ç®—æœºç¨‹åºçš„å¼€å‘è¿‡ç¨‹ä¸­ï¼Œéšç€ä¸šåŠ¡é€æ¸å®Œå–„ï¼Œä»£ç ä¼šè¶Šæ¥è¶Šå¤šï¼Œä¹Ÿè¶Šæ¥è¶Šä¸å®¹æ˜“ç»´æŠ¤ã€‚æ‰€ä»¥ï¼Œä¸ºäº†ä¾¿äºæ›´å¥½åœ°ç»´æŠ¤ä»£ç ï¼Œæé«˜å¼€å‘æ•ˆç‡ï¼Œæ‰€æœ‰å¼€å‘è¯­è¨€éƒ½æœ‰æ„è¯†åœ°å°†ä»£ç æ¨¡å—è¿›è¡Œåˆ†åŒ–ï¼Œè¿™ä¹Ÿæ˜¯ä¹Ÿæ˜¯å¿…ç„¶çš„ã€‚</p>\n<p>ä¸ºäº†ç¼–å†™å¯ç»´æŠ¤çš„ä»£ç ï¼Œæˆ‘ä»¬æŠŠå¾ˆå¤šå‡½æ•°åˆ†ç»„ï¼Œåˆ†åˆ«æ”¾åˆ°ä¸åŒçš„æ–‡ä»¶é‡Œï¼Œè¿™æ ·ï¼Œæ¯ä¸ªæ–‡ä»¶åŒ…å«çš„ä»£ç å°±ç›¸å¯¹è¾ƒå°‘ï¼Œå¾ˆå¤šç¼–ç¨‹è¯­è¨€éƒ½é‡‡ç”¨è¿™ç§ç»„ç»‡ä»£ç çš„æ–¹å¼ã€‚åœ¨ Python ä¸­ï¼Œä¸€ä¸ª  <code>.py</code>  æ–‡ä»¶å°±ç§°ä¹‹ä¸ºä¸€ä¸ªæ¨¡å—ï¼ˆModuleï¼‰ã€‚</p>\n<p>åœ¨ä¸åŒçš„æ¨¡å—ä¸­ï¼Œå‡½æ•°çš„å‘½åæ˜¯å¯ä»¥é‡å¤çš„ï¼Œä½†æ˜¯æˆ‘ä»¬æ‰€ç¼–å†™çš„å‡½æ•°ï¼Œåº”å½“å°½é‡ä¸ Python çš„å†…ç½®å‡½æ•°åŒºåˆ«å¼€æ¥ï¼Œé¿å…å¼•èµ·ä¸å¿…è¦çš„è¯¯ä¼šå’Œå†²çªã€‚</p>\n<p>å¯ä»¥åœ¨<span class=\"exturl\" data-url=\"aHR0cHM6Ly9kb2NzLnB5dGhvbi5vcmcvMy9saWJyYXJ5L2Z1bmN0aW9ucy5odG1s\">å®˜æ–¹æ–‡æ¡£</span>ä¸­æŸ¥çœ‹ Python çš„æ‰€æœ‰çš„å†…ç½®å‡½æ•°ã€‚</p>\n<p>å¦å¤–ï¼Œå¯¹äºæ¨¡å—çš„å‘½åï¼Œ Python æŒ‰ç…§ç›®å½•æ¥ç»„ç»‡æ¨¡å—ç»“æ„ï¼Œå¹¶ä¸”ç§°ä¹‹ä¸ºåŒ…ï¼ˆPackageï¼‰ï¼Œè€Œè¿™ç§ç›®å½•ç»“æ„ï¼Œé€šå¸¸æ¨èä½¿ç”¨å…¬å¸æˆ–ä¼ä¸šçš„ç»„ç»‡ç»“æ„è¿›è¡Œå‘½åã€‚</p>\n<p>Python çš„æ¯ä¸ªåŒ…ç›®å½•ä¸‹ï¼Œéƒ½åº”å½“å­˜åœ¨ä¸€ä¸ª  <code>__init__.py</code>  æ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶æ˜¯å¿…é¡»çš„ï¼Œå¦åˆ™ï¼Œè¿™ä¸ªç›®å½•å°±ä¸ä¼šè¢«è¯†åˆ«ä¸ºåŒ…ï¼Œè€Œè¿™ä¸ª  <code>__init__.py</code>  æ–‡ä»¶æœ¬èº«å¯ä»¥æ˜¯ç©ºæ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥æœ‰ä»£ç å†…å®¹ã€‚</p>\n<blockquote>\n<p>åœ¨å¼€å‘æ—¶åˆ›å»ºæ¨¡å—ï¼Œå‘½åæ—¶éœ€è¦æ³¨æ„é¿å¼€ Python è‡ªå¸¦çš„æ¨¡å—åç§°ï¼Œä¾‹å¦‚ç³»ç»Ÿè‡ªå¸¦äº†  <code>sys</code>  æ¨¡å—ï¼Œå°±ä¸å¯å†å‘½åä¸º  <code>sys.py</code>  ï¼Œå¦åˆ™å°†å¯¼è‡´ç³»ç»Ÿçš„  <code>sys</code>  æ¨¡å—æ— æ³•å¯¼å…¥ã€‚</p>\n</blockquote>\n<h4 id=\"ä½¿ç”¨æ¨¡å—\"><a class=\"anchor\" href=\"#ä½¿ç”¨æ¨¡å—\">#</a> ä½¿ç”¨æ¨¡å—</h4>\n<p>Python æœ¬èº«å†…ç½®äº†å¾ˆå¤šéå¸¸æœ‰ç”¨çš„æ¨¡å—ï¼Œåªè¦å®‰è£…å®Œæ¯•ï¼Œè¿™äº›æ¨¡å—å°±å¯ä»¥ç«‹åˆ»ä½¿ç”¨ï¼Œä¸€ä¸ªæ ‡å‡†çš„ Python æ–‡ä»¶æ¨¡æ¿å¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">#!/usr/bin/env python3</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\"># -*- coding: utf-8 -*-</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token triple-quoted-string string\">\"\"\" a test module \"\"\"</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>__author__ <span class=\"token operator\">=</span> <span class=\"token string\">'Chinmoku'</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">import</span> sys</pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    args <span class=\"token operator\">=</span> sys<span class=\"token punctuation\">.</span>argv</pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>args<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># ['A:/pycharm-workspace/py-test/main.py']</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token keyword\">if</span> <span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>args<span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token number\">1</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Hello, world!'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token keyword\">elif</span> <span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>args<span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token number\">2</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Hello, %s!'</span> <span class=\"token operator\">%</span> args<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Too many arguments!'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre></pre></td></tr><tr><td data-num=\"21\"></td><td><pre></pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token keyword\">if</span> __name__ <span class=\"token operator\">==</span> <span class=\"token string\">'__main__'</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    test<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><blockquote>\n<p>å‰ä¸¤è¡Œæ˜¯æ ‡å‡†æ³¨é‡Šï¼Œç¬¬ä¸€è¡Œæ³¨é‡ŠæŒ‡å®šäº† Python çš„ç¯å¢ƒï¼Œå¯ä»¥è®©è¿™ä¸ªæ–‡ä»¶ç›´æ¥åœ¨ Unix/Linux/Mac ç¯å¢ƒä¸Šè¿è¡Œï¼›è€Œç¬¬äºŒè¡Œæ³¨é‡Šåˆ™è¡¨æ˜äº†è¿™ä¸ªæ–‡ä»¶ä½¿ç”¨çš„ç¼–ç æ ¼å¼ï¼Œé¿å…è§£é‡Šå™¨è¯»å–ä»£ç æ—¶äº§ç”Ÿä¹±ç ã€‚ç¬¬å››è¡Œçš„å­—ç¬¦ä¸²æ˜¯ç”¨æ¥æŒ‡å®šå½“å‰æ¨¡å—çš„æ–‡æ¡£æ³¨é‡Šå†…å®¹ï¼Œä»»ä½•æ¨¡å—çš„ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸²éƒ½å°†è¢«è§†ä¸ºè¯¥æ¨¡å—çš„æ–‡æ¡£æ³¨é‡Šã€‚è€Œç¬¬å…­è¡Œçš„  <code>__author__</code>  åˆ™æŒ‡å®šäº†å½“å‰æ–‡ä»¶çš„å¼€å‘è€…å§“åï¼Œæ–¹ä¾¿åˆä½œå¼€å‘å’Œç»´æŠ¤ã€‚</p>\n</blockquote>\n<p>è¦ä½¿ç”¨ä¸€ä¸ªæ¨¡å—ï¼Œç¬¬ä¸€æ­¥æ˜¯å¯¼å…¥è¯¥æ¨¡å—ï¼Œä¸å…¶ä»–å¼€å‘è¯­è¨€å¤§åŒå°å¼‚ï¼ŒPython å¯¼å…¥æ¨¡å—çš„è¯­æ³•å¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> sys</pre></td></tr></table></figure><p><code>sys</code>  æ¨¡å—è¢«å¯¼å…¥åï¼Œå°±å¯ä»¥é€šè¿‡  <code>sys</code>  è¿™ä¸ªå˜é‡æ¥è®¿é—®è¯¥æ¨¡å—çš„æ‰€æœ‰åŠŸèƒ½ã€‚</p>\n<p><code>sys.argv</code>  å˜é‡ä½¿ç”¨ list å­˜å‚¨äº†å‘½ä»¤è¡Œçš„æ‰€æœ‰å‚æ•°ï¼Œå®ƒæœ€å°‘æœ‰ä¸€ä¸ªå‚æ•°ï¼Œå³æ˜¯å½“å‰  <code>.py</code>  æ–‡ä»¶çš„å…¨åç§°ã€‚</p>\n<p>å¦å¤–ï¼Œåœ¨ä¸€ä¸ªæ¨¡å—ä¸­ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šå®šä¹‰å¾ˆå¤šå‡½æ•°æˆ–å˜é‡ï¼Œä½†æ˜¯æˆ‘ä»¬å¸Œæœ›ä¸€äº›å‡½æ•°æˆ–å˜é‡ä»…ä»…åœ¨æ¨¡å—å†…éƒ¨è¿›è¡Œä½¿ç”¨ï¼Œè¿™æ—¶å°±è¦é€šè¿‡  <code>_</code>  å‰ç¼€æ¥å®ç°ã€‚</p>\n<p>æ­£å¸¸çš„å‡½æ•°å’Œå˜é‡åæ˜¯å…¬å¼€çš„ï¼ˆpublicï¼‰ï¼Œå¯ä»¥è¢«ç›´æ¥å¼•ç”¨ï¼Œï¼Œæ¯”å¦‚ï¼š <code>abc</code> ï¼Œ <code>x123</code> ï¼Œ <code>PI</code>  ç­‰ï¼›è€Œç‰¹æ®Šå˜é‡ä½¿ç”¨  <code>__xxx__</code>  æ–¹å¼å‘½åï¼Œå¯ä»¥è¢«ç›´æ¥å¼•ç”¨ï¼Œä½†æ˜¯æœ‰ç‰¹æ®Šç”¨é€”ï¼Œä¾‹å¦‚  <code>__author__</code>  ã€  <code>__name__</code>  å°±åˆ†åˆ«ä»£è¡¨ä½œè€…å’Œå½“å‰æ¨¡å—åï¼Œè€Œä¸”æ¨¡å—å®šä¹‰çš„æ–‡æ¡£æ³¨é‡Šå…¶å®ä¹Ÿå¯ä»¥ä½¿ç”¨å˜é‡  <code>__doc__</code>  æ¥è®¿é—®ï¼ˆéå¸¸è§„ï¼‰ã€‚</p>\n<p>ç±»ä¼¼  <code>_xxx</code>  å’Œ  <code>__xxx</code>  è¿™æ ·çš„å‡½æ•°æˆ–å˜é‡å°±æ˜¯éå…¬å¼€çš„ï¼ˆprivateï¼‰ï¼Œä¸åº”è¯¥è¢«ç›´æ¥å¼•ç”¨ï¼Œæ¯”å¦‚  <code>_abc</code>  ï¼Œ <code>__abc</code>  ç­‰ï¼›</p>\n<blockquote>\n<p>ä½†æ˜¯ï¼ŒPython å…¶å®å¹¶æ²¡æœ‰ä¸€ç§æ–¹æ³•å¯ä»¥å®Œå…¨é™åˆ¶è®¿é—® private å‡½æ•°æˆ–å˜é‡ï¼Œä½†æ˜¯ï¼Œä»ç¼–ç¨‹ä¹ æƒ¯ä¸Šä¸åº”è¯¥å¼•ç”¨ private å‡½æ•°æˆ–å˜é‡ã€‚</p>\n</blockquote>\n<p>å¤–éƒ¨ä¸éœ€è¦å¼•ç”¨çš„å‡½æ•°å°½é‡å…¨éƒ¨å®šä¹‰æˆ privateï¼Œåªæœ‰å¤–éƒ¨éœ€è¦å¼•ç”¨çš„å‡½æ•°æ‰å®šä¹‰ä¸º publicã€‚</p>\n<h4 id=\"å®‰è£…ç¬¬ä¸‰æ–¹æ¨¡å—\"><a class=\"anchor\" href=\"#å®‰è£…ç¬¬ä¸‰æ–¹æ¨¡å—\">#</a> å®‰è£…ç¬¬ä¸‰æ–¹æ¨¡å—</h4>\n<p>åœ¨ Python ä¸­ï¼Œå®‰è£…ç¬¬ä¸‰æ–¹æ¨¡å—ï¼Œæ˜¯é€šè¿‡åŒ…ç®¡ç†å·¥å…· pip å®Œæˆçš„ã€‚</p>\n<p>ä¸€èˆ¬æ¥è¯´ï¼Œç¬¬ä¸‰æ–¹åº“éƒ½ä¼šåœ¨ Python å®˜æ–¹çš„ <span class=\"exturl\" data-url=\"aHR0cDovL3B5cGkucHl0aG9uLm9yZw==\">pypi.python.org</span> ç½‘ç«™æ³¨å†Œï¼Œè¦å®‰è£…ä¸€ä¸ªç¬¬ä¸‰æ–¹åº“ï¼Œå¿…é¡»å…ˆçŸ¥é“è¯¥åº“çš„åç§°ï¼Œå¯ä»¥åœ¨å®˜ç½‘æˆ–è€… pypi ä¸Šæœç´¢ï¼Œæ¯”å¦‚ Pillow çš„åç§°å« Pillowï¼Œå› æ­¤ï¼Œå®‰è£… Pillow çš„å‘½ä»¤å°±æ˜¯ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>pip install Pillow</pre></td></tr></table></figure><p>åœ¨ä½¿ç”¨ Python æ—¶ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦ç”¨åˆ°å¾ˆå¤šç¬¬ä¸‰æ–¹åº“ï¼Œä¾‹å¦‚ï¼Œä¸Šé¢æåˆ°çš„ Pillowï¼Œä»¥åŠ MySQL é©±åŠ¨ç¨‹åºï¼ŒWeb æ¡†æ¶ Flaskï¼Œç§‘å­¦è®¡ç®— Numpy ç­‰ã€‚ç”¨ pip ä¸€ä¸ªä¸€ä¸ªå®‰è£…è´¹æ—¶è´¹åŠ›ï¼Œè¿˜éœ€è¦è€ƒè™‘å…¼å®¹æ€§ã€‚å› æ­¤ï¼Œæ›´åŠ æ¨èåœ°æ˜¯ä½¿ç”¨ <span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuYW5hY29uZGEuY29tLw==\">Anaconda</span> ï¼Œè¿™æ˜¯ä¸€ä¸ªåŸºäº Python çš„æ•°æ®å¤„ç†å’Œç§‘å­¦è®¡ç®—å¹³å°ï¼Œå®ƒå·²ç»å†…ç½®äº†è®¸å¤šéå¸¸æœ‰ç”¨çš„ç¬¬ä¸‰æ–¹åº“ï¼Œå¯ä»¥ä»<span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuYW5hY29uZGEuY29tL2Rvd25sb2FkLw==\"> Anaconda å®˜ç½‘</span>ä¸‹è½½å®‰è£…åŒ…ã€‚</p>\n<p>ä¸‹è½½å®Œæˆåè¿›è¡Œå®‰è£…ï¼Œæ¨èä¸è¦åœ¨å®‰è£…æ—¶å‹¾é€‰è‡ªåŠ¨é…ç½®ç¯å¢ƒå˜é‡çš„é€‰é¡¹ï¼Œè€Œæ˜¯æ‰‹åŠ¨è¿›è¡Œé…ç½®ï¼Œé…ç½®ç¤ºä¾‹ï¼š</p>\n<blockquote>\n<p>åœ¨  <code>path</code>  ç¯å¢ƒå˜é‡ä¸­ï¼Œæ·»åŠ å¦‚ä¸‹é…ç½®ï¼š</p>\n<p>A:\\anaconda3<br />\nA:\\anaconda3\\Scripts<br />\nA:\\anaconda3\\Library\\bin</p>\n</blockquote>\n<p>åœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥  <code>python</code>  ï¼Œåœ¨å›è½¦è¾“å‡ºçš„ç»“æœä¸­ï¼Œå¦‚æœæœ‰  <code>Anaconda</code>  å­—ç¬¦ï¼Œå°±è¡¨ç¤ºå®‰è£…æˆåŠŸã€‚</p>\n<p>å½“æˆ‘ä»¬è¯•å›¾åŠ è½½ä¸€ä¸ªæ¨¡å—æ—¶ï¼ŒPython ä¼šåœ¨æŒ‡å®šçš„è·¯å¾„ä¸‹æœç´¢å¯¹åº”çš„  <code>.py</code>  æ–‡ä»¶ï¼Œå¦‚æœæ‰¾ä¸åˆ°ï¼Œå°±ä¼šæŠ›å‡º  <code>ModuleNotFoundError</code>  å¼‚å¸¸ã€‚</p>\n<p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒPython è§£é‡Šå™¨ä¼šæœç´¢å½“å‰ç›®å½•ã€æ‰€æœ‰å·²å®‰è£…çš„å†…ç½®æ¨¡å—å’Œç¬¬ä¸‰æ–¹æ¨¡å—ï¼Œæœç´¢è·¯å¾„å­˜æ”¾åœ¨  <code>sys</code>  æ¨¡å—çš„  <code>path</code>  å˜é‡ä¸­ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> sys</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>sys<span class=\"token punctuation\">.</span>path<span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>å¦‚æœè¦æ·»åŠ è‡ªå®šä¹‰çš„æœç´¢ç›®å½•ï¼Œæœ‰ä»¥ä¸‹ä¸¤ç§æ–¹å¼ï¼š</p>\n<ol>\n<li>\n<p>ç›´æ¥ä¿®æ”¹  <code>sys.path</code>  ï¼Œæ·»åŠ è‡ªå®šä¹‰çš„æœç´¢ç›®å½•ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> sys</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>sys<span class=\"token punctuation\">.</span>path<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span>'<span class=\"token operator\">/</span>Users<span class=\"token operator\">/</span>chinmoku<span class=\"token operator\">/</span>py_test<span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>è¿™ç§æ–¹æ³•æ˜¯åœ¨è¿è¡Œæ—¶è¿›è¡Œä¿®æ”¹ï¼Œç¨‹åºè¿è¡Œç»“æŸåå³å¤±æ•ˆã€‚</p>\n</li>\n<li>\n<p>è®¾ç½®ç¯å¢ƒå˜é‡  <code>PYTHONPATH</code>  ï¼Œè¯¥ç¯å¢ƒå˜é‡çš„å†…å®¹ä¼šè¢«è‡ªåŠ¨æ·»åŠ åˆ°æ¨¡å—æœç´¢è·¯å¾„ä¸­ã€‚</p>\n</li>\n</ol>\n<h3 id=\"é¢å‘å¯¹è±¡ç¼–ç¨‹\"><a class=\"anchor\" href=\"#é¢å‘å¯¹è±¡ç¼–ç¨‹\">#</a> é¢å‘å¯¹è±¡ç¼–ç¨‹</h3>\n<blockquote>\n<p>ç”±äºæœ¬äººçš„ç¬¬ä¸€å¼€å‘è¯­è¨€ Java æœ¬èº«å°±æ˜¯ä¸€ç§é¢å‘å¯¹è±¡çš„è¯­è¨€ï¼Œå› æ­¤ï¼Œéƒ¨åˆ†ä¸ Java å…±é€šçš„æ€æƒ³æˆ–åŸºç¡€æ¦‚å¿µï¼Œè¿™é‡Œä¼šæœ‰æ‰€çœç•¥ã€‚</p>\n</blockquote>\n<h4 id=\"ç±»å’Œå®ä¾‹\"><a class=\"anchor\" href=\"#ç±»å’Œå®ä¾‹\">#</a> ç±»å’Œå®ä¾‹</h4>\n<p>Python é€šè¿‡å¦‚ä¸‹æ–¹å¼å®šä¹‰ä¸€ä¸ªç±»ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">Student</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">object</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">pass</span></pre></td></tr></table></figure><p>å…¶ä¸­ï¼Œ  <code>class</code>  æ˜¯å®šä¹‰ç±»çš„å…³é”®å­—ï¼Œ  <code>Student</code>  æ˜¯ç±»åï¼Œè€Œç´§æ¥ç€çš„  <code>(object)</code>  è¡¨ç¤ºå½“å‰ç±»æ‰€ç»§æ‰¿çš„çˆ¶ç±»ï¼Œæ‰€æœ‰çš„ç±»æœ€ç»ˆéƒ½ä¼šç»§æ‰¿è‡ª  <code>object</code>  ç±»ã€‚</p>\n<p>æ ¹æ®å·²æœ‰çš„ç±»åˆ›å»ºç±»çš„å®ä¾‹ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># å®šä¹‰ä¸€ä¸ªç±»</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">Student</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">def</span> <span class=\"token function\">__init__</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        self<span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> name</pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">def</span> <span class=\"token function\">get_name</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>  <span class=\"token comment\"># æ–¹æ³•</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token keyword\">return</span> self<span class=\"token punctuation\">.</span>name</pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>zhang <span class=\"token operator\">=</span> Student<span class=\"token punctuation\">(</span><span class=\"token string\">'zhang'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>zhang<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># &lt;__main__.Student object at 0x000002153559BA60></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>zhang<span class=\"token punctuation\">.</span>get_name<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># zhang</span></pre></td></tr></table></figure><p><code>__init__()</code>  æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å‡½æ•°ï¼Œè¿™ä¸ªæ–¹æ³•åœ¨è·å–ç±»çš„å®ä¾‹æ—¶è¢«è°ƒç”¨ï¼Œå¯ä»¥è¿›è¡Œå¯¹å®ä¾‹è¿›è¡Œä¸€äº›åˆå§‹åŒ–å®šä¹‰ï¼Œå®ƒå¯ä»¥æœ‰å¤šä¸ªå‚æ•°ï¼Œä½†ç¬¬ä¸€ä¸ªå‚æ•°å¿…é¡»æ˜¯  <code>self</code>  ï¼Œè¡¨ç¤ºåˆ›å»ºçš„å®ä¾‹æœ¬èº«ã€‚åœ¨åˆ›å»ºå®ä¾‹æ—¶ï¼Œè¦æ ¹æ®  <code>__init__()</code>  å‡½æ•°æ‰€éœ€è¦çš„å‚æ•°åŒ¹é…ä¼ å€¼ï¼Œä½†  <code>self</code>  å‚æ•°åœ¨ä¼ å€¼æ—¶å¯ä»¥å¿½ç•¥ï¼Œå› ä¸º Python è§£é‡Šå™¨ä¼šè‡ªåŠ¨å°†å®ä¾‹å˜é‡ä¼ å…¥åˆ°è¿™ä¸ªå‡½æ•°ä¸­ã€‚</p>\n<p>åœ¨ç±»ä¸­å£°æ˜çš„å‡½æ•°ä¸æ™®é€šå‡½æ•°åŸºæœ¬ä¸€æ ·ï¼Œä½†åœ¨ç±»ä¸­å£°æ˜çš„å‡½æ•°é»˜è®¤ä¼šæœ‰ä¸€ä¸ª  <code>self</code>  å‚æ•°ï¼Œå’Œ  <code>__init__()</code>  å‡½æ•°ä¸€æ ·ï¼Œè°ƒç”¨å‡½æ•°æ—¶å¿½ç•¥  <code>self</code>  å‚æ•°å³å¯ã€‚</p>\n<p><mark>æ•°æ®å°è£…</mark>æ˜¯é¢å‘å¯¹è±¡ç¼–ç¨‹çš„ä¸€ä¸ªé‡è¦ç‰¹ç‚¹ã€‚</p>\n<p>æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªç±»ï¼Œå¹¶ä¸”é€šè¿‡  <code>__init__()</code>  å‡½æ•°å¯ä»¥åˆ›å»ºå‡ºè¯¥ç±»çš„å®ä¾‹ï¼Œä½†å¯¹äºåˆ›å»ºçš„å®ä¾‹ï¼Œæ˜¯å¯ä»¥è°ƒç”¨ç±»å†…éƒ¨å®šä¹‰çš„æ–¹æ³•çš„ï¼Œè¿™äº›åœ¨ç±»å†…éƒ¨çš„å‡½æ•°ä¸ç±»æœ¬èº«æ˜¯å…³è”èµ·æ¥çš„ï¼Œæˆ‘ä»¬ç§°è¿™äº›å‡½æ•°ä¸ºç±»çš„æ–¹æ³•ï¼Œå¦‚ä¸Šè¿°ä»£ç ç‰‡æ®µä¸­çš„  <code>get_name()</code>  å‡½æ•°ã€‚è€Œè¦è°ƒç”¨ç±»çš„æ–¹æ³•ä¹Ÿå¾ˆç®€å•ï¼Œé€šè¿‡å®ä¾‹ç›´æ¥è°ƒç”¨å³å¯ã€‚è¿™æ ·ï¼Œå¯¹äºå®ä¾‹è€Œè¨€ï¼Œå®ƒå¹¶ä¸éœ€è¦å…³å¿ƒè°ƒç”¨çš„æ–¹æ³•å†…éƒ¨çš„å®ç°ç»†èŠ‚ï¼Œè¿™æ˜¯å°è£…çš„å¥½å¤„ä¹‹ä¸€ã€‚å°è£…çš„å¦ä¸€å¥½å¤„æ˜¯å¯ä»¥ç»™ç±»å¢åŠ æ–°çš„æ–¹æ³•ï¼Œè€Œç±»çš„å®ä¾‹åªéœ€è¦ç›´æ¥è°ƒç”¨æ–¹æ³•å³å¯ã€‚</p>\n<p>æ€»è€Œè¨€ä¹‹ï¼š</p>\n<ul>\n<li>\n<p>ç±»æ˜¯åˆ›å»ºå®ä¾‹çš„æ¨¡æ¿ï¼Œè€Œå®ä¾‹åˆ™æ˜¯ä¸€ä¸ªä¸€ä¸ªå…·ä½“çš„å¯¹è±¡ï¼Œå„ä¸ªå®ä¾‹æ‹¥æœ‰çš„æ•°æ®éƒ½äº’ç›¸ç‹¬ç«‹ï¼Œäº’ä¸å½±å“ï¼›</p>\n</li>\n<li>\n<p>æ–¹æ³•å°±æ˜¯ä¸å®ä¾‹ç»‘å®šçš„å‡½æ•°ï¼Œå’Œæ™®é€šå‡½æ•°ä¸åŒï¼Œæ–¹æ³•å¯ä»¥ç›´æ¥è®¿é—®å®ä¾‹çš„æ•°æ®ï¼›</p>\n</li>\n<li>\n<p>é€šè¿‡åœ¨å®ä¾‹ä¸Šè°ƒç”¨æ–¹æ³•ï¼Œæˆ‘ä»¬å°±ç›´æ¥æ“ä½œäº†å¯¹è±¡å†…éƒ¨çš„æ•°æ®ï¼Œä½†æ— éœ€çŸ¥é“æ–¹æ³•å†…éƒ¨çš„å®ç°ç»†èŠ‚ï¼›</p>\n</li>\n</ul>\n<blockquote>\n<p>Python å…è®¸å¯¹å®ä¾‹å˜é‡ç»‘å®šä»»ä½•æ•°æ®ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¯¹äºä¸¤ä¸ªå®ä¾‹å˜é‡ï¼Œè™½ç„¶å®ƒä»¬éƒ½æ˜¯åŒä¸€ä¸ªç±»çš„ä¸åŒå®ä¾‹ï¼Œä½†æ‹¥æœ‰çš„å˜é‡åç§°éƒ½å¯èƒ½ä¸åŒã€‚</p>\n</blockquote>\n<h4 id=\"è®¿é—®é™åˆ¶\"><a class=\"anchor\" href=\"#è®¿é—®é™åˆ¶\">#</a> è®¿é—®é™åˆ¶</h4>\n<p>åœ¨ Class å†…éƒ¨ï¼Œå¯ä»¥æœ‰å±æ€§å’Œæ–¹æ³•ï¼Œè€Œå¤–éƒ¨ä»£ç å¯ä»¥é€šè¿‡ç›´æ¥è°ƒç”¨å®ä¾‹å˜é‡çš„æ–¹æ³•æ¥æ“ä½œæ•°æ®ï¼Œè¿™æ ·ï¼Œå°±éšè—äº†å†…éƒ¨çš„å¤æ‚é€»è¾‘ã€‚ä½†æ˜¯ï¼Œå¤–éƒ¨ä»æ—§å¯ä»¥è‡ªç”±è®¿é—®å’Œä¿®æ”¹ä¸€ä¸ªå®ä¾‹å†…éƒ¨çš„å±æ€§ï¼Œå¦‚æœä¸å¸Œæœ›å†…éƒ¨å±æ€§è¢«å¤–éƒ¨è®¿é—®ï¼Œå¯ä»¥ä½¿ç”¨  <code>__name</code>  è¿™ç§æ–¹å¼å¯¹å±æ€§è¿›è¡Œå‘½åã€‚è¯¥å˜é‡å°±ä¼šå˜ä¸ºä¸€ä¸ªç§æœ‰å˜é‡ï¼Œè¿™æ ·ï¼Œè¿™ä¸ªå˜é‡å°±åªæœ‰å†…éƒ¨å¯ä»¥è®¿é—®ï¼Œè€Œå¤–éƒ¨æ˜¯æ— æ³•è®¿é—®çš„ã€‚</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">Student</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">def</span> <span class=\"token function\">__init__</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        self<span class=\"token punctuation\">.</span>__name <span class=\"token operator\">=</span> name</pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">def</span> <span class=\"token function\">get_name</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token keyword\">return</span> self<span class=\"token punctuation\">.</span>__name</pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token keyword\">def</span> <span class=\"token function\">set_name</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        self<span class=\"token punctuation\">.</span>__name <span class=\"token operator\">=</span> name</pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>zhang <span class=\"token operator\">=</span> Student<span class=\"token punctuation\">(</span><span class=\"token string\">'zhang'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>zhang<span class=\"token punctuation\">.</span>_Student__name<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># zhang</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>zhang<span class=\"token punctuation\">.</span>__name<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># AttributeError: 'Student' object has no attribute '__name'</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>zhang<span class=\"token punctuation\">.</span>set_name<span class=\"token punctuation\">(</span><span class=\"token string\">'zhou'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>zhang<span class=\"token punctuation\">.</span>get_name<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># zhou</span></pre></td></tr></table></figure><p>å…¶å®åœ¨ä¸Šæ–‡å·²ç»å¤šæ¬¡æåˆ°ï¼Œä»¥  <code>__xxx</code>  æ–¹å¼å‘½åå˜é‡ï¼Œå¹¶ä¸èƒ½ä¿è¯å˜é‡ä¸è¢«å¤–éƒ¨ç›´æ¥è®¿é—®ï¼Œä¾‹å¦‚åœ¨ä¸Šé¢çš„ä»£ç æ¸…å•ä¸­ï¼Œå…¶å®é€šè¿‡  <code>.Student__name</code>  ä¾ç„¶èƒ½å¤Ÿå¾—åˆ°ç§æœ‰å˜é‡çš„å€¼ï¼Œè€Œä¹‹æ‰€ä»¥è¯´é€šè¿‡  <code>__xxx</code>  æ–¹å¼å¯ä»¥å£°æ˜ä¸ºç§æœ‰å˜é‡ï¼Œå…¶å®ä»…ä»…æ˜¯å‡ºäºçº¦å®šä¿—æˆçš„è§„å®šï¼Œè€Œéå‡ºäºç¨‹åºçš„å¼ºåˆ¶è¦æ±‚ï¼Œå¾€å¾€æ›´å¤šçš„æ˜¯éœ€è¦å¼€å‘è€…æ‹¥æœ‰ä¸»åŠ¨æ„è¯†ï¼Œè‡ªè§‰éµå®ˆè¿™äº›çº¦å®šæˆ–è§„èŒƒã€‚</p>\n<blockquote>\n<p>æ³¨æ„ï¼š  <code>__xxx__</code>  å‘½åæ–¹å¼ï¼Œè¡¨ç¤ºè¿™ä¸ªå˜é‡æ˜¯ä¸€ä¸ªç‰¹æ®Šå˜é‡ï¼Œå®ƒä¸æ˜¯ç§æœ‰å˜é‡ï¼Œå¯ä»¥è¢«ç›´æ¥è®¿é—®ï¼Œæ‰€ä»¥åœ¨å±æ€§å‘½åæ—¶ï¼Œä¸åº”å½“ä»¥è¿™ç§æ–¹å¼å‘½åã€‚å¦å¤–ï¼Œä»¥  <code>_xxx</code>  è¿™ç§æ–¹å¼å‘½åçš„å˜é‡ï¼Œæ˜¯å¯ä»¥è¢«å¤–éƒ¨è®¿é—®çš„ï¼Œä½†ä½œä¸ºä¸€ç§çº¦å®šä¿—æˆçš„è§„å®šï¼Œæˆ‘ä»¬åº”å½“å°½é‡å°†å®ƒå½“åšç§æœ‰å˜é‡çœ‹å¾…ã€‚</p>\n</blockquote>\n<h4 id=\"ç»§æ‰¿å’Œå¤šæ€\"><a class=\"anchor\" href=\"#ç»§æ‰¿å’Œå¤šæ€\">#</a> ç»§æ‰¿å’Œå¤šæ€</h4>\n<p>å‰é¢æåˆ°å°è£…æ˜¯é¢å‘å¯¹è±¡ç¼–ç¨‹çš„ä¸€ä¸ªé‡è¦ç‰¹ç‚¹ï¼Œè€Œç»§æ‰¿å’Œå¤šæ€åˆ™æ˜¯é¢å‘å¯¹è±¡ç¼–ç¨‹çš„å¦å¤–ä¸¤å¤§ç‰¹ç‚¹ã€‚</p>\n<p>å½“æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªç±»çš„æ—¶å€™ï¼Œæˆ‘ä»¬å®šä¹‰çš„è¿™ä¸ªç±»å¯ä»¥ä»æŸä¸ªç±»ç»§æ‰¿ï¼Œå› æ­¤æ–°åˆ›å»ºçš„ç±»ç›¸å¯¹è¢«ç»§æ‰¿çš„ç±»è€Œè¨€å°±æ˜¯å­ç±»ï¼Œè€Œè¢«ç»§æ‰¿çš„ç±»å°±æ˜¯åŸºç±»ã€çˆ¶ç±»æˆ–è¶…ç±»ã€‚</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">Animal</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">def</span> <span class=\"token function\">run</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> ani<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'%s can run'</span> <span class=\"token operator\">%</span> ani<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">Dog</span><span class=\"token punctuation\">(</span>Animal<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">def</span> <span class=\"token function\">__init__</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> type_name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        self<span class=\"token punctuation\">.</span>type_name <span class=\"token operator\">=</span> type_name</pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token keyword\">def</span> <span class=\"token function\">get_type_name</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token keyword\">return</span> self<span class=\"token punctuation\">.</span>type_name</pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token comment\"># å­ç±»å¯ä»¥é‡å†™çˆ¶ç±»çš„æ–¹æ³•</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token keyword\">def</span> <span class=\"token function\">run</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> <span class=\"token builtin\">type</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'%s can run every!'</span> <span class=\"token operator\">%</span> <span class=\"token builtin\">type</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">Cat</span><span class=\"token punctuation\">(</span>Animal<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token keyword\">def</span> <span class=\"token function\">__init__</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        <span class=\"token keyword\">pass</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>catA <span class=\"token operator\">=</span> Cat<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>catA<span class=\"token punctuation\">.</span>run<span class=\"token punctuation\">(</span><span class=\"token string\">'Cat'</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># å­ç±»å¯ä»¥è°ƒç”¨çˆ¶ç±»çš„æ–¹æ³•</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token comment\"># Cat can run</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>dogA <span class=\"token operator\">=</span> Dog<span class=\"token punctuation\">(</span><span class=\"token string\">'Dog'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>dogA<span class=\"token punctuation\">.</span>run<span class=\"token punctuation\">(</span>dogA<span class=\"token punctuation\">.</span>get_type_name<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre><span class=\"token comment\"># Dog can run every!</span></pre></td></tr></table></figure><p>ç»§æ‰¿çš„å¥½å¤„åœ¨äºä¸ç”¨è¿›è¡Œä»»ä½•å£°æ˜å°±å¯ä»¥è·å¾—çˆ¶ç±»çš„å…¨éƒ¨åŠŸèƒ½ï¼Œè€Œä¸”å­ç±»ä»ç„¶å¯ä»¥å¯¹è‡ªèº«è¿›è¡Œæ‰©å±•å’Œå¢å¼ºè€Œä¸å—çˆ¶ç±»é™åˆ¶ï¼Œä¾‹å¦‚æ–°å¢å±æ€§å’Œæ–¹æ³•ã€‚</p>\n<p>å½“å­ç±»å’Œçˆ¶ç±»å­˜åœ¨ç›¸åŒçš„æ–¹æ³•æ—¶ï¼Œæˆ‘ä»¬ä¾¿è¯´å­ç±»è¦†ç›–äº†çˆ¶ç±»çš„æ–¹æ³•ã€‚å½“å®ä¾‹è°ƒç”¨è¯¥åŒåæ–¹æ³•æ—¶ï¼Œå°±åªä¼šè°ƒç”¨å­ç±»çš„æ–¹æ³•ï¼Œè€Œä¸ä¼šè°ƒç”¨çˆ¶ç±»ï¼Œè¿™ç§ç‰¹æ€§åœ¨é¢å‘å¯¹è±¡çš„æ€æƒ³é‡Œè¢«ç§°ä¸ºå¤šæ€ã€‚</p>\n<p>åœ¨ Python åŸºç¡€ä¸­æˆ‘ä»¬æåˆ°è¿‡ï¼Œå¯ä»¥ä½¿ç”¨  <code>isinstance()</code>  å‡½æ•°æ¥åˆ¤æ–­æŸä¸ªå˜é‡æ˜¯å¦æ˜¯æŸç§ç±»å‹ã€‚è€Œåœ¨è¿™é‡Œçš„å®ä¾‹ä¸­ï¼Œæˆ‘ä»¬åŒæ ·å¯ä»¥é€šè¿‡è¿™ç§æ–¹æ³•æ¥å¯¹æ‹¥æœ‰ç»§æ‰¿å…³ç³»çš„å­ç±»å¯¹è±¡å’Œçˆ¶ç±»è¿›è¡Œåˆ¤æ–­ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">isinstance</span><span class=\"token punctuation\">(</span>catA<span class=\"token punctuation\">,</span> Cat<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># True</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">isinstance</span><span class=\"token punctuation\">(</span>dogA<span class=\"token punctuation\">,</span> Dog<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># True</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">isinstance</span><span class=\"token punctuation\">(</span>catA<span class=\"token punctuation\">,</span> Animal<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># True</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">isinstance</span><span class=\"token punctuation\">(</span>dogA<span class=\"token punctuation\">,</span> Animal<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># True</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>animal <span class=\"token operator\">=</span> Animal<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">isinstance</span><span class=\"token punctuation\">(</span>animal<span class=\"token punctuation\">,</span> Dog<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># False</span></pre></td></tr></table></figure><p><strong>é™æ€è¯­è¨€ä¸åŠ¨æ€è¯­è¨€ï¼š</strong></p>\n<p>å¯¹äºé™æ€è¯­è¨€æ¥è¯´ï¼ˆä¾‹å¦‚ Javaï¼‰ï¼Œå¦‚æœéœ€è¦ä¼ å…¥ Animal ç±»å‹ï¼Œé‚£ä¹ˆå°±å¿…é¡»ä¼ å…¥ Animal ç±»å‹æˆ–å®ƒçš„å­ç±»ï¼Œå¦åˆ™æ— æ³•è°ƒç”¨å…¶  <code>run()</code>  æ–¹æ³•ã€‚</p>\n<p>è€Œå¯¹äº Python è¿™æ ·çš„åŠ¨æ€è¯­è¨€æ¥è¯´ï¼Œåˆ™ä¸ä¸€å®šéè¦ä¼ å…¥ Animal ç±»å‹æˆ–å…¶å­ç±»ï¼Œæˆ‘ä»¬åªéœ€è¦ä¿è¯ä¼ å…¥çš„å¯¹è±¡æœ‰ä¸€ä¸ª  <code>run()</code>  æ–¹æ³•å³å¯ã€‚</p>\n<p>Python å…·æœ‰è¿™ç§  <code>file-like-object</code>  çš„ç‰¹ç‚¹ï¼Œå®ƒå¹¶ä¸ä¸¥æ ¼è¦æ±‚ç»§æ‰¿ä½“ç³»ï¼Œè¿™å°±æ˜¯æ‰€è°“çš„ â€œé¸­å­ç±»å‹â€ã€‚</p>\n<blockquote>\n<p>é¸­å­ç±»å‹ï¼šä¸€ä¸ªå¯¹è±¡åªè¦ â€œçœ‹èµ·æ¥åƒé¸­å­ï¼Œèµ°èµ·è·¯æ¥åƒé¸­å­â€ï¼Œé‚£å®ƒå°±å¯ä»¥è¢«çœ‹åšæ˜¯é¸­å­ã€‚</p>\n</blockquote>\n<h4 id=\"è·å–å¯¹è±¡ä¿¡æ¯\"><a class=\"anchor\" href=\"#è·å–å¯¹è±¡ä¿¡æ¯\">#</a> è·å–å¯¹è±¡ä¿¡æ¯</h4>\n<p>å½“æˆ‘ä»¬è·å¾—ä¸€ä¸ªå¯¹è±¡çš„å¼•ç”¨æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡  <code>type()</code>  å‡½æ•°æ¥åˆ¤æ–­è¯¥å¯¹è±¡çš„ç±»å‹ï¼Œå½“ç„¶ï¼Œå¦‚æœä¸€ä¸ªå˜é‡æŒ‡å‘å‡½æ•°æˆ–ç±»ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨  <code>type()</code>  å‡½æ•°è¿›è¡Œåˆ¤æ–­ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">type</span><span class=\"token punctuation\">(</span>dogA<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># &lt;class '__main__.Dog'></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">type</span><span class=\"token punctuation\">(</span>dogA<span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> Dog<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># True</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">type</span><span class=\"token punctuation\">(</span>dogA<span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token builtin\">type</span><span class=\"token punctuation\">(</span>catA<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># False</span></pre></td></tr></table></figure><p><code>type()</code>  å‡½æ•°è¿”å›çš„æ˜¯ä¸€ä¸ª Class ç±»å‹ï¼Œé™¤äº†è‡ªå®šä¹‰çš„ç±»å‹ä¹‹å¤–ï¼Œä¹Ÿå¯ä»¥åˆ¤æ–­å†…ç½®çš„ç±»å‹ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> types</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">fn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">pass</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">type</span><span class=\"token punctuation\">(</span>fn<span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> types<span class=\"token punctuation\">.</span>FunctionType<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># True</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">type</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">lambda</span> x<span class=\"token punctuation\">:</span> x<span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> types<span class=\"token punctuation\">.</span>LambdaType<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># True</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">type</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>x <span class=\"token keyword\">for</span> x <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token operator\">==</span>types<span class=\"token punctuation\">.</span>GeneratorType<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># True</span></pre></td></tr></table></figure><p>type å‡½æ•°å¯ä»¥åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡çš„ç±»å‹ï¼Œä½†å¯¹äºæ‹¥æœ‰ç»§æ‰¿å…³ç³»çš„å¯¹è±¡è€Œè¨€ï¼Œå°±æ— æ³•åˆ¤æ–­å®ƒçš„çˆ¶çº§ç±»å‹ï¼Œå¯¹äºè¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬ä»æ—§å¯ä»¥ä½¿ç”¨  <code>isinstance()</code>  å‡½æ•°è¿›è¡Œåˆ¤æ–­ï¼Œå®ƒå¯ä»¥åˆ¤æ–­å¯¹è±¡æ˜¯å¦å¤„äºæŸä¸€ç»§æ‰¿é“¾ä¸Šã€‚</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">isinstance</span><span class=\"token punctuation\">(</span>catA<span class=\"token punctuation\">,</span> Animal<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># True</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">isinstance</span><span class=\"token punctuation\">(</span>dogA<span class=\"token punctuation\">,</span> Animal<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># True</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">isinstance</span><span class=\"token punctuation\">(</span>dogA<span class=\"token punctuation\">,</span> Cat<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># False</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">isinstance</span><span class=\"token punctuation\">(</span>dogA<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>Cat<span class=\"token punctuation\">,</span> Dog<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># True # åˆ¤æ–­æ˜¯å¦æ˜¯å¤šä¸ªå¯¹è±¡ä¸­çš„ä¸€ç§</span></pre></td></tr></table></figure><p>å¦‚æœè¦è·å¾—ä¸€ä¸ªå¯¹è±¡çš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•ï¼Œå¯ä»¥ä½¿ç”¨  <code>dir()</code>  å‡½æ•°ï¼Œå®ƒè¿”å›ä¸€ä¸ªåŒ…å«å­—ç¬¦ä¸²çš„ list ï¼›å¦‚æœæƒ³è¦è·å–å¯¹è±¡é•¿åº¦ï¼Œå¯ä»¥ä½¿ç”¨  <code>__len__()</code>  æ–¹æ³•æˆ–  <code>len()</code>  å‡½æ•°ï¼Œä»–ä»¬æ˜¯ç­‰ä»·çš„ï¼Œå¹¶ä¸”ï¼Œæˆ‘ä»¬å¯ä»¥é‡å†™ç±»ä¸­çš„  <code>__len__()</code>  æ–¹æ³•ã€‚</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">Cat</span><span class=\"token punctuation\">(</span>Animal<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">def</span> <span class=\"token function\">__init__</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        <span class=\"token keyword\">pass</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    </pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">def</span> <span class=\"token function\">__len__</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token number\">20</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>catA <span class=\"token operator\">=</span> Cat<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">dir</span><span class=\"token punctuation\">(</span>catA<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># ['__class__', '__delattr__', '__dict__', '__dir__' ...</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>catA<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># 20</span></pre></td></tr></table></figure><p>å¦å¤–ï¼Œå¯¹è±¡è¿˜æä¾›äº†  <code>getattr()</code>  ã€  <code>setattr()</code>  ã€  <code>hasattr()</code>  å‡½æ•°ï¼Œå¯ç”¨äºæ“ä½œç±»ä¸­çš„å±æ€§ã€‚</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># print(getattr(dogA, 'color'))  # AttributeError: 'Dog' object has no attribute 'color'</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">getattr</span><span class=\"token punctuation\">(</span>dogA<span class=\"token punctuation\">,</span> <span class=\"token string\">'color'</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">None</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># None # è·å–å±æ€§æ—¶ï¼Œå¯ä»¥ä¼ å…¥ä¸€ä¸ªé»˜è®¤å€¼ï¼Œå½“å±æ€§ä¸å­˜åœ¨æ—¶ç”Ÿæ•ˆ</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">hasattr</span><span class=\"token punctuation\">(</span>dogA<span class=\"token punctuation\">,</span> <span class=\"token string\">'color'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># False</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token builtin\">setattr</span><span class=\"token punctuation\">(</span>dogA<span class=\"token punctuation\">,</span> <span class=\"token string\">'color'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'brown'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">hasattr</span><span class=\"token punctuation\">(</span>dogA<span class=\"token punctuation\">,</span> <span class=\"token string\">'color'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># True</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">getattr</span><span class=\"token punctuation\">(</span>dogA<span class=\"token punctuation\">,</span> <span class=\"token string\">'color'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># brown</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">getattr</span><span class=\"token punctuation\">(</span>dogA<span class=\"token punctuation\">,</span> <span class=\"token string\">'run'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># &lt;bound method Dog.run of &lt;__main__.Dog object at 0x000001BB085C2FA0>> # åˆ¤æ–­æ˜¯å¦æœ‰æŸæ–¹æ³•</span></pre></td></tr></table></figure><blockquote>\n<p>è¿™äº›ç”¨äºè·å–å±æ€§çš„æ–¹æ³•æˆ–å‡½æ•°ï¼Œé€šå¸¸æ˜¯åœ¨ä¸çŸ¥é“æŸä¸€ä¸ªç±»æ˜¯å¦å…·æœ‰è¯¥æ–¹æ³•æ—¶æ‰ä½¿ç”¨çš„ã€‚</p>\n</blockquote>\n<h4 id=\"å®ä¾‹å±æ€§å’Œç±»å±æ€§\"><a class=\"anchor\" href=\"#å®ä¾‹å±æ€§å’Œç±»å±æ€§\">#</a> å®ä¾‹å±æ€§å’Œç±»å±æ€§</h4>\n<p>å¯¹äºä¸€ä¸ªç±»çš„å®ä¾‹ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å®ä¾‹å˜é‡ç›´æ¥å£°æ˜æˆ–ä½¿ç”¨ self å‚æ•°çš„æ–¹å¼å£°æ˜ä»¥ä¸ºå…¶ç»‘å®šå±æ€§ã€‚ä½†å¯¹ä¸€ä¸ªç±»æœ¬èº«ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡å¦‚ä¸‹æ–¹å¼ä¸ºè¿™ä¸ªç±»å£°æ˜å±æ€§ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">Student</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    name <span class=\"token operator\">=</span> <span class=\"token string\">'Student'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">def</span> <span class=\"token function\">__init__</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token keyword\">pass</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>student <span class=\"token operator\">=</span> Student<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>student<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># Student</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>Student<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># Student</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>student<span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> <span class=\"token string\">'Teacher'</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>student<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># Teacher</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token keyword\">del</span> student<span class=\"token punctuation\">.</span>name</pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>student<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># Student</span></pre></td></tr></table></figure><p>è¿™ä¸ªä¸ºç±»å£°æ˜çš„å±æ€§è™½ç„¶ä¸ºç±»æ‰€æœ‰ï¼Œä½†è¿™ä¸ªç±»çš„æ‰€æœ‰å®ä¾‹å‡å¯ä»¥è®¿é—®è¯¥å±æ€§ã€‚å¦‚æœç±»å±æ€§ä¸å®ä¾‹å±æ€§åŒåï¼Œè°ƒç”¨å±æ€§æ—¶é»˜è®¤ä»å®ä¾‹å±æ€§ä¸­è·å–ï¼Œå¦‚å®ä¾‹å±æ€§æœªè·å–åˆ°ï¼Œåˆ™ä»ç±»å±æ€§ä¸­è·å–ã€‚å› æ­¤ï¼Œåœ¨ç¼–ç¨‹æ—¶ï¼Œæˆ‘ä»¬åº”å½“å°½é‡é¿å…å‡ºç°å®ä¾‹å±æ€§ä¸ç±»å±æ€§åŒåçš„æƒ…å†µã€‚</p>\n<h3 id=\"é¢å‘å¯¹è±¡é«˜çº§ç¼–ç¨‹\"><a class=\"anchor\" href=\"#é¢å‘å¯¹è±¡é«˜çº§ç¼–ç¨‹\">#</a> é¢å‘å¯¹è±¡é«˜çº§ç¼–ç¨‹</h3>\n<h4 id=\"_slots_\"><a class=\"anchor\" href=\"#_slots_\">#</a> _<em>slots</em>_</h4>\n<p>å¯¹äºä¸€ä¸ªå·²å£°æ˜çš„å¯¹è±¡çš„å®ä¾‹ï¼Œæˆ‘ä»¬å¯ä»¥ä¸ºå…¶ç»‘å®šä»»ä½•å±æ€§å’Œæ–¹æ³•ï¼Œä½†æ˜¯ä¸ºæŸä¸€å®ä¾‹ç»‘å®šçš„å±æ€§æˆ–æ–¹æ³•ï¼Œä»…å¯¹å½“å‰å®ä¾‹æœ‰æ•ˆï¼Œå¦‚æœéœ€è¦ä¸ºæ‰€æœ‰å®ä¾‹éƒ½ç»‘å®šå±æ€§æˆ–æ–¹æ³•ï¼Œåˆ™å¯ä»¥ç›´æ¥å°†å±æ€§æˆ–æ–¹æ³•ç»‘å®šåˆ°ç±»ä¸Šã€‚ç»™ç±»ç»‘å®šå®ä¾‹æˆ–æ–¹æ³•åï¼Œè¿™ä¸ªç±»çš„æ‰€æœ‰å®ä¾‹å‡å¯è°ƒç”¨ã€‚</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">Student</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">def</span> <span class=\"token function\">__init__</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        <span class=\"token keyword\">pass</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>student1 <span class=\"token operator\">=</span> Student<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>student1<span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> <span class=\"token string\">'Zhang'</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>student1<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># Zhang</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>student2 <span class=\"token operator\">=</span> Student<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\"># print(student2.name)  # AttributeError: 'Student' object has no attribute 'name'</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>Student<span class=\"token punctuation\">.</span>age <span class=\"token operator\">=</span> <span class=\"token number\">17</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>student1<span class=\"token punctuation\">.</span>age<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># 17</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>student2<span class=\"token punctuation\">.</span>age<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># 17</span></pre></td></tr></table></figure><p>ä½†æ˜¯ï¼Œä¸ºç¤ºä¾‹ç»‘å®šå±æ€§æˆ–æ–¹æ³•å¹¶ä¸å—ä»»ä½•é™åˆ¶ï¼Œå¦‚æœéœ€è¦é™å®šå®ä¾‹éœ€è¦ç»‘å®šçš„å±æ€§æˆ–æ–¹æ³•ï¼Œå¯ä»¥é€šè¿‡  <code>__slots__</code>  æ¥æŒ‡å®šï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">Student</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    __slots__ <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token string\">'name'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'study'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">def</span> <span class=\"token function\">__init__</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token keyword\">pass</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">study</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'%s is studying!'</span> <span class=\"token operator\">%</span> name<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>student1 <span class=\"token operator\">=</span> Student<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>student1<span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> <span class=\"token string\">'Zhang'</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>student1<span class=\"token punctuation\">.</span>study <span class=\"token operator\">=</span> study</pre></td></tr><tr><td data-num=\"13\"></td><td><pre>student1<span class=\"token punctuation\">.</span>study<span class=\"token punctuation\">(</span>student1<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># Zhang is studying!</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>student1<span class=\"token punctuation\">.</span>age <span class=\"token operator\">=</span> <span class=\"token number\">17</span>  <span class=\"token comment\"># AttributeError: 'Student' object has no attribute 'age'</span></pre></td></tr></table></figure><p><code>__slots__</code>  ä½¿ç”¨ tuple æ¥æŒ‡å®šå¤šä¸ªå±æ€§åï¼Œå®ä¾‹åœ¨ç»‘å®šå±æ€§æˆ–æ–¹æ³•æ—¶ï¼Œæ‰€ç»‘å®šçš„å±æ€§æˆ–æ–¹æ³•çš„åç§°å¿…é¡»åœ¨  <code>__slot__</code>  å±æ€§ä¸­å­˜åœ¨ï¼Œå¦åˆ™å°±ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚</p>\n<p>æ³¨æ„ï¼š  <code>__slots__</code>  ä¸­å®šä¹‰çš„å±æ€§ä»…ä»…å¯¹å½“å‰ç±»çš„å®ä¾‹èµ·ä½œç”¨ï¼Œå¯¹ç»§æ‰¿çš„å­ç±»æ˜¯ä¸èµ·ä½œç”¨çš„ï¼Œé™¤éåœ¨å­ç±»ä¸­ä¹Ÿè¿›è¡Œå£°æ˜ï¼Œè¿™æ ·ï¼Œå­ç±»å’Œçˆ¶ç±»çš„  <code>__slots__</code>  é™åˆ¶ä¼šè¿›è¡Œå åŠ ã€‚</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">Person</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    __slots__ <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token string\">'name'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'age'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">Student</span><span class=\"token punctuation\">(</span>Person<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    __slots__ <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token string\">'grade'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'score'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>student1 <span class=\"token operator\">=</span> Student<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>student1<span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> <span class=\"token string\">'Zhang'</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>student1<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># Zhang</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>student1<span class=\"token punctuation\">.</span>character <span class=\"token operator\">=</span> <span class=\"token string\">'forthright'</span>  <span class=\"token comment\"># AttributeError: 'Student' object has no attribute 'character'</span></pre></td></tr></table></figure><h4 id=\"property\"><a class=\"anchor\" href=\"#property\">#</a> @property</h4>\n<p>å¯¹äºä¸€ä¸ªç±»çš„å±æ€§ï¼Œå£°æ˜çš„å®ä¾‹ç›´æ¥è°ƒç”¨å±æ€§æ˜¯ä¸å®‰å…¨è€Œä¸”æ— æ³•è¿›è¡Œä»»ä½•é™åˆ¶çš„ï¼Œå¦‚æœéœ€è¦å¯¹å±æ€§è¿›è¡Œé™åˆ¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Python å†…ç½®çš„  <code>@property</code>  è£…é¥°å™¨æ¥å°†ä¸€ä¸ªæ–¹æ³•å˜ä¸ºå±æ€§è°ƒç”¨ã€‚</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">Student</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">object</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token decorator annotation punctuation\">@property</span>  <span class=\"token comment\"># getter</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">def</span> <span class=\"token function\">score</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token keyword\">return</span> self<span class=\"token punctuation\">.</span>_score</pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token decorator annotation punctuation\">@score<span class=\"token punctuation\">.</span>setter</span>  <span class=\"token comment\"># setter</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token keyword\">def</span> <span class=\"token function\">score</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token keyword\">if</span> <span class=\"token keyword\">not</span> <span class=\"token builtin\">isinstance</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">,</span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>            <span class=\"token keyword\">raise</span> ValueError<span class=\"token punctuation\">(</span><span class=\"token string\">'score must be an integer!'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token keyword\">if</span> value <span class=\"token operator\">&lt;</span> <span class=\"token number\">0</span> <span class=\"token keyword\">or</span> value <span class=\"token operator\">></span> <span class=\"token number\">100</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>            <span class=\"token keyword\">raise</span> ValueError<span class=\"token punctuation\">(</span><span class=\"token string\">'score must between 0 ~ 100!'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        self<span class=\"token punctuation\">.</span>_score <span class=\"token operator\">=</span> value</pre></td></tr><tr><td data-num=\"14\"></td><td><pre></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>student1 <span class=\"token operator\">=</span> Student<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token comment\"># student1.score = 'C'  # ValueError: score must be an integer!</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token comment\"># student1.score = 120  # ValueError: score must between 0 ~ 100!</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>student1<span class=\"token punctuation\">.</span>score <span class=\"token operator\">=</span> <span class=\"token number\">60</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>student1<span class=\"token punctuation\">.</span>score<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># 60</span></pre></td></tr></table></figure><p>å¦‚æœéœ€è¦å®šä¹‰ä¸€ä¸ªåªè¯»å±æ€§ï¼Œé‚£ä¹ˆï¼Œæˆ‘ä»¬åªéœ€è¦ä¸å¯¹  <code>setter</code>  è¿›è¡Œå®šä¹‰å³å¯ã€‚</p>\n<p>ä½†éœ€è¦æ³¨æ„ä¸€ç‚¹ï¼Œå±æ€§çš„æ–¹æ³•åä¸åº”å½“ä¸å®ä¾‹å˜é‡é‡åï¼Œè¿™æ ·ä¼šå¯¼è‡´æ— çº¿é€’å½’ï¼Œæœ€ç»ˆèµµæˆæ ˆæº¢å‡ºï¼Œé”™è¯¯ç¤ºä¾‹ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">Student</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">object</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token decorator annotation punctuation\">@property</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">def</span> <span class=\"token function\">score</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>  <span class=\"token comment\"># å±æ€§æ–¹æ³•åä¸º score</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token keyword\">return</span> self<span class=\"token punctuation\">.</span>score  <span class=\"token comment\"># å®ä¾‹å˜é‡åä¹Ÿä¸º score</span></pre></td></tr></table></figure><h4 id=\"å¤šé‡ç»§æ‰¿\"><a class=\"anchor\" href=\"#å¤šé‡ç»§æ‰¿\">#</a> å¤šé‡ç»§æ‰¿</h4>\n<p>åœ¨é¢å‘å¯¹è±¡çš„æ€æƒ³ä¸­ï¼Œä¸€ä¸ªç±»æ˜¯å¯ä»¥åŒæ—¶ç»§æ‰¿å¤šä¸ªç±»çš„ï¼Œä½†åœ¨è®¾è®¡ç±»çš„ç»§æ‰¿å…³ç³»æ—¶ï¼Œé€šå¸¸ï¼Œä¸»çº¿éƒ½æ˜¯å•ä¸€ç»§æ‰¿ä¸‹æ¥çš„ï¼Œå¦‚æœéœ€è¦ â€œæ··å…¥â€ é¢å¤–çš„åŠŸèƒ½ï¼Œé€šè¿‡å¤šé‡ç»§æ‰¿å°±å¯ä»¥å®ç°ï¼Œè¿™ç§è®¾è®¡é€šå¸¸ç§°ä¹‹ä¸º  <code>MixIn</code>  ã€‚</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">Dog</span><span class=\"token punctuation\">(</span>Mammal<span class=\"token punctuation\">,</span> RunnableMixIn<span class=\"token punctuation\">,</span> CarnivorousMixIn<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">pass</span></pre></td></tr></table></figure><p>MixIn çš„ç›®çš„å°±æ˜¯ç»™ä¸€ä¸ªç±»å¢åŠ å¤šä¸ªåŠŸèƒ½ï¼Œè¿™æ ·ï¼Œåœ¨è®¾è®¡ç±»çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¼˜å…ˆè€ƒè™‘é€šè¿‡å¤šé‡ç»§æ‰¿æ¥ç»„åˆå¤šä¸ª MixIn çš„åŠŸèƒ½ï¼Œè€Œä¸æ˜¯è®¾è®¡å¤šå±‚æ¬¡çš„å¤æ‚çš„ç»§æ‰¿å…³ç³»ã€‚</p>\n<p>Python è‡ªå¸¦çš„å¾ˆå¤šåº“ä¹Ÿä½¿ç”¨äº† MixInã€‚ä¾‹å¦‚ Python è‡ªå¸¦äº†  <code>TCPServer</code>  å’Œ  <code>UDPServer</code>  è¿™ä¸¤ç±»ç½‘ç»œæœåŠ¡ï¼Œè€Œè¦åŒæ—¶æœåŠ¡å¤šä¸ªç”¨æˆ·å°±å¿…é¡»ä½¿ç”¨å¤šè¿›ç¨‹æˆ–å¤šçº¿ç¨‹æ¨¡å‹ï¼Œè¿™ä¸¤ç§æ¨¡å‹ç”±  <code>ForkingMixIn</code>  å’Œ  <code>ThreadingMixIn</code>  æä¾›ï¼Œäºæ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸åŒçš„ç»„åˆæ¥åˆ›å»ºåˆé€‚çš„æœåŠ¡ã€‚</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># å¤šè¿›ç¨‹æ¨¡å¼çš„ TCP æœåŠ¡</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">MyTCPServer</span><span class=\"token punctuation\">(</span>TCPServer<span class=\"token punctuation\">,</span> ForkingMixIn<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">pass</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\"># å¤šçº¿ç¨‹æ¨¡å¼çš„ UDP æœåŠ¡</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">MyUDPServer</span><span class=\"token punctuation\">(</span>UDPServer<span class=\"token punctuation\">,</span> ThreadingMixIn<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">pass</span></pre></td></tr></table></figure><p>é€šè¿‡è¿™ç§ MixIn æ–¹å¼ï¼Œæˆ‘ä»¬ä¸éœ€è¦å¤æ‚è€Œåºå¤§çš„ç»§æ‰¿é“¾ï¼Œåªè¦é€‰æ‹©ç»„åˆä¸åŒçš„ç±»çš„åŠŸèƒ½ï¼Œå°±å¯ä»¥å¿«é€Ÿæ„é€ å‡ºæ‰€éœ€çš„å­ç±»ã€‚</p>\n<blockquote>\n<p>åªå…è®¸å•ä¸€ç»§æ‰¿çš„è¯­è¨€ï¼ˆå¦‚ Javaï¼‰ä¸èƒ½ä½¿ç”¨ MixIn çš„è®¾è®¡ã€‚</p>\n</blockquote>\n<h4 id=\"å®šåˆ¶ç±»\"><a class=\"anchor\" href=\"#å®šåˆ¶ç±»\">#</a> å®šåˆ¶ç±»</h4>\n<h5 id=\"_str_\"><a class=\"anchor\" href=\"#_str_\">#</a> _<em>str</em>_</h5>\n<p>å½“æˆ‘ä»¬åœ¨æ‰“å°ä¸€ä¸ªç±»çš„å®ä¾‹æ—¶ï¼Œé€šå¸¸æ‰“å°çš„éƒ½æ˜¯éƒ½æ˜¯è¿™ä¸ªå®ä¾‹çš„å†…å­˜åœ°å€ä¿¡æ¯ï¼Œå¦‚éœ€è¦æœ‰æ„ä¹‰çš„è‡ªå®šä¹‰å®ä¾‹ä¿¡æ¯ï¼Œå¯ä»¥ä½¿ç”¨  <code>__str__()</code>  æ–¹æ³•ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">Student</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">def</span> <span class=\"token function\">__init__</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        self<span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> name</pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">def</span> <span class=\"token function\">__str__</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token string\">'class Student(name: %s)'</span> <span class=\"token operator\">%</span> self<span class=\"token punctuation\">.</span>name</pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">Teacher</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token keyword\">pass</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>teacher1 <span class=\"token operator\">=</span> Teacher<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>teacher1<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># &lt;__main__.Teacher object at 0x000001D2DAC21FD0></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>student1 <span class=\"token operator\">=</span> Student<span class=\"token punctuation\">(</span><span class=\"token string\">'Zhang'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>student1<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># class Student(name: Zhang)</span></pre></td></tr></table></figure><h5 id=\"_iter_\"><a class=\"anchor\" href=\"#_iter_\">#</a> _<em>iter</em>_</h5>\n<p>å¦‚æœä¸€ä¸ªç±»æƒ³è¢«ç”¨äº  <code>for ... in</code>  å¾ªç¯ï¼Œå°±å¿…é¡»å®ç°ä¸€ä¸ª  <code>__iter__()</code>  æ–¹æ³•ï¼Œè¯¥æ–¹æ³•è¿”å›ä¸€ä¸ªè¿­ä»£å¯¹è±¡ï¼Œç„¶åï¼ŒPython çš„ for å¾ªç¯å°±ä¼šä¸æ–­è°ƒç”¨è¯¥è¿­ä»£å¯¹è±¡çš„  <code>__next__()</code>  æ–¹æ³•æ‹¿åˆ°å¾ªç¯çš„ä¸‹ä¸€ä¸ªå€¼ï¼Œç›´åˆ°é‡åˆ°  <code>StopIteration</code>  é”™è¯¯æ—¶é€€å‡ºå¾ªç¯ï¼Œä¾‹å¦‚ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># æ–æ³¢é‚£å¥‘æ•°åˆ—</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">Fib</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">def</span> <span class=\"token function\">__init__</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        self<span class=\"token punctuation\">.</span>a<span class=\"token punctuation\">,</span> self<span class=\"token punctuation\">.</span>b <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span>  <span class=\"token comment\"># åˆå§‹åŒ–ä¸¤ä¸ªè®¡æ•°å™¨ aï¼Œb</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">def</span> <span class=\"token function\">__iter__</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token keyword\">return</span> self  <span class=\"token comment\"># å®ä¾‹æœ¬èº«å°±æ˜¯è¿­ä»£å¯¹è±¡ï¼Œæ•…è¿”å›è‡ªå·±</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token keyword\">def</span> <span class=\"token function\">__next__</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        self<span class=\"token punctuation\">.</span>a<span class=\"token punctuation\">,</span> self<span class=\"token punctuation\">.</span>b <span class=\"token operator\">=</span> self<span class=\"token punctuation\">.</span>b<span class=\"token punctuation\">,</span> self<span class=\"token punctuation\">.</span>a <span class=\"token operator\">+</span> self<span class=\"token punctuation\">.</span>b  <span class=\"token comment\"># è®¡ç®—ä¸‹ä¸€ä¸ªå€¼</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token keyword\">if</span> self<span class=\"token punctuation\">.</span>a <span class=\"token operator\">></span> <span class=\"token number\">1000</span><span class=\"token punctuation\">:</span>  <span class=\"token comment\"># é€€å‡ºå¾ªç¯çš„æ¡ä»¶</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>            <span class=\"token keyword\">raise</span> StopIteration<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token keyword\">return</span> self<span class=\"token punctuation\">.</span>a  <span class=\"token comment\"># è¿”å›ä¸‹ä¸€ä¸ªå€¼</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>fib <span class=\"token operator\">=</span> Fib<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>tu <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token keyword\">for</span> x <span class=\"token keyword\">in</span> fib<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    tu<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>tu<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># [1, 1, 2, 3, 5, 8, 13, 21, 34, 55, 89, 144, 233, 377, 610, 987]</span></pre></td></tr></table></figure><h5 id=\"_getitem_\"><a class=\"anchor\" href=\"#_getitem_\">#</a> _<em>getitem</em>_</h5>\n<p>åœ¨ä¸Šé¢çš„æ–æ³¢é‚£å¥‘æ•°åˆ—ä»£ç æ¸…å•ä¸­ï¼Œå£°æ˜çš„å®ä¾‹å¯¹è±¡è™½ç„¶å’Œ list å¾ˆåƒï¼Œä½†å®ƒè¿˜ä¸èƒ½é€šè¿‡ä¸‹æ ‡è·å–å¯¹åº”çš„å…ƒç´ ï¼Œè¦å®ç°è¿™ä¸€ç‚¹ï¼Œå¯ä»¥é€šè¿‡åŠ å…¥  <code>__getitem__()</code>  æ–¹æ³•æ¥å®ç°ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">__getitem__</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    a<span class=\"token punctuation\">,</span> b <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">for</span> x <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        a<span class=\"token punctuation\">,</span> b <span class=\"token operator\">=</span> b<span class=\"token punctuation\">,</span> a <span class=\"token operator\">+</span> b</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">return</span> a</pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>Fib<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># 5</span></pre></td></tr></table></figure><p>è€Œå¦‚æœè¦æ”¯æŒåˆ‡ç‰‡æ–¹å¼ï¼Œåˆ™éœ€è¦æ›´åŠ å®Œå–„çš„é€»è¾‘ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">__getitem__</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">if</span> <span class=\"token builtin\">isinstance</span><span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">,</span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> <span class=\"token comment\"># n æ˜¯ç´¢å¼•</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        a<span class=\"token punctuation\">,</span> b <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token keyword\">for</span> x <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>            a<span class=\"token punctuation\">,</span> b <span class=\"token operator\">=</span> b<span class=\"token punctuation\">,</span> a <span class=\"token operator\">+</span> b</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token keyword\">return</span> a</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">if</span> <span class=\"token builtin\">isinstance</span><span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">,</span> <span class=\"token builtin\">slice</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> <span class=\"token comment\"># n æ˜¯åˆ‡ç‰‡</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        start <span class=\"token operator\">=</span> n<span class=\"token punctuation\">.</span>start</pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        stop <span class=\"token operator\">=</span> n<span class=\"token punctuation\">.</span>stop</pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token keyword\">if</span> start <span class=\"token keyword\">is</span> <span class=\"token boolean\">None</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>            start <span class=\"token operator\">=</span> <span class=\"token number\">0</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        a<span class=\"token punctuation\">,</span> b <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        L <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token keyword\">for</span> x <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span>stop<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>            <span class=\"token keyword\">if</span> x <span class=\"token operator\">>=</span> start<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>                L<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>            a<span class=\"token punctuation\">,</span> b <span class=\"token operator\">=</span> b<span class=\"token punctuation\">,</span> a <span class=\"token operator\">+</span> b</pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        <span class=\"token keyword\">return</span> L</pre></td></tr><tr><td data-num=\"19\"></td><td><pre></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>fib<span class=\"token punctuation\">[</span><span class=\"token number\">5</span><span class=\"token punctuation\">:</span><span class=\"token number\">10</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># [8, 13, 21, 34, 55]</span></pre></td></tr></table></figure><h5 id=\"_getattr_\"><a class=\"anchor\" href=\"#_getattr_\">#</a> _<em>getattr</em>_</h5>\n<p>å½“ä¸€ä¸ªå®ä¾‹è°ƒç”¨ä¸å­˜åœ¨çš„å±æ€§æˆ–æ–¹æ³•æ—¶ï¼Œå°±ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€ä¸ª  <code>__getattr__()</code>  æ–¹æ³•æ¥åŠ¨æ€åœ°è¿”å›å±æ€§æˆ–å‡½æ•°ã€‚</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">Student</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">object</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">def</span> <span class=\"token function\">__init__</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        self<span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> <span class=\"token string\">'Michael'</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">def</span> <span class=\"token function\">__getattr__</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> attr<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token keyword\">if</span> attr <span class=\"token operator\">==</span> <span class=\"token string\">'score'</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>            <span class=\"token keyword\">return</span> <span class=\"token number\">60</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token keyword\">if</span> attr <span class=\"token operator\">==</span> <span class=\"token string\">'age'</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>            <span class=\"token keyword\">return</span> <span class=\"token keyword\">lambda</span><span class=\"token punctuation\">:</span> <span class=\"token number\">18</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token keyword\">raise</span> AttributeError<span class=\"token punctuation\">(</span><span class=\"token string\">'\\'Student\\' object has no attribute \\'%s\\''</span> <span class=\"token operator\">%</span> attr<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>student1 <span class=\"token operator\">=</span> Student<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>student1<span class=\"token punctuation\">.</span>score<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># 60</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>student1<span class=\"token punctuation\">.</span>age<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># 18</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>student1<span class=\"token punctuation\">.</span>test<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># None</span></pre></td></tr></table></figure><blockquote>\n<p>æ³¨æ„ï¼šåªæœ‰åœ¨æ²¡æœ‰æ‰¾åˆ°å±æ€§çš„æƒ…å†µä¸‹ï¼Œæ‰ä¼šè°ƒç”¨  <code>__getattr__()</code>  ï¼Œå¹¶ä¸”ï¼Œå½“è°ƒç”¨ä¸€ä¸ªä¸å­˜åœ¨çš„æ–¹æ³•æˆ–å±æ€§æ—¶ï¼Œ  <code>__getattr__()</code>  æ–¹æ³•ä¼šé»˜è®¤è¿”å›ä¸º None ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥åšè‡ªå®šä¹‰å¤„ç†ï¼Œä¾‹å¦‚æŠ›å‡ºè‡ªå®šä¹‰å¼‚å¸¸ã€‚</p>\n</blockquote>\n<p>å®ç°ä¸€ä¸ªåŠ¨æ€è·¯ç”±é“¾ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">Chain</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">object</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">def</span> <span class=\"token function\">__init__</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> path<span class=\"token operator\">=</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        self<span class=\"token punctuation\">.</span>_path <span class=\"token operator\">=</span> path</pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">def</span> <span class=\"token function\">__getattr__</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> path<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token keyword\">return</span> Chain<span class=\"token punctuation\">(</span><span class=\"token string\">'%s/%s'</span> <span class=\"token operator\">%</span> <span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">.</span>_path<span class=\"token punctuation\">,</span> path<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token keyword\">def</span> <span class=\"token function\">__call__</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> path<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>       <span class=\"token keyword\">return</span> Chain<span class=\"token punctuation\">(</span><span class=\"token string\">'%s/%s'</span> <span class=\"token operator\">%</span> <span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">.</span>_path<span class=\"token punctuation\">,</span> path<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token keyword\">def</span> <span class=\"token function\">__str__</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token keyword\">return</span> self<span class=\"token punctuation\">.</span>_path</pre></td></tr><tr><td data-num=\"14\"></td><td><pre></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>url <span class=\"token operator\">=</span> Chain<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>user<span class=\"token punctuation\">(</span><span class=\"token string\">'zhang'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>status<span class=\"token punctuation\">.</span>timeline<span class=\"token punctuation\">.</span><span class=\"token builtin\">list</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>url<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># /user/zhang/status/timeline/list</span></pre></td></tr></table></figure><h5 id=\"_call_\"><a class=\"anchor\" href=\"#_call_\">#</a> _<em>call</em>_</h5>\n<p>åœ¨åŠ¨æ€è·¯ç”±é“¾çš„ä»£ç æ¸…å•ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨åˆ°äº†ä¸€ä¸ª  <code>__call__()</code>  æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•å¯ä»¥ç›´æ¥åœ¨å®ä¾‹æœ¬èº«çš„åŸºç¡€ä¸Šè°ƒç”¨æ–¹æ³•ã€‚</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">Person</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">object</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">def</span> <span class=\"token function\">__init__</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        self<span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> name</pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">def</span> <span class=\"token function\">__call__</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> <span class=\"token builtin\">str</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Mr. %s is %s'</span> <span class=\"token operator\">%</span> <span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">,</span> <span class=\"token builtin\">str</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>Person<span class=\"token punctuation\">(</span><span class=\"token string\">'Zhang'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token string\">'working!'</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># Mr. Zhang is working!</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>person1 <span class=\"token operator\">=</span> Person<span class=\"token punctuation\">(</span><span class=\"token string\">'Wang'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">callable</span><span class=\"token punctuation\">(</span>person1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># True # å¯ä»¥ä½¿ç”¨ callable () å‡½æ•°åˆ¤æ–­æ˜¯å¦æ˜¯å¯è°ƒç”¨å¯¹è±¡</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>person1<span class=\"token punctuation\">(</span><span class=\"token string\">'studying!'</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># Mr. Wang is studying!</span></pre></td></tr></table></figure><p>Python çš„ class å…è®¸å®šä¹‰è®¸å¤šå®šåˆ¶æ–¹æ³•ï¼Œå¯ä»¥è®©æˆ‘ä»¬éå¸¸æ–¹ä¾¿åœ°ç”Ÿæˆç‰¹å®šçš„ç±»ï¼Œè¿˜æœ‰å¾ˆå¤šå¯å®šåˆ¶çš„æ–¹æ³•ï¼Œè¯¦æƒ…å¯å‚è€ƒ<span class=\"exturl\" data-url=\"aHR0cHM6Ly9kb2NzLnB5dGhvbi5vcmcvMy9yZWZlcmVuY2UvZGF0YW1vZGVsLmh0bWwjc3BlY2lhbC1tZXRob2QtbmFtZXM=\">å®˜æ–¹æ–‡æ¡£</span>ã€‚</p>\n<h4 id=\"æšä¸¾ç±»\"><a class=\"anchor\" href=\"#æšä¸¾ç±»\">#</a> æšä¸¾ç±»</h4>\n<p>Python æšä¸¾ç±»çš„å£°æ˜åŠä½¿ç”¨æ–¹å¼å¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">from</span> enum <span class=\"token keyword\">import</span> Enum</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>Month <span class=\"token operator\">=</span> Enum<span class=\"token punctuation\">(</span><span class=\"token string\">'Month'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token string\">'Jan'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Feb'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Mar'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Apr'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'May'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Jun'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Jul'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Aug'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Sep'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Oct'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Nov'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Dec'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>Month<span class=\"token punctuation\">.</span>May<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># Month.May</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>Month<span class=\"token punctuation\">.</span>May<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># May</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>Month<span class=\"token punctuation\">.</span>May<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># 5 # é»˜è®¤ä» 1 å¼€å§‹è®¡æ•°</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">for</span> name<span class=\"token punctuation\">,</span> member <span class=\"token keyword\">in</span> Month<span class=\"token punctuation\">.</span>__members__<span class=\"token punctuation\">.</span>items<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">,</span> <span class=\"token string\">'=>'</span><span class=\"token punctuation\">,</span> member<span class=\"token punctuation\">,</span> <span class=\"token string\">','</span><span class=\"token punctuation\">,</span> member<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>å¦‚æœéœ€è¦æ›´ç²¾ç¡®åœ°æ§åˆ¶æšä¸¾ç±»å‹ï¼Œå¯ä»¥ä»  <code>Enum</code>  æ´¾ç”Ÿå‡ºè‡ªå®šä¹‰ç±»ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">from</span> enum <span class=\"token keyword\">import</span> Enum<span class=\"token punctuation\">,</span> unique</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token decorator annotation punctuation\">@unique</span>  <span class=\"token comment\"># ç”¨äºæ£€æŸ¥é‡å¤</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">Weekday</span><span class=\"token punctuation\">(</span>Enum<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    Sun <span class=\"token operator\">=</span> <span class=\"token number\">0</span>  <span class=\"token comment\"># è‡ªå®šä¹‰å€¼</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    Mon <span class=\"token operator\">=</span> <span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    Tue <span class=\"token operator\">=</span> <span class=\"token number\">2</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    Wed <span class=\"token operator\">=</span> <span class=\"token number\">3</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    Thu <span class=\"token operator\">=</span> <span class=\"token number\">4</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    Fri <span class=\"token operator\">=</span> <span class=\"token number\">5</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    Sat <span class=\"token operator\">=</span> <span class=\"token number\">6</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>Weekday<span class=\"token punctuation\">.</span>Thu<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># Weekday.Thu</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>Weekday<span class=\"token punctuation\">.</span>Thu<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># Thu</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>Weekday<span class=\"token punctuation\">.</span>Thu<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># 4</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>Weekday<span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># Weekday.Wed # ä¹Ÿå¯ä»¥é€šè¿‡ value æ¥è·å–å¯¹åº”çš„æšä¸¾</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token keyword\">for</span> name<span class=\"token punctuation\">,</span> member <span class=\"token keyword\">in</span> Weekday<span class=\"token punctuation\">.</span>__members__<span class=\"token punctuation\">.</span>items<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">,</span> <span class=\"token string\">'=>'</span><span class=\"token punctuation\">,</span> member<span class=\"token punctuation\">,</span> <span class=\"token string\">','</span><span class=\"token punctuation\">,</span> member<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span></pre></td></tr></table></figure><h4 id=\"å…ƒç±»\"><a class=\"anchor\" href=\"#å…ƒç±»\">#</a> å…ƒç±»</h4>\n<p>åŠ¨æ€è¯­è¨€å’Œé™æ€è¯­è¨€æœ€å¤§çš„ä¸åŒï¼Œå°±æ˜¯å‡½æ•°å’Œç±»çš„å®šä¹‰ï¼Œä¸æ˜¯ç¼–è¯‘æ—¶å®šä¹‰çš„ï¼Œè€Œæ˜¯è¿è¡Œæ—¶åŠ¨æ€åˆ›å»ºçš„ã€‚</p>\n<p>é€šè¿‡  <code>type()</code>  å‡½æ•°å¯ä»¥æŸ¥çœ‹ä¸€ä¸ªç±»å‹æˆ–å˜é‡çš„ç±»å‹ï¼ŒåŒæ—¶ï¼Œ  <code>type()</code>  å‡½æ•°æ—¢å¯ä»¥è¿”å›ä¸€ä¸ªå¯¹è±¡çš„ç±»å‹ï¼Œåˆå¯ä»¥åˆ›å»ºå‡ºæ–°çš„ç±»å‹ï¼Œè€Œæ— éœ€é€šè¿‡  <code>class Hello(object)...</code>  è¿™æ ·çš„æ–¹å¼å®šä¹‰ã€‚</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">fn</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> name<span class=\"token operator\">=</span><span class=\"token string\">'world'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Hello, %s!'</span> <span class=\"token operator\">%</span> name<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>Hello <span class=\"token operator\">=</span> <span class=\"token builtin\">type</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Hello'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">object</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">dict</span><span class=\"token punctuation\">(</span>hello<span class=\"token operator\">=</span>fn<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>h <span class=\"token operator\">=</span> Hello<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>h<span class=\"token punctuation\">.</span>hello<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token comment\"># Hello, world!</span></pre></td></tr></table></figure><p>é€šè¿‡ type å‡½æ•°åˆ›å»ºç±»éœ€è¦æ¥æ”¶ä¸‰ä¸ªå‚æ•°ï¼š</p>\n<ol>\n<li>class ç±»åã€‚</li>\n<li>ç»§æ‰¿çš„çˆ¶ç±»é›†åˆã€‚</li>\n<li>class çš„æ–¹æ³•åç§°ä¸å‡½æ•°ç»‘å®šã€‚</li>\n</ol>\n<p>é€šè¿‡ type å‡½æ•°åˆ›å»ºçš„ç±»å’Œç›´æ¥åˆ›å»ºçš„ç±»æ²¡æœ‰ä»»ä½•åŒºåˆ«ï¼Œå› ä¸ºé€šè¿‡ class å®šä¹‰çš„ç±»åœ¨è§£é‡Šå™¨æ‰§è¡Œæ—¶ï¼Œå®é™…ä¸Šä¹Ÿæ˜¯é€šè¿‡è°ƒç”¨ type å‡½æ•°æ¥è¿›è¡Œå®šä¹‰çš„ã€‚æ­£å¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬é€šè¿‡ class æ¥åˆ›å»ºç±»å³å¯ï¼Œä½† type å‡½æ•°å…è®¸æˆ‘ä»¬åŠ¨æ€åœ°å°†ç±»åˆ›å»ºå‡ºæ¥ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒåŠ¨æ€è¯­è¨€æœ¬èº«æ”¯æŒè¿è¡ŒæœŸåŠ¨æ€åˆ›å»ºç±»ã€‚</p>\n<p>é™¤äº†ä½¿ç”¨ type å‡½æ•°åŠ¨æ€åˆ›å»ºç±»ä»¥å¤–ï¼Œè¦æ§åˆ¶ç±»çš„åˆ›å»ºè¡Œä¸ºï¼Œè¿˜å¯ä»¥ä½¿ç”¨  <code>metaclass</code>  ï¼ˆå…ƒç±»ï¼‰ï¼Œå…ƒç±»å¯ä»¥å¯¹ç±»è¿›è¡Œåˆ›å»ºå’Œä¿®æ”¹ç­‰æ“ä½œã€‚</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># å®šä¹‰ä¸€ä¸ªå…ƒç±»</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">ListMetaclass</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">type</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">def</span> <span class=\"token function\">__new__</span><span class=\"token punctuation\">(</span>cls<span class=\"token punctuation\">,</span> name<span class=\"token punctuation\">,</span> bases<span class=\"token punctuation\">,</span> attrs<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        attrs<span class=\"token punctuation\">[</span><span class=\"token string\">'add'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">lambda</span> self<span class=\"token punctuation\">,</span> value<span class=\"token punctuation\">:</span> self<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token builtin\">type</span><span class=\"token punctuation\">.</span>__new__<span class=\"token punctuation\">(</span>cls<span class=\"token punctuation\">,</span> name<span class=\"token punctuation\">,</span> bases<span class=\"token punctuation\">,</span> attrs<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token comment\"># ä½¿ç”¨å…ƒç±»æ¥åˆ›å»ºç±»</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">MyList</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">list</span><span class=\"token punctuation\">,</span> metaclass<span class=\"token operator\">=</span>ListMetaclass<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token keyword\">pass</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>l <span class=\"token operator\">=</span> MyList<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>l<span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>l<span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">(</span><span class=\"token number\">9</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>l<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># [1, 9]</span></pre></td></tr></table></figure><p>é€šè¿‡è¿™ç§æ–¹å¼åˆ›å»ºç±»ï¼Œå½“ç¨‹åºæ‰§è¡Œåˆ°  <code>metaclass=Xxx</code>  æ—¶ï¼Œå°±ä¼šè°ƒç”¨å¯¹åº”å…ƒç±»çš„  <code>__new__()</code>  æ–¹æ³•æ¥åˆ›å»ºç±»ï¼Œåœ¨è¯¥å‡½æ•°ä¸­ï¼Œé€šè¿‡  <code>type.__new__()</code>  æ–¹æ³•åˆ›å»ºç±»ï¼Œå¹¶ä¾æ¬¡ä¼ å…¥ä»¥ä¸‹å‚æ•°ï¼š</p>\n<ol>\n<li>å½“å‰å‡†å¤‡åˆ›å»ºçš„ç±»çš„å¯¹è±¡ã€‚</li>\n<li>ç±»åã€‚</li>\n<li>æ‰€ç»§æ‰¿çš„çˆ¶ç±»é›†åˆã€‚</li>\n<li>ç±»æ‰€æœ‰æ–¹æ³•çš„é›†åˆã€‚</li>\n</ol>\n<p>è¿™ç§åŠ¨æ€åˆ›å»ºç±»çš„æ–¹å¼ï¼Œä¸€ä¸ªè¾ƒä¸ºå¸¸è§çš„å¼•ç”¨å¸¸è§å³æ˜¯ ORM æ¡†æ¶ã€‚</p>\n<p><span class=\"label danger\">â—ï¸TODO</span> å¾…å®Œå–„</p>\n<h3 id=\"é”™è¯¯-è°ƒè¯•å’Œæµ‹è¯•\"><a class=\"anchor\" href=\"#é”™è¯¯-è°ƒè¯•å’Œæµ‹è¯•\">#</a> é”™è¯¯ã€è°ƒè¯•å’Œæµ‹è¯•</h3>\n<h4 id=\"é”™è¯¯å¤„ç†\"><a class=\"anchor\" href=\"#é”™è¯¯å¤„ç†\">#</a> é”™è¯¯å¤„ç†</h4>\n<p>åœ¨ç¨‹åºè¿è¡Œçš„è¿‡ç¨‹ä¸­ï¼Œå¦‚æœå‘ç”Ÿäº†é”™è¯¯ï¼Œå¯ä»¥äº‹å…ˆçº¦å®šè¿”å›ä¸€ä¸ªé”™è¯¯ä»£ç ï¼Œè¿™æ ·ï¼Œå°±å¯ä»¥çŸ¥é“æ˜¯å¦æœ‰é”™ï¼Œä»¥åŠå‡ºé”™çš„åŸå› ã€‚ä½†æ˜¯ï¼Œè¿”å›é”™è¯¯ç çš„æ–¹å¼å¸¸å¸¸å®¹æ˜“ä¸ä¸šåŠ¡æ•°æ®æ··åˆåœ¨ä¸€èµ·ï¼Œé€ æˆè°ƒç”¨è€…å¿…é¡»ç”¨å¤§é‡çš„ä»£ç æ¥åˆ¤æ–­æ˜¯å¦å‡ºé”™ï¼Œå› æ­¤ï¼ŒPython ä¹Ÿæä¾›äº†ä¸€å¥—é”™è¯¯å¤„ç†æœºåˆ¶ã€‚</p>\n<p>å¼‚å¸¸æ•è·ï¼š</p>\n<p>å½“æˆ‘ä»¬è®¤ä¸ºæŸäº›ä»£ç å¯èƒ½å‡ºç°å¼‚å¸¸æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡  <code>try</code>  è¯­å¥å—æ¥è¿è¡Œè¿™æ®µä»£ç ï¼Œå¦‚æœå‡ºé”™ï¼Œåˆ™ä¸ä¼šç»§ç»­ï¼Œè€Œæ˜¯ç›´æ¥è·³è½¬é”™è¯¯ä»£ç å¤„ç†ï¼Œå³  <code>except</code>  è¯­å¥å—ä¸­ï¼Œæ‰§è¡Œå®Œå¼‚å¸¸å¤„ç†ä¹‹åï¼Œå¦‚æœæœ‰  <code>finally</code>  è¯­å¥å—ï¼Œåˆ™æ‰§è¡Œè¯¥è¯­å¥å—ã€‚</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">try</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    a <span class=\"token operator\">=</span> <span class=\"token number\">1</span> <span class=\"token operator\">/</span> <span class=\"token number\">0</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># ä¸ä¼šæ‰§è¡Œ</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">except</span> ValueError <span class=\"token keyword\">as</span> e<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'ValueError:'</span><span class=\"token punctuation\">,</span> e<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">except</span> ZeroDivisionError <span class=\"token keyword\">as</span> e<span class=\"token punctuation\">:</span>  <span class=\"token comment\"># é”™è¯¯ä¹Ÿå¯ä»¥åŒæ—¶æœ‰å¤šä¸ªç±»å‹</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'ZeroDivisionError:'</span><span class=\"token punctuation\">,</span> e<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span>  <span class=\"token comment\"># æŒ‡å®šæœªå‡ºç°å¼‚å¸¸æ—¶çš„å¤„ç†</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'No error!'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token keyword\">finally</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'finally'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'end'</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>Python çš„é”™è¯¯å…¶å®ä¹Ÿæ˜¯ classï¼Œæ‰€æœ‰çš„é”™è¯¯ç±»å‹éƒ½ç»§æ‰¿è‡ª  <code>BaseException</code>  ï¼Œæ‰€ä»¥åœ¨ä½¿ç”¨  <code>except</code>  æ—¶éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå®ƒä¸ä½†æ•è·è¯¥ç±»å‹çš„é”™è¯¯ï¼Œè¿˜æŠŠå…¶å­ç±»ä¹Ÿä¸€å¹¶æ•è·ï¼Œè¿™æ—¶éœ€è¦æ³¨æ„æ•è·çš„å±‚çº§ï¼Œå…ˆæ•è·å±‚çº§è¾ƒä½çš„å¼‚å¸¸ï¼Œåæ•è·å±‚çº§è¾ƒé«˜çš„å¼‚å¸¸ã€‚</p>\n<p>Python æ‰€æœ‰çš„é”™è¯¯éƒ½æ˜¯ä»  <code>BaseException</code>  ç±»æ´¾ç”Ÿçš„ï¼Œå¸¸è§çš„é”™è¯¯ç±»å‹å’Œç»§æ‰¿å…³ç³»å¯ä»¥é€šè¿‡<span class=\"exturl\" data-url=\"aHR0cHM6Ly9kb2NzLnB5dGhvbi5vcmcvMy9saWJyYXJ5L2V4Y2VwdGlvbnMuaHRtbCNleGNlcHRpb24taGllcmFyY2h5\">å®˜æ–¹æ–‡æ¡£</span>è¿›è¡ŒæŸ¥çœ‹ã€‚</p>\n<p>ä½¿ç”¨  <code>try...expect</code>  ä¹Ÿå¯ä»¥è·¨è¶Šå¤šå±‚è°ƒç”¨å¤„ç†å¼‚å¸¸ï¼Œè€Œä¸éœ€è¦åœ¨æ¯ä¸€ä¸ªè°ƒç”¨å±‚éƒ½é‡å¤è¿›è¡Œå¼‚å¸¸å¤„ç†ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">foo</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token number\">10</span> <span class=\"token operator\">/</span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">bar</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">return</span> foo<span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token number\">2</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token keyword\">try</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        bar<span class=\"token punctuation\">(</span><span class=\"token string\">'0'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token keyword\">except</span> Exception <span class=\"token keyword\">as</span> e<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Error:'</span><span class=\"token punctuation\">,</span> e<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token keyword\">finally</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'finally...'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>main<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>å¦‚æœæ²¡æœ‰å¯¹é”™è¯¯è¿›è¡Œå¤„ç†ï¼Œé”™è¯¯å°±ä¼šä¸€ç›´å‘ä¸Šä¸€çº§æŠ›å‡ºï¼Œç›´åˆ°æœ€åè¢« Python è§£é‡Šå™¨æ•è·å¹¶æ‰“å°å‡ºé”™è¯¯ä¿¡æ¯ï¼Œç„¶åé€€å‡ºç¨‹åºã€‚</p>\n<p>Python å†…ç½®çš„  <code>logging</code>  æ¨¡å—å¯ä»¥éå¸¸å®¹æ˜“åœ°è®°å½•é”™è¯¯ä¿¡æ¯ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> logging</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">foo</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token number\">10</span> <span class=\"token operator\">/</span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">bar</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">return</span> foo<span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token number\">2</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token keyword\">try</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        bar<span class=\"token punctuation\">(</span><span class=\"token string\">'0'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token keyword\">except</span> Exception <span class=\"token keyword\">as</span> e<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        logging<span class=\"token punctuation\">.</span>exception<span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>main<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'END'</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>è¿™æ ·å°±å¯ä»¥åœ¨æŠ›å‡ºå¼‚å¸¸ä¹‹åï¼Œç¨‹åºä»æ—§å¯ä»¥æŒ‰ç…§é¢„æœŸçš„æ–¹å¼æ‰§è¡Œï¼Œè€Œä¸ä¼šå› ä¸ºæŸä¸€ä¸ªå¼‚å¸¸è€Œå¯¼è‡´æ•´ä¸ªç¨‹åºæ— æ³•è¿è¡Œã€‚å¹¶ä¸”ï¼Œé€šè¿‡é…ç½®ï¼Œ <code>logging</code>  è¿˜å¯ä»¥æŠŠé”™è¯¯è®°å½•åˆ°æ—¥å¿—æ–‡ä»¶é‡Œï¼Œæ–¹ä¾¿äº‹åæ’æŸ¥ã€‚</p>\n<p>å› ä¸ºé”™è¯¯æ˜¯ classï¼Œæ•è·ä¸€ä¸ªé”™è¯¯å°±æ˜¯æ•è·åˆ°è¯¥ class çš„ä¸€ä¸ªå®ä¾‹ã€‚å› æ­¤ï¼Œé”™è¯¯å¹¶ä¸æ˜¯å‡­ç©ºäº§ç”Ÿçš„ï¼Œè€Œæ˜¯æœ‰æ„åˆ›å»ºå¹¶æŠ›å‡ºçš„ã€‚Python çš„å†…ç½®å‡½æ•°ä¼šæŠ›å‡ºå¾ˆå¤šç±»å‹çš„é”™è¯¯ï¼Œä½†æ˜¯ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥æŠ›å‡ºä¸€ä¸ªè‡ªå®šä¹‰çš„é”™è¯¯ç±»å‹ã€‚</p>\n<p>å¦‚æœè¦æŠ›å‡ºé”™è¯¯ï¼Œé¦–å…ˆæ ¹æ®éœ€è¦ï¼Œå¯ä»¥å®šä¹‰ä¸€ä¸ªé”™è¯¯çš„ classï¼Œé€‰æ‹©å¥½ç»§æ‰¿å…³ç³»ï¼Œç„¶åï¼Œç”¨  <code>raise</code>  è¯­å¥æŠ›å‡ºä¸€ä¸ªé”™è¯¯çš„å®ä¾‹ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">FooError</span><span class=\"token punctuation\">(</span>ValueError<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">pass</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">foo</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    n <span class=\"token operator\">=</span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">if</span> n<span class=\"token operator\">==</span><span class=\"token number\">0</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token keyword\">raise</span> FooError<span class=\"token punctuation\">(</span><span class=\"token string\">'Invalid value: %s'</span> <span class=\"token operator\">%</span> s<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token number\">10</span> <span class=\"token operator\">/</span> n</pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>foo<span class=\"token punctuation\">(</span><span class=\"token string\">'0'</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>åœ¨æ•è·å¼‚å¸¸æ—¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å°†å¼‚å¸¸æ•è·åç»§ç»­æŠ›å‡ºï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">foo</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    n <span class=\"token operator\">=</span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">if</span> n<span class=\"token operator\">==</span><span class=\"token number\">0</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token keyword\">raise</span> ValueError<span class=\"token punctuation\">(</span><span class=\"token string\">'invalid value: %s'</span> <span class=\"token operator\">%</span> s<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token number\">10</span> <span class=\"token operator\">/</span> n</pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">bar</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token keyword\">try</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        foo<span class=\"token punctuation\">(</span><span class=\"token string\">'0'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token keyword\">except</span> ValueError <span class=\"token keyword\">as</span> e<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'ValueError!'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token keyword\">raise</span>  <span class=\"token comment\"># raise è¯­å¥å¦‚æœä¸å¸¦ä»»ä½•å‚æ•°ï¼Œåˆ™ä¼šå°†é”™è¯¯åŸæ ·æŠ›å‡º</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>bar<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>æ­¤å¤–ï¼Œè¿˜å¯ä»¥åœ¨æ•è·å¼‚å¸¸ä¹‹åï¼Œå°†å¼‚å¸¸è¿›è¡Œè½¬æ¢å¹¶å†æ¬¡æŠ›å‡ºï¼Œä½†æ˜¯ï¼Œè¿™ç§å¼‚å¸¸è½¬æ¢æ“ä½œï¼Œåº”å½“è€ƒè™‘åˆ°é€»è¾‘çš„åˆç†æ€§ã€‚</p>\n<h4 id=\"è°ƒè¯•\"><a class=\"anchor\" href=\"#è°ƒè¯•\">#</a> è°ƒè¯•</h4>\n<p>åœ¨ç¼–ç æˆ–ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­ï¼Œéš¾å…ä¼šå‡ºç°å¾ˆå¤šé”™è¯¯ï¼Œä¸€ä¸ªè¿è¡Œè‰¯å¥½çš„ç¨‹åºï¼Œé€šå¸¸éƒ½éœ€è¦ç»è¿‡ä¸€å®šçš„è°ƒè¯•ã€‚åœ¨è°ƒè¯•è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡  <code>print()</code>  çš„æ–¹å¼å°†ä¸€äº›å¯¹è±¡å€¼è¾“å‡ºåˆ°æ§åˆ¶å°æŸ¥çœ‹ï¼Œä½†è¿™ç§æ–¹å¼å¹¶ä¸æ¨èï¼Œå› ä¸ºå¯¹ç¨‹åºè€Œè¨€ï¼Œ  <code>print()</code>  è¯­å¥æœ¬èº«å¹¶æ— ä»»ä½•ä½œç”¨ã€‚å› æ­¤ï¼Œåœ¨é€šå¸¸çš„è°ƒè¯•è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ–­è¨€æ¥è¾…åŠ©è¿›è¡Œè°ƒè¯•ï¼Œå‡¡æ˜¯å¯ä»¥é€šè¿‡ print æ¥è¾…åŠ©æŸ¥çœ‹çš„åœ°æ–¹ï¼Œéƒ½å¯ä»¥ä½¿ç”¨ assert è¿›è¡Œæ–­è¨€ã€‚</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">foo</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    n <span class=\"token operator\">=</span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">assert</span> n <span class=\"token operator\">!=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'n is zero!'</span>  <span class=\"token comment\"># AssertionError: n is zero!</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token number\">10</span> <span class=\"token operator\">/</span> n</pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    foo<span class=\"token punctuation\">(</span><span class=\"token string\">'0'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>main<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>å½“æ–­è¨€è¯­å¥åˆ¤æ–­ä¸º False æ—¶ï¼Œå°±ä¼šæŠ›å‡ºä¸€ä¸ª  <code>AssertionError</code>  é”™è¯¯ã€‚</p>\n<p>å¦‚æœåœ¨ Python äº¤äº’ç¯å¢ƒä¸­æ‰§è¡Œç¨‹åºï¼Œå¯ä»¥æŒ‡å®šæ˜¯å¦å¼€å¯æ–­è¨€è°ƒè¯•ï¼Œé»˜è®¤å¼€å¯ï¼Œä¹Ÿå¯ä»¥é€šè¿‡å¦‚ä¸‹æ–¹å¼å…³é—­ï¼š</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>$ python -O err.py</pre></td></tr></table></figure><p>é™¤äº†ä½¿ç”¨æ–­è¨€ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨  <code>logging</code>  çš„æ–¹å¼æ¥è®°å½•é”™è¯¯ä¿¡æ¯ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> logging</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>logging<span class=\"token punctuation\">.</span>basicConfig<span class=\"token punctuation\">(</span>level<span class=\"token operator\">=</span>logging<span class=\"token punctuation\">.</span>INFO<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># æŒ‡å®šæ—¥å¿—çº§åˆ«</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>s <span class=\"token operator\">=</span> <span class=\"token string\">'0'</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>n <span class=\"token operator\">=</span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>logging<span class=\"token punctuation\">.</span>info<span class=\"token punctuation\">(</span><span class=\"token string\">'n = %d'</span> <span class=\"token operator\">%</span> n<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span> <span class=\"token operator\">/</span> n<span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p><code>logging</code>  å…è®¸æŒ‡å®šè®°å½•ä¿¡æ¯çš„çº§åˆ«ï¼Œä¸»è¦æœ‰  <code>debug</code> ï¼Œ <code>info</code> ï¼Œ <code>warning</code> ï¼Œ <code>error</code>  ç­‰å‡ ä¸ªçº§åˆ«ã€‚</p>\n<p>Python æ—¥å¿—çº§åˆ«ï¼š</p>\n<table>\n<thead>\n<tr>\n<th>çº§åˆ«</th>\n<th>æ—¥å¿—å‡½æ•°</th>\n<th>æè¿°</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>DEBUG</td>\n<td>logging.debug()</td>\n<td>æœ€ä½çº§åˆ«ï¼Œè¿½è¸ªé—®é¢˜æ—¶ä½¿ç”¨ã€‚</td>\n</tr>\n<tr>\n<td>INFO</td>\n<td><span class=\"exturl\" data-url=\"aHR0cDovL2xvZ2dpbmcuaW5mbw==\">logging.info</span>()</td>\n<td>è®°å½•ç¨‹åºä¸­ä¸€èˆ¬äº‹ä»¶çš„ä¿¡æ¯ï¼Œæˆ–ç¡®è®¤ä¸€åˆ‡å·¥ä½œæ­£å¸¸ã€‚</td>\n</tr>\n<tr>\n<td>WARNING</td>\n<td>logging.warning()</td>\n<td>è®°å½•ä¿¡æ¯ï¼Œç”¨äºè­¦å‘Šã€‚</td>\n</tr>\n<tr>\n<td>ERROR</td>\n<td>logging.error()</td>\n<td>ç”¨äºè®°å½•ç¨‹åºæŠ¥é”™ä¿¡æ¯ã€‚</td>\n</tr>\n<tr>\n<td>CRITICAL</td>\n<td>logging.critical()</td>\n<td>æœ€é«˜çº§åˆ«ï¼Œè®°å½•å¯èƒ½å¯¼è‡´ç¨‹åºå´©æºƒçš„é”™è¯¯ã€‚</td>\n</tr>\n</tbody>\n</table>\n<p>å¦å¤–ï¼Œè¿˜å¯ä»¥ä½¿ç”¨ Python çš„  <code>pdb</code>  è°ƒè¯•å™¨ï¼Œè®©ç¨‹åºä»¥å•æ­¥æ–¹å¼è¿è¡Œï¼Œå¯ä»¥éšæ—¶æŸ¥çœ‹è¿è¡ŒçŠ¶æ€ã€‚</p>\n<p><span class=\"label danger\">â—ï¸TODO</span> å¾…å®Œå–„</p>\n<p>ä½†ä¸€äº›åŠŸèƒ½è¾ƒä¸ºå¼ºå¤§çš„ IDE å·¥å…·ï¼Œä¸€èˆ¬éƒ½åŒ…å«æœ‰ååˆ†ä¾¿æ·çš„è°ƒè¯•å·¥å…·ï¼Œä½¿ç”¨è¿™äº› IDE æä¾›çš„è°ƒè¯•å·¥å…·ï¼Œé€šå¸¸æ˜¯æœ€æ–¹ä¾¿çš„ã€‚</p>\n<h4 id=\"å•å…ƒæµ‹è¯•\"><a class=\"anchor\" href=\"#å•å…ƒæµ‹è¯•\">#</a> å•å…ƒæµ‹è¯•</h4>\n<p>å•å…ƒæµ‹è¯•æ˜¯ç”¨æ¥å¯¹ä¸€ä¸ªæ¨¡å—ã€ä¸€ä¸ªå‡½æ•°æˆ–è€…ä¸€ä¸ªç±»æ¥è¿›è¡Œæ­£ç¡®æ€§æ£€éªŒçš„æµ‹è¯•å·¥ä½œã€‚</p>\n<p>ä¸ºäº†ç¼–å†™å•å…ƒæµ‹è¯•ï¼Œæˆ‘ä»¬éœ€è¦å¼•å…¥ Python è‡ªå¸¦çš„  <code>unittest</code>  æ¨¡å—ï¼Œç¼–å†™å•å…ƒæµ‹è¯•æ—¶ä½¿ç”¨çš„æµ‹è¯•ç±»ï¼Œé€šå¸¸éƒ½æ˜¯ä»  <code>unittest.TestCase</code>  ç»§æ‰¿è€Œæ¥ï¼Œç±»ä¸­çš„æ–¹æ³•ä»¥  <code>test</code>  å¼€å¤´ï¼Œå°±æ ‡è¯†ä¸ºæµ‹è¯•æ–¹æ³•ï¼Œåä¹‹ï¼Œä¸ä»¥  <code>test</code>  å¼€å¤´çš„æ–¹æ³•å°±ä¸ä¼šè¢«æ ‡è¯†ä¸ºæµ‹è¯•æ–¹æ³•ï¼Œæµ‹è¯•çš„æ—¶å€™ä¹Ÿå°±ä¸ä¼šè¢«æ‰§è¡Œã€‚</p>\n<p>å¯¹æ¯ä¸€ç±»æµ‹è¯•éƒ½éœ€è¦ç¼–å†™ä¸€ä¸ª  <code>test_xxx()</code>  æ–¹æ³•ã€‚ç”±äº  <code>unittest.TestCase</code>  æä¾›äº†å¾ˆå¤šå†…ç½®çš„æ¡ä»¶åˆ¤æ–­ï¼Œæˆ‘ä»¬åªéœ€è¦è°ƒç”¨è¿™äº›æ–¹æ³•å°±å¯ä»¥æ–­è¨€è¾“å‡ºæ˜¯å¦æ˜¯æˆ‘ä»¬æ‰€æœŸæœ›çš„ã€‚æœ€å¸¸ç”¨çš„æ–­è¨€å°±æ˜¯  <code>assertEqual()</code>  ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>self<span class=\"token punctuation\">.</span>assertEqual<span class=\"token punctuation\">(</span><span class=\"token builtin\">abs</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># æ–­è¨€è¿”å›ç»“æœä¸é¢„æœŸç»“æœæ˜¯å¦ç›¸ç­‰</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">with</span> self<span class=\"token punctuation\">.</span>assertRaises<span class=\"token punctuation\">(</span>KeyError<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>  <span class=\"token comment\"># æ–­è¨€æŠ›å‡ºé¢„æœŸç±»å‹çš„ Error</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    value <span class=\"token operator\">=</span> d<span class=\"token punctuation\">[</span><span class=\"token string\">'empty'</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">with</span> self<span class=\"token punctuation\">.</span>assertRaises<span class=\"token punctuation\">(</span>AttributeError<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    value <span class=\"token operator\">=</span> d<span class=\"token punctuation\">.</span>empty</pre></td></tr></table></figure><p>è¦è¿è¡Œä¸€ä¸ªå•å…ƒæµ‹è¯•ï¼Œåªéœ€è¦åœ¨å½“å‰  <code>.py</code>  æ–‡ä»¶æœ«å°¾åŠ ä¸Šå¦‚ä¸‹ä»£ç å³å¯ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">if</span> __name__ <span class=\"token operator\">==</span> <span class=\"token string\">'__main__'</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    unittest<span class=\"token punctuation\">.</span>main<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>è¿™æ ·å°±å¯ä»¥å°†æµ‹è¯•ä»£ç å½“åšæ­£å¸¸çš„ Python è„šæœ¬æ‰§è¡Œã€‚</p>\n<p>ä½†å¦‚æœåœ¨ Python äº¤äº’ç¯å¢ƒä¸­ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥åŠ å…¥å‚æ•°  <code>-m unittest</code>  æ¥è¿è¡Œå•å…ƒæµ‹è¯•ï¼š</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>$ python -m unittest main</pre></td></tr></table></figure><p>å¦‚æœè¦å¯¹æ¯ä¸ªå•å…ƒæµ‹è¯•æ–¹æ³•çš„è°ƒç”¨æ—¶æœºè¿›è¡Œç›‘æ§ï¼Œå¯ä»¥ä½¿ç”¨  <code>setUp()</code>  å’Œ  <code>tearDown()</code>  è¿™ä¸¤ä¸ªç‰¹æ®Šçš„æ–¹æ³•æ¥å®ç°ã€‚è¿™ä¸¤ä¸ªæ–¹æ³•ä¼šåˆ†åˆ«åœ¨æ¯ä¸€ä¸ªæµ‹è¯•æ–¹æ³•è°ƒç”¨å‰åæ‰§è¡Œã€‚</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">setUp</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'test start...'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">tearDown</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'test end...'</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><h4 id=\"æ–‡æ¡£æµ‹è¯•\"><a class=\"anchor\" href=\"#æ–‡æ¡£æµ‹è¯•\">#</a> æ–‡æ¡£æµ‹è¯•</h4>\n<p>Python å†…ç½®çš„æ–‡æ¡£æµ‹è¯•ï¼ˆdoctestï¼‰æ¨¡å—å¯ä»¥ç›´æ¥æå–æ³¨é‡Šä¸­çš„ä»£ç å¹¶æ‰§è¡Œæµ‹è¯•ã€‚</p>\n<p><span class=\"label danger\">â—ï¸TODO</span> å¾…å®Œå–„</p>\n<h3 id=\"ioç¼–ç¨‹\"><a class=\"anchor\" href=\"#ioç¼–ç¨‹\">#</a> IO ç¼–ç¨‹</h3>\n<p>IO åœ¨è®¡ç®—æœºä¸­é€šå¸¸æ˜¯æŒ‡ Input/Outputï¼Œä¹Ÿå°±æ˜¯è¾“å…¥å’Œè¾“å‡ºã€‚</p>\n<p>åœ¨ IO ç¼–ç¨‹ä¸­ï¼ŒStreamï¼ˆæµï¼‰æ˜¯ä¸€ä¸ªå¾ˆé‡è¦çš„æ¦‚å¿µã€‚</p>\n<p>æ“ä½œ IO çš„èƒ½åŠ›éƒ½æ˜¯ç”±æ“ä½œç³»ç»Ÿæä¾›çš„ï¼Œæ¯ä¸€ç§ç¼–ç¨‹è¯­è¨€éƒ½ä¼šæŠŠæ“ä½œç³»ç»Ÿæä¾›çš„ä½çº§ C æ¥å£å°è£…èµ·æ¥æ–¹ä¾¿ä½¿ç”¨ï¼ŒPython ä¹Ÿä¸ä¾‹å¤–ã€‚</p>\n<blockquote>\n<p>ä¸€èˆ¬æ¥è¯´ï¼Œå¼‚æ­¥ IO çš„å¤æ‚åº¦è¿œè¿œé«˜äºåŒæ­¥ IOã€‚</p>\n</blockquote>\n<h4 id=\"æ–‡ä»¶çš„è¯»å†™\"><a class=\"anchor\" href=\"#æ–‡ä»¶çš„è¯»å†™\">#</a> æ–‡ä»¶çš„è¯»å†™</h4>\n<p>è¯»å†™æ–‡ä»¶æ˜¯æœ€å¸¸è§çš„ IO æ“ä½œã€‚Python å†…ç½®äº†è¯»å†™æ–‡ä»¶çš„å‡½æ•°ï¼Œç”¨æ³•å’Œ C æ˜¯å…¼å®¹çš„ã€‚</p>\n<p>åœ¨ç£ç›˜ä¸Šè¯»å†™æ–‡ä»¶çš„åŠŸèƒ½å…¶å®éƒ½æ˜¯ç”±æ“ä½œç³»ç»Ÿæä¾›çš„ï¼Œç°ä»£æ“ä½œç³»ç»Ÿä¸å…è®¸æ™®é€šçš„ç¨‹åºç›´æ¥æ“ä½œç£ç›˜ï¼Œæ‰€ä»¥ï¼Œè¯»å†™æ–‡ä»¶å°±æ˜¯è¯·æ±‚æ“ä½œç³»ç»Ÿæ‰“å¼€ä¸€ä¸ªæ–‡ä»¶å¯¹è±¡ï¼ˆé€šå¸¸ç§°ä¸ºæ–‡ä»¶æè¿°ç¬¦ï¼‰ï¼Œç„¶åï¼Œé€šè¿‡æ“ä½œç³»ç»Ÿæä¾›çš„æ¥å£ä»è¿™ä¸ªæ–‡ä»¶å¯¹è±¡ä¸­è¯»å–æ•°æ®ï¼ˆè¯»æ–‡ä»¶ï¼‰ï¼Œæˆ–è€…æŠŠæ•°æ®å†™å…¥è¿™ä¸ªæ–‡ä»¶å¯¹è±¡ï¼ˆå†™æ–‡ä»¶ï¼‰ã€‚</p>\n<p>è¦ä»¥è¯»æ–‡ä»¶çš„æ¨¡å¼æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶å¯¹è±¡ï¼Œéœ€è¦ä½¿ç”¨ Python å†…ç½®çš„  <code>open()</code>  å‡½æ•°ï¼Œå¹¶ä¼ å…¥æ–‡ä»¶åå’Œæ ‡ç¤ºç¬¦ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>f <span class=\"token operator\">=</span> <span class=\"token boolean\">None</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">try</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    f <span class=\"token operator\">=</span> <span class=\"token builtin\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">'C:\\\\Users\\\\Administrator\\\\Desktop\\\\test.txt'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'r'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>f<span class=\"token punctuation\">.</span><span class=\"token builtin\">buffer</span><span class=\"token punctuation\">.</span>read<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">except</span> FileNotFoundError <span class=\"token keyword\">as</span> e<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">finally</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    f<span class=\"token punctuation\">.</span>close<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>å…¶ä¸­ï¼Œå‚æ•°  <code>r</code>  è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªè¯»æ“ä½œï¼Œå¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ï¼Œå°±ä¼šæŠ›å‡ºä¸€ä¸ª  <code>IOError</code>  é”™è¯¯ï¼Œå¹¶å‘ŠçŸ¥æ–‡ä»¶ä¸å­˜åœ¨ï¼›è°ƒç”¨  <code>read()</code>  æ–¹æ³•å¯ä»¥è¯»å–æ–‡ä»¶ä¸­çš„å†…å®¹ï¼Œå¹¶è¿”å›å­—ç¬¦ä¸²ï¼›è€Œå½“æ–‡ä»¶è¯»å–å®Œæ¯•åï¼Œéœ€è¦è°ƒç”¨  <code>close()</code>  æ–¹æ³•å…³é—­æ–‡ä»¶ã€‚</p>\n<blockquote>\n<p>æ–‡ä»¶ä½¿ç”¨å®Œåå¿…é¡»å…³é—­ï¼Œå› ä¸ºæ–‡ä»¶å¯¹è±¡ä¼šå ç”¨æ“ä½œç³»ç»Ÿçš„èµ„æºï¼Œå¹¶ä¸”æ“ä½œç³»ç»ŸåŒä¸€æ—¶é—´å¯æ‰“å¼€çš„æ–‡ä»¶æ•°é‡æ˜¯æœ‰é™çš„ï¼Œ  <code>close()</code>  æ–¹æ³•åº”å½“æ”¾åœ¨ finally è¯­å¥å—ä¸­ï¼Œä¿è¯å…¶ä¸€å®šä¼šæ‰§è¡Œã€‚</p>\n</blockquote>\n<p>æˆ‘ä»¬å¯ä»¥åœ¨ finally è¯­å¥å—ä¸­å…³é—­æ–‡ä»¶ï¼Œä½†æœ‰æ—¶å€™ä¼šæ˜¾å¾—æ¯”è¾ƒéº»çƒ¦ï¼ŒPython ä¸ºæ­¤ä¹Ÿå¼•å…¥äº†ä¸€ä¸ª  <code>with</code>  è¯­å¥æ¥å¸®åŠ©è‡ªåŠ¨è°ƒç”¨å…³é—­æ–‡ä»¶çš„æ–¹æ³•ã€‚</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">with</span> <span class=\"token builtin\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">'C:\\\\Users\\\\Administrator\\\\Desktop\\\\test.txt'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'r'</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> f<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    buf <span class=\"token operator\">=</span> f<span class=\"token punctuation\">.</span><span class=\"token builtin\">buffer</span><span class=\"token punctuation\">.</span>read<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>buf<span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>ç”±äº read æ–¹æ³•é»˜è®¤ä¼šè¯»å–æ–‡ä»¶çš„å…¨éƒ¨å†…å®¹ï¼Œä½†å¦‚æœæ–‡ä»¶æœ¬èº«è¾ƒå¤§ï¼Œåˆ™åº”å½“é€šè¿‡  <code>read(size)</code>  æ¥é™å®šè¯»å–æ–‡ä»¶çš„å¤§å°ï¼Œå¦‚æœéœ€è¦é€è¡Œè¯»å–ï¼Œå¯ä»¥ä½¿ç”¨  <code>readlines()</code>  æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•çš„è¿”å›å€¼æ—¶ä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„ã€‚</p>\n<p>å¦‚æœéœ€è¦è¯»å–ä¸€ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶ï¼Œæ¯”å¦‚å›¾ç‰‡ã€è§†é¢‘ç­‰ï¼Œæ‰“å¼€æ–‡ä»¶æ—¶å°±éœ€è¦æŒ‡å®šå‚æ•°ä¸º  <code>rb</code>  ã€‚</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># æ‰“å¼€å›¾ç‰‡æ–‡ä»¶</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">with</span> <span class=\"token builtin\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">'C:\\\\Users\\\\Administrator\\\\Desktop\\\\img\\\\avatar.jpg'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'rb'</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> f<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    buf <span class=\"token operator\">=</span> f<span class=\"token punctuation\">.</span>read<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>buf<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># è¾“å‡ºåå…­è¿›åˆ¶çš„å­—èŠ‚</span></pre></td></tr></table></figure><p>å¦‚æœè¯»å–æ—¶å€™çš„ç¼–ç ä¸å¯¹ï¼Œå°±å¾ˆæœ‰å¯èƒ½ä¼šå¯¼è‡´ä¹±ç ï¼Œå› æ­¤ï¼Œåœ¨æ‰“å¼€æ–‡ä»¶æ—¶ä¹Ÿå¯ä»¥æŒ‡å®šè¯»å–æ–‡ä»¶æ‰€ä½¿ç”¨çš„ç¼–ç ã€‚</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">with</span> <span class=\"token builtin\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">'C:\\\\Users\\\\Administrator\\\\Desktop\\\\test.txt'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'r'</span><span class=\"token punctuation\">,</span> encoding<span class=\"token operator\">=</span><span class=\"token string\">'utf-8'</span><span class=\"token punctuation\">,</span> errors<span class=\"token operator\">=</span><span class=\"token string\">'ignore'</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> f<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    buf <span class=\"token operator\">=</span> f<span class=\"token punctuation\">.</span><span class=\"token builtin\">buffer</span><span class=\"token punctuation\">.</span>readlines<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>buf<span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>åŒæ—¶ï¼Œå½“è¯»å–æ–‡ä»¶ä¸­å‡ºç°éæ³•ç¼–ç å†…å®¹ï¼Œå¯ä»¥é€šè¿‡æŒ‡å®š  <code>errors</code>  å‚æ•°è¿›è¡Œå¤„ç†ã€‚</p>\n<p>å†™æ–‡ä»¶ä¸è¯»æ–‡ä»¶åŸºæœ¬ä¸€æ ·ï¼Œåªæ˜¯åœ¨æ‰“å¼€æ–‡ä»¶æ—¶æŒ‡å®šå‚æ•°ä¸º  <code>w</code>  æˆ–  <code>wb</code>  å³å¯ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">with</span> <span class=\"token builtin\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">'C:\\\\Users\\\\Administrator\\\\Desktop\\\\test.txt'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'w'</span><span class=\"token punctuation\">,</span> encoding<span class=\"token operator\">=</span><span class=\"token string\">'gbk'</span><span class=\"token punctuation\">,</span> errors<span class=\"token operator\">=</span><span class=\"token string\">'ignore'</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> f<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    f<span class=\"token punctuation\">.</span>write<span class=\"token punctuation\">(</span><span class=\"token string\">'How are you?'</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><blockquote>\n<p>å¯ä»¥åå¤è°ƒç”¨  <code>write()</code>  æ¥å†™å…¥æ–‡ä»¶ï¼Œä½†æ˜¯å†™å…¥å®Œæ¯•ååŠ¡å¿…è¦å…³é—­æ–‡ä»¶ã€‚å½“æˆ‘ä»¬å†™æ–‡ä»¶æ—¶ï¼Œæ“ä½œç³»ç»Ÿå¾€å¾€ä¸ä¼šç«‹åˆ»æŠŠæ•°æ®å†™å…¥ç£ç›˜ï¼Œè€Œæ˜¯æ”¾åˆ°å†…å­˜ç¼“å­˜èµ·æ¥ï¼Œç©ºé—²çš„æ—¶å€™å†æ…¢æ…¢å†™å…¥ã€‚åªæœ‰è°ƒç”¨å…³é—­æ–¹æ³•æ—¶ï¼Œæ“ä½œç³»ç»Ÿæ‰ä¿è¯æŠŠæ²¡æœ‰å†™å…¥çš„æ•°æ®å…¨éƒ¨å†™å…¥ç£ç›˜ã€‚å¿˜è®°è°ƒç”¨å…³é—­æ–¹æ³•çš„åæœæ˜¯æ•°æ®å¯èƒ½åªå†™äº†ä¸€éƒ¨åˆ†åˆ°ç£ç›˜ï¼Œå‰©ä¸‹çš„ä¸¢å¤±äº†ã€‚æ‰€ä»¥ï¼Œåœ¨è¯»å†™æ–‡ä»¶æ—¶æœ€åéƒ½ä½¿ç”¨  <code>with</code>  è¯­å¥ã€‚</p>\n</blockquote>\n<p>ä½¿ç”¨  <code>a</code>  å‚æ•°ï¼Œå¯ä»¥è®¾ç½®ä¸ºè¿½åŠ æ¨¡å¼ï¼Œåœ¨åŸæ–‡ä»¶å†…å®¹çš„åŸºç¡€ä¸Šï¼Œè¿½åŠ æ–°çš„å†…å®¹ã€‚</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">with</span> <span class=\"token builtin\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">'C:\\\\Users\\\\Administrator\\\\Desktop\\\\test.txt'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'a'</span><span class=\"token punctuation\">,</span> encoding<span class=\"token operator\">=</span><span class=\"token string\">'gbk'</span><span class=\"token punctuation\">,</span> errors<span class=\"token operator\">=</span><span class=\"token string\">'ignore'</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> f<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    f<span class=\"token punctuation\">.</span>write<span class=\"token punctuation\">(</span><span class=\"token string\">'\\rI\\'m fine, thank you!'</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><h4 id=\"stringio-ä¸-bytesio\"><a class=\"anchor\" href=\"#stringio-ä¸-bytesio\">#</a> StringIO ä¸ BytesIO</h4>\n<p>å¾ˆå¤šä¼šåæ•°æ®è¯»å†™å¹¶ä¸ä¸€å®šæ˜¯æ“ä½œæ–‡ä»¶ï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯åœ¨å†…å­˜ä¸­è¿›è¡Œè¯»å†™ï¼Œ <code>StringIO</code>  å°±æ˜¯ç”¨æ¥è¯»å†™å†…å­˜ä¸­çš„å­—ç¬¦ä¸²ã€‚</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">from</span> io <span class=\"token keyword\">import</span> StringIO</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>f1 <span class=\"token operator\">=</span> StringIO<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>f1<span class=\"token punctuation\">.</span>write<span class=\"token punctuation\">(</span><span class=\"token string\">'Hello'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>f1<span class=\"token punctuation\">.</span>write<span class=\"token punctuation\">(</span><span class=\"token string\">' '</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>f1<span class=\"token punctuation\">.</span>write<span class=\"token punctuation\">(</span><span class=\"token string\">'Mike!'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>f1<span class=\"token punctuation\">.</span>getvalue<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># Hello Mike! # è·å–å†™å…¥åçš„å­—ç¬¦ä¸²å†…å®¹</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>f2 <span class=\"token operator\">=</span> StringIO<span class=\"token punctuation\">(</span><span class=\"token string\">'Hello Jack!\\nHow are you?\\nI\\'m fine, thanks!'</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># ä¹Ÿå¯ä»¥ä½¿ç”¨å­—ç¬¦ä¸²åˆå§‹åŒ– StringIO</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token keyword\">while</span> <span class=\"token boolean\">True</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    s <span class=\"token operator\">=</span> f2<span class=\"token punctuation\">.</span>readline<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token keyword\">if</span> s <span class=\"token operator\">==</span> <span class=\"token string\">''</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token keyword\">break</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">.</span>strip<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>åŒç†ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨  <code>BytesIO</code>  æ¥æ“ä½œå†…å­˜ä¸­çš„å­—èŠ‚æ•°ç»„ã€‚</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">from</span> io <span class=\"token keyword\">import</span> BytesIO</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>f1 <span class=\"token operator\">=</span> BytesIO<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>f1<span class=\"token punctuation\">.</span>write<span class=\"token punctuation\">(</span><span class=\"token string\">'ä¸­æ–‡'</span><span class=\"token punctuation\">.</span>encode<span class=\"token punctuation\">(</span><span class=\"token string\">'utf-8'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># å†™å…¥ bytes</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>f1<span class=\"token punctuation\">.</span>getvalue<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># b'\\xe4\\xb8\\xad\\xe6\\x96\\x87'</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>f2 <span class=\"token operator\">=</span> BytesIO<span class=\"token punctuation\">(</span><span class=\"token string\">b'\\xe4\\xb8\\xad\\xe6\\x96\\x87'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>f2<span class=\"token punctuation\">.</span>read<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><h4 id=\"æ“ä½œæ–‡ä»¶å’Œç›®å½•\"><a class=\"anchor\" href=\"#æ“ä½œæ–‡ä»¶å’Œç›®å½•\">#</a> æ“ä½œæ–‡ä»¶å’Œç›®å½•</h4>\n<p>ä½¿ç”¨ Python æä¾›çš„  <code>os</code>  æ¨¡å—ï¼Œå¯ä»¥æ“ä½œç³»ç»Ÿçš„æ–‡ä»¶å’Œç›®å½•ã€‚</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> os</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>os<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># nt åˆ™è¡¨ç¤º windowsï¼Œposix åˆ™è¡¨ç¤º Linuxï¼ŒUnix æˆ– Mac Os X</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>os<span class=\"token punctuation\">.</span>uname<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># è·å–æ›´åŠ è¯¦ç»†çš„æ“ä½œç³»ç»Ÿä¿¡æ¯ï¼ˆä¸æ”¯æŒ windowsï¼‰</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>os<span class=\"token punctuation\">.</span>environ<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># æŸ¥çœ‹æ“ä½œç³»ç»Ÿä¸­å®šä¹‰çš„ç¯å¢ƒå˜é‡</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>os<span class=\"token punctuation\">.</span>environ<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">'JAVA_HOME'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Invalid key!'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># è·å–æŸä¸ªå…·ä½“çš„ç¯å¢ƒå˜é‡</span></pre></td></tr></table></figure><p>æ“ä½œæ–‡ä»¶å’Œç›®å½•çš„å‡½æ•°ä¸€éƒ¨åˆ†æ”¾åœ¨  <code>os</code>  æ¨¡å—ä¸­ï¼Œä¸€éƒ¨åˆ†æ”¾åœ¨  <code>os.path</code>  æ¨¡å—ä¸­ã€‚</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> os</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>os<span class=\"token punctuation\">.</span>path<span class=\"token punctuation\">.</span>abspath<span class=\"token punctuation\">(</span><span class=\"token string\">'.'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># æŸ¥çœ‹å½“å‰æ–‡ä»¶çš„ç»å¯¹è·¯å¾„</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>path <span class=\"token operator\">=</span> os<span class=\"token punctuation\">.</span>path<span class=\"token punctuation\">.</span>join<span class=\"token punctuation\">(</span><span class=\"token string\">'A:\\\\python'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'workspace'</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># ç›®å½•è·¯å¾„</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>path<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># A:\\python\\workspace</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>os<span class=\"token punctuation\">.</span>path<span class=\"token punctuation\">.</span>split<span class=\"token punctuation\">(</span>path<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># ('A:\\\\', 'python')</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>os<span class=\"token punctuation\">.</span>path<span class=\"token punctuation\">.</span>split<span class=\"token punctuation\">(</span><span class=\"token string\">'/usr/chinmoku/test/file.txt'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># ('/usr/chinmoku/test', 'file.txt')</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>os<span class=\"token punctuation\">.</span>path<span class=\"token punctuation\">.</span>splitext<span class=\"token punctuation\">(</span><span class=\"token string\">'/usr/chinmoku/test/file.txt'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># ('/usr/chinmoku/test/file', '.txt') # å¯ä»¥ç›´æ¥å¾—åˆ°æ–‡ä»¶çš„æ‰©å±•å</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>os<span class=\"token punctuation\">.</span>mkdir<span class=\"token punctuation\">(</span>path<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># åœ¨æŒ‡å®šä½ç½®åˆ›å»ºç›®å½•</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>os<span class=\"token punctuation\">.</span>rmdir<span class=\"token punctuation\">(</span>path<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># åˆ é™¤æŒ‡å®šä½ç½®çš„ç›®å½•</span></pre></td></tr></table></figure><blockquote>\n<p>æŠŠä¸¤ä¸ªè·¯å¾„åˆæˆä¸€ä¸ªæ—¶ï¼Œä¸è¦ç›´æ¥æ‹¼å­—ç¬¦ä¸²ï¼Œè€Œè¦é€šè¿‡  <code>os.path.join()</code>  å‡½æ•°ï¼Œè¿™æ ·å¯ä»¥æ­£ç¡®å¤„ç†ä¸åŒæ“ä½œç³»ç»Ÿçš„è·¯å¾„åˆ†éš”ç¬¦ã€‚åŒç†ï¼Œæ‹†åˆ†è·¯å¾„æ—¶ï¼Œä¹Ÿåº”å½“é€šè¿‡  <code>os.path.split()</code>  å‡½æ•°è¿›è¡Œæ‹†åˆ†ã€‚</p>\n</blockquote>\n<p>å¦å¤–è¿˜æœ‰ä¸€äº›å…¶ä»–å¸¸ç”¨çš„æ–‡ä»¶æ“ä½œï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> os</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>os<span class=\"token punctuation\">.</span>rename<span class=\"token punctuation\">(</span><span class=\"token string\">'test.txt'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'test.py'</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># æ–‡ä»¶é‡å‘½å</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>os<span class=\"token punctuation\">.</span>remove<span class=\"token punctuation\">(</span><span class=\"token string\">'test.py'</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># åˆ é™¤æ–‡ä»¶</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>x <span class=\"token keyword\">for</span> x <span class=\"token keyword\">in</span> os<span class=\"token punctuation\">.</span>listdir<span class=\"token punctuation\">(</span><span class=\"token string\">'.'</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">if</span> os<span class=\"token punctuation\">.</span>path<span class=\"token punctuation\">.</span>isdir<span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># è¿‡æ»¤æ–‡ä»¶ï¼Œåˆ—å‡ºå½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰ç›®å½•</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>x <span class=\"token keyword\">for</span> x <span class=\"token keyword\">in</span> os<span class=\"token punctuation\">.</span>listdir<span class=\"token punctuation\">(</span><span class=\"token string\">'.'</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">if</span> os<span class=\"token punctuation\">.</span>path<span class=\"token punctuation\">.</span>isfile<span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span> <span class=\"token keyword\">and</span> os<span class=\"token punctuation\">.</span>path<span class=\"token punctuation\">.</span>splitext<span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token operator\">==</span><span class=\"token string\">'.py'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># åˆ—å‡ºå½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰ .py æ–‡ä»¶</span></pre></td></tr></table></figure><h4 id=\"åºåˆ—åŒ–\"><a class=\"anchor\" href=\"#åºåˆ—åŒ–\">#</a> åºåˆ—åŒ–</h4>\n<p>åœ¨ç¨‹åºè¿è¡Œçš„è¿‡ç¨‹ä¸­ï¼Œæ‰€æœ‰çš„å˜é‡éƒ½æ˜¯åœ¨å†…å­˜ä¸­ï¼Œå¯ä»¥éšæ—¶ä¿®æ”¹ï¼Œä½†æ˜¯ä¸€æ—¦ç¨‹åºç»“æŸï¼Œå˜é‡æ‰€å ç”¨çš„å†…å­˜å°±è¢«æ“ä½œç³»ç»Ÿå…¨éƒ¨å›æ”¶ã€‚å¦‚æœåœ¨æ­¤æœŸé—´æ²¡æœ‰å°†ä¿®æ”¹åçš„å€¼å­˜å‚¨åˆ°ç£ç›˜ä¸Šï¼Œä¸‹æ¬¡é‡æ–°è¿è¡Œç¨‹åºï¼Œå˜é‡åˆä¼šè¢«é‡æ–°åˆå§‹åŒ–ã€‚æˆ‘ä»¬æŠŠå˜é‡ä»å†…å­˜ä¸­å˜æˆå¯å­˜å‚¨æˆ–ä¼ è¾“çš„è¿‡ç¨‹ç§°ä¹‹ä¸ºåºåˆ—åŒ–ï¼Œåœ¨ Python ä¸­å«  <code>pickling</code>  ï¼Œåœ¨å…¶ä»–è¯­è¨€ä¸­ä¹Ÿè¢«ç§°ä¹‹ä¸º serializationï¼Œmarshallingï¼Œflattening ç­‰ç­‰ã€‚</p>\n<p>åºåˆ—åŒ–ä¹‹åï¼Œå°±å¯ä»¥æŠŠåºåˆ—åŒ–åçš„å†…å®¹å†™å…¥ç£ç›˜ï¼Œæˆ–è€…é€šè¿‡ç½‘ç»œä¼ è¾“åˆ°åˆ«çš„æœºå™¨ä¸Šã€‚åè¿‡æ¥ï¼ŒæŠŠå˜é‡å†…å®¹ä»åºåˆ—åŒ–çš„å¯¹è±¡é‡æ–°è¯»åˆ°å†…å­˜é‡Œç§°ä¹‹ä¸ºååºåˆ—åŒ–ï¼Œå³  <code>unpickling</code>  ã€‚Python æä¾›äº†  <code>pickle</code>  æ¨¡å—æ¥å®ç°åºåˆ—åŒ–ã€‚</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> pickle</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>d <span class=\"token operator\">=</span> <span class=\"token builtin\">dict</span><span class=\"token punctuation\">(</span>name<span class=\"token operator\">=</span><span class=\"token string\">'Bob'</span><span class=\"token punctuation\">,</span> age<span class=\"token operator\">=</span><span class=\"token number\">20</span><span class=\"token punctuation\">,</span> score<span class=\"token operator\">=</span><span class=\"token number\">88</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>buf <span class=\"token operator\">=</span> pickle<span class=\"token punctuation\">.</span>dumps<span class=\"token punctuation\">(</span>d<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># å°†ä»»æ„å¯¹è±¡è½¬æ¢ä¸º bytes</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>buf<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">with</span> <span class=\"token builtin\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">'C:\\\\Users\\\\Administrator\\\\Desktop\\\\test.txt'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'wb'</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> f<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token comment\"># f.write (buf) # å‘æ–‡ä»¶å†™å…¥ bytes</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    pickle<span class=\"token punctuation\">.</span>dump<span class=\"token punctuation\">(</span>d<span class=\"token punctuation\">,</span> f<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># åºåˆ—åŒ–å¹¶å†™å…¥æ–‡ä»¶</span></pre></td></tr></table></figure><p>è¯»å–è¢«åºåˆ—åŒ–çš„æ–‡ä»¶ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> pickle</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">with</span> <span class=\"token builtin\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">'C:\\\\Users\\\\Administrator\\\\Desktop\\\\test.txt'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'rb'</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> f<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    res <span class=\"token operator\">=</span> pickle<span class=\"token punctuation\">.</span>load<span class=\"token punctuation\">(</span>f<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>res<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># &#123;'name': 'Bob', 'age': 20, 'score': 88&#125;</span></pre></td></tr></table></figure><p>Python ä¹Ÿæä¾›äº†å¯¹ JSON æ•°æ®æ ¼å¼çš„æ”¯æŒï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆå®¹æ˜“åœ°å°†ä¸€ä¸ª Python å¯¹è±¡è½¬æ¢ä¸º JSON å¯¹è±¡ã€‚</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> json</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>d <span class=\"token operator\">=</span> <span class=\"token builtin\">dict</span><span class=\"token punctuation\">(</span>name<span class=\"token operator\">=</span><span class=\"token string\">'Bob'</span><span class=\"token punctuation\">,</span> age<span class=\"token operator\">=</span><span class=\"token number\">20</span><span class=\"token punctuation\">,</span> score<span class=\"token operator\">=</span><span class=\"token number\">88</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>s <span class=\"token operator\">=</span> json<span class=\"token punctuation\">.</span>dumps<span class=\"token punctuation\">(</span>d<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># å°† Python ç±»å‹åºåˆ—åŒ–ä¸º JSON å­—ç¬¦ä¸²</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># &#123;\"name\": \"Bob\", \"age\": 20, \"score\": 88&#125;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">isinstance</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">,</span> <span class=\"token builtin\">dict</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># False</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">isinstance</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">,</span> <span class=\"token builtin\">str</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># True</span></pre></td></tr></table></figure><p>åŒæ ·ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å°† JSON å­—ç¬¦ä¸²ååºåˆ—åŒ–ä¸º Python å¯¹è±¡ã€‚</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> json</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>obj <span class=\"token operator\">=</span> json<span class=\"token punctuation\">.</span>loads<span class=\"token punctuation\">(</span><span class=\"token string\">'&#123;\"name\": \"Bob\", \"age\": 20, \"score\": 88&#125;'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">isinstance</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">,</span> <span class=\"token builtin\">str</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># False</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">isinstance</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">,</span> <span class=\"token builtin\">dict</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># True</span></pre></td></tr></table></figure><p>ä½†å¯¹äºä¸€ä¸ª Python ç±»è¿›è¡Œåºåˆ—åŒ–æ“ä½œåˆ™æœ‰æ‰€ä¸åŒï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> json</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">Student</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">object</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">def</span> <span class=\"token function\">__init__</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> name<span class=\"token punctuation\">,</span> age<span class=\"token punctuation\">,</span> score<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        self<span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> name</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        self<span class=\"token punctuation\">.</span>age <span class=\"token operator\">=</span> age</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        self<span class=\"token punctuation\">.</span>score <span class=\"token operator\">=</span> score</pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">student2dict</span><span class=\"token punctuation\">(</span>std<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token string\">'name'</span><span class=\"token punctuation\">:</span> std<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token string\">'age'</span><span class=\"token punctuation\">:</span> std<span class=\"token punctuation\">.</span>age<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token string\">'score'</span><span class=\"token punctuation\">:</span> std<span class=\"token punctuation\">.</span>score</pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>s <span class=\"token operator\">=</span> Student<span class=\"token punctuation\">(</span><span class=\"token string\">'Bob'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">20</span><span class=\"token punctuation\">,</span> <span class=\"token number\">88</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token comment\"># print(json.dumps(s))  # TypeError: Object of type Student is not JSON serializable</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>json<span class=\"token punctuation\">.</span>dumps<span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">,</span> default<span class=\"token operator\">=</span>student2dict<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># &#123;\"name\": \"Bob\", \"age\": 20, \"score\": 88&#125;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token comment\"># æ–¹æ³•äºŒï¼šé€šå¸¸ç±»çš„å®ä¾‹éƒ½æœ‰ä¸€ä¸ª __dict__ å±æ€§ï¼Œå¯ä»¥å°†å®ä¾‹è½¬æ¢ä¸º dictï¼Œç”¨æ¥å­˜å‚¨å®ä¾‹å˜é‡</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>json<span class=\"token punctuation\">.</span>dumps<span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">,</span> default<span class=\"token operator\">=</span><span class=\"token keyword\">lambda</span> obj<span class=\"token punctuation\">:</span> obj<span class=\"token punctuation\">.</span>__dict__<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># &#123;\"name\": \"Bob\", \"age\": 20, \"score\": 88&#125;</span></pre></td></tr></table></figure><blockquote>\n<p>å¹¶ä¸æ˜¯æ‰€æœ‰ç±»çš„å®ä¾‹éƒ½æœ‰  <code>__dict__</code>  å±æ€§ï¼Œä¹Ÿæœ‰å°‘æ•°ä¾‹å¤–ï¼Œä¾‹å¦‚å®šä¹‰äº†  <code>__slots__</code>  çš„ç±»ã€‚</p>\n</blockquote>\n<p>å°† JSON å­—ç¬¦ä¸²ååºåˆ—åŒ–ä¸º Python ç±»ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> json</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">Student</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">object</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">def</span> <span class=\"token function\">__init__</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> name<span class=\"token punctuation\">,</span> age<span class=\"token punctuation\">,</span> score<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        self<span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> name</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        self<span class=\"token punctuation\">.</span>age <span class=\"token operator\">=</span> age</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        self<span class=\"token punctuation\">.</span>score <span class=\"token operator\">=</span> score</pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">dict2student</span><span class=\"token punctuation\">(</span>d<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token keyword\">return</span> Student<span class=\"token punctuation\">(</span>d<span class=\"token punctuation\">[</span><span class=\"token string\">'name'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> d<span class=\"token punctuation\">[</span><span class=\"token string\">'age'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> d<span class=\"token punctuation\">[</span><span class=\"token string\">'score'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>json_str <span class=\"token operator\">=</span> <span class=\"token string\">'&#123;\"name\": \"Bob\", \"age\": 20, \"score\": 88&#125;'</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>stu <span class=\"token operator\">=</span> json<span class=\"token punctuation\">.</span>loads<span class=\"token punctuation\">(</span>json_str<span class=\"token punctuation\">,</span> object_hook<span class=\"token operator\">=</span>dict2student<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">isinstance</span><span class=\"token punctuation\">(</span>stu<span class=\"token punctuation\">,</span> <span class=\"token builtin\">str</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># False</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">isinstance</span><span class=\"token punctuation\">(</span>stu<span class=\"token punctuation\">,</span> Student<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># True</span></pre></td></tr></table></figure><h3 id=\"è¿›ç¨‹å’Œçº¿ç¨‹\"><a class=\"anchor\" href=\"#è¿›ç¨‹å’Œçº¿ç¨‹\">#</a> è¿›ç¨‹å’Œçº¿ç¨‹</h3>\n<h4 id=\"å¤šè¿›ç¨‹\"><a class=\"anchor\" href=\"#å¤šè¿›ç¨‹\">#</a> å¤šè¿›ç¨‹</h4>\n<p>Unix/Linux æ“ä½œç³»ç»Ÿæä¾›äº†ä¸€ä¸ª  <code>fork()</code>  ç³»ç»Ÿè°ƒç”¨ï¼Œå®ƒéå¸¸ç‰¹æ®Šã€‚æ™®é€šçš„å‡½æ•°è°ƒç”¨ï¼Œè°ƒç”¨ä¸€æ¬¡ï¼Œè¿”å›ä¸€æ¬¡ï¼Œä½†æ˜¯  <code>fork()</code>  è°ƒç”¨ä¸€æ¬¡ï¼Œè¿”å›ä¸¤æ¬¡ï¼Œå› ä¸ºæ“ä½œç³»ç»Ÿè‡ªåŠ¨æŠŠå½“å‰è¿›ç¨‹ï¼ˆç§°ä¸ºçˆ¶è¿›ç¨‹ï¼‰å¤åˆ¶äº†ä¸€ä»½ï¼ˆç§°ä¸ºå­è¿›ç¨‹ï¼‰ï¼Œç„¶åï¼Œåˆ†åˆ«åœ¨çˆ¶è¿›ç¨‹å’Œå­è¿›ç¨‹å†…è¿”å›ã€‚</p>\n<p>å­è¿›ç¨‹æ°¸è¿œè¿”å› 0ï¼Œè€Œçˆ¶è¿›ç¨‹è¿”å›å­è¿›ç¨‹çš„ IDã€‚è¿™æ ·åšçš„ç†ç”±æ˜¯ï¼Œä¸€ä¸ªçˆ¶è¿›ç¨‹å¯ä»¥ fork å‡ºå¾ˆå¤šå­è¿›ç¨‹ï¼Œæ‰€ä»¥ï¼Œçˆ¶è¿›ç¨‹è¦è®°ä¸‹æ¯ä¸ªå­è¿›ç¨‹çš„ IDï¼Œè€Œå­è¿›ç¨‹åªéœ€è¦è°ƒç”¨  <code>getppid()</code>  å°±å¯ä»¥æ‹¿åˆ°çˆ¶è¿›ç¨‹çš„ IDã€‚</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> os</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Process (%s) start...'</span> <span class=\"token operator\">%</span> os<span class=\"token punctuation\">.</span>getpid<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>pid <span class=\"token operator\">=</span> os<span class=\"token punctuation\">.</span>fork<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># Only works on Unix/Linux/Mac</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">if</span> pid <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'I am child process (%s) and my parent is %s.'</span> <span class=\"token operator\">%</span> <span class=\"token punctuation\">(</span>os<span class=\"token punctuation\">.</span>getpid<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> os<span class=\"token punctuation\">.</span>getppid<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'I (%s) just created a child process (%s).'</span> <span class=\"token operator\">%</span> <span class=\"token punctuation\">(</span>os<span class=\"token punctuation\">.</span>getpid<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> pid<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token comment\"># Process (876) start...</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token comment\"># I (876) just created a child process (877).</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token comment\"># I am child process (877) and my parent is 876.</span></pre></td></tr></table></figure><p>Python åœ¨ Windows ç¯å¢ƒä¸­æ˜¯æ— æ³•è°ƒç”¨ fork å‡½æ•°çš„ï¼Œä½†æ˜¯è¿™å¹¶ä¸æ„å‘³ç€ Python æ— æ³•åœ¨ Windows ç¯å¢ƒä¸‹ç¼–å†™å¤šè¿›ç¨‹æœåŠ¡ï¼Œå› ä¸ºå®ƒæä¾›äº†ä¸€ä¸ªè·¨å¹³å°ç‰ˆæœ¬çš„å¤šè¿›ç¨‹æ¨¡å—  <code>multiprocessing</code>  ï¼Œè¿™ä¸ªæ¨¡å—æä¾›äº†ä¸€ä¸ª  <code>Process</code>  ç±»æ¥ä»£è¡¨ä¸€ä¸ªè¿›ç¨‹å¯¹è±¡ã€‚</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">from</span> multiprocessing <span class=\"token keyword\">import</span> Process</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> os</pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\"># å­è¿›ç¨‹è¦æ‰§è¡Œçš„ä»£ç </span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">run_proc</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Run child process %s (%s)...'</span> <span class=\"token operator\">%</span> <span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">,</span> os<span class=\"token punctuation\">.</span>getpid<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">if</span> __name__ <span class=\"token operator\">==</span> <span class=\"token string\">'__main__'</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Parent process %s.'</span> <span class=\"token operator\">%</span> os<span class=\"token punctuation\">.</span>getpid<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    p <span class=\"token operator\">=</span> Process<span class=\"token punctuation\">(</span>target<span class=\"token operator\">=</span>run_proc<span class=\"token punctuation\">,</span> args<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span><span class=\"token string\">'test'</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Child process will start.'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    p<span class=\"token punctuation\">.</span>start<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    p<span class=\"token punctuation\">.</span>join<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># join () æ–¹æ³•å¯ä»¥ç­‰å¾…å­è¿›ç¨‹ç»“æŸåå†ç»§ç»­å¾€ä¸‹è¿è¡Œï¼Œé€šå¸¸ç”¨äºè¿›ç¨‹é—´çš„åŒæ­¥ã€‚</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Child process end.'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token comment\"># Parent process 11284.</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token comment\"># Child process will start.</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token comment\"># Run child process test (6740)...</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token comment\"># Child process end.</span></pre></td></tr></table></figure><p>åˆ›å»ºå­è¿›ç¨‹æ—¶ï¼Œåªéœ€è¦ä¼ å…¥ä¸€ä¸ªæ‰§è¡Œå‡½æ•°å’Œå‡½æ•°çš„å‚æ•°ï¼Œå¹¶åˆ›å»ºä¸€ä¸ª  <code>Process</code>  å®ä¾‹ï¼Œç”¨  <code>start()</code>  æ–¹æ³•å¯åŠ¨å³å¯ã€‚</p>\n<p>ä½†å¦‚æœè¦å¯åŠ¨å¤§é‡çš„å­è¿›ç¨‹ï¼Œå¯ä»¥ç”¨è¿›ç¨‹æ± çš„æ–¹å¼æ‰¹é‡åˆ›å»ºå­è¿›ç¨‹ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">from</span> multiprocessing <span class=\"token keyword\">import</span> Pool</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> os<span class=\"token punctuation\">,</span> time<span class=\"token punctuation\">,</span> random</pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">long_time_task</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Run task-%s (%s)...'</span> <span class=\"token operator\">%</span> <span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">,</span> os<span class=\"token punctuation\">.</span>getpid<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    start <span class=\"token operator\">=</span> time<span class=\"token punctuation\">.</span>time<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    time<span class=\"token punctuation\">.</span>sleep<span class=\"token punctuation\">(</span>random<span class=\"token punctuation\">.</span>random<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    end <span class=\"token operator\">=</span> time<span class=\"token punctuation\">.</span>time<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Task-%s runs %0.2f seconds.'</span> <span class=\"token operator\">%</span> <span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>end <span class=\"token operator\">-</span> start<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token keyword\">if</span> __name__ <span class=\"token operator\">==</span> <span class=\"token string\">'__main__'</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Parent process %s.'</span> <span class=\"token operator\">%</span> os<span class=\"token punctuation\">.</span>getpid<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    p <span class=\"token operator\">=</span> Pool<span class=\"token punctuation\">(</span><span class=\"token number\">4</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># åˆ›å»ºè¿›ç¨‹æ± å¹¶æŒ‡å®šå¤§å°</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        p<span class=\"token punctuation\">.</span>apply_async<span class=\"token punctuation\">(</span>long_time_task<span class=\"token punctuation\">,</span> args<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">,</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Waiting for all subprocesses done...'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    p<span class=\"token punctuation\">.</span>close<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># è°ƒç”¨ join () ä¹‹å‰å¿…é¡»å…ˆè°ƒç”¨ close ()ï¼Œè°ƒç”¨ close () ä¹‹åå°±ä¸èƒ½ç»§ç»­æ·»åŠ æ–°çš„ Process äº†ã€‚</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    p<span class=\"token punctuation\">.</span>join<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'All subprocesses done.'</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p><code>Pool</code>  é»˜è®¤å¤§å°æ˜¯ CPU çš„æ ¸æ•°ï¼Œä½†ä¹Ÿå¯ä»¥ä¼ å…¥å‚æ•°æŒ‡å®šè¿›ç¨‹æ•°ï¼Œå¦‚æœå®é™…è¿è¡Œçš„è¿›ç¨‹æ•°è¶…å‡ºè¿›ç¨‹æ± å¤§å°ï¼Œè¶…å‡ºçš„è¿›ç¨‹å°†ç­‰å¾…è¿›ç¨‹æ± æœ‰ç©ºé—²åæ‰ä¼šæ‰§è¡Œã€‚</p>\n<p>å¾ˆå¤šæ—¶å€™ï¼Œå­è¿›ç¨‹å¹¶ä¸æ˜¯è‡ªèº«ï¼Œè€Œæ˜¯ä¸€ä¸ªå¤–éƒ¨è¿›ç¨‹ã€‚æˆ‘ä»¬åˆ›å»ºäº†å­è¿›ç¨‹åï¼Œè¿˜éœ€è¦æ§åˆ¶å­è¿›ç¨‹çš„è¾“å…¥å’Œè¾“å‡ºã€‚ <code>subprocess</code>  æ¨¡å—å¯ä»¥è®©æˆ‘ä»¬éå¸¸æ–¹ä¾¿åœ°å¯åŠ¨ä¸€ä¸ªå­è¿›ç¨‹ï¼Œç„¶åæ§åˆ¶å…¶è¾“å…¥å’Œè¾“å‡ºã€‚</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> subprocess</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'$ nslookup www.python.org'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>r <span class=\"token operator\">=</span> subprocess<span class=\"token punctuation\">.</span>call<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">'nslookup'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'www.baidu.com'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Exit code:'</span><span class=\"token punctuation\">,</span> r<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># Exit code: 0</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token comment\"># $ nslookup www.python.org</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token comment\"># Server:\t\t192.168.1.1</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\"># Address:\t192.168.1.1</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token comment\"># </span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token comment\"># canonical name = dualstack.python.map.fastly.net</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token comment\"># Name:\tpython.map.fastly.net</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token comment\"># Addresses:  2a04:4e42:1a::223</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token comment\"># \t  151.101.228.223</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token comment\"># Aliases:  www.python.org</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token comment\"># </span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token comment\"># Exit code: 0</span></pre></td></tr></table></figure><p>å¦‚æœå­è¿›ç¨‹éœ€è¦è¾“å…¥ï¼Œå¯ä»¥ä½¿ç”¨  <code>communicate()</code>  æ–¹æ³•å®ç°ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> subprocess</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'$ nslookup'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>p <span class=\"token operator\">=</span> subprocess<span class=\"token punctuation\">.</span>Popen<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">'nslookup'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> stdin<span class=\"token operator\">=</span>subprocess<span class=\"token punctuation\">.</span>PIPE<span class=\"token punctuation\">,</span> stdout<span class=\"token operator\">=</span>subprocess<span class=\"token punctuation\">.</span>PIPE<span class=\"token punctuation\">,</span> stderr<span class=\"token operator\">=</span>subprocess<span class=\"token punctuation\">.</span>PIPE<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>output<span class=\"token punctuation\">,</span> err <span class=\"token operator\">=</span> p<span class=\"token punctuation\">.</span>communicate<span class=\"token punctuation\">(</span><span class=\"token string\">b'set q=mx\\npython.org\\nexit\\n'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>output<span class=\"token punctuation\">.</span>decode<span class=\"token punctuation\">(</span><span class=\"token string\">'gbk'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Exit code:'</span><span class=\"token punctuation\">,</span> p<span class=\"token punctuation\">.</span>returncode<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\"># $ nslookup</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token comment\"># é»˜è®¤æœåŠ¡å™¨:  192.168.1.1</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token comment\"># Address:  192.168.1.1</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token comment\"># </span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token comment\"># > > æœåŠ¡å™¨:  192.168.1.1</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token comment\"># Address:  192.168.1.1</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token comment\"># </span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token comment\"># python.org   MX preference = 50, mail exchanger = mail.python.org</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token comment\"># > </span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token comment\"># Exit code: 0</span></pre></td></tr></table></figure><p>è¿™é‡Œçš„ä»£ç ç›¸å½“äºè¿›è¡Œäº†å¦‚ä¸‹æ“ä½œï¼š</p>\n<p><img data-src=\"https://img.xfc-exclave.com/2021/09/0644eb76cf69cdc495cdc81798bc4acd1631117532.png\" alt=\"Pythonå­è¿›ç¨‹è¾“å…¥æ“ä½œ\" /></p>\n<p>é€šè¿‡ä¸Šé¢çš„æ“ä½œï¼Œæˆ‘ä»¬å·²ç»èƒ½å¤Ÿè‡ªå¦‚åœ°åˆ›å»ºè¿›ç¨‹ï¼Œä½†è¿›ç¨‹ä¹‹é—´æ˜¯éœ€è¦è¿›è¡Œé€šä¿¡çš„ï¼Œæ“ä½œç³»ç»Ÿæä¾›äº†å¾ˆå¤šæœºåˆ¶æ¥å®ç°è¿›ç¨‹é—´çš„é€šä¿¡ã€‚Python çš„  <code>multiprocessing</code>  æ¨¡å—åŒ…è£…äº†åº•å±‚çš„æœºåˆ¶ï¼Œæä¾›äº†  <code>Queue</code> ã€ <code>Pipes</code>  ç­‰å¤šç§æ–¹å¼æ¥äº¤æ¢æ•°æ®ã€‚</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">from</span> multiprocessing <span class=\"token keyword\">import</span> Process<span class=\"token punctuation\">,</span> Queue</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> os<span class=\"token punctuation\">,</span> time<span class=\"token punctuation\">,</span> random</pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\"># å†™æ•°æ®è¿›ç¨‹æ‰§è¡Œçš„ä»£ç :</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">write</span><span class=\"token punctuation\">(</span>q<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Process to write: %s'</span> <span class=\"token operator\">%</span> os<span class=\"token punctuation\">.</span>getpid<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">for</span> value <span class=\"token keyword\">in</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'A'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'B'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'C'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Put %s to queue...'</span> <span class=\"token operator\">%</span> value<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        q<span class=\"token punctuation\">.</span>put<span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        time<span class=\"token punctuation\">.</span>sleep<span class=\"token punctuation\">(</span>random<span class=\"token punctuation\">.</span>random<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token comment\"># è¯»æ•°æ®è¿›ç¨‹æ‰§è¡Œçš„ä»£ç :</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">read</span><span class=\"token punctuation\">(</span>q<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Process to read: %s'</span> <span class=\"token operator\">%</span> os<span class=\"token punctuation\">.</span>getpid<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token keyword\">while</span> <span class=\"token boolean\">True</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        value <span class=\"token operator\">=</span> q<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Get %s from queue.'</span> <span class=\"token operator\">%</span> value<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token keyword\">if</span> __name__ <span class=\"token operator\">==</span> <span class=\"token string\">'__main__'</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token comment\"># çˆ¶è¿›ç¨‹åˆ›å»º Queueï¼Œå¹¶ä¼ ç»™å„ä¸ªå­è¿›ç¨‹ï¼š</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    q <span class=\"token operator\">=</span> Queue<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    pw <span class=\"token operator\">=</span> Process<span class=\"token punctuation\">(</span>target<span class=\"token operator\">=</span>write<span class=\"token punctuation\">,</span> args<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span>q<span class=\"token punctuation\">,</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    pr <span class=\"token operator\">=</span> Process<span class=\"token punctuation\">(</span>target<span class=\"token operator\">=</span>read<span class=\"token punctuation\">,</span> args<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span>q<span class=\"token punctuation\">,</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>    <span class=\"token comment\"># å¯åŠ¨å­è¿›ç¨‹ pwï¼Œå†™å…¥:</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>    pw<span class=\"token punctuation\">.</span>start<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>    <span class=\"token comment\"># å¯åŠ¨å­è¿›ç¨‹ prï¼Œè¯»å–:</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>    pr<span class=\"token punctuation\">.</span>start<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>    <span class=\"token comment\"># ç­‰å¾… pw ç»“æŸ:</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>    pw<span class=\"token punctuation\">.</span>join<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>    <span class=\"token comment\"># pr è¿›ç¨‹é‡Œæ˜¯æ­»å¾ªç¯ï¼Œæ— æ³•ç­‰å¾…å…¶ç»“æŸï¼Œåªèƒ½å¼ºè¡Œç»ˆæ­¢:</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>    pr<span class=\"token punctuation\">.</span>terminate<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre></pre></td></tr><tr><td data-num=\"33\"></td><td><pre><span class=\"token comment\"># Process to write: 15180</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre><span class=\"token comment\"># Put A to queue...</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre><span class=\"token comment\"># Process to read: 18192</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre><span class=\"token comment\"># Get A from queue.</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre><span class=\"token comment\"># Put B to queue...</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre><span class=\"token comment\"># Get B from queue.</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre><span class=\"token comment\"># Put C to queue...</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre><span class=\"token comment\"># Get C from queue.</span></pre></td></tr></table></figure><blockquote>\n<p>åœ¨ Unix/Linux ä¸‹ï¼Œ <code>multiprocessing</code>  æ¨¡å—å°è£…äº†  <code>fork()</code>  è°ƒç”¨ï¼Œä½¿æˆ‘ä»¬ä¸éœ€è¦å…³æ³¨  <code>fork()</code>  çš„ç»†èŠ‚ã€‚ç”±äº Windows ä¸æ”¯æŒ  <code>fork</code>  è°ƒç”¨ï¼Œå› æ­¤ï¼Œ <code>multiprocessing</code>  éœ€è¦ â€œæ¨¡æ‹Ÿâ€ å‡º  <code>fork</code>  çš„æ•ˆæœï¼Œçˆ¶è¿›ç¨‹æ‰€æœ‰ Python å¯¹è±¡éƒ½å¿…é¡»é€šè¿‡ pickle åºåˆ—åŒ–å†ä¼ åˆ°å­è¿›ç¨‹å»ï¼Œæ‰€ä»¥ï¼Œå¦‚æœ  <code>multiprocessing</code>  åœ¨ Windows ä¸‹è°ƒç”¨å¤±è´¥äº†ï¼Œè¦å…ˆè€ƒè™‘æ˜¯ä¸æ˜¯ pickle å¤±è´¥äº†ã€‚</p>\n</blockquote>\n<h4 id=\"å¤šçº¿ç¨‹\"><a class=\"anchor\" href=\"#å¤šçº¿ç¨‹\">#</a> å¤šçº¿ç¨‹</h4>\n<p>Python çš„çº¿ç¨‹æ˜¯çœŸæ­£çš„  <code>Posix Thread</code> ï¼Œè€Œä¸æ˜¯æ¨¡æ‹Ÿå‡ºæ¥çš„çº¿ç¨‹ã€‚</p>\n<p>Python çš„æ ‡å‡†åº“æä¾›äº†ä¸¤ä¸ªæ¨¡å—ï¼š <code>_thread</code>  å’Œ  <code>threading</code> ï¼Œå‰è€…æ˜¯ä½çº§æ¨¡å—ï¼Œåè€…æ˜¯é«˜çº§æ¨¡å—ï¼Œå¯¹å‰è€…è¿›è¡Œäº†å°è£…ã€‚</p>\n<p>åœ¨ Python ä¸­ï¼Œå¯åŠ¨ä¸€ä¸ªçº¿ç¨‹å°±æ˜¯æŠŠä¸€ä¸ªå‡½æ•°ä¼ å…¥å¹¶åˆ›å»º Thread å®ä¾‹ï¼Œç„¶åè°ƒç”¨  <code>start()</code>  å¼€å§‹æ‰§è¡Œï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> time<span class=\"token punctuation\">,</span> threading</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\"># æ–°çº¿ç¨‹æ‰§è¡Œçš„ä»£ç :</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">loop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'thread %s is running...'</span> <span class=\"token operator\">%</span> threading<span class=\"token punctuation\">.</span>current_thread<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    n <span class=\"token operator\">=</span> <span class=\"token number\">0</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">while</span> n <span class=\"token operator\">&lt;</span> <span class=\"token number\">5</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        n <span class=\"token operator\">=</span> n <span class=\"token operator\">+</span> <span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'thread %s >>> %s'</span> <span class=\"token operator\">%</span> <span class=\"token punctuation\">(</span>threading<span class=\"token punctuation\">.</span>current_thread<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">,</span> n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        time<span class=\"token punctuation\">.</span>sleep<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'thread %s ended.'</span> <span class=\"token operator\">%</span> threading<span class=\"token punctuation\">.</span>current_thread<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'thread %s is running...[main]'</span> <span class=\"token operator\">%</span> threading<span class=\"token punctuation\">.</span>current_thread<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>t <span class=\"token operator\">=</span> threading<span class=\"token punctuation\">.</span>Thread<span class=\"token punctuation\">(</span>target<span class=\"token operator\">=</span>loop<span class=\"token punctuation\">,</span> name<span class=\"token operator\">=</span><span class=\"token string\">'LoopThread'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>t<span class=\"token punctuation\">.</span>start<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>t<span class=\"token punctuation\">.</span>join<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'thread %s ended.'</span> <span class=\"token operator\">%</span> threading<span class=\"token punctuation\">.</span>current_thread<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>æ‰€æœ‰è¿›ç¨‹éƒ½ä¼šé»˜è®¤å¯åŠ¨ä¸€ä¸ªçº¿ç¨‹ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºä¸»çº¿ç¨‹ï¼Œä¸»çº¿ç¨‹åˆå¯ä»¥å¯åŠ¨æ–°çš„çº¿ç¨‹ï¼ŒPython  <code>threading</code>  ä¸‹çš„  <code>current_thread()</code>  å‡½æ•°ä¼šè¿”å›å½“å‰çº¿ç¨‹çš„å®ä¾‹ã€‚ä¸»çº¿ç¨‹å®ä¾‹åç§°é»˜è®¤ä¸º  <code>MainThread</code> ï¼Œå­çº¿ç¨‹çš„åå­—å¯ä»¥åœ¨åˆ›å»ºæ—¶æŒ‡å®šã€‚çº¿ç¨‹åç§°ä»…ä»…ç”¨äºæ˜¾ç¤ºï¼Œæ²¡æœ‰å®é™…æ„ä¹‰ï¼Œå¦‚æœä¸æŒ‡å®šå­çº¿ç¨‹åç§°ï¼ŒPython å°±è‡ªåŠ¨ç»™çº¿ç¨‹å‘½åä¸º  <code>Thread-1</code> ï¼Œ <code>Thread-2</code>  â€¦â€¦</p>\n<p>å¤šçº¿ç¨‹å’Œå¤šè¿›ç¨‹æœ€å¤§çš„ä¸åŒåœ¨äºï¼Œå¤šè¿›ç¨‹ä¸­ï¼ŒåŒä¸€ä¸ªå˜é‡ï¼Œå„è‡ªæœ‰ä¸€ä»½æ‹·è´å­˜åœ¨äºæ¯ä¸ªè¿›ç¨‹ä¸­ï¼Œäº’ä¸å½±å“ï¼Œè€Œå¤šçº¿ç¨‹ä¸­ï¼Œæ‰€æœ‰å˜é‡éƒ½ç”±æ‰€æœ‰çº¿ç¨‹å…±äº«ï¼Œæ‰€ä»¥ï¼Œä»»ä½•ä¸€ä¸ªå˜é‡éƒ½å¯ä»¥è¢«ä»»ä½•ä¸€ä¸ªçº¿ç¨‹ä¿®æ”¹ï¼Œå› æ­¤ï¼Œçº¿ç¨‹ä¹‹é—´å…±äº«æ•°æ®æœ€å¤§çš„å±é™©åœ¨äºå¤šä¸ªçº¿ç¨‹åŒæ—¶æ”¹ä¸€ä¸ªå˜é‡ã€‚</p>\n<p>åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸­ï¼Œçº¿ç¨‹ä¹‹é—´çš„æ‰§è¡Œé¡ºåºå¹¶æ²¡æœ‰ä¸€å®šçš„è§„å¾‹ï¼Œåœ¨ä¸åŒçš„åº”ç”¨åœºæ™¯ä¸­ï¼Œç”±äºæ‰§è¡Œé¡ºåºçš„ä¸åŒï¼Œææœ‰å¯èƒ½äº§ç”Ÿä¸é¢„æœŸä¸ç¬¦çš„æ‰§è¡Œç»“æœã€‚å¦‚æœè¦ç¡®ä¿æ‰§è¡Œç»“æœçš„æ­£ç¡®æ€§ï¼Œå¾€å¾€éœ€è¦å¯¹å…±äº«æ“ä½œè¿›è¡ŒåŠ é”ï¼Œè¿™æ ·å°±å¯ä»¥é¿å…å¤šä¸ªçº¿ç¨‹ä¹‹é—´çš„ä¿®æ”¹å†²çªã€‚åœ¨ Python ä¸­ï¼Œå¯ä»¥é€šè¿‡  <code>threading.Lock()</code>  æ¥åˆ›å»ºé”ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> threading</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>balance <span class=\"token operator\">=</span> <span class=\"token number\">0</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>lock <span class=\"token operator\">=</span> threading<span class=\"token punctuation\">.</span>Lock<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">change_it</span><span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">global</span> balance</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    balance <span class=\"token operator\">=</span> balance <span class=\"token operator\">+</span> n</pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    balance <span class=\"token operator\">=</span> balance <span class=\"token operator\">-</span> n</pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">run_thread</span><span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">100000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token comment\"># è·å–é”</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        lock<span class=\"token punctuation\">.</span>acquire<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        <span class=\"token keyword\">try</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>            change_it<span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        <span class=\"token keyword\">finally</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>            <span class=\"token comment\"># é‡Šæ”¾é”</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>            lock<span class=\"token punctuation\">.</span>release<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token keyword\">if</span> __name__ <span class=\"token operator\">==</span> <span class=\"token string\">'__main__'</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    t1 <span class=\"token operator\">=</span> threading<span class=\"token punctuation\">.</span>Thread<span class=\"token punctuation\">(</span>target<span class=\"token operator\">=</span>run_thread<span class=\"token punctuation\">,</span> args<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    t2 <span class=\"token operator\">=</span> threading<span class=\"token punctuation\">.</span>Thread<span class=\"token punctuation\">(</span>target<span class=\"token operator\">=</span>run_thread<span class=\"token punctuation\">,</span> args<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span><span class=\"token number\">8</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>    t1<span class=\"token punctuation\">.</span>start<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>    t2<span class=\"token punctuation\">.</span>start<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>    t1<span class=\"token punctuation\">.</span>join<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>    t2<span class=\"token punctuation\">.</span>join<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>balance<span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>å¤šä¸ªçº¿ç¨‹ä¼šå¯¹åŒä¸€æŠŠé”äº§ç”Ÿç«äº‰ï¼Œç«äº‰æˆåŠŸçš„çº¿ç¨‹åˆ™å…è®¸æ‰§è¡Œè¢«é”å®šçš„æ“ä½œï¼Œæœªç«äº‰æˆåŠŸçš„çº¿ç¨‹åˆ™ç­‰å¾…è·å¾—é”çš„çº¿ç¨‹é‡Šæ”¾é”ã€‚</p>\n<blockquote>\n<p>å…³äºé”çš„å†…å®¹å…¶å®ç›¸å½“ä¸°å¯Œï¼Œè¿™é‡Œä»…ä»…åšæœ€ç®€è¦çš„è¯´æ˜ã€‚</p>\n</blockquote>\n<p>åœ¨ Python ä¸­å¯ä»¥ä½¿ç”¨å¤šçº¿ç¨‹ï¼Œä½†å…¶å®å¹¶ä¸èƒ½æœ‰æ•ˆç†ç”±è®¡ç®—æœºçš„å¤šæ ¸ã€‚å¦‚æœä¸€å®šè¦é€šè¿‡å¤šçº¿ç¨‹åˆ©ç”¨å¤šæ ¸ï¼Œé‚£åªèƒ½é€šè¿‡ C æ‰©å±•æ¥å®ç°ã€‚</p>\n<p>ä¸è¿‡ï¼ŒPython è™½ç„¶ä¸èƒ½åˆ©ç”¨å¤šçº¿ç¨‹å®ç°å¤šæ ¸ä»»åŠ¡ï¼Œä½†å¯ä»¥é€šè¿‡å¤šè¿›ç¨‹å®ç°å¤šæ ¸ä»»åŠ¡ã€‚å¤šä¸ªè¿›ç¨‹æœ‰å„è‡ªç‹¬ç«‹çš„  <code>GIL</code>  é”ï¼Œäº’ä¸å½±å“ã€‚</p>\n<h4 id=\"threadlocal\"><a class=\"anchor\" href=\"#threadlocal\">#</a> ThreadLocal</h4>\n<p>åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ï¼Œç›¸è¾ƒäºä½¿ç”¨å…¨å±€å˜é‡ï¼Œä¸€ä¸ªçº¿ç¨‹ä½¿ç”¨è‡ªå·±çš„å±€éƒ¨å˜é‡æ›´åŠ å®‰å…¨ï¼Œå› ä¸ºå±€éƒ¨å˜é‡åªæœ‰è‡ªå·±å¯è§ï¼Œä¸ä¼šå½±å“å…¶ä»–çº¿ç¨‹ï¼Œè€Œå¯¹å…¨å±€å˜é‡çš„ä¿®æ”¹å¿…é¡»åŠ é”è¿›è¡Œã€‚åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ï¼Œåº”å½“å°½é‡å‡å°‘ä½¿ç”¨å…¨å±€å˜é‡ã€‚</p>\n<p>ä½†æ˜¯ï¼Œå±€éƒ¨å˜é‡çš„ä½¿ç”¨ä¹Ÿå­˜åœ¨ä¸€äº›é—®é¢˜ï¼Œä¾‹å¦‚å‡½æ•°åœ¨å¤šå±‚è°ƒç”¨æ—¶ï¼Œä¼ é€’å‚æ•°ä¼šç›¸å½“éº»çƒ¦ï¼Œä¸ºäº†è§£å†³è¿™ä¸€é—®é¢˜ï¼ŒPython å¼•å…¥äº†  <code>ThreadLocal</code>  å¯¹è±¡ã€‚</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> threading</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\"># åˆ›å»ºå…¨å±€ ThreadLocal å¯¹è±¡:</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>local_school <span class=\"token operator\">=</span> threading<span class=\"token punctuation\">.</span>local<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># ä¸åŒçº¿ç¨‹å­˜å‚¨åœ¨ ThreadLocal å¯¹è±¡ä¸­çš„å±æ€§äº’ä¸å½±å“</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">process_student</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token comment\"># è·å–å½“å‰çº¿ç¨‹å…³è”çš„ student:</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    std <span class=\"token operator\">=</span> local_school<span class=\"token punctuation\">.</span>student</pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Hello, %s (in %s)'</span> <span class=\"token operator\">%</span> <span class=\"token punctuation\">(</span>std<span class=\"token punctuation\">,</span> threading<span class=\"token punctuation\">.</span>current_thread<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">process_thread</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token comment\"># ç»‘å®š ThreadLocal çš„ student:</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    local_school<span class=\"token punctuation\">.</span>student <span class=\"token operator\">=</span> name</pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    process_student<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token keyword\">if</span> __name__ <span class=\"token operator\">==</span> <span class=\"token string\">'__main__'</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    t1 <span class=\"token operator\">=</span> threading<span class=\"token punctuation\">.</span>Thread<span class=\"token punctuation\">(</span>target<span class=\"token operator\">=</span>process_thread<span class=\"token punctuation\">,</span> args<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Alice'</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> name<span class=\"token operator\">=</span><span class=\"token string\">'Thread-A'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    t2 <span class=\"token operator\">=</span> threading<span class=\"token punctuation\">.</span>Thread<span class=\"token punctuation\">(</span>target<span class=\"token operator\">=</span>process_thread<span class=\"token punctuation\">,</span> args<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Bob'</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> name<span class=\"token operator\">=</span><span class=\"token string\">'Thread-B'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    t1<span class=\"token punctuation\">.</span>start<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    t2<span class=\"token punctuation\">.</span>start<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    t1<span class=\"token punctuation\">.</span>join<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    t2<span class=\"token punctuation\">.</span>join<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre></pre></td></tr><tr><td data-num=\"24\"></td><td><pre><span class=\"token comment\"># Hello, Alice (in Thread-A)</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre><span class=\"token comment\"># Hello, Bob (in Thread-B)</span></pre></td></tr></table></figure><blockquote>\n<p>å¯ä»¥å°† ThreadLocal ç±»å‹çš„å…¨å±€å˜é‡ç†è§£ä¸ºä¸€ä¸ª dict ï¼Œå…¶å†…å­˜æ ¹æ®ä¸åŒçº¿ç¨‹ï¼Œåˆ†åˆ«å­˜æ”¾äº†ä¸åŒçº¿ç¨‹ä¸‹çš„å¯¹è±¡ä¿¡æ¯ï¼Œå½“å†æ¬¡ä»ä¸­è·å–å€¼æ—¶ï¼Œä¼šè‡ªåŠ¨åˆ¤æ–­å½“å‰æ˜¯å“ªä¸€ä¸ªçº¿ç¨‹ï¼Œå¹¶å–å‡ºå¯¹åº”çº¿ç¨‹ä¸‹çš„å€¼ã€‚</p>\n</blockquote>\n<p><code>ThreadLocal</code>  æœ€å¸¸ç”¨çš„åœ°æ–¹å°±æ˜¯ä¸ºæ¯ä¸ªçº¿ç¨‹ç»‘å®šä¸€ä¸ªæ•°æ®åº“è¿æ¥ï¼ŒHTTP è¯·æ±‚ï¼Œç”¨æˆ·èº«ä»½ä¿¡æ¯ç­‰ï¼Œè¿™æ ·ä¸€ä¸ªçº¿ç¨‹çš„æ‰€æœ‰è°ƒç”¨åˆ°çš„å¤„ç†å‡½æ•°éƒ½å¯ä»¥éå¸¸æ–¹ä¾¿åœ°è®¿é—®è¿™äº›èµ„æºã€‚</p>\n<p>ä¸€ä¸ª  <code>ThreadLocal</code>  å˜é‡è™½ç„¶æ˜¯å…¨å±€å˜é‡ï¼Œä½†æ¯ä¸ªçº¿ç¨‹éƒ½åªèƒ½è¯»å†™è‡ªå·±çº¿ç¨‹çš„ç‹¬ç«‹å‰¯æœ¬ï¼Œäº’ä¸å¹²æ‰°ã€‚</p>\n<h4 id=\"è¿›ç¨‹ä¸çº¿ç¨‹å¯¹æ¯”\"><a class=\"anchor\" href=\"#è¿›ç¨‹ä¸çº¿ç¨‹å¯¹æ¯”\">#</a> è¿›ç¨‹ä¸çº¿ç¨‹å¯¹æ¯”</h4>\n<p><span class=\"label danger\">â—ï¸TODO</span> æ­¤éƒ¨åˆ†æ¦‚å¿µä¸å…¶ä»–è¯­è¨€æ²¡æœ‰ä»»ä½•åŒºåˆ«ï¼Œæš‚æ—¶ç•¥å»ã€‚</p>\n<h4 id=\"åˆ†å¸ƒå¼çº¿ç¨‹\"><a class=\"anchor\" href=\"#åˆ†å¸ƒå¼çº¿ç¨‹\">#</a> åˆ†å¸ƒå¼çº¿ç¨‹</h4>\n<p>Python çš„  <code>multiprocessing</code>  æ¨¡å—ä¸ä½†æ”¯æŒå¤šè¿›ç¨‹ï¼Œå…¶ä¸­  <code>managers</code>  å­æ¨¡å—è¿˜æ”¯æŒæŠŠå¤šè¿›ç¨‹åˆ†å¸ƒåˆ°å¤šå°æœºå™¨ä¸Šã€‚ä¸€ä¸ªæœåŠ¡è¿›ç¨‹å¯ä»¥ä½œä¸ºè°ƒåº¦è€…ï¼Œä¾é ç½‘ç»œé€šä¿¡ï¼Œå¯ä»¥å°†ä»»åŠ¡åˆ†å¸ƒåˆ°å…¶ä»–å¤šä¸ªè¿›ç¨‹ä¸­ã€‚ç”±äº  <code>managers</code>  æ¨¡å—å°è£…å¾ˆå¥½ï¼Œå› æ­¤å®Œå…¨ä¸å¿…äº†è§£ç½‘ç»œé€šä¿¡çš„ç»†èŠ‚ï¼Œå°±å¯ä»¥å¾ˆå®¹æ˜“åœ°ç¼–å†™åˆ†å¸ƒå¼å¤šè¿›ç¨‹ç¨‹åºã€‚</p>\n<p>åœ¨å¤šè¿›ç¨‹ç« èŠ‚ä¸­ï¼Œæˆ‘ä»¬å·²ç»èƒ½å¤Ÿè®©å¤šä¸ªè¿›ç¨‹é€šè¿‡  <code>Queue</code>  åœ¨åŒä¸€å°ä¸»æœºä¸Šè¿›è¡Œé€šè®¯ã€‚è€Œå¦‚æœéœ€è¦åœ¨å¤šä¸ªä¸»æœºä¸Šå®ç°è¿›ç¨‹ä¹‹é—´çš„é€šè®¯ï¼Œåˆ™éœ€è¦  <code>managers</code>  æ¨¡å—å°† Queue é€šè¿‡ç½‘ç»œæš´éœ²å‡ºå»ï¼Œå…¶ä»–ä¸»æœºçš„è¿›ç¨‹å°±å¯ä»¥è®¿é—®è¿™ä¸ª Queue äº†ã€‚</p>\n<p>åˆ›å»ºå¹¶å¯åŠ¨æœåŠ¡è¿›ç¨‹ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">#!/usr/bin/env python3</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\"># -*- coding: utf-8 -*-</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">import</span> random<span class=\"token punctuation\">,</span> time<span class=\"token punctuation\">,</span> queue</pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">from</span> multiprocessing<span class=\"token punctuation\">.</span>managers <span class=\"token keyword\">import</span> BaseManager</pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token comment\"># å‘é€ä»»åŠ¡é˜Ÿåˆ—</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>task_queue <span class=\"token operator\">=</span> queue<span class=\"token punctuation\">.</span>Queue<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\"># æ¥æ”¶ç»“æœé˜Ÿåˆ—</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>result_queue <span class=\"token operator\">=</span> queue<span class=\"token punctuation\">.</span>Queue<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token comment\"># ç»§æ‰¿ BaseManager</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">QueueManager</span><span class=\"token punctuation\">(</span>BaseManager<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token keyword\">pass</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">return_task_queue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token comment\"># global ç”¨äºå‡½æ•°å†…éƒ¨ï¼Œä¿®æ”¹å…¨å±€å˜é‡çš„å€¼</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token keyword\">global</span> task_queue</pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token keyword\">return</span> task_queue</pre></td></tr><tr><td data-num=\"20\"></td><td><pre></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">return_result_queue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    <span class=\"token keyword\">global</span> result_queue</pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    <span class=\"token keyword\">return</span> result_queue</pre></td></tr><tr><td data-num=\"24\"></td><td><pre></pre></td></tr><tr><td data-num=\"25\"></td><td><pre><span class=\"token keyword\">if</span> __name__ <span class=\"token operator\">==</span> <span class=\"token string\">'__main__'</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>    <span class=\"token comment\"># å°†ä¸¤ä¸ª Queue æ³¨å†Œåˆ°ç½‘ç»œä¸Šï¼Œcallable å‚æ•°å…³è” Queue å¯¹è±¡</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>    <span class=\"token comment\"># ï¼win10 ä¸­ callale ä¸å¯¹ lambda åŒ¿åå‡½æ•°åšå¤„ç†</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>    QueueManager<span class=\"token punctuation\">.</span>register<span class=\"token punctuation\">(</span><span class=\"token string\">'get_task_queue'</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">callable</span><span class=\"token operator\">=</span>return_task_queue<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>    QueueManager<span class=\"token punctuation\">.</span>register<span class=\"token punctuation\">(</span><span class=\"token string\">'get_result_queue'</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">callable</span><span class=\"token operator\">=</span>return_result_queue<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>    <span class=\"token comment\"># ç»‘å®šç«¯å£ 5000ï¼Œè¿™ 5000 æ€ä¹ˆæ¥çš„ï¼Ÿä¸¤ä¸ªæ–‡ä»¶ä¸­çš„ç«¯å£ä¸€æ ·å°±è¡Œï¼ï¼Œè®¾ç½®éªŒè¯ç  abc</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>    <span class=\"token comment\"># é€šè¿‡ QueueManager å°† Queue æš´éœ²å‡ºå»</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>    manager <span class=\"token operator\">=</span> QueueManager<span class=\"token punctuation\">(</span>address<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span><span class=\"token string\">'127.0.0.1'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> authkey<span class=\"token operator\">=</span><span class=\"token string\">b'abc'</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># authkeyï¼Œä¿è¯é€šè®¯ä¸è¢«å…¶ä»–ç¨‹åºæ¶æ„å¹²æ‰°</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>    manager<span class=\"token punctuation\">.</span>start<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>    task <span class=\"token operator\">=</span> manager<span class=\"token punctuation\">.</span>get_task_queue<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>    result <span class=\"token operator\">=</span> manager<span class=\"token punctuation\">.</span>get_result_queue<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>    <span class=\"token comment\"># æ”¾ 10 ä¸ªä»»åŠ¡è¿›å»</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>    <span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>        n <span class=\"token operator\">=</span> random<span class=\"token punctuation\">.</span>randint<span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Put task %d...'</span> <span class=\"token operator\">%</span> n<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>        <span class=\"token comment\"># å°†æ•°æ®æ”¾åˆ°ä»»åŠ¡é˜Ÿåˆ—</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>        task<span class=\"token punctuation\">.</span>put<span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>    <span class=\"token comment\"># å–ä»»åŠ¡æ‰§è¡Œç»“æœ</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Try get results...'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>    <span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre>        <span class=\"token comment\"># ä»ç»“æœé˜Ÿåˆ—ä¸­å–ç»“æœ</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre>        <span class=\"token comment\"># ç­‰å¾… 10 æ˜¯å› ä¸ºè®¡ç®—éœ€è¦æ—¶é—´</span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre>        r <span class=\"token operator\">=</span> result<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span>timeout<span class=\"token operator\">=</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre>        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Result: %s'</span> <span class=\"token operator\">%</span> r<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre>    <span class=\"token comment\"># å…³é—­</span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre>    manager<span class=\"token punctuation\">.</span>shutdown<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"51\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'master exit.'</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>åˆ›å»ºå¹¶å¯åŠ¨å·¥ä½œè¿›ç¨‹ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">#!/usr/bin/env python3</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\"># -*- coding: utf-8 -*-</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">import</span> time<span class=\"token punctuation\">,</span> sys<span class=\"token punctuation\">,</span> queue</pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">from</span> multiprocessing<span class=\"token punctuation\">.</span>managers <span class=\"token keyword\">import</span> BaseManager</pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">QueueManager</span><span class=\"token punctuation\">(</span>BaseManager<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token keyword\">pass</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token keyword\">if</span> __name__ <span class=\"token operator\">==</span> <span class=\"token string\">'__main__'</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    QueueManager<span class=\"token punctuation\">.</span>register<span class=\"token punctuation\">(</span><span class=\"token string\">'get_task_queue'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    QueueManager<span class=\"token punctuation\">.</span>register<span class=\"token punctuation\">(</span><span class=\"token string\">'get_result_queue'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    server_addr <span class=\"token operator\">=</span> <span class=\"token string\">'127.0.0.1'</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Connect to server %s...'</span> <span class=\"token operator\">%</span> server_addr<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token comment\"># ç«¯å£è®¾ç½®å’Œ task_master.py ä¸­ä¸€æ ·</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    m <span class=\"token operator\">=</span> QueueManager<span class=\"token punctuation\">(</span>address<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span>server_addr<span class=\"token punctuation\">,</span> <span class=\"token number\">5000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> authkey<span class=\"token operator\">=</span><span class=\"token string\">b'abc'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token comment\"># è¿æ¥ç½‘ç»œ</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    m<span class=\"token punctuation\">.</span>connect<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    task <span class=\"token operator\">=</span> m<span class=\"token punctuation\">.</span>get_task_queue<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># å¦‚æœä¸åœ¨åŒä¸€å°ä¸»æœºï¼Œå¿…é¡»é€šè¿‡ manager.get... æ–¹å¼è·å¾— Queue æ¥å£</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    result <span class=\"token operator\">=</span> m<span class=\"token punctuation\">.</span>get_result_queue<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>    <span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>        <span class=\"token keyword\">try</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>            <span class=\"token comment\"># æ¥æ”¶ä»»åŠ¡é˜Ÿåˆ—ä¸­çš„æ•°æ®</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>            n <span class=\"token operator\">=</span> task<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span>timeout<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>            <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Run task %d*%d'</span> <span class=\"token operator\">%</span> <span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">,</span> n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>            r <span class=\"token operator\">=</span> <span class=\"token string\">'%d*%d=%d'</span> <span class=\"token operator\">%</span> <span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">,</span> n<span class=\"token punctuation\">,</span> n <span class=\"token operator\">*</span> n<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>            time<span class=\"token punctuation\">.</span>sleep<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>            <span class=\"token comment\"># æ”¾è¿›ç»“æœé˜Ÿåˆ—</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>            result<span class=\"token punctuation\">.</span>put<span class=\"token punctuation\">(</span>r<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>        <span class=\"token keyword\">except</span> queue<span class=\"token punctuation\">.</span>Queue<span class=\"token punctuation\">.</span>Empty<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>            <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'task queue is empty'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'work done'</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>ä¾æ¬¡å¯åŠ¨æœåŠ¡è¿›ç¨‹å’Œå·¥ä½œè¿›ç¨‹ï¼Œå¾—åˆ°å¦‚ä¸‹ç»“æœï¼š</p>\n<p><img data-src=\"https://img.xfc-exclave.com/2021/09/4a6ff34f81b982ebe1c8a97074be21011631199550.png\" alt=\"image-20210909210504132\" /></p>\n<p>ä»¥ä¸Šå°±æ˜¯ä¸€ä¸ªç®€å•çš„ Master/Worker æ¨¡å‹ã€‚</p>\n<blockquote>\n<p>Queue å…¶å®æ˜¯å­˜å‚¨åœ¨æœåŠ¡è¿›ç¨‹ä¸­çš„ï¼Œå¹¶ä½¿ç”¨  <code>QueueManager</code>  æ¥è¿›è¡Œç®¡ç†ï¼Œå·¥ä½œè¿›ç¨‹é€šè¿‡æ³¨å†Œçš„é˜Ÿåˆ—åç§°æŸ¥æ‰¾åŒ¹é…åˆ°æŒ‡å®šçš„é˜Ÿåˆ—ï¼Œå¹¶ä»é˜Ÿåˆ—ä¸­è·å¾—ä¼ è¾“çš„å€¼ã€‚</p>\n<p>åŒæ—¶ä¹Ÿéœ€è¦æ³¨æ„ï¼ŒQueue çš„ä½œç”¨æ˜¯ç”¨æ¥ä¼ é€’ä»»åŠ¡å’Œæ¥æ”¶ç»“æœï¼Œæ¯ä¸ªä»»åŠ¡çš„æè¿°æ•°æ®é‡åº”å½“è¦å°½é‡å°ã€‚</p>\n</blockquote>\n<h3 id=\"æ­£åˆ™è¡¨è¾¾å¼\"><a class=\"anchor\" href=\"#æ­£åˆ™è¡¨è¾¾å¼\">#</a> æ­£åˆ™è¡¨è¾¾å¼</h3>\n<p>Python æä¾›  <code>re</code>  æ¨¡å—ï¼ŒåŒ…å«æ‰€æœ‰æ­£åˆ™è¡¨è¾¾å¼çš„åŠŸèƒ½ï¼Œä½†éœ€è¦æ³¨æ„æ­£åˆ™è¡¨è¾¾å¼åœ¨ Python ä¸­çš„è½¬ä¹‰ï¼Œæ¨èä½¿ç”¨  <code>r</code>  å‰ç¼€ä»¥ä¾¿å¿½ç•¥è½¬ä¹‰ã€‚</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> re</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>res1 <span class=\"token operator\">=</span> re<span class=\"token punctuation\">.</span>match<span class=\"token punctuation\">(</span><span class=\"token string\">r'^\\d&#123;3&#125;\\-\\d&#123;3,8&#125;$'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'010-12345'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>res1<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># &lt;re.Match object; span=(0, 9), match='010-12345'></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>res2 <span class=\"token operator\">=</span> re<span class=\"token punctuation\">.</span>match<span class=\"token punctuation\">(</span><span class=\"token string\">r'^\\d&#123;3&#125;\\-\\d&#123;3,8&#125;$'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'010 12345'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>res2<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># None</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'a b   c'</span><span class=\"token punctuation\">.</span>split<span class=\"token punctuation\">(</span><span class=\"token string\">' '</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># ['a', 'b', '', '', 'c'] # æ— æ³•è¯†åˆ«è¿ç»­çš„ç©ºæ ¼</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>re<span class=\"token punctuation\">.</span>split<span class=\"token punctuation\">(</span><span class=\"token string\">r'\\s+'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'a b   c'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># ['a', 'b', 'c']</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>phone <span class=\"token operator\">=</span> <span class=\"token builtin\">input</span><span class=\"token punctuation\">(</span><span class=\"token string\">'è¯·è¾“å…¥æ‰‹æœºå·ï¼š'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token keyword\">if</span> re<span class=\"token punctuation\">.</span>match<span class=\"token punctuation\">(</span><span class=\"token string\">r'^(13[0-9]|14[5|7]|15[0|1|2|3|4|5|6|7|8|9]|18[0|1|2|3|5|6|7|8|9])\\d&#123;8&#125;$'</span><span class=\"token punctuation\">,</span> phone<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'æ‰‹æœºå·éªŒè¯é€šè¿‡ï¼'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'æ‰‹æœºå·æ ¼å¼é”™è¯¯ï¼'</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><blockquote>\n<p>æ­£åˆ™è¡¨è¾¾å¼èƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬æœ‰æ•ˆåœ°å¯¹å­—ç¬¦ä¸²è¿›è¡Œæ ¼å¼éªŒè¯ï¼Œä½†å¯¹äºä½¿ç”¨åœºæ™¯çš„ä¸åŒï¼Œæœ‰æ—¶å€™æ­£åˆ™ä¹Ÿå¹¶éæ˜¯ç»å¯¹çš„ã€‚</p>\n</blockquote>\n<p>åœ¨ Python ä¸­ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æ—¶ï¼Œè§£é‡Šå™¨ä¼šè¿›è¡Œå¦‚ä¸‹æ“ä½œï¼š</p>\n<ol>\n<li>ç¼–è¯‘æ­£åˆ™è¡¨è¾¾å¼ï¼Œå¦‚æœæ­£åˆ™è¡¨è¾¾å¼çš„å­—ç¬¦ä¸²æœ¬èº«ä¸åˆæ³•ï¼Œåˆ™ä¼šæŠ¥é”™ã€‚</li>\n<li>ç”¨ç¼–è¯‘åçš„æ­£åˆ™è¡¨è¾¾å¼å»åŒ¹é…å­—ç¬¦ä¸²ã€‚</li>\n</ol>\n<h3 id=\"å¸¸ç”¨å†…å»ºæ¨¡å—\"><a class=\"anchor\" href=\"#å¸¸ç”¨å†…å»ºæ¨¡å—\">#</a> å¸¸ç”¨å†…å»ºæ¨¡å—</h3>\n<h4 id=\"datetime\"><a class=\"anchor\" href=\"#datetime\">#</a> datetime</h4>\n<p>datetime æ˜¯ Python å¤„ç†æ—¥æœŸå’Œæ—¶é—´çš„æ ‡å‡†åº“ã€‚</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">from</span> datetime <span class=\"token keyword\">import</span> datetime<span class=\"token punctuation\">,</span> timedelta</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>now <span class=\"token operator\">=</span> datetime<span class=\"token punctuation\">.</span>now<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>now<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># 2021-09-09 22:23:34.810674</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">type</span><span class=\"token punctuation\">(</span>now<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># &lt;class 'datetime.datetime'></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>dt <span class=\"token operator\">=</span> datetime<span class=\"token punctuation\">(</span><span class=\"token number\">2021</span><span class=\"token punctuation\">,</span> <span class=\"token number\">9</span><span class=\"token punctuation\">,</span> <span class=\"token number\">9</span><span class=\"token punctuation\">,</span> <span class=\"token number\">22</span><span class=\"token punctuation\">,</span> <span class=\"token number\">30</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># ç”¨æŒ‡å®šæ—¥æœŸæ—¶é—´åˆ›å»º datetime</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>dt<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># 2021-09-09 22:30:00</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>dt<span class=\"token punctuation\">.</span>timestamp<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># 1631197800.0 # æ—¥æœŸè½¬æ—¶é—´æˆ³ï¼Œå•ä½ï¼šç§’</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>t <span class=\"token operator\">=</span> <span class=\"token number\">1631197800.0</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>datetime<span class=\"token punctuation\">.</span>fromtimestamp<span class=\"token punctuation\">(</span>t<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># 2021-09-09 22:30:00 # æ—¶é—´æˆ³è½¬æ—¶é—´</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>datetime<span class=\"token punctuation\">.</span>utcfromtimestamp<span class=\"token punctuation\">(</span>t<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># 2021-09-09 14:30:00 # UTC æ—¶é—´</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token comment\"># æ—¶é—´æ ¼å¼è½¬æ¢</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>cday <span class=\"token operator\">=</span> datetime<span class=\"token punctuation\">.</span>strptime<span class=\"token punctuation\">(</span><span class=\"token string\">'2021-9-7 18:19:59'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'%Y-%m-%d %H:%M:%S'</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># å­—ç¬¦ä¸²è½¬æ—¶é—´</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>cday<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># 2021-09-07 18:19:59</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>now<span class=\"token punctuation\">.</span>strftime<span class=\"token punctuation\">(</span><span class=\"token string\">'%a, %b %d %H:%M'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># Thu, Sep 09 22:47 # æ—¶é—´è½¬å­—ç¬¦ä¸²</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token comment\"># æ—¥æœŸåŠ å‡</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>now<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># 2021-09-09 22:50:17.151719</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>now <span class=\"token operator\">+</span> timedelta<span class=\"token punctuation\">(</span>hours<span class=\"token operator\">=</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># 2021-09-10 08:50:17.151719</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>now <span class=\"token operator\">-</span> timedelta<span class=\"token punctuation\">(</span>days<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># 2021-09-08 22:50:17.151719</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>now <span class=\"token operator\">+</span> timedelta<span class=\"token punctuation\">(</span>days<span class=\"token operator\">=</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> hours<span class=\"token operator\">=</span><span class=\"token number\">12</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># 2021-09-12 10:50:17.151719</span></pre></td></tr></table></figure><h4 id=\"collections\"><a class=\"anchor\" href=\"#collections\">#</a> collections</h4>\n<p>collections æ˜¯ Python å†…å»ºçš„ä¸€ä¸ªé›†åˆæ¨¡å—ï¼Œæä¾›äº†è®¸å¤šæœ‰ç”¨çš„é›†åˆç±»ã€‚</p>\n<ol>\n<li>\n<p>namedtuple</p>\n<p>Python æä¾›äº†ä¸€ä¸ª  <code>namedtuple</code>  å‡½æ•°ï¼Œå¯ä»¥ç”¨æ¥åˆ›å»ºè‡ªå®šä¹‰çš„  <code>tuple</code>  å¯¹è±¡ï¼Œå¹¶ä¸”è§„å®šäº† tuple å…ƒç´ çš„ä¸ªæ•°ï¼Œå¹¶å¯ä»¥ç”¨å±æ€§è€Œä¸æ˜¯ç´¢å¼•æ¥å¼•ç”¨ tuple çš„æŸä¸ªå…ƒç´ ã€‚</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">from</span> collections <span class=\"token keyword\">import</span> namedtuple</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>Point <span class=\"token operator\">=</span> namedtuple<span class=\"token punctuation\">(</span><span class=\"token string\">'Point'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'x'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'y'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>p <span class=\"token operator\">=</span> Point<span class=\"token punctuation\">(</span><span class=\"token number\">30</span><span class=\"token punctuation\">,</span> <span class=\"token number\">125</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>p<span class=\"token punctuation\">.</span>y<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># 125</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">isinstance</span><span class=\"token punctuation\">(</span>p<span class=\"token punctuation\">,</span> Point<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># True</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">isinstance</span><span class=\"token punctuation\">(</span>p<span class=\"token punctuation\">,</span> <span class=\"token builtin\">tuple</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># True</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>Circle <span class=\"token operator\">=</span> namedtuple<span class=\"token punctuation\">(</span><span class=\"token string\">'Circle'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'x'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'y'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'r'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>c <span class=\"token operator\">=</span> Circle<span class=\"token punctuation\">(</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>c<span class=\"token punctuation\">.</span>r<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># 5</span></pre></td></tr></table></figure><p>ä½¿ç”¨ namedtuple å¯ä»¥å¾ˆæ–¹ä¾¿åœ°è¡¨ç¤ºä¸€äº›åæ ‡ã€ç‚¹æˆ–æŸäº›æ•°æ®é›†ã€‚</p>\n</li>\n<li>\n<p>deque</p>\n<p>ç”±äº list æ˜¯çº¿æ€§å­˜å‚¨ï¼Œæ‰€ä»¥å®ƒåœ¨æŒ‰ç´¢å¼•æŸ¥æ‰¾æ—¶å¾ˆå¿«ï¼Œä½†åˆ é™¤å’Œä¿®æ”¹æ—¶å¾ˆæ…¢ï¼Œ  <code>deque</code>  åˆ™æ˜¯ä¸ºäº†é«˜æ•ˆå®ç°æ’å…¥å’Œåˆ é™¤æ“ä½œçš„åŒå‘åˆ—è¡¨ï¼Œé€‚åˆç”¨äºé˜Ÿåˆ—å’Œæ ˆã€‚</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">from</span> collections <span class=\"token keyword\">import</span> deque</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>q <span class=\"token operator\">=</span> deque<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">'a'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'b'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'c'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>q<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span><span class=\"token string\">'x'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>q<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># deque(['a', 'b', 'c', 'x'])</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>q<span class=\"token punctuation\">.</span>appendleft<span class=\"token punctuation\">(</span><span class=\"token string\">'y'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>q<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># deque(['y', 'a', 'b', 'c', 'x'])</span></pre></td></tr></table></figure><blockquote>\n<p>deque é™¤äº†å®ç° list çš„  <code>append()</code>  å’Œ  <code>pop()</code>  å¤–ï¼Œè¿˜æ”¯æŒ  <code>appendleft()</code>  å’Œ  <code>popleft()</code> ï¼Œè¿™æ ·å°±å¯ä»¥éå¸¸é«˜æ•ˆåœ°å¾€å¤´éƒ¨æ·»åŠ æˆ–åˆ é™¤å…ƒç´ ã€‚</p>\n</blockquote>\n</li>\n<li>\n<p>defaultdict</p>\n<p>ä½¿ç”¨ dict æ—¶ï¼Œå¦‚æœå¼•ç”¨çš„ Key ä¸å­˜åœ¨ï¼Œå°±ä¼šæŠ›å‡º  <code>KeyError</code> ã€‚å¦‚æœå¸Œæœ› key ä¸å­˜åœ¨æ—¶ï¼Œè¿”å›ä¸€ä¸ªé»˜è®¤å€¼ï¼Œå°±å¯ä»¥ç”¨  <code>defaultdict</code> ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">from</span> collections <span class=\"token keyword\">import</span> defaultdict</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>dd <span class=\"token operator\">=</span> defaultdict<span class=\"token punctuation\">(</span><span class=\"token keyword\">lambda</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'N/A'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>dd<span class=\"token punctuation\">[</span><span class=\"token string\">'key1'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token string\">'abc'</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>dd<span class=\"token punctuation\">[</span><span class=\"token string\">'key1'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># abc</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>dd<span class=\"token punctuation\">[</span><span class=\"token string\">'key2'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># N/A</span></pre></td></tr></table></figure><p>é™¤äº†è¿”å›é»˜è®¤å€¼ä¹‹å¤–ï¼Œdefaultdict å’Œ dict æ²¡æœ‰å…¶ä»–ä»»ä½•åŒºåˆ«ã€‚</p>\n</li>\n<li>\n<p>OrderedDict</p>\n<p>ä½¿ç”¨ dict æ—¶ï¼ŒKey æ˜¯æ— åºçš„ï¼Œå¦‚æœè¦ä¿æŒ Key çš„é¡ºåºï¼Œå¯ä»¥ç”¨  <code>OrderedDict</code> ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">from</span> collections <span class=\"token keyword\">import</span> OrderedDict</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>od <span class=\"token operator\">=</span> OrderedDict<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">(</span><span class=\"token string\">'a'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token string\">'b'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token string\">'c'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>od<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># OrderedDict ([('a', 2), ('b', 3), ('c', 1)]) # æœ‰åº</span></pre></td></tr></table></figure><p>æ³¨æ„ï¼š <code>OrderedDict</code>  çš„ Key ä¼šæŒ‰ç…§æ’å…¥çš„é¡ºåºæ’åˆ—ï¼Œä¸æ˜¯ Key æœ¬èº«çš„æ’åºã€‚</p>\n</li>\n<li>\n<p>ChainMap</p>\n<p><code>ChainMap</code>  å¯ä»¥æŠŠä¸€ç»„ dict ä¸²èµ·æ¥å¹¶ç»„æˆä¸€ä¸ªé€»è¾‘ä¸Šçš„ dict ã€‚ChainMap æœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ª dictï¼Œä½†æ˜¯æŸ¥æ‰¾çš„æ—¶å€™ï¼Œä¼šæŒ‰ç…§é¡ºåºåœ¨å†…éƒ¨çš„ dict ä¾æ¬¡æŸ¥æ‰¾ã€‚</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">from</span> collections <span class=\"token keyword\">import</span> ChainMap</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> os<span class=\"token punctuation\">,</span> argparse</pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\"># æ„é€ ç¼ºçœå‚æ•°:</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>defaults <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token string\">'color'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'red'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token string\">'user'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'guest'</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token comment\"># æ„é€ å‘½ä»¤è¡Œå‚æ•°:</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>parser <span class=\"token operator\">=</span> argparse<span class=\"token punctuation\">.</span>ArgumentParser<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>parser<span class=\"token punctuation\">.</span>add_argument<span class=\"token punctuation\">(</span><span class=\"token string\">'-u'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'--user'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>parser<span class=\"token punctuation\">.</span>add_argument<span class=\"token punctuation\">(</span><span class=\"token string\">'-c'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'--color'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>namespace <span class=\"token operator\">=</span> parser<span class=\"token punctuation\">.</span>parse_args<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>command_line_args <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span>k<span class=\"token punctuation\">:</span> v <span class=\"token keyword\">for</span> k<span class=\"token punctuation\">,</span> v <span class=\"token keyword\">in</span> <span class=\"token builtin\">vars</span><span class=\"token punctuation\">(</span>namespace<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>items<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">if</span> v<span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token comment\"># ç»„åˆæˆ ChainMap:</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>combined <span class=\"token operator\">=</span> ChainMap<span class=\"token punctuation\">(</span>command_line_args<span class=\"token punctuation\">,</span> os<span class=\"token punctuation\">.</span>environ<span class=\"token punctuation\">,</span> defaults<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token comment\"># æ‰“å°å‚æ•°:</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'color=%s'</span> <span class=\"token operator\">%</span> combined<span class=\"token punctuation\">[</span><span class=\"token string\">'color'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'user=%s'</span> <span class=\"token operator\">%</span> combined<span class=\"token punctuation\">[</span><span class=\"token string\">'user'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>è¿è¡Œç»“æœï¼š</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>A:<span class=\"token punctuation\">\\</span>pycharm-workspace<span class=\"token punctuation\">\\</span>py-test<span class=\"token operator\">></span>python main.py</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token assign-left variable\">color</span><span class=\"token operator\">=</span>red</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token assign-left variable\">user</span><span class=\"token operator\">=</span>guest</pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>A:<span class=\"token punctuation\">\\</span>pycharm-workspace<span class=\"token punctuation\">\\</span>py-test<span class=\"token operator\">></span>python main.py -u Chimoku</pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token assign-left variable\">color</span><span class=\"token operator\">=</span>red</pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token assign-left variable\">user</span><span class=\"token operator\">=</span>Chimoku</pre></td></tr></table></figure></li>\n<li>\n<p>Counter</p>\n<p>Counter æ˜¯ä¸€ä¸ªç®€å•çš„è®¡æ•°å™¨ï¼Œå®é™…ä¸Šå®ƒä¹Ÿæ˜¯ dict çš„ä¸€ä¸ªå­ç±»ã€‚</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># ä½¿ç”¨ Counter ç»Ÿè®¡å­—ç¬¦å‡ºç°çš„ä¸ªæ•°</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">from</span> collections <span class=\"token keyword\">import</span> Counter</pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>c <span class=\"token operator\">=</span> Counter<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">for</span> ch <span class=\"token keyword\">in</span> <span class=\"token string\">'programming'</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    c<span class=\"token punctuation\">[</span>ch<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> c<span class=\"token punctuation\">[</span>ch<span class=\"token punctuation\">]</span> <span class=\"token operator\">+</span> <span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>c<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># Counter(&#123;'r': 2, 'g': 2, 'm': 2, 'p': 1, 'o': 1, 'a': 1, 'i': 1, 'n': 1&#125;)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>c<span class=\"token punctuation\">.</span>update<span class=\"token punctuation\">(</span><span class=\"token string\">\"playing\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>c<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># Counter(&#123;'g': 3, 'p': 2, 'r': 2, 'a': 2, 'm': 2, 'i': 2, 'n': 2, 'o': 1, 'l': 1, 'y': 1&#125;)</span></pre></td></tr></table></figure></li>\n</ol>\n<h4 id=\"base64\"><a class=\"anchor\" href=\"#base64\">#</a> base64</h4>\n<p>Base64 æ˜¯ä¸€ç§ç”¨ 64 ä¸ªå­—ç¬¦æ¥è¡¨ç¤ºä»»æ„äºŒè¿›åˆ¶æ•°æ®çš„æ–¹æ³•ï¼ŒPython å†…ç½®çš„  <code>base64</code>  å¯ä»¥ç›´æ¥è¿›è¡Œ base64 çš„ç¼–è§£ç ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> base64</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>en <span class=\"token operator\">=</span> base64<span class=\"token punctuation\">.</span>b64encode<span class=\"token punctuation\">(</span><span class=\"token string\">b'binary\\x00string'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>en<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># b'YmluYXJ5AHN0cmluZw=='</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>de <span class=\"token operator\">=</span> base64<span class=\"token punctuation\">.</span>b64decode<span class=\"token punctuation\">(</span><span class=\"token string\">b'YmluYXJ5AHN0cmluZw=='</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>de<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># b'binary\\x00string'</span></pre></td></tr></table></figure><p>ç”±äºæ ‡å‡†çš„ Base64 ç¼–ç åå¯èƒ½å‡ºç°å­—ç¬¦  <code>+</code>  å’Œ  <code>/</code> ï¼Œåœ¨ URL ä¸­å°±ä¸èƒ½ç›´æ¥ä½œä¸ºå‚æ•°ï¼Œæ‰€ä»¥åˆæœ‰ä¸€ç§  <code>url safe</code>  çš„ base64 ç¼–ç ï¼Œå…¶å®å°±æ˜¯æŠŠå­—ç¬¦  <code>+</code>  å’Œ  <code>/</code>  åˆ†åˆ«å˜æˆ  <code>-</code>  å’Œ  <code>_</code> ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> base64</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>en_byte <span class=\"token operator\">=</span> <span class=\"token string\">b'i\\xb7\\x1d\\xfb\\xef\\xff'</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>en2 <span class=\"token operator\">=</span> base64<span class=\"token punctuation\">.</span>b64encode<span class=\"token punctuation\">(</span>en_byte<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>en2<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># b'abcd++//'</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>uen <span class=\"token operator\">=</span> base64<span class=\"token punctuation\">.</span>urlsafe_b64encode<span class=\"token punctuation\">(</span>en_byte<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>uen<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># b'abcd--__'</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>ude <span class=\"token operator\">=</span> base64<span class=\"token punctuation\">.</span>urlsafe_b64decode<span class=\"token punctuation\">(</span>uen<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>ude <span class=\"token operator\">==</span> en_byte<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># True</span></pre></td></tr></table></figure><p>Base64 é€‚ç”¨äºå°æ®µå†…å®¹çš„ç¼–ç ï¼Œæ¯”å¦‚æ•°å­—è¯ä¹¦ç­¾åã€Cookie çš„å†…å®¹ç­‰ï¼Œä½†æ˜¯ï¼Œç”±äº  <code>=</code>  å­—ç¬¦ä¹Ÿå¯èƒ½å‡ºç°åœ¨ Base64 ç¼–ç ä¸­ï¼Œä½†  <code>=</code>  ç”¨åœ¨ URLã€Cookie é‡Œé¢ä¼šé€ æˆæ­§ä¹‰ï¼Œæ‰€ä»¥ï¼Œå¾ˆå¤š Base64 ç¼–ç åä¼šæŠŠ  <code>=</code>  å»æ‰ã€‚</p>\n<p>Base64 æ˜¯ä¸€ç§ä»»æ„äºŒè¿›åˆ¶åˆ°æ–‡æœ¬å­—ç¬¦ä¸²çš„ç¼–ç æ–¹æ³•ï¼Œå¸¸ç”¨äºåœ¨ URLã€Cookieã€ç½‘é¡µä¸­ä¼ è¾“å°‘é‡äºŒè¿›åˆ¶æ•°æ®ã€‚</p>\n<h4 id=\"struct\"><a class=\"anchor\" href=\"#struct\">#</a> struct</h4>\n<p>åœ¨ Python ä¸­å¹¶æ²¡æœ‰ä¸“é—¨ç”¨äºå¤„ç†å­—èŠ‚çš„æ•°æ®ç±»å‹ï¼Œä½†æ˜¯ç”±äº  <code>b'str'</code>  å¯ä»¥ç”¨æ¥è¡¨ç¤ºå­—èŠ‚ï¼Œæ‰€ä»¥ï¼ŒPython é€šå¸¸ç”¨äºŒè¿›åˆ¶å­—ç¬¦ä¸²æ¥è¡¨ç¤ºå­—èŠ‚æ•°ç»„ã€‚</p>\n<p>Python æä¾›äº†ä¸€ä¸ª  <code>struct</code>  æ¨¡å—ç”¨æ¥è§£å†³ bytes å’Œå…¶ä»–äºŒè¿›åˆ¶æ•°æ®ç±»å‹ä¹‹é—´çš„è½¬æ¢é—®é¢˜ã€‚struct æ¨¡å—çš„ pack å‡½æ•°æŠŠä»»æ„æ•°æ®ç±»å‹å˜æˆ bytesï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> struct</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>a <span class=\"token operator\">=</span> struct<span class=\"token punctuation\">.</span>pack<span class=\"token punctuation\">(</span><span class=\"token string\">'>I'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">10240099</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># >I æ˜¯å¤„ç†æŒ‡ä»¤ï¼Œ</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># b'\\x00\\x9c@c'</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>un <span class=\"token operator\">=</span> struct<span class=\"token punctuation\">.</span>unpack<span class=\"token punctuation\">(</span><span class=\"token string\">'>IH'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">b'\\xf0\\xf0\\xf0\\xf0\\x80\\x80'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>un<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># (4042322160, 32896)</span></pre></td></tr></table></figure><p>å…¶ä¸­ï¼Œ <code>&gt;</code>  è¡¨ç¤ºå­—èŠ‚é¡ºåºæ˜¯ big-endianï¼Œä¹Ÿå°±æ˜¯ç½‘ç»œåºï¼Œ <code>I</code>  è¡¨ç¤º 4 å­—èŠ‚æ— ç¬¦å·æ•´æ•°ã€‚åé¢çš„å‚æ•°ä¸ªæ•°è¦å’Œå¤„ç†æŒ‡ä»¤ä¸€è‡´ã€‚</p>\n<p>è€Œ  <code>unpack</code>  åˆ™æ˜¯å°† bytes è½¬æ¢ä¸ºç›¸åº”çš„æ•°æ®ç±»å‹ã€‚</p>\n<p>å°½ç®¡ Python ä¸é€‚åˆç¼–å†™åº•å±‚æ“ä½œå­—èŠ‚æµçš„ä»£ç ï¼Œä½†åœ¨å¯¹æ€§èƒ½è¦æ±‚ä¸é«˜çš„åœ°æ–¹ï¼Œåˆ©ç”¨  <code>struct</code>  å°†ä¼šæä¾›å¾ˆå¤§çš„ä¾¿åˆ©ã€‚</p>\n<h4 id=\"hashlib\"><a class=\"anchor\" href=\"#hashlib\">#</a> hashlib</h4>\n<p>Python çš„ hashlib æä¾›äº†å¸¸è§çš„æ‘˜è¦ç®—æ³•ï¼Œå¦‚ MD5ï¼ŒSHA1 ç­‰ç­‰ã€‚</p>\n<p>æ‘˜è¦ç®—æ³•åˆç§°å“ˆå¸Œç®—æ³•ã€æ•£åˆ—ç®—æ³•ã€‚å®ƒé€šè¿‡ä¸€ä¸ªå‡½æ•°ï¼ŒæŠŠä»»æ„é•¿åº¦çš„æ•°æ®è½¬æ¢ä¸ºä¸€ä¸ªé•¿åº¦å›ºå®šçš„æ•°æ®ä¸²ï¼ˆé€šå¸¸ç”¨ 16 è¿›åˆ¶çš„å­—ç¬¦ä¸²è¡¨ç¤ºï¼‰ã€‚</p>\n<p>æ‘˜è¦ç®—æ³•å°±æ˜¯é€šè¿‡æ‘˜è¦å‡½æ•°  <code>f()</code>  å¯¹ä»»æ„é•¿åº¦çš„æ•°æ®  <code>data</code>  è®¡ç®—å‡ºå›ºå®šé•¿åº¦çš„æ‘˜è¦  <code>digest</code> ï¼Œç›®çš„æ˜¯ä¸ºäº†å‘ç°åŸå§‹æ•°æ®æ˜¯å¦è¢«äººç¯¡æ”¹è¿‡ã€‚</p>\n<p>æ‘˜è¦ç®—æ³•ä¹‹æ‰€ä»¥èƒ½æŒ‡å‡ºæ•°æ®æ˜¯å¦è¢«ç¯¡æ”¹è¿‡ï¼Œå°±æ˜¯å› ä¸ºæ‘˜è¦å‡½æ•°æ˜¯ä¸€ä¸ªå•å‘å‡½æ•°ï¼Œè®¡ç®—  <code>f(data)</code>  å¾ˆå®¹æ˜“ï¼Œä½†é€šè¿‡ digest åæ¨ data å´éå¸¸å›°éš¾ã€‚è€Œä¸”ï¼Œå¯¹åŸå§‹æ•°æ®åšä¸€ä¸ª bit çš„ä¿®æ”¹ï¼Œéƒ½ä¼šå¯¼è‡´è®¡ç®—å‡ºçš„æ‘˜è¦å®Œå…¨ä¸åŒã€‚</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># MD5 æ‘˜è¦ç®—æ³•</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> hashlib</pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>md5 <span class=\"token operator\">=</span> hashlib<span class=\"token punctuation\">.</span>md5<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>md5<span class=\"token punctuation\">.</span>update<span class=\"token punctuation\">(</span><span class=\"token string\">'how to use md5 in python hashlib?'</span><span class=\"token punctuation\">.</span>encode<span class=\"token punctuation\">(</span><span class=\"token string\">'utf-8'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>md5<span class=\"token punctuation\">.</span>hexdigest<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># d26a53750bc40b38b65a520292f69306</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token comment\"># æ‘˜è¦ç®—æ³•æ”¯æŒå°†åŸå§‹å­—ç¬¦ä¸²è¿›è¡Œåˆ†æ®µè®¡ç®—ï¼Œå…¶è®¡ç®—ç»“æœä¸å—å½±å“</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>md5_2 <span class=\"token operator\">=</span> hashlib<span class=\"token punctuation\">.</span>md5<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>md5_2<span class=\"token punctuation\">.</span>update<span class=\"token punctuation\">(</span><span class=\"token string\">'how to use md5 '</span><span class=\"token punctuation\">.</span>encode<span class=\"token punctuation\">(</span><span class=\"token string\">'utf-8'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>md5_2<span class=\"token punctuation\">.</span>update<span class=\"token punctuation\">(</span><span class=\"token string\">'in python hashlib?'</span><span class=\"token punctuation\">.</span>encode<span class=\"token punctuation\">(</span><span class=\"token string\">'utf-8'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>md5_2<span class=\"token punctuation\">.</span>hexdigest<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>__eq__<span class=\"token punctuation\">(</span>md5<span class=\"token punctuation\">.</span>hexdigest<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># True</span></pre></td></tr></table></figure><p>MD5 æ˜¯æœ€å¸¸è§çš„æ‘˜è¦ç®—æ³•ï¼Œé€Ÿåº¦å¾ˆå¿«ï¼Œç”Ÿæˆç»“æœæ˜¯å›ºå®šçš„ 128 bit å­—èŠ‚ï¼Œé€šå¸¸ç”¨ä¸€ä¸ª 32 ä½çš„ 16 è¿›åˆ¶å­—ç¬¦ä¸²è¡¨ç¤ºã€‚</p>\n<p>å¦ä¸€ç§å¸¸è§çš„æ‘˜è¦ç®—æ³•æ˜¯ SHA1ï¼Œè°ƒç”¨ SHA1 å’Œè°ƒç”¨ MD5 å®Œå…¨ç±»ä¼¼ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> hashlib</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>sha1 <span class=\"token operator\">=</span> hashlib<span class=\"token punctuation\">.</span>sha1<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>sha1<span class=\"token punctuation\">.</span>update<span class=\"token punctuation\">(</span><span class=\"token string\">'how to use sha1 in '</span><span class=\"token punctuation\">.</span>encode<span class=\"token punctuation\">(</span><span class=\"token string\">'utf-8'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>sha1<span class=\"token punctuation\">.</span>update<span class=\"token punctuation\">(</span><span class=\"token string\">'python hashlib?'</span><span class=\"token punctuation\">.</span>encode<span class=\"token punctuation\">(</span><span class=\"token string\">'utf-8'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>sha1<span class=\"token punctuation\">.</span>hexdigest<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># 2c76b57293ce30acef38d98f6046927161b46a44</span></pre></td></tr></table></figure><p>SHA1 çš„ç»“æœæ˜¯ 160 bit å­—èŠ‚ï¼Œé€šå¸¸ç”¨ä¸€ä¸ª 40 ä½çš„ 16 è¿›åˆ¶å­—ç¬¦ä¸²è¡¨ç¤ºã€‚æ¯” SHA1 æ›´å®‰å…¨çš„ç®—æ³•æ˜¯ SHA256 å’Œ SHA512ï¼Œä¸è¿‡è¶Šå®‰å…¨çš„ç®—æ³•ä¸ä»…è¶Šæ…¢ï¼Œè€Œä¸”æ‘˜è¦é•¿åº¦æ›´é•¿ã€‚</p>\n<blockquote>\n<p>å¯¹äºä¸¤ä¸ªå®Œå…¨ä¸åŒçš„æ•°æ®ï¼Œå®ƒä»¬é€šè¿‡æ‘˜è¦ç®—æ³•è®¡ç®—å‡ºçš„ç»“æœæ˜¯æœ‰å¯èƒ½ä¸€æ ·çš„ï¼Œä½†æ˜¯è¿™ç§å‡ ç‡ååˆ†å°ã€‚</p>\n</blockquote>\n<p>MD5 ç®—æ³•ç»å¸¸åº”ç”¨åœ¨ç”¨æˆ·è´¦å·å¯†ç ä¸­ï¼Œä½†æ˜¯å¯¹äºä¸€äº›å¸¸è§„çš„é«˜é¢‘çš„å¯†ç ï¼Œé€šè¿‡ MD5 ç®—æ³•åŠ å¯†çš„ç»“æœä¹Ÿæ˜¯å›ºå®šçš„ï¼Œä¸ºäº†ä¿è¯ç”¨æˆ·çš„è´¦å·å®‰å…¨ï¼Œå¯ä»¥åœ¨åŠ å¯†çš„æ—¶å€™å¯¹ç”¨æˆ·çš„å¯†ç è¿›è¡ŒåŠ ç›å¤„ç†ï¼Œè¿™æ ·èƒ½ä¿è¯ç”¨æˆ·çš„å¯†ç é€šè¿‡åŠ å¯†åçš„ç»“æœä¸ä¼šä¸å¸¸è§„å­—ç¬¦ä¸²åŠ å¯†åçš„ç»“æœç›¸åŒã€‚</p>\n<p>æ‘˜è¦ç®—æ³•åœ¨å¾ˆå¤šåœ°æ–¹éƒ½æœ‰å¹¿æ³›çš„åº”ç”¨ã€‚è¦æ³¨æ„æ‘˜è¦ç®—æ³•ä¸æ˜¯åŠ å¯†ç®—æ³•ï¼Œä¸èƒ½ç”¨äºåŠ å¯†ï¼ˆå› ä¸ºæ— æ³•é€šè¿‡æ‘˜è¦åæ¨æ˜æ–‡ï¼‰ï¼Œåªèƒ½ç”¨äºé˜²ç¯¡æ”¹ï¼Œä½†æ˜¯å®ƒçš„å•å‘è®¡ç®—ç‰¹æ€§å†³å®šäº†å¯ä»¥åœ¨ä¸å­˜å‚¨æ˜æ–‡å£ä»¤çš„æƒ…å†µä¸‹éªŒè¯ç”¨æˆ·å£ä»¤ã€‚</p>\n<h4 id=\"hmac\"><a class=\"anchor\" href=\"#hmac\">#</a> hmac</h4>\n<p>Hmacï¼ˆKeyed-Hashing for Message Authenticationï¼‰é€šè¿‡ä¸€ä¸ªæ ‡å‡†ç®—æ³•ï¼Œåœ¨è®¡ç®—å“ˆå¸Œçš„è¿‡ç¨‹ä¸­ï¼Œå°† key æ··å…¥è®¡ç®—è¿‡ç¨‹ä¸­ï¼Œå’Œæˆ‘ä»¬è‡ªå®šä¹‰çš„åŠ  salt ç®—æ³•ä¸åŒï¼ŒHmac ç®—æ³•é’ˆå¯¹æ‰€æœ‰å“ˆå¸Œç®—æ³•éƒ½é€šç”¨ï¼Œæ— è®ºæ˜¯ MD5 è¿˜æ˜¯ SHA-1ã€‚é‡‡ç”¨ Hmac æ›¿ä»£æˆ‘ä»¬è‡ªå·±çš„ salt ç®—æ³•ï¼Œå¯ä»¥ä½¿ç¨‹åºç®—æ³•æ›´æ ‡å‡†åŒ–ï¼Œä¹Ÿæ›´å®‰å…¨ã€‚</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> hmac</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>message <span class=\"token operator\">=</span> <span class=\"token string\">b'Hi, boy!'</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>key <span class=\"token operator\">=</span> <span class=\"token string\">b'randomkey'</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>h <span class=\"token operator\">=</span> hmac<span class=\"token punctuation\">.</span>new<span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">,</span> message<span class=\"token punctuation\">,</span> digestmod<span class=\"token operator\">=</span><span class=\"token string\">'MD5'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>h<span class=\"token punctuation\">.</span>update<span class=\"token punctuation\">(</span><span class=\"token string\">b' how are you?'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>r <span class=\"token operator\">=</span> h<span class=\"token punctuation\">.</span>hexdigest<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>r<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># ae64cbf0742a13a1c8e2e3341779d2b3</span></pre></td></tr></table></figure><p>hmac å’Œæ™®é€š hash ç®—æ³•éå¸¸ç±»ä¼¼ã€‚hmac è¾“å‡ºçš„é•¿åº¦å’ŒåŸå§‹å“ˆå¸Œç®—æ³•çš„é•¿åº¦ä¸€è‡´ã€‚ä½†æ³¨æ„ä¼ å…¥çš„ key å’Œ message éƒ½æ˜¯  <code>bytes</code>  ç±»å‹ï¼Œ <code>str</code>  ç±»å‹éœ€è¦é¦–å…ˆç¼–ç ä¸º  <code>bytes</code> ã€‚</p>\n<h4 id=\"itertools\"><a class=\"anchor\" href=\"#itertools\">#</a> itertools</h4>\n<p>Python çš„å†…å»ºæ¨¡å—  <code>itertools</code>  æä¾›äº†éå¸¸æœ‰ç”¨çš„ç”¨äºæ“ä½œè¿­ä»£å¯¹è±¡çš„å‡½æ•°ã€‚</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> itertools</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\"># æ— é™è‡ªç„¶æ•°åºåˆ—</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>iter_num <span class=\"token operator\">=</span> itertools<span class=\"token punctuation\">.</span>count<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">for</span> n <span class=\"token keyword\">in</span> iter_num<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># print Ctrl+C to stop</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token comment\"># å­—ç¬¦æ— é™å¾ªç¯</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>iter_str <span class=\"token operator\">=</span> itertools<span class=\"token punctuation\">.</span>cycle<span class=\"token punctuation\">(</span><span class=\"token string\">'ABCD'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token keyword\">for</span> n <span class=\"token keyword\">in</span> iter_str<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># print Ctrl+C to stop</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token comment\"># å°†æŒ‡å®šå†…å®¹é‡å¤æŒ‡å®šæ¬¡æ•°</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>iter_repeat <span class=\"token operator\">=</span> itertools<span class=\"token punctuation\">.</span>repeat<span class=\"token punctuation\">(</span><span class=\"token string\">'AB'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">10</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token keyword\">for</span> n <span class=\"token keyword\">in</span> iter_repeat<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token comment\"># takewhile ()ï¼šä»æ— é™åºåˆ—ä¸­æ ¹æ®æ¡ä»¶æˆªå–æœ‰é™åºåˆ—</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>iter_takewhile <span class=\"token operator\">=</span> itertools<span class=\"token punctuation\">.</span>count<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>r <span class=\"token operator\">=</span> itertools<span class=\"token punctuation\">.</span>takewhile<span class=\"token punctuation\">(</span><span class=\"token keyword\">lambda</span> x<span class=\"token punctuation\">:</span> x <span class=\"token operator\">&lt;=</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span> iter_takewhile<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">list</span><span class=\"token punctuation\">(</span>r<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># [1, 2, 3, 4, 5]</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre></pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token comment\"># chain ()ï¼šå°†å¤šä¸ªè¿­ä»£å¯¹è±¡ä¸²è”èµ·æ¥</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>chin_list <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre><span class=\"token keyword\">for</span> c <span class=\"token keyword\">in</span> itertools<span class=\"token punctuation\">.</span>chain<span class=\"token punctuation\">(</span><span class=\"token string\">'ABC'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'XYZ'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'O'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>    chin_list<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span>c<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>chin_list<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># ['A', 'B', 'C', 'X', 'Y', 'Z', 'O']</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre></pre></td></tr><tr><td data-num=\"29\"></td><td><pre><span class=\"token comment\"># groupby ()ï¼šå°†è¿­ä»£å¯¹è±¡ä¸­è¿ç»­çš„ç›¸åŒå…ƒç´ è¿›è¡Œåˆ†ç»„ï¼ˆå¯ä»¥æŒ‡å®šè§„åˆ™ï¼‰</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>list_group <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre><span class=\"token keyword\">for</span> key<span class=\"token punctuation\">,</span> group <span class=\"token keyword\">in</span> itertools<span class=\"token punctuation\">.</span>groupby<span class=\"token punctuation\">(</span><span class=\"token string\">'AaaBBbaAcC'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">lambda</span> c<span class=\"token punctuation\">:</span> c<span class=\"token punctuation\">.</span>upper<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>    list_sub <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">,</span> <span class=\"token string\">''</span><span class=\"token punctuation\">.</span>join<span class=\"token punctuation\">(</span><span class=\"token builtin\">list</span><span class=\"token punctuation\">(</span>group<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>    list_group<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span>list_sub<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>list_group<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># [['A', 'Aaa'], ['B', 'BBb'], ['A', 'aA'], ['C', 'cC']]</span></pre></td></tr></table></figure><p>itertools ç”Ÿæˆçš„è¿­ä»£å¯¹è±¡ï¼Œå…¶å†…éƒ¨çš„å…ƒç´ åªæœ‰åœ¨è¿›è¡Œè¿­ä»£çš„æ—¶å€™æ‰ä¼šç”Ÿæˆã€‚</p>\n<h4 id=\"contextlib\"><a class=\"anchor\" href=\"#contextlib\">#</a> contextlib</h4>\n<p>åœ¨ Python ä¸­ï¼Œåœ¨è¿›è¡Œæ–‡ä»¶è¯»å†™åï¼Œéœ€è¦å¯¹æ˜¾å¼å…³é—­æ–‡ä»¶ï¼Œä½†ä¸ºäº†ä½¿ç”¨æ–¹ä¾¿ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨  <code>with</code>  è¯­å¥è¿›è¡Œç®€åŒ–ã€‚ä½†å®é™…ä¸Šï¼Œwith è¯­å¥ä¸åªé€‚ç”¨äº IO æ“ä½œï¼Œè€Œæ˜¯é€‚ç”¨äºä»»ä½•æ­£ç¡®å®ç°ä¸Šä¸‹æ–‡ç®¡ç†çš„å¯¹è±¡ï¼Œè€Œä¸Šä¸‹æ–‡ç®¡ç†æ˜¯é€šè¿‡  <code>__enter__</code>  å’Œ  <code>__exit__</code>  æ–¹æ³•æ¥å®ç°çš„ï¼Œå¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">Query</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">object</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">def</span> <span class=\"token function\">__init__</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        self<span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> name</pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">def</span> <span class=\"token function\">__enter__</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Query start -->'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token keyword\">return</span> self</pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token keyword\">def</span> <span class=\"token function\">__exit__</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> exc_type<span class=\"token punctuation\">,</span> exc_value<span class=\"token punctuation\">,</span> traceback<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token keyword\">if</span> exc_type<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>            <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'---- [Something Error] ----'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>            <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'&lt;-- Query end'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token keyword\">def</span> <span class=\"token function\">query</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Query info about %s...'</span> <span class=\"token operator\">%</span> self<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token keyword\">with</span> Query<span class=\"token punctuation\">(</span><span class=\"token string\">'Baidu'</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> q<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    q<span class=\"token punctuation\">.</span>query<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token comment\"># Query start --></span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token comment\"># Query info about Baidu...</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token comment\"># &lt;-- Query end</span></pre></td></tr></table></figure><p>å¯¹äºéœ€è¦è¿›è¡Œä¸Šä¸‹æ–‡ç®¡ç†çš„å¯¹è±¡ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ Python çš„æ ‡å‡†åº“  <code>contextlib</code>  è¿›è¡Œç®€åŒ–ä¹¦å†™ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">from</span> contextlib <span class=\"token keyword\">import</span> contextmanager</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">Query</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">object</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">def</span> <span class=\"token function\">__init__</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        self<span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> name</pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">def</span> <span class=\"token function\">query</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Query info about %s...'</span> <span class=\"token operator\">%</span> self<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token decorator annotation punctuation\">@contextmanager</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">create_query</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Query start -->'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token keyword\">yield</span> Query<span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># æ‰§è¡Œ with è¯­å¥å—ä¸­çš„å†…å®¹</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'&lt;-- Query end'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token keyword\">with</span> create_query<span class=\"token punctuation\">(</span><span class=\"token string\">'Baidu'</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> q<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    q<span class=\"token punctuation\">.</span>query<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token comment\"># Query start --></span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token comment\"># Query info about Baidu...</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token comment\"># &lt;-- Query end</span></pre></td></tr></table></figure><p>å…¶ä¸­ï¼Œ <code>yield</code>  è¯­å¥ç›¸å½“äºè°ƒç”¨æ‰§è¡Œäº† with è¯­å¥å—ä¸­çš„ä»£ç å†…å®¹ã€‚yield è¯­å¥å‰åçš„ä»£ç ï¼Œå°†åˆ†åˆ«åœ¨ with è¯­å¥å—æ‰§è¡Œå‰åæ‰§è¡Œï¼Œå®ƒä»¬ä¹‹é—´çš„æ‰§è¡Œé¡ºåºä¸ºï¼š</p>\n<ol>\n<li>with è¯­å¥æ‰§è¡Œ yield ä¹‹å‰çš„ä»£ç ã€‚</li>\n<li>yield è°ƒç”¨æ‰§è¡Œ with è¯­å¥å—ä¸­çš„ä»£ç ã€‚</li>\n<li>æ‰§è¡Œ yield ä¹‹åçš„ä»£ç ã€‚</li>\n</ol>\n<p>å¦‚æœä¸€ä¸ªå¯¹è±¡æ²¡æœ‰å®ç°ä¸Šä¸‹æ–‡ï¼Œé‚£ä¹ˆå®ƒå°±ä¸èƒ½ç”¨äº with è¯­å¥ï¼Œä½†æˆ‘ä»¬å¯ä»¥ä½¿ç”¨  <code>closing()</code>  æ¥å°†æ™®é€šå¯¹è±¡å˜ä¸ºä¸Šä¸‹æ–‡å¯¹è±¡ï¼Œä¾‹å¦‚ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">from</span> contextlib <span class=\"token keyword\">import</span> closing</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">from</span> urllib<span class=\"token punctuation\">.</span>request <span class=\"token keyword\">import</span> urlopen</pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\"># è·å– python å®˜ç½‘ html å†…å®¹</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">with</span> closing<span class=\"token punctuation\">(</span>urlopen<span class=\"token punctuation\">(</span><span class=\"token string\">'https://www.python.org'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> page<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">for</span> line <span class=\"token keyword\">in</span> page<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>line<span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>ä½†å…¶å®ï¼Œclosing å‡½æ•°åœ¨æºç ä¸­çš„å®šä¹‰ä¹Ÿå¾ˆç®€å•ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">closing</span><span class=\"token punctuation\">(</span>AbstractContextManager<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">def</span> <span class=\"token function\">__init__</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> thing<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        self<span class=\"token punctuation\">.</span>thing <span class=\"token operator\">=</span> thing</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">def</span> <span class=\"token function\">__enter__</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token keyword\">return</span> self<span class=\"token punctuation\">.</span>thing</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">def</span> <span class=\"token function\">__exit__</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> <span class=\"token operator\">*</span>exc_info<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        self<span class=\"token punctuation\">.</span>thing<span class=\"token punctuation\">.</span>close<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>å®ƒæœ¬è´¨ä¸Šä¹Ÿæ˜¯å®šä¹‰äº†  <code>__enter__</code>  å’Œ  <code>__exit__</code>  æ–¹æ³•ä½¿å¯¹è±¡å®ç°äº†ä¸Šä¸‹æ–‡ç®¡ç†ã€‚</p>\n<h4 id=\"urllib\"><a class=\"anchor\" href=\"#urllib\">#</a> urllib</h4>\n<p>urllib æä¾›äº†ä¸€ç³»åˆ—æ“ä½œ URL çš„åŠŸèƒ½ï¼Œå®ƒå¯ä»¥æ¨¡æ‹Ÿæµè§ˆå™¨å‘é€ç½‘ç»œè¯·æ±‚ã€‚</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">from</span> contextlib <span class=\"token keyword\">import</span> closing</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">from</span> urllib <span class=\"token keyword\">import</span> request</pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\"># è·å–ç™¾åº¦é¦–é¡µ html å†…å®¹</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">with</span> closing<span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">.</span>urlopen<span class=\"token punctuation\">(</span><span class=\"token string\">'https://www.baidu.com'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> f<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    data <span class=\"token operator\">=</span> f<span class=\"token punctuation\">.</span>read<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Status:'</span><span class=\"token punctuation\">,</span> f<span class=\"token punctuation\">.</span>status<span class=\"token punctuation\">,</span> f<span class=\"token punctuation\">.</span>reason<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token keyword\">for</span> k<span class=\"token punctuation\">,</span> v <span class=\"token keyword\">in</span> f<span class=\"token punctuation\">.</span>getheaders<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'%s: %s'</span> <span class=\"token operator\">%</span> <span class=\"token punctuation\">(</span>k<span class=\"token punctuation\">,</span> v<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Data:'</span><span class=\"token punctuation\">,</span> data<span class=\"token punctuation\">.</span>decode<span class=\"token punctuation\">(</span><span class=\"token string\">'utf-8'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>åŒæ—¶ï¼Œåœ¨å‘é€è¯·æ±‚æ—¶ï¼Œä¹Ÿå¯ä»¥æŒ‡å®šè¯·æ±‚å¤´ä¿¡æ¯ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">from</span> contextlib <span class=\"token keyword\">import</span> closing</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">from</span> urllib <span class=\"token keyword\">import</span> request</pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\"># è·å–ç™¾åº¦é¦–é¡µ html å†…å®¹ï¼ˆæ¨¡æ‹Ÿ iPhone çš„ç§»åŠ¨ç‰ˆï¼‰</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>req <span class=\"token operator\">=</span> request<span class=\"token punctuation\">.</span>Request<span class=\"token punctuation\">(</span><span class=\"token string\">'http://www.baidu.com/'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>req<span class=\"token punctuation\">.</span>add_header<span class=\"token punctuation\">(</span><span class=\"token string\">'User-Agent'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Mozilla/6.0 (iPhone; CPU iPhone OS 8_0 like Mac OS X) AppleWebKit/536.26 (KHTML, like Gecko) Version/8.0 Mobile/10A5376e Safari/8536.25'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">with</span> closing<span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">.</span>urlopen<span class=\"token punctuation\">(</span>req<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> f<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Status:'</span><span class=\"token punctuation\">,</span> f<span class=\"token punctuation\">.</span>status<span class=\"token punctuation\">,</span> f<span class=\"token punctuation\">.</span>reason<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token keyword\">for</span> k<span class=\"token punctuation\">,</span> v <span class=\"token keyword\">in</span> f<span class=\"token punctuation\">.</span>getheaders<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'%s: %s'</span> <span class=\"token operator\">%</span> <span class=\"token punctuation\">(</span>k<span class=\"token punctuation\">,</span> v<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Data:'</span><span class=\"token punctuation\">,</span> f<span class=\"token punctuation\">.</span>read<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>decode<span class=\"token punctuation\">(</span><span class=\"token string\">'utf-8'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>å¦‚éœ€æ¨¡æ‹Ÿ post è¯·æ±‚ï¼Œåˆ™éœ€è¦å°†æ•°æ®ä»¥ bytes çš„å½¢å¼ä¼ å…¥ï¼Œä¾‹å¦‚ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">from</span> contextlib <span class=\"token keyword\">import</span> closing</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">from</span> urllib <span class=\"token keyword\">import</span> request<span class=\"token punctuation\">,</span> parse</pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Welcome to login xxx...'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>email <span class=\"token operator\">=</span> <span class=\"token builtin\">input</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Email: '</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>passwd <span class=\"token operator\">=</span> <span class=\"token builtin\">input</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Password: '</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>login_data <span class=\"token operator\">=</span> parse<span class=\"token punctuation\">.</span>urlencode<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token punctuation\">(</span><span class=\"token string\">'username'</span><span class=\"token punctuation\">,</span> email<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token punctuation\">(</span><span class=\"token string\">'password'</span><span class=\"token punctuation\">,</span> passwd<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>req <span class=\"token operator\">=</span> request<span class=\"token punctuation\">.</span>Request<span class=\"token punctuation\">(</span><span class=\"token string\">'https://www.youhost.com/login'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token keyword\">with</span> closing<span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">.</span>urlopen<span class=\"token punctuation\">(</span>req<span class=\"token punctuation\">,</span> data<span class=\"token operator\">=</span>login_data<span class=\"token punctuation\">.</span>encode<span class=\"token punctuation\">(</span><span class=\"token string\">'utf-8'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> f<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Status:'</span><span class=\"token punctuation\">,</span> f<span class=\"token punctuation\">.</span>status<span class=\"token punctuation\">,</span> f<span class=\"token punctuation\">.</span>reason<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token keyword\">for</span> k<span class=\"token punctuation\">,</span> v <span class=\"token keyword\">in</span> f<span class=\"token punctuation\">.</span>getheaders<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'%s: %s'</span> <span class=\"token operator\">%</span> <span class=\"token punctuation\">(</span>k<span class=\"token punctuation\">,</span> v<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Data:'</span><span class=\"token punctuation\">,</span> f<span class=\"token punctuation\">.</span>read<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>decode<span class=\"token punctuation\">(</span><span class=\"token string\">'utf-8'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><h4 id=\"xml\"><a class=\"anchor\" href=\"#xml\">#</a> XML</h4>\n<p>æ“ä½œ XML æœ‰ä¸¤ç§æ–¹æ³•ï¼šDOM å’Œ SAXã€‚DOM ä¼šæŠŠæ•´ä¸ª XML è¯»å…¥å†…å­˜ï¼Œè§£æä¸ºæ ‘ï¼Œå› æ­¤å ç”¨å†…å­˜å¤§ï¼Œè§£ææ…¢ï¼Œä¼˜ç‚¹æ˜¯å¯ä»¥ä»»æ„éå†æ ‘çš„èŠ‚ç‚¹ã€‚SAX æ˜¯æµæ¨¡å¼ï¼Œè¾¹è¯»è¾¹è§£æï¼Œå ç”¨å†…å­˜å°ï¼Œè§£æå¿«ï¼Œç¼ºç‚¹æ˜¯æˆ‘ä»¬éœ€è¦è‡ªå·±å¤„ç†äº‹ä»¶ã€‚</p>\n<p>åœ¨ Python ä¸­ä½¿ç”¨ SAX è§£æ XML éå¸¸ç®€æ´ï¼Œå®ƒé€šå¸¸ä¼šäº§ç”Ÿä¸‰ä¸ªäº‹ä»¶ï¼š</p>\n<ol>\n<li>start_elementï¼šxml å…ƒç´ å¼€å§‹æ ‡ç­¾ã€‚</li>\n<li>char_dataï¼šxml å…ƒç´ ç¯ç»•å†…å®¹ã€‚</li>\n<li>end_elementï¼šxml å…ƒç´ ç»“æŸæ ‡ç­¾ã€‚</li>\n</ol>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">from</span> xml<span class=\"token punctuation\">.</span>parsers<span class=\"token punctuation\">.</span>expat <span class=\"token keyword\">import</span> ParserCreate</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">DefaultSaxHandler</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">object</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">def</span> <span class=\"token function\">start_element</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> name<span class=\"token punctuation\">,</span> attrs<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'sax:start_element: %s, attrs: %s'</span> <span class=\"token operator\">%</span> <span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">,</span> <span class=\"token builtin\">str</span><span class=\"token punctuation\">(</span>attrs<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">def</span> <span class=\"token function\">end_element</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'sax:end_element: %s'</span> <span class=\"token operator\">%</span> name<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token keyword\">def</span> <span class=\"token function\">char_data</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> text<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'sax:char_data: %s'</span> <span class=\"token operator\">%</span> text<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>xml <span class=\"token operator\">=</span> <span class=\"token triple-quoted-string string\">r'''&lt;?xml version=\"1.0\"?></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>&lt;ol></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    &lt;li>&lt;a href=\"/python\">Python&lt;/a>&lt;/li></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    &lt;li>&lt;a href=\"/java\">Java&lt;/a>&lt;/li></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>&lt;/ol></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>'''</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>handler <span class=\"token operator\">=</span> DefaultSaxHandler<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>parser <span class=\"token operator\">=</span> ParserCreate<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>parser<span class=\"token punctuation\">.</span>StartElementHandler <span class=\"token operator\">=</span> handler<span class=\"token punctuation\">.</span>start_element</pre></td></tr><tr><td data-num=\"24\"></td><td><pre>parser<span class=\"token punctuation\">.</span>EndElementHandler <span class=\"token operator\">=</span> handler<span class=\"token punctuation\">.</span>end_element</pre></td></tr><tr><td data-num=\"25\"></td><td><pre>parser<span class=\"token punctuation\">.</span>CharacterDataHandler <span class=\"token operator\">=</span> handler<span class=\"token punctuation\">.</span>char_data</pre></td></tr><tr><td data-num=\"26\"></td><td><pre>parser<span class=\"token punctuation\">.</span>Parse<span class=\"token punctuation\">(</span>xml<span class=\"token punctuation\">)</span></pre></td></tr></table></figure><blockquote>\n<p>ç›¸æ¯” JSON è€Œè¨€ï¼ŒXML è¾ƒä¸ºå¤æ‚ï¼Œç»„è£…æ•°æ®ä¹Ÿå¾ˆä¸æ–¹ä¾¿ï¼Œæ¨èä¼˜å…ˆä½¿ç”¨ JSONã€‚</p>\n</blockquote>\n<h4 id=\"htmlparser\"><a class=\"anchor\" href=\"#htmlparser\">#</a> HTMLParser</h4>\n<p>HTML æœ¬è´¨ä¸Šæ˜¯ XML çš„å­é›†ï¼Œä½†æ˜¯ HTML çš„è¯­æ³•æ²¡æœ‰ XML é‚£ä¹ˆä¸¥æ ¼ï¼Œæ‰€ä»¥ä¸èƒ½ç”¨æ ‡å‡†çš„ DOM æˆ– SAX æ¥è§£æ HTMLã€‚Python ä¸ºæ­¤æä¾›äº† HTMLParser æ¥éå¸¸æ–¹ä¾¿åœ°è§£æ HTMLã€‚</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">from</span> html<span class=\"token punctuation\">.</span>parser <span class=\"token keyword\">import</span> HTMLParser</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">MyHTMLParser</span><span class=\"token punctuation\">(</span>HTMLParser<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">def</span> <span class=\"token function\">handle_starttag</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> tag<span class=\"token punctuation\">,</span> attrs<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'&lt;%s>'</span> <span class=\"token operator\">%</span> tag<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">def</span> <span class=\"token function\">handle_endtag</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> tag<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'&lt;/%s>'</span> <span class=\"token operator\">%</span> tag<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token keyword\">def</span> <span class=\"token function\">handle_startendtag</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> tag<span class=\"token punctuation\">,</span> attrs<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'&lt;%s/>'</span> <span class=\"token operator\">%</span> tag<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token keyword\">def</span> <span class=\"token function\">handle_data</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token keyword\">def</span> <span class=\"token function\">handle_comment</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'&lt;!--'</span><span class=\"token punctuation\">,</span> data<span class=\"token punctuation\">,</span> <span class=\"token string\">'-->'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token keyword\">def</span> <span class=\"token function\">handle_entityref</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'&amp;%s;'</span> <span class=\"token operator\">%</span> name<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    <span class=\"token keyword\">def</span> <span class=\"token function\">handle_charref</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'&amp;#%s;'</span> <span class=\"token operator\">%</span> name<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>parser <span class=\"token operator\">=</span> MyHTMLParser<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>parser<span class=\"token punctuation\">.</span>feed<span class=\"token punctuation\">(</span><span class=\"token triple-quoted-string string\">'''&lt;html></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>&lt;head>&lt;/head></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>&lt;body></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>&lt;!-- test html parser --></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>    &lt;p>Some &lt;a href=\\\"#\\\">html&lt;/a> HTML&amp;nbsp;tutorial...&lt;br>END&lt;/p></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>&lt;/body>&lt;/html>'''</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p><code>feed()</code>  æ–¹æ³•å¯ä»¥å¤šæ¬¡è°ƒç”¨ï¼Œå› æ­¤ï¼Œå¯¹äºä¸€ä¸ª HTML å­—ç¬¦ä¸²ï¼Œä¹Ÿå¯ä»¥è¿›è¡Œåˆ†æ®µå¤„ç†ã€‚</p>\n<h3 id=\"å¸¸ç”¨ç¬¬ä¸‰æ–¹æ¨¡å—\"><a class=\"anchor\" href=\"#å¸¸ç”¨ç¬¬ä¸‰æ–¹æ¨¡å—\">#</a> å¸¸ç”¨ç¬¬ä¸‰æ–¹æ¨¡å—</h3>\n<p>åŸºæœ¬ä¸Š Python æ‰€æœ‰ç¬¬ä¸‰æ–¹æ¨¡å—éƒ½ä¼šåœ¨ <span class=\"exturl\" data-url=\"aHR0cHM6Ly9weXBpLnB5dGhvbi5vcmcv\">PyPI - the Python Package Index</span> è¿›è¡Œæ³¨å†Œï¼Œéœ€è¦ä½¿ç”¨æ—¶ï¼Œç›´æ¥é€šè¿‡ pip è¿›è¡Œå®‰è£…å³å¯ã€‚</p>\n<h4 id=\"pillow\"><a class=\"anchor\" href=\"#pillow\">#</a> Pillow</h4>\n<p>PILï¼šPython Imaging Libraryã€‚</p>\n<ol>\n<li>\n<p>å®‰è£… Pillow</p>\n<p>å¦‚æœå·²ç»å®‰è£… Anacondaï¼Œé‚£ä¹ˆ Pillow å¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œå¦‚æœæœªå®‰è£… Anacondaï¼Œåˆ™éœ€è¦æ‰§è¡Œå‘½ä»¤  <code>pip install pillow</code>  è¿›è¡Œå®‰è£…ã€‚</p>\n</li>\n<li>\n<p>ä½¿ç”¨ Pillow æ“ä½œå›¾åƒ</p>\n<p>ç¼©å°å›¾åƒå¹¶è¿›è¡Œæ¨¡ç³Šå¤„ç†ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">from</span> PIL <span class=\"token keyword\">import</span> Image<span class=\"token punctuation\">,</span> ImageFilter</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\"># æ‰“å¼€ä¸€ä¸ª jpg å›¾åƒæ–‡ä»¶ï¼Œæ³¨æ„æ˜¯å½“å‰è·¯å¾„:</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>im <span class=\"token operator\">=</span> Image<span class=\"token punctuation\">.</span><span class=\"token builtin\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">'A:\\\\img\\\\test.jpg'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\"># è·å¾—å›¾åƒå°ºå¯¸:</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>w<span class=\"token punctuation\">,</span> h <span class=\"token operator\">=</span> im<span class=\"token punctuation\">.</span>size</pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Original image size: %sx%s'</span> <span class=\"token operator\">%</span> <span class=\"token punctuation\">(</span>w<span class=\"token punctuation\">,</span> h<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token comment\"># ç¼©æ”¾åˆ° 50%:</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>im<span class=\"token punctuation\">.</span>thumbnail<span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>w <span class=\"token operator\">//</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> h <span class=\"token operator\">//</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Resize image to: %sx%s'</span> <span class=\"token operator\">%</span> <span class=\"token punctuation\">(</span>w <span class=\"token operator\">//</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> h <span class=\"token operator\">//</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token comment\"># åº”ç”¨æ¨¡ç³Šæ»¤é•œ:</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>im2 <span class=\"token operator\">=</span> im<span class=\"token punctuation\">.</span><span class=\"token builtin\">filter</span><span class=\"token punctuation\">(</span>ImageFilter<span class=\"token punctuation\">.</span>BLUR<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token comment\"># æŠŠç¼©æ”¾åçš„å›¾åƒç”¨ jpeg æ ¼å¼ä¿å­˜:</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>im2<span class=\"token punctuation\">.</span>save<span class=\"token punctuation\">(</span><span class=\"token string\">'A:\\\\img\\\\test2.jpg'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'jpeg'</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>é™¤äº†ç¼©æ”¾å’Œæ¨¡ç³Šå¤„ç†å¤–ï¼Œè¿˜å¯ä»¥è¿›è¡Œå¦‚åˆ‡ç‰‡ã€æ—‹è½¬ã€æ»¤é•œã€è¾“å‡ºæ–‡å­—ã€è°ƒè‰²æ¿ç­‰ä¸€äº›åˆ—å›¾åƒæ“ä½œã€‚</p>\n<p>ç”ŸæˆéªŒè¯ç å›¾ç‰‡ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">from</span> PIL <span class=\"token keyword\">import</span> Image<span class=\"token punctuation\">,</span> ImageDraw<span class=\"token punctuation\">,</span> ImageFont<span class=\"token punctuation\">,</span> ImageFilter</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> random</pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\"># éšæœºå­—æ¯:</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">rndChar</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token builtin\">chr</span><span class=\"token punctuation\">(</span>random<span class=\"token punctuation\">.</span>randint<span class=\"token punctuation\">(</span><span class=\"token number\">65</span><span class=\"token punctuation\">,</span> <span class=\"token number\">90</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\"># éšæœºé¢œè‰² 1:</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">rndColor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>random<span class=\"token punctuation\">.</span>randint<span class=\"token punctuation\">(</span><span class=\"token number\">64</span><span class=\"token punctuation\">,</span> <span class=\"token number\">255</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> random<span class=\"token punctuation\">.</span>randint<span class=\"token punctuation\">(</span><span class=\"token number\">64</span><span class=\"token punctuation\">,</span> <span class=\"token number\">255</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> random<span class=\"token punctuation\">.</span>randint<span class=\"token punctuation\">(</span><span class=\"token number\">64</span><span class=\"token punctuation\">,</span> <span class=\"token number\">255</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token comment\"># éšæœºé¢œè‰² 2:</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">rndColor2</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>random<span class=\"token punctuation\">.</span>randint<span class=\"token punctuation\">(</span><span class=\"token number\">32</span><span class=\"token punctuation\">,</span> <span class=\"token number\">127</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> random<span class=\"token punctuation\">.</span>randint<span class=\"token punctuation\">(</span><span class=\"token number\">32</span><span class=\"token punctuation\">,</span> <span class=\"token number\">127</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> random<span class=\"token punctuation\">.</span>randint<span class=\"token punctuation\">(</span><span class=\"token number\">32</span><span class=\"token punctuation\">,</span> <span class=\"token number\">127</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token comment\"># 240 x 60:</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>width <span class=\"token operator\">=</span> <span class=\"token number\">60</span> <span class=\"token operator\">*</span> <span class=\"token number\">4</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>height <span class=\"token operator\">=</span> <span class=\"token number\">60</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>image <span class=\"token operator\">=</span> Image<span class=\"token punctuation\">.</span>new<span class=\"token punctuation\">(</span><span class=\"token string\">'RGB'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>width<span class=\"token punctuation\">,</span> height<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token number\">255</span><span class=\"token punctuation\">,</span> <span class=\"token number\">255</span><span class=\"token punctuation\">,</span> <span class=\"token number\">255</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token comment\"># åˆ›å»º Font å¯¹è±¡:</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>font <span class=\"token operator\">=</span> ImageFont<span class=\"token punctuation\">.</span>truetype<span class=\"token punctuation\">(</span><span class=\"token string\">'arial.ttf'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">36</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token comment\"># åˆ›å»º Draw å¯¹è±¡:</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>draw <span class=\"token operator\">=</span> ImageDraw<span class=\"token punctuation\">.</span>Draw<span class=\"token punctuation\">(</span>image<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre><span class=\"token comment\"># å¡«å……æ¯ä¸ªåƒç´ :</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre><span class=\"token keyword\">for</span> x <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span>width<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>    <span class=\"token keyword\">for</span> y <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span>height<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>        draw<span class=\"token punctuation\">.</span>point<span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> fill<span class=\"token operator\">=</span>rndColor<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre><span class=\"token comment\"># è¾“å‡ºæ–‡å­—:</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre><span class=\"token keyword\">for</span> t <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">4</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>    draw<span class=\"token punctuation\">.</span>text<span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token number\">60</span> <span class=\"token operator\">*</span> t <span class=\"token operator\">+</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> rndChar<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> font<span class=\"token operator\">=</span>font<span class=\"token punctuation\">,</span> fill<span class=\"token operator\">=</span>rndColor2<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre><span class=\"token comment\"># æ¨¡ç³Š:</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>image <span class=\"token operator\">=</span> image<span class=\"token punctuation\">.</span><span class=\"token builtin\">filter</span><span class=\"token punctuation\">(</span>ImageFilter<span class=\"token punctuation\">.</span>BLUR<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>image<span class=\"token punctuation\">.</span>save<span class=\"token punctuation\">(</span><span class=\"token string\">'A:\\\\img\\\\captcha.jpg'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'jpeg'</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p><img data-src=\"https://img.xfc-exclave.com/2021/09/aefae28314fc57e0bdd4a2986c0eef9a1632739425.jpg\" alt=\"Pythonç”ŸæˆéªŒè¯ç \" /></p>\n<blockquote>\n<p>æ›´å¤šå¥½ç©çš„åŠŸèƒ½ï¼Œå‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼š<span class=\"exturl\" data-url=\"aHR0cHM6Ly9waWxsb3cucmVhZHRoZWRvY3Mub3Jn\">https://pillow.readthedocs.org</span></p>\n</blockquote>\n</li>\n</ol>\n<h4 id=\"requests\"><a class=\"anchor\" href=\"#requests\">#</a> requests</h4>\n<p>ç›¸æ¯”äº urllib æ¨¡å—ï¼Œrequests æ¨¡å—åœ¨å¤„ç† URL èµ„æºæ—¶æ›´åŠ æ–¹ä¾¿ã€‚</p>\n<p>å¦‚æœå·²ç»å®‰è£… Anacondaï¼Œé‚£ä¹ˆ requests å¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œå¦‚æœæœªå®‰è£… Anacondaï¼Œåˆ™éœ€è¦æ‰§è¡Œå‘½ä»¤  <code>pip install requests</code>  è¿›è¡Œå®‰è£…ã€‚</p>\n<p>å¸¸ç”¨æ–¹æ³•ç¤ºä¾‹ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> requests</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\"># GET è¯·æ±‚</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>r <span class=\"token operator\">=</span> requests<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">\"http://www.baidu.com/s\"</span><span class=\"token punctuation\">,</span> params<span class=\"token operator\">=</span><span class=\"token punctuation\">&#123;</span><span class=\"token string\">'wd'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'python'</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>r<span class=\"token punctuation\">.</span>url<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># https://www.baidu.com/s?wd=python</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>r<span class=\"token punctuation\">.</span>encoding<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># ISO-8859-1ï¼ˆrequests è‡ªåŠ¨æ£€æµ‹ç¼–ç ï¼‰</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>r<span class=\"token punctuation\">.</span>status_code<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>r<span class=\"token punctuation\">.</span>text<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>r<span class=\"token punctuation\">.</span>content<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># è·å–å“åº”çš„ bytes å†…å®¹</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token comment\"># å¤„ç† json å†…å®¹</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>r2 <span class=\"token operator\">=</span> requests<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">'https://v2.jinrishici.com/one.json'</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># ä»Šæ—¥è¯—è¯ API</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>r2<span class=\"token punctuation\">.</span>json<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token comment\"># è®¾ç½®è¯·æ±‚å¤´</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>r3 <span class=\"token operator\">=</span> requests<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">\"http://www.baidu.com/s\"</span><span class=\"token punctuation\">,</span> params<span class=\"token operator\">=</span><span class=\"token punctuation\">&#123;</span><span class=\"token string\">'wd'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'python'</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> headers<span class=\"token operator\">=</span><span class=\"token punctuation\">&#123;</span><span class=\"token string\">'User-Agent'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit'</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>r3<span class=\"token punctuation\">.</span>text<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token comment\"># POST è¯·æ±‚ï¼ˆé»˜è®¤ä½¿ç”¨ application/x-www-form-urlencoded ç¼–ç ï¼‰</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>r4 <span class=\"token operator\">=</span> requests<span class=\"token punctuation\">.</span>post<span class=\"token punctuation\">(</span><span class=\"token string\">'https://www.test.com/login'</span><span class=\"token punctuation\">,</span> data<span class=\"token operator\">=</span><span class=\"token punctuation\">&#123;</span><span class=\"token string\">'email'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'abc@example.com'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'password'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'123456'</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre></pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token comment\"># POST ä¼ é€’ JSON æ•°æ®</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>params <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span><span class=\"token string\">'email'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'abc@example.com'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'password'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'123456'</span><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>r5 <span class=\"token operator\">=</span> requests<span class=\"token punctuation\">.</span>post<span class=\"token punctuation\">(</span><span class=\"token string\">'https://www.test.com/login'</span><span class=\"token punctuation\">,</span> json<span class=\"token operator\">=</span>params<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre></pre></td></tr><tr><td data-num=\"26\"></td><td><pre><span class=\"token comment\"># POST ä¸Šä¼ æ–‡ä»¶</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>upload_files <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span><span class=\"token string\">'file'</span><span class=\"token punctuation\">:</span> <span class=\"token builtin\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">'A:\\\\xls\\\\test.xls'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'rb'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#125;</span>  <span class=\"token comment\"># æ³¨æ„ä½¿ç”¨ rb è¯»å–ï¼Œä¿è¯æ–‡ä»¶å®Œæ•´</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>r6 <span class=\"token operator\">=</span> requests<span class=\"token punctuation\">.</span>post<span class=\"token punctuation\">(</span><span class=\"token string\">'https://www.test.com/upload'</span><span class=\"token punctuation\">,</span> files<span class=\"token operator\">=</span>upload_files<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>r6<span class=\"token punctuation\">.</span>headers<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># è·å–å“åº”å¤´ä¿¡æ¯</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre></pre></td></tr><tr><td data-num=\"31\"></td><td><pre><span class=\"token comment\"># Cookies ä¼ é€ä¸æ¥æ”¶ã€è¯·æ±‚è¶…æ—¶</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>cs <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span><span class=\"token string\">'token'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'123456'</span><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>r7 <span class=\"token operator\">=</span> requests<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">'https://www.test.com/testCookies'</span><span class=\"token punctuation\">,</span> cookies<span class=\"token operator\">=</span>cs<span class=\"token punctuation\">,</span> timeout<span class=\"token operator\">=</span><span class=\"token number\">2.5</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># 2.5 ç§’åè¶…æ—¶</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>r<span class=\"token punctuation\">.</span>cookies<span class=\"token punctuation\">[</span><span class=\"token string\">'status'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><h4 id=\"chardet\"><a class=\"anchor\" href=\"#chardet\">#</a> chardet</h4>\n<p>chardet ä¸»è¦ç”¨äºæ£€æµ‹ç¼–ç ã€‚</p>\n<p>å¦‚æœå·²ç»å®‰è£… Anacondaï¼Œé‚£ä¹ˆ chardet å¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œå¦‚æœæœªå®‰è£… Anacondaï¼Œåˆ™éœ€è¦æ‰§è¡Œå‘½ä»¤  <code>pip install chardet</code>  è¿›è¡Œå®‰è£…ã€‚</p>\n<p>å¸¸ç”¨æ–¹æ³•ç¤ºä¾‹ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> chardet <span class=\"token keyword\">as</span> chardet</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>ce <span class=\"token operator\">=</span> chardet<span class=\"token punctuation\">.</span>detect<span class=\"token punctuation\">(</span><span class=\"token string\">b'Hello, world!'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>ce<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># &#123;'encoding': 'ascii', 'confidence': 1.0, 'language': ''&#125;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>data <span class=\"token operator\">=</span> <span class=\"token string\">'ä¸€å¸·é£åŠ¨ç™¾è™«ç»ï¼Œè¿æœˆæ¨å±±é›ªè§å½’'</span><span class=\"token punctuation\">.</span>encode<span class=\"token punctuation\">(</span><span class=\"token string\">'gbk'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>chardet<span class=\"token punctuation\">.</span>detect<span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># &#123;'encoding': 'GB2312', 'confidence': 0.99, 'language': 'Chinese'&#125;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>data <span class=\"token operator\">=</span> <span class=\"token string\">'ä¸€å¸·é£åŠ¨ç™¾è™«ç»ï¼Œè¿æœˆæ¨å±±é›ªè§å½’'</span><span class=\"token punctuation\">.</span>encode<span class=\"token punctuation\">(</span><span class=\"token string\">'utf-8'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>chardet<span class=\"token punctuation\">.</span>detect<span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># &#123;'encoding': 'utf-8', 'confidence': 0.99, 'language': ''&#125;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>data <span class=\"token operator\">=</span> <span class=\"token string\">'ãƒãƒ³ãƒ¢ã‚¯ã®ãƒ–ãƒ­ã‚°'</span><span class=\"token punctuation\">.</span>encode<span class=\"token punctuation\">(</span><span class=\"token string\">'euc-jp'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>chardet<span class=\"token punctuation\">.</span>detect<span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># &#123;'encoding': 'EUC-JP', 'confidence': 0.99, 'language': 'Japanese'&#125;</span></pre></td></tr></table></figure><p>é€šè¿‡ç¼–ç æ£€æµ‹åï¼Œå†è¿›è¡Œå†…å®¹è§£ç ï¼Œèƒ½å¤Ÿæœ‰æ•ˆé¿å…å¾ˆå¤šè½¬ç å¼‚å¸¸ã€‚</p>\n<h4 id=\"psutil\"><a class=\"anchor\" href=\"#psutil\">#</a> psutil</h4>\n<p>psutil: process and system utilitiesï¼Œå¯ä»¥ç”¨äºè·å–ç³»ç»Ÿä¿¡æ¯ï¼Œå¹¶ä¸”æ”¯æŒè·¨å¹³å°ä½¿ç”¨ã€‚</p>\n<p>å¦‚æœå·²ç»å®‰è£… Anacondaï¼Œé‚£ä¹ˆ psutil å¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œå¦‚æœæœªå®‰è£… Anacondaï¼Œåˆ™éœ€è¦æ‰§è¡Œå‘½ä»¤  <code>pip install psutil</code>  è¿›è¡Œå®‰è£…ã€‚</p>\n<p>å¸¸ç”¨æ–¹æ³•ç¤ºä¾‹ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> psutil</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\"># è·å– CPU é€»è¾‘æ•°é‡</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>psutil<span class=\"token punctuation\">.</span>cpu_count<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># 8</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\"># è·å– CPU ç‰©ç†æ ¸å¿ƒ</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>psutil<span class=\"token punctuation\">.</span>cpu_count<span class=\"token punctuation\">(</span>logical<span class=\"token operator\">=</span><span class=\"token boolean\">False</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># 8</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token comment\"># ç»Ÿè®¡ CPU çš„ç”¨æˆ·ï¼ç³»ç»Ÿï¼ç©ºé—²æ—¶é—´</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>psutil<span class=\"token punctuation\">.</span>cpu_times<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\">#</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\"># å®ç°ç±»ä¼¼ top å‘½ä»¤çš„ CPU ä½¿ç”¨ç‡ï¼Œæ¯ç§’åˆ·æ–°ä¸€æ¬¡</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token keyword\">for</span> x <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>psutil<span class=\"token punctuation\">.</span>cpu_percent<span class=\"token punctuation\">(</span>interval<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> percpu<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token comment\"># è·å–ç‰©ç†å†…å­˜ä¿¡æ¯</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>psutil<span class=\"token punctuation\">.</span>virtual_memory<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token comment\"># svmem(total=25701597184, available=17957904384, percent=30.1, used=7743692800, free=17957904384)</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token comment\"># è·å–äº¤æ¢å†…å­˜ä¿¡æ¯</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>psutil<span class=\"token punctuation\">.</span>swap_memory<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token comment\"># sswap(total=29459693568, used=12058066944, free=17401626624, percent=40.9, sin=0, sout=0)</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token comment\"># è·å–ç£ç›˜ä¿¡æ¯</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>psutil<span class=\"token punctuation\">.</span>disk_partitions<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># ç£ç›˜åˆ†åŒºä¿¡æ¯</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>psutil<span class=\"token punctuation\">.</span>disk_usage<span class=\"token punctuation\">(</span><span class=\"token string\">'/'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># ç£ç›˜ä½¿ç”¨æƒ…å†µ</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>psutil<span class=\"token punctuation\">.</span>disk_io_counters<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># ç£ç›˜ IO</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token comment\"># è·å–ç½‘ç»œä¿¡æ¯</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>psutil<span class=\"token punctuation\">.</span>net_io_counters<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># è·å–ç½‘ç»œè¯»å†™å­—èŠ‚ï¼åŒ…çš„ä¸ªæ•°</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>psutil<span class=\"token punctuation\">.</span>net_if_addrs<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># è·å–ç½‘ç»œæ¥å£ä¿¡æ¯</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>psutil<span class=\"token punctuation\">.</span>net_if_stats<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># è·å–ç½‘ç»œæ¥å£çŠ¶æ€</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>psutil<span class=\"token punctuation\">.</span>net_connections<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># è·å–å½“å‰ç½‘ç»œè¿æ¥ä¿¡æ¯</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre><span class=\"token comment\"># è·å–è¿›ç¨‹ä¿¡æ¯</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>psutil<span class=\"token punctuation\">.</span>pids<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># è·å–æ‰€æœ‰è¿›ç¨‹</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>p <span class=\"token operator\">=</span> psutil<span class=\"token punctuation\">.</span>Process<span class=\"token punctuation\">(</span><span class=\"token number\">1300</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># è·å–æŒ‡å®šè¿›ç¨‹</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>p<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># è¿›ç¨‹åç§°</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>p<span class=\"token punctuation\">.</span>cwd<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># è¿›ç¨‹å·¥ä½œç›®å½•</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>p<span class=\"token punctuation\">.</span>cmdline<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># è¿›ç¨‹å¯åŠ¨çš„å‘½ä»¤è¡Œ</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>p<span class=\"token punctuation\">.</span>ppid<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># çˆ¶è¿›ç¨‹ ID</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>p<span class=\"token punctuation\">.</span>parent<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># çˆ¶è¿›ç¨‹</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>p<span class=\"token punctuation\">.</span>children<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># å­è¿›ç¨‹åˆ—è¡¨</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>p<span class=\"token punctuation\">.</span>status<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># è¿›ç¨‹çŠ¶æ€</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>p<span class=\"token punctuation\">.</span>create_time<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># è¿›ç¨‹åˆ›å»ºæ—¶é—´</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>p<span class=\"token punctuation\">.</span>cpu_times<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># è¿›ç¨‹ä½¿ç”¨çš„ CPU æ—¶é—´</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>p<span class=\"token punctuation\">.</span>memory_info<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># è¿›ç¨‹ä½¿ç”¨çš„å†…å­˜</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>p<span class=\"token punctuation\">.</span>connections<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># è¿›ç¨‹ç›¸å…³çš„ç½‘ç»œè¿æ¥</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>p<span class=\"token punctuation\">.</span>num_threads<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># è¿›ç¨‹çš„çº¿ç¨‹æ•°é‡</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>p<span class=\"token punctuation\">.</span>threads<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># è¿›ç¨‹çš„æ‰€æœ‰çº¿ç¨‹</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>p<span class=\"token punctuation\">.</span>environ<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># è¿›ç¨‹ç¯å¢ƒå˜é‡</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>p<span class=\"token punctuation\">.</span>terminate<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># ç»“æŸè¿›ç¨‹</span></pre></td></tr></table></figure><blockquote>\n<p>å¦‚åœ¨å®é™…é¡¹ç›®ä¸­éœ€è¦æŸ¥è¯¢ç›¸å…³åŠŸèƒ½ï¼Œå‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼š<span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL2dpYW1wYW9sby9wc3V0aWw=\">https://github.com/giampaolo/psutil</span></p>\n</blockquote>\n<h3 id=\"virtualenv\"><a class=\"anchor\" href=\"#virtualenv\">#</a> virtualenv</h3>\n<p>å¦‚æœåœ¨åŒä¸€å°ä¸»æœºä¸Šï¼Œéœ€è¦ä½¿ç”¨åˆ°å¤šä¸ªä¸åŒçš„ Python è¿è¡Œç¯å¢ƒï¼Œè¿™æ—¶å°±éœ€è¦ä½¿ç”¨  <code>virtualenv</code>  å¯¹ Python ç¯å¢ƒè¿›è¡Œéš”ç¦»ã€‚</p>\n<p>å®‰è£… virtualenvï¼š</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>$ pip3 <span class=\"token function\">install</span> virtualenv</pre></td></tr></table></figure><h3 id=\"å›¾å½¢ç•Œé¢\"><a class=\"anchor\" href=\"#å›¾å½¢ç•Œé¢\">#</a> å›¾å½¢ç•Œé¢</h3>\n<p>Python æ”¯æŒå¤šç§å›¾å½¢ç•Œé¢çš„ç¬¬ä¸‰æ–¹åº“ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºï¼š</p>\n<ul>\n<li>Tk</li>\n<li>wxWidgets</li>\n<li>Qt</li>\n<li>GTK</li>\n</ul>\n<p>æ­¤å¤–ï¼ŒPython ä¹Ÿè‡ªå¸¦æœ‰æ”¯æŒ Tk çš„  <code>Tkinter</code> ï¼Œæ— éœ€å®‰è£…ä»»ä½•åŒ…ï¼Œå°±å¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚</p>\n<blockquote>\n<p>Tk æ˜¯ä¸€ä¸ªå›¾å½¢åº“ï¼Œæ”¯æŒå¤šä¸ªæ“ä½œç³»ç»Ÿï¼Œä½¿ç”¨ Tcl è¯­è¨€å¼€å‘ï¼Œå®ƒä¼šè°ƒç”¨æ“ä½œç³»ç»Ÿæä¾›çš„æœ¬åœ° GUI æ¥å£ï¼Œå®Œæˆæœ€ç»ˆçš„ GUIã€‚è€Œ Tkinter åˆ™å¯¹è®¿é—® Tk çš„æ¥å£è¿›è¡Œäº†å°è£…ã€‚</p>\n</blockquote>\n<p><img data-src=\"https://img.xfc-exclave.com/2021/09/9781b3431d0c919dc04554e2670049781632925720.png\" alt=\"Pythonå›¾å½¢ç•Œé¢\" /></p>\n<h4 id=\"æµ·é¾Ÿç»˜å›¾\"><a class=\"anchor\" href=\"#æµ·é¾Ÿç»˜å›¾\">#</a> æµ·é¾Ÿç»˜å›¾</h4>\n<p>ç»˜åˆ¶é•¿æ–¹å½¢ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># å¯¼å…¥ turtle åŒ…çš„æ‰€æœ‰å†…å®¹:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">from</span> turtle <span class=\"token keyword\">import</span> <span class=\"token operator\">*</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\"># è®¾ç½®ç¬”åˆ·å®½åº¦:</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>width<span class=\"token punctuation\">(</span><span class=\"token number\">4</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token comment\"># å‰è¿›:</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>forward<span class=\"token punctuation\">(</span><span class=\"token number\">200</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\"># å³è½¬ 90 åº¦:</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>right<span class=\"token punctuation\">(</span><span class=\"token number\">90</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token comment\"># ç¬”åˆ·é¢œè‰²:</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>pencolor<span class=\"token punctuation\">(</span><span class=\"token string\">'red'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>forward<span class=\"token punctuation\">(</span><span class=\"token number\">100</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>right<span class=\"token punctuation\">(</span><span class=\"token number\">90</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>pencolor<span class=\"token punctuation\">(</span><span class=\"token string\">'green'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>forward<span class=\"token punctuation\">(</span><span class=\"token number\">200</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>right<span class=\"token punctuation\">(</span><span class=\"token number\">90</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>pencolor<span class=\"token punctuation\">(</span><span class=\"token string\">'blue'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>forward<span class=\"token punctuation\">(</span><span class=\"token number\">100</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>right<span class=\"token punctuation\">(</span><span class=\"token number\">90</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre></pre></td></tr><tr><td data-num=\"25\"></td><td><pre><span class=\"token comment\"># è°ƒç”¨ done () ä½¿å¾—çª—å£ç­‰å¾…è¢«å…³é—­ï¼Œå¦åˆ™å°†ç«‹åˆ»å…³é—­çª—å£</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>done<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>ç»“åˆ Python çš„é€»è¾‘åˆ¤æ–­ï¼Œå¯ä»¥ç»˜åˆ¶å¤æ‚çš„å›¾åƒï¼Œä¾‹å¦‚äº”ä¸ªäº”è§’æ˜Ÿï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">from</span> turtle <span class=\"token keyword\">import</span> <span class=\"token operator\">*</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">drawStar</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    pu<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    goto<span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    pd<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token comment\"># set heading: 0</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    seth<span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        fd<span class=\"token punctuation\">(</span><span class=\"token number\">40</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        rt<span class=\"token punctuation\">(</span><span class=\"token number\">144</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token keyword\">for</span> x <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">250</span><span class=\"token punctuation\">,</span> <span class=\"token number\">50</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    drawStar<span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>done<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>ä½¿ç”¨é€’å½’è¿˜å¯ä»¥ç»˜åˆ¶å¤æ‚çš„å›¾å½¢ï¼Œä¾‹å¦‚ç»˜åˆ¶ä¸€æ£µæ ‘ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">from</span> turtle <span class=\"token keyword\">import</span> <span class=\"token operator\">*</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\"># è®¾ç½®è‰²å½©æ¨¡å¼æ˜¯ RGB:</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>colormode<span class=\"token punctuation\">(</span><span class=\"token number\">255</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>lt<span class=\"token punctuation\">(</span><span class=\"token number\">90</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>lv <span class=\"token operator\">=</span> <span class=\"token number\">14</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>l <span class=\"token operator\">=</span> <span class=\"token number\">120</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>s <span class=\"token operator\">=</span> <span class=\"token number\">45</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>width<span class=\"token punctuation\">(</span>lv<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token comment\"># åˆå§‹åŒ– RGB é¢œè‰²:</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>r <span class=\"token operator\">=</span> <span class=\"token number\">0</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>g <span class=\"token operator\">=</span> <span class=\"token number\">0</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>b <span class=\"token operator\">=</span> <span class=\"token number\">0</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>pencolor<span class=\"token punctuation\">(</span>r<span class=\"token punctuation\">,</span> g<span class=\"token punctuation\">,</span> b<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>penup<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>bk<span class=\"token punctuation\">(</span>l<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>pendown<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>fd<span class=\"token punctuation\">(</span>l<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre></pre></td></tr><tr><td data-num=\"25\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">draw_tree</span><span class=\"token punctuation\">(</span>l<span class=\"token punctuation\">,</span> level<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>    <span class=\"token keyword\">global</span> r<span class=\"token punctuation\">,</span> g<span class=\"token punctuation\">,</span> b</pre></td></tr><tr><td data-num=\"27\"></td><td><pre>    <span class=\"token comment\"># save the current pen width</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>    w <span class=\"token operator\">=</span> width<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>    <span class=\"token comment\"># narrow the pen width</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>    width<span class=\"token punctuation\">(</span>w <span class=\"token operator\">*</span> <span class=\"token number\">3.0</span> <span class=\"token operator\">/</span> <span class=\"token number\">4.0</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>    <span class=\"token comment\"># set color:</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>    r <span class=\"token operator\">=</span> r <span class=\"token operator\">+</span> <span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>    g <span class=\"token operator\">=</span> g <span class=\"token operator\">+</span> <span class=\"token number\">2</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>    b <span class=\"token operator\">=</span> b <span class=\"token operator\">+</span> <span class=\"token number\">3</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>    pencolor<span class=\"token punctuation\">(</span>r <span class=\"token operator\">%</span> <span class=\"token number\">200</span><span class=\"token punctuation\">,</span> g <span class=\"token operator\">%</span> <span class=\"token number\">200</span><span class=\"token punctuation\">,</span> b <span class=\"token operator\">%</span> <span class=\"token number\">200</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>    l <span class=\"token operator\">=</span> <span class=\"token number\">3.0</span> <span class=\"token operator\">/</span> <span class=\"token number\">4.0</span> <span class=\"token operator\">*</span> l</pre></td></tr><tr><td data-num=\"39\"></td><td><pre></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>    lt<span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>    fd<span class=\"token punctuation\">(</span>l<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>    <span class=\"token keyword\">if</span> level <span class=\"token operator\">&lt;</span> lv<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>        draw_tree<span class=\"token punctuation\">(</span>l<span class=\"token punctuation\">,</span> level <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre>    bk<span class=\"token punctuation\">(</span>l<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre>    rt<span class=\"token punctuation\">(</span><span class=\"token number\">2</span> <span class=\"token operator\">*</span> s<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre>    fd<span class=\"token punctuation\">(</span>l<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre></pre></td></tr><tr><td data-num=\"49\"></td><td><pre>    <span class=\"token keyword\">if</span> level <span class=\"token operator\">&lt;</span> lv<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre>        draw_tree<span class=\"token punctuation\">(</span>l<span class=\"token punctuation\">,</span> level <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"51\"></td><td><pre>    bk<span class=\"token punctuation\">(</span>l<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"52\"></td><td><pre>    lt<span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"53\"></td><td><pre></pre></td></tr><tr><td data-num=\"54\"></td><td><pre>    <span class=\"token comment\"># restore the previous pen width</span></pre></td></tr><tr><td data-num=\"55\"></td><td><pre>    width<span class=\"token punctuation\">(</span>w<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"56\"></td><td><pre></pre></td></tr><tr><td data-num=\"57\"></td><td><pre>speed<span class=\"token punctuation\">(</span><span class=\"token string\">\"fastest\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"58\"></td><td><pre></pre></td></tr><tr><td data-num=\"59\"></td><td><pre>draw_tree<span class=\"token punctuation\">(</span>l<span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"60\"></td><td><pre></pre></td></tr><tr><td data-num=\"61\"></td><td><pre>done<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>è¿è¡Œæœ€ç»ˆæ˜¾ç¤ºæ•ˆæœï¼š</p>\n<p><img data-src=\"https://img.xfc-exclave.com/2021/09/cc970c3e845202acb2f87328a1068eaa1632750998.png\" alt=\"Pythonæµ·é¾Ÿç»˜å›¾-æ ‘\" /></p>\n<h3 id=\"ç½‘ç»œç¼–ç¨‹\"><a class=\"anchor\" href=\"#ç½‘ç»œç¼–ç¨‹\">#</a> ç½‘ç»œç¼–ç¨‹</h3>\n<h4 id=\"tcpip-ç®€ä»‹\"><a class=\"anchor\" href=\"#tcpip-ç®€ä»‹\">#</a> TCP/IP ç®€ä»‹</h4>\n<p>ç•¥ã€‚</p>\n<h4 id=\"tcpç¼–ç¨‹\"><a class=\"anchor\" href=\"#tcpç¼–ç¨‹\">#</a> TCP ç¼–ç¨‹</h4>\n<p>Socket æ˜¯ç½‘ç»œç¼–ç¨‹çš„ä¸€ä¸ªæŠ½è±¡æ¦‚å¿µã€‚é€šå¸¸æˆ‘ä»¬ç”¨ä¸€ä¸ª Socket è¡¨ç¤ºæ‰“å¼€äº†ä¸€ä¸ªç½‘ç»œé“¾æ¥ï¼Œè€Œæ‰“å¼€ä¸€ä¸ª Socket åˆ™éœ€è¦çŸ¥é“ç›®æ ‡è®¡ç®—æœºçš„ IPã€ç«¯å£å’Œåè®®ç±»å‹ã€‚</p>\n<p>åˆ›å»ºä¸€ä¸ªåŸºäº TCP çš„ Socket å®¢æˆ·ç«¯è¿æ¥ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># å¯¼å…¥ socket åº“:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> socket</pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\"># åˆ›å»ºä¸€ä¸ª socket:</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>s <span class=\"token operator\">=</span> socket<span class=\"token punctuation\">.</span>socket<span class=\"token punctuation\">(</span>socket<span class=\"token punctuation\">.</span>AF_INET<span class=\"token punctuation\">,</span> socket<span class=\"token punctuation\">.</span>SOCK_STREAM<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># AF_INET æŒ‡ IPv4 åè®®ï¼ŒAF_INET6 æŒ‡ IPv6 åè®®ã€‚SOCK_STREAM æŒ‡å®šä½¿ç”¨é¢å‘æµçš„ TCP åè®®</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token comment\"># å»ºç«‹è¿æ¥:</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>s<span class=\"token punctuation\">.</span>connect<span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token string\">'www.test.com'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">80</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># å‚æ•°ä¸º tuple ç±»å‹</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token comment\"># å‘é€æ•°æ®:</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>s<span class=\"token punctuation\">.</span>send<span class=\"token punctuation\">(</span><span class=\"token string\">b'GET / HTTP/1.1\\r\\nHost: www.test.com\\r\\nConnection: close\\r\\n\\r\\n'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token comment\"># æ¥æ”¶æ•°æ®:</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token builtin\">buffer</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token keyword\">while</span> <span class=\"token boolean\">True</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token comment\"># æ¯æ¬¡æœ€å¤šæ¥æ”¶ 1k å­—èŠ‚:</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    d <span class=\"token operator\">=</span> s<span class=\"token punctuation\">.</span>recv<span class=\"token punctuation\">(</span><span class=\"token number\">1024</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token keyword\">if</span> d<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        <span class=\"token builtin\">buffer</span><span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span>d<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        <span class=\"token keyword\">break</span>  <span class=\"token comment\"># å½“æ¥æ”¶åˆ°ç©ºï¼Œé€€å‡ºæ¥æ”¶</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>data <span class=\"token operator\">=</span> <span class=\"token string\">b''</span><span class=\"token punctuation\">.</span>join<span class=\"token punctuation\">(</span><span class=\"token builtin\">buffer</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token comment\"># å…³é—­è¿æ¥:</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>s<span class=\"token punctuation\">.</span>close<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token comment\"># è‡ªå®šä¹‰å¤„ç†æ•°æ®</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>header<span class=\"token punctuation\">,</span> html <span class=\"token operator\">=</span> data<span class=\"token punctuation\">.</span>split<span class=\"token punctuation\">(</span><span class=\"token string\">b'\\r\\n\\r\\n'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>header<span class=\"token punctuation\">.</span>decode<span class=\"token punctuation\">(</span><span class=\"token string\">'utf-8'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre><span class=\"token comment\"># æŠŠæ¥æ”¶çš„æ•°æ®å†™å…¥æ–‡ä»¶:</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre><span class=\"token keyword\">with</span> <span class=\"token builtin\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">'index.html'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'wb'</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> f<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>    f<span class=\"token punctuation\">.</span>write<span class=\"token punctuation\">(</span>html<span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>æœåŠ¡å™¨ç«¯é€šå¸¸ä¼šæ‰“å¼€ä¸€ä¸ªå›ºå®šçš„ç«¯å£ï¼Œç”¨äºç›‘å¬æ‰€æœ‰çš„å®¢æˆ·ç«¯è¿æ¥ã€‚å¯¹äºå¤§é‡çš„å®¢æˆ·ç«¯è¿æ¥ï¼Œéœ€è¦å¯¹è¿æ¥çš„ Socket è¿›è¡Œè¯†åˆ«ï¼Œä¸€ä¸ª Socket ä¾èµ– 4 é¡¹ï¼šæœåŠ¡å™¨åœ°å€ã€æœåŠ¡å™¨ç«¯å£ã€å®¢æˆ·ç«¯åœ°å€ã€å®¢æˆ·ç«¯ç«¯å£æ¥å”¯ä¸€ç¡®å®šä¸€ä¸ª Socketã€‚æ­¤å¤–ï¼ŒæœåŠ¡å™¨ç«¯éœ€è¦å…·å¤‡åŒæ—¶ç›¸åº”å¤šä¸ªå®¢æˆ·ç«¯çš„èƒ½åŠ›ï¼Œæ‰€ä»¥ï¼Œæ¯ä¸ªè¿æ¥éƒ½éœ€è¦ä¸€ä¸ªæ–°çš„è¿›ç¨‹æˆ–è€…æ–°çš„çº¿ç¨‹æ¥å¤„ç†ã€‚</p>\n<p>åˆ›å»ºæœåŠ¡ç«¯ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> socket</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> threading</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">from</span> datetime <span class=\"token keyword\">import</span> time</pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>s <span class=\"token operator\">=</span> socket<span class=\"token punctuation\">.</span>socket<span class=\"token punctuation\">(</span>socket<span class=\"token punctuation\">.</span>AF_INET<span class=\"token punctuation\">,</span> socket<span class=\"token punctuation\">.</span>SOCK_STREAM<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token comment\"># ç›‘å¬ç«¯å£:</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>s<span class=\"token punctuation\">.</span>bind<span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token string\">'127.0.0.1'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">9999</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token comment\"># ç›‘å¬ç«¯å£å¹¶æŒ‡å®šç­‰å¾…è¿æ¥çš„æœ€å¤§æ•°é‡</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>s<span class=\"token punctuation\">.</span>listen<span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Waiting for connection...'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">tcplink</span><span class=\"token punctuation\">(</span>sock<span class=\"token punctuation\">,</span> addr<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Accept new connection from %s:%s...'</span> <span class=\"token operator\">%</span> addr<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    sock<span class=\"token punctuation\">.</span>send<span class=\"token punctuation\">(</span><span class=\"token string\">b'Welcome!'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token comment\"># æŒç»­ç›‘å¬å®¢æˆ·ç«¯æ¶ˆæ¯</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token keyword\">while</span> <span class=\"token boolean\">True</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        data <span class=\"token operator\">=</span> sock<span class=\"token punctuation\">.</span>recv<span class=\"token punctuation\">(</span><span class=\"token number\">1024</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        time<span class=\"token punctuation\">.</span>sleep<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        <span class=\"token comment\"># å½“å®¢æˆ·ç«¯å‘é€äº† exit æ—¶ï¼Œæ–­å¼€è¿æ¥</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>        <span class=\"token keyword\">if</span> <span class=\"token keyword\">not</span> data <span class=\"token keyword\">or</span> data<span class=\"token punctuation\">.</span>decode<span class=\"token punctuation\">(</span><span class=\"token string\">'utf-8'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token string\">'exit'</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>            <span class=\"token keyword\">break</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>        sock<span class=\"token punctuation\">.</span>send<span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Hello, %s!'</span> <span class=\"token operator\">%</span> data<span class=\"token punctuation\">.</span>decode<span class=\"token punctuation\">(</span><span class=\"token string\">'utf-8'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>encode<span class=\"token punctuation\">(</span><span class=\"token string\">'utf-8'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    sock<span class=\"token punctuation\">.</span>close<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Connection from %s:%s closed.'</span> <span class=\"token operator\">%</span> addr<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre></pre></td></tr><tr><td data-num=\"26\"></td><td><pre><span class=\"token keyword\">while</span> <span class=\"token boolean\">True</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>    <span class=\"token comment\"># æ¥æ”¶ä¸€ä¸ªæ–°è¿æ¥:</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>    sock<span class=\"token punctuation\">,</span> addr <span class=\"token operator\">=</span> s<span class=\"token punctuation\">.</span>accept<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>    <span class=\"token comment\"># åˆ›å»ºæ–°çº¿ç¨‹æ¥å¤„ç† TCP è¿æ¥:</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>    <span class=\"token comment\"># æ¯ä¸ªè¿æ¥éƒ½å¿…é¡»åˆ›å»ºæ–°çº¿ç¨‹ï¼ˆæˆ–è¿›ç¨‹ï¼‰æ¥å¤„ç†ï¼Œå¦åˆ™ï¼Œå•çº¿ç¨‹åœ¨å¤„ç†è¿æ¥çš„è¿‡ç¨‹ä¸­ï¼Œæ— æ³•æ¥å—å…¶ä»–å®¢æˆ·ç«¯çš„è¿æ¥</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>    t <span class=\"token operator\">=</span> threading<span class=\"token punctuation\">.</span>Thread<span class=\"token punctuation\">(</span>target<span class=\"token operator\">=</span>tcplink<span class=\"token punctuation\">,</span> args<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span>sock<span class=\"token punctuation\">,</span> addr<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>    t<span class=\"token punctuation\">.</span>start<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>å¯ä»¥åˆ›å»ºå®¢æˆ·ç«¯æ¥å¯¹å’Œä¸Šé¢çš„æœåŠ¡ç«¯è¿›è¡Œé€šä¿¡ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>s <span class=\"token operator\">=</span> socket<span class=\"token punctuation\">.</span>socket<span class=\"token punctuation\">(</span>socket<span class=\"token punctuation\">.</span>AF_INET<span class=\"token punctuation\">,</span> socket<span class=\"token punctuation\">.</span>SOCK_STREAM<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\"># å»ºç«‹è¿æ¥:</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>s<span class=\"token punctuation\">.</span>connect<span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token string\">'127.0.0.1'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">9999</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\"># æ¥æ”¶æ¬¢è¿æ¶ˆæ¯:</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">.</span>recv<span class=\"token punctuation\">(</span><span class=\"token number\">1024</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>decode<span class=\"token punctuation\">(</span><span class=\"token string\">'utf-8'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">for</span> data <span class=\"token keyword\">in</span> <span class=\"token punctuation\">[</span><span class=\"token string\">b'Li Bai'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">b'Du Fu'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">b'Ou Yangxiu'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token comment\"># å‘é€æ•°æ®:</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    s<span class=\"token punctuation\">.</span>send<span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">.</span>recv<span class=\"token punctuation\">(</span><span class=\"token number\">1024</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>decode<span class=\"token punctuation\">(</span><span class=\"token string\">'utf-8'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>s<span class=\"token punctuation\">.</span>send<span class=\"token punctuation\">(</span><span class=\"token string\">b'exit'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>s<span class=\"token punctuation\">.</span>close<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><blockquote>\n<p>æ³¨æ„ï¼šåŒä¸€å°ä¸»æœºï¼ŒåŒä¸€ä¸ªç«¯å£ï¼ŒåŒä¸€æ—¶é—´åªèƒ½è¢«ä¸€ä¸ª Socket ç»‘å®šã€‚</p>\n</blockquote>\n<h4 id=\"udpç¼–ç¨‹\"><a class=\"anchor\" href=\"#udpç¼–ç¨‹\">#</a> UDP ç¼–ç¨‹</h4>\n<p>TCP æ˜¯å»ºç«‹å¯é è¿æ¥ï¼Œå¹¶ä¸”é€šä¿¡åŒæ–¹éƒ½å¯ä»¥ä»¥æµçš„å½¢å¼å‘é€æ•°æ®ã€‚ç›¸å¯¹ TCPï¼ŒUDP åˆ™æ˜¯é¢å‘æ— è¿æ¥çš„åè®®ã€‚</p>\n<p>ä½¿ç”¨ UDP åè®®æ—¶ï¼Œä¸éœ€è¦å»ºç«‹è¿æ¥ï¼Œåªéœ€è¦çŸ¥é“å¯¹æ–¹çš„ IP å’Œç«¯å£ï¼Œå°±å¯ä»¥ç›´æ¥å‘æ•°æ®åŒ…ï¼Œä½†å®ƒä¸èƒ½ä¿è¯æ¥æ”¶æ–¹ä¸€å®šæ”¶åˆ°ã€‚</p>\n<p>è™½ç„¶ç”¨ UDP ä¼ è¾“æ•°æ®ä¸å¯é ï¼Œä½†å®ƒçš„ä¼˜ç‚¹æ˜¯å’Œ TCP æ¯”ï¼Œé€Ÿåº¦å¿«ï¼Œå¯¹äºä¸è¦æ±‚å¯é åˆ°è¾¾çš„æ•°æ®ï¼Œå°±å¯ä»¥ä½¿ç”¨ UDP åè®®ã€‚</p>\n<p>UDP æœåŠ¡ç«¯ç¤ºä¾‹ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> socket</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>s <span class=\"token operator\">=</span> socket<span class=\"token punctuation\">.</span>socket<span class=\"token punctuation\">(</span>socket<span class=\"token punctuation\">.</span>AF_INET<span class=\"token punctuation\">,</span> socket<span class=\"token punctuation\">.</span>SOCK_DGRAM<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># SOCK_DGRAM æŒ‡å®šäº†è¿™ä¸ª Socket çš„ç±»å‹æ˜¯ UDP</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\"># ç»‘å®šç«¯å£:</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>s<span class=\"token punctuation\">.</span>bind<span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token string\">'127.0.0.1'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">9999</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Bind UDP on 9999...'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">while</span> <span class=\"token boolean\">True</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token comment\"># æ¥æ”¶æ•°æ®:</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    data<span class=\"token punctuation\">,</span> addr <span class=\"token operator\">=</span> s<span class=\"token punctuation\">.</span>recvfrom<span class=\"token punctuation\">(</span><span class=\"token number\">1024</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># è¿”å›æ•°æ®å’Œå®¢æˆ·ç«¯çš„åœ°å€ä¸ç«¯å£</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Received from %s:%s.'</span> <span class=\"token operator\">%</span> addr<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    s<span class=\"token punctuation\">.</span>sendto<span class=\"token punctuation\">(</span><span class=\"token string\">b'Hello, %s!'</span> <span class=\"token operator\">%</span> data<span class=\"token punctuation\">,</span> addr<span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>UDP å®¢æˆ·ç«¯ç¤ºä¾‹ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> socket</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>s <span class=\"token operator\">=</span> socket<span class=\"token punctuation\">.</span>socket<span class=\"token punctuation\">(</span>socket<span class=\"token punctuation\">.</span>AF_INET<span class=\"token punctuation\">,</span> socket<span class=\"token punctuation\">.</span>SOCK_DGRAM<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">for</span> data <span class=\"token keyword\">in</span> <span class=\"token punctuation\">[</span><span class=\"token string\">b'Michael'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">b'Tracy'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">b'Sarah'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token comment\"># å‘é€æ•°æ®:</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    s<span class=\"token punctuation\">.</span>sendto<span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token string\">'127.0.0.1'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">9999</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token comment\"># æ¥æ”¶æ•°æ®:</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">.</span>recv<span class=\"token punctuation\">(</span><span class=\"token number\">1024</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>decode<span class=\"token punctuation\">(</span><span class=\"token string\">'utf-8'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>s<span class=\"token punctuation\">.</span>close<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>åœ¨ä½¿ç”¨ UDP è¿›è¡Œé€šä¿¡æ—¶ï¼ŒæœåŠ¡ç«¯å¹¶ä¸éœ€è¦è°ƒç”¨ listen æ–¹æ³•è¿›è¡Œç›‘å¬ï¼Œè€Œæ˜¯ç›´æ¥æ¥æ”¶æ¥è‡ªå®¢æˆ·ç«¯çš„æ•°æ®ï¼Œå®¢æˆ·ç«¯ä¹Ÿä¸éœ€è¦è°ƒç”¨ connect æ¥å»ºç«‹è¿æ¥ï¼Œç›´æ¥é€šè¿‡ sendto æ–¹æ³•å‘é€æ•°æ®å³å¯ã€‚</p>\n<p>UDP ä¸ TCP æœ€å¤§çš„åŒºåˆ«åœ¨äºæ˜¯å¦å»ºç«‹è¿æ¥ï¼Œä¹Ÿç”±æ­¤æ¨å¯¼å‡º UDP å…·æœ‰ä¼ è¾“æ•°æ®ä¸å¯é çš„ç‰¹ç‚¹ã€‚æ­¤å¤–ï¼ŒUDP å’Œ TCP çš„ç«¯å£æ˜¯äº’ä¸å†²çªçš„ï¼Œå³å®ƒä»¬å¯ä»¥åŒæ—¶ä½¿ç”¨åŒä¸€ä¸ªç«¯å£ã€‚</p>\n<h3 id=\"ç”µå­é‚®ä»¶\"><a class=\"anchor\" href=\"#ç”µå­é‚®ä»¶\">#</a> ç”µå­é‚®ä»¶</h3>\n<h4 id=\"smtp-å‘é€é‚®ä»¶\"><a class=\"anchor\" href=\"#smtp-å‘é€é‚®ä»¶\">#</a> SMTP å‘é€é‚®ä»¶</h4>\n<p>SMTP æ˜¯å‘é€é‚®ä»¶çš„åè®®ï¼Œå¯ä»¥ä½¿ç”¨å®ƒæ¥å‘é€çº¯æ–‡æœ¬é‚®ä»¶ã€HTML é‚®ä»¶ä»¥åŠå¸¦é™„ä»¶çš„é‚®ä»¶ã€‚Python å¯¹ SMTP æ”¯æŒæœ‰  <code>smtplib</code>  å’Œ  <code>email</code>  ä¸¤ä¸ªæ¨¡å—ï¼Œemail è´Ÿè´£æ„é€ é‚®ä»¶ï¼Œsmtplib è´Ÿè´£å‘é€é‚®ä»¶ã€‚</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">from</span> email <span class=\"token keyword\">import</span> encoders</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">from</span> email<span class=\"token punctuation\">.</span>header <span class=\"token keyword\">import</span> Header</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">from</span> email<span class=\"token punctuation\">.</span>mime<span class=\"token punctuation\">.</span>text <span class=\"token keyword\">import</span> MIMEText</pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">from</span> email<span class=\"token punctuation\">.</span>utils <span class=\"token keyword\">import</span> parseaddr<span class=\"token punctuation\">,</span> formataddr</pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">import</span> smtplib</pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">_format_addr</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    name<span class=\"token punctuation\">,</span> addr <span class=\"token operator\">=</span> parseaddr<span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token keyword\">return</span> formataddr<span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>Header<span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">,</span> <span class=\"token string\">'utf-8'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>encode<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> addr<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token comment\"># è¾“å…¥ Email åœ°å€å’Œå£ä»¤:</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>from_addr <span class=\"token operator\">=</span> <span class=\"token builtin\">input</span><span class=\"token punctuation\">(</span><span class=\"token string\">'From: '</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>password <span class=\"token operator\">=</span> <span class=\"token builtin\">input</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Password: '</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token comment\"># è¾“å…¥æ”¶ä»¶äººåœ°å€:</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>to_addr <span class=\"token operator\">=</span> <span class=\"token builtin\">input</span><span class=\"token punctuation\">(</span><span class=\"token string\">'To: '</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token comment\"># è¾“å…¥ SMTP æœåŠ¡å™¨åœ°å€:</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>smtp_server <span class=\"token operator\">=</span> <span class=\"token builtin\">input</span><span class=\"token punctuation\">(</span><span class=\"token string\">'SMTP server: '</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>msg <span class=\"token operator\">=</span> MIMEText<span class=\"token punctuation\">(</span><span class=\"token string\">'å›è«ç¬‘ï¼Œæˆ‘ä»¬è“æºªé˜ä¸æ˜¯ä½ çš„ä¿å§†ï¼ï¼ï¼'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'plain'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'utf-8'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>msg<span class=\"token punctuation\">[</span><span class=\"token string\">'From'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> _format_addr<span class=\"token punctuation\">(</span><span class=\"token string\">'è“æºªé˜ &lt;%s>'</span> <span class=\"token operator\">%</span> from_addr<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>msg<span class=\"token punctuation\">[</span><span class=\"token string\">'To'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> _format_addr<span class=\"token punctuation\">(</span><span class=\"token string\">'å¶ä¿® &lt;%s>'</span> <span class=\"token operator\">%</span> to_addr<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>msg<span class=\"token punctuation\">[</span><span class=\"token string\">'Subject'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> Header<span class=\"token punctuation\">(</span><span class=\"token string\">'æ¥è‡ªè“æºªé˜çš„å£°æ˜'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'utf-8'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>encode<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>server <span class=\"token operator\">=</span> smtplib<span class=\"token punctuation\">.</span>SMTP<span class=\"token punctuation\">(</span>smtp_server<span class=\"token punctuation\">,</span> <span class=\"token number\">25</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># SMTP åè®®é»˜è®¤ç«¯å£æ˜¯ 25</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>server<span class=\"token punctuation\">.</span>set_debuglevel<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># æ‰“å°å‡ºå’Œ SMTP æœåŠ¡å™¨äº¤äº’çš„æ‰€æœ‰ä¿¡æ¯</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>server<span class=\"token punctuation\">.</span>login<span class=\"token punctuation\">(</span>from_addr<span class=\"token punctuation\">,</span> password<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># ç™»å½• SMTP æœåŠ¡å™¨</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>server<span class=\"token punctuation\">.</span>sendmail<span class=\"token punctuation\">(</span>from_addr<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>to_addr<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> msg<span class=\"token punctuation\">.</span>as_string<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>server<span class=\"token punctuation\">.</span>quit<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>å¦‚æœéœ€è¦å‘é€ html å†…å®¹ï¼Œåªéœ€è¦ä¼ é€’ html æ–‡æœ¬ï¼Œå¹¶æŒ‡å®šå¯¹åº”çš„ç±»å‹å‚æ•°å³å¯ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>msg <span class=\"token operator\">=</span> MIMEText<span class=\"token punctuation\">(</span><span class=\"token string\">'&lt;html>&lt;body>&lt;h1>æ¥è‡ªå²šå¸Œé˜æŸæ²³çš„æœ€æ–°æ¶ˆæ¯&lt;/h1>'</span> <span class=\"token operator\">+</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token string\">'&lt;p>å˜‰ä¸–ã€éœ¸å›¾ã€è“é›¨ã€è“æºªé˜ã€è–‡è‰å„å¤§æˆ˜é˜Ÿå°†åœ¨é›†ç»“äººé©¬åœ¨&lt;a href=\"http://www.python.org\">è¿™ä¸ªåœ°ç‚¹&lt;/a>è¿›è¡ŒåŸ‹ä¼ï¼Œé‡å›¾BOSSæ˜¯ä¸ªé™·è¿›ã€‚&lt;/p>'</span> <span class=\"token operator\">+</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token string\">'&lt;/body>&lt;/html>'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'html'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'utf-8'</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><h4 id=\"pop3-æ”¶å–é‚®ä»¶\"><a class=\"anchor\" href=\"#pop3-æ”¶å–é‚®ä»¶\">#</a> POP3 æ”¶å–é‚®ä»¶</h4>\n<p>æ”¶å–é‚®ä»¶å°±æ˜¯ç¼–å†™ä¸€ä¸ª MUA ä½œä¸ºå®¢æˆ·ç«¯ï¼Œä» MDA æŠŠé‚®ä»¶è·å–åˆ°ç”¨æˆ·çš„ç”µè„‘æˆ–è€…æ‰‹æœºä¸Šã€‚æ”¶å–é‚®ä»¶æœ€å¸¸ç”¨çš„åè®®æ˜¯ POP åè®®ï¼Œç›®å‰ç‰ˆæœ¬å·æ˜¯ 3ï¼Œä¿—ç§° POP3ã€‚</p>\n<p>æ³¨æ„ï¼ŒPOP3 åè®®æ”¶å–çš„ä¸æ˜¯ä¸€ä¸ªå·²ç»å¯ä»¥é˜…è¯»çš„é‚®ä»¶æœ¬èº«ï¼Œè€Œæ˜¯é‚®ä»¶çš„åŸå§‹æ–‡æœ¬ï¼Œè¿˜éœ€è¦ç”¨ email æ¨¡å—æä¾›çš„å„ç§ç±»æ¥è§£æåŸå§‹æ–‡æœ¬ï¼Œå˜æˆå¯é˜…è¯»çš„é‚®ä»¶å¯¹è±¡ã€‚</p>\n<p>é€šè¿‡ POP3 è·å–æœ€æ–°çš„ä¸€å°é‚®ä»¶å†…å®¹ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> poplib</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\"># è¾“å…¥é‚®ä»¶åœ°å€ï¼Œå£ä»¤å’Œ POP3 æœåŠ¡å™¨åœ°å€:</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">from</span> email<span class=\"token punctuation\">.</span>header <span class=\"token keyword\">import</span> decode_header</pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">from</span> email<span class=\"token punctuation\">.</span>parser <span class=\"token keyword\">import</span> Parser</pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">from</span> email<span class=\"token punctuation\">.</span>utils <span class=\"token keyword\">import</span> parseaddr</pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>email <span class=\"token operator\">=</span> <span class=\"token builtin\">input</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Email: '</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>password <span class=\"token operator\">=</span> <span class=\"token builtin\">input</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Password: '</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>pop3_server <span class=\"token operator\">=</span> <span class=\"token builtin\">input</span><span class=\"token punctuation\">(</span><span class=\"token string\">'POP3 server: '</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token comment\"># è¿æ¥åˆ° POP3 æœåŠ¡å™¨:</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>server <span class=\"token operator\">=</span> poplib<span class=\"token punctuation\">.</span>POP3<span class=\"token punctuation\">(</span>pop3_server<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token comment\"># å¯ä»¥æ‰“å¼€æˆ–å…³é—­è°ƒè¯•ä¿¡æ¯:</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>server<span class=\"token punctuation\">.</span>set_debuglevel<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token comment\"># å¯é€‰ï¼šæ‰“å° POP3 æœåŠ¡å™¨çš„æ¬¢è¿æ–‡å­—:</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>server<span class=\"token punctuation\">.</span>getwelcome<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>decode<span class=\"token punctuation\">(</span><span class=\"token string\">'utf-8'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token comment\"># èº«ä»½è®¤è¯:</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>server<span class=\"token punctuation\">.</span>user<span class=\"token punctuation\">(</span>email<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>server<span class=\"token punctuation\">.</span>pass_<span class=\"token punctuation\">(</span>password<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre></pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token comment\"># stat () è¿”å›é‚®ä»¶æ•°é‡å’Œå ç”¨ç©ºé—´:</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Messages: %s. Size: %s'</span> <span class=\"token operator\">%</span> server<span class=\"token punctuation\">.</span>stat<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre><span class=\"token comment\"># list () è¿”å›æ‰€æœ‰é‚®ä»¶çš„ç¼–å·:</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>resp<span class=\"token punctuation\">,</span> mails<span class=\"token punctuation\">,</span> octets <span class=\"token operator\">=</span> server<span class=\"token punctuation\">.</span><span class=\"token builtin\">list</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre><span class=\"token comment\"># å¯ä»¥æŸ¥çœ‹è¿”å›çš„åˆ—è¡¨ç±»ä¼¼ [b'1 82923', b'2 2184', ...]</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>mails<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre></pre></td></tr><tr><td data-num=\"30\"></td><td><pre><span class=\"token comment\"># è·å–æœ€æ–°ä¸€å°é‚®ä»¶ï¼Œæ³¨æ„ç´¢å¼•å·ä» 1 å¼€å§‹:</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>index <span class=\"token operator\">=</span> <span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>mails<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>resp<span class=\"token punctuation\">,</span> lines<span class=\"token punctuation\">,</span> octets <span class=\"token operator\">=</span> server<span class=\"token punctuation\">.</span>retr<span class=\"token punctuation\">(</span>index<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre></pre></td></tr><tr><td data-num=\"34\"></td><td><pre><span class=\"token comment\"># lines å­˜å‚¨äº†é‚®ä»¶çš„åŸå§‹æ–‡æœ¬çš„æ¯ä¸€è¡Œï¼Œ</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre><span class=\"token comment\"># å¯ä»¥è·å¾—æ•´ä¸ªé‚®ä»¶çš„åŸå§‹æ–‡æœ¬:</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>msg_content <span class=\"token operator\">=</span> <span class=\"token string\">b'\\r\\n'</span><span class=\"token punctuation\">.</span>join<span class=\"token punctuation\">(</span>lines<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>decode<span class=\"token punctuation\">(</span><span class=\"token string\">'utf-8'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre><span class=\"token comment\"># ç¨åè§£æå‡ºé‚®ä»¶:</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>msg <span class=\"token operator\">=</span> Parser<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>parsestr<span class=\"token punctuation\">(</span>msg_content<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre></pre></td></tr><tr><td data-num=\"40\"></td><td><pre><span class=\"token comment\"># è§£æé‚®ä»¶å†…å®¹</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">decode_str</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>    value<span class=\"token punctuation\">,</span> charset <span class=\"token operator\">=</span> decode_header<span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>    <span class=\"token keyword\">if</span> charset<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>        value <span class=\"token operator\">=</span> value<span class=\"token punctuation\">.</span>decode<span class=\"token punctuation\">(</span>charset<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre>    <span class=\"token keyword\">return</span> value</pre></td></tr><tr><td data-num=\"46\"></td><td><pre></pre></td></tr><tr><td data-num=\"47\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">guess_charset</span><span class=\"token punctuation\">(</span>msg<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre>    charset <span class=\"token operator\">=</span> msg<span class=\"token punctuation\">.</span>get_charset<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre>    <span class=\"token keyword\">if</span> charset <span class=\"token keyword\">is</span> <span class=\"token boolean\">None</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre>        content_type <span class=\"token operator\">=</span> msg<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">'Content-Type'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>lower<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"51\"></td><td><pre>        pos <span class=\"token operator\">=</span> content_type<span class=\"token punctuation\">.</span>find<span class=\"token punctuation\">(</span><span class=\"token string\">'charset='</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"52\"></td><td><pre>        <span class=\"token keyword\">if</span> pos <span class=\"token operator\">>=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"53\"></td><td><pre>            charset <span class=\"token operator\">=</span> content_type<span class=\"token punctuation\">[</span>pos <span class=\"token operator\">+</span> <span class=\"token number\">8</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>strip<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"54\"></td><td><pre>    <span class=\"token keyword\">return</span> charset</pre></td></tr><tr><td data-num=\"55\"></td><td><pre></pre></td></tr><tr><td data-num=\"56\"></td><td><pre><span class=\"token comment\"># indent ç”¨äºç¼©è¿›æ˜¾ç¤º:</span></pre></td></tr><tr><td data-num=\"57\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">print_info</span><span class=\"token punctuation\">(</span>msg<span class=\"token punctuation\">,</span> indent<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"58\"></td><td><pre>    <span class=\"token keyword\">if</span> indent <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"59\"></td><td><pre>        <span class=\"token keyword\">for</span> header <span class=\"token keyword\">in</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'From'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'To'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Subject'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"60\"></td><td><pre>            value <span class=\"token operator\">=</span> msg<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span>header<span class=\"token punctuation\">,</span> <span class=\"token string\">''</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"61\"></td><td><pre>            <span class=\"token keyword\">if</span> value<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"62\"></td><td><pre>                <span class=\"token keyword\">if</span> header<span class=\"token operator\">==</span><span class=\"token string\">'Subject'</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"63\"></td><td><pre>                    value <span class=\"token operator\">=</span> decode_str<span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"64\"></td><td><pre>                <span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"65\"></td><td><pre>                    hdr<span class=\"token punctuation\">,</span> addr <span class=\"token operator\">=</span> parseaddr<span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"66\"></td><td><pre>                    name <span class=\"token operator\">=</span> decode_str<span class=\"token punctuation\">(</span>hdr<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"67\"></td><td><pre>                    value <span class=\"token operator\">=</span> <span class=\"token string\">u'%s &lt;%s>'</span> <span class=\"token operator\">%</span> <span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">,</span> addr<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"68\"></td><td><pre>            <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'%s%s: %s'</span> <span class=\"token operator\">%</span> <span class=\"token punctuation\">(</span><span class=\"token string\">'  '</span> <span class=\"token operator\">*</span> indent<span class=\"token punctuation\">,</span> header<span class=\"token punctuation\">,</span> value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"69\"></td><td><pre>    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>msg<span class=\"token punctuation\">.</span>is_multipart<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"70\"></td><td><pre>        parts <span class=\"token operator\">=</span> msg<span class=\"token punctuation\">.</span>get_payload<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"71\"></td><td><pre>        <span class=\"token keyword\">for</span> n<span class=\"token punctuation\">,</span> part <span class=\"token keyword\">in</span> <span class=\"token builtin\">enumerate</span><span class=\"token punctuation\">(</span>parts<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"72\"></td><td><pre>            <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'%spart %s'</span> <span class=\"token operator\">%</span> <span class=\"token punctuation\">(</span><span class=\"token string\">'  '</span> <span class=\"token operator\">*</span> indent<span class=\"token punctuation\">,</span> n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"73\"></td><td><pre>            <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'%s--------------------'</span> <span class=\"token operator\">%</span> <span class=\"token punctuation\">(</span><span class=\"token string\">'  '</span> <span class=\"token operator\">*</span> indent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"74\"></td><td><pre>            print_info<span class=\"token punctuation\">(</span>part<span class=\"token punctuation\">,</span> indent <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"75\"></td><td><pre>    <span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"76\"></td><td><pre>        content_type <span class=\"token operator\">=</span> msg<span class=\"token punctuation\">.</span>get_content_type<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"77\"></td><td><pre>        <span class=\"token keyword\">if</span> content_type<span class=\"token operator\">==</span><span class=\"token string\">'text/plain'</span> <span class=\"token keyword\">or</span> content_type<span class=\"token operator\">==</span><span class=\"token string\">'text/html'</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"78\"></td><td><pre>            content <span class=\"token operator\">=</span> msg<span class=\"token punctuation\">.</span>get_payload<span class=\"token punctuation\">(</span>decode<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"79\"></td><td><pre>            charset <span class=\"token operator\">=</span> guess_charset<span class=\"token punctuation\">(</span>msg<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"80\"></td><td><pre>            <span class=\"token keyword\">if</span> charset<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"81\"></td><td><pre>                content <span class=\"token operator\">=</span> content<span class=\"token punctuation\">.</span>decode<span class=\"token punctuation\">(</span>charset<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"82\"></td><td><pre>            <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'%sText: %s'</span> <span class=\"token operator\">%</span> <span class=\"token punctuation\">(</span><span class=\"token string\">'  '</span> <span class=\"token operator\">*</span> indent<span class=\"token punctuation\">,</span> content <span class=\"token operator\">+</span> <span class=\"token string\">'...'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"83\"></td><td><pre>        <span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"84\"></td><td><pre>            <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'%sAttachment: %s'</span> <span class=\"token operator\">%</span> <span class=\"token punctuation\">(</span><span class=\"token string\">'  '</span> <span class=\"token operator\">*</span> indent<span class=\"token punctuation\">,</span> content_type<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"85\"></td><td><pre></pre></td></tr><tr><td data-num=\"86\"></td><td><pre>print_info<span class=\"token punctuation\">(</span>msg<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"87\"></td><td><pre></pre></td></tr><tr><td data-num=\"88\"></td><td><pre><span class=\"token comment\"># å¯ä»¥æ ¹æ®é‚®ä»¶ç´¢å¼•å·ç›´æ¥ä»æœåŠ¡å™¨åˆ é™¤é‚®ä»¶:</span></pre></td></tr><tr><td data-num=\"89\"></td><td><pre><span class=\"token comment\"># server.dele(index)</span></pre></td></tr><tr><td data-num=\"90\"></td><td><pre><span class=\"token comment\"># å…³é—­è¿æ¥:</span></pre></td></tr><tr><td data-num=\"91\"></td><td><pre>server<span class=\"token punctuation\">.</span>quit<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><h3 id=\"æ•°æ®åº“è®¿é—®\"><a class=\"anchor\" href=\"#æ•°æ®åº“è®¿é—®\">#</a> æ•°æ®åº“è®¿é—®</h3>\n<blockquote>\n<p>æ³¨æ„ï¼Œç›¸å…³çš„æ•°æ®åº“ç¯å¢ƒï¼Œéœ€è¦è‡ªè¡Œå®‰è£…ã€‚</p>\n</blockquote>\n<h4 id=\"ä½¿ç”¨sqlite\"><a class=\"anchor\" href=\"#ä½¿ç”¨sqlite\">#</a> ä½¿ç”¨ SQLite</h4>\n<p>SQLite æ˜¯ä¸€ç§åµŒå…¥å¼æ•°æ®åº“ï¼Œå®ƒçš„æ•°æ®åº“å°±æ˜¯ä¸€ä¸ªæ–‡ä»¶ã€‚ç”±äº SQLite æœ¬èº«æ˜¯ C è¯­è¨€å¼€å‘çš„ï¼Œè€Œä¸”ä½“ç§¯å¾ˆå°ï¼Œæ‰€ä»¥ï¼Œç»å¸¸è¢«é›†æˆåˆ°å„ç§åº”ç”¨ç¨‹åºä¸­ï¼Œç”šè‡³åœ¨ iOS å’Œ Android åº”ç”¨ä¸­éƒ½å¯ä»¥é›†æˆã€‚åœ¨ Python ä¸­ä¹Ÿå†…ç½®äº† SQLite3ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> sqlite3</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\"># 1. åˆ›å»ºè¿æ¥ï¼ˆæ•°æ®åº“æ–‡ä»¶æ˜¯ test.dbï¼Œå¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ï¼Œä¼šè‡ªåŠ¨åœ¨å½“å‰ç›®å½•åˆ›å»ºï¼‰</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>conn <span class=\"token operator\">=</span> sqlite3<span class=\"token punctuation\">.</span>connect<span class=\"token punctuation\">(</span><span class=\"token string\">'test.db'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\"># 2. åˆ›å»ºä¸€ä¸ªæ¸¸æ ‡ Cursor</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>cursor <span class=\"token operator\">=</span> conn<span class=\"token punctuation\">.</span>cursor<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token comment\"># 3. æ‰§è¡Œ SQL è¯­å¥ï¼ˆåˆ›å»º user è¡¨å¹¶æ·»åŠ æ•°æ®ï¼‰</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>cursor<span class=\"token punctuation\">.</span>execute<span class=\"token punctuation\">(</span><span class=\"token string\">'create table user (id varchar(20) primary key, name varchar(20))'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>cursor<span class=\"token punctuation\">.</span>execute<span class=\"token punctuation\">(</span><span class=\"token string\">'insert into user (id, name) values (\\'1\\', \\'Michael\\')'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>cursor<span class=\"token punctuation\">.</span>rowcount<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># åœ¨æ‰§è¡Œå¢åˆ æ”¹æ“ä½œæ—¶ï¼Œé€šè¿‡ rowcount è¿”å›å½±å“çš„è¡Œæ•°ï¼Œå¯ç”¨äºåˆ¤æ–­æ‰§è¡Œæ˜¯å¦ç¬¦åˆé¢„æœŸ</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token comment\"># 4. å…³é—­æ¸¸æ ‡ Cursor</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>cursor<span class=\"token punctuation\">.</span>close<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token comment\"># 5. æäº¤äº‹åŠ¡</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>conn<span class=\"token punctuation\">.</span>commit<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token comment\"># 6. å…³é—­è¿æ¥</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>conn<span class=\"token punctuation\">.</span>close<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>æŸ¥è¯¢æ•°æ®ä¸æ·»åŠ æ•°æ®å¤§åŒå°å¼‚ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> sqlite3</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>conn <span class=\"token operator\">=</span> sqlite3<span class=\"token punctuation\">.</span>connect<span class=\"token punctuation\">(</span><span class=\"token string\">'test.db'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>cursor <span class=\"token operator\">=</span> conn<span class=\"token punctuation\">.</span>cursor<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>cursor<span class=\"token punctuation\">.</span>execute<span class=\"token punctuation\">(</span><span class=\"token string\">'select * from user where id=?'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token string\">'1'</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>values <span class=\"token operator\">=</span> cursor<span class=\"token punctuation\">.</span>fetchall<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># é€šè¿‡ fetchall è·å–åˆ° list ç±»å‹çš„ç»“æœé›†ï¼Œå…¶å†…çš„æ¯ä¸ªå…ƒç´ éƒ½æ˜¯ä¸€ä¸ª tupleï¼Œå¯¹åº”ä¸€è¡Œè®°å½•</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>cursor<span class=\"token punctuation\">.</span>close<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>conn<span class=\"token punctuation\">.</span>commit<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>conn<span class=\"token punctuation\">.</span>close<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>values<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># [('1', 'Michael')]</span></pre></td></tr></table></figure><p>å¦‚æœéœ€è¦æ‰§è¡Œçš„ sql è¯­å¥ä¸­å«æœ‰å‚æ•°ï¼Œåˆ™éœ€è¦ä¼ å…¥ tuple ç±»å‹çš„å‚æ•°ï¼Œå¹¶ä¸ sql è¯­å¥ä¸­çš„  <code>?</code>  å ä½ç¬¦è¿›è¡ŒåŒ¹é…ï¼Œä»è€Œæ„é€ å®Œæ•´çš„ sql è¯­å¥ã€‚å¦‚éœ€äº†è§£æ›´å¤šæ›´ç»†è‡´çš„ SQLite çŸ¥è¯†ï¼Œè¯·å¦è¡Œå­¦ä¹ ã€‚</p>\n<h4 id=\"ä½¿ç”¨mysql\"><a class=\"anchor\" href=\"#ä½¿ç”¨mysql\">#</a> ä½¿ç”¨ MySQL</h4>\n<p>SQLite çš„ç‰¹ç‚¹æ˜¯è½»é‡çº§ã€å¯åµŒå…¥ï¼Œä½†ä¸èƒ½æ‰¿å—é«˜å¹¶å‘è®¿é—®ï¼Œé€‚åˆæ¡Œé¢å’Œç§»åŠ¨åº”ç”¨ã€‚è€Œ MySQL æ˜¯ä¸ºæœåŠ¡å™¨ç«¯è®¾è®¡çš„æ•°æ®åº“ï¼Œèƒ½æ‰¿å—é«˜å¹¶å‘è®¿é—®ï¼ŒåŒæ—¶å ç”¨çš„å†…å­˜ä¹Ÿè¿œè¿œå¤§äº SQLiteã€‚</p>\n<p>MySQL å®‰è£…ï¼Œè‡ªè¡Œç™¾åº¦ã€‚</p>\n<p>ç”±äº MySQL æœåŠ¡å™¨ä»¥ç‹¬ç«‹çš„è¿›ç¨‹è¿è¡Œï¼Œå¹¶é€šè¿‡ç½‘ç»œå¯¹å¤–æœåŠ¡ï¼Œæ‰€ä»¥ï¼Œéœ€è¦æ”¯æŒ Python çš„ MySQL é©±åŠ¨æ¥è¿æ¥åˆ° MySQL æœåŠ¡å™¨ã€‚ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤å®‰è£…é©±åŠ¨ï¼š</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>$ pip <span class=\"token function\">install</span> mysql-connector-python --allow-external mysql-connector-python</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>$ pip <span class=\"token function\">install</span> mysql-connector <span class=\"token comment\"># å¤‡é€‰é©±åŠ¨</span></pre></td></tr></table></figure><p>MySQL è¿æ¥ç¤ºä¾‹ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> mysql<span class=\"token punctuation\">.</span>connector</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\"># åˆ›å»º MySQL è¡¨å¹¶æ·»åŠ æ•°æ®è®°å½•</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>conn <span class=\"token operator\">=</span> mysql<span class=\"token punctuation\">.</span>connector<span class=\"token punctuation\">.</span>connect<span class=\"token punctuation\">(</span>user<span class=\"token operator\">=</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">,</span> password<span class=\"token operator\">=</span><span class=\"token string\">'password'</span><span class=\"token punctuation\">,</span> database<span class=\"token operator\">=</span><span class=\"token string\">'test'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>cursor <span class=\"token operator\">=</span> conn<span class=\"token punctuation\">.</span>cursor<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>cursor<span class=\"token punctuation\">.</span>execute<span class=\"token punctuation\">(</span><span class=\"token string\">'create table user (id varchar(20) primary key, name varchar(20))'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token comment\"># æ³¨æ„ MySQL çš„å ä½ç¬¦æ˜¯ % s</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>cursor<span class=\"token punctuation\">.</span>execute<span class=\"token punctuation\">(</span><span class=\"token string\">'insert into user (id, name) values (%s, %s)'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'1'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Michael'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>cursor<span class=\"token punctuation\">.</span>rowcount<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>conn<span class=\"token punctuation\">.</span>commit<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># äº‹åŠ¡å¿…é¡»æäº¤æ‰èƒ½ç”Ÿæ•ˆ</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>cursor<span class=\"token punctuation\">.</span>close<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token comment\"># æŸ¥è¯¢æ•°æ®</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>cursor <span class=\"token operator\">=</span> conn<span class=\"token punctuation\">.</span>cursor<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>cursor<span class=\"token punctuation\">.</span>execute<span class=\"token punctuation\">(</span><span class=\"token string\">'select * from user where id = %s'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token string\">'1'</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>values <span class=\"token operator\">=</span> cursor<span class=\"token punctuation\">.</span>fetchall<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>values<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>cursor<span class=\"token punctuation\">.</span>close<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>conn<span class=\"token punctuation\">.</span>close<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><blockquote>\n<p>ç”±äº Python çš„  <code>DB-API</code>  å®šä¹‰éƒ½æ˜¯é€šç”¨çš„ï¼Œæ‰€ä»¥ï¼Œæ“ä½œ MySQL çš„æ•°æ®åº“ä»£ç å’Œ SQLite ç±»ä¼¼ã€‚</p>\n</blockquote>\n<h4 id=\"ä½¿ç”¨sqlalchemy\"><a class=\"anchor\" href=\"#ä½¿ç”¨sqlalchemy\">#</a> ä½¿ç”¨ SQLAlchemy</h4>\n<p><code>SQLAlchemy</code>  æ˜¯ Python ä¸­ä¸€ä¸ªé€šè¿‡ ORM æ“ä½œæ•°æ®åº“çš„æ¡†æ¶ã€‚</p>\n<p>SQLAlchemy å¯¹è±¡å…³ç³»æ˜ å°„å™¨æä¾›äº†ä¸€ç§æ–¹æ³•ï¼Œç”¨äºå°†ç”¨æˆ·å®šä¹‰çš„ Python ç±»ä¸æ•°æ®åº“è¡¨ç›¸å…³è”ï¼Œå¹¶å°†è¿™äº›ç±»ï¼ˆå¯¹è±¡ï¼‰çš„å®ä¾‹ä¸å…¶å¯¹åº”è¡¨ä¸­çš„è¡Œç›¸å…³è”ã€‚å®ƒåŒ…æ‹¬ä¸€ä¸ªé€æ˜åœ°åŒæ­¥å¯¹è±¡åŠå…¶ç›¸å…³è¡Œä¹‹é—´çŠ¶æ€çš„æ‰€æœ‰å˜åŒ–çš„ç³»ç»Ÿï¼Œç§°ä¸ºå·¥ä½œå•å…ƒï¼Œä»¥åŠæ ¹æ®ç”¨æˆ·å®šä¹‰çš„ç±»åŠå…¶å®šä¹‰çš„å½¼æ­¤ä¹‹é—´çš„å…³ç³»è¡¨è¾¾æ•°æ®åº“æŸ¥è¯¢çš„ç³»ç»Ÿã€‚å®ƒå¯ä»¥è®©æˆ‘ä»¬ä½¿ç”¨ç±»å’Œå¯¹è±¡çš„æ–¹å¼æ“ä½œæ•°æ®åº“ï¼Œä»è€Œä»ç¹ççš„ sql è¯­å¥ä¸­è§£è„±å‡ºæ¥ã€‚</p>\n<p>å®‰è£… SQLAlchemyï¼š</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>$ pip <span class=\"token function\">install</span> sqlalchemy</pre></td></tr></table></figure><p>SQLAlchemy æ“ä½œæ•°æ®åº“ç¤ºä¾‹ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">from</span> sqlalchemy <span class=\"token keyword\">import</span> Column<span class=\"token punctuation\">,</span> String<span class=\"token punctuation\">,</span> create_engine<span class=\"token punctuation\">,</span> ForeignKey</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">from</span> sqlalchemy<span class=\"token punctuation\">.</span>orm <span class=\"token keyword\">import</span> sessionmaker<span class=\"token punctuation\">,</span> relationship</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">from</span> sqlalchemy<span class=\"token punctuation\">.</span>ext<span class=\"token punctuation\">.</span>declarative <span class=\"token keyword\">import</span> declarative_base</pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\"># åˆ›å»ºå¯¹è±¡çš„åŸºç±»:</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>Base <span class=\"token operator\">=</span> declarative_base<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token comment\"># å®šä¹‰ User å¯¹è±¡:</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">User</span><span class=\"token punctuation\">(</span>Base<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token comment\"># è¡¨çš„åå­—:</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    __tablename__ <span class=\"token operator\">=</span> <span class=\"token string\">'user'</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token comment\"># è¡¨çš„ç»“æ„:</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token builtin\">id</span> <span class=\"token operator\">=</span> Column<span class=\"token punctuation\">(</span>String<span class=\"token punctuation\">(</span><span class=\"token number\">20</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> primary_key<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    name <span class=\"token operator\">=</span> Column<span class=\"token punctuation\">(</span>String<span class=\"token punctuation\">(</span><span class=\"token number\">20</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>    <span class=\"token comment\"># ä¸€å¯¹å¤š:</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    books <span class=\"token operator\">=</span> relationship<span class=\"token punctuation\">(</span><span class=\"token string\">'Book'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">Book</span><span class=\"token punctuation\">(</span>Base<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    __tablename__ <span class=\"token operator\">=</span> <span class=\"token string\">'book'</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    <span class=\"token builtin\">id</span> <span class=\"token operator\">=</span> Column<span class=\"token punctuation\">(</span>String<span class=\"token punctuation\">(</span><span class=\"token number\">20</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> primary_key<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    name <span class=\"token operator\">=</span> Column<span class=\"token punctuation\">(</span>String<span class=\"token punctuation\">(</span><span class=\"token number\">20</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    <span class=\"token comment\"># â€œå¤šâ€ çš„ä¸€æ–¹çš„ book è¡¨æ˜¯é€šè¿‡å¤–é”®å…³è”åˆ° user è¡¨çš„:</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>    user_id <span class=\"token operator\">=</span> Column<span class=\"token punctuation\">(</span>String<span class=\"token punctuation\">(</span><span class=\"token number\">20</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> ForeignKey<span class=\"token punctuation\">(</span><span class=\"token string\">'user.id'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre></pre></td></tr><tr><td data-num=\"26\"></td><td><pre><span class=\"token comment\"># åˆå§‹åŒ–æ•°æ®åº“è¿æ¥:</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>engine <span class=\"token operator\">=</span> create_engine<span class=\"token punctuation\">(</span><span class=\"token string\">'mysql+mysqlconnector://root:password@localhost:3306/test'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre><span class=\"token comment\"># åˆ›å»º DBSession ç±»å‹:</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>DBSession <span class=\"token operator\">=</span> sessionmaker<span class=\"token punctuation\">(</span>bind<span class=\"token operator\">=</span>engine<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre></pre></td></tr><tr><td data-num=\"31\"></td><td><pre><span class=\"token comment\"># ------- æ–°å¢æ•°æ® -------</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre><span class=\"token comment\"># åˆ›å»º session å¯¹è±¡:</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>session <span class=\"token operator\">=</span> DBSession<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre><span class=\"token comment\"># åˆ›å»ºæ–° User å¯¹è±¡:</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>new_user <span class=\"token operator\">=</span> User<span class=\"token punctuation\">(</span><span class=\"token builtin\">id</span><span class=\"token operator\">=</span><span class=\"token string\">'5'</span><span class=\"token punctuation\">,</span> name<span class=\"token operator\">=</span><span class=\"token string\">'Bob'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre><span class=\"token comment\"># æ·»åŠ åˆ° session:</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>session<span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">(</span>new_user<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre><span class=\"token comment\"># æäº¤å³ä¿å­˜åˆ°æ•°æ®åº“:</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>session<span class=\"token punctuation\">.</span>commit<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre><span class=\"token comment\"># å…³é—­ session:</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>session<span class=\"token punctuation\">.</span>close<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre></pre></td></tr><tr><td data-num=\"43\"></td><td><pre><span class=\"token comment\"># ------- æŸ¥è¯¢æ•°æ® -------</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre><span class=\"token comment\"># åˆ›å»º Session:</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre>session <span class=\"token operator\">=</span> DBSession<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre><span class=\"token comment\"># åˆ›å»º Query æŸ¥è¯¢ï¼Œfilter æ˜¯ where æ¡ä»¶ï¼Œæœ€åè°ƒç”¨ one () è¿”å›å”¯ä¸€è¡Œï¼Œå¦‚æœè°ƒç”¨ all () åˆ™è¿”å›æ‰€æœ‰è¡Œ:</span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre>user <span class=\"token operator\">=</span> session<span class=\"token punctuation\">.</span>query<span class=\"token punctuation\">(</span>User<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">filter</span><span class=\"token punctuation\">(</span>User<span class=\"token punctuation\">.</span><span class=\"token builtin\">id</span><span class=\"token operator\">==</span><span class=\"token string\">'5'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>one<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre><span class=\"token comment\"># æ‰“å°ç±»å‹å’Œå¯¹è±¡çš„ name å±æ€§:</span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'type:'</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">type</span><span class=\"token punctuation\">(</span>user<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'name:'</span><span class=\"token punctuation\">,</span> user<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"51\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'books:'</span><span class=\"token punctuation\">,</span> user<span class=\"token punctuation\">.</span>books<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"52\"></td><td><pre><span class=\"token comment\"># å…³é—­ Session:</span></pre></td></tr><tr><td data-num=\"53\"></td><td><pre>session<span class=\"token punctuation\">.</span>close<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><h3 id=\"web-å¼€å‘\"><a class=\"anchor\" href=\"#web-å¼€å‘\">#</a> Web å¼€å‘</h3>\n<h4 id=\"http-åè®®ç®€ä»‹\"><a class=\"anchor\" href=\"#http-åè®®ç®€ä»‹\">#</a> HTTP åè®®ç®€ä»‹</h4>\n<p>ç•¥ã€‚</p>\n<h4 id=\"html-ç®€ä»‹\"><a class=\"anchor\" href=\"#html-ç®€ä»‹\">#</a> HTML ç®€ä»‹</h4>\n<p>ç•¥ã€‚</p>\n<h4 id=\"wsgi-æ¥å£\"><a class=\"anchor\" href=\"#wsgi-æ¥å£\">#</a> WSGI æ¥å£</h4>\n<p>WSGIï¼šWeb Server Gateway Interfaceã€‚</p>\n<p>åˆ›å»ºè„šæœ¬æ–‡ä»¶ <span class=\"exturl\" data-url=\"aHR0cDovL2FwcGxpY2F0aW9uLnB5\">application.py</span>ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># application å‡½æ•°éœ€è¦ç”± WSGI æ¥è°ƒç”¨</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">start</span><span class=\"token punctuation\">(</span>environ<span class=\"token punctuation\">,</span> start_response<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    start_response<span class=\"token punctuation\">(</span><span class=\"token string\">'200 OK'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Content-Type'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'text/html'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># Header åªèƒ½å‘é€ä¸€æ¬¡</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    body <span class=\"token operator\">=</span> <span class=\"token string\">'&lt;h1>Hello, %s!&lt;/h1>'</span> <span class=\"token operator\">%</span> <span class=\"token punctuation\">(</span>environ<span class=\"token punctuation\">[</span><span class=\"token string\">'PATH_INFO'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">]</span> <span class=\"token keyword\">or</span> <span class=\"token string\">'web'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span>body<span class=\"token punctuation\">.</span>encode<span class=\"token punctuation\">(</span><span class=\"token string\">'utf-8'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span></pre></td></tr></table></figure><p>åœ¨åŒçº§ç›®å½•ä¸‹åˆ›å»º <span class=\"exturl\" data-url=\"aHR0cDovL3NlcnZlci5weQ==\">server.py</span>ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># ä½¿ç”¨ Python å†…ç½®çš„ WSGI æœåŠ¡å™¨ï¼ˆä¸æ¨èï¼Œä»…ä¾›å¼€å‘æµ‹è¯•æ—¶ä½¿ç”¨ï¼‰</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">from</span> wsgiref<span class=\"token punctuation\">.</span>simple_server <span class=\"token keyword\">import</span> make_server</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">from</span> application <span class=\"token keyword\">import</span> start</pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\"># åˆ›å»ºä¸€ä¸ªæœåŠ¡å™¨ï¼ŒIP åœ°å€ä¸ºç©ºï¼Œç«¯å£æ˜¯ 8000ï¼Œå¤„ç†å‡½æ•°æ˜¯ application:</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>httpd <span class=\"token operator\">=</span> make_server<span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">,</span> <span class=\"token number\">8000</span><span class=\"token punctuation\">,</span> start<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Serving HTTP on port 8000...'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token comment\"># å¼€å§‹ç›‘å¬ HTTP è¯·æ±‚:</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>httpd<span class=\"token punctuation\">.</span>serve_forever<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>å¯åŠ¨ <span class=\"exturl\" data-url=\"aHR0cDovL3NlcnZlci5weQ==\">server.py</span> å¹¶åœ¨æµè§ˆå™¨è®¿é—® <span class=\"exturl\" data-url=\"aHR0cDovL2xvY2FsaG9zdDo4MDAw\">http://localhost:8000</span> ï¼Œå¯ä»¥æ­£å¸¸è®¿é—®ï¼Œè¯´æ˜ web æœåŠ¡å¯åŠ¨æˆåŠŸã€‚</p>\n<p>HTTP è¯·æ±‚çš„æ‰€æœ‰è¾“å…¥ä¿¡æ¯éƒ½å¯ä»¥é€šè¿‡  <code>environ</code>  è·å¾—ï¼ŒHTTP å“åº”çš„è¾“å‡ºéƒ½å¯ä»¥é€šè¿‡  <code>start_response()</code>  åŠ ä¸Šå‡½æ•°è¿”å›å€¼ä½œä¸º Bodyã€‚</p>\n<h4 id=\"ä½¿ç”¨-web-æ¡†æ¶\"><a class=\"anchor\" href=\"#ä½¿ç”¨-web-æ¡†æ¶\">#</a> ä½¿ç”¨ Web æ¡†æ¶</h4>\n<p>Python çš„ web æ¡†æ¶è¾ƒå¤šï¼Œæœ€ä¸ºä¸»æµçš„ä¸»è¦æœ‰ä»¥ä¸‹å‡ æ¬¾ï¼š</p>\n<ol>\n<li>Flask</li>\n<li>Django</li>\n<li>Tornado</li>\n<li>Twisted</li>\n</ol>\n<p>çŸ¥ä¹ä¸Šæœ‰è¯é¢˜è®¨è®ºè¿™äº›æ¡†æ¶ï¼š<span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuemhpaHUuY29tL3F1ZXN0aW9uLzIwNzA2MzMz\">https://www.zhihu.com/question/20706333</span></p>\n<blockquote>\n<p>è¿™é‡Œæ¼”ç¤ºå¦‚ä½•ä½¿ç”¨ flask æ¡†æ¶æ¥æä¾›æœåŠ¡ï¼Œå…¶ä»–æ¡†æ¶çš„ä½¿ç”¨æ–¹æ³•ç±»ä¼¼ã€‚</p>\n</blockquote>\n<p>å®‰è£…ï¼š</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>$ pip <span class=\"token function\">install</span> flask</pre></td></tr></table></figure><p>ä½¿ç”¨ç¤ºä¾‹ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">from</span> flask <span class=\"token keyword\">import</span> Flask</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">from</span> flask <span class=\"token keyword\">import</span> request</pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>app <span class=\"token operator\">=</span> Flask<span class=\"token punctuation\">(</span>__name__<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token decorator annotation punctuation\">@app<span class=\"token punctuation\">.</span>route</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/'</span><span class=\"token punctuation\">,</span> methods<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">'GET'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'POST'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">home</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token string\">'&lt;h1>Home&lt;/h1>&lt;div>&lt;a href=\"/signin\">to login&lt;/a>&lt;/div>'</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token decorator annotation punctuation\">@app<span class=\"token punctuation\">.</span>route</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/signin'</span><span class=\"token punctuation\">,</span> methods<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">'GET'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">signin_form</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token triple-quoted-string string\">'''&lt;form action=\"/signin\" method=\"post\"></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>              &lt;p>&lt;input name=\"username\">&lt;/p></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>              &lt;p>&lt;input name=\"password\" type=\"password\">&lt;/p></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>              &lt;p>&lt;button type=\"submit\">Sign In&lt;/button>&lt;/p></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>              &lt;/form>'''</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token decorator annotation punctuation\">@app<span class=\"token punctuation\">.</span>route</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/signin'</span><span class=\"token punctuation\">,</span> methods<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">'POST'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">signin</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token comment\"># éœ€è¦ä» request å¯¹è±¡è¯»å–è¡¨å•å†…å®¹ï¼š</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    <span class=\"token keyword\">if</span> request<span class=\"token punctuation\">.</span>form<span class=\"token punctuation\">[</span><span class=\"token string\">'username'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">==</span> <span class=\"token string\">'admin'</span> <span class=\"token keyword\">and</span> request<span class=\"token punctuation\">.</span>form<span class=\"token punctuation\">[</span><span class=\"token string\">'password'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">==</span> <span class=\"token string\">'password'</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token string\">'&lt;h3>Hello, admin!&lt;/h3>'</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token string\">'&lt;h3>Bad username or password.&lt;/h3>&lt;br>&lt;p>redirect to &lt;a href=\"/signin\">login page&lt;/a>&lt;/p>'</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre></pre></td></tr><tr><td data-num=\"25\"></td><td><pre><span class=\"token keyword\">if</span> __name__ <span class=\"token operator\">==</span> <span class=\"token string\">'__main__'</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>    app<span class=\"token punctuation\">.</span>run<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><h4 id=\"ä½¿ç”¨æ¨¡æ¿\"><a class=\"anchor\" href=\"#ä½¿ç”¨æ¨¡æ¿\">#</a> ä½¿ç”¨æ¨¡æ¿</h4>\n<p>åœ¨ web å¼€å‘ä¸­ï¼ŒMVC æ˜¯ä¸€ç§æœ€å¸¸è§çš„è®¾è®¡æ€æƒ³ï¼ŒPython ä¹ŸåŒæ ·æ”¯æŒ MVC çš„è®¾è®¡æ¨¡å¼ã€‚</p>\n<p>æ–°å»º <span class=\"exturl\" data-url=\"aHR0cDovL2FwcC5weQ==\">app.py</span>ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">from</span> flask <span class=\"token keyword\">import</span> Flask<span class=\"token punctuation\">,</span> request<span class=\"token punctuation\">,</span> render_template</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>app <span class=\"token operator\">=</span> Flask<span class=\"token punctuation\">(</span>__name__<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token decorator annotation punctuation\">@app<span class=\"token punctuation\">.</span>route</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/'</span><span class=\"token punctuation\">,</span> methods<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">'GET'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'POST'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">home</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">return</span> render_template<span class=\"token punctuation\">(</span><span class=\"token string\">'home.html'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token decorator annotation punctuation\">@app<span class=\"token punctuation\">.</span>route</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/signin'</span><span class=\"token punctuation\">,</span> methods<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">'GET'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">signin_form</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token keyword\">return</span> render_template<span class=\"token punctuation\">(</span><span class=\"token string\">'form.html'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token decorator annotation punctuation\">@app<span class=\"token punctuation\">.</span>route</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/signin'</span><span class=\"token punctuation\">,</span> methods<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">'POST'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">signin</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    username <span class=\"token operator\">=</span> request<span class=\"token punctuation\">.</span>form<span class=\"token punctuation\">[</span><span class=\"token string\">'username'</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    password <span class=\"token operator\">=</span> request<span class=\"token punctuation\">.</span>form<span class=\"token punctuation\">[</span><span class=\"token string\">'password'</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token keyword\">if</span> username<span class=\"token operator\">==</span><span class=\"token string\">'admin'</span> <span class=\"token keyword\">and</span> password<span class=\"token operator\">==</span><span class=\"token string\">'password'</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        <span class=\"token keyword\">return</span> render_template<span class=\"token punctuation\">(</span><span class=\"token string\">'signin-ok.html'</span><span class=\"token punctuation\">,</span> username<span class=\"token operator\">=</span>username<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token keyword\">return</span> render_template<span class=\"token punctuation\">(</span><span class=\"token string\">'form.html'</span><span class=\"token punctuation\">,</span> message<span class=\"token operator\">=</span><span class=\"token string\">'Bad username or password'</span><span class=\"token punctuation\">,</span> username<span class=\"token operator\">=</span>username<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token keyword\">if</span> __name__ <span class=\"token operator\">==</span> <span class=\"token string\">'__main__'</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    app<span class=\"token punctuation\">.</span>run<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>åœ¨ <span class=\"exturl\" data-url=\"aHR0cDovL2FwcC5weQ==\">app.py</span> åŒçº§ç›®å½•ä¸‹åˆ›å»ºæ–‡ä»¶å¤¹ templatesï¼Œå¹¶åœ¨å…¶ä¸­æ·»åŠ  html æ–‡ä»¶ï¼š</p>\n<figure class=\"highlight html\"><figcaption data-lang=\"HTML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">&lt;!-- form.html --></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>head</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>title</span><span class=\"token punctuation\">></span></span>Please Sign In<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>title</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>head</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  <span class=\"token comment\"></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>form</span> <span class=\"token attr-name\">action</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/signin<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">method</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>post<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>legend</span><span class=\"token punctuation\">></span></span>Please sign in:<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>legend</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>username<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">placeholder</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Username<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>password<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">placeholder</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Password<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>password<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>submit<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>Sign In<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>form</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>html</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token comment\">&lt;!-- home.html --></span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>head</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>title</span><span class=\"token punctuation\">></span></span>Home<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>title</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>head</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span> <span class=\"token special-attr\"><span class=\"token attr-name\">style</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token value css language-css\"><span class=\"token property\">font-style</span><span class=\"token punctuation\">:</span>italic</span><span class=\"token punctuation\">\"</span></span></span><span class=\"token punctuation\">></span></span>Home<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>html</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre></pre></td></tr><tr><td data-num=\"27\"></td><td><pre><span class=\"token comment\">&lt;!-- signin-ok.html --></span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>head</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>title</span><span class=\"token punctuation\">></span></span>Welcome, <span class=\"token comment\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>title</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>head</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span>Welcome, <span class=\"token comment\"></span>!<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>html</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><blockquote>\n<p>Flask æ¡†æ¶é»˜è®¤ä½¿ç”¨  <code>jinja2</code>  ä½œä¸ºè§†å›¾æ¸²æŸ“æ¨¡æ¿ã€‚å®ƒä½¿ç”¨  <code>&#123;&#123; name &#125;&#125;</code>  è¿›è¡Œå ä½ï¼Œè¡¨ç¤ºä¸€ä¸ªéœ€è¦æ›¿æ¢çš„å˜é‡ï¼Œå¦‚æœéœ€è¦ä½¿ç”¨å¾ªç¯ã€æ¡ä»¶åˆ¤æ–­ç­‰æŒ‡ä»¤è¯­å¥ï¼Œåœ¨ Jinja2 ä¸­åˆ™æ˜¯ä½¿ç”¨  <code>&#123;% ... %&#125;</code>  è¿›è¡Œè¡¨ç¤ºã€‚</p>\n<p>ä¸åŒ web æ¡†æ¶æŒ‡å®šä½¿ç”¨çš„æ¸²æŸ“æ¨¡æ¿å„ä¸ç›¸åŒï¼Œä½†å®ƒä»¬åŸºæœ¬ä¸Šéƒ½æ˜¯é€šè¿‡å ä½ç¬¦è¿›è¡ŒåŒ¹é…æ›¿æ¢å®ç°çš„æ¨¡æ¿åŠ¨æ€ç”Ÿæˆï¼Œåœ¨åŸç†ä¸Šå¤§åŒå°å¼‚ã€‚</p>\n</blockquote>\n<h3 id=\"å¼‚æ­¥io\"><a class=\"anchor\" href=\"#å¼‚æ­¥io\">#</a> å¼‚æ­¥ IO</h3>\n<p>å…³äº IO çš„ç†è®ºå™è¿°ï¼Œæˆ‘å·²ç»åœ¨æ–‡ç«  <a href=\"/computer-science/java-learning-path/1-basic/01-java-basic/\">Java åŸºç¡€çŸ¥è¯†å¤§ç›˜ç‚¹</a>çš„ IO ç« èŠ‚æœ‰è¿‡è¯¦ç»†çš„æ•´ç†ï¼Œå°½ç®¡è¯­è¨€ä¸åŒï¼Œä½†æ˜¯åŸºæœ¬åŸç†å’Œæ¦‚å¿µæ˜¯å®Œå…¨ä¸€è‡´çš„ã€‚</p>\n<h4 id=\"åç¨‹\"><a class=\"anchor\" href=\"#åç¨‹\">#</a> åç¨‹</h4>\n<p>åç¨‹ï¼ˆCoroutineï¼‰ï¼Œåˆç§°å¾®çº¿ç¨‹ï¼Œçº¤ç¨‹ã€‚</p>\n<p>åç¨‹å…¶å®å°±æ˜¯ä¸€ä¸ªå­ç¨‹åºï¼Œä½†ä¸æ™®é€šå­ç¨‹åºä¸åŒï¼Œåç¨‹åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œå…¶å­ç¨‹åºå†…éƒ¨æ˜¯å¯ä»¥ä¸­æ–­çš„ï¼Œè®©å‡ºæ‰§è¡Œæƒï¼Œç­‰åˆ°é€‚å½“çš„æ—¶å€™å†ç»§ç»­æ‰§è¡Œã€‚</p>\n<p>åç¨‹æ˜¯å•ä¸ªçº¿ç¨‹æ‰§è¡Œï¼Œå¹¶éå¤šçº¿ç¨‹ï¼Œå®ƒçš„ä¼˜åŠ¿åœ¨äºæ‰§è¡Œæ•ˆç‡é«˜ï¼Œå› ä¸ºå®ƒæ˜¯é€šè¿‡åŒä¸€çº¿ç¨‹å†…éƒ¨çš„å¤šä¸ªå­ç¨‹åºä¹‹é—´è¿›è¡Œåˆ‡æ¢å®ç°å¼‚æ­¥çš„ï¼Œä¸ä¼šäº§ç”Ÿé¢å¤–çš„çº¿ç¨‹å¼€é”€ã€‚å¦å¤–ï¼Œåç¨‹ç”±äºåªæ˜¯å•ä¸ªçº¿ç¨‹ï¼Œæ‰€ä»¥å¹¶ä¸éœ€è¦å¼•å…¥é”æœºåˆ¶æ¥å†™æ“ä½œå†²çªã€‚</p>\n<p>ä¸ºäº†å……åˆ†å‘æŒ¥åç¨‹çš„æ‰§è¡Œæ•ˆç‡ï¼Œé€šå¸¸ä¼šå°†åç¨‹å’Œå¤šè¿›ç¨‹ç»“åˆä½¿ç”¨ï¼Œä»¥ä¾¿èƒ½å¤Ÿåˆ©ç”¨å¤šæ ¸ CPUã€‚</p>\n<p>åç¨‹ç¤ºä¾‹ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">consumer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    r <span class=\"token operator\">=</span> <span class=\"token string\">''</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">while</span> <span class=\"token boolean\">True</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        n <span class=\"token operator\">=</span> <span class=\"token keyword\">yield</span> r</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token keyword\">if</span> <span class=\"token keyword\">not</span> n<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>            <span class=\"token keyword\">return</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'[CONSUMER] Consuming %s...'</span> <span class=\"token operator\">%</span> n<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        r <span class=\"token operator\">=</span> <span class=\"token string\">'200 OK'</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">produce</span><span class=\"token punctuation\">(</span>c<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    c<span class=\"token punctuation\">.</span>send<span class=\"token punctuation\">(</span><span class=\"token boolean\">None</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># 1. åœ¨ä¸€ä¸ªç”Ÿæˆå™¨å‡½æ•°æœªå¯åŠ¨ä¹‹å‰ï¼Œæ˜¯ä¸èƒ½ä¼ é€’å€¼è¿›å»çš„ï¼Œéœ€è¦æ‰§è¡Œ c.send (None) æˆ– next (c) æ¥è¿”å›ç”Ÿæˆå™¨çš„ç¬¬ä¸€ä¸ªå€¼</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    n <span class=\"token operator\">=</span> <span class=\"token number\">0</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token keyword\">while</span> n <span class=\"token operator\">&lt;</span> <span class=\"token number\">5</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        n <span class=\"token operator\">=</span> n <span class=\"token operator\">+</span> <span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'[PRODUCER] Producing %s...'</span> <span class=\"token operator\">%</span> n<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        r <span class=\"token operator\">=</span> c<span class=\"token punctuation\">.</span>send<span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># å¯åŠ¨ç”Ÿæˆå™¨ï¼Œå¹¶ä¼ å…¥å‚æ•°ï¼Œæ¥ç€ yield è¯­å¥ç»§ç»­æ‰§è¡Œ</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'[PRODUCER] Consumer return: %s'</span> <span class=\"token operator\">%</span> r<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    c<span class=\"token punctuation\">.</span>close<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># ç»“æŸç”Ÿæˆå™¨çš„ç”Ÿå‘½å‘¨æœŸ</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>c <span class=\"token operator\">=</span> consumer<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>produce<span class=\"token punctuation\">(</span>c<span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>è¿™ä¸€æ®µä»£ç çš„æ‰§è¡Œé¡ºåºå¤§è‡´å¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># ä¼ªä»£ç ï¼š</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>produce<span class=\"token punctuation\">(</span>consumer<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># 1. å°† consumer å‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’ç»™ produce å‡½æ•°</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>c<span class=\"token punctuation\">.</span>send<span class=\"token punctuation\">(</span><span class=\"token boolean\">None</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># 2. åˆå§‹åŒ–ç”Ÿæˆå™¨å‡½æ•°ï¼Œè¿›å…¥ consumer å‡½æ•°</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>r <span class=\"token operator\">=</span> <span class=\"token string\">''</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\"># è¿›å…¥ while True å¾ªç¯</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>n <span class=\"token operator\">=</span> <span class=\"token keyword\">yield</span> r  <span class=\"token comment\"># 3. æ­¤æ—¶ r ä¸ºç©ºï¼Œn æœªå®šä¹‰ï¼Œè·³å‡º consumer å‡½æ•°ï¼Œå¹¶æ ‡è®°å½“å‰è·³å‡ºç‚¹ï¼ˆå‡è®¾ä¸º A ç‚¹ï¼‰ï¼Œç»§ç»­æ‰§è¡Œ c.send (None) åç»­ä»£ç </span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>n <span class=\"token operator\">=</span> <span class=\"token number\">0</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token comment\"># è¿›å…¥ while n &lt; 5 å¾ªç¯ï¼ˆç¬¬ä¸€è½®å¾ªç¯ï¼‰</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>n <span class=\"token operator\">=</span> n <span class=\"token operator\">+</span> <span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'[PRODUCER] Producing %s...'</span> <span class=\"token operator\">%</span> n<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># æ­¤æ—¶ n=1</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>r <span class=\"token operator\">=</span> c<span class=\"token punctuation\">.</span>send<span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># 4. å†æ¬¡è¿›å…¥ç”Ÿæˆå™¨ï¼ŒæŸ¥æ‰¾ä¸Šæ¬¡æ ‡è®°çš„ç‚¹ Aï¼Œå¹¶ä»ç‚¹ A å¼€å§‹ç»§ç»­æ‰§è¡Œä»£ç ï¼ˆæ­¤æ—¶ n=1ï¼‰</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token comment\"># åˆ¤æ–­ if not n</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'[CONSUMER] Consuming %s...'</span> <span class=\"token operator\">%</span> n<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># æ­¤æ—¶ n=1</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>r <span class=\"token operator\">=</span> <span class=\"token string\">'200 OK'</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>n <span class=\"token operator\">=</span> <span class=\"token keyword\">yield</span> r  <span class=\"token comment\"># 5. æ­¤æ—¶ r='200 OK'ï¼Œn=1ï¼Œè·³å‡º consumer å‡½æ•°ï¼Œå¹¶æ ‡è®°å½“å‰è·³å‡ºç‚¹ï¼ˆå‡è®¾ä¸º B ç‚¹ï¼‰ï¼Œç»§ç»­æ‰§è¡Œ c.send (n) åç»­ä»£ç </span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'[PRODUCER] Consumer return: %s'</span> <span class=\"token operator\">%</span> r<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># æ­¤æ—¶ r='200 OK'</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token comment\"># è¿›å…¥ç¬¬äºŒè½®å¾ªç¯</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>n <span class=\"token operator\">=</span> n <span class=\"token operator\">+</span> <span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'[PRODUCER] Producing %s...'</span> <span class=\"token operator\">%</span> n<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># æ­¤æ—¶ n=2</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>r <span class=\"token operator\">=</span> c<span class=\"token punctuation\">.</span>send<span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># 6. å†æ¬¡è¿›å…¥ç”Ÿæˆå™¨ï¼ŒæŸ¥æ‰¾ä¸Šæ¬¡æ ‡è®°çš„ç‚¹ Bï¼Œå¹¶ä»ç‚¹ B å¼€å§‹ç»§ç»­æ‰§è¡Œä»£ç ï¼ˆæ­¤æ—¶ n=2ï¼‰</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token comment\"># åˆ¤æ–­ if not n</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'[CONSUMER] Consuming %s...'</span> <span class=\"token operator\">%</span> n<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># æ­¤æ—¶ n=2</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token comment\"># ...</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre><span class=\"token comment\"># ...ï¼ˆæŒ‰ç…§è¿™æ ·çš„æ­¥éª¤å¾ªç¯ï¼Œç›´åˆ° while n &lt; 5 æ¡ä»¶ä¸æ»¡è¶³ï¼‰</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>c<span class=\"token punctuation\">.</span>close<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># ç»“æŸç”Ÿæˆå™¨çš„ç”Ÿå‘½å‘¨æœŸ</span></pre></td></tr></table></figure><h4 id=\"asyncio\"><a class=\"anchor\" href=\"#asyncio\">#</a> asyncio</h4>\n<p><code>asyncio</code>  çš„ç¼–ç¨‹æ¨¡å‹å°±æ˜¯ä¸€ä¸ªæ¶ˆæ¯å¾ªç¯ã€‚ä» asyncio æ¨¡å—ä¸­ç›´æ¥è·å–ä¸€ä¸ª  <code>EventLoop</code>  çš„å¼•ç”¨ï¼Œç„¶åæŠŠéœ€è¦æ‰§è¡Œçš„åç¨‹æ‰”åˆ° EventLoop ä¸­æ‰§è¡Œï¼Œå°±å®ç°äº†å¼‚æ­¥ IOã€‚</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> asyncio</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> threading</pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">async</span> <span class=\"token keyword\">def</span> <span class=\"token function\">hello</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Hello! (%s)'</span> <span class=\"token operator\">%</span> threading<span class=\"token punctuation\">.</span>currentThread<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    r <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> asyncio<span class=\"token punctuation\">.</span>sleep<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># å¼‚æ­¥è°ƒç”¨ asyncio.sleep (1)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Bye-bye! (%s)'</span> <span class=\"token operator\">%</span> threading<span class=\"token punctuation\">.</span>currentThread<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\"># è·å– EventLoop:</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>loop <span class=\"token operator\">=</span> asyncio<span class=\"token punctuation\">.</span>get_event_loop<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>tasks <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>hello<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> hello<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token comment\"># æ‰§è¡Œ coroutine</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>loop<span class=\"token punctuation\">.</span>run_until_complete<span class=\"token punctuation\">(</span>asyncio<span class=\"token punctuation\">.</span>wait<span class=\"token punctuation\">(</span>tasks<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>loop<span class=\"token punctuation\">.</span>close<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>å¯¹äºè¿™ç§å¼‚æ­¥æ“ä½œï¼Œåœ¨  <code>3.8</code>  ä¹‹å‰çš„ Python æ—§ç‰ˆæœ¬ä¸­ï¼Œå…¶ä¹¦å†™æ–¹å¼ç•¥æœ‰ä¸åŒï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> threading</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> asyncio</pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token decorator annotation punctuation\">@asyncio<span class=\"token punctuation\">.</span>coroutine</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">hello</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Hello! (%s)'</span> <span class=\"token operator\">%</span> threading<span class=\"token punctuation\">.</span>currentThread<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">yield</span> <span class=\"token keyword\">from</span> asyncio<span class=\"token punctuation\">.</span>sleep<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># å¼‚æ­¥è°ƒç”¨ asyncio.sleep (1)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Bye-bye! (%s)'</span> <span class=\"token operator\">%</span> threading<span class=\"token punctuation\">.</span>currentThread<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>loop <span class=\"token operator\">=</span> asyncio<span class=\"token punctuation\">.</span>get_event_loop<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>tasks <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>hello<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> hello<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>loop<span class=\"token punctuation\">.</span>run_until_complete<span class=\"token punctuation\">(</span>asyncio<span class=\"token punctuation\">.</span>wait<span class=\"token punctuation\">(</span>tasks<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>loop<span class=\"token punctuation\">.</span>close<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>ä½¿ç”¨è¿™ç§æ–¹å¼ï¼Œæˆ‘ä»¬å¯ä»¥è¿›è¡Œå¾ˆå¤šå¼‚æ­¥ IOï¼Œä¾‹å¦‚ç½‘ç»œèµ„æºçš„è®¿é—®æ“ä½œï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> asyncio</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">async</span> <span class=\"token keyword\">def</span> <span class=\"token function\">wget</span><span class=\"token punctuation\">(</span>host<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'wget %s...'</span> <span class=\"token operator\">%</span> host<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    connect <span class=\"token operator\">=</span> asyncio<span class=\"token punctuation\">.</span>open_connection<span class=\"token punctuation\">(</span>host<span class=\"token punctuation\">,</span> <span class=\"token number\">80</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    reader<span class=\"token punctuation\">,</span> writer <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> connect</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    header <span class=\"token operator\">=</span> <span class=\"token string\">'GET / HTTP/1.0\\r\\nHost: %s\\r\\n\\r\\n'</span> <span class=\"token operator\">%</span> host</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    writer<span class=\"token punctuation\">.</span>write<span class=\"token punctuation\">(</span>header<span class=\"token punctuation\">.</span>encode<span class=\"token punctuation\">(</span><span class=\"token string\">'utf-8'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token keyword\">await</span> writer<span class=\"token punctuation\">.</span>drain<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token keyword\">while</span> <span class=\"token boolean\">True</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        line <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> reader<span class=\"token punctuation\">.</span>readline<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token keyword\">if</span> line <span class=\"token operator\">==</span> <span class=\"token string\">b'\\r\\n'</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>            <span class=\"token keyword\">break</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'%s header > %s'</span> <span class=\"token operator\">%</span> <span class=\"token punctuation\">(</span>host<span class=\"token punctuation\">,</span> line<span class=\"token punctuation\">.</span>decode<span class=\"token punctuation\">(</span><span class=\"token string\">'utf-8'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>rstrip<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token comment\"># Ignore the body, close the socket</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    writer<span class=\"token punctuation\">.</span>close<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>loop <span class=\"token operator\">=</span> asyncio<span class=\"token punctuation\">.</span>get_event_loop<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>tasks <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>wget<span class=\"token punctuation\">(</span>host<span class=\"token punctuation\">)</span> <span class=\"token keyword\">for</span> host <span class=\"token keyword\">in</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'www.sina.com.cn'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'www.sohu.com'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'www.163.com'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>loop<span class=\"token punctuation\">.</span>run_until_complete<span class=\"token punctuation\">(</span>asyncio<span class=\"token punctuation\">.</span>wait<span class=\"token punctuation\">(</span>tasks<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>loop<span class=\"token punctuation\">.</span>close<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>ç”±ç¤ºä¾‹å¯è§ï¼Œé€šè¿‡å¼‚æ­¥ IOï¼Œæˆ‘ä»¬å¯ä»¥å®ç°ä¸€ä¸ªçº¿ç¨‹é€šè¿‡ coroutine æ¥å¹¶å‘å®Œæˆå¤šä¸ªä»»åŠ¡ã€‚</p>\n<p>å¦‚æœå°† asyncio ç”¨åœ¨æœåŠ¡å™¨ç«¯ï¼Œä¾‹å¦‚ Web æœåŠ¡å™¨ï¼Œç”±äº HTTP è¿æ¥å°±æ˜¯ IO æ“ä½œï¼Œå› æ­¤å¯ä»¥ç”¨ å•çº¿ç¨‹ +  <code>coroutine</code>  å®ç°å¤šç”¨æˆ·çš„é«˜å¹¶å‘æ”¯æŒã€‚</p>\n<blockquote>\n<p>ç›¸å…³æ‰©å±•å†…å®¹ï¼š<span class=\"exturl\" data-url=\"aHR0cHM6Ly9yZWFscHl0aG9uLmNvbS9hc3luYy1pby1weXRob24=\">https://realpython.com/async-io-python</span></p>\n</blockquote>\n<h4 id=\"aiohttp\"><a class=\"anchor\" href=\"#aiohttp\">#</a> aiohttp</h4>\n<p>asyncio å®ç°äº† TCPã€UDPã€SSL ç­‰åè®®ï¼Œaiohttp åˆ™æ˜¯åŸºäº asyncio å®ç°çš„ HTTP æ¡†æ¶ã€‚</p>\n<p>å®‰è£… aiohttp ï¼š</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>$ pip <span class=\"token function\">install</span> aiohttp</pre></td></tr></table></figure><p>å¼‚æ­¥åˆ›å»º TCP æœåŠ¡ï¼š</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> asyncio</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">from</span> aiohttp <span class=\"token keyword\">import</span> web</pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">async</span> <span class=\"token keyword\">def</span> <span class=\"token function\">index</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">await</span> asyncio<span class=\"token punctuation\">.</span>sleep<span class=\"token punctuation\">(</span><span class=\"token number\">0.5</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">return</span> web<span class=\"token punctuation\">.</span>Response<span class=\"token punctuation\">(</span>body<span class=\"token operator\">=</span><span class=\"token string\">b'&lt;h1>Index&lt;/h1>'</span><span class=\"token punctuation\">,</span> content_type<span class=\"token operator\">=</span><span class=\"token string\">'text/html'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token keyword\">async</span> <span class=\"token keyword\">def</span> <span class=\"token function\">hello</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token keyword\">await</span> asyncio<span class=\"token punctuation\">.</span>sleep<span class=\"token punctuation\">(</span><span class=\"token number\">0.5</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    text <span class=\"token operator\">=</span> <span class=\"token string\">'&lt;h1>hello, %s!&lt;/h1>'</span> <span class=\"token operator\">%</span> request<span class=\"token punctuation\">.</span>match_info<span class=\"token punctuation\">[</span><span class=\"token string\">'name'</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token keyword\">return</span> web<span class=\"token punctuation\">.</span>Response<span class=\"token punctuation\">(</span>body<span class=\"token operator\">=</span>text<span class=\"token punctuation\">.</span>encode<span class=\"token punctuation\">(</span><span class=\"token string\">'utf-8'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> content_type<span class=\"token operator\">=</span><span class=\"token string\">'text/html'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token keyword\">async</span> <span class=\"token keyword\">def</span> <span class=\"token function\">init</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    app <span class=\"token operator\">=</span> web<span class=\"token punctuation\">.</span>Application<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    app<span class=\"token punctuation\">.</span>router<span class=\"token punctuation\">.</span>add_get<span class=\"token punctuation\">(</span><span class=\"token string\">'/'</span><span class=\"token punctuation\">,</span> index<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    app<span class=\"token punctuation\">.</span>router<span class=\"token punctuation\">.</span>add_get<span class=\"token punctuation\">(</span><span class=\"token string\">'/hello/&#123;name&#125;'</span><span class=\"token punctuation\">,</span> hello<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    runner <span class=\"token operator\">=</span> web<span class=\"token punctuation\">.</span>AppRunner<span class=\"token punctuation\">(</span>app<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token keyword\">await</span> runner<span class=\"token punctuation\">.</span>setup<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    site <span class=\"token operator\">=</span> web<span class=\"token punctuation\">.</span>TCPSite<span class=\"token punctuation\">(</span>runner<span class=\"token punctuation\">,</span> <span class=\"token string\">'127.0.0.1'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">8000</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    <span class=\"token keyword\">await</span> site<span class=\"token punctuation\">.</span>start<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Server started at http://127.0.0.1:8000...'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    <span class=\"token keyword\">return</span> site</pre></td></tr><tr><td data-num=\"24\"></td><td><pre></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>loop <span class=\"token operator\">=</span> asyncio<span class=\"token punctuation\">.</span>get_event_loop<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>loop<span class=\"token punctuation\">.</span>run_until_complete<span class=\"token punctuation\">(</span>init<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>loop<span class=\"token punctuation\">.</span>run_forever<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><h3 id=\"é¡¹ç›®å®è·µ\"><a class=\"anchor\" href=\"#é¡¹ç›®å®è·µ\">#</a> é¡¹ç›®å®è·µ</h3>\n<h4 id=\"å‚è€ƒå­¦ä¹ é¡¹ç›®\"><a class=\"anchor\" href=\"#å‚è€ƒå­¦ä¹ é¡¹ç›®\">#</a> å‚è€ƒå­¦ä¹ é¡¹ç›®</h4>\n<blockquote>\n<p>ç”±äºä¸ªäººèƒ½åŠ›æ‰€é™ï¼Œè¿™é‡Œçš„é¡¹ç›®å®æˆ˜ä¸»è¦ç€é‡ä»‹ç» Python Web ç›¸å…³é¡¹ç›®ï¼Œå¦‚åç»­æœ‰å…¶ä»– Python æ–¹å‘ï¼Œå°†è®°å½•åœ¨å•ç‹¬çš„æ–‡ç« ä¸­ã€‚</p>\n</blockquote>\n<p>ç”±äºæ‰‹åŠ¨ç¼–å†™é¡¹ç›®å®æˆ˜ç¯‡å¹…è¾ƒå¤§ï¼Œè€Œä¸”ä¹Ÿè´¹æ—¶å¾ˆé•¿ï¼Œè¿™é‡Œæä¾›å‡ ä¸ªå¼€æºé¡¹ç›®è¿›è¡Œå­¦ä¹ ï¼Œçœ‹æ‡‚è¿™äº›ä»£ç ï¼Œå¹¶ä¸”èƒ½å¤Ÿæ ¹æ®è‡ªèº«éœ€è¦ï¼Œå¯¹è¿™äº›ä»£ç è¿›è¡Œç¬¦åˆè‡ªå·±ä¸šåŠ¡éœ€æ±‚çš„ä¿®æ”¹ï¼Œå¦‚æœä½ ä»”ç»†æ¢³ç†è¿‡è¿™äº›å¼€æºé¡¹ç›®ï¼Œç›¸ä¿¡ä½ å¯¹äºå¸¸è§„çš„ Python é¡¹ç›®å¼€å‘ï¼Œéƒ½èƒ½å¤Ÿå¾—å¿ƒåº”æ‰‹ã€‚</p>\n<table>\n<thead>\n<tr>\n<th>é¡¹ç›®å</th>\n<th>å®˜ç½‘</th>\n<th>å¤‡æ³¨</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Django-Vue-Admin</td>\n<td><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kamFuZ28tdnVlLWFkbWluLmNvbQ==\">https://django-vue-admin.com</span></td>\n<td>WEB åº”ç”¨ï¼ŒåŸºäº RuoYi</td>\n</tr>\n<tr>\n<td>Simple UI</td>\n<td><span class=\"exturl\" data-url=\"aHR0cHM6Ly9zaW1wbGV1aS43MndvLmNvbS9zaW1wbGV1aQ==\">https://simpleui.72wo.com/simpleui</span></td>\n<td>WEB åº”ç”¨ï¼Œåšå®¢ç³»ç»Ÿ</td>\n</tr>\n</tbody>\n</table>\n<h4 id=\"è‡ªä¸»å¼€å‘é¡¹ç›®\"><a class=\"anchor\" href=\"#è‡ªä¸»å¼€å‘é¡¹ç›®\">#</a> è‡ªä¸»å¼€å‘é¡¹ç›®</h4>\n<p>å­¦ä¹ å®Œä¸Šé¢çš„åŸºç¡€çŸ¥è¯†ï¼Œå°è¯•ç”¨å·²æŒæ¡çš„çŸ¥è¯†å¼€å‘ä¸€ä¸ªè‡ªå·±çš„é¡¹ç›®å§ï¼</p>\n<p><span class=\"label danger\">â—ï¸TODO</span> å¾…å®Œå–„</p>\n<h3 id=\"æ–‡æœ«æ€»ç»“\"><a class=\"anchor\" href=\"#æ–‡æœ«æ€»ç»“\">#</a> æ–‡æœ«æ€»ç»“</h3>\n<div class=\"note info\">\n<p>è·Ÿç€å»–é›ªå³°çš„å®˜ç½‘æ•™ç¨‹è¿‡äº†ä¸€éï¼Œé™¤å»å®æˆ˜éƒ¨åˆ†ï¼Œå¤§çº¦ç”¨äº†ä¸€ä¸ªæœˆçš„æ—¶é—´ï¼Œæ€»ä½“æ¥è¯´æ„Ÿè§‰éš¾åº¦ä¸æ˜¯å¤ªå¤§ï¼Œå¤§æ¦‚æ˜¯å› ä¸ºæœ‰ä¸‰å››å¹´çš„ Java å¼€å‘ç»éªŒå«åº•çš„ç¼˜æ•…å§ï¼Œä¸€äº›çŸ¥è¯†ä¸Šæ‰‹æ„Ÿè§‰è¿˜æ˜¯æŒºå¿«çš„ã€‚ä½†ä¹Ÿæœ‰äº›éƒ¨åˆ†æ˜¯éšæ„è·³è¿‡äº†çš„ï¼Œå¯¹äºè¿™äº›ï¼Œæˆ‘éƒ½æ˜¯ä¸€æ—¦æ¢³ç†æ¸…äº†é€»è¾‘ï¼Œå°±ç…§æ¬äº†å»–é›ªå³°å®˜ç½‘çš„ä»£ç ä½œä¸ºè®°å½•ã€‚ä½†ä»¥æˆ‘è‡ªå·±çš„ç»éªŒæ¥çœ‹ï¼Œè¿™åº”è¯¥ä¸æ˜¯ä»€ä¹ˆå¤§é—®é¢˜ï¼Œé‡è¦åœ¨äºç»“åˆå®é™…é¡¹ç›®ï¼Œé›¶æ˜Ÿçš„çŸ¥è¯†ç‚¹å¤ªè¿‡äºå­¤ç«‹ï¼Œè€Œä¸”å½“æ¥è§¦äº†å¤šç§å¼€å‘è¯­è¨€åï¼Œå•ç‹¬ç†è§£æŸä¸€ä¸¤ä¸ªç‹¬ç«‹çš„çŸ¥è¯†ç‚¹ä¹Ÿæ˜¯å®¹æ˜“å¼•èµ·æ··æ·†çš„ã€‚æœ€æœ‰æ•ˆçš„æ–¹æ³•è¿˜æ˜¯å­¦ä¹ äº†è¿™äº›åŸºç¡€çŸ¥è¯†åï¼Œå®Œå®Œæ•´æ•´åœ°åº”ç”¨åˆ°å®é™…çš„é¡¹ç›®ä¸­ï¼Œè¿™ä¸ä»…å¯ä»¥å¸®åŠ©åŠ æ·±å°è±¡ï¼Œä¹Ÿå¯ä»¥å°†å„ä¸ªçŸ¥è¯†ç‚¹è´¯ç©¿è¿›è¡Œç†è§£ã€‚è€Œä¸”åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œå¾ˆå¤šé—®é¢˜æ‰ä¼šæ›´åŠ ç›´è§‚åœ°å‘ˆç°å‡ºæ¥ã€‚</p>\n</div>\n<h3 id=\"å‚è€ƒ\"><a class=\"anchor\" href=\"#å‚è€ƒ\">#</a> å‚è€ƒ</h3>\n<ul>\n<li>ç‹¬ç«‹åšå®¢ï¼š<span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubGlhb3h1ZWZlbmcuY29tL3dpa2kvMTAxNjk1OTY2MzYwMjQwMA==\">å»–é›ªå³°çš„å®˜æ–¹ç½‘ç«™</span></li>\n</ul>\n",
            "tags": [
                "è®¡ç®—æœºç§‘å­¦",
                "Pythonå…¥é—¨æ•™ç¨‹",
                "python"
            ]
        },
        {
            "id": "https://www.chinmoku.cc/computer-science/java-learning-path/2-intermediate/webservice-tutorial/",
            "url": "https://www.chinmoku.cc/computer-science/java-learning-path/2-intermediate/webservice-tutorial/",
            "title": "WebServiceï¼Œå¦‚æ­¤è€Œå·²",
            "date_published": "2021-08-28T02:38:51.000Z",
            "content_html": "<div class=\"note info\">\n<p>åœ¨æˆ‘çš„å¼€å‘ç”Ÿæ´»ä¸­ï¼Œå…¶å®ä½¿ç”¨åˆ° WebService çš„æœºä¼šå¾ˆå°‘ï¼Œæ¯•ç«Ÿç°åœ¨æµè¡Œ RESTfulï¼ŒJSON æ›¿ä»£ XMLï¼ŒRESTful æ›¿ä»£ WebServiceï¼Œè¿™æ˜¯å¾ˆæ­£å¸¸çš„ç°è±¡ï¼Œæ¯•ç«Ÿ XML å’Œ WebService éƒ½å¤ªè¿‡äºç¬¨é‡ï¼Œä¼ è¾“å’Œå¤„ç†æ•ˆç‡ä½ï¼Œä½†è€ƒè™‘åˆ°åœ¨æŸäº›å¤æ‚æˆ–ç‰¹æ®Šçš„ä¸šåŠ¡åœºæ™¯ä¸­ï¼ŒWebService ä»æ—§æœ‰æ‰€åº”ç”¨ï¼Œå› æ­¤åœ¨è¿™é‡Œæ•´ç†äº†ä¸€ä¸‹ç›¸å…³çš„çŸ¥è¯†å†…å®¹ï¼Œä»¥ä¾¿ä¸šåŠ¡éœ€è¦æ—¶èƒ½å¤Ÿå¿«é€Ÿå›é¡¾å¹¶åº”ç”¨ã€‚</p>\n</div>\n<h3 id=\"æ¦‚è¿°\"><a class=\"anchor\" href=\"#æ¦‚è¿°\">#</a> æ¦‚è¿°</h3>\n<h4 id=\"webservice-æ˜¯ä»€ä¹ˆ\"><a class=\"anchor\" href=\"#webservice-æ˜¯ä»€ä¹ˆ\">#</a> WebService æ˜¯ä»€ä¹ˆ</h4>\n<p><code>WebService</code>  æ˜¯ä¸€ç§è·¨ç¼–ç¨‹è¯­è¨€å’Œè·¨æ“ä½œç³»ç»Ÿå¹³å°çš„è¿œç¨‹è°ƒç”¨æŠ€æœ¯ã€‚</p>\n<ul>\n<li>WebService æ˜¯ä¸€ä¸ªå¹³å°ç‹¬ç«‹çš„ï¼Œä½è€¦åˆçš„ï¼Œè‡ªåŒ…å«çš„ã€åŸºäºå¯ç¼–ç¨‹çš„ web çš„åº”ç”¨ç¨‹åºï¼Œå¯ä½¿ç”¨å¼€æ”¾çš„ XML ï¼ˆæ ‡å‡†é€šç”¨æ ‡è®°è¯­è¨€ä¸‹çš„ä¸€ä¸ªå­é›†ï¼‰æ ‡å‡†æ¥æè¿°ã€å‘å¸ƒã€å‘ç°ã€åè°ƒå’Œé…ç½®è¿™äº›åº”ç”¨ç¨‹åºï¼Œç”¨äºå¼€å‘åˆ†å¸ƒå¼çš„äº’æ“ä½œçš„åº”ç”¨ç¨‹åºã€‚</li>\n<li>WebService æŠ€æœ¯ï¼Œ èƒ½ä½¿å¾—è¿è¡Œåœ¨ä¸åŒæœºå™¨ä¸Šçš„ä¸åŒåº”ç”¨æ— é¡»å€ŸåŠ©é™„åŠ çš„ã€ä¸“é—¨çš„ç¬¬ä¸‰æ–¹è½¯ä»¶æˆ–ç¡¬ä»¶ï¼Œ å°±å¯ç›¸äº’äº¤æ¢æ•°æ®æˆ–é›†æˆã€‚ä¾æ® WebService è§„èŒƒå®æ–½çš„åº”ç”¨ä¹‹é—´ï¼Œ æ— è®ºå®ƒä»¬æ‰€ä½¿ç”¨çš„è¯­è¨€ã€ å¹³å°æˆ–å†…éƒ¨åè®®æ˜¯ä»€ä¹ˆï¼Œ éƒ½å¯ä»¥ç›¸äº’äº¤æ¢æ•°æ®ã€‚ WebService æ˜¯è‡ªæè¿°ã€ è‡ªåŒ…å«çš„å¯ç”¨ç½‘ç»œæ¨¡å—ï¼Œ å¯ä»¥æ‰§è¡Œå…·ä½“çš„ä¸šåŠ¡åŠŸèƒ½ã€‚Web Service ä¹Ÿå¾ˆå®¹æ˜“éƒ¨ç½²ï¼Œ å› ä¸ºå®ƒä»¬åŸºäºä¸€äº›å¸¸è§„çš„äº§ä¸šæ ‡å‡†ä»¥åŠå·²æœ‰çš„ä¸€äº›æŠ€æœ¯ï¼Œè¯¸å¦‚æ ‡å‡†é€šç”¨æ ‡è®°è¯­è¨€ä¸‹çš„å­é›† XML ã€ HTTP ã€‚ WebService å‡å°‘äº†åº”ç”¨æ¥å£çš„èŠ±è´¹ã€‚ WebService ä¸ºæ•´ä¸ªä¼ä¸šç”šè‡³å¤šä¸ªç»„ç»‡ä¹‹é—´çš„ä¸šåŠ¡æµç¨‹çš„é›†æˆæä¾›äº†ä¸€ä¸ªé€šç”¨æœºåˆ¶ã€‚</li>\n</ul>\n<h4 id=\"webservice-èƒ½åšä»€ä¹ˆ\"><a class=\"anchor\" href=\"#webservice-èƒ½åšä»€ä¹ˆ\">#</a> WebService èƒ½åšä»€ä¹ˆ</h4>\n<ul>\n<li>ä¸åŒç³»ç»Ÿã€ä¸åŒå¹³å°ã€ä¸åŒè¯­è¨€ä¹‹é—´çš„é€šä¿¡è®¿é—®å’Œè¿œç¨‹è°ƒç”¨ã€‚</li>\n<li>åº”ç”¨ç¨‹åºçš„é›†æˆï¼Œä¸åŒä¸šåŠ¡çš„æ•´åˆã€‚</li>\n</ul>\n<h4 id=\"å®˜æ–¹å®šä¹‰\"><a class=\"anchor\" href=\"#å®˜æ–¹å®šä¹‰\">#</a> å®˜æ–¹å®šä¹‰</h4>\n<ul>\n<li>Web æœåŠ¡æ˜¯ä¸€ç§æœåŠ¡å¯¼å‘æ¶æ„çš„æŠ€æœ¯ï¼Œé€šè¿‡æ ‡å‡†çš„ Web åè®®æä¾›æœåŠ¡ï¼Œç›®çš„æ˜¯ä¿è¯ä¸åŒå¹³å°çš„åº”ç”¨æœåŠ¡å¯ä»¥äº’æ“ä½œã€‚</li>\n<li>è¡¨é¢ä¸Šçœ‹ WebService å°±æ˜¯ä¸€ä¸ªåº”ç”¨ç¨‹åºï¼Œå®ƒå‘å¤–ç•Œæš´éœ²å‡ºä¸€ä¸ªèƒ½å¤Ÿé€šè¿‡ Web è¿›è¡Œè°ƒç”¨çš„æ–¹æ³• API ï¼Œèƒ½ç”¨ç¼–ç¨‹çš„æ–¹æ³•é€šè¿‡ Web è°ƒç”¨æ¥å®ç°æŸä¸ªåŠŸèƒ½çš„åº”ç”¨ç¨‹åºã€‚</li>\n<li>æ·±å±‚æ¬¡ä¸Šçœ‹ WebService æ˜¯ä¸€ç§æ–°çš„ Web åº”ç”¨ç¨‹åºåˆ†æ”¯ï¼Œå®ƒä»¬æ˜¯è‡ªåŒ…å«ã€è‡ªæè¿°æ¨¡å—åŒ–çš„åº”ç”¨ï¼Œå¯ä»¥åœ¨ç½‘ç»œä¸­è¢«æè¿°ã€å‘å¸ƒã€æŸ¥æ‰¾ä»¥åŠé€šè¿‡ Web æ¥è°ƒç”¨ã€‚</li>\n</ul>\n<h4 id=\"webservice-çš„ä¸¤ç§ç±»å‹\"><a class=\"anchor\" href=\"#webservice-çš„ä¸¤ç§ç±»å‹\">#</a> WebService çš„ä¸¤ç§ç±»å‹</h4>\n<ul>\n<li>SOAP åè®®é£æ ¼çš„ Webservice</li>\n<li>Restful åè®®é£æ ¼çš„ Webservice</li>\n</ul>\n<h4 id=\"webservice-ç»“æ„å›¾\"><a class=\"anchor\" href=\"#webservice-ç»“æ„å›¾\">#</a> WebService ç»“æ„å›¾</h4>\n<p><img data-src=\"https://img.xfc-exclave.com/2021/08/4e5893861abeda88598d10785a2d675f1629099543.png\" alt=\"WebService ç»“æ„å›¾\" width=\"500px\" /></p>\n<h4 id=\"webservice-æ ¸å¿ƒç»„ä»¶\"><a class=\"anchor\" href=\"#webservice-æ ¸å¿ƒç»„ä»¶\">#</a> WebService æ ¸å¿ƒç»„ä»¶</h4>\n<ul>\n<li>XML å’Œ HTTP</li>\n<li>SOAPï¼š ç®€å•å¯¹è±¡è®¿é—®åè®®</li>\n<li>WSDLï¼šWebService æè¿°è¯­è¨€</li>\n<li>UDDIï¼šç»Ÿä¸€æè¿°ã€å‘ç°å’Œé›†æˆåè®®</li>\n</ul>\n<p><strong>SOAP</strong></p>\n<p>WebService å»ºå¥½ä»¥åï¼Œä½ æˆ–è€…å…¶ä»–äººå°±ä¼šå»è°ƒç”¨å®ƒã€‚ç®€å•å¯¹è±¡è®¿é—®åè®®ï¼ˆSOAPï¼‰æä¾›äº†æ ‡å‡†çš„ RPC æ–¹æ³•æ¥è°ƒç”¨ WebService ã€‚ SOAP è§„èŒƒå®šä¹‰äº† SOAP æ¶ˆæ¯çš„æ ¼å¼ï¼Œä»¥åŠæ€æ ·é€šè¿‡ HTTP åè®®æ¥ä½¿ç”¨ SOAP ã€‚ SOAP ä¹Ÿæ˜¯åŸºäº XMLï¼ˆæ ‡å‡†é€šç”¨æ ‡è®°è¯­è¨€ä¸‹çš„ä¸€ä¸ªå­é›†ï¼‰å’Œ XSD çš„ï¼Œ XML æ˜¯ SOAP çš„æ•°æ®ç¼–ç æ–¹å¼ã€‚</p>\n<p><strong>WSDL</strong></p>\n<p>WebService æè¿°è¯­è¨€ (WSDL) æ˜¯ä¸€ä¸ªåŸºäº XMLï¼ˆæ ‡å‡†é€šç”¨æ ‡è®°è¯­è¨€ä¸‹çš„ä¸€ä¸ªå­é›†ï¼‰çš„è¯­è¨€ï¼Œç”¨äºæè¿° WebService åŠå…¶å‡½æ•°ã€å‚æ•°å’Œè¿”å›å€¼ã€‚WSDL æ˜¯æœºå™¨å¯é˜…è¯»çš„ï¼Œä¹Ÿæ˜¯äººå¯é˜…è¯»çš„ï¼Œä¸€äº›æœ€æ–°çš„å¼€å‘å·¥å…·æ—¢èƒ½æ ¹æ®ä½ çš„ WebService ç”Ÿæˆ WSDL æ–‡æ¡£ï¼Œåˆèƒ½å¯¼å…¥ WSDL æ–‡æ¡£ï¼Œç”Ÿæˆè°ƒç”¨ç›¸åº” WebService çš„ä»£ç ã€‚</p>\n<p><strong>UDDI</strong></p>\n<blockquote>\n<p>UDDI æ˜¯ç»Ÿä¸€æè¿°ã€å‘ç°å’Œé›†æˆï¼ˆUniversal Description, Discovery, and Integrationï¼‰çš„ç¼©å†™ã€‚</p>\n<p>UDDI æ˜¯ä¸€ç§ç›®å½•æœåŠ¡ï¼Œé€šè¿‡å®ƒï¼Œä¼ä¸šå¯æ³¨å†Œå¹¶æœç´¢ WebServicesã€‚</p>\n<p>å®ƒæ˜¯ä¸€ä¸ªåŸºäº XML çš„è·¨å¹³å°çš„æè¿°è§„èŒƒï¼Œå¯ä»¥ä½¿ä¸–ç•ŒèŒƒå›´å†…çš„ä¼ä¸šåœ¨äº’è”ç½‘ä¸Šå‘å¸ƒè‡ªå·±æ‰€æä¾›çš„æœåŠ¡ã€‚</p>\n<ul>\n<li>UDDI æŒ‡é€šç”¨çš„æè¿°ã€å‘ç°ä»¥åŠæ•´åˆã€‚</li>\n<li>UDDI æ˜¯ä¸€ç§ç”¨äºå­˜å‚¨æœ‰å…³ web services çš„ä¿¡æ¯çš„ç›®å½•ã€‚</li>\n<li>UDDI æ˜¯ä¸€ç§ç”± WSDL æè¿°çš„ç½‘ç»œæœåŠ¡æ¥å£ç›®å½•ã€‚</li>\n<li>UDDI ç»ç”± SOAP è¿›è¡Œé€šè¿…ã€‚</li>\n<li>UDDI è¢«æ„å»ºäº Microsoft .NET å¹³å°ä¹‹ä¸­ã€‚</li>\n</ul>\n</blockquote>\n<h3 id=\"webservice-ä¸»æµæ¡†æ¶\"><a class=\"anchor\" href=\"#webservice-ä¸»æµæ¡†æ¶\">#</a> WebService ä¸»æµæ¡†æ¶</h3>\n<p><img data-src=\"https://img.xfc-exclave.com/2021/08/558aebcc997a48fb3675db962ffb511a1629099658.png\" alt=\"WebService ä¸»æµæ¡†æ¶\" width=\"500px\" /></p>\n<h4 id=\"axis\"><a class=\"anchor\" href=\"#axis\">#</a> AXIS</h4>\n<p>å‚è€ƒï¼š<span class=\"exturl\" data-url=\"aHR0cHM6Ly9iYWlrZS5iYWlkdS5jb20vaXRlbS94ZmlyZQ==\">axisï¼ˆé˜¿å¸•å¥‡å¯æ‰©å±•äº¤äº’ç³»ç»Ÿï¼‰_ç™¾åº¦ç™¾ç§‘</span></p>\n<ul>\n<li>AXISï¼ˆApache Extensible Interaction Systemï¼‰apache å¯æ‰©å±•äº¤äº’ç³»ç»Ÿ</li>\n<li>AXIS æ˜¯ä¸€æ¬¾å¼€æºçš„ WebService è¿è¡Œå¼•æ“ï¼Œæœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ª SOAP å¼•æ“ï¼Œæä¾›åˆ›å»ºæœåŠ¡å™¨ç«¯ã€å®¢æˆ·ç«¯å’Œç½‘å…³ SOAP æ“ä½œçš„åŸºæœ¬æ¡†æ¶ã€‚</li>\n<li>ä½† AXIS å¹¶ä¸å®Œå…¨æ˜¯ä¸€ä¸ª SOAP å¼•æ“ï¼Œå®ƒè¿˜æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ SOAP æœåŠ¡å™¨å’Œä¸€ä¸ªåµŒå…¥ Servlet å¼•æ“ï¼ˆä¾‹å¦‚ Tomcatï¼‰çš„æœåŠ¡å™¨ã€‚</li>\n<li>AXIS åˆ†ä¸º 1.x ç³»åˆ—å’Œ 2 ç³»åˆ—ï¼Œä¸¤ä¸ªç³»åˆ—ä½“ç³»ç»“æ„å’Œä½¿ç”¨ä¸Šæœ‰è¾ƒå¤§çš„åŒºåˆ«ï¼Œç›¸å¯¹è€Œè¨€ï¼ŒAxis1.x æ›´åŠ ç¨³å®šï¼Œæ–‡æ¡£ä¹Ÿæ¯”è¾ƒé½å…¨ã€‚</li>\n<li>å®˜ç½‘ï¼š<span class=\"exturl\" data-url=\"aHR0cDovL2F4aXMuYXBhY2hlLm9yZy8=\">http://axis.apache.org/</span></li>\n</ul>\n<h4 id=\"xfire\"><a class=\"anchor\" href=\"#xfire\">#</a> XFire</h4>\n<p>å‚è€ƒï¼š<span class=\"exturl\" data-url=\"aHR0cHM6Ly9iYWlrZS5iYWlkdS5jb20vaXRlbS94ZmlyZQ==\">xfire_ç™¾åº¦ç™¾ç§‘</span></p>\n<blockquote>\n<p>XFire æ˜¯æ–°ä¸€ä»£çš„ Java Web æœåŠ¡å¼•æ“ï¼ŒXFire ä½¿å¾—åœ¨ JavaEE åº”ç”¨ä¸­å‘å¸ƒ Web æœåŠ¡å˜å¾—è½»è€Œæ˜“ä¸¾ã€‚å’Œå…¶ä»– Web æœåŠ¡å¼•æ“ç›¸æ¯”ï¼ŒXFire çš„é…ç½®éå¸¸ç®€å•ï¼Œå¯ä»¥éå¸¸å®¹æ˜“åœ°å’Œ Spring é›†æˆï¼Œå®ƒä½¿å¾— Java å¼€å‘äººå‘˜ç»ˆäºå¯ä»¥è·å¾—å’Œ.Net å¼€å‘äººå‘˜ä¸€æ ·çš„å¼€å‘æ•ˆç‡ã€‚</p>\n<p>æ”¯æŒå°† Web æœåŠ¡ç»‘å®šåˆ° POJOã€XMLBeansã€JAXB1.1ã€JAXB2.0 å’Œ Castorï¼›</p>\n<p>æ”¯æŒåŸºäº HTTPã€JMSã€XMPP ç­‰å¤šç§åè®®è®¿é—® Web æœåŠ¡ï¼›</p>\n<p>æ”¯æŒå¤šç§ Web æœåŠ¡ä¸šç•Œé‡è¦æ ‡å‡†å¦‚ SOAPã€WSDLã€Web æœåŠ¡å¯»å€ï¼ˆWS-Addressingï¼‰ã€Web æœåŠ¡å®‰å…¨ï¼ˆWS-Securityï¼‰ç­‰ï¼›</p>\n<p>æ”¯æŒ JSR181ï¼Œå¯ä»¥é€šè¿‡ JDK5 é…ç½® Web æœåŠ¡ï¼›</p>\n<p>é«˜æ€§èƒ½çš„ SOAP å®ç°ï¼›</p>\n<p>æœåŠ¡å™¨ç«¯ã€å®¢æˆ·ç«¯ä»£ç è¾…åŠ©ç”Ÿæˆï¼›</p>\n<p>å¯¹ Springã€Picoã€Plexus ç­‰é¡¹ç›®çš„æ”¯æŒç­‰ã€‚</p>\n</blockquote>\n<ul>\n<li>å®˜ç½‘ï¼š<span class=\"exturl\" data-url=\"aHR0cDovL3hmaXJlLmNvZGVoYXVzLm9yZy8=\">http://xfire.codehaus.org/</span></li>\n</ul>\n<h4 id=\"cxf\"><a class=\"anchor\" href=\"#cxf\">#</a> CXF</h4>\n<p>å‚è€ƒï¼š<span class=\"exturl\" data-url=\"aHR0cHM6Ly9iYWlrZS5iYWlkdS5jb20vaXRlbS9DWEY=\">CXF_ç™¾åº¦ç™¾ç§‘</span></p>\n<ul>\n<li>Apache CXF = Celtix + XFire</li>\n<li>CXF ç»§æ‰¿äº† Celtix å’Œ XFire ä¸¤å¤§å¼€æºé¡¹ç›®çš„ç²¾åï¼Œæä¾›äº†å¯¹ JAX-WS å…¨é¢çš„æ”¯æŒï¼Œå¹¶ä¸”æä¾›äº†å¤šç§ Binding ã€DataBindingã€Transport ä»¥åŠå„ç§ Format çš„æ”¯æŒï¼Œå¹¶ä¸”å¯ä»¥æ ¹æ®å®é™…é¡¹ç›®çš„éœ€è¦ï¼Œé‡‡ç”¨ä»£ç ä¼˜å…ˆï¼ˆCode Firstï¼‰æˆ–è€… WSDL ä¼˜å…ˆï¼ˆWSDL Firstï¼‰æ¥è½»æ¾åœ°å®ç° Web Services çš„å‘å¸ƒå’Œä½¿ç”¨ã€‚</li>\n<li>å®˜ç½‘ï¼š<span class=\"exturl\" data-url=\"aHR0cDovL2N4Zi5hcGFjaGUub3JnLw==\">http://cxf.apache.org/</span></li>\n</ul>\n<h3 id=\"æ¡ˆä¾‹\"><a class=\"anchor\" href=\"#æ¡ˆä¾‹\">#</a> æ¡ˆä¾‹</h3>\n<h4 id=\"cxf-æ¡ˆä¾‹\"><a class=\"anchor\" href=\"#cxf-æ¡ˆä¾‹\">#</a> CXF æ¡ˆä¾‹</h4>\n<ul>\n<li>\n<p>åˆ›å»º maven é¡¹ç›®ã€‚</p>\n</li>\n<li>\n<p>æ·»åŠ ä¾èµ–ï¼š</p>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>org.springframework.boot<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>spring-boot-starter<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\">&lt;!-- https://mvnrepository.com/artifact/org.apache.cxf/cxf-rt-frontend-jaxws --></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>org.apache.cxf<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>cxf-rt-frontend-jaxws<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>version</span><span class=\"token punctuation\">></span></span>3.2.7<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>version</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token comment\">&lt;!-- https://mvnrepository.com/artifact/org.apache.cxf/cxf-rt-transports-http-jetty --></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>org.apache.cxf<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>cxf-rt-transports-http-jetty<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>version</span><span class=\"token punctuation\">></span></span>3.2.7<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>version</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure></li>\n<li>\n<p>åˆ›å»ºå®ä½“å¯¹è±¡</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc<span class=\"token punctuation\">.</span>cxftest<span class=\"token punctuation\">.</span>demo</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">User</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> name<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> description<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token comment\">// getter and setter</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure></li>\n<li>\n<p>åˆ›å»º WebService æ¥å£åŠå®ç°</p>\n<p>HelloWorld.java</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc<span class=\"token punctuation\">.</span>cxftest<span class=\"token punctuation\">.</span>demo</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">List</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">javax<span class=\"token punctuation\">.</span>jws<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">WebParam</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">javax<span class=\"token punctuation\">.</span>jws<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">WebService</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token annotation punctuation\">@WebService</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">HelloWorld</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token class-name\">String</span> <span class=\"token function\">sayHi</span><span class=\"token punctuation\">(</span><span class=\"token annotation punctuation\">@WebParam</span><span class=\"token punctuation\">(</span>name <span class=\"token operator\">=</span> <span class=\"token string\">\"text\"</span><span class=\"token punctuation\">)</span> <span class=\"token class-name\">String</span> text<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token class-name\">String</span> <span class=\"token function\">sayHiToUser</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">User</span> user<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token class-name\">SayHiToUserList</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">User</span><span class=\"token punctuation\">></span></span> userList<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>HelloWorldImpl.java</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc<span class=\"token punctuation\">.</span>cxftest<span class=\"token punctuation\">.</span>demo</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">LinkedHashMap</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">List</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Map</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">javax<span class=\"token punctuation\">.</span>jws<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">WebService</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token annotation punctuation\">@WebService</span><span class=\"token punctuation\">(</span>endpointInterface <span class=\"token operator\">=</span> <span class=\"token string\">\"com.xfc.cxftest.demo.HelloWorld\"</span><span class=\"token punctuation\">,</span> serviceName <span class=\"token operator\">=</span> <span class=\"token string\">\"HelloWorld\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">HelloWorldImpl</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">HelloWorld</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token class-name\">Map</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Integer</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">User</span><span class=\"token punctuation\">></span></span> users <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">LinkedHashMap</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">sayHi</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> text<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token string\">\"Hello \"</span> <span class=\"token operator\">+</span> text<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">sayHiToUser</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">User</span> user<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        users<span class=\"token punctuation\">.</span><span class=\"token function\">put</span><span class=\"token punctuation\">(</span>users<span class=\"token punctuation\">.</span><span class=\"token function\">size</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> user<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token string\">\"Hello \"</span> <span class=\"token operator\">+</span> user<span class=\"token punctuation\">.</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token class-name\">SayHiToUserList</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">User</span><span class=\"token punctuation\">></span></span> userList<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>        <span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> result <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span>userList<span class=\"token punctuation\">.</span><span class=\"token function\">size</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>        <span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">User</span> u <span class=\"token operator\">:</span> userList<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>            result<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"Hello \"</span> <span class=\"token operator\">+</span> u<span class=\"token punctuation\">.</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>            i<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>        <span class=\"token keyword\">return</span> result<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure></li>\n<li>\n<p>åˆ›å»ºæœåŠ¡ç«¯å¯åŠ¨ç±»</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc<span class=\"token punctuation\">.</span>cxftest<span class=\"token punctuation\">.</span>demo</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">javax<span class=\"token punctuation\">.</span>xml<span class=\"token punctuation\">.</span>ws<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Endpoint</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">WebServiceApp</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"web service start\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token class-name\">HelloWorldImpl</span> implementor <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">HelloWorldImpl</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token class-name\">String</span> address <span class=\"token operator\">=</span> <span class=\"token string\">\"http://localhost:8080/helloWorld\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token class-name\">Endpoint</span><span class=\"token punctuation\">.</span><span class=\"token function\">publish</span><span class=\"token punctuation\">(</span>address<span class=\"token punctuation\">,</span> implementor<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"web service started\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure></li>\n<li>\n<p>æµè§ˆå™¨è®¿é—®</p>\n<p>å¯åŠ¨  <code>WebServiceApp.main()</code>  å¹¶åœ¨æµè§ˆå™¨è®¿é—® <span class=\"exturl\" data-url=\"aHR0cDovL2xvY2FsaG9zdDo4MDgwL2hlbGxvV29ybGQ/d3NkbA==\">http://localhost:8080/helloWorld?wsdl</span> æŸ¥çœ‹æ˜¯å¦æ˜¾ç¤º wsdl ã€‚</p>\n</li>\n<li>\n<p>åˆ›å»ºå®¢æˆ·ç«¯å¯åŠ¨ç±»</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc<span class=\"token punctuation\">.</span>cxftest<span class=\"token punctuation\">.</span>demo</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>apache<span class=\"token punctuation\">.</span>cxf<span class=\"token punctuation\">.</span>jaxws<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">JaxWsProxyFactoryBean</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">HelloWorldClient</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token class-name\">JaxWsProxyFactoryBean</span> svr <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">JaxWsProxyFactoryBean</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        svr<span class=\"token punctuation\">.</span><span class=\"token function\">setServiceClass</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">HelloWorld</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        svr<span class=\"token punctuation\">.</span><span class=\"token function\">setAddress</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"http://localhost:8080/helloWorld\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token class-name\">HelloWorld</span> hw <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">HelloWorld</span><span class=\"token punctuation\">)</span> svr<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token class-name\">User</span> user <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">User</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        user<span class=\"token punctuation\">.</span><span class=\"token function\">setName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Tony\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        user<span class=\"token punctuation\">.</span><span class=\"token function\">setDescription</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"test\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>hw<span class=\"token punctuation\">.</span><span class=\"token function\">sayHiToUser</span><span class=\"token punctuation\">(</span>user<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>å¯åŠ¨  <code>HelloWorldClient.main()</code>  å¹¶æŸ¥çœ‹æ§åˆ¶å°æ‰“å°ä¿¡æ¯ã€‚</p>\n</li>\n</ul>\n<h3 id=\"soap-åè®®-tcpipmoniter-ç›‘æ§\"><a class=\"anchor\" href=\"#soap-åè®®-tcpipmoniter-ç›‘æ§\">#</a> Soap åè®® + TCP/IPMoniter ç›‘æ§</h3>\n<h4 id=\"soap-å®šä¹‰\"><a class=\"anchor\" href=\"#soap-å®šä¹‰\">#</a> SOAP å®šä¹‰</h4>\n<p>å‚è€ƒï¼š<span class=\"exturl\" data-url=\"aHR0cHM6Ly9iYWlrZS5iYWlkdS5jb20vaXRlbS8lRTclQUUlODAlRTUlOEQlOTUlRTUlQUYlQjklRTglQjElQTElRTglQUUlQkYlRTklOTclQUUlRTUlOEQlOEYlRTglQUUlQUU=\">ç®€å•å¯¹è±¡è®¿é—®åè®®_ç™¾åº¦ç™¾ç§‘</span></p>\n<blockquote>\n<p>ç®€å•å¯¹è±¡è®¿é—®åè®®æ˜¯äº¤æ¢æ•°æ®çš„ä¸€ç§åè®®è§„èŒƒï¼Œæ˜¯ä¸€ç§è½»é‡çš„ã€ç®€å•çš„ã€åŸºäº XMLï¼ˆæ ‡å‡†é€šç”¨æ ‡è®°è¯­è¨€ä¸‹çš„ä¸€ä¸ªå­é›†ï¼‰çš„åè®®ï¼Œå®ƒè¢«è®¾è®¡æˆåœ¨ WEB ä¸Šäº¤æ¢ç»“æ„åŒ–çš„å’Œå›ºåŒ–çš„ä¿¡æ¯ã€‚</p>\n</blockquote>\n<h4 id=\"soap-åè®®ç»„æˆ\"><a class=\"anchor\" href=\"#soap-åè®®ç»„æˆ\">#</a> SOAP åè®®ç»„æˆ</h4>\n<p>ä¸€æ¡ SOAP æ¶ˆæ¯å°±æ˜¯ä¸€ä¸ªæ™®é€šçš„ XML æ–‡æ¡£ï¼Œå®ƒåŒ…å«ä¸‹åˆ—å…ƒç´ ï¼š</p>\n<ul>\n<li>Envelope å…ƒç´ ï¼Œå¿…æœ‰ï¼Œå¯æŠŠæ­¤ XML æ–‡æ¡£æ ‡è¯†ä¸ºä¸€æ¡ SOAP æ¶ˆæ¯ã€‚</li>\n<li>Header å…ƒç´ ï¼Œå¯é€‰ï¼ŒåŒ…å«å¤´éƒ¨ä¿¡æ¯ã€‚</li>\n<li>Body å…ƒç´ ï¼Œå¿…æœ‰ï¼ŒåŒ…å«æ‰€æœ‰çš„è°ƒç”¨å’Œå“åº”ä¿¡æ¯ã€‚</li>\n<li>Fault å…ƒç´ ï¼Œå¯é€‰ï¼Œæä¾›æœ‰å…³åœ¨å¤„ç†æ­¤æ¶ˆæ¯æ‰€å‘ç”Ÿé”™è¯¯çš„ä¿¡æ¯ã€‚</li>\n</ul>\n<p><strong>è¯­æ³•è§„åˆ™ï¼š</strong></p>\n<ul>\n<li>SOAP æ¶ˆæ¯å¿…é¡»ç”¨ XML æ¥ç¼–ç </li>\n<li>SOAP æ¶ˆæ¯å¿…é¡»ä½¿ç”¨ SOAP Envelope å‘½åç©ºé—´</li>\n<li>SOAP æ¶ˆæ¯å¿…é¡»ä½¿ç”¨ SOAP Encoding å‘½åç©ºé—´</li>\n<li>SOAP æ¶ˆæ¯ä¸èƒ½åŒ…å« DTD å¼•ç”¨</li>\n<li>SOAP æ¶ˆæ¯ä¸èƒ½åŒ…å« XML å¤„ç†æŒ‡ä»¤</li>\n</ul>\n<p><strong>SOAP æ¶ˆæ¯åŸºæœ¬ç»“æ„ï¼š</strong></p>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token prolog\">&lt;?xml version=\"1.0\"?></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">soap:</span>Envelope</span> <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>soap</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.w3.org/2001/12/soap-envelope<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\"><span class=\"token namespace\">soap:</span>encodingStyle</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.w3.org/2001/12/soap-encoding<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">soap:</span>Header</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token comment\">&lt;!-- ç¤ºä¾‹ --></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token namespace\">soap:</span>Header</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">soap:</span>Body</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token comment\">&lt;!-- ç¤ºä¾‹ --></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">soap:</span>Fault</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>            <span class=\"token comment\">&lt;!-- ç¤ºä¾‹ --></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token namespace\">soap:</span>Fault</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token namespace\">soap:</span>Body</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token namespace\">soap:</span>Envelope</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><h3 id=\"wsdl-æ–‡ä»¶è§£æ\"><a class=\"anchor\" href=\"#wsdl-æ–‡ä»¶è§£æ\">#</a> WSDL æ–‡ä»¶è§£æ</h3>\n<h4 id=\"wsdl-æŠ¥æ–‡ç»“æ„\"><a class=\"anchor\" href=\"#wsdl-æŠ¥æ–‡ç»“æ„\">#</a> WSDL æŠ¥æ–‡ç»“æ„</h4>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>definitions</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>types</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>\t  \t<span class=\"token comment\">&lt;!-- å®šä¹‰ web service ä½¿ç”¨çš„æ•°æ®ç±»å‹ --></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>types</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>message</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token comment\">&lt;!-- æ¯ä¸ªæ¶ˆæ¯å‡ç”±ä¸€ä¸ªæˆ–å¤šä¸ªéƒ¨ä»¶ç»„æˆã€‚å¯ä»¥æŠŠå®ƒå½“åš java ä¸­ä¸€ä¸ªå‡½æ•°è°ƒç”¨çš„å‚æ•°ã€‚ --></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>message</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>portType</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token comment\">&lt;!-- å®ƒç±»ä¼¼ Java ä¸­çš„ä¸€ä¸ªå‡½æ•°åº“ï¼ˆæˆ–ä¸€ä¸ªæ¨¡å—ã€æˆ–ä¸€ä¸ªç±»ï¼‰ --></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>portType</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>binding</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token comment\">&lt;!-- ä¸ºæ¯ä¸ªç«¯å£å®šä¹‰æ¶ˆæ¯æ ¼å¼å’Œåè®®ç»†èŠ‚ã€‚ --></span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>binding</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>definitions</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><h4 id=\"wsdldefinitions\"><a class=\"anchor\" href=\"#wsdldefinitions\">#</a> wsdl:definitions</h4>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">wsdl:</span>definitions</span> <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>xsd</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.w3.org/2001/XMLSchema<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>wsdl</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://schemas.xmlsoap.org/wsdl/<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>tns</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://demo.cxftest.xfc.com/<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>soap</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://schemas.xmlsoap.org/wsdl/soap/<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>ns1</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://schemas.xmlsoap.org/soap/http<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>HelloWorld<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">targetNamespace</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://demo.cxftest.xfc.com/<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token namespace\">wsdl:</span>definitions</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><table>\n<thead>\n<tr>\n<th style=\"text-align:left\">æ ‡ç­¾</th>\n<th style=\"text-align:left\">æè¿°</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">name</td>\n<td style=\"text-align:left\">æˆ‘ä»¬ java ç¨‹åºä¸­æœåŠ¡æ¥å£çš„å®ç°ç±»ï¼ŒSEI å®šä¹‰æ˜¯ï¼šæœåŠ¡æ¥å£ç±» + Service åç¼€ï¼ŒService è‡ªåŠ¨è¿½åŠ </td>\n</tr>\n<tr>\n<td style=\"text-align:left\">targetNamespace</td>\n<td style=\"text-align:left\">å‘½åç©ºé—´ï¼š ç›¸å½“äº Java é‡Œé¢çš„ package å®ƒåˆšå¥½æ˜¯å’Œæˆ‘ä»¬ Java å®šä¹‰ä¸­çš„åŒ…åç›¸å</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">xmlns:tns</td>\n<td style=\"text-align:left\">ç›¸å½“äº Java é‡Œé¢çš„ importï¼Œ åŒ…ååè½¬</td>\n</tr>\n</tbody>\n</table>\n<h4 id=\"wsdltypes\"><a class=\"anchor\" href=\"#wsdltypes\">#</a> wsdl:types</h4>\n<p>ç”¨äºå®šä¹‰åœ¨ java æœåŠ¡æ¥å£ä¸­å¯¹åº”æ–¹æ³•çš„è¾“å…¥å‚æ•°åŠè¿”å›å€¼ç±»å‹ã€‚</p>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">wsdl:</span>types</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">xs:</span>schema</span> <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>xs</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.w3.org/2001/XMLSchema<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>tns</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://demo.cxftest.xfc.com/<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">elementFormDefault</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>unqualified<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">targetNamespace</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://demo.cxftest.xfc.com/<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">version</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>1.0<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">xs:</span>element</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>SayHiToUserList<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>tns:SayHiToUserList<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">xs:</span>element</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>SayHiToUserListResponse<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>tns:SayHiToUserListResponse<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">xs:</span>element</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>sayHi<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>tns:sayHi<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">xs:</span>element</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>sayHiResponse<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>tns:sayHiResponse<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">xs:</span>element</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>sayHiToUser<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>tns:sayHiToUser<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">xs:</span>element</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>sayHiToUserResponse<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>tns:sayHiToUserResponse<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">xs:</span>complexType</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>sayHiToUser<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">xs:</span>sequence</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">xs:</span>element</span> <span class=\"token attr-name\">minOccurs</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>0<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>arg0<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>tns:user<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token namespace\">xs:</span>sequence</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token namespace\">xs:</span>complexType</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">xs:</span>complexType</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>user<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">xs:</span>sequence</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">xs:</span>element</span> <span class=\"token attr-name\">minOccurs</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>0<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>description<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>xs:string<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">xs:</span>element</span> <span class=\"token attr-name\">minOccurs</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>0<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>name<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>xs:string<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token namespace\">xs:</span>sequence</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token namespace\">xs:</span>complexType</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">xs:</span>complexType</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>sayHiToUserResponse<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token namespace\">xs:</span>schema</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token namespace\">wsdl:</span>types</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><h4 id=\"wsdlmessage\"><a class=\"anchor\" href=\"#wsdlmessage\">#</a> wsdl:message</h4>\n<p>å®ƒè¿°äº† Web æœåŠ¡ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…ä¹‹é—´äº¤æ¢çš„æ•°æ®ã€‚</p>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">wsdl:</span>message</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>sayHiToUser<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">wsdl:</span>part</span> <span class=\"token attr-name\">element</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>tns:sayHiToUser<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parameters<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token namespace\">wsdl:</span>part</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token namespace\">wsdl:</span>message</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">wsdl:</span>message</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>sayHiToUserResponse<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">wsdl:</span>part</span> <span class=\"token attr-name\">element</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>tns:sayHiToUserResponse<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>parameters<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token namespace\">wsdl:</span>part</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token namespace\">wsdl:</span>message</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><ul>\n<li>\n<p>æ¯ä¸ª Web æœåŠ¡éƒ½æœ‰ä¸¤æ¡æ¶ˆæ¯ï¼šè¾“å…¥å’Œè¾“å‡ºã€‚</p>\n</li>\n<li>\n<p>è¾“å…¥æè¿° Web æœåŠ¡çš„å‚æ•°ï¼Œè¾“å‡ºæè¿° Web æœåŠ¡çš„è¿”å›æ•°æ®ã€‚</p>\n</li>\n<li>\n<p>æ¯æ¡æ¶ˆæ¯åŒ…å«é›¶ä¸ªæˆ–å¤šä¸ª  <code>&lt;part&gt;</code>  å‚æ•°ï¼Œæ¯ä¸ªå‚æ•°å¯¹åº”ä¸€ä¸ª Web æœåŠ¡å‡½æ•°çš„å‚æ•°ã€‚</p>\n</li>\n<li>\n<p>æ¯ä¸ª  <code>&lt;part&gt;</code>  å‚æ•°ä¸  <code>&lt;types&gt;</code>  å®¹å™¨å…ƒç´ ä¸­å®šä¹‰çš„å…·ä½“ç±»å‹ç›¸å…³è”ã€‚</p>\n</li>\n</ul>\n<h4 id=\"wsdlporttype\"><a class=\"anchor\" href=\"#wsdlporttype\">#</a> wsdl:portType</h4>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">wsdl:</span>portType</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>HelloWorld<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">wsdl:</span>operation</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>sayHiToUser<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">wsdl:</span>input</span> <span class=\"token attr-name\">message</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>tns:sayHiToUser<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>sayHiToUser<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token namespace\">wsdl:</span>input</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">wsdl:</span>output</span> <span class=\"token attr-name\">message</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>tns:sayHiToUserResponse<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>sayHiToUserResponse<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token namespace\">wsdl:</span>output</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token namespace\">wsdl:</span>operation</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token namespace\">wsdl:</span>portType</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p>portType ç›¸å½“äºåœ¨ java ä¸­å®šä¹‰çš„æ¥å£ï¼Œoperation ç›¸å½“äºåœ¨ java æ¥å£ä¸­å®šä¹‰çš„æ–¹æ³•ã€‚</p>\n<h4 id=\"wsdlbinding\"><a class=\"anchor\" href=\"#wsdlbinding\">#</a> wsdl:binding</h4>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">wsdl:</span>binding</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>HelloWorldSoapBinding<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>tns:HelloWorld<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">soap:</span>binding</span> <span class=\"token attr-name\">style</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>document<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">transport</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://schemas.xmlsoap.org/soap/http<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">wsdl:</span>operation</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>sayHiToUser<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">soap:</span>operation</span> <span class=\"token attr-name\">soapAction</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">style</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>document<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">wsdl:</span>input</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>sayHiToUser<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">soap:</span>body</span> <span class=\"token attr-name\">use</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>literal<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token namespace\">wsdl:</span>input</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">wsdl:</span>output</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>sayHiToUserResponse<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">soap:</span>body</span> <span class=\"token attr-name\">use</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>literal<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token namespace\">wsdl:</span>output</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token namespace\">wsdl:</span>operation</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token namespace\">wsdl:</span>binding</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p>è¯¥å…ƒç´ æä¾›äº†æœ‰å…³å¦‚ä½•é€šè¿‡çº¿è·¯ä¼ è¾“  <code>portType</code>  å®é™…æ“ä½œçš„å…·ä½“ç»†èŠ‚ã€‚</p>\n<ul>\n<li>\n<p>ç»‘å®šå¯ä»¥é€šè¿‡å¤šç§ä¼ è¾“æ–¹å¼æä¾›ï¼ŒåŒ…æ‹¬ HTTP GETï¼ŒHTTP POST æˆ– SOAPã€‚</p>\n</li>\n<li>\n<p>ç»‘å®šæä¾›äº†æœ‰å…³ç”¨äºä¼ è¾“  <code>portType</code>  æ“ä½œçš„åè®®çš„å…·ä½“ä¿¡æ¯ã€‚</p>\n</li>\n<li>\n<p>ç»‘å®šæä¾›æœåŠ¡æ‰€åœ¨çš„ä¿¡æ¯ã€‚</p>\n</li>\n<li>\n<p>å¯¹äº SOAP åè®®ï¼Œç»‘å®šæ˜¯ä½¿ç”¨  <code>&lt;soap:binding&gt;</code>  ï¼Œè¡¨ç¤ºä¼ è¾“æ˜¯åŸºäº HTTP åè®®çš„ SOAP æ¶ˆæ¯ã€‚</p>\n</li>\n<li>\n<p>å¯ä»¥ä¸ºå•ä¸ª  <code>portType</code>  æŒ‡å®šå¤šä¸ªç»‘å®šã€‚</p>\n</li>\n</ul>\n<h4 id=\"wsdlservice\"><a class=\"anchor\" href=\"#wsdlservice\">#</a> wsdl:service</h4>\n<p>å®ƒè´Ÿè´£å°†ç½‘ç»œé€šä¿¡åœ°å€èµ‹ç»™ä¸€ä¸ªå…·ä½“çš„ç»‘å®šã€‚</p>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">wsdl:</span>service</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>HelloWorld<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">wsdl:</span>port</span> <span class=\"token attr-name\">binding</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>tns:HelloWorldSoapBinding<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>HelloWorldImplPort<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">soap:</span>address</span> <span class=\"token attr-name\">location</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://localhost:8080/helloWorld<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token namespace\">wsdl:</span>port</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token namespace\">wsdl:</span>service</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p><code>port</code>  å…ƒç´ çš„ç»‘å®šå±æ€§å°†æœåŠ¡çš„åœ°å€ä¸ Web æœåŠ¡ä¸­å®šä¹‰çš„ç»‘å®šå…ƒç´ ç›¸å…³è”ã€‚</p>\n<h3 id=\"jax-ws-å·¥å…·\"><a class=\"anchor\" href=\"#jax-ws-å·¥å…·\">#</a> JAX-WS å·¥å…·</h3>\n<p>å‚è€ƒï¼š<span class=\"exturl\" data-url=\"aHR0cHM6Ly9iYWlrZS5iYWlkdS5jb20vaXRlbS9KQVgtV1M=\">JAX-WS_ç™¾åº¦ç™¾ç§‘</span></p>\n<blockquote>\n<p>JAX-WS (Java API for XML Web Services) è§„èŒƒæ˜¯ä¸€ç»„ XML web services çš„ JAVA APIï¼ŒJAX-WS å…è®¸å¼€å‘è€…å¯ä»¥é€‰æ‹© RPC-oriented æˆ–è€… message-oriented æ¥å®ç°è‡ªå·±çš„ web servicesã€‚</p>\n</blockquote>\n<p>åœ¨ä¸Šè¿°é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬å·²ç»ç”¨åˆ° JAX-WS å·¥å…·ï¼Œè¯¦è§ä»£ç å†…å®¹ã€‚</p>\n<h3 id=\"è°ƒç”¨å¤©æ°”æœåŠ¡æ¡ˆä¾‹\"><a class=\"anchor\" href=\"#è°ƒç”¨å¤©æ°”æœåŠ¡æ¡ˆä¾‹\">#</a> è°ƒç”¨å¤©æ°”æœåŠ¡æ¡ˆä¾‹</h3>\n<ol>\n<li>\n<p>æµè§ˆå™¨è®¿é—®å¤©æ°”æ¥å£</p>\n<p>è®¿é—®ï¼š<span class=\"exturl\" data-url=\"aHR0cDovL3d3dy53ZWJ4bWwuY29tLmNuL1dlYlNlcnZpY2VzL1dlYXRoZXJXZWJTZXJ2aWNlLmFzbXg/d3NkbA==\">http://www.webxml.com.cn/WebServices/WeatherWebService.asmx?wsdl</span></p>\n</li>\n<li>\n<p>ä¿å­˜å¹¶ä¿®æ”¹ wsdl</p>\n<p>æµè§ˆå™¨ CTRL+S ä¿å­˜è¯¥æ¥å£çš„ xml æ ¼å¼æ–‡ä»¶ã€‚</p>\n<p>ä½¿ç”¨ç¼–è¾‘å™¨æ‰“å¼€è¯¥æ–‡ä»¶å¹¶å…¨æ–‡æ›¿æ¢  <code>&lt;s:element ref=&quot;s:schema&quot;/&gt; &lt;s:any /&gt;</code>  ä¸º  <code>&lt;s:any minOccurs=&quot;2&quot; maxOccurs=&quot;2&quot; /&gt;</code>  ã€‚</p>\n<p>æ›¿æ¢å®Œæˆåï¼Œå°†è¯¥æ–‡ä»¶å¦å­˜ä¸º  <code>.wsdl</code>  æ ¼å¼çš„æ–‡ä»¶ï¼Œä¾‹å¦‚  <code>WeatherWebService.wsdl</code>  ï¼Œæ¨èå­˜æ”¾åˆ°é¡¹ç›® resources ç›®å½•ä¸‹ã€‚</p>\n</li>\n<li>\n<p>ç”Ÿæˆä»£ç </p>\n<p>åœ¨é¡¹ç›®  <code>src &gt; main &gt; java</code>  ç›®å½•ä¸‹æ‰§è¡Œå‘½ä»¤  <code>wsimport -s . E:\\idea-workspace\\test-weather\\src\\main\\resources\\WeatherWebService.wsdl</code>  ï¼Œå¦‚ä¸‹å›¾ï¼š</p>\n<p><img data-src=\"https://img.xfc-exclave.com/2021/10/6a203a0f0e9ef0e5c0bd15d4c298b6b31633529756.png\" alt=\"ws_weather_cmd\" /></p>\n<p>æ‰§è¡Œå®Œæˆåï¼Œè¯¥é¡¹ç›® src &gt; main &gt; java ç›®å½•ä¸‹å³ä¼šç”Ÿæˆå¤©æ°”æ¥å£ç›¸å…³æ–‡ä»¶ã€‚</p>\n</li>\n<li>\n<p>åˆ›å»ºæµ‹è¯•ç±»</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc<span class=\"token punctuation\">.</span>testweather</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">cn<span class=\"token punctuation\">.</span>com<span class=\"token punctuation\">.</span>webxml<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">ArrayOfString</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">cn<span class=\"token punctuation\">.</span>com<span class=\"token punctuation\">.</span>webxml<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">WeatherWebService</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">cn<span class=\"token punctuation\">.</span>com<span class=\"token punctuation\">.</span>webxml<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">WeatherWebServiceSoap</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">WebserviceTest</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    </pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token comment\">// ä¹Ÿå¯ä»¥ä½¿ç”¨ new WeatherWebService (url) æ­¤æ–¹æ³•å¯é‡æ–°è®¾ç½®è¯·æ±‚çš„åœ°å€ URL url=new URL (\"http://www.webxml.com.cn/WebServices/WeatherWebService.asmx?wsdl\")</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token class-name\">WeatherWebService</span> factory <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">WeatherWebService</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token class-name\">WeatherWebServiceSoap</span> weatherWebServiceSoap <span class=\"token operator\">=</span> factory<span class=\"token punctuation\">.</span><span class=\"token function\">getWeatherWebServiceSoap</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//WeatherWebServiceSoap ä¸ºè°ƒç”¨çš„å®ç°ç±»</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token class-name\">ArrayOfString</span> strArray <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        strArray <span class=\"token operator\">=</span> weatherWebServiceSoap<span class=\"token punctuation\">.</span><span class=\"token function\">getWeatherbyCityName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"æˆéƒ½\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>strArray<span class=\"token punctuation\">.</span><span class=\"token function\">getString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    </pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure></li>\n<li>\n<p>å¯åŠ¨æµ‹è¯•ç±»å¹¶æŸ¥çœ‹æ§åˆ¶å°ã€‚</p>\n<p><img data-src=\"https://img.xfc-exclave.com/2021/10/7e597fe2f9529d092827f1b61cd5cb901633529781.png\" alt=\"ws_weather_result\" /></p>\n</li>\n</ol>\n<h3 id=\"restful-web-servicesjax-rs\"><a class=\"anchor\" href=\"#restful-web-servicesjax-rs\">#</a> RESTful Web Servicesï¼ˆJAX-RSï¼‰</h3>\n<h4 id=\"å®šä¹‰\"><a class=\"anchor\" href=\"#å®šä¹‰\">#</a> å®šä¹‰</h4>\n<p>å‚è€ƒï¼š<span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuamlhbnNodS5jb20vcC8yODdmODgzNmE5ZDQ=\">ä»€ä¹ˆæ˜¯ RESTful Web Servicesï¼Ÿ</span></p>\n<blockquote>\n<p><strong>RESTful web services</strong> are built to work best on the Web. Representational State Transfer (REST) is an architectural style that specifies constraints, such as the uniform interface, that if applied to a web service induce desirable properties, such as performance, scalability, and modifiability, that enable services to work best on the Web. In the REST architectural style, data and functionality are considered resources and are accessed using <strong>Uniform Resource Identifiers (URIs)</strong>, typically links on the Web. The resources are acted upon by using a set of simple, well-defined operations. The REST architectural style constrains an architecture to a client/server architecture and is designed to use a stateless communication protocol, typically HTTP. In the REST architecture style, clients and servers exchange representations of resources by using a standardized interface and protocol.</p>\n<p>Restful web services ä¸ºçš„æ˜¯åœ¨ Web ä¸Šå·¥ä½œçš„æœ€å¥½è€Œåˆ›å»ºçš„å·¥å…·ã€‚Representational State Transfer (REST) æ˜¯ä¸€ç§æŒ‡å®šçº¦æŸçš„è®¾è®¡é£æ ¼ï¼Œä¾‹å¦‚ç»Ÿä¸€æ¥å£ï¼Œå®ƒå¦‚æœåº”ç”¨åˆ° webservice ä¸Šå°†å¸¦æ¥ä¸€äº›åˆé€‚çš„ç‰¹æ€§ï¼Œä¾‹å¦‚æ€§èƒ½ï¼Œå¯æ‰©å±•æ€§å’Œå¯ä¿®æ”¹æ€§ï¼Œè¿™äº›å±æ€§èƒ½å¤Ÿä½¿ services åœ¨ Web ä¸Šå·¥ä½œçš„æœ€å¥½ã€‚ä½¿ç”¨ Rest è®¾è®¡é£æ ¼ï¼Œæ•°æ®å’ŒåŠŸèƒ½éƒ½æ˜¯è¢«æ…é‡è€ƒè™‘è¿‡çš„èµ„æºå¹¶ä¸”æ˜¯é€šè¿‡ Uniform Resource Identifiers (URIs) æ¥è®¿é—®çš„ã€‚å°±åƒåœ¨ Web ä¸Šçš„é“¾æ¥ã€‚è¿™äº›èµ„æºæ˜¯æŒ‰ç…§ä¸€äº›ç®€å•å¹¶å¾ˆå¥½å®šä¹‰çš„çš„æ“ä½œæ¥é‡‡å–è¡ŒåŠ¨çš„ã€‚Rest è®¾è®¡é£æ ¼çº¦æŸå®¢æˆ·ç«¯ / æœåŠ¡ç«¯ç»Ÿä¸€ç”¨ä¸€ç§æ ·å¼å¹¶ä¸”è¢«è®¾è®¡æˆç”¨ä¸€ç§æ— çŠ¶æ€çš„é€šä¿¡åè®®ï¼Œä¾‹å¦‚ HTTPã€‚åœ¨ Rest çš„é£æ ¼ä¸­ï¼Œå®¢æˆ·å’ŒæœåŠ¡ç«¯çš„äº¤æ¢ä»£è¡¨èµ„æºç”¨éƒ½åœ¨ç”¨æ ‡å‡†çš„æ¥å£å’Œåè®®ã€‚</p>\n</blockquote>\n<h4 id=\"jax-rså¸¸ç”¨æ³¨è§£\"><a class=\"anchor\" href=\"#jax-rså¸¸ç”¨æ³¨è§£\">#</a> JAX-RS å¸¸ç”¨æ³¨è§£</h4>\n<ul>\n<li>@Pathï¼Œæ ‡æ³¨èµ„æºç±»æˆ–è€…æ–¹æ³•çš„ç›¸å¯¹è·¯å¾„ã€‚</li>\n<li>@GETï¼Œ@PUTï¼Œ@POSTï¼Œ@DELETEï¼Œæ ‡æ³¨æ–¹æ³•æ˜¯ HTTP è¯·æ±‚çš„ç±»å‹ã€‚</li>\n<li>@Producesï¼Œæ ‡æ³¨è¿”å›çš„ MIME åª’ä½“ç±»å‹ã€‚</li>\n<li>@Consumesï¼Œæ ‡æ³¨å¯æ¥å—è¯·æ±‚çš„ MIME åª’ä½“ç±»å‹ã€‚</li>\n<li>@PathParamï¼Œ@QueryParamï¼Œ@HeaderParamï¼Œ@CookieParamï¼Œ@MatrixParamï¼Œ@FormParamï¼Œåˆ†åˆ«æ ‡æ³¨æ–¹æ³•çš„å‚æ•°æ¥è‡ªäº HTTP è¯·æ±‚çš„ä¸åŒä½ç½®ã€‚</li>\n</ul>\n<h4 id=\"ä½¿ç”¨æ¡ˆä¾‹\"><a class=\"anchor\" href=\"#ä½¿ç”¨æ¡ˆä¾‹\">#</a> ä½¿ç”¨æ¡ˆä¾‹</h4>\n<h5 id=\"åˆ›å»ºæœåŠ¡\"><a class=\"anchor\" href=\"#åˆ›å»ºæœåŠ¡\">#</a> åˆ›å»ºæœåŠ¡</h5>\n<ul>\n<li>\n<p>pom.xml</p>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>org.springframework.boot<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>spring-boot-starter<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\">&lt;!-- https://mvnrepository.com/artifact/org.apache.cxf/cxf-rt-frontend-jaxrs --></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>org.apache.cxf<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>cxf-rt-frontend-jaxrs<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>version</span><span class=\"token punctuation\">></span></span>3.2.7<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>version</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token comment\">&lt;!-- https://mvnrepository.com/artifact/org.apache.cxf/cxf-rt-transports-http-jetty --></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>org.apache.cxf<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>cxf-rt-transports-http-jetty<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>version</span><span class=\"token punctuation\">></span></span>3.2.7<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>version</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token comment\">&lt;!-- æ²¡æœ‰è¿™ä¸¤ä¸ªä¾èµ–ä¼šï¼šNo message body writer has been found for class com.hgx.web.service.restful.bean.Student, ContentType: application/json--></span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token comment\">&lt;!-- https://mvnrepository.com/artifact/org.apache.cxf/cxf-rt-rs-extension-providers --></span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>org.apache.cxf<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>cxf-rt-rs-extension-providers<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>version</span><span class=\"token punctuation\">></span></span>3.2.7<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>version</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre><span class=\"token comment\">&lt;!-- https://mvnrepository.com/artifact/org.codehaus.jettison/jettison --></span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>org.codehaus.jettison<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>jettison<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>version</span><span class=\"token punctuation\">></span></span>1.4.0<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>version</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure></li>\n<li>\n<p>Student.java</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc<span class=\"token punctuation\">.</span>jaxrs<span class=\"token punctuation\">.</span>entity</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">javax<span class=\"token punctuation\">.</span>ws<span class=\"token punctuation\">.</span>rs<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">FormParam</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">javax<span class=\"token punctuation\">.</span>xml<span class=\"token punctuation\">.</span>bind<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">XmlRootElement</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Date</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token annotation punctuation\">@XmlRootElement</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Student</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token annotation punctuation\">@FormParam</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"number\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Integer</span> number<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token annotation punctuation\">@FormParam</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"name\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> name<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token annotation punctuation\">@FormParam</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"age\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Integer</span> age<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token annotation punctuation\">@FormParam</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"birth\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Date</span> birth<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Student</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Student</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Integer</span> number<span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span> name<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Integer</span> age<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Date</span> birth<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>number <span class=\"token operator\">=</span> number<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> name<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>age <span class=\"token operator\">=</span> age<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>birth <span class=\"token operator\">=</span> birth<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Integer</span> <span class=\"token function\">getNumber</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>        <span class=\"token keyword\">return</span> number<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">setNumber</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Integer</span> number<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>number <span class=\"token operator\">=</span> number<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>        <span class=\"token keyword\">return</span> name<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">setName</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> name<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre>        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> name<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre></pre></td></tr><tr><td data-num=\"48\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Integer</span> <span class=\"token function\">getAge</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre>        <span class=\"token keyword\">return</span> age<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"51\"></td><td><pre></pre></td></tr><tr><td data-num=\"52\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">setAge</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Integer</span> age<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"53\"></td><td><pre>        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>age <span class=\"token operator\">=</span> age<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"54\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"55\"></td><td><pre></pre></td></tr><tr><td data-num=\"56\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Date</span> <span class=\"token function\">getBirth</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"57\"></td><td><pre>        <span class=\"token keyword\">return</span> birth<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"58\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"59\"></td><td><pre></pre></td></tr><tr><td data-num=\"60\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">setBirth</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Date</span> birth<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"61\"></td><td><pre>        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>birth <span class=\"token operator\">=</span> birth<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"62\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"63\"></td><td><pre></pre></td></tr><tr><td data-num=\"64\"></td><td><pre>    <span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"65\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"66\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token string\">\"Student&#123;\"</span> <span class=\"token operator\">+</span></pre></td></tr><tr><td data-num=\"67\"></td><td><pre>                <span class=\"token string\">\"number=\"</span> <span class=\"token operator\">+</span> number <span class=\"token operator\">+</span></pre></td></tr><tr><td data-num=\"68\"></td><td><pre>                <span class=\"token string\">\", name='\"</span> <span class=\"token operator\">+</span> name <span class=\"token operator\">+</span> <span class=\"token string\">'\\''</span> <span class=\"token operator\">+</span></pre></td></tr><tr><td data-num=\"69\"></td><td><pre>                <span class=\"token string\">\", age=\"</span> <span class=\"token operator\">+</span> age <span class=\"token operator\">+</span></pre></td></tr><tr><td data-num=\"70\"></td><td><pre>                <span class=\"token string\">\", birth=\"</span> <span class=\"token operator\">+</span> birth <span class=\"token operator\">+</span></pre></td></tr><tr><td data-num=\"71\"></td><td><pre>                <span class=\"token string\">'&#125;'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"72\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"73\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure></li>\n<li>\n<p>StudentServer.java</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc<span class=\"token punctuation\">.</span>jaxrs<span class=\"token punctuation\">.</span>server</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc<span class=\"token punctuation\">.</span>jaxrs<span class=\"token punctuation\">.</span>entity<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Student</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">javax<span class=\"token punctuation\">.</span>ws<span class=\"token punctuation\">.</span>rs<span class=\"token punctuation\">.</span></span><span class=\"token operator\">*</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">javax<span class=\"token punctuation\">.</span>ws<span class=\"token punctuation\">.</span>rs<span class=\"token punctuation\">.</span>core<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">MediaType</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>sql<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Date</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>time<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Instant</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token annotation punctuation\">@Path</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/rest\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">StudentServer</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token annotation punctuation\">@GET</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token annotation punctuation\">@Path</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/student/&#123;id&#125;\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token annotation punctuation\">@Produces</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">MediaType</span><span class=\"token punctuation\">.</span>APPLICATION_JSON<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Student</span> <span class=\"token function\">getStudentById</span><span class=\"token punctuation\">(</span><span class=\"token annotation punctuation\">@PathParam</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"id\"</span><span class=\"token punctuation\">)</span> <span class=\"token class-name\">String</span> id<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Student</span><span class=\"token punctuation\">(</span><span class=\"token number\">6666</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"å¼ ä¸‰\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">20</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">.</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Instant</span><span class=\"token punctuation\">.</span><span class=\"token function\">now</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure></li>\n<li>\n<p>StudentServerMain.java</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc<span class=\"token punctuation\">.</span>jaxrs</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc<span class=\"token punctuation\">.</span>jaxrs<span class=\"token punctuation\">.</span>server<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">StudentServer</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>apache<span class=\"token punctuation\">.</span>cxf<span class=\"token punctuation\">.</span>jaxrs<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">JAXRSServerFactoryBean</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">StudentServerMain</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token class-name\">JAXRSServerFactoryBean</span> jAXRSServerFactoryBean <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">JAXRSServerFactoryBean</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        jAXRSServerFactoryBean<span class=\"token punctuation\">.</span><span class=\"token function\">setAddress</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"http://localhost:8080/studentServce\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        jAXRSServerFactoryBean<span class=\"token punctuation\">.</span><span class=\"token function\">setResourceClasses</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">StudentServer</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        jAXRSServerFactoryBean<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"student server å¯åŠ¨\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure></li>\n<li>\n<p>æ‰§è¡Œ  <code>StudentServerMain.main()</code></p>\n<p>æµè§ˆå™¨è®¿é—®ï¼š<span class=\"exturl\" data-url=\"aHR0cDovL2xvY2FsaG9zdDo4MDgwL3N0dWRlbnRTZXJ2Y2UvcmVzdC9zdHVkZW50LzEy\">http://localhost:8080/studentServce/rest/student/12</span></p>\n</li>\n</ul>\n<h5 id=\"åˆ›å»ºå®¢æˆ·ç«¯\"><a class=\"anchor\" href=\"#åˆ›å»ºå®¢æˆ·ç«¯\">#</a> åˆ›å»ºå®¢æˆ·ç«¯</h5>\n<ul number=\"222,\" name=\"'æå››',\" age=\"19,\" birth=\"Tue\" Dec=\"\" 01=\"\" 05:14:00=\"\" CST=\"\" 2020=\"\">\n<li>\n<p>å®¢æˆ·ç«¯ Get</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc<span class=\"token punctuation\">.</span>jaxrs<span class=\"token punctuation\">.</span>client</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>apache<span class=\"token punctuation\">.</span>http<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">HttpEntity</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>apache<span class=\"token punctuation\">.</span>http<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">HttpResponse</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>apache<span class=\"token punctuation\">.</span>http<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">HttpStatus</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>apache<span class=\"token punctuation\">.</span>http<span class=\"token punctuation\">.</span>client<span class=\"token punctuation\">.</span>methods<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">HttpGet</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>apache<span class=\"token punctuation\">.</span>http<span class=\"token punctuation\">.</span>impl<span class=\"token punctuation\">.</span>client<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">CloseableHttpClient</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>apache<span class=\"token punctuation\">.</span>http<span class=\"token punctuation\">.</span>impl<span class=\"token punctuation\">.</span>client<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">HttpClientBuilder</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>apache<span class=\"token punctuation\">.</span>http<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">EntityUtils</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>io<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">IOException</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">RestGetClientMain</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">IOException</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        <span class=\"token comment\">// 1. åˆ›å»º HttpClient çš„å®ä¾‹</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        <span class=\"token class-name\">CloseableHttpClient</span> httpClient <span class=\"token operator\">=</span> <span class=\"token class-name\">HttpClientBuilder</span><span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">build</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        <span class=\"token comment\">// 2. åˆ›å»ºæŸç§è¿æ¥æ–¹æ³•çš„å®ä¾‹</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        <span class=\"token class-name\">HttpGet</span> httpGet <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">HttpGet</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"http://localhost:8080/studentServce/rest/student/12\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>        <span class=\"token comment\">// 3. è°ƒç”¨ç¬¬ä¸€æ­¥ä¸­åˆ›å»ºå¥½çš„å®ä¾‹çš„ execute æ–¹æ³•æ¥æ‰§è¡Œç¬¬äºŒæ­¥ä¸­åˆ›å»ºå¥½çš„é“¾æ¥ç±»å®ä¾‹</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>        <span class=\"token class-name\">HttpResponse</span> httpResponse <span class=\"token operator\">=</span> httpClient<span class=\"token punctuation\">.</span><span class=\"token function\">execute</span><span class=\"token punctuation\">(</span>httpGet<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>        <span class=\"token comment\">// 4. è¯» response è·å– HttpEntity</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>httpResponse<span class=\"token punctuation\">.</span><span class=\"token function\">getStatusLine</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getStatusCode</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token class-name\">HttpStatus</span><span class=\"token punctuation\">.</span>SC_OK<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>            <span class=\"token class-name\">HttpEntity</span> entity <span class=\"token operator\">=</span> httpResponse<span class=\"token punctuation\">.</span><span class=\"token function\">getEntity</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>            <span class=\"token comment\">// 5. å¯¹å¾—åˆ°åçš„å†…å®¹è¿›è¡Œå¤„ç†</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>            <span class=\"token class-name\">String</span> result <span class=\"token operator\">=</span> <span class=\"token class-name\">EntityUtils</span><span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span>entity<span class=\"token punctuation\">,</span> <span class=\"token string\">\"utf-8\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"result = \"</span> <span class=\"token operator\">+</span> result<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>            <span class=\"token class-name\">EntityUtils</span><span class=\"token punctuation\">.</span><span class=\"token function\">consume</span><span class=\"token punctuation\">(</span>entity<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>err<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>httpResponse<span class=\"token punctuation\">.</span><span class=\"token function\">getStatusLine</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>        <span class=\"token comment\">// 6. é‡Šæ”¾è¿æ¥ã€‚æ— è®ºæ‰§è¡Œæ–¹æ³•æ˜¯å¦æˆåŠŸï¼Œéƒ½å¿…é¡»é‡Šæ”¾è¿æ¥</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>        httpClient<span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>æ‰§è¡Œç»“æœï¼š</p>\n<pre><code>result = &#123;&quot;student&quot;:&#123;&quot;age&quot;:20,&quot;birth&quot;:&quot;2020-11-30T15:02:47.325+08:00&quot;,&quot;name&quot;:&quot;å¼ ä¸‰&quot;,&quot;number&quot;:6666&#125;&#125;\n</code></pre>\n</li>\n<li>\n<p>å®¢æˆ·ç«¯ Post</p>\n<p>ä¿®æ”¹æœåŠ¡ç«¯ StudentServer.java</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc<span class=\"token punctuation\">.</span>jaxrs<span class=\"token punctuation\">.</span>server</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc<span class=\"token punctuation\">.</span>jaxrs<span class=\"token punctuation\">.</span>entity<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Student</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">javax<span class=\"token punctuation\">.</span>ws<span class=\"token punctuation\">.</span>rs<span class=\"token punctuation\">.</span></span><span class=\"token operator\">*</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token annotation punctuation\">@Path</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/rest\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">StudentServer</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token annotation punctuation\">@POST</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token annotation punctuation\">@Path</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/student\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token annotation punctuation\">@Consumes</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"application/x-www-form-urlencoded\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token class-name\">Student</span><span class=\"token punctuation\">(</span><span class=\"token annotation punctuation\">@BeanParam</span> <span class=\"token class-name\">Student</span> student<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token string\">\"success:\"</span> <span class=\"token operator\">+</span> student<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    </pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>åˆ›å»º Post å®¢æˆ·ç«¯</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc<span class=\"token punctuation\">.</span>jaxrs<span class=\"token punctuation\">.</span>client</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>apache<span class=\"token punctuation\">.</span>http<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">HttpEntity</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>apache<span class=\"token punctuation\">.</span>http<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">HttpResponse</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>apache<span class=\"token punctuation\">.</span>http<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">HttpStatus</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>apache<span class=\"token punctuation\">.</span>http<span class=\"token punctuation\">.</span>client<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">ClientProtocolException</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>apache<span class=\"token punctuation\">.</span>http<span class=\"token punctuation\">.</span>client<span class=\"token punctuation\">.</span>entity<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">UrlEncodedFormEntity</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>apache<span class=\"token punctuation\">.</span>http<span class=\"token punctuation\">.</span>client<span class=\"token punctuation\">.</span>methods<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">HttpPost</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>apache<span class=\"token punctuation\">.</span>http<span class=\"token punctuation\">.</span>impl<span class=\"token punctuation\">.</span>client<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">CloseableHttpClient</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>apache<span class=\"token punctuation\">.</span>http<span class=\"token punctuation\">.</span>impl<span class=\"token punctuation\">.</span>client<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">HttpClientBuilder</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>apache<span class=\"token punctuation\">.</span>http<span class=\"token punctuation\">.</span>message<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">BasicNameValuePair</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>apache<span class=\"token punctuation\">.</span>http<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">EntityUtils</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>io<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">IOException</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>time<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Instant</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">ArrayList</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Date</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">List</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token annotation punctuation\">@SuppressWarnings</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"all\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">RestPostClientMain</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">ClientProtocolException</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">IOException</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>        <span class=\"token class-name\">CloseableHttpClient</span> httpClient <span class=\"token operator\">=</span> <span class=\"token class-name\">HttpClientBuilder</span><span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">build</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>        <span class=\"token class-name\">HttpPost</span> httpPost <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">HttpPost</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"http://localhost:8080/studentServce/rest/student\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>        <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">BasicNameValuePair</span><span class=\"token punctuation\">></span></span> list <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ArrayList</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">BasicNameValuePair</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>        list<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">BasicNameValuePair</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"number\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"0222\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>        list<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">BasicNameValuePair</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"name\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"æå››\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>        list<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">BasicNameValuePair</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"age\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"19\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>        list<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">BasicNameValuePair</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"birth\"</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">.</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Instant</span><span class=\"token punctuation\">.</span><span class=\"token function\">now</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>        <span class=\"token class-name\">HttpEntity</span> httpEntity <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">UrlEncodedFormEntity</span><span class=\"token punctuation\">(</span>list<span class=\"token punctuation\">,</span> <span class=\"token string\">\"utf-8\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>        httpPost<span class=\"token punctuation\">.</span><span class=\"token function\">setEntity</span><span class=\"token punctuation\">(</span>httpEntity<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>        <span class=\"token class-name\">HttpResponse</span> httpResponse <span class=\"token operator\">=</span> httpClient<span class=\"token punctuation\">.</span><span class=\"token function\">execute</span><span class=\"token punctuation\">(</span>httpPost<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>httpResponse<span class=\"token punctuation\">.</span><span class=\"token function\">getStatusLine</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getStatusCode</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token class-name\">HttpStatus</span><span class=\"token punctuation\">.</span>SC_OK<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>            <span class=\"token class-name\">HttpEntity</span> entity <span class=\"token operator\">=</span> httpResponse<span class=\"token punctuation\">.</span><span class=\"token function\">getEntity</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>            <span class=\"token class-name\">String</span> result <span class=\"token operator\">=</span> <span class=\"token class-name\">EntityUtils</span><span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span>entity<span class=\"token punctuation\">,</span> <span class=\"token string\">\"utf-8\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"client result = \"</span> <span class=\"token operator\">+</span> result<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>            <span class=\"token class-name\">EntityUtils</span><span class=\"token punctuation\">.</span><span class=\"token function\">consume</span><span class=\"token punctuation\">(</span>entity<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>err<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>httpResponse<span class=\"token punctuation\">.</span><span class=\"token function\">getStatusLine</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>        httpClient<span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre></pre></td></tr><tr><td data-num=\"46\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>æ‰§è¡Œç»“æœï¼š</p>\n<blockquote>\n<p>client result = success:Student</p>\n</blockquote>\n</li>\n</ul>\n<h3 id=\"springæ•´åˆcxf\"><a class=\"anchor\" href=\"#springæ•´åˆcxf\">#</a> Spring æ•´åˆ CXF</h3>\n<ol>\n<li>\n<p>åˆ›å»º maven é¡¹ç›®å¹¶æ·»åŠ ä¾èµ–</p>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>org.springframework<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>spring-core<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>version</span><span class=\"token punctuation\">></span></span>5.1.3.RELEASE<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>version</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>org.springframework<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>spring-beans<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>version</span><span class=\"token punctuation\">></span></span>5.1.3.RELEASE<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>version</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>org.springframework<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>spring-tx<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>version</span><span class=\"token punctuation\">></span></span>5.1.3.RELEASE<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>version</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>org.springframework<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>spring-context<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>version</span><span class=\"token punctuation\">></span></span>4.1.7.RELEASE<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>version</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>org.springframework<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>spring-context-support<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>version</span><span class=\"token punctuation\">></span></span>5.1.3.RELEASE<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>version</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>org.springframework<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>spring-web<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>version</span><span class=\"token punctuation\">></span></span>5.1.3.RELEASE<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>version</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>org.springframework<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>spring-webmvc<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>version</span><span class=\"token punctuation\">></span></span>5.1.3.RELEASE<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>version</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>org.springframework<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>spring-aop<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>version</span><span class=\"token punctuation\">></span></span>5.1.3.RELEASE<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>version</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>org.springframework<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>spring-aspects<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>version</span><span class=\"token punctuation\">></span></span>5.1.3.RELEASE<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>version</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>org.springframework<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>spring-jdbc<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>version</span><span class=\"token punctuation\">></span></span>5.1.3.RELEASE<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>version</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"51\"></td><td><pre></pre></td></tr><tr><td data-num=\"52\"></td><td><pre><span class=\"token comment\">&lt;!-- æ·»åŠ  CXF dependency  --></span></pre></td></tr><tr><td data-num=\"53\"></td><td><pre><span class=\"token comment\">&lt;!-- https://mvnrepository.com/artifact/org.apache.cxf/cxf-rt-frontend-jaxws --></span></pre></td></tr><tr><td data-num=\"54\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"55\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>org.apache.cxf<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"56\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>cxf-rt-frontend-jaxws<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"57\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>version</span><span class=\"token punctuation\">></span></span>3.2.7<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>version</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"58\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"59\"></td><td><pre><span class=\"token comment\">&lt;!-- https://mvnrepository.com/artifact/org.apache.cxf/cxf-rt-transports-http --></span></pre></td></tr><tr><td data-num=\"60\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"61\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>org.apache.cxf<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"62\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>cxf-rt-transports-http<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"63\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>version</span><span class=\"token punctuation\">></span></span>3.2.7<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>version</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"64\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"65\"></td><td><pre><span class=\"token comment\">&lt;!-- https://mvnrepository.com/artifact/org.apache.cxf/cxf-rt-frontend-jaxrs --></span></pre></td></tr><tr><td data-num=\"66\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"67\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>org.apache.cxf<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"68\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>cxf-rt-frontend-jaxrs<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"69\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>version</span><span class=\"token punctuation\">></span></span>3.2.7<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>version</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"70\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"71\"></td><td><pre><span class=\"token comment\">&lt;!-- https://mvnrepository.com/artifact/org.apache.cxf/cxf-rt-transports-http-jetty --></span></pre></td></tr><tr><td data-num=\"72\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"73\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>org.apache.cxf<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"74\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>cxf-rt-transports-http-jetty<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"75\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>version</span><span class=\"token punctuation\">></span></span>3.2.7<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>version</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"76\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"77\"></td><td><pre></pre></td></tr><tr><td data-num=\"78\"></td><td><pre><span class=\"token comment\">&lt;!-- æ²¡æœ‰è¿™ä¸¤ä¸ªä¾èµ–ä¼šï¼šNo message body writer has been found for class com.hgx.web.service.restful.bean.Student, ContentType: application/json--></span></pre></td></tr><tr><td data-num=\"79\"></td><td><pre><span class=\"token comment\">&lt;!--https://mvnrepository.com/artifact/org.apache.cxf/cxf-rt-rs-extension-providers--></span></pre></td></tr><tr><td data-num=\"80\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"81\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>org.apache.cxf<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"82\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>cxf-rt-rs-extension-providers<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"83\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>version</span><span class=\"token punctuation\">></span></span>3.2.7<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>version</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"84\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"85\"></td><td><pre><span class=\"token comment\">&lt;!-- https://mvnrepository.com/artifact/org.codehaus.jettison/jettison --></span></pre></td></tr><tr><td data-num=\"86\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"87\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>org.codehaus.jettison<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"88\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>jettison<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"89\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>version</span><span class=\"token punctuation\">></span></span>1.4.0<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>version</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"90\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"91\"></td><td><pre></pre></td></tr><tr><td data-num=\"92\"></td><td><pre><span class=\"token comment\">&lt;!-- è§£å†³ rest é£æ ¼çš„ api æ²¡æœ‰ wadl--></span></pre></td></tr><tr><td data-num=\"93\"></td><td><pre><span class=\"token comment\">&lt;!-- https://mvnrepository.com/artifact/org.apache.cxf/cxf-rt-rs-service-description --></span></pre></td></tr><tr><td data-num=\"94\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"95\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>org.apache.cxf<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"96\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>cxf-rt-rs-service-description<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"97\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>version</span><span class=\"token punctuation\">></span></span>3.2.7<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>version</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"98\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"99\"></td><td><pre></pre></td></tr><tr><td data-num=\"100\"></td><td><pre><span class=\"token comment\">&lt;!-- https://mvnrepository.com/artifact/com.google.code.gson/gson --></span></pre></td></tr><tr><td data-num=\"101\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"102\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>com.google.code.gson<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"103\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>gson<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"104\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>version</span><span class=\"token punctuation\">></span></span>2.8.5<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>version</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"105\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure></li>\n<li>\n<p>åˆ›å»ºå®ä½“å¯¹è±¡</p>\n<p>Customer.java</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc<span class=\"token punctuation\">.</span>entity</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Customer</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> id<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> name<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token keyword\">int</span> age<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Customer</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> id<span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span> name<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> age<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>id <span class=\"token operator\">=</span> id<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> name<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>age <span class=\"token operator\">=</span> age<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    </pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token comment\">// getter and setter</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure></li>\n<li>\n<p>åˆ›å»º HelloWorld æ¥å£åŠå…¶å®ç°</p>\n<p>HelloWorld.java</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc<span class=\"token punctuation\">.</span>cxf</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">javax<span class=\"token punctuation\">.</span>jws<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">WebMethod</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">javax<span class=\"token punctuation\">.</span>jws<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">WebParam</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">javax<span class=\"token punctuation\">.</span>jws<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">WebResult</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">javax<span class=\"token punctuation\">.</span>jws<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">WebService</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token annotation punctuation\">@WebService</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">HelloWorld</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token annotation punctuation\">@WebMethod</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token annotation punctuation\">@WebResult</span><span class=\"token punctuation\">(</span>name <span class=\"token operator\">=</span> <span class=\"token string\">\"sayHelloResult\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token class-name\">String</span> <span class=\"token function\">sayHello</span><span class=\"token punctuation\">(</span><span class=\"token annotation punctuation\">@WebParam</span><span class=\"token punctuation\">(</span>name <span class=\"token operator\">=</span> <span class=\"token string\">\"userName\"</span><span class=\"token punctuation\">)</span> <span class=\"token class-name\">String</span> name<span class=\"token punctuation\">,</span> <span class=\"token annotation punctuation\">@WebParam</span><span class=\"token punctuation\">(</span>name <span class=\"token operator\">=</span> <span class=\"token string\">\"userAge\"</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">int</span> age<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>HelloWorldImpl.java</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc<span class=\"token punctuation\">.</span>cxf<span class=\"token punctuation\">.</span>impl</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc<span class=\"token punctuation\">.</span>cxf<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">HelloWorld</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">javax<span class=\"token punctuation\">.</span>jws<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">WebMethod</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">javax<span class=\"token punctuation\">.</span>jws<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">WebParam</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">javax<span class=\"token punctuation\">.</span>jws<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">WebResult</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">HelloWorldImpl</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">HelloWorld</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token annotation punctuation\">@WebMethod</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token annotation punctuation\">@WebResult</span><span class=\"token punctuation\">(</span>name <span class=\"token operator\">=</span> <span class=\"token string\">\"sayHelloResult\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">sayHello</span><span class=\"token punctuation\">(</span><span class=\"token annotation punctuation\">@WebParam</span><span class=\"token punctuation\">(</span>name <span class=\"token operator\">=</span> <span class=\"token string\">\"userName\"</span><span class=\"token punctuation\">)</span> <span class=\"token class-name\">String</span> name<span class=\"token punctuation\">,</span> <span class=\"token annotation punctuation\">@WebParam</span><span class=\"token punctuation\">(</span>name <span class=\"token operator\">=</span> <span class=\"token string\">\"userAge\"</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">int</span> age<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token string\">\"spring say hello to: \"</span> <span class=\"token operator\">+</span> name <span class=\"token operator\">+</span> <span class=\"token string\">\"\\t\"</span> <span class=\"token operator\">+</span> <span class=\"token string\">\"age: \"</span> <span class=\"token operator\">+</span> age<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure></li>\n<li>\n<p>åˆ›å»ºæœåŠ¡å¤„ç†ç±»</p>\n<p>CustomerService.java</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc<span class=\"token punctuation\">.</span>service</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>google<span class=\"token punctuation\">.</span>gson<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Gson</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc<span class=\"token punctuation\">.</span>entity<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Customer</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">javax<span class=\"token punctuation\">.</span>ws<span class=\"token punctuation\">.</span>rs<span class=\"token punctuation\">.</span></span><span class=\"token operator\">*</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token annotation punctuation\">@Path</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/crm\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">CustomerService</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token annotation punctuation\">@GET</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token annotation punctuation\">@Path</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/customer/&#123;customer_id&#125;\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token annotation punctuation\">@Produces</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"application/json\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Customer</span> <span class=\"token function\">getCustomerById</span><span class=\"token punctuation\">(</span><span class=\"token annotation punctuation\">@PathParam</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"customer_id\"</span><span class=\"token punctuation\">)</span> <span class=\"token class-name\">String</span> customer_id<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        <span class=\"token class-name\">Customer</span> customer <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Customer</span><span class=\"token punctuation\">(</span>customer_id<span class=\"token punctuation\">,</span> <span class=\"token string\">\"z3\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">18</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        <span class=\"token keyword\">return</span> customer<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token annotation punctuation\">@POST</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token annotation punctuation\">@Path</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/addcustomer\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    <span class=\"token annotation punctuation\">@Consumes</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"application/json\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    <span class=\"token annotation punctuation\">@Produces</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"application/json\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">addCustomer</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> customer_json<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>        <span class=\"token class-name\">Gson</span> gson <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Gson</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>        <span class=\"token class-name\">Customer</span> customer <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Customer</span><span class=\"token punctuation\">)</span> gson<span class=\"token punctuation\">.</span><span class=\"token function\">fromJson</span><span class=\"token punctuation\">(</span>customer_json<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Customer</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>customer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token string\">\"success:  \"</span> <span class=\"token operator\">+</span> customer<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre></pre></td></tr><tr><td data-num=\"30\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure></li>\n<li>\n<p>é…ç½® application-cxf.xml</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token operator\">&lt;</span><span class=\"token operator\">?</span>xml version<span class=\"token operator\">=</span><span class=\"token string\">\"1.0\"</span> encoding<span class=\"token operator\">=</span><span class=\"token string\">\"UTF-8\"</span><span class=\"token operator\">?</span><span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token operator\">&lt;</span>beans xmlns<span class=\"token operator\">=</span><span class=\"token string\">\"http://www.springframework.org/schema/beans\"</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>       xmlns<span class=\"token operator\">:</span>xsi<span class=\"token operator\">=</span><span class=\"token string\">\"http://www.w3.org/2001/XMLSchema-instance\"</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>       xmlns<span class=\"token operator\">:</span>jaxws<span class=\"token operator\">=</span><span class=\"token string\">\"http://cxf.apache.org/jaxws\"</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>       xmlns<span class=\"token operator\">:</span>jaxrs<span class=\"token operator\">=</span><span class=\"token string\">\"http://cxf.apache.org/jaxrs\"</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>       xsi<span class=\"token operator\">:</span>schemaLocation<span class=\"token operator\">=</span><span class=\"token string\">\"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://cxf.apache.org/jaxws http://cxf.apache.org/schemas/jaxws.xsd http://cxf.apache.org/jaxrs http://cxf.apache.org/schemas/jaxrs.xsd\"</span><span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token operator\">&lt;</span><span class=\"token keyword\">import</span> <span class=\"token namespace\">resource</span><span class=\"token operator\">=</span><span class=\"token string\">\"classpath:META-INF/cxf/cxf.xml\"</span><span class=\"token operator\">/</span><span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token operator\">&lt;</span>jaxws<span class=\"token operator\">:</span>endpoint id<span class=\"token operator\">=</span><span class=\"token string\">\"helloworld\"</span> implementor<span class=\"token operator\">=</span><span class=\"token string\">\"com.xfc.cxf.impl.HelloWorldImpl\"</span> address<span class=\"token operator\">=</span><span class=\"token string\">\"/HelloWorld\"</span><span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>jaxws<span class=\"token operator\">:</span>endpoint<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token operator\">&lt;</span>jaxrs<span class=\"token operator\">:</span>server id<span class=\"token operator\">=</span><span class=\"token string\">\"customerService\"</span> address<span class=\"token operator\">=</span><span class=\"token string\">\"/CustService\"</span><span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token operator\">&lt;</span>jaxrs<span class=\"token operator\">:</span>serviceBeans<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>            <span class=\"token operator\">&lt;</span>bean <span class=\"token keyword\">class</span><span class=\"token operator\">=</span><span class=\"token string\">\"com.xfc.service.CustomerService\"</span><span class=\"token operator\">/</span><span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>jaxrs<span class=\"token operator\">:</span>serviceBeans<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>jaxrs<span class=\"token operator\">:</span>server<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>beans<span class=\"token operator\">></span></pre></td></tr></table></figure></li>\n<li>\n<p>é…ç½® web.xml</p>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token prolog\">&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>web-app</span> <span class=\"token attr-name\">xmlns</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://xmlns.jcp.org/xml/ns/javaee<span class=\"token punctuation\">\"</span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>         <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>xsi</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.w3.org/2001/XMLSchema-instance<span class=\"token punctuation\">\"</span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>         <span class=\"token attr-name\"><span class=\"token namespace\">xsi:</span>schemaLocation</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd<span class=\"token punctuation\">\"</span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>         <span class=\"token attr-name\">version</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>3.1<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token comment\">&lt;!-- é…ç½® Spring é…ç½®æ–‡ä»¶çš„åç§°å’Œä½ç½® --></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>context-param</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>param-name</span><span class=\"token punctuation\">></span></span>contextConfigLocation<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>param-name</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>param-value</span><span class=\"token punctuation\">></span></span>classpath:application-cxf.xml<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>param-value</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>context-param</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token comment\">&lt;!-- å¯åŠ¨ IOC å®¹å™¨çš„ ServletContextListener --></span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>listener</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>listener-class</span><span class=\"token punctuation\">></span></span>org.springframework.web.context.ContextLoaderListener<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>listener-class</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>listener</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token comment\">&lt;!--webservice --></span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>servlet</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>display-name</span><span class=\"token punctuation\">></span></span>spring-cxf<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>display-name</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>servlet-name</span><span class=\"token punctuation\">></span></span>spring-cxf<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>servlet-name</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>servlet-class</span><span class=\"token punctuation\">></span></span>org.apache.cxf.transport.servlet.CXFServlet<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>servlet-class</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>servlet</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>servlet-mapping</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>servlet-name</span><span class=\"token punctuation\">></span></span>spring-cxf<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>servlet-name</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>url-pattern</span><span class=\"token punctuation\">></span></span>/*<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>url-pattern</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>servlet-mapping</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>    <span class=\"token comment\">&lt;!--webservice--></span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre></pre></td></tr><tr><td data-num=\"30\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>web-app</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure></li>\n<li>\n<p>é…ç½®å®Œæˆåé€šè¿‡ tomcat å®¹å™¨å¯åŠ¨é¡¹ç›®ã€‚</p>\n</li>\n<li>\n<p>æµè§ˆå™¨è®¿é—®ï¼š<span class=\"exturl\" data-url=\"aHR0cDovL2xvY2FsaG9zdDo4MDgwL3NwcmluZ19jeGY=\">http://localhost:8080/spring_cxf</span></p>\n<p><img data-src=\"https://img.xfc-exclave.com/2021/10/437b032113df76249e16a45b7124569b1633529804.png\" alt=\"spring_cxf_view\" /></p>\n</li>\n</ol>\n<h3 id=\"å‚è€ƒ\"><a class=\"anchor\" href=\"#å‚è€ƒ\">#</a> å‚è€ƒ</h3>\n<ul>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2hneF9zdWl5dWVzdXN1L2FydGljbGUvZGV0YWlscy84ODkxODE5Mg==\">https://blog.csdn.net/hgx_suiyuesusu/article/details/88918192</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cDovL3dzLmFwYWNoZS5vcmc=\">http://ws.apache.org</span></li>\n</ul>\n",
            "tags": [
                "è®¡ç®—æœºç§‘å­¦",
                "JAVAå­¦ä¹ è·¯çº¿",
                "è¿›é˜¶ç¯‡",
                "java",
                "WebService"
            ]
        },
        {
            "id": "https://www.chinmoku.cc/computer-science/java-learning-path/2-intermediate/springcloud-tutorial/",
            "url": "https://www.chinmoku.cc/computer-science/java-learning-path/2-intermediate/springcloud-tutorial/",
            "title": "SpringCloud æ•™ç¨‹ï¼ˆFinchley.RELEASEï¼‰",
            "date_published": "2021-08-26T01:19:24.000Z",
            "content_html": "<h2 id=\"æœåŠ¡çš„æ³¨å†Œä¸å‘ç°eureka\"><a class=\"anchor\" href=\"#æœåŠ¡çš„æ³¨å†Œä¸å‘ç°eureka\">#</a> æœåŠ¡çš„æ³¨å†Œä¸å‘ç°ï¼ˆEurekaï¼‰</h2>\n<h3 id=\"springcloudç®€ä»‹\"><a class=\"anchor\" href=\"#springcloudç®€ä»‹\">#</a> SpringCloud ç®€ä»‹</h3>\n<p>ä»¥ä¸‹ç®€ä»‹æ¥è‡ª SpringCloud å®˜ç½‘ï¼ˆ<span class=\"exturl\" data-url=\"aHR0cHM6Ly9zcHJpbmcuaW8vcHJvamVjdHMvc3ByaW5nLWNsb3VkJUVGJUJDJTg5\">https://spring.io/projects/spring-cloudï¼‰</span></p>\n<blockquote>\n<p>Spring Cloud provides tools for developers to quickly build some of the common patterns in distributed systems (e.g. configuration management, service discovery, circuit breakers, intelligent routing, micro-proxy, control bus, one-time tokens, global locks, leadership election, distributed sessions, cluster state). Coordination of distributed systems leads to boiler plate patterns, and using Spring Cloud developers can quickly stand up services and applications that implement those patterns. They will work well in any distributed environment, including the developerâ€™s own laptop, bare metal data centres, and managed platforms such as Cloud Foundry.</p>\n<p><code>quote from https://spring.io/projects/spring-cloud</code></p>\n</blockquote>\n<blockquote>\n<p>Spring Cloud ä¸ºå¼€å‘äººå‘˜æä¾›äº†å¿«é€Ÿæ„å»ºåˆ†å¸ƒå¼ç³»ç»Ÿä¸­ä¸€äº›å¸¸è§æ¨¡å¼çš„å·¥å…·ï¼ˆä¾‹å¦‚é…ç½®ç®¡ç†ï¼ŒæœåŠ¡å‘ç°ï¼Œæ–­è·¯å™¨ï¼Œæ™ºèƒ½è·¯ç”±ï¼Œå¾®ä»£ç†ï¼Œæ§åˆ¶æ€»çº¿ï¼‰ã€‚åˆ†å¸ƒå¼ç³»ç»Ÿçš„åè°ƒå¯¼è‡´äº†æ ·æ¿æ¨¡å¼ï¼Œä½¿ç”¨ Spring Cloud å¼€å‘äººå‘˜å¯ä»¥å¿«é€Ÿåœ°æ”¯æŒå®ç°è¿™äº›æ¨¡å¼çš„æœåŠ¡å’Œåº”ç”¨ç¨‹åºã€‚ä»–ä»¬å°†åœ¨ä»»ä½•åˆ†å¸ƒå¼ç¯å¢ƒä¸­è¿è¡Œè‰¯å¥½ï¼ŒåŒ…æ‹¬å¼€å‘äººå‘˜è‡ªå·±çš„ç¬”è®°æœ¬ç”µè„‘ï¼Œè£¸æœºæ•°æ®ä¸­å¿ƒï¼Œä»¥åŠ Cloud Foundry ç­‰æ‰˜ç®¡å¹³å°ã€‚</p>\n<p><code>quote from https://www.springcloud.cc/spring-cloud-dalston.html</code></p>\n</blockquote>\n<h3 id=\"åˆ›å»ºeurekaæœåŠ¡æ³¨å†Œä¸­å¿ƒåŠæœåŠ¡æä¾›è€…\"><a class=\"anchor\" href=\"#åˆ›å»ºeurekaæœåŠ¡æ³¨å†Œä¸­å¿ƒåŠæœåŠ¡æä¾›è€…\">#</a> åˆ›å»º Eureka æœåŠ¡æ³¨å†Œä¸­å¿ƒåŠæœåŠ¡æä¾›è€…</h3>\n<blockquote>\n<p>ps. å­¦ä¹ å®Œ Eureka ä¹‹åï¼Œå¯ä»¥å†äº†è§£ä¸€ä¸‹ Consulã€‚</p>\n</blockquote>\n<h4 id=\"åˆ›å»ºmavenä¸»å·¥ç¨‹\"><a class=\"anchor\" href=\"#åˆ›å»ºmavenä¸»å·¥ç¨‹\">#</a> åˆ›å»º maven ä¸»å·¥ç¨‹</h4>\n<p>ä½ å¯ä»¥é€‰æ‹©ä» https://start.spring.io/ ä¸‹è½½åˆå§‹åŒ–é¡¹ç›®ã€‚</p>\n<p>ä¹Ÿå¯ä»¥ <code>new </code>  &gt;&gt;  <code>project </code>  &gt;&gt;  <code>Spring Initializr</code>  è¿›è¡Œåˆå§‹åŒ–é¡¹ç›®ã€‚</p>\n<h4 id=\"åˆ›å»ºeureka-serveræ³¨å†ŒæœåŠ¡ä¸­å¿ƒ\"><a class=\"anchor\" href=\"#åˆ›å»ºeureka-serveræ³¨å†ŒæœåŠ¡ä¸­å¿ƒ\">#</a> åˆ›å»º Eureka Server æ³¨å†ŒæœåŠ¡ä¸­å¿ƒ</h4>\n<p>1.1 åˆ›å»º module å¹¶é€‰æ‹© Eureka Server ä¾èµ–ã€‚</p>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>org.springframework.cloud<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>spring-cloud-starter-netflix-eureka-server<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p>1.2 åœ¨å¯åŠ¨ç±»ä¸­æ·»åŠ æ³¨è§£  <code>@EnableEurekaServer</code></p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc<span class=\"token punctuation\">.</span>eureka<span class=\"token punctuation\">.</span>server</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>boot<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">SpringApplication</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>boot<span class=\"token punctuation\">.</span>autoconfigure<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">SpringBootApplication</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>cloud<span class=\"token punctuation\">.</span>netflix<span class=\"token punctuation\">.</span>eureka<span class=\"token punctuation\">.</span>server<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">EnableEurekaServer</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token annotation punctuation\">@SpringBootApplication</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token annotation punctuation\">@EnableEurekaServer</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">EurekaServerApplication</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token class-name\">SpringApplication</span><span class=\"token punctuation\">.</span><span class=\"token function\">run</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">EurekaServerApplication</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">,</span> args<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>1.3 é…ç½®æ–‡ä»¶  <code>application.yml</code></p>\n<figure class=\"highlight yml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">server</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token key atrule\">port</span><span class=\"token punctuation\">:</span> <span class=\"token number\">8761</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\"># é€šè¿‡ eureka.client.registerWithEurekaï¼šfalse å’Œ fetchRegistryï¼šfalse æ¥è¡¨æ˜è‡ªå·±æ˜¯ä¸€ä¸ª eureka server.</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token key atrule\">eureka</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  <span class=\"token key atrule\">instance</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token key atrule\">hostname</span><span class=\"token punctuation\">:</span> localhost</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>  <span class=\"token key atrule\">client</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token key atrule\">registerWithEureka</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">false</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token key atrule\">fetchRegistry</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">false</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token key atrule\">serviceUrl</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>      <span class=\"token key atrule\">defaultZone</span><span class=\"token punctuation\">:</span> http<span class=\"token punctuation\">:</span>//$<span class=\"token punctuation\">&#123;</span>eureka.instance.hostname<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">:</span>$<span class=\"token punctuation\">&#123;</span>server.port<span class=\"token punctuation\">&#125;</span>/eureka/</pre></td></tr><tr><td data-num=\"13\"></td><td><pre></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token key atrule\">spring</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>  <span class=\"token key atrule\">application</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> eurka<span class=\"token punctuation\">-</span>server</pre></td></tr></table></figure><p>1.4 å¯åŠ¨æ³¨å†ŒæœåŠ¡ä¸­å¿ƒ</p>\n<p>â€‹\t\tå¯åŠ¨ä¸»ç±»å¹¶è®¿é—®  <code>http://localhost:8761/</code></p>\n<h4 id=\"åˆ›å»ºeureka-clientæœåŠ¡æä¾›è€…\"><a class=\"anchor\" href=\"#åˆ›å»ºeureka-clientæœåŠ¡æä¾›è€…\">#</a> åˆ›å»º Eureka Client æœåŠ¡æä¾›è€…</h4>\n<p>1.1 åˆ›å»º module å¹¶é€‰æ‹© Eureka Discovery Client ä¾èµ–ã€‚</p>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>org.springframework.cloud<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>spring-cloud-starter-netflix-eureka-client<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p>1.2 åœ¨å¯åŠ¨ç±»ä¸­æ·»åŠ æ³¨è§£  <code>@EnableEurekaClient</code></p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc<span class=\"token punctuation\">.</span>eureka<span class=\"token punctuation\">.</span>client</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>boot<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">SpringApplication</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>boot<span class=\"token punctuation\">.</span>autoconfigure<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">SpringBootApplication</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>cloud<span class=\"token punctuation\">.</span>netflix<span class=\"token punctuation\">.</span>eureka<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">EnableEurekaClient</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token annotation punctuation\">@SpringBootApplication</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token annotation punctuation\">@EnableEurekaClient</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">EurekaClientApplication</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token class-name\">SpringApplication</span><span class=\"token punctuation\">.</span><span class=\"token function\">run</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">EurekaClientApplication</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">,</span> args<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>1.3 é…ç½®æ–‡ä»¶  <code>application.yml</code></p>\n<figure class=\"highlight yml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">server</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token key atrule\">port</span><span class=\"token punctuation\">:</span> <span class=\"token number\">8762</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\"># æŒ‡å®šå½“å‰æœåŠ¡åç§°</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token key atrule\">spring</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  <span class=\"token key atrule\">application</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> eureka<span class=\"token punctuation\">-</span>client<span class=\"token punctuation\">-</span><span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\"># æŒ‡å®š eureka-server</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token key atrule\">eureka</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>  <span class=\"token key atrule\">client</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token key atrule\">serviceUrl</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>      <span class=\"token key atrule\">defaultZone</span><span class=\"token punctuation\">:</span> http<span class=\"token punctuation\">:</span>//localhost<span class=\"token punctuation\">:</span>8761/eureka/</pre></td></tr></table></figure><p>1.4 å¯åŠ¨ Eureka Client</p>\n<p>â€‹\t\tæ³¨æ„ï¼šå¯åŠ¨ Eureka Client æ—¶åº”å½“ä¿è¯ Eureka Client ä¹Ÿå¤„äºå¯åŠ¨çŠ¶æ€ã€‚</p>\n<p>â€‹\t\tå¯åŠ¨ä¸»ç±»å¹¶è®¿é—®  <code>http://localhost:8761/</code>  è¿›è¡ŒæŸ¥çœ‹ã€‚</p>\n<p>â€‹\t\tæç¤ºä¿¡æ¯ï¼š  <code>EMERGENCY! EUREKA MAY BE INCORRECTLY CLAIMING INSTANCES ARE UP WHEN THEY'RE NOT. RENEWALS ARE LESSER THAN THRESHOLD AND HENCE THE INSTANCES ARE NOT BEING EXPIRED JUST TO BE SAFE.</code>  å‚è€ƒ <span class=\"exturl\" data-url=\"aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzI2OTc1MzA3L2FydGljbGUvZGV0YWlscy84NjU2MzU5MA==\">https://blog.csdn.net/qq_26975307/article/details/86563590</span></p>\n<p>åœ¨  <code>Instances currently registered with Eureka</code>  åˆ—è¡¨ä¸­æŸ¥çœ‹å·²æ³¨å†Œçš„ Eureka æœåŠ¡å®ä¾‹ã€‚</p>\n<h4 id=\"eurekaæœåŠ¡æ³¨å†ŒæˆåŠŸ\"><a class=\"anchor\" href=\"#eurekaæœåŠ¡æ³¨å†ŒæˆåŠŸ\">#</a> Eureka æœåŠ¡æ³¨å†ŒæˆåŠŸ</h4>\n<p>è‡³æ­¤ï¼Œä¸€ä¸ª Eureka æœåŠ¡å³æ³¨å†ŒæˆåŠŸï¼ŒåŒæ—¶æ³¨å†Œå¤šä¸ª Eureka æœåŠ¡ï¼Œä¸ Eureka Client æ–¹å¼ç›¸åŒï¼Œåªé¡»æ³¨æ„ç«¯å£å†²çªå³å¯ã€‚</p>\n<h2 id=\"æœåŠ¡æ¶ˆè´¹è€…restribbon\"><a class=\"anchor\" href=\"#æœåŠ¡æ¶ˆè´¹è€…restribbon\">#</a> æœåŠ¡æ¶ˆè´¹è€…ï¼ˆrest+ribbonï¼‰</h2>\n<p>åœ¨å¾®æœåŠ¡æ¶æ„ä¸­ï¼Œä¸šåŠ¡éƒ½ä¼šè¢«æ‹†åˆ†æˆä¸€ä¸ªç‹¬ç«‹çš„æœåŠ¡ï¼ŒæœåŠ¡ä¸æœåŠ¡çš„é€šè®¯æ˜¯åŸºäº http restful çš„ã€‚Spring cloud æœ‰ä¸¤ç§æœåŠ¡è°ƒç”¨æ–¹å¼ï¼Œä¸€ç§æ˜¯ ribbon+restTemplateï¼Œå¦ä¸€ç§æ˜¯ feignã€‚</p>\n<h3 id=\"ribbonç®€ä»‹\"><a class=\"anchor\" href=\"#ribbonç®€ä»‹\">#</a> ribbon ç®€ä»‹</h3>\n<blockquote>\n<p>Ribbon is a client side IPC library that is battle-tested in cloud. It provides the following features</p>\n<ul>\n<li>\n<p>Load balancing</p>\n</li>\n<li>\n<p>Fault tolerance</p>\n</li>\n<li>\n<p>Multiple protocol (HTTP, TCP, UDP) support in an asynchronous and reactive model</p>\n</li>\n<li>\n<p>Caching and batching</p>\n<p>---- æ‘˜è‡ª https://github.com/Netflix/ribbon</p>\n</li>\n</ul>\n</blockquote>\n<blockquote>\n<p>Spring Cloud Ribbon æ˜¯ä¸€ä¸ªåŸºäº HTTP å’Œ TCP çš„å®¢æˆ·ç«¯è´Ÿè½½å‡è¡¡å·¥å…·ï¼Œå®ƒåŸºäº Netflix Ribbon å®ç°ã€‚é€šè¿‡ Spring Cloud çš„å°è£…ï¼Œå¯ä»¥è®©æˆ‘ä»¬è½»æ¾åœ°å°†é¢å‘æœåŠ¡çš„ REST æ¨¡ç‰ˆè¯·æ±‚è‡ªåŠ¨è½¬æ¢æˆå®¢æˆ·ç«¯è´Ÿè½½å‡è¡¡çš„æœåŠ¡è°ƒç”¨ã€‚Spring Cloud Ribbon è™½ç„¶åªæ˜¯ä¸€ä¸ªå·¥å…·ç±»æ¡†æ¶ï¼Œå®ƒä¸åƒæœåŠ¡æ³¨å†Œä¸­å¿ƒã€é…ç½®ä¸­å¿ƒã€API ç½‘å…³é‚£æ ·éœ€è¦ç‹¬ç«‹éƒ¨ç½²ï¼Œä½†æ˜¯å®ƒå‡ ä¹å­˜åœ¨äºæ¯ä¸€ä¸ª Spring Cloud æ„å»ºçš„å¾®æœåŠ¡å’ŒåŸºç¡€è®¾æ–½ä¸­ã€‚å› ä¸ºå¾®æœåŠ¡é—´çš„è°ƒç”¨ï¼ŒAPI ç½‘å…³çš„è¯·æ±‚è½¬å‘ç­‰å†…å®¹ï¼Œå®é™…ä¸Šéƒ½æ˜¯é€šè¿‡ Ribbon æ¥å®ç°çš„ï¼ŒåŒ…æ‹¬åç»­æˆ‘ä»¬å°†è¦ä»‹ç»çš„ Feignï¼Œå®ƒä¹Ÿæ˜¯åŸºäº Ribbon å®ç°çš„å·¥å…·ã€‚</p>\n<p>---- æ‘˜è‡ª https://www.jianshu.com/p/1bd66db5dc46</p>\n</blockquote>\n<h3 id=\"å‡†å¤‡å·¥ä½œ\"><a class=\"anchor\" href=\"#å‡†å¤‡å·¥ä½œ\">#</a> å‡†å¤‡å·¥ä½œ</h3>\n<p>æ ¹æ® springcloud001 æ–‡æ¡£ï¼ŒåŒæ—¶åˆ›å»º Eureka Server å’Œä¸¤ä¸ª Eureka Clientã€‚</p>\n<p>æ³¨æ„ï¼šé™¤ç«¯å£ä¸åŒå¤–ï¼Œä¸¤ä¸ª Eureka Client çš„ä»£ç å®Œå…¨ç›¸åŒï¼Œä»¥ä¸åŒç«¯å£æ¥æ¨¡æ‹Ÿè´Ÿè½½å‡è¡¡ã€‚</p>\n<h3 id=\"åˆ›å»ºæœåŠ¡æ¶ˆè´¹è€…\"><a class=\"anchor\" href=\"#åˆ›å»ºæœåŠ¡æ¶ˆè´¹è€…\">#</a> åˆ›å»ºæœåŠ¡æ¶ˆè´¹è€…</h3>\n<h4 id=\"æ–°å»ºä¸€ä¸ªmoduleå¹¶æ·»åŠ ribbonåŠeureka-clientä¾èµ–\"><a class=\"anchor\" href=\"#æ–°å»ºä¸€ä¸ªmoduleå¹¶æ·»åŠ ribbonåŠeureka-clientä¾èµ–\">#</a> æ–°å»ºä¸€ä¸ª moduleï¼Œå¹¶æ·»åŠ  ribbon åŠ eureka client ä¾èµ–ã€‚</h4>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>org.springframework.cloud<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>spring-cloud-starter-netflix-eureka-client<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>org.springframework.cloud<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>spring-cloud-starter-netflix-ribbon<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><h4 id=\"é…ç½®æ–‡ä»¶\"><a class=\"anchor\" href=\"#é…ç½®æ–‡ä»¶\">#</a> é…ç½®æ–‡ä»¶</h4>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>server:</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  port: 8764</pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>eureka:</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  client:</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    serviceUrl:</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>      defaultZone: http://localhost:8761/eureka/</pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>spring:</pre></td></tr><tr><td data-num=\"10\"></td><td><pre>  application:</pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    name: service-ribbon</pre></td></tr></table></figure><h4 id=\"é…ç½®å¯åŠ¨ç±»\"><a class=\"anchor\" href=\"#é…ç½®å¯åŠ¨ç±»\">#</a> é…ç½®å¯åŠ¨ç±»</h4>\n<p>åœ¨å¯åŠ¨ç±»ä¸­æ·»åŠ   <code>@EnableEurekaClient</code>  åŠ  <code>@EnableDiscoveryClient</code>  æ³¨è§£ï¼Œå¹¶æ³¨å…¥ä¸€ä¸ªå¼€å¯è´Ÿè½½å‡è¡¡çš„ RESTFul æ¨¡æ¿ã€‚</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc<span class=\"token punctuation\">.</span>service<span class=\"token punctuation\">.</span>ribbon</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>boot<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">SpringApplication</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>boot<span class=\"token punctuation\">.</span>autoconfigure<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">SpringBootApplication</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>cloud<span class=\"token punctuation\">.</span>client<span class=\"token punctuation\">.</span>discovery<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">EnableDiscoveryClient</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>cloud<span class=\"token punctuation\">.</span>client<span class=\"token punctuation\">.</span>loadbalancer<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">LoadBalanced</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>cloud<span class=\"token punctuation\">.</span>netflix<span class=\"token punctuation\">.</span>eureka<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">EnableEurekaClient</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>context<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Bean</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>web<span class=\"token punctuation\">.</span>client<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">RestTemplate</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token annotation punctuation\">@SpringBootApplication</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token annotation punctuation\">@EnableEurekaClient</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token annotation punctuation\">@EnableDiscoveryClient</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">ServiceRibbonApplication</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        <span class=\"token class-name\">SpringApplication</span><span class=\"token punctuation\">.</span><span class=\"token function\">run</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">ServiceRibbonApplication</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">,</span> args<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token annotation punctuation\">@Bean</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    <span class=\"token annotation punctuation\">@LoadBalanced</span><span class=\"token comment\">// å¼€å¯è´Ÿè½½å‡è¡¡</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    <span class=\"token class-name\">RestTemplate</span> <span class=\"token function\">restTemplate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">RestTemplate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h4 id=\"åœ¨eurekaclientçš„æœåŠ¡ä¸­ç¼–å†™æ¥å£\"><a class=\"anchor\" href=\"#åœ¨eurekaclientçš„æœåŠ¡ä¸­ç¼–å†™æ¥å£\">#</a> åœ¨ EurekaClient çš„æœåŠ¡ä¸­ç¼–å†™æ¥å£</h4>\n<p>è¿™é‡Œç›´æ¥åœ¨ä¸¤ä¸ª EurekaClient çš„å¯åŠ¨ç±»ä¸­ç¼–å†™ RESTFul é£æ ¼çš„æ¥å£å³å¯ï¼Œå³ä¿®æ”¹å¯åŠ¨ç±»ï¼Œå¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc<span class=\"token punctuation\">.</span>eureka<span class=\"token punctuation\">.</span>client</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>beans<span class=\"token punctuation\">.</span>factory<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Value</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>boot<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">SpringApplication</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>boot<span class=\"token punctuation\">.</span>autoconfigure<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">SpringBootApplication</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>cloud<span class=\"token punctuation\">.</span>netflix<span class=\"token punctuation\">.</span>eureka<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">EnableEurekaClient</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>web<span class=\"token punctuation\">.</span>bind<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">RequestMapping</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>web<span class=\"token punctuation\">.</span>bind<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">RequestParam</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>web<span class=\"token punctuation\">.</span>bind<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">RestController</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token annotation punctuation\">@SpringBootApplication</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token annotation punctuation\">@EnableEurekaClient</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token annotation punctuation\">@RestController</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">EurekaClientApplication</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        <span class=\"token class-name\">SpringApplication</span><span class=\"token punctuation\">.</span><span class=\"token function\">run</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">EurekaClient2Application</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">,</span> args<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token annotation punctuation\">@Value</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"$&#123;server.port&#125;\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    <span class=\"token class-name\">String</span> port<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    <span class=\"token annotation punctuation\">@RequestMapping</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/test\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token annotation punctuation\">@RequestParam</span><span class=\"token punctuation\">(</span>value <span class=\"token operator\">=</span> <span class=\"token string\">\"name\"</span><span class=\"token punctuation\">,</span> defaultValue <span class=\"token operator\">=</span> <span class=\"token string\">\"ErDong\"</span><span class=\"token punctuation\">)</span> <span class=\"token class-name\">String</span> name<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token string\">\"hi \"</span> <span class=\"token operator\">+</span> name <span class=\"token operator\">+</span> <span class=\"token string\">\" ,this test api is from port: \"</span> <span class=\"token operator\">+</span> port<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre></pre></td></tr><tr><td data-num=\"28\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h4 id=\"åœ¨ribbonæ¨¡å—ä¸­æ·»åŠ æµ‹è¯•\"><a class=\"anchor\" href=\"#åœ¨ribbonæ¨¡å—ä¸­æ·»åŠ æµ‹è¯•\">#</a> åœ¨ ribbon æ¨¡å—ä¸­æ·»åŠ æµ‹è¯•</h4>\n<p>5.1 æ–°å»º TestService.java</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc<span class=\"token punctuation\">.</span>service<span class=\"token punctuation\">.</span>ribbon<span class=\"token punctuation\">.</span>service</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>beans<span class=\"token punctuation\">.</span>factory<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Autowired</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>stereotype<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Service</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>web<span class=\"token punctuation\">.</span>client<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">RestTemplate</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token comment\">/**</pre></td></tr><tr><td data-num=\"8\"></td><td><pre> * @Auther: ErDong</pre></td></tr><tr><td data-num=\"9\"></td><td><pre> * @Email: xfc_exclave@163.com</pre></td></tr><tr><td data-num=\"10\"></td><td><pre> * @Date: 2019/12/27 0027 12:46</pre></td></tr><tr><td data-num=\"11\"></td><td><pre> * @Description:</pre></td></tr><tr><td data-num=\"12\"></td><td><pre> */</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token annotation punctuation\">@Service</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">TestService</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token annotation punctuation\">@Autowired</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token class-name\">RestTemplate</span> restTemplate<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> name<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>        <span class=\"token keyword\">return</span> restTemplate<span class=\"token punctuation\">.</span><span class=\"token function\">getForObject</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"http://EUREKA-CLIENT/test?name=\"</span> <span class=\"token operator\">+</span> name<span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre></pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>5.1 æ–°å»º TestController.java</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc<span class=\"token punctuation\">.</span>service<span class=\"token punctuation\">.</span>ribbon<span class=\"token punctuation\">.</span>controller</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc<span class=\"token punctuation\">.</span>service<span class=\"token punctuation\">.</span>ribbon<span class=\"token punctuation\">.</span>service<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">TestService</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>beans<span class=\"token punctuation\">.</span>factory<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Autowired</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>web<span class=\"token punctuation\">.</span>bind<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">GetMapping</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>web<span class=\"token punctuation\">.</span>bind<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">RequestParam</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>web<span class=\"token punctuation\">.</span>bind<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">RestController</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\">/**</pre></td></tr><tr><td data-num=\"10\"></td><td><pre> * @Auther: ErDong</pre></td></tr><tr><td data-num=\"11\"></td><td><pre> * @Email: xfc_exclave@163.com</pre></td></tr><tr><td data-num=\"12\"></td><td><pre> * @Date: 2019/12/27 0027 12:56</pre></td></tr><tr><td data-num=\"13\"></td><td><pre> * @Description:</pre></td></tr><tr><td data-num=\"14\"></td><td><pre> */</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token annotation punctuation\">@RestController</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">TestController</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token annotation punctuation\">@Autowired</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token class-name\">TestService</span> testService<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    <span class=\"token annotation punctuation\">@GetMapping</span><span class=\"token punctuation\">(</span>value <span class=\"token operator\">=</span> <span class=\"token string\">\"/test\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token annotation punctuation\">@RequestParam</span> <span class=\"token class-name\">String</span> name<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>        <span class=\"token keyword\">return</span> testService<span class=\"token punctuation\">.</span><span class=\"token function\">test</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h3 id=\"å¯åŠ¨æœåŠ¡åŠæµ‹è¯•è´Ÿè½½å‡è¡¡\"><a class=\"anchor\" href=\"#å¯åŠ¨æœåŠ¡åŠæµ‹è¯•è´Ÿè½½å‡è¡¡\">#</a> å¯åŠ¨æœåŠ¡åŠæµ‹è¯•è´Ÿè½½å‡è¡¡</h3>\n<ol>\n<li>\n<p>åˆ†åˆ«å¯åŠ¨ EurekaServerï¼Œä¸¤ä¸ª EurekaClient åŠ ServiceRibbonã€‚</p>\n</li>\n<li>\n<p>è®¿é—® <span class=\"exturl\" data-url=\"aHR0cDovL2xvY2FsaG9zdDo4NzYxLw==\">http://localhost:8761/</span> å·²æ³¨å†Œçš„æœåŠ¡å®ä¾‹ã€‚</p>\n<p>å¯ä»¥çœ‹åˆ°ç«¯å£åˆ†åˆ«ä¸º  <code>8762</code>  å’Œ  <code>8763</code>  ä¸¤ä¸ª <strong>EUREKA-CLIENT</strong> å®ä¾‹ï¼ŒåŠä¸€ä¸ªç«¯å£ä¸º  <code>8764</code>  çš„ <strong>EUREKA-CLIENT</strong> å®ä¾‹ã€‚</p>\n</li>\n<li>\n<p>è´Ÿè½½å‡è¡¡æµ‹è¯•</p>\n<p>å¤šæ¬¡è®¿é—® <span class=\"exturl\" data-url=\"aHR0cDovL2xvY2FsaG9zdDo4NzY0L3Rlc3Q/bmFtZT10ZXN0VXNlcg==\">http://localhost:8764/test?name=testUser</span></p>\n<p>å¯ä»¥çœ‹åˆ°ç›¸åº”ç»“æœå¦‚ä¸‹ï¼š</p>\n<p>hi testUser ,this test api is from port: 8762</p>\n<p>hi testUser ,this test api is from port: 8763</p>\n<p>hi testUser ,this test api is from port: 8762</p>\n<p>hi testUser ,this test api is from port: 8763</p>\n<p>hi testUser ,this test api is from port: 8762</p>\n<p>hi testUser ,this test api is from port: 8763</p>\n<p>â€¦â€¦</p>\n</li>\n<li>\n<p>æµ‹è¯•ç»“è®º</p>\n<p>ä»æµ‹è¯•ç»“æœæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œç«¯å£åˆ†åˆ«ä¸º 8762 ä½• 8763 çš„ä¸¤ä¸ª <strong>EUREKA-CLIENT</strong> å®ä¾‹è¢«è½®æµè°ƒç”¨ï¼Œå³å®ç°äº†è´Ÿè½½å‡è¡¡ã€‚</p>\n</li>\n</ol>\n<h2 id=\"æœåŠ¡æ¶ˆè´¹è€…feign\"><a class=\"anchor\" href=\"#æœåŠ¡æ¶ˆè´¹è€…feign\">#</a> æœåŠ¡æ¶ˆè´¹è€…ï¼ˆFeignï¼‰</h2>\n<p>åœ¨å¾®æœåŠ¡æ¶æ„ä¸­ï¼Œä¸šåŠ¡éƒ½ä¼šè¢«æ‹†åˆ†æˆä¸€ä¸ªç‹¬ç«‹çš„æœåŠ¡ï¼ŒæœåŠ¡ä¸æœåŠ¡çš„é€šè®¯æ˜¯åŸºäº http restful çš„ã€‚Spring cloud æœ‰ä¸¤ç§æœåŠ¡è°ƒç”¨æ–¹å¼ï¼Œä¸€ç§æ˜¯ ribbon+restTemplateï¼Œå¦ä¸€ç§æ˜¯ feignã€‚</p>\n<h3 id=\"feignç®€ä»‹\"><a class=\"anchor\" href=\"#feignç®€ä»‹\">#</a> Feign ç®€ä»‹</h3>\n<blockquote>\n<p>Feign is a Java to HTTP client binder inspired by Retrofit, JAXRS-2.0, and WebSocket. Feign's first goal was reducing the complexity of binding Denominator uniformly to HTTP APIs regardless of ReSTfulness.</p>\n<p>---- æ‘˜è‡ª https://github.com/OpenFeign/feign</p>\n</blockquote>\n<blockquote>\n<p>Feign æ˜¯ä¸€ä¸ªå£°æ˜å¼çš„ä¼ª Http å®¢æˆ·ç«¯ï¼Œå®ƒä½¿å¾—å†™ Http å®¢æˆ·ç«¯å˜å¾—æ›´ç®€å•ã€‚ä½¿ç”¨ Feignï¼Œåªéœ€è¦åˆ›å»ºä¸€ä¸ªæ¥å£å¹¶æ³¨è§£ã€‚å®ƒå…·æœ‰å¯æ’æ‹”çš„æ³¨è§£ç‰¹æ€§ï¼Œå¯ä½¿ç”¨ Feign æ³¨è§£å’Œ JAX-RS æ³¨è§£ã€‚Feign æ”¯æŒå¯æ’æ‹”çš„ç¼–ç å™¨å’Œè§£ç å™¨ã€‚Feign é»˜è®¤é›†æˆäº† Ribbonï¼Œå¹¶å’Œ Eureka ç»“åˆï¼Œé»˜è®¤å®ç°äº†è´Ÿè½½å‡è¡¡çš„æ•ˆæœã€‚</p>\n<p>ç®€è€Œè¨€ä¹‹ï¼š</p>\n<ul>\n<li>Feign é‡‡ç”¨çš„æ˜¯åŸºäºæ¥å£çš„æ³¨è§£</li>\n<li>Feign æ•´åˆäº† ribbonï¼Œå…·æœ‰è´Ÿè½½å‡è¡¡çš„èƒ½åŠ›</li>\n<li>æ•´åˆäº† Hystrixï¼Œå…·æœ‰ç†”æ–­çš„èƒ½åŠ›</li>\n</ul>\n<p>---- æ‘˜è‡ª https://blog.csdn.net/forezp/article/details/81040965</p>\n</blockquote>\n<h3 id=\"å‡†å¤‡å·¥ä½œ-2\"><a class=\"anchor\" href=\"#å‡†å¤‡å·¥ä½œ-2\">#</a> å‡†å¤‡å·¥ä½œ</h3>\n<p>æ ¹æ® springcloud001 æ–‡æ¡£ï¼ŒåŒæ—¶åˆ›å»º Eureka Server å’Œä¸¤ä¸ª Eureka Clientã€‚</p>\n<p>æ³¨æ„ï¼šé™¤ç«¯å£ä¸åŒå¤–ï¼Œä¸¤ä¸ª Eureka Client çš„ä»£ç å®Œå…¨ç›¸åŒï¼Œä»¥ä¸åŒç«¯å£æ¥æ¨¡æ‹Ÿè´Ÿè½½å‡è¡¡ã€‚</p>\n<h3 id=\"åˆ›å»ºæœåŠ¡æ¶ˆè´¹è€…-2\"><a class=\"anchor\" href=\"#åˆ›å»ºæœåŠ¡æ¶ˆè´¹è€…-2\">#</a> åˆ›å»ºæœåŠ¡æ¶ˆè´¹è€…</h3>\n<h4 id=\"æ–°å»ºä¸€ä¸ªmoduleå¹¶æ·»åŠ feignåŠeureka-clientä¾èµ–\"><a class=\"anchor\" href=\"#æ–°å»ºä¸€ä¸ªmoduleå¹¶æ·»åŠ feignåŠeureka-clientä¾èµ–\">#</a> æ–°å»ºä¸€ä¸ª moduleï¼Œå¹¶æ·»åŠ  feign åŠ eureka client ä¾èµ–ã€‚</h4>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>org.springframework.cloud<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>spring-cloud-starter-netflix-eureka-client<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>org.springframework.cloud<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>spring-cloud-starter-openfeign<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><h4 id=\"é…ç½®æ–‡ä»¶-2\"><a class=\"anchor\" href=\"#é…ç½®æ–‡ä»¶-2\">#</a> é…ç½®æ–‡ä»¶</h4>\n<figure class=\"highlight yml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">eureka</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token key atrule\">client</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token key atrule\">serviceUrl</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>      <span class=\"token key atrule\">defaultZone</span><span class=\"token punctuation\">:</span> http<span class=\"token punctuation\">:</span>//localhost<span class=\"token punctuation\">:</span>8761/eureka/</pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token key atrule\">server</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  <span class=\"token key atrule\">port</span><span class=\"token punctuation\">:</span> <span class=\"token number\">8765</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token key atrule\">spring</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>  <span class=\"token key atrule\">application</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> service<span class=\"token punctuation\">-</span>feign</pre></td></tr></table></figure><h4 id=\"é…ç½®å¯åŠ¨ç±»-2\"><a class=\"anchor\" href=\"#é…ç½®å¯åŠ¨ç±»-2\">#</a> é…ç½®å¯åŠ¨ç±»</h4>\n<p>åœ¨å¯åŠ¨ç±»ä¸­æ·»åŠ   <code>@EnableEurekaClient</code>   <code>@EnableFeignClients</code>   åŠ  <code>@EnableDiscoveryClient</code>  æ³¨è§£å¼€å¯ Feign çš„åŠŸèƒ½ã€‚</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc<span class=\"token punctuation\">.</span>service<span class=\"token punctuation\">.</span>feign</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>boot<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">SpringApplication</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>boot<span class=\"token punctuation\">.</span>autoconfigure<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">SpringBootApplication</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>cloud<span class=\"token punctuation\">.</span>client<span class=\"token punctuation\">.</span>discovery<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">EnableDiscoveryClient</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>cloud<span class=\"token punctuation\">.</span>netflix<span class=\"token punctuation\">.</span>eureka<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">EnableEurekaClient</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>cloud<span class=\"token punctuation\">.</span>openfeign<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">EnableFeignClients</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token annotation punctuation\">@SpringBootApplication</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token annotation punctuation\">@EnableEurekaClient</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token annotation punctuation\">@EnableDiscoveryClient</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token annotation punctuation\">@EnableFeignClients</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">ServiceFeignApplication</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        <span class=\"token class-name\">SpringApplication</span><span class=\"token punctuation\">.</span><span class=\"token function\">run</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">ServiceFeignApplication</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">,</span> args<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h4 id=\"å®šä¹‰ä¸€ä¸ªfeignæ¥å£\"><a class=\"anchor\" href=\"#å®šä¹‰ä¸€ä¸ªfeignæ¥å£\">#</a> å®šä¹‰ä¸€ä¸ª Feign æ¥å£</h4>\n<p><strong>æ³¨æ„ï¼š</strong> æ­¤éƒ¨åˆ†ä¸ springcloud002 ä¸­çš„éƒ¨åˆ†ç›¸åŒã€‚</p>\n<p>è¿™é‡Œç›´æ¥åœ¨ä¸¤ä¸ª EurekaClient çš„å¯åŠ¨ç±»ä¸­ç¼–å†™ RESTFul é£æ ¼çš„æ¥å£å³å¯ï¼Œå³ä¿®æ”¹å¯åŠ¨ç±»ï¼Œå¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc<span class=\"token punctuation\">.</span>eureka<span class=\"token punctuation\">.</span>client</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>beans<span class=\"token punctuation\">.</span>factory<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Value</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>boot<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">SpringApplication</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>boot<span class=\"token punctuation\">.</span>autoconfigure<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">SpringBootApplication</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>cloud<span class=\"token punctuation\">.</span>netflix<span class=\"token punctuation\">.</span>eureka<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">EnableEurekaClient</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>web<span class=\"token punctuation\">.</span>bind<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">RequestMapping</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>web<span class=\"token punctuation\">.</span>bind<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">RequestParam</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>web<span class=\"token punctuation\">.</span>bind<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">RestController</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token annotation punctuation\">@SpringBootApplication</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token annotation punctuation\">@EnableEurekaClient</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token annotation punctuation\">@RestController</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">EurekaClientApplication</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        <span class=\"token class-name\">SpringApplication</span><span class=\"token punctuation\">.</span><span class=\"token function\">run</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">EurekaClient2Application</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">,</span> args<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token annotation punctuation\">@Value</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"$&#123;server.port&#125;\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    <span class=\"token class-name\">String</span> port<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    <span class=\"token annotation punctuation\">@RequestMapping</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/test\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token annotation punctuation\">@RequestParam</span><span class=\"token punctuation\">(</span>value <span class=\"token operator\">=</span> <span class=\"token string\">\"name\"</span><span class=\"token punctuation\">,</span> defaultValue <span class=\"token operator\">=</span> <span class=\"token string\">\"ErDong\"</span><span class=\"token punctuation\">)</span> <span class=\"token class-name\">String</span> name<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token string\">\"hi \"</span> <span class=\"token operator\">+</span> name <span class=\"token operator\">+</span> <span class=\"token string\">\" ,this test api is from port: \"</span> <span class=\"token operator\">+</span> port<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre></pre></td></tr><tr><td data-num=\"28\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h4 id=\"åœ¨feignæ¨¡å—ä¸­æ·»åŠ æµ‹è¯•\"><a class=\"anchor\" href=\"#åœ¨feignæ¨¡å—ä¸­æ·»åŠ æµ‹è¯•\">#</a> åœ¨ feign æ¨¡å—ä¸­æ·»åŠ æµ‹è¯•</h4>\n<p>4.1 æ–°å»º TestService.java</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc<span class=\"token punctuation\">.</span>service<span class=\"token punctuation\">.</span>feign<span class=\"token punctuation\">.</span>service</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>cloud<span class=\"token punctuation\">.</span>openfeign<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">FeignClient</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>web<span class=\"token punctuation\">.</span>bind<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">RequestMapping</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>web<span class=\"token punctuation\">.</span>bind<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">RequestMethod</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>web<span class=\"token punctuation\">.</span>bind<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">RequestParam</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token comment\">/**</pre></td></tr><tr><td data-num=\"9\"></td><td><pre> * @Auther: ErDong</pre></td></tr><tr><td data-num=\"10\"></td><td><pre> * @Email: xfc_exclave@163.com</pre></td></tr><tr><td data-num=\"11\"></td><td><pre> * @Date: 2019/12/27 0027 14:38</pre></td></tr><tr><td data-num=\"12\"></td><td><pre> * @Description:</pre></td></tr><tr><td data-num=\"13\"></td><td><pre> */</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token annotation punctuation\">@FeignClient</span><span class=\"token punctuation\">(</span>value <span class=\"token operator\">=</span> <span class=\"token string\">\"EUREKA-CLIENT\"</span><span class=\"token punctuation\">)</span><span class=\"token comment\">// æŒ‡å®šæœåŠ¡åç§°</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">TestService</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token comment\">// æŒ‡å®šæœåŠ¡æ–¹æ³•åŠå‚æ•°</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token annotation punctuation\">@RequestMapping</span><span class=\"token punctuation\">(</span>value <span class=\"token operator\">=</span> <span class=\"token string\">\"/test\"</span><span class=\"token punctuation\">,</span>method <span class=\"token operator\">=</span> <span class=\"token class-name\">RequestMethod</span><span class=\"token punctuation\">.</span>GET<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token class-name\">String</span> <span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token annotation punctuation\">@RequestParam</span><span class=\"token punctuation\">(</span>value <span class=\"token operator\">=</span> <span class=\"token string\">\"name\"</span><span class=\"token punctuation\">)</span> <span class=\"token class-name\">String</span> name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>5.2 æ–°å»º TestController.java</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc<span class=\"token punctuation\">.</span>service<span class=\"token punctuation\">.</span>feign<span class=\"token punctuation\">.</span>controller</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc<span class=\"token punctuation\">.</span>service<span class=\"token punctuation\">.</span>feign<span class=\"token punctuation\">.</span>service<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">TestService</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>beans<span class=\"token punctuation\">.</span>factory<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Autowired</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>web<span class=\"token punctuation\">.</span>bind<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">GetMapping</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>web<span class=\"token punctuation\">.</span>bind<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">RequestParam</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>web<span class=\"token punctuation\">.</span>bind<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">RestController</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\">/**</pre></td></tr><tr><td data-num=\"10\"></td><td><pre> * @Auther: ErDong</pre></td></tr><tr><td data-num=\"11\"></td><td><pre> * @Email: xfc_exclave@163.com</pre></td></tr><tr><td data-num=\"12\"></td><td><pre> * @Date: 2019/12/27 0027 14:40</pre></td></tr><tr><td data-num=\"13\"></td><td><pre> * @Description:</pre></td></tr><tr><td data-num=\"14\"></td><td><pre> */</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token annotation punctuation\">@RestController</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">TestController</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token annotation punctuation\">@Autowired</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token class-name\">TestService</span> testService<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    <span class=\"token annotation punctuation\">@GetMapping</span><span class=\"token punctuation\">(</span>value <span class=\"token operator\">=</span> <span class=\"token string\">\"/test\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token annotation punctuation\">@RequestParam</span> <span class=\"token class-name\">String</span> name<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>        <span class=\"token keyword\">return</span> testService<span class=\"token punctuation\">.</span><span class=\"token function\">test</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h3 id=\"å¯åŠ¨æœåŠ¡åŠæµ‹è¯•è´Ÿè½½å‡è¡¡-2\"><a class=\"anchor\" href=\"#å¯åŠ¨æœåŠ¡åŠæµ‹è¯•è´Ÿè½½å‡è¡¡-2\">#</a> å¯åŠ¨æœåŠ¡åŠæµ‹è¯•è´Ÿè½½å‡è¡¡</h3>\n<ol>\n<li>\n<p>åˆ†åˆ«å¯åŠ¨ EurekaServerï¼Œä¸¤ä¸ª EurekaClient åŠ ServiceFeignã€‚</p>\n</li>\n<li>\n<p>è®¿é—® <span class=\"exturl\" data-url=\"aHR0cDovL2xvY2FsaG9zdDo4NzYxLw==\">http://localhost:8761/</span> å·²æ³¨å†Œçš„æœåŠ¡å®ä¾‹ã€‚</p>\n<p>å¯ä»¥çœ‹åˆ°ç«¯å£åˆ†åˆ«ä¸º  <code>8762</code>  å’Œ  <code>8763</code>  ä¸¤ä¸ª <strong>EUREKA-CLIENT</strong> å®ä¾‹ï¼ŒåŠä¸€ä¸ªç«¯å£ä¸º  <code>8765</code>  çš„ <strong>SERVICE-FEIGN</strong> å®ä¾‹ã€‚</p>\n</li>\n<li>\n<p>è´Ÿè½½å‡è¡¡æµ‹è¯•</p>\n<p>å¤šæ¬¡è®¿é—® <span class=\"exturl\" data-url=\"aHR0cDovL2xvY2FsaG9zdDo4NzY1L3Rlc3Q/bmFtZT10ZXN0VXNlcg==\">http://localhost:8765/test?name=testUser</span></p>\n<p>å¯ä»¥çœ‹åˆ°ç›¸åº”ç»“æœå¦‚ä¸‹ï¼š</p>\n<p>hi testUser ,this test api is from port: 8762</p>\n<p>hi testUser ,this test api is from port: 8763</p>\n<p>hi testUser ,this test api is from port: 8762</p>\n<p>hi testUser ,this test api is from port: 8763</p>\n<p>hi testUser ,this test api is from port: 8762</p>\n<p>hi testUser ,this test api is from port: 8763</p>\n<p>â€¦â€¦</p>\n</li>\n<li>\n<p>æµ‹è¯•ç»“è®º</p>\n<p>ä»æµ‹è¯•ç»“æœæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œç«¯å£åˆ†åˆ«ä¸º 8762 ä½• 8763 çš„ä¸¤ä¸ª <strong>EUREKA-CLIENT</strong> å®ä¾‹è¢«è½®æµè°ƒç”¨ï¼Œå³å®ç°äº†è´Ÿè½½å‡è¡¡ã€‚</p>\n</li>\n</ol>\n<h2 id=\"ç†”æ–­å™¨hystrix\"><a class=\"anchor\" href=\"#ç†”æ–­å™¨hystrix\">#</a> ç†”æ–­å™¨ï¼ˆHystrixï¼‰</h2>\n<p>åœ¨å¾®æœåŠ¡æ¶æ„ä¸­ï¼Œæ ¹æ®ä¸šåŠ¡æ¥æ‹†åˆ†æˆä¸€ä¸ªä¸ªçš„æœåŠ¡ï¼ŒæœåŠ¡ä¸æœåŠ¡ä¹‹é—´å¯ä»¥ç›¸äº’è°ƒç”¨ï¼ˆRPCï¼‰ï¼Œåœ¨ Spring Cloud å¯ä»¥ç”¨ RestTemplate+Ribbon å’Œ Feign æ¥è°ƒç”¨ã€‚ä¸ºäº†ä¿è¯å…¶é«˜å¯ç”¨ï¼Œå•ä¸ªæœåŠ¡é€šå¸¸ä¼šé›†ç¾¤éƒ¨ç½²ã€‚ç”±äºç½‘ç»œåŸå› æˆ–è€…è‡ªèº«çš„åŸå› ï¼ŒæœåŠ¡å¹¶ä¸èƒ½ä¿è¯ 100% å¯ç”¨ï¼Œå¦‚æœå•ä¸ªæœåŠ¡å‡ºç°é—®é¢˜ï¼Œè°ƒç”¨è¿™ä¸ªæœåŠ¡å°±ä¼šå‡ºç°çº¿ç¨‹é˜»å¡ï¼Œæ­¤æ—¶è‹¥æœ‰å¤§é‡çš„è¯·æ±‚æ¶Œå…¥ï¼ŒServlet å®¹å™¨çš„çº¿ç¨‹èµ„æºä¼šè¢«æ¶ˆè€—å®Œæ¯•ï¼Œå¯¼è‡´æœåŠ¡ç˜«ç—ªã€‚æœåŠ¡ä¸æœåŠ¡ä¹‹é—´çš„ä¾èµ–æ€§ï¼Œæ•…éšœä¼šä¼ æ’­ï¼Œä¼šå¯¹æ•´ä¸ªå¾®æœåŠ¡ç³»ç»Ÿé€ æˆç¾éš¾æ€§çš„ä¸¥é‡åæœï¼Œè¿™å°±æ˜¯æœåŠ¡æ•…éšœçš„ â€œé›ªå´©â€ æ•ˆåº”ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä¸šç•Œæå‡ºäº†ç†”æ–­å™¨ï¼ˆæ–­è·¯å™¨ï¼‰æ¨¡å‹ã€‚</p>\n<h3 id=\"ç†”æ–­å™¨ç®€ä»‹\"><a class=\"anchor\" href=\"#ç†”æ–­å™¨ç®€ä»‹\">#</a> ç†”æ–­å™¨ç®€ä»‹</h3>\n<blockquote>\n<p>Hystrix is a latency and fault tolerance library designed to isolate points of access to remote systems, services and 3rd party libraries, stop cascading failure and enable resilience in complex distributed systems where failure is inevitable.</p>\n<p>---- æ‘˜è‡ª https://github.com/Netflix/hystrix</p>\n</blockquote>\n<blockquote>\n<p>Hystrix ä¸­æ–‡ä»‹ç»å¯å‚è€ƒ <span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuamlhbnNodS5jb20vcC83NmRjNDU1MjM4MDc=\">https://www.jianshu.com/p/76dc45523807</span></p>\n</blockquote>\n<h3 id=\"å‡†å¤‡å·¥ä½œ-3\"><a class=\"anchor\" href=\"#å‡†å¤‡å·¥ä½œ-3\">#</a> å‡†å¤‡å·¥ä½œ</h3>\n<p>æ ¹æ® springcloud001 æ–‡æ¡£ï¼ŒåŒæ—¶åˆ›å»º Eureka Server å’Œä¸¤ä¸ª Eureka Clientã€‚</p>\n<p>æ³¨æ„ï¼šé™¤ç«¯å£ä¸åŒå¤–ï¼Œä¸¤ä¸ª Eureka Client çš„ä»£ç å®Œå…¨ç›¸åŒï¼Œä»¥ä¸åŒç«¯å£æ¥æ¨¡æ‹Ÿè´Ÿè½½å‡è¡¡ã€‚</p>\n<h3 id=\"åœ¨ribbonä¸­ä½¿ç”¨æ–­è·¯å™¨\"><a class=\"anchor\" href=\"#åœ¨ribbonä¸­ä½¿ç”¨æ–­è·¯å™¨\">#</a> åœ¨ ribbon ä¸­ä½¿ç”¨æ–­è·¯å™¨</h3>\n<p><strong>æ³¨æ„ï¼š</strong> æ­¤éƒ¨åˆ†å†…å®¹åŸºäº springcloud002 æ–‡æ¡£ã€‚</p>\n<h4 id=\"å‘-serice-ribbon-æ¨¡å—æ·»åŠ ä¾èµ–\"><a class=\"anchor\" href=\"#å‘-serice-ribbon-æ¨¡å—æ·»åŠ ä¾èµ–\">#</a> å‘  <code>serice-ribbon</code>  æ¨¡å—æ·»åŠ ä¾èµ–</h4>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>org.springframework.cloud<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>spring-cloud-starter-netflix-hystrix<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><h4 id=\"é…ç½®å¯åŠ¨ç±»-3\"><a class=\"anchor\" href=\"#é…ç½®å¯åŠ¨ç±»-3\">#</a> é…ç½®å¯åŠ¨ç±»</h4>\n<p>åœ¨å¯åŠ¨ç±»ä¸­æ·»åŠ   <code>@EnableHystrix</code>  æ³¨è§£å¼€å¯ Hystrix åŠŸèƒ½ã€‚</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc<span class=\"token punctuation\">.</span>service<span class=\"token punctuation\">.</span>ribbon</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>boot<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">SpringApplication</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>boot<span class=\"token punctuation\">.</span>autoconfigure<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">SpringBootApplication</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>cloud<span class=\"token punctuation\">.</span>client<span class=\"token punctuation\">.</span>discovery<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">EnableDiscoveryClient</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>cloud<span class=\"token punctuation\">.</span>client<span class=\"token punctuation\">.</span>loadbalancer<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">LoadBalanced</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>cloud<span class=\"token punctuation\">.</span>netflix<span class=\"token punctuation\">.</span>eureka<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">EnableEurekaClient</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>cloud<span class=\"token punctuation\">.</span>netflix<span class=\"token punctuation\">.</span>hystrix<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">EnableHystrix</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>context<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Bean</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>web<span class=\"token punctuation\">.</span>client<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">RestTemplate</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token annotation punctuation\">@SpringBootApplication</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token annotation punctuation\">@EnableEurekaClient</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token annotation punctuation\">@EnableDiscoveryClient</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token annotation punctuation\">@EnableHystrix</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">ServiceRibbonApplication</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        <span class=\"token class-name\">SpringApplication</span><span class=\"token punctuation\">.</span><span class=\"token function\">run</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">ServiceRibbonApplication</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">,</span> args<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    <span class=\"token annotation punctuation\">@Bean</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    <span class=\"token annotation punctuation\">@LoadBalanced</span><span class=\"token comment\">// å¼€å¯è´Ÿè½½å‡è¡¡</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>    <span class=\"token class-name\">RestTemplate</span> <span class=\"token function\">restTemplate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">RestTemplate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre></pre></td></tr><tr><td data-num=\"28\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h4 id=\"æ”¹å†™testservice\"><a class=\"anchor\" href=\"#æ”¹å†™testservice\">#</a> æ”¹å†™ TestService</h4>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc<span class=\"token punctuation\">.</span>service<span class=\"token punctuation\">.</span>ribbon<span class=\"token punctuation\">.</span>service</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>netflix<span class=\"token punctuation\">.</span>hystrix<span class=\"token punctuation\">.</span>contrib<span class=\"token punctuation\">.</span>javanica<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">HystrixCommand</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>beans<span class=\"token punctuation\">.</span>factory<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Autowired</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>stereotype<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Service</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>web<span class=\"token punctuation\">.</span>client<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">RestTemplate</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token comment\">/**</pre></td></tr><tr><td data-num=\"9\"></td><td><pre> * @Auther: ErDong</pre></td></tr><tr><td data-num=\"10\"></td><td><pre> * @Email: xfc_exclave@163.com</pre></td></tr><tr><td data-num=\"11\"></td><td><pre> * @Date: 2019/12/27 0027 12:46</pre></td></tr><tr><td data-num=\"12\"></td><td><pre> * @Description:</pre></td></tr><tr><td data-num=\"13\"></td><td><pre> */</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token annotation punctuation\">@Service</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">TestService</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token annotation punctuation\">@Autowired</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token class-name\">RestTemplate</span> restTemplate<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token comment\">// å¯¹å½“å‰æ–¹æ³•åˆ›å»ºç†”æ–­å™¨çš„åŠŸèƒ½ï¼Œå¹¶æŒ‡å®š fallbackMethod ç†”æ–­æ–¹æ³•</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    <span class=\"token annotation punctuation\">@HystrixCommand</span><span class=\"token punctuation\">(</span>fallbackMethod <span class=\"token operator\">=</span> <span class=\"token string\">\"testError\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> name<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>        <span class=\"token keyword\">return</span> restTemplate<span class=\"token punctuation\">.</span><span class=\"token function\">getForObject</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"http://EUREKA-CLIENT/test?name=\"</span> <span class=\"token operator\">+</span> name<span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>    <span class=\"token comment\">//fallbackMethod ç†”æ–­æ–¹æ³•</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">testError</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> name<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token string\">\"hi,\"</span><span class=\"token operator\">+</span>name<span class=\"token operator\">+</span><span class=\"token string\">\",sorry,error!\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre></pre></td></tr><tr><td data-num=\"31\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h4 id=\"å¯åŠ¨æœåŠ¡åŠæµ‹è¯•ç†”æ–­å™¨åŠŸèƒ½\"><a class=\"anchor\" href=\"#å¯åŠ¨æœåŠ¡åŠæµ‹è¯•ç†”æ–­å™¨åŠŸèƒ½\">#</a> å¯åŠ¨æœåŠ¡åŠæµ‹è¯•ç†”æ–­å™¨åŠŸèƒ½</h4>\n<ol>\n<li>\n<p>åˆ†åˆ«å¯åŠ¨ EurekaServerï¼Œä¸¤ä¸ª EurekaClient åŠ ServiceRibbonã€‚</p>\n</li>\n<li>\n<p>è®¿é—® <span class=\"exturl\" data-url=\"aHR0cDovL2xvY2FsaG9zdDo4NzYxLw==\">http://localhost:8761/</span> å·²æ³¨å†Œçš„æœåŠ¡å®ä¾‹ã€‚</p>\n<p>å¯ä»¥çœ‹åˆ°ç«¯å£åˆ†åˆ«ä¸º  <code>8762</code>  å’Œ  <code>8763</code>  ä¸¤ä¸ª <strong>EUREKA-CLIENT</strong> å®ä¾‹ï¼ŒåŠä¸€ä¸ªç«¯å£ä¸º  <code>8764</code>  çš„ <strong>SERVICE-FEIGN</strong> å®ä¾‹ã€‚</p>\n</li>\n<li>\n<p>ç†”æ–­å™¨åŠŸèƒ½æµ‹è¯•</p>\n<p>å¤šæ¬¡è®¿é—® <span class=\"exturl\" data-url=\"aHR0cDovL2xvY2FsaG9zdDo4NzY0L3Rlc3Q/bmFtZT10ZXN0VXNlcg==\">http://localhost:8764/test?name=testUser</span></p>\n<p>å¯ä»¥çœ‹åˆ°ç›¸åº”ç»“æœå¦‚ä¸‹ï¼š</p>\n<p>hi testUser ,this test api is from port: 8762</p>\n<p>hi testUser ,this test api is from port: 8763</p>\n<p>hi testUser ,this test api is from port: 8762</p>\n<p>hi testUser ,this test api is from port: 8763</p>\n<p>hi testUser ,this test api is from port: 8762</p>\n<p>hi testUser ,this test api is from port: 8763</p>\n<p>â€¦â€¦</p>\n<p>æ­¤æ—¶æ–­å¼€ç«¯å£ä¸º  <code>8763</code>  çš„ <strong>EUREKA-CLIENT</strong> å®ä¾‹ã€‚</p>\n<p>å†æ¬¡è¿›è¡Œå¤šæ¬¡è®¿é—®ï¼Œç»“æœå¦‚ä¸‹ï¼š</p>\n<p>hi,testUser,sorry,error!</p>\n<p>hi testUser ,this test api is from port: 8762</p>\n<p>hi,testUser,sorry,error!</p>\n<p>hi testUser ,this test api is from port: 8762</p>\n<p>hi testUser ,this test api is from port: 8762</p>\n<p>â€¦â€¦</p>\n<p>æ­¤æ—¶å†æ–­å¼€ç«¯å£ä¸º  <code>8762</code>  çš„ <strong>EUREKA-CLIENT</strong> å®ä¾‹ã€‚</p>\n<p>å†æ¬¡è¿›è¡Œå¤šæ¬¡è®¿é—®ï¼Œç»“æœå¦‚ä¸‹ï¼š</p>\n<p>hi,testUser,sorry,error!</p>\n<p>hi,testUser,sorry,error!</p>\n<p>hi,testUser,sorry,error!</p>\n<p>hi,testUser,sorry,error!</p>\n<p>â€¦â€¦</p>\n</li>\n<li>\n<p>æµ‹è¯•ç»“è®º</p>\n<p>ä»æµ‹è¯•ç»“æœæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œç«¯å£åˆ†åˆ«ä¸º 8762 ä½• 8763 çš„ä¸¤ä¸ª <strong>EUREKA-CLIENT</strong> å®ä¾‹åœ¨æ­£å¸¸å¯ç”¨æ—¶ï¼Œæ­£å¸¸å®ç°è´Ÿè½½å‡è¡¡ï¼Œå½“å…¶ä¸­æŸä¸ªæœåŠ¡å®ä¾‹å‡ºç°æ•…éšœæ—¶ï¼Œå®¢æˆ·ç«¯ä¼šè¿›å…¥ fallbackMethod æŒ‡å®šçš„ç†”æ–­æ–¹æ³•ï¼Œç›´æ¥è¿”å›ä¸€ç»„å­—ç¬¦ä¸²ï¼Œè€Œä¸æ˜¯ç­‰å¾…å“åº”è¶…æ—¶ï¼Œè¿™å¾ˆå¥½çš„æ§åˆ¶äº†å®¹å™¨çš„çº¿ç¨‹é˜»å¡ã€‚</p>\n</li>\n</ol>\n<h3 id=\"åœ¨feignä¸­ä½¿ç”¨æ–­è·¯å™¨\"><a class=\"anchor\" href=\"#åœ¨feignä¸­ä½¿ç”¨æ–­è·¯å™¨\">#</a> åœ¨ feign ä¸­ä½¿ç”¨æ–­è·¯å™¨</h3>\n<p>Feign æ˜¯è‡ªå¸¦æ–­è·¯å™¨çš„ï¼Œåœ¨ D ç‰ˆæœ¬çš„ Spring Cloud ä¹‹åï¼Œé»˜è®¤å…³é—­ã€‚</p>\n<h4 id=\"å‘-serice-feign-æ¨¡å—æ·»åŠ ä¾èµ–\"><a class=\"anchor\" href=\"#å‘-serice-feign-æ¨¡å—æ·»åŠ ä¾èµ–\">#</a> å‘  <code>serice-feign</code>  æ¨¡å—æ·»åŠ ä¾èµ–</h4>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>org.springframework.cloud<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>spring-cloud-starter-netflix-hystrix<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><h4 id=\"é…ç½®æ–‡ä»¶-3\"><a class=\"anchor\" href=\"#é…ç½®æ–‡ä»¶-3\">#</a> é…ç½®æ–‡ä»¶</h4>\n<p>æ·»åŠ ç†”æ–­å™¨é…ç½®ï¼š</p>\n<figure class=\"highlight yml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># feign å¼€å¯ hystrix æ”¯æŒ</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token key atrule\">feign</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  <span class=\"token key atrule\">hystrix</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token key atrule\">enabled</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span></pre></td></tr></table></figure><h4 id=\"æ”¹å†™testservice-2\"><a class=\"anchor\" href=\"#æ”¹å†™testservice-2\">#</a> æ”¹å†™ TestService</h4>\n<p>æ–°å»º TestService æ¥å£çš„å®ç°ç±» TestServiceHystric.java ä½œä¸ºç†”æ–­å™¨ã€‚</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc<span class=\"token punctuation\">.</span>service<span class=\"token punctuation\">.</span>feign<span class=\"token punctuation\">.</span>service<span class=\"token punctuation\">.</span>hystric</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc<span class=\"token punctuation\">.</span>service<span class=\"token punctuation\">.</span>feign<span class=\"token punctuation\">.</span>service<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">TestService</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>stereotype<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Component</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token comment\">/**</pre></td></tr><tr><td data-num=\"7\"></td><td><pre> * @Auther: ErDong</pre></td></tr><tr><td data-num=\"8\"></td><td><pre> * @Email: xfc_exclave@163.com</pre></td></tr><tr><td data-num=\"9\"></td><td><pre> * @Date: 2019/12/27 0027 15:39</pre></td></tr><tr><td data-num=\"10\"></td><td><pre> * @Description:</pre></td></tr><tr><td data-num=\"11\"></td><td><pre> */</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token annotation punctuation\">@Component</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">TestServiceHystric</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">TestService</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> name<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token string\">\"hi,\"</span><span class=\"token operator\">+</span>name<span class=\"token operator\">+</span><span class=\"token string\">\",sorry,error!\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>åœ¨ @FeignClient æ³¨è§£ä¸­æŒ‡å®š fallback</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc<span class=\"token punctuation\">.</span>service<span class=\"token punctuation\">.</span>feign<span class=\"token punctuation\">.</span>service</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc<span class=\"token punctuation\">.</span>service<span class=\"token punctuation\">.</span>feign<span class=\"token punctuation\">.</span>service<span class=\"token punctuation\">.</span>hystric<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">TestServiceHystric</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>cloud<span class=\"token punctuation\">.</span>openfeign<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">FeignClient</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>web<span class=\"token punctuation\">.</span>bind<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">RequestMapping</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>web<span class=\"token punctuation\">.</span>bind<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">RequestMethod</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>web<span class=\"token punctuation\">.</span>bind<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">RequestParam</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\">/**</pre></td></tr><tr><td data-num=\"10\"></td><td><pre> * @Auther: ErDong</pre></td></tr><tr><td data-num=\"11\"></td><td><pre> * @Email: xfc_exclave@163.com</pre></td></tr><tr><td data-num=\"12\"></td><td><pre> * @Date: 2019/12/27 0027 14:38</pre></td></tr><tr><td data-num=\"13\"></td><td><pre> * @Description:</pre></td></tr><tr><td data-num=\"14\"></td><td><pre> */</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token annotation punctuation\">@FeignClient</span><span class=\"token punctuation\">(</span>value <span class=\"token operator\">=</span> <span class=\"token string\">\"EUREKA-CLIENT\"</span><span class=\"token punctuation\">,</span> fallback <span class=\"token operator\">=</span> <span class=\"token class-name\">TestServiceHystric</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token comment\">// æŒ‡å®šæœåŠ¡åç§°ï¼ŒæŒ‡å®šç†”æ–­å™¨</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">TestService</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token comment\">// æŒ‡å®šæœåŠ¡æ–¹æ³•åŠå‚æ•°</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token annotation punctuation\">@RequestMapping</span><span class=\"token punctuation\">(</span>value <span class=\"token operator\">=</span> <span class=\"token string\">\"/test\"</span><span class=\"token punctuation\">,</span> method <span class=\"token operator\">=</span> <span class=\"token class-name\">RequestMethod</span><span class=\"token punctuation\">.</span>GET<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token class-name\">String</span> <span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token annotation punctuation\">@RequestParam</span><span class=\"token punctuation\">(</span>value <span class=\"token operator\">=</span> <span class=\"token string\">\"name\"</span><span class=\"token punctuation\">)</span> <span class=\"token class-name\">String</span> name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre></pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h4 id=\"å¯åŠ¨æœåŠ¡åŠæµ‹è¯•ç†”æ–­å™¨åŠŸèƒ½-2\"><a class=\"anchor\" href=\"#å¯åŠ¨æœåŠ¡åŠæµ‹è¯•ç†”æ–­å™¨åŠŸèƒ½-2\">#</a> å¯åŠ¨æœåŠ¡åŠæµ‹è¯•ç†”æ–­å™¨åŠŸèƒ½</h4>\n<p>ä¸ ribbon ä¸­çš„æµ‹è¯•æ–¹æ³•ç›¸åŒã€‚</p>\n<h2 id=\"è·¯ç”±ç½‘å…³zuul\"><a class=\"anchor\" href=\"#è·¯ç”±ç½‘å…³zuul\">#</a> è·¯ç”±ç½‘å…³ï¼ˆzuulï¼‰</h2>\n<p>åœ¨å¾®æœåŠ¡æ¶æ„ä¸­ï¼Œéœ€è¦å‡ ä¸ªåŸºç¡€çš„æœåŠ¡æ²»ç†ç»„ä»¶ï¼ŒåŒ…æ‹¬æœåŠ¡æ³¨å†Œä¸å‘ç°ã€æœåŠ¡æ¶ˆè´¹ã€è´Ÿè½½å‡è¡¡ã€æ–­è·¯å™¨ã€æ™ºèƒ½è·¯ç”±ã€é…ç½®ç®¡ç†ç­‰ï¼Œç”±è¿™å‡ ä¸ªåŸºç¡€ç»„ä»¶ç›¸äº’åä½œï¼Œå…±åŒç»„å»ºäº†ä¸€ä¸ªç®€å•çš„å¾®æœåŠ¡ç³»ç»Ÿã€‚</p>\n<p>åœ¨ Spring Cloud å¾®æœåŠ¡ç³»ç»Ÿä¸­ï¼Œä¸€ç§å¸¸è§çš„è´Ÿè½½å‡è¡¡æ–¹å¼æ˜¯ï¼Œå®¢æˆ·ç«¯çš„è¯·æ±‚é¦–å…ˆç»è¿‡è´Ÿè½½å‡è¡¡ï¼ˆzuulã€Ngnixï¼‰ï¼Œå†åˆ°è¾¾æœåŠ¡ç½‘å…³ï¼ˆzuul é›†ç¾¤ï¼‰ï¼Œç„¶åå†åˆ°å…·ä½“çš„æœã€‚ï¼ŒæœåŠ¡ç»Ÿä¸€æ³¨å†Œåˆ°é«˜å¯ç”¨çš„æœåŠ¡æ³¨å†Œä¸­å¿ƒé›†ç¾¤ï¼ŒæœåŠ¡çš„æ‰€æœ‰çš„é…ç½®æ–‡ä»¶ç”±é…ç½®æœåŠ¡ç®¡ç†ï¼ˆä¸‹ä¸€ç¯‡æ–‡ç« è®²è¿°ï¼‰ï¼Œé…ç½®æœåŠ¡çš„é…ç½®æ–‡ä»¶æ”¾åœ¨ git ä»“åº“ï¼Œæ–¹ä¾¿å¼€å‘äººå‘˜éšæ—¶æ”¹é…ç½®ã€‚</p>\n<h3 id=\"zuulç®€ä»‹\"><a class=\"anchor\" href=\"#zuulç®€ä»‹\">#</a> Zuul ç®€ä»‹</h3>\n<blockquote>\n<p>Zuul is the front door for all requests from devices and web sites to the backend of the Netflix streaming application. As an edge service application, Zuul is built to enable dynamic routing, monitoring, resiliency and security. It also has the ability to route requests to multiple Amazon Auto Scaling Groups as appropriate.</p>\n<p>---- æ‘˜è‡ª https://github.com/Netflix/zuul/wiki</p>\n</blockquote>\n<blockquote>\n<p>Zuul çš„ä¸»è¦åŠŸèƒ½æ˜¯è·¯ç”±è½¬å‘å’Œè¿‡æ»¤å™¨ã€‚è·¯ç”±åŠŸèƒ½æ˜¯å¾®æœåŠ¡çš„ä¸€éƒ¨åˆ†ï¼Œæ¯”å¦‚ /api/user è½¬å‘åˆ°åˆ° user æœåŠ¡ï¼Œ/api/shop è½¬å‘åˆ°åˆ° shop æœåŠ¡ã€‚zuul é»˜è®¤å’Œ Ribbon ç»“åˆå®ç°äº†è´Ÿè½½å‡è¡¡çš„åŠŸèƒ½ã€‚</p>\n<p>zuul æœ‰ä»¥ä¸‹åŠŸèƒ½ï¼š</p>\n<ul>\n<li>Authentication</li>\n<li>Insights</li>\n<li>Stress Testing</li>\n<li>Canary Testing</li>\n<li>Dynamic Routing</li>\n<li>Service Migration</li>\n<li>Load Shedding</li>\n<li>Security</li>\n<li>Static Response handling</li>\n<li>Active/Active traffic management</li>\n</ul>\n<p>---- æ‘˜è‡ª https://blog.csdn.net/forezp/article/details/81041012</p>\n</blockquote>\n<h3 id=\"å‡†å¤‡å·¥ä½œ-4\"><a class=\"anchor\" href=\"#å‡†å¤‡å·¥ä½œ-4\">#</a> å‡†å¤‡å·¥ä½œ</h3>\n<p>æ¥ç»­ä¸Šä¸€æ–‡æ¡£ï¼Œåœ¨åŸæœ‰å·¥ç¨‹ä¸Šæ·»åŠ æ–°çš„æ¨¡å—ã€‚</p>\n<h3 id=\"åˆ›å»ºzuulè·¯ç”±ç½‘å…³\"><a class=\"anchor\" href=\"#åˆ›å»ºzuulè·¯ç”±ç½‘å…³\">#</a> åˆ›å»º zuul è·¯ç”±ç½‘å…³</h3>\n<h4 id=\"æ–°å»ºä¸€ä¸ªmoduleå¹¶æ·»åŠ zuulåŠeureka-clientä¾èµ–\"><a class=\"anchor\" href=\"#æ–°å»ºä¸€ä¸ªmoduleå¹¶æ·»åŠ zuulåŠeureka-clientä¾èµ–\">#</a> æ–°å»ºä¸€ä¸ª moduleï¼Œå¹¶æ·»åŠ  zuul åŠ eureka client ä¾èµ–ã€‚</h4>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>org.springframework.cloud<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>spring-cloud-starter-netflix-eureka-client<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>org.springframework.cloud<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>spring-cloud-starter-netflix-zuul<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><h4 id=\"é…ç½®æ–‡ä»¶-4\"><a class=\"anchor\" href=\"#é…ç½®æ–‡ä»¶-4\">#</a> é…ç½®æ–‡ä»¶</h4>\n<figure class=\"highlight yml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">server</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token key atrule\">port</span><span class=\"token punctuation\">:</span> <span class=\"token number\">8769</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token key atrule\">eureka</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token key atrule\">client</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token key atrule\">serviceUrl</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>      <span class=\"token key atrule\">defaultZone</span><span class=\"token punctuation\">:</span> http<span class=\"token punctuation\">:</span>//localhost<span class=\"token punctuation\">:</span>8761/eureka/</pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token key atrule\">spring</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>  <span class=\"token key atrule\">application</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> service<span class=\"token punctuation\">-</span>zuul</pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token comment\"># ä»¥ /api-a/ å¼€å¤´çš„è¯·æ±‚è½¬å‘è‡³ service-ribbon æœåŠ¡</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token comment\"># ä»¥ /api-b/ å¼€å¤´çš„è¯·æ±‚è½¬å‘è‡³ service-feign æœåŠ¡</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token key atrule\">zuul</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>  <span class=\"token key atrule\">routes</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token key atrule\">api-a</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>      <span class=\"token key atrule\">path</span><span class=\"token punctuation\">:</span> /api<span class=\"token punctuation\">-</span>a/<span class=\"token important\">**</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>      <span class=\"token key atrule\">serviceId</span><span class=\"token punctuation\">:</span> service<span class=\"token punctuation\">-</span>ribbon</pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token key atrule\">api-b</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>      <span class=\"token key atrule\">path</span><span class=\"token punctuation\">:</span> /api<span class=\"token punctuation\">-</span>b/<span class=\"token important\">**</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>      <span class=\"token key atrule\">serviceId</span><span class=\"token punctuation\">:</span> service<span class=\"token punctuation\">-</span>feign</pre></td></tr></table></figure><h4 id=\"é…ç½®å¯åŠ¨ç±»-4\"><a class=\"anchor\" href=\"#é…ç½®å¯åŠ¨ç±»-4\">#</a> é…ç½®å¯åŠ¨ç±»</h4>\n<p>åœ¨å¯åŠ¨ç±»ä¸­æ·»åŠ   <code>@EnableEurekaClient</code>  åŠ  <code>@EnableZuulProxy</code>  å¼€å¯ zuul çš„åŠŸèƒ½ã€‚</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc<span class=\"token punctuation\">.</span>service<span class=\"token punctuation\">.</span>zuul</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>boot<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">SpringApplication</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>boot<span class=\"token punctuation\">.</span>autoconfigure<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">SpringBootApplication</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>cloud<span class=\"token punctuation\">.</span>client<span class=\"token punctuation\">.</span>discovery<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">EnableDiscoveryClient</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>cloud<span class=\"token punctuation\">.</span>netflix<span class=\"token punctuation\">.</span>eureka<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">EnableEurekaClient</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>cloud<span class=\"token punctuation\">.</span>netflix<span class=\"token punctuation\">.</span>zuul<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">EnableZuulProxy</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token annotation punctuation\">@SpringBootApplication</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token annotation punctuation\">@EnableZuulProxy</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token annotation punctuation\">@EnableEurekaClient</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token annotation punctuation\">@EnableDiscoveryClient</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">ServiceZuulApplication</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        <span class=\"token class-name\">SpringApplication</span><span class=\"token punctuation\">.</span><span class=\"token function\">run</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">ServiceZuulApplication</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">,</span> args<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h4 id=\"å¯åŠ¨æœåŠ¡åŠæµ‹è¯•è·¯ç”±ç½‘å…³\"><a class=\"anchor\" href=\"#å¯åŠ¨æœåŠ¡åŠæµ‹è¯•è·¯ç”±ç½‘å…³\">#</a> å¯åŠ¨æœåŠ¡åŠæµ‹è¯•è·¯ç”±ç½‘å…³</h4>\n<ol>\n<li>\n<p>åˆ†åˆ«å¯åŠ¨ EurekaServerï¼Œä¸¤ä¸ª EurekaClient åŠ ServiceRibbonã€‚</p>\n</li>\n<li>\n<p>åˆ†åˆ«å¯åŠ¨ ServiceRibbon å’Œ ServiceFeign ä¸¤ä¸ªæœåŠ¡æ¶ˆè´¹è€…ã€‚</p>\n</li>\n<li>\n<p>å¯åŠ¨ ServiceZuul ç½‘å…³ã€‚</p>\n</li>\n<li>\n<p>è®¿é—®ï¼š</p>\n<p>å¤šæ¬¡è®¿é—® <span class=\"exturl\" data-url=\"aHR0cDovL2xvY2FsaG9zdDo4NzY5L2FwaS1hL3Rlc3Q/bmFtZT10ZXN0VXNlcg==\">http://localhost:8769/api-a/test?name=testUser</span></p>\n<p>ç»“æœå¦‚ä¸‹ï¼š</p>\n<p>hi testUser ,this test api is from port: 8762</p>\n<p>hi testUser ,this test api is from port: 8763</p>\n<p>hi testUser ,this test api is from port: 8762</p>\n<p>hi testUser ,this test api is from port: 8763</p>\n<p>â€¦â€¦</p>\n<p>å¤šæ¬¡è®¿é—® <span class=\"exturl\" data-url=\"aHR0cDovL2xvY2FsaG9zdDo4NzY5L2FwaS1iL3Rlc3Q/bmFtZT10ZXN0VXNlcg==\">http://localhost:8769/api-b/test?name=testUser</span></p>\n<p>ç»“æœå¦‚ä¸‹ï¼š</p>\n<p>hi testUser ,this test api is from port: 8762</p>\n<p>hi testUser ,this test api is from port: 8763</p>\n<p>hi testUser ,this test api is from port: 8762</p>\n<p>hi testUser ,this test api is from port: 8763</p>\n<p>â€¦â€¦</p>\n</li>\n<li>\n<p>æµ‹è¯•ç»“è®º</p>\n<p>zuul èµ·åˆ°è·¯ç”±çš„ä½œç”¨ï¼Œå®ƒå°†ä¸åŒè¯·æ±‚åˆ†å‘ä¸åŒçš„æœåŠ¡æ¶ˆè´¹è€…è¿›è¡Œå¤„ç†ã€‚</p>\n</li>\n</ol>\n<h3 id=\"æœåŠ¡è¿‡æ»¤\"><a class=\"anchor\" href=\"#æœåŠ¡è¿‡æ»¤\">#</a> æœåŠ¡è¿‡æ»¤</h3>\n<p>zuul ä¸ä»…åªæ˜¯è·¯ç”±ï¼Œå¹¶ä¸”è¿˜èƒ½è¿‡æ»¤ï¼Œåšä¸€äº›å®‰å…¨éªŒè¯ã€‚</p>\n<h4 id=\"æ·»åŠ è¿‡æ»¤å™¨\"><a class=\"anchor\" href=\"#æ·»åŠ è¿‡æ»¤å™¨\">#</a> æ·»åŠ è¿‡æ»¤å™¨</h4>\n<p>æ–°å»º TokenFilter.javaï¼Œç”¨äºè¿‡æ»¤ tokenã€‚</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc<span class=\"token punctuation\">.</span>service<span class=\"token punctuation\">.</span>zuul<span class=\"token punctuation\">.</span>filter</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>netflix<span class=\"token punctuation\">.</span>zuul<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">ZuulFilter</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>netflix<span class=\"token punctuation\">.</span>zuul<span class=\"token punctuation\">.</span>context<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">RequestContext</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>slf4j<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Logger</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>slf4j<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">LoggerFactory</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>stereotype<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Component</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">javax<span class=\"token punctuation\">.</span>servlet<span class=\"token punctuation\">.</span>http<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">HttpServletRequest</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token comment\">/**</pre></td></tr><tr><td data-num=\"12\"></td><td><pre> * @Auther: ErDong</pre></td></tr><tr><td data-num=\"13\"></td><td><pre> * @Email: xfc_exclave@163.com</pre></td></tr><tr><td data-num=\"14\"></td><td><pre> * @Date: 2019/12/27 21:29</pre></td></tr><tr><td data-num=\"15\"></td><td><pre> * @Description:</pre></td></tr><tr><td data-num=\"16\"></td><td><pre> */</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token annotation punctuation\">@Component</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">TokenFilter</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">ZuulFilter</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token keyword\">static</span> <span class=\"token class-name\">Logger</span> log <span class=\"token operator\">=</span> <span class=\"token class-name\">LoggerFactory</span><span class=\"token punctuation\">.</span><span class=\"token function\">getLogger</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">TokenFilter</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre></pre></td></tr><tr><td data-num=\"22\"></td><td><pre></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    <span class=\"token comment\">/**</pre></td></tr><tr><td data-num=\"24\"></td><td><pre>     * filterTypeï¼šè¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ä»£è¡¨è¿‡æ»¤å™¨çš„ç±»å‹ï¼Œåœ¨ zuul ä¸­å®šä¹‰äº†å››ç§ä¸åŒç”Ÿå‘½å‘¨æœŸçš„è¿‡æ»¤å™¨ç±»å‹ï¼Œå¦‚ä¸‹ï¼š</pre></td></tr><tr><td data-num=\"25\"></td><td><pre>     * 1. preï¼šå‰ç½®è¿‡æ»¤å™¨</pre></td></tr><tr><td data-num=\"26\"></td><td><pre>     * 2. routingï¼šè·¯ç”±ä¹‹æ—¶</pre></td></tr><tr><td data-num=\"27\"></td><td><pre>     * 3. postï¼š è·¯ç”±ä¹‹å</pre></td></tr><tr><td data-num=\"28\"></td><td><pre>     * 4. rrorï¼šå‘é€é”™è¯¯è°ƒç”¨</pre></td></tr><tr><td data-num=\"29\"></td><td><pre>     *</pre></td></tr><tr><td data-num=\"30\"></td><td><pre>     * @return</pre></td></tr><tr><td data-num=\"31\"></td><td><pre>     */</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>    <span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">filterType</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token string\">\"pre\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>    <span class=\"token comment\">/**</pre></td></tr><tr><td data-num=\"38\"></td><td><pre>     * è¿‡æ»¤çš„é¡ºåºï¼Œæ•°å­—è¶Šå¤§ï¼Œä¼˜å…ˆçº§è¶Šä½</pre></td></tr><tr><td data-num=\"39\"></td><td><pre>     *</pre></td></tr><tr><td data-num=\"40\"></td><td><pre>     * @return</pre></td></tr><tr><td data-num=\"41\"></td><td><pre>     */</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>    <span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">int</span> <span class=\"token function\">filterOrder</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre></pre></td></tr><tr><td data-num=\"47\"></td><td><pre>    <span class=\"token comment\">/**</pre></td></tr><tr><td data-num=\"48\"></td><td><pre>     * æ˜¯å¦è¦è¿›è¡Œè¿‡æ»¤</pre></td></tr><tr><td data-num=\"49\"></td><td><pre>     *</pre></td></tr><tr><td data-num=\"50\"></td><td><pre>     * @return</pre></td></tr><tr><td data-num=\"51\"></td><td><pre>     */</span></pre></td></tr><tr><td data-num=\"52\"></td><td><pre>    <span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"53\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">boolean</span> <span class=\"token function\">shouldFilter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"54\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"55\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"56\"></td><td><pre></pre></td></tr><tr><td data-num=\"57\"></td><td><pre>    <span class=\"token comment\">/**</pre></td></tr><tr><td data-num=\"58\"></td><td><pre>     * è¿‡æ»¤å™¨çš„å…·ä½“é€»è¾‘</pre></td></tr><tr><td data-num=\"59\"></td><td><pre>     *</pre></td></tr><tr><td data-num=\"60\"></td><td><pre>     * @return</pre></td></tr><tr><td data-num=\"61\"></td><td><pre>     */</span></pre></td></tr><tr><td data-num=\"62\"></td><td><pre>    <span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"63\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Object</span> <span class=\"token function\">run</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"64\"></td><td><pre>        <span class=\"token class-name\">RequestContext</span> ctx <span class=\"token operator\">=</span> <span class=\"token class-name\">RequestContext</span><span class=\"token punctuation\">.</span><span class=\"token function\">getCurrentContext</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"65\"></td><td><pre>        <span class=\"token class-name\">HttpServletRequest</span> request <span class=\"token operator\">=</span> ctx<span class=\"token punctuation\">.</span><span class=\"token function\">getRequest</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"66\"></td><td><pre>        log<span class=\"token punctuation\">.</span><span class=\"token function\">info</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">.</span><span class=\"token function\">format</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"%s >>> %s\"</span><span class=\"token punctuation\">,</span> request<span class=\"token punctuation\">.</span><span class=\"token function\">getMethod</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> request<span class=\"token punctuation\">.</span><span class=\"token function\">getRequestURL</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"67\"></td><td><pre>        <span class=\"token class-name\">Object</span> accessToken <span class=\"token operator\">=</span> request<span class=\"token punctuation\">.</span><span class=\"token function\">getParameter</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"token\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"68\"></td><td><pre>        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>accessToken <span class=\"token operator\">==</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"69\"></td><td><pre>            log<span class=\"token punctuation\">.</span><span class=\"token function\">warn</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"token is empty\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"70\"></td><td><pre>            ctx<span class=\"token punctuation\">.</span><span class=\"token function\">setSendZuulResponse</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"71\"></td><td><pre>            ctx<span class=\"token punctuation\">.</span><span class=\"token function\">setResponseStatusCode</span><span class=\"token punctuation\">(</span><span class=\"token number\">401</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"72\"></td><td><pre>            <span class=\"token keyword\">try</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"73\"></td><td><pre>                ctx<span class=\"token punctuation\">.</span><span class=\"token function\">getResponse</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getWriter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">write</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"token is empty\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"74\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Exception</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"75\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"76\"></td><td><pre>            <span class=\"token keyword\">return</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"77\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"78\"></td><td><pre>        log<span class=\"token punctuation\">.</span><span class=\"token function\">info</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ok\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"79\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"80\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"81\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h4 id=\"å¯åŠ¨æœåŠ¡åŠæµ‹è¯•è·¯ç”±è¿‡æ»¤\"><a class=\"anchor\" href=\"#å¯åŠ¨æœåŠ¡åŠæµ‹è¯•è·¯ç”±è¿‡æ»¤\">#</a> å¯åŠ¨æœåŠ¡åŠæµ‹è¯•è·¯ç”±è¿‡æ»¤</h4>\n<ol>\n<li>\n<p>è®¿é—®</p>\n<p>è®¿é—® <span class=\"exturl\" data-url=\"aHR0cDovL2xvY2FsaG9zdDo4NzY5L2FwaS1hL3Rlc3Q/bmFtZT10ZXN0VXNlcg==\">http://localhost:8769/api-a/test?name=testUser</span></p>\n<p>ç»“æœï¼štoken is empty</p>\n<p>è®¿é—® <span class=\"exturl\" data-url=\"aHR0cDovL2xvY2FsaG9zdDo4NzY5L2FwaS1iL3Rlc3Q/bmFtZT10ZXN0VXNlcg==\">http://localhost:8769/api-b/test?name=testUser</span></p>\n<p>ç»“æœï¼štoken is empty</p>\n<p>è®¿é—® <span class=\"exturl\" data-url=\"aHR0cDovL2xvY2FsaG9zdDo4NzY5L2FwaS1hL3Rlc3Q/bmFtZT10ZXN0VXNlciZhbXA7dG9rZW49YWJj\">http://localhost:8769/api-a/test?name=testUser&amp;token=abc</span></p>\n<p>ç»“æœï¼šhi testUser ,this test api is from port: 8762</p>\n<p>è®¿é—® <span class=\"exturl\" data-url=\"aHR0cDovL2xvY2FsaG9zdDo4NzY5L2FwaS1iL3Rlc3Q/bmFtZT10ZXN0VXNlciZhbXA7dG9rZW49YWJj\">http://localhost:8769/api-b/test?name=testUser&amp;token=abc</span></p>\n<p>ç»“æœï¼šhi testUser ,this test api is from port: 8763</p>\n</li>\n<li>\n<p>æµ‹è¯•ç»“è®º</p>\n<p>zuul å®ç°äº†æœåŠ¡è¿‡æ»¤ã€‚</p>\n</li>\n</ol>\n<h2 id=\"åˆ†å¸ƒå¼é…ç½®ä¸­å¿ƒspring-cloud-config\"><a class=\"anchor\" href=\"#åˆ†å¸ƒå¼é…ç½®ä¸­å¿ƒspring-cloud-config\">#</a> åˆ†å¸ƒå¼é…ç½®ä¸­å¿ƒï¼ˆSpring Cloud Configï¼‰</h2>\n<p>ä½¿ç”¨é…ç½®æœåŠ¡æ¥ä¿å­˜å„ä¸ªæœåŠ¡çš„é…ç½®æ–‡ä»¶ï¼Œå³ Spring Cloud Configã€‚</p>\n<h3 id=\"ç®€ä»‹\"><a class=\"anchor\" href=\"#ç®€ä»‹\">#</a> ç®€ä»‹</h3>\n<blockquote>\n<p><code>Spring Cloud Config</code>  ä¸ºåˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„å¤–éƒ¨é…ç½®æä¾›æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯æ”¯æŒã€‚ä½¿ç”¨  <code>Config Server</code>  ï¼Œæ‚¨å¯ä»¥åœ¨æ‰€æœ‰ç¯å¢ƒä¸­ç®¡ç†åº”ç”¨ç¨‹åºçš„å¤–éƒ¨å±æ€§ã€‚å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¸Šçš„æ¦‚å¿µæ˜ å°„ä¸  <code>Spring Environment</code>  å’Œ  <code>PropertySource</code>  æŠ½è±¡ç›¸åŒï¼Œå› æ­¤å®ƒä»¬ä¸ Spring åº”ç”¨ç¨‹åºéå¸¸å¥‘åˆï¼Œä½†å¯ä»¥ä¸ä»»ä½•ä»¥ä»»ä½•è¯­è¨€è¿è¡Œçš„åº”ç”¨ç¨‹åºä¸€èµ·ä½¿ç”¨ã€‚éšç€åº”ç”¨ç¨‹åºé€šè¿‡ä»å¼€å‘äººå‘˜åˆ°æµ‹è¯•å’Œç”Ÿäº§çš„éƒ¨ç½²æµç¨‹ï¼Œæ‚¨å¯ä»¥ç®¡ç†è¿™äº›ç¯å¢ƒä¹‹é—´çš„é…ç½®ï¼Œå¹¶ç¡®å®šåº”ç”¨ç¨‹åºå…·æœ‰è¿ç§»æ—¶éœ€è¦è¿è¡Œçš„ä¸€åˆ‡ã€‚æœåŠ¡å™¨å­˜å‚¨åç«¯çš„é»˜è®¤å®ç°ä½¿ç”¨ gitï¼Œå› æ­¤å®ƒè½»æ¾æ”¯æŒæ ‡ç­¾ç‰ˆæœ¬çš„é…ç½®ç¯å¢ƒï¼Œä»¥åŠå¯ä»¥è®¿é—®ç”¨äºç®¡ç†å†…å®¹çš„å„ç§å·¥å…·ã€‚å¯ä»¥è½»æ¾æ·»åŠ æ›¿ä»£å®ç°ï¼Œå¹¶ä½¿ç”¨ Spring é…ç½®å°†å…¶æ’å…¥ã€‚</p>\n<p>---- æ‘˜è‡ª https://www.springcloud.cc/spring-cloud-config.html</p>\n</blockquote>\n<blockquote>\n<p>åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œç”±äºæœåŠ¡æ•°é‡å·¨å¤šï¼Œä¸ºäº†æ–¹ä¾¿æœåŠ¡é…ç½®æ–‡ä»¶ç»Ÿä¸€ç®¡ç†ï¼Œå®æ—¶æ›´æ–°ï¼Œæ‰€ä»¥éœ€è¦åˆ†å¸ƒå¼é…ç½®ä¸­å¿ƒç»„ä»¶ã€‚åœ¨ Spring Cloud ä¸­ï¼Œæœ‰åˆ†å¸ƒå¼é…ç½®ä¸­å¿ƒç»„ä»¶ spring cloud config ï¼Œå®ƒæ”¯æŒé…ç½®æœåŠ¡æ”¾åœ¨é…ç½®æœåŠ¡çš„å†…å­˜ä¸­ï¼ˆå³æœ¬åœ°ï¼‰ï¼Œä¹Ÿæ”¯æŒæ”¾åœ¨è¿œç¨‹ Git ä»“åº“ä¸­ã€‚åœ¨ spring cloud config ç»„ä»¶ä¸­ï¼Œåˆ†ä¸¤ä¸ªè§’è‰²ï¼Œä¸€æ˜¯ config serverï¼ŒäºŒæ˜¯ config clientã€‚<br />\n---- æ‘˜è‡ª https://blog.csdn.net/forezp/article/details/81041028</p>\n</blockquote>\n<h3 id=\"æ„å»ºconfig-server\"><a class=\"anchor\" href=\"#æ„å»ºconfig-server\">#</a> æ„å»º Config Server</h3>\n<h4 id=\"æ–°å»ºä¸€ä¸ªmoduleå¹¶æ·»åŠ config-serverä¾èµ–\"><a class=\"anchor\" href=\"#æ–°å»ºä¸€ä¸ªmoduleå¹¶æ·»åŠ config-serverä¾èµ–\">#</a> æ–°å»ºä¸€ä¸ª moduleï¼Œå¹¶æ·»åŠ  config server ä¾èµ–ã€‚</h4>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>org.springframework.cloud<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>spring-cloud-config-server<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><h4 id=\"é…ç½®æ–‡ä»¶-5\"><a class=\"anchor\" href=\"#é…ç½®æ–‡ä»¶-5\">#</a> é…ç½®æ–‡ä»¶</h4>\n<figure class=\"highlight yml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">server</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token key atrule\">port</span><span class=\"token punctuation\">:</span> <span class=\"token number\">8888</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\"># å¦‚æœ Git ä»“åº“ä¸ºå…¬å¼€ä»“åº“ï¼Œå¯ä»¥ä¸å¡«å†™ç”¨æˆ·åå’Œå¯†ç </span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token key atrule\">spring</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  <span class=\"token key atrule\">application</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> config<span class=\"token punctuation\">-</span>server</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>  <span class=\"token key atrule\">cloud</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token key atrule\">config</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>      <span class=\"token key atrule\">label</span><span class=\"token punctuation\">:</span> master <span class=\"token comment\"># é…ç½®ä»“åº“çš„åˆ†æ”¯</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>      <span class=\"token key atrule\">server</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token key atrule\">git</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>          <span class=\"token key atrule\">uri</span><span class=\"token punctuation\">:</span> https<span class=\"token punctuation\">:</span>//github.com/forezp/SpringcloudConfig/ <span class=\"token comment\"># é…ç½® git ä»“åº“åœ°å€</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>          <span class=\"token key atrule\">searchPaths</span><span class=\"token punctuation\">:</span> respo <span class=\"token comment\"># é…ç½®ä»“åº“è·¯å¾„</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>          <span class=\"token key atrule\">username</span><span class=\"token punctuation\">:</span> <span class=\"token comment\"># è®¿é—® git ä»“åº“çš„ç”¨æˆ·å</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>          <span class=\"token key atrule\">password</span><span class=\"token punctuation\">:</span> <span class=\"token comment\"># è®¿é—® git ä»“åº“çš„ç”¨æˆ·å¯†ç </span></pre></td></tr></table></figure><h4 id=\"é…ç½®å¯åŠ¨ç±»-5\"><a class=\"anchor\" href=\"#é…ç½®å¯åŠ¨ç±»-5\">#</a> é…ç½®å¯åŠ¨ç±»</h4>\n<p>åœ¨å¯åŠ¨ç±»ä¸­æ·»åŠ   <code>@EnableConfigServer</code>  æ³¨è§£å¼€å¯é…ç½®æœåŠ¡å™¨çš„åŠŸèƒ½ã€‚</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc<span class=\"token punctuation\">.</span>config<span class=\"token punctuation\">.</span>server</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>boot<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">SpringApplication</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>boot<span class=\"token punctuation\">.</span>autoconfigure<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">SpringBootApplication</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>cloud<span class=\"token punctuation\">.</span>config<span class=\"token punctuation\">.</span>server<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">EnableConfigServer</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token annotation punctuation\">@SpringBootApplication</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token annotation punctuation\">@EnableConfigServer</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">ConfigServerApplication</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token class-name\">SpringApplication</span><span class=\"token punctuation\">.</span><span class=\"token function\">run</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">ConfigServerApplication</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">,</span> args<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h4 id=\"å¯åŠ¨æœåŠ¡åŠæµ‹è¯•configserver\"><a class=\"anchor\" href=\"#å¯åŠ¨æœåŠ¡åŠæµ‹è¯•configserver\">#</a> å¯åŠ¨æœåŠ¡åŠæµ‹è¯• ConfigServer</h4>\n<p>å¯åŠ¨æœåŠ¡åï¼Œè®¿é—® <span class=\"exturl\" data-url=\"aHR0cDovL2xvY2FsaG9zdDo4ODg4L2NvbmZpZy1jbGllbnQtZGV2LnByb3BlcnRpZXM=\">http://localhost:8888/config-client-dev.properties</span></p>\n<p>ç»“æœï¼š</p>\n<blockquote>\n<p>democonfigclient.message: hello spring io</p>\n<p>foo: foo version 21</p>\n</blockquote>\n<p>ç»“è®ºï¼šé…ç½®æœåŠ¡ä¸­å¿ƒå¯ä»¥ä»è¿œç¨‹ç¨‹åºè·å–é…ç½®ä¿¡æ¯ã€‚</p>\n<p>http è¯·æ±‚åœ°å€å’Œèµ„æºæ–‡ä»¶æ˜ å°„å¦‚ä¸‹ï¼š</p>\n<blockquote>\n<p>/<ruby>application}/{profiles:.\\[<rp>(</rp><rt>-\\].</rt><rp>)</rp></ruby></p>\n<p label:.*=\"\">/{application}/{profiles}/</p>\n<p>/{application}-{profiles}.properties</p>\n<p>/{label}/{application}-{profiles}.properties</p>\n<p>{application}-{profiles}.json</p>\n<p>/{label}/{application}-{profiles}.json</p>\n<p>/{application}-{profiles}.yml æˆ– /{application}-{profiles}.yml</p>\n<p>/{label}/{application}-{profiles}.yml æˆ– /{label}/{application}-{profiles}.yml</p>\n</blockquote>\n<h3 id=\"æ„å»ºconfig-client\"><a class=\"anchor\" href=\"#æ„å»ºconfig-client\">#</a> æ„å»º Config Client</h3>\n<h4 id=\"æ–°å»ºä¸€ä¸ªmoduleå¹¶æ·»åŠ config-clientä¾èµ–\"><a class=\"anchor\" href=\"#æ–°å»ºä¸€ä¸ªmoduleå¹¶æ·»åŠ config-clientä¾èµ–\">#</a> æ–°å»ºä¸€ä¸ª moduleï¼Œå¹¶æ·»åŠ  config client ä¾èµ–ã€‚</h4>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>org.springframework.boot<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>spring-boot-starter-web<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>org.springframework.cloud<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>spring-cloud-starter-config<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><h4 id=\"é…ç½®æ–‡ä»¶-6\"><a class=\"anchor\" href=\"#é…ç½®æ–‡ä»¶-6\">#</a> é…ç½®æ–‡ä»¶</h4>\n<figure class=\"highlight yml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">server</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token key atrule\">port</span><span class=\"token punctuation\">:</span> <span class=\"token number\">8881</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token key atrule\">spring</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token key atrule\">application</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> config<span class=\"token punctuation\">-</span>client</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  <span class=\"token key atrule\">cloud</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token key atrule\">config</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>      <span class=\"token key atrule\">label</span><span class=\"token punctuation\">:</span> master</pre></td></tr><tr><td data-num=\"10\"></td><td><pre>      <span class=\"token key atrule\">profile</span><span class=\"token punctuation\">:</span> dev <span class=\"token comment\"># devï¼šå¼€å‘ç¯å¢ƒï¼Œtestï¼šæµ‹è¯•ç¯å¢ƒï¼Œproï¼šç”Ÿäº§ç¯å¢ƒ</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>      <span class=\"token key atrule\">uri</span><span class=\"token punctuation\">:</span> http<span class=\"token punctuation\">:</span>//localhost<span class=\"token punctuation\">:</span>8888/ <span class=\"token comment\"># æŒ‡æ˜é…ç½®æœåŠ¡ä¸­å¿ƒçš„ç½‘å€</span></pre></td></tr></table></figure><h4 id=\"åˆ›å»ºæµ‹è¯•api\"><a class=\"anchor\" href=\"#åˆ›å»ºæµ‹è¯•api\">#</a> åˆ›å»ºæµ‹è¯• API</h4>\n<p>åœ¨å¯åŠ¨ç±»ä¸­æ·»åŠ  APIã€‚</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc<span class=\"token punctuation\">.</span>config<span class=\"token punctuation\">.</span>client</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>beans<span class=\"token punctuation\">.</span>factory<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Value</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>boot<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">SpringApplication</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>boot<span class=\"token punctuation\">.</span>autoconfigure<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">SpringBootApplication</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>web<span class=\"token punctuation\">.</span>bind<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">RequestMapping</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>web<span class=\"token punctuation\">.</span>bind<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">RestController</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token annotation punctuation\">@SpringBootApplication</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token annotation punctuation\">@RestController</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">ConfigClientApplication</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token class-name\">SpringApplication</span><span class=\"token punctuation\">.</span><span class=\"token function\">run</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">ConfigClientApplication</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">,</span> args<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token annotation punctuation\">@Value</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"$&#123;foo&#125;\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token class-name\">String</span> foo<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token annotation punctuation\">@RequestMapping</span><span class=\"token punctuation\">(</span>value <span class=\"token operator\">=</span> <span class=\"token string\">\"/getFoo\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">getFoo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>        <span class=\"token keyword\">return</span> foo<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre></pre></td></tr><tr><td data-num=\"25\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>å¯åŠ¨å¹¶è®¿é—® <span class=\"exturl\" data-url=\"aHR0cDovL2xvY2FsaG9zdDo4ODgxL2dldEZvbw==\">http://localhost:8881/getFoo</span></p>\n<p>ç»“æœï¼šfoo version 21</p>\n<p>ç»“è®ºï¼šconfig-client ä» config-server è·å–äº† foo çš„å±æ€§ï¼Œè€Œ config-server æ˜¯ä» git ä»“åº“è¯»å–çš„ã€‚</p>\n<h3 id=\"é«˜å¯ç”¨çš„åˆ†å¸ƒå¼é…ç½®ä¸­å¿ƒ\"><a class=\"anchor\" href=\"#é«˜å¯ç”¨çš„åˆ†å¸ƒå¼é…ç½®ä¸­å¿ƒ\">#</a> é«˜å¯ç”¨çš„åˆ†å¸ƒå¼é…ç½®ä¸­å¿ƒ</h3>\n<h4 id=\"æ”¹é€ config-server\"><a class=\"anchor\" href=\"#æ”¹é€ config-server\">#</a> æ”¹é€  config-server</h4>\n<ol>\n<li>\n<p>æ·»åŠ  eureka client ä¾èµ–</p>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>org.springframework.cloud<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>spring-cloud-starter-netflix-eureka-client<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure></li>\n<li>\n<p>ä¿®æ”¹é…ç½®æ–‡ä»¶</p>\n<figure class=\"highlight yml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">server</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token key atrule\">port</span><span class=\"token punctuation\">:</span> <span class=\"token number\">8888</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token key atrule\">eureka</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token key atrule\">client</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token key atrule\">serviceUrl</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>      <span class=\"token key atrule\">defaultZone</span><span class=\"token punctuation\">:</span> http<span class=\"token punctuation\">:</span>//localhost<span class=\"token punctuation\">:</span>8761/eureka/</pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\"># å¦‚æœ Git ä»“åº“ä¸ºå…¬å¼€ä»“åº“ï¼Œå¯ä»¥ä¸å¡«å†™ç”¨æˆ·åå’Œå¯†ç </span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token key atrule\">spring</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>  <span class=\"token key atrule\">application</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> config<span class=\"token punctuation\">-</span>server</pre></td></tr><tr><td data-num=\"13\"></td><td><pre>  <span class=\"token key atrule\">cloud</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token key atrule\">config</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>      <span class=\"token key atrule\">label</span><span class=\"token punctuation\">:</span> master <span class=\"token comment\"># é…ç½®ä»“åº“çš„åˆ†æ”¯</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>      <span class=\"token key atrule\">server</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        <span class=\"token key atrule\">git</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>          <span class=\"token key atrule\">uri</span><span class=\"token punctuation\">:</span> https<span class=\"token punctuation\">:</span>//github.com/forezp/SpringcloudConfig/ <span class=\"token comment\"># é…ç½® git ä»“åº“åœ°å€</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>          <span class=\"token key atrule\">searchPaths</span><span class=\"token punctuation\">:</span> respo <span class=\"token comment\"># é…ç½®ä»“åº“è·¯å¾„</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>          <span class=\"token key atrule\">username</span><span class=\"token punctuation\">:</span> <span class=\"token comment\"># è®¿é—® git ä»“åº“çš„ç”¨æˆ·å</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>          <span class=\"token key atrule\">password</span><span class=\"token punctuation\">:</span> <span class=\"token comment\"># è®¿é—® git ä»“åº“çš„ç”¨æˆ·å¯†ç </span></pre></td></tr></table></figure><ol start=\"3\">\n<li>ä¸»ç±»æ·»åŠ   <code>@EnableEurekaClient</code>  æ³¨è§£</li>\n</ol>\n</li>\n</ol>\n<h4 id=\"æ”¹é€ config-client\"><a class=\"anchor\" href=\"#æ”¹é€ config-client\">#</a> æ”¹é€  config-client</h4>\n<ol>\n<li>\n<p>æ·»åŠ  eureka client ä¾èµ–</p>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>org.springframework.cloud<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>spring-cloud-starter-netflix-eureka-client<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure></li>\n<li>\n<p>ä¿®æ”¹é…ç½®æ–‡ä»¶</p>\n<figure class=\"highlight yml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">server</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token key atrule\">port</span><span class=\"token punctuation\">:</span> <span class=\"token number\">8881</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token key atrule\">eureka</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token key atrule\">client</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token key atrule\">serviceUrl</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>      <span class=\"token key atrule\">defaultZone</span><span class=\"token punctuation\">:</span> http<span class=\"token punctuation\">:</span>//localhost<span class=\"token punctuation\">:</span>8761/eureka/</pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token key atrule\">spring</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>  <span class=\"token key atrule\">application</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> config<span class=\"token punctuation\">-</span>client</pre></td></tr><tr><td data-num=\"12\"></td><td><pre>  <span class=\"token key atrule\">cloud</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token key atrule\">config</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>      <span class=\"token key atrule\">label</span><span class=\"token punctuation\">:</span> master</pre></td></tr><tr><td data-num=\"15\"></td><td><pre>      <span class=\"token key atrule\">profile</span><span class=\"token punctuation\">:</span> dev <span class=\"token comment\"># devï¼šå¼€å‘ç¯å¢ƒï¼Œtestï¼šæµ‹è¯•ç¯å¢ƒï¼Œproï¼šç”Ÿäº§ç¯å¢ƒ</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>      <span class=\"token key atrule\">discovery</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        <span class=\"token key atrule\">enabled</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        <span class=\"token key atrule\">serviceId</span><span class=\"token punctuation\">:</span> config<span class=\"token punctuation\">-</span>server <span class=\"token comment\"># é€šè¿‡æœåŠ¡åæŒ‡å®šé…ç½®æœåŠ¡ä¸­å¿ƒï¼ˆéœ€è¦ config-server å’Œ config-client éƒ½åœ¨æœåŠ¡æ³¨å†Œä¸­å¿ƒæ³¨å†Œï¼‰</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token comment\">#      uri: http://localhost:8888/ # é€šè¿‡ç½‘å€æŒ‡å®šé…ç½®æœåŠ¡ä¸­å¿ƒ</span></pre></td></tr></table></figure><ol start=\"3\">\n<li>ä¸»ç±»æ·»åŠ   <code>@EnableEurekaClient</code>  æ³¨è§£</li>\n</ol>\n</li>\n</ol>\n<h4 id=\"å¯åŠ¨å¹¶æµ‹è¯•\"><a class=\"anchor\" href=\"#å¯åŠ¨å¹¶æµ‹è¯•\">#</a> å¯åŠ¨å¹¶æµ‹è¯•</h4>\n<p>ä¾æ¬¡å¯åŠ¨  <code>eureka-server</code>  ï¼Œ  <code>config-server</code>  å’Œ  <code>config-client</code>  ã€‚</p>\n<p>è®¿é—® <span class=\"exturl\" data-url=\"aHR0cDovL2xvY2FsaG9zdDo4NzYxLw==\">http://localhost:8761/</span></p>\n<p>ç»“æœï¼šå¯ä»¥çœ‹åˆ°  <code>config-server</code>  å’Œ  <code>config-client</code>  å‡æ³¨å†Œåˆ°æœåŠ¡æ³¨å†Œä¸­å¿ƒã€‚</p>\n<p>è®¿é—® <span class=\"exturl\" data-url=\"aHR0cDovL2xvY2FsaG9zdDo4ODgxL2dldEZvbw==\">http://localhost:8881/getFoo</span></p>\n<p>ç»“æœï¼šfoo version 21</p>\n<p>ç»“è®ºï¼š <code>config-server</code>  åŠ  <code>config-client</code>  å¯ä»¥åŒæ—¶ä½œä¸º EurekaClient æ³¨å†Œåˆ°æœåŠ¡æ³¨å†Œä¸­å¿ƒï¼Œæœ€ç»ˆå®ç°é«˜å¯ç”¨ã€‚</p>\n<h2 id=\"æ¶ˆæ¯æ€»çº¿spring-cloud-bus\"><a class=\"anchor\" href=\"#æ¶ˆæ¯æ€»çº¿spring-cloud-bus\">#</a> æ¶ˆæ¯æ€»çº¿ï¼ˆSpring Cloud Busï¼‰</h2>\n<p>Spring Cloud Bus å°†åˆ†å¸ƒå¼çš„èŠ‚ç‚¹ç”¨è½»é‡çš„æ¶ˆæ¯ä»£ç†è¿æ¥èµ·æ¥ã€‚å®ƒå¯ä»¥ç”¨äºå¹¿æ’­é…ç½®æ–‡ä»¶çš„æ›´æ”¹æˆ–è€…æœåŠ¡ä¹‹é—´çš„é€šè®¯ï¼Œä¹Ÿå¯ä»¥ç”¨äºç›‘æ§ã€‚æœ¬æ–‡è¦è®²è¿°çš„æ˜¯ç”¨ Spring Cloud Bus å®ç°é€šçŸ¥å¾®æœåŠ¡æ¶æ„çš„é…ç½®æ–‡ä»¶çš„æ›´æ”¹ã€‚</p>\n<h3 id=\"å‡†å¤‡å·¥ä½œ-5\"><a class=\"anchor\" href=\"#å‡†å¤‡å·¥ä½œ-5\">#</a> å‡†å¤‡å·¥ä½œ</h3>\n<p>ä¸‹è½½å®‰è£… Erlang åŠ RabbitMQã€‚</p>\n<h3 id=\"æ”¹é€ config-clientæ¨¡å—\"><a class=\"anchor\" href=\"#æ”¹é€ config-clientæ¨¡å—\">#</a> æ”¹é€  config-client æ¨¡å—</h3>\n<h4 id=\"ä¾èµ–\"><a class=\"anchor\" href=\"#ä¾èµ–\">#</a> ä¾èµ–</h4>\n<p>æ·»åŠ  bus-ampq ä¾èµ–ã€‚</p>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>org.springframework.cloud<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>spring-cloud-starter-bus-amqp<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>org.springframework.boot<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>spring-boot-starter-actuator<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><h4 id=\"é…ç½®æ–‡ä»¶-7\"><a class=\"anchor\" href=\"#é…ç½®æ–‡ä»¶-7\">#</a> é…ç½®æ–‡ä»¶</h4>\n<p>ä¿®æ”¹é…ç½®æ–‡ä»¶ã€‚</p>\n<figure class=\"highlight yml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">server</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token key atrule\">port</span><span class=\"token punctuation\">:</span> <span class=\"token number\">8881</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token key atrule\">eureka</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token key atrule\">client</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token key atrule\">serviceUrl</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>      <span class=\"token key atrule\">defaultZone</span><span class=\"token punctuation\">:</span> http<span class=\"token punctuation\">:</span>//localhost<span class=\"token punctuation\">:</span>8761/eureka/</pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token key atrule\">management</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>  <span class=\"token key atrule\">endpoints</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token key atrule\">web</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>      <span class=\"token key atrule\">exposure</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token key atrule\">include</span><span class=\"token punctuation\">:</span> bus<span class=\"token punctuation\">-</span>refresh</pre></td></tr><tr><td data-num=\"14\"></td><td><pre></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token key atrule\">spring</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>  <span class=\"token key atrule\">application</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> config<span class=\"token punctuation\">-</span>client</pre></td></tr><tr><td data-num=\"18\"></td><td><pre>  <span class=\"token key atrule\">cloud</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token key atrule\">config</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>      <span class=\"token key atrule\">label</span><span class=\"token punctuation\">:</span> master</pre></td></tr><tr><td data-num=\"21\"></td><td><pre>      <span class=\"token key atrule\">profile</span><span class=\"token punctuation\">:</span> dev <span class=\"token comment\"># devï¼šå¼€å‘ç¯å¢ƒï¼Œtestï¼šæµ‹è¯•ç¯å¢ƒï¼Œproï¼šç”Ÿäº§ç¯å¢ƒ</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>      <span class=\"token key atrule\">discovery</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>        <span class=\"token key atrule\">enabled</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>        <span class=\"token key atrule\">serviceId</span><span class=\"token punctuation\">:</span> config<span class=\"token punctuation\">-</span>server <span class=\"token comment\"># é€šè¿‡æœåŠ¡åæŒ‡å®šé…ç½®æœåŠ¡ä¸­å¿ƒï¼ˆéœ€è¦ config-server å’Œ config-client éƒ½åœ¨æœåŠ¡æ³¨å†Œä¸­å¿ƒæ³¨å†Œï¼‰</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre><span class=\"token comment\">#      uri: http://localhost:8888/ # é€šè¿‡ç½‘å€æŒ‡å®šé…ç½®æœåŠ¡ä¸­å¿ƒ</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>    <span class=\"token key atrule\">bus</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>      <span class=\"token key atrule\">enabled</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>      <span class=\"token key atrule\">trace</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>        <span class=\"token key atrule\">enabled</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>  <span class=\"token key atrule\">rabbitmq</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>    <span class=\"token key atrule\">host</span><span class=\"token punctuation\">:</span> localhost</pre></td></tr><tr><td data-num=\"32\"></td><td><pre>    <span class=\"token key atrule\">password</span><span class=\"token punctuation\">:</span> guest</pre></td></tr><tr><td data-num=\"33\"></td><td><pre>    <span class=\"token key atrule\">port</span><span class=\"token punctuation\">:</span> <span class=\"token number\">5672</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>    <span class=\"token key atrule\">username</span><span class=\"token punctuation\">:</span> guest</pre></td></tr></table></figure><h4 id=\"å¯åŠ¨ç±»\"><a class=\"anchor\" href=\"#å¯åŠ¨ç±»\">#</a> å¯åŠ¨ç±»</h4>\n<p>å¯åŠ¨ç±»ä¸­æ·»åŠ ç±»æ³¨è§£  <code>@RefreshScope</code></p>\n<h3 id=\"å¯åŠ¨æœåŠ¡åŠæµ‹è¯•\"><a class=\"anchor\" href=\"#å¯åŠ¨æœåŠ¡åŠæµ‹è¯•\">#</a> å¯åŠ¨æœåŠ¡åŠæµ‹è¯•</h3>\n<p>å¤åˆ¶ä¸€ä»½  <code>config-client</code>  ï¼Œç«¯å£æ”¹ä¸º 8882ã€‚</p>\n<p>ä¾æ¬¡å¯åŠ¨  <code>eureka-server</code>  ï¼Œ  <code>config-server</code>  åŠç«¯å£ä¸º 8881 å’Œ 8882 çš„ä¸¤ä¸ª  <code>config-client</code>  ã€‚</p>\n<p>è®¿é—® <span class=\"exturl\" data-url=\"aHR0cDovL2xvY2FsaG9zdDo4ODgxL2dldEZvbw==\">http://localhost:8881/getFoo</span></p>\n<p>è®¿é—® <span class=\"exturl\" data-url=\"aHR0cDovL2xvY2FsaG9zdDo4ODgyL2dldEZvbw==\">http://localhost:8882/getFoo</span></p>\n<p>è¿”å›ç»“æœå‡å¦‚ä¸‹ï¼š</p>\n<blockquote>\n<p>foo version 3</p>\n</blockquote>\n<p>æ­¤æ—¶å‰å¾€é…ç½®ä¸­å¿ƒä»“åº“ä¿®æ”¹ foo é…ç½®ä¸º  <code>foo version 22</code></p>\n<p>è®¿é—® getFooï¼Œè¿”å›ç»“æœä»ä¸º  <code>foo version 3</code></p>\n<p>ä½¿ç”¨ http å·¥å…·å‘é€ POST è¯·æ±‚</p>\n<pre><code>http://localhost:8881/actuator/bus-refresh\n</code></pre>\n<p>æŸ¥çœ‹  <code>config-server</code>  æ§åˆ¶å°ï¼Œæ˜¾ç¤ºå·²ä»é…ç½®ä¸­å¿ƒä»“åº“ä¸­è·å–åˆ°æœ€æ–°çš„é…ç½®æ–‡ä»¶ã€‚</p>\n<p>å†æ¬¡è®¿é—® getFooï¼Œè¿”å›ç»“æœå¦‚ä¸‹ï¼š</p>\n<blockquote>\n<p>foo version 22</p>\n</blockquote>\n<p>ç»“è®ºï¼š</p>\n<blockquote>\n<p>å½“ git æ–‡ä»¶æ›´æ”¹çš„æ—¶å€™ï¼Œé€šè¿‡ pc ç«¯ç”¨ post å‘ç«¯å£ä¸º 8882 çš„ config-client å‘é€è¯·æ±‚ /bus/refreshï¼ï¼›æ­¤æ—¶ 8882 ç«¯å£ä¼šå‘é€ä¸€ä¸ªæ¶ˆæ¯ï¼Œç”±æ¶ˆæ¯æ€»çº¿å‘å…¶ä»–æœåŠ¡ä¼ é€’ï¼Œä»è€Œä½¿æ•´ä¸ªå¾®æœåŠ¡é›†ç¾¤éƒ½è¾¾åˆ°æ›´æ–°é…ç½®æ–‡ä»¶ã€‚</p>\n</blockquote>\n<h2 id=\"æœåŠ¡é“¾è·¯è¿½è¸ªspring-cloud-sleuth\"><a class=\"anchor\" href=\"#æœåŠ¡é“¾è·¯è¿½è¸ªspring-cloud-sleuth\">#</a> æœåŠ¡é“¾è·¯è¿½è¸ªï¼ˆSpring Cloud Sleuthï¼‰</h2>\n<h3 id=\"ç®€ä»‹-2\"><a class=\"anchor\" href=\"#ç®€ä»‹-2\">#</a> ç®€ä»‹</h3>\n<blockquote>\n<p>Add sleuth to the classpath of a Spring Boot application (see below for Maven and Gradle examples), and you will see the correlation data being collected in logs, as long as you are logging requests.</p>\n<p>---- æ‘˜è‡ª https://github.com/spring-cloud/spring-cloud-sleuth</p>\n</blockquote>\n<p>Spring Cloud Sleuth ä¸»è¦åŠŸèƒ½å°±æ˜¯åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­æä¾›è¿½è¸ªè§£å†³æ–¹æ¡ˆï¼Œå¹¶ä¸”å…¼å®¹æ”¯æŒäº† zipkinï¼Œä½ åªéœ€è¦åœ¨ pom æ–‡ä»¶ä¸­å¼•å…¥ç›¸åº”çš„ä¾èµ–å³å¯ã€‚</p>\n<h3 id=\"æ„å»ºserver-zipkin\"><a class=\"anchor\" href=\"#æ„å»ºserver-zipkin\">#</a> æ„å»º server-zipkin</h3>\n<h4 id=\"ä¸‹è½½-zipkin\"><a class=\"anchor\" href=\"#ä¸‹è½½-zipkin\">#</a> ä¸‹è½½  <code>zipkin</code></h4>\n<p>ä¸‹è½½åœ°å€ï¼š<span class=\"exturl\" data-url=\"aHR0cHM6Ly9kbC5iaW50cmF5LmNvbS9vcGVuemlwa2luL21hdmVuL2lvL3ppcGtpbi9qYXZhL3ppcGtpbi1zZXJ2ZXIv\">https://dl.bintray.com/openzipkin/maven/io/zipkin/java/zipkin-server/</span></p>\n<h4 id=\"è¿è¡Œ\"><a class=\"anchor\" href=\"#è¿è¡Œ\">#</a> è¿è¡Œ</h4>\n<blockquote>\n<p>java -jar D:\\jar\\zipkin\\zipkin-server-2.10.1-exec.jar</p>\n</blockquote>\n<h4 id=\"è®¿é—®\"><a class=\"anchor\" href=\"#è®¿é—®\">#</a> è®¿é—®</h4>\n<p>zipkin é»˜è®¤ç«¯å£ä¸º  <code>9411</code>  ã€‚</p>\n<p>æµè§ˆå™¨è®¿é—®ï¼š<span class=\"exturl\" data-url=\"aHR0cDovL2xvY2FsaG9zdDo5NDEx\">http://localhost:9411</span></p>\n<h3 id=\"åˆ›å»ºæµ‹è¯•æ¨¡å—\"><a class=\"anchor\" href=\"#åˆ›å»ºæµ‹è¯•æ¨¡å—\">#</a> åˆ›å»ºæµ‹è¯•æ¨¡å—</h3>\n<p>åˆ›å»ºæ¨¡å—  <code>service-zipkin-test1</code>  å’Œ  <code>service-zipkin-test2</code>  ã€‚</p>\n<h4 id=\"åˆ›å»ºæ¨¡å—å¹¶æ·»åŠ ä¾èµ–\"><a class=\"anchor\" href=\"#åˆ›å»ºæ¨¡å—å¹¶æ·»åŠ ä¾èµ–\">#</a> åˆ›å»ºæ¨¡å—å¹¶æ·»åŠ ä¾èµ–</h4>\n<p>æ·»åŠ  zipkin-client ä¾èµ–ï¼š</p>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>org.springframework.boot<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>spring-boot-starter-web<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>org.springframework.cloud<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>spring-cloud-starter-zipkin<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><h4 id=\"é…ç½®æ–‡ä»¶-8\"><a class=\"anchor\" href=\"#é…ç½®æ–‡ä»¶-8\">#</a> é…ç½®æ–‡ä»¶</h4>\n<figure class=\"highlight yml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">server</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token key atrule\">port</span><span class=\"token punctuation\">:</span> <span class=\"token number\">8989</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token key atrule\">spring</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token key atrule\">application</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> service<span class=\"token punctuation\">-</span>zipkin<span class=\"token punctuation\">-</span>test2</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  <span class=\"token key atrule\">zipkin</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token key atrule\">base-url</span><span class=\"token punctuation\">:</span> http<span class=\"token punctuation\">:</span>//localhost<span class=\"token punctuation\">:</span><span class=\"token number\">9411</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token key atrule\">sleuth</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>      <span class=\"token key atrule\">sampler</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token key atrule\">probability</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1.0</span></pre></td></tr></table></figure><h4 id=\"å¯åŠ¨ç±»-2\"><a class=\"anchor\" href=\"#å¯åŠ¨ç±»-2\">#</a> å¯åŠ¨ç±»</h4>\n<p>æ¨¡å—  <code>service-zipkin-test1</code>  å¯åŠ¨ç±»ï¼š</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc<span class=\"token punctuation\">.</span>service<span class=\"token punctuation\">.</span>zipkin<span class=\"token punctuation\">.</span>test1</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">brave<span class=\"token punctuation\">.</span>sampler<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Sampler</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>beans<span class=\"token punctuation\">.</span>factory<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Autowired</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>boot<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">SpringApplication</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>boot<span class=\"token punctuation\">.</span>autoconfigure<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">SpringBootApplication</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>context<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Bean</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>web<span class=\"token punctuation\">.</span>bind<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">RequestMapping</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>web<span class=\"token punctuation\">.</span>bind<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">RestController</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>web<span class=\"token punctuation\">.</span>client<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">RestTemplate</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span>logging<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Level</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span>logging<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Logger</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token annotation punctuation\">@SpringBootApplication</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token annotation punctuation\">@RestController</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">ServiceZipkinTest1Application</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">Logger</span> LOG <span class=\"token operator\">=</span> <span class=\"token class-name\">Logger</span><span class=\"token punctuation\">.</span><span class=\"token function\">getLogger</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">ServiceZipkinTest1Application</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">.</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>        <span class=\"token class-name\">SpringApplication</span><span class=\"token punctuation\">.</span><span class=\"token function\">run</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">ServiceZipkinTest1Application</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">,</span> args<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>    <span class=\"token annotation punctuation\">@Autowired</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">RestTemplate</span> restTemplate<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>    <span class=\"token annotation punctuation\">@Bean</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">RestTemplate</span> <span class=\"token function\">getRestTemplate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">RestTemplate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>    <span class=\"token annotation punctuation\">@RequestMapping</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/test1\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">callTest2</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>        LOG<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Level</span><span class=\"token punctuation\">.</span>INFO<span class=\"token punctuation\">,</span> <span class=\"token string\">\"interface of test1 application\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>        <span class=\"token keyword\">return</span> restTemplate<span class=\"token punctuation\">.</span><span class=\"token function\">getForObject</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"http://localhost:8989/test2\"</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>    <span class=\"token annotation punctuation\">@RequestMapping</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/info\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">info</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>        LOG<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Level</span><span class=\"token punctuation\">.</span>INFO<span class=\"token punctuation\">,</span> <span class=\"token string\">\"application info of test1\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token string\">\"application info of test1\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre></pre></td></tr><tr><td data-num=\"46\"></td><td><pre>    <span class=\"token annotation punctuation\">@Bean</span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Sampler</span> <span class=\"token function\">defaultSampler</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token class-name\">Sampler</span><span class=\"token punctuation\">.</span>ALWAYS_SAMPLE<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre></pre></td></tr><tr><td data-num=\"51\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>æ¨¡å—  <code>service-zipkin-test2</code>  å¯åŠ¨ç±»ï¼š</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc<span class=\"token punctuation\">.</span>service<span class=\"token punctuation\">.</span>zipkin<span class=\"token punctuation\">.</span>test2</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">brave<span class=\"token punctuation\">.</span>sampler<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Sampler</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>beans<span class=\"token punctuation\">.</span>factory<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Autowired</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>boot<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">SpringApplication</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>boot<span class=\"token punctuation\">.</span>autoconfigure<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">SpringBootApplication</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>context<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Bean</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>web<span class=\"token punctuation\">.</span>bind<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">RequestMapping</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>web<span class=\"token punctuation\">.</span>bind<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">RestController</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>web<span class=\"token punctuation\">.</span>client<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">RestTemplate</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span>logging<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Level</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span>logging<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Logger</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token annotation punctuation\">@SpringBootApplication</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token annotation punctuation\">@RestController</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">ServiceZipkinTest2Application</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>        <span class=\"token class-name\">SpringApplication</span><span class=\"token punctuation\">.</span><span class=\"token function\">run</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">ServiceZipkinTest2Application</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">,</span> args<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">Logger</span> LOG <span class=\"token operator\">=</span> <span class=\"token class-name\">Logger</span><span class=\"token punctuation\">.</span><span class=\"token function\">getLogger</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">ServiceZipkinTest2Application</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">.</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>    <span class=\"token annotation punctuation\">@Autowired</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">RestTemplate</span> restTemplate<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>    <span class=\"token annotation punctuation\">@RequestMapping</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/test2\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">callTest1Info</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>        LOG<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Level</span><span class=\"token punctuation\">.</span>INFO<span class=\"token punctuation\">,</span> <span class=\"token string\">\"interface of test2 application\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>        <span class=\"token keyword\">return</span> restTemplate<span class=\"token punctuation\">.</span><span class=\"token function\">getForObject</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"http://localhost:8988/info\"</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>    <span class=\"token annotation punctuation\">@RequestMapping</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/info\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">home</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>        LOG<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Level</span><span class=\"token punctuation\">.</span>INFO<span class=\"token punctuation\">,</span> <span class=\"token string\">\"application info of test2\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token string\">\"application info of test2\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>    <span class=\"token annotation punctuation\">@Bean</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">RestTemplate</span> <span class=\"token function\">getRestTemplate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">RestTemplate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre></pre></td></tr><tr><td data-num=\"45\"></td><td><pre>    <span class=\"token annotation punctuation\">@Bean</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Sampler</span> <span class=\"token function\">defaultSampler</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token class-name\">Sampler</span><span class=\"token punctuation\">.</span>ALWAYS_SAMPLE<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre></pre></td></tr><tr><td data-num=\"50\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h4 id=\"è®¿é—®æµ‹è¯•\"><a class=\"anchor\" href=\"#è®¿é—®æµ‹è¯•\">#</a> è®¿é—®æµ‹è¯•</h4>\n<ul>\n<li>\n<p>å‚è€ƒä¸Šæ–‡å¯åŠ¨ server-zipkin æœåŠ¡ã€‚</p>\n</li>\n<li>\n<p>å¯åŠ¨æ¨¡å—  <code>service-zipkin-test1</code>  å’Œ  <code>service-zipkin-test2</code>  ã€‚</p>\n</li>\n<li>\n<p>è®¿é—®ï¼š<span class=\"exturl\" data-url=\"aHR0cDovL2xvY2FsaG9zdDo4OTg5L3Rlc3QyJUVGJUJDJThDJUU4JUJGJTk0JUU1JTlCJTlFJUU3JUJCJTkzJUU2JTlFJTlDJUVGJUJDJTlB\">http://localhost:8989/test2ï¼Œè¿”å›ç»“æœï¼š</span></p>\n<blockquote>\n<p>application info of test1</p>\n</blockquote>\n</li>\n<li>\n<p>è®¿é—®ï¼š<span class=\"exturl\" data-url=\"aHR0cDovL2xvY2FsaG9zdDo4OTg4L3Rlc3QxJUVGJUJDJThDJUU4JUJGJTk0JUU1JTlCJTlFJUU3JUJCJTkzJUU2JTlFJTlDJUVGJUJDJTlB\">http://localhost:8988/test1ï¼Œè¿”å›ç»“æœï¼š</span></p>\n<blockquote>\n<p>application info of test1</p>\n</blockquote>\n</li>\n<li>\n<p>è®¿é—®ï¼š<span class=\"exturl\" data-url=\"aHR0cDovL2xvY2FsaG9zdDo5NDExLyVFRiVCQyU4QyVFOCVCRiU5QiVFOCVBMSU4QyVFOCVCRiVCRCVFOCVCOCVBQQ==\">http://localhost:9411/ï¼Œè¿›è¡Œè¿½è¸ª</span></p>\n<p>å³å¯åœ¨  <code>ä¾èµ–</code>  ä¸­æŸ¥çœ‹åˆ°ä¸¤ä¸ªå·¥ç¨‹æ¨¡å—ä¹‹é—´çš„ä¾èµ–å…³ç³»ã€‚</p>\n</li>\n</ul>\n<h2 id=\"å‚è€ƒ\"><a class=\"anchor\" href=\"#å‚è€ƒ\">#</a> å‚è€ƒ</h2>\n<ul>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuZmFuZ3poaXBlbmcuY29tL3NwcmluZ2Nsb3VkLzIwMTgvMDgvMDEvc2MtZjEtZXVyZWthLmh0bWw=\">æ–¹å¿—æœ‹çš„ä¸“æ </span></li>\n</ul>\n",
            "tags": [
                "è®¡ç®—æœºç§‘å­¦",
                "JAVAå­¦ä¹ è·¯çº¿",
                "è¿›é˜¶ç¯‡",
                "java",
                "Spring Cloud"
            ]
        },
        {
            "id": "https://www.chinmoku.cc/computer-science/java-learning-path/1-basic/02-java-concurrency/",
            "url": "https://www.chinmoku.cc/computer-science/java-learning-path/1-basic/02-java-concurrency/",
            "title": "Java å¹¶å‘ç¼–ç¨‹çŸ¥è¯†æ•´ç†",
            "date_published": "2021-08-25T11:37:53.000Z",
            "content_html": "<div class=\"note info\">\n<p>å¹¶å‘ç¼–ç¨‹å…¶å®æ˜¯ä¸€ä¸ªå¾ˆå®å¤§çš„è¯é¢˜ï¼Œå¹¶ä¸æ˜¯é€šè¿‡ä¸€ä¸¤ç¯‡æ–‡ç« å°±èƒ½å™è¿°è¯¦å°½çš„ã€‚æœ¬æ–‡å°½é‡æ¶‰åŠåˆ°å¹¶å‘ç¼–ç¨‹çš„æ‰€æœ‰åŸºç¡€çŸ¥è¯†ï¼Œä½†å¯¹äºå¾ˆå¤šçŸ¥è¯†ç‚¹ï¼Œå¦‚æœéœ€è¦è¿›è¡Œæ·±å…¥äº†è§£ï¼Œä»…ä»…é€šè¿‡æœ¬æ–‡ä»æ˜¯ä¸å¤Ÿçš„ã€‚å¦å¤–ï¼Œæœ‰è®¸å¤šçŸ¥è¯†å…¶å®é€šè¿‡é˜…è¯»æºç çš„æ–¹å¼æ›´åŠ å®¹æ˜“ç†è§£ã€‚æ¨èè¯»è€…åœ¨é˜…è¯»æœ¬æ–‡æ—¶ï¼Œèƒ½å¤Ÿè‡ªå·±åŠ¨æ‰‹æ¢ç©¶ä¸€ä¸‹æºç ï¼Œè¿™æ ·èƒ½å¤Ÿæ·±åŒ–è®¤è¯†ï¼ŒåŠ æ·±å°è±¡ï¼Œè€Œä¸è‡³äºä»…ä»…åœç•™åœ¨è¡¨é¢ã€‚</p>\n<p>æ¸©é¦¨æç¤ºï¼šæœ¬æ–‡å†…å®¹è¾ƒå¤šï¼Œè¯·åˆç†å®‰æ’æ—¶é—´ã€‚</p>\n</div>\n<h3 id=\"å¹¶å‘ä¸å¹¶è¡Œ\"><a class=\"anchor\" href=\"#å¹¶å‘ä¸å¹¶è¡Œ\">#</a> å¹¶å‘ä¸å¹¶è¡Œ</h3>\n<h4 id=\"ä»€ä¹ˆæ˜¯å¹¶å‘\"><a class=\"anchor\" href=\"#ä»€ä¹ˆæ˜¯å¹¶å‘\">#</a> ä»€ä¹ˆæ˜¯å¹¶å‘</h4>\n<p>åœ¨æ“ä½œç³»ç»Ÿä¸­ï¼Œå¹¶å‘æ˜¯æŒ‡ä¸€ä¸ªæ—¶é—´æ®µä¸­æœ‰å‡ ä¸ªç¨‹åºéƒ½å¤„äºå·²å¯åŠ¨è¿è¡Œåˆ°è¿è¡Œå®Œæ¯•ä¹‹é—´ï¼Œä¸”è¿™å‡ ä¸ªç¨‹åºéƒ½æ˜¯åœ¨åŒä¸€ä¸ªå¤„ç†æœºä¸Šè¿è¡Œã€‚</p>\n<h4 id=\"ä»€ä¹ˆæ˜¯å¹¶è¡Œ\"><a class=\"anchor\" href=\"#ä»€ä¹ˆæ˜¯å¹¶è¡Œ\">#</a> ä»€ä¹ˆæ˜¯å¹¶è¡Œ</h4>\n<p>å¹¶è¡Œï¼ˆParallelï¼‰ï¼Œåœ¨å¤šæ ¸ç³»ç»Ÿä¸­ï¼Œå½“ä¸€ä¸ª CPU åœ¨æ‰§è¡Œä¸€ä¸ªè¿›ç¨‹æ—¶ï¼Œå¦ä¸€ä¸ª CPU å¯ä»¥æ‰§è¡Œå¦ä¸€ä¸ªè¿›ç¨‹ï¼Œä¸¤ä¸ªè¿›ç¨‹äº’ä¸æŠ¢å  CPU èµ„æºï¼Œå¯ä»¥åŒæ—¶è¿›è¡Œï¼Œè¿™ç§æ–¹å¼æˆ‘ä»¬ç§°ä¹‹ä¸ºå¹¶è¡Œã€‚åªæœ‰åœ¨å¤š CPU çš„æƒ…å†µä¸­ï¼Œæ‰ä¼šå‘ç”Ÿå¹¶è¡Œã€‚å¦åˆ™ï¼Œçœ‹ä¼¼åŒæ—¶å‘ç”Ÿçš„äº‹æƒ…ï¼Œå…¶å®éƒ½æ˜¯å¹¶å‘æ‰§è¡Œçš„ã€‚</p>\n<h4 id=\"å¹¶å‘ä¸å¹¶è¡Œçš„åŒºåˆ«\"><a class=\"anchor\" href=\"#å¹¶å‘ä¸å¹¶è¡Œçš„åŒºåˆ«\">#</a> å¹¶å‘ä¸å¹¶è¡Œçš„åŒºåˆ«</h4>\n<p>å¹¶å‘æ˜¯æŒ‡åœ¨ä¸€æ®µæ—¶é—´å†…å®è§‚ä¸Šå¤šä¸ªç¨‹åºåŒæ—¶è¿è¡Œã€‚å¹¶è¡ŒæŒ‡çš„æ˜¯åŒä¸€ä¸ªæ—¶åˆ»ï¼Œå¤šä¸ªä»»åŠ¡ç¡®å®çœŸçš„åœ¨åŒæ—¶è¿è¡Œã€‚</p>\n<p><img data-src=\"https://img.xfc-exclave.com/2021/08/d4557b64ce08a0d34bc8d37930aa4b8c1629854956.png\" alt=\"7896890-1b1557d40f0b894c\" /></p>\n<h3 id=\"çº¿ç¨‹\"><a class=\"anchor\" href=\"#çº¿ç¨‹\">#</a> çº¿ç¨‹</h3>\n<h4 id=\"çº¿ç¨‹çš„å®ç°\"><a class=\"anchor\" href=\"#çº¿ç¨‹çš„å®ç°\">#</a> çº¿ç¨‹çš„å®ç°</h4>\n<p>å®ç°çº¿ç¨‹ä¸»è¦æœ‰ä¸‰ç§æ–¹å¼ï¼š</p>\n<ol>\n<li>ç»§æ‰¿ Thread ç±»ï¼Œå¹¶é‡å†™å…¶ run æ–¹æ³•ã€‚</li>\n<li>å®ç° Runnable æ¥å£ï¼Œå¹¶å®ç°å…¶ run æ–¹æ³•ã€‚</li>\n<li>å®ç° Callable æ¥å£ï¼Œå¹¶å®ç°å…¶ call æ–¹æ³•ã€‚</li>\n</ol>\n<h4 id=\"çº¿ç¨‹çš„çŠ¶æ€\"><a class=\"anchor\" href=\"#çº¿ç¨‹çš„çŠ¶æ€\">#</a> çº¿ç¨‹çš„çŠ¶æ€</h4>\n<p><img data-src=\"https://img.xfc-exclave.com/2021/08/59180430a0a2b17f23a35ceae19e67051629858658.jpg\" alt=\"çº¿ç¨‹çŠ¶æ€çš„è½¬æ¢\" /></p>\n<ol>\n<li>\n<p>æ–°å»ºçŠ¶æ€ï¼š<br />\nä½¿ç”¨ new å…³é”®å­—å’Œ Thread ç±»æˆ–å…¶å­ç±»å»ºç«‹ä¸€ä¸ªçº¿ç¨‹å¯¹è±¡åï¼Œè¯¥çº¿ç¨‹å¯¹è±¡å°±å¤„äºæ–°å»ºçŠ¶æ€ã€‚å®ƒä¿æŒè¿™ä¸ªçŠ¶æ€ç›´åˆ°ç¨‹åº start () è¿™ä¸ªçº¿ç¨‹ã€‚</p>\n</li>\n<li>\n<p>å°±ç»ªçŠ¶æ€ï¼š<br />\nå½“çº¿ç¨‹å¯¹è±¡è°ƒç”¨äº† start () æ–¹æ³•ä¹‹åï¼Œè¯¥çº¿ç¨‹å°±è¿›å…¥å°±ç»ªçŠ¶æ€ã€‚å°±ç»ªçŠ¶æ€çš„çº¿ç¨‹å¤„äºå°±ç»ªé˜Ÿåˆ—ä¸­ï¼Œè¦ç­‰å¾… JVM é‡Œçº¿ç¨‹è°ƒåº¦å™¨çš„è°ƒåº¦ã€‚</p>\n</li>\n<li>\n<p>è¿è¡ŒçŠ¶æ€ï¼š<br />\nå¦‚æœå°±ç»ªçŠ¶æ€çš„çº¿ç¨‹è·å– CPU èµ„æºï¼Œå°±å¯ä»¥æ‰§è¡Œ run ()ï¼Œæ­¤æ—¶çº¿ç¨‹ä¾¿å¤„äºè¿è¡ŒçŠ¶æ€ã€‚å¤„äºè¿è¡ŒçŠ¶æ€çš„çº¿ç¨‹æœ€ä¸ºå¤æ‚ï¼Œå®ƒå¯ä»¥å˜ä¸ºé˜»å¡çŠ¶æ€ã€å°±ç»ªçŠ¶æ€å’Œæ­»äº¡çŠ¶æ€ã€‚</p>\n</li>\n<li>\n<p>é˜»å¡çŠ¶æ€ï¼š</p>\n<p>å¦‚æœä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œäº† sleepï¼ˆç¡çœ ï¼‰ã€suspendï¼ˆæŒ‚èµ·ï¼‰ç­‰æ–¹æ³•ï¼Œå¤±å»æ‰€å ç”¨èµ„æºä¹‹åï¼Œè¯¥çº¿ç¨‹å°±ä»è¿è¡ŒçŠ¶æ€è¿›å…¥é˜»å¡çŠ¶æ€ã€‚åœ¨ç¡çœ æ—¶é—´å·²åˆ°æˆ–è·å¾—è®¾å¤‡èµ„æºåå¯ä»¥é‡æ–°è¿›å…¥å°±ç»ªçŠ¶æ€ã€‚å¯ä»¥åˆ†ä¸ºä¸‰ç§ï¼š</p>\n<ul>\n<li>ç­‰å¾…é˜»å¡ï¼šè¿è¡ŒçŠ¶æ€ä¸­çš„çº¿ç¨‹æ‰§è¡Œ wait () æ–¹æ³•ï¼Œä½¿çº¿ç¨‹è¿›å…¥åˆ°ç­‰å¾…é˜»å¡çŠ¶æ€ã€‚</li>\n<li>åŒæ­¥é˜»å¡ï¼šçº¿ç¨‹åœ¨è·å– synchronized åŒæ­¥é”å¤±è´¥ï¼ˆå› ä¸ºåŒæ­¥é”è¢«å…¶ä»–çº¿ç¨‹å ç”¨ï¼‰ã€‚</li>\n<li>å…¶ä»–é˜»å¡ï¼šé€šè¿‡è°ƒç”¨çº¿ç¨‹çš„ sleep () æˆ– join () å‘å‡ºäº† I/O è¯·æ±‚æ—¶ï¼Œçº¿ç¨‹å°±ä¼šè¿›å…¥åˆ°é˜»å¡çŠ¶æ€ã€‚å½“ sleep () çŠ¶æ€è¶…æ—¶ï¼Œjoin () ç­‰å¾…çº¿ç¨‹ç»ˆæ­¢æˆ–è¶…æ—¶ï¼Œæˆ–è€… I/O å¤„ç†å®Œæ¯•ï¼Œçº¿ç¨‹é‡æ–°è½¬å…¥å°±ç»ªçŠ¶æ€ã€‚</li>\n</ul>\n</li>\n<li>\n<p>æ­»äº¡çŠ¶æ€ï¼š<br />\nä¸€ä¸ªè¿è¡ŒçŠ¶æ€çš„çº¿ç¨‹å®Œæˆä»»åŠ¡æˆ–è€…å…¶ä»–ç»ˆæ­¢æ¡ä»¶å‘ç”Ÿæ—¶ï¼Œè¯¥çº¿ç¨‹å°±åˆ‡æ¢åˆ°ç»ˆæ­¢çŠ¶æ€ã€‚</p>\n</li>\n</ol>\n<h4 id=\"ä¼˜å…ˆçº§\"><a class=\"anchor\" href=\"#ä¼˜å…ˆçº§\">#</a> ä¼˜å…ˆçº§</h4>\n<p>Java çº¿ç¨‹å¯ä»¥æœ‰ä¼˜å…ˆçº§çš„è®¾å®šï¼Œé«˜ä¼˜å…ˆçº§çš„çº¿ç¨‹æ¯”ä½ä¼˜å…ˆçº§çš„çº¿ç¨‹æœ‰æ›´é«˜çš„å‡ ç‡å¾—åˆ°æ‰§è¡Œã€‚</p>\n<ol>\n<li>å½“çº¿ç¨‹çš„ä¼˜å…ˆçº§æ²¡æœ‰æŒ‡å®šæ—¶ï¼Œæ‰€æœ‰çº¿ç¨‹éƒ½æºå¸¦æ™®é€šä¼˜å…ˆçº§ã€‚</li>\n<li>ä¼˜å…ˆçº§å¯ä»¥ç”¨ä» 1-10 çš„èŒƒå›´æŒ‡å®šã€‚10 è¡¨ç¤ºæœ€é«˜ä¼˜å…ˆçº§ï¼Œ1 è¡¨ç¤ºæœ€ä½ä¼˜å…ˆçº§ï¼Œ5 æ˜¯æ™®é€šä¼˜å…ˆçº§ã€‚</li>\n<li>ä¼˜å…ˆçº§æœ€é«˜çš„çº¿ç¨‹åœ¨æ‰§è¡Œæ—¶è¢«ç»™äºˆä¼˜å…ˆï¼Œä½†æ˜¯ä¸èƒ½ä¿è¯çº¿ç¨‹åœ¨å¯åŠ¨æ—¶å°±è¿›å…¥è¿è¡ŒçŠ¶æ€ã€‚</li>\n<li>ä¸åœ¨çº¿ç¨‹æ± ä¸­ç­‰å¾…è¿è¡Œæœºä¼šçš„çº¿ç¨‹ç›¸æ¯”ï¼Œå½“å‰æ­£åœ¨è¿è¡Œçš„çº¿ç¨‹å¯èƒ½æ€»æ˜¯æ‹¥æœ‰æ›´é«˜çš„ä¼˜å…ˆçº§ã€‚</li>\n<li>ç”±è°ƒåº¦ç¨‹åºå†³å®šå“ªä¸€ä¸ªçº¿ç¨‹è¢«æ‰§è¡Œã€‚</li>\n<li>setPriority () ç”¨æ¥è®¾å®šçº¿ç¨‹çš„ä¼˜å…ˆçº§ã€‚</li>\n<li>åœ¨çº¿ç¨‹å¼€å§‹æ–¹æ³•è¢«è°ƒç”¨ä¹‹å‰ï¼Œçº¿ç¨‹çš„ä¼˜å…ˆçº§åº”è¯¥è¢«è®¾å®šã€‚</li>\n<li>å¯ä»¥ä½¿ç”¨å¸¸é‡ï¼Œå¦‚ MIN_PRIORITYï¼ŒMAX_PRIORITYï¼ŒNORM_PRIORITY æ¥è®¾å®šä¼˜å…ˆçº§ã€‚</li>\n</ol>\n<p>çº¿ç¨‹ä¼˜å…ˆçº§å…·æœ‰ç»§æ‰¿æ€§ï¼ŒA çº¿ç¨‹å¯åŠ¨ B çº¿ç¨‹ï¼ŒB çº¿ç¨‹çš„ä¼˜å…ˆçº§å’Œ A çº¿ç¨‹çš„ä¼˜å…ˆçº§æ˜¯ä¸€æ ·çš„ã€‚</p>\n<p>é«˜ä¼˜å…ˆçº§çš„çº¿ç¨‹æ€»æ˜¯å¤§éƒ¨åˆ†å…ˆæ‰§è¡Œå®Œï¼Œå¹¶ä¸æ˜¯é«˜ä¼˜å…ˆçº§çš„å®Œå…¨å…ˆæ‰§è¡Œå®Œã€‚çº¿ç¨‹çš„ä¼˜å…ˆçº§å’Œæ‰§è¡Œé¡ºåºæ— å…³ï¼Œä¼˜å…ˆçº§é«˜çš„çº¿ç¨‹æ‰§è¡Œå¿«ã€‚</p>\n<h4 id=\"çº¿ç¨‹è°ƒåº¦\"><a class=\"anchor\" href=\"#çº¿ç¨‹è°ƒåº¦\">#</a> çº¿ç¨‹è°ƒåº¦</h4>\n<p>Java æä¾›ä¸€ä¸ªçº¿ç¨‹è°ƒåº¦å™¨æ¥ç›‘è§†å’Œæ§åˆ¶ Runnable çŠ¶æ€çš„çº¿ç¨‹ã€‚çº¿ç¨‹çš„è°ƒåº¦ç­–ç•¥é‡‡ç”¨<mark>æŠ¢å å¼</mark>ï¼Œä¼˜å…ˆçº§é«˜çš„çº¿ç¨‹æ¯”ä¼˜å…ˆçº§ä½çš„çº¿ç¨‹ä¼˜å…ˆæ‰§è¡Œã€‚åœ¨ä¼˜å…ˆçº§ç›¸åŒçš„æƒ…å†µä¸‹ï¼ŒæŒ‰ç…§<ins>å…ˆåˆ°å…ˆæœåŠ¡</ins>çš„åŸåˆ™ã€‚æ¯ä¸ª Java ç¨‹åºéƒ½æœ‰ä¸€ä¸ªé»˜è®¤çš„ä¸»çº¿ç¨‹ï¼Œå°±æ˜¯é€šè¿‡ JVM å¯åŠ¨çš„ç¬¬ä¸€ä¸ªçº¿ç¨‹ã€‚å¯¹äºåº”ç”¨ç¨‹åºï¼Œä¸»çº¿ç¨‹æ‰§è¡Œçš„æ˜¯ main () æ–¹æ³•ã€‚å¯¹äº Applet ä¸»çº¿ç¨‹æ˜¯æŒ‡æµè§ˆå™¨åŠ è½½å¹¶æ‰§è¡Œå°åº”ç”¨ç¨‹åºçš„é‚£ä¸€ä¸ªçº¿ç¨‹ã€‚</p>\n<p>å­çº¿ç¨‹æ˜¯ç”±åº”ç”¨ç¨‹åºåˆ›å»ºçš„çº¿ç¨‹ã€‚</p>\n<p>è¿˜æœ‰ä¸€ç§çº¿ç¨‹ç§°ä¸ºå®ˆæŠ¤çº¿ç¨‹ï¼ˆDaemonï¼‰ï¼Œè¿™æ˜¯ä¸€ç§ç”¨äºç›‘è§†å…¶ä»–çº¿ç¨‹å·¥ä½œçš„æœåŠ¡çº¿ç¨‹ï¼Œä¼˜å…ˆçº§ä¸ºæœ€ä½ã€‚</p>\n<h4 id=\"åˆ›å»ºçº¿ç¨‹çš„å¤šç§æ–¹å¼\"><a class=\"anchor\" href=\"#åˆ›å»ºçº¿ç¨‹çš„å¤šç§æ–¹å¼\">#</a> åˆ›å»ºçº¿ç¨‹çš„å¤šç§æ–¹å¼</h4>\n<p>åœ¨ jdk1.5 ä¹‹å‰ï¼Œåˆ›å»ºçº¿ç¨‹å°±åªæœ‰ä¸¤ç§æ–¹å¼ï¼Œå³ç»§æ‰¿ java.lang.Thread ç±»å’Œå®ç° java.lang.Runnable æ¥å£ï¼›è€Œåœ¨ JDK1.5 ä»¥åï¼Œå¢åŠ äº†ä¸¤ä¸ªåˆ›å»ºçº¿ç¨‹çš„æ–¹å¼ï¼Œå³å®ç° java.util.concurrent.Callable æ¥å£å’Œçº¿ç¨‹æ± ã€‚</p>\n<p>åˆ›å»ºçº¿ç¨‹æ–¹å¼ï¼š</p>\n<ul>\n<li>\n<p>ç»§æ‰¿ Thread ç±»</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">ThreadTest</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token comment\">// è®¾ç½®çº¿ç¨‹åå­—</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token class-name\">Thread</span><span class=\"token punctuation\">.</span><span class=\"token function\">currentThread</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">setName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"main thread\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token class-name\">MyThread</span> myThread <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">MyThread</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        myThread<span class=\"token punctuation\">.</span><span class=\"token function\">setName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"å­çº¿ç¨‹:\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token comment\">// å¼€å¯çº¿ç¨‹</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        myThread<span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> <span class=\"token number\">5</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Thread</span><span class=\"token punctuation\">.</span><span class=\"token function\">currentThread</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">MyThread</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Thread</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">run</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> <span class=\"token number\">10</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Thread</span><span class=\"token punctuation\">.</span><span class=\"token function\">currentThread</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure></li>\n<li>\n<p>å®ç° Runnable æ¥å£</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">RunnableTest</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token comment\">// è®¾ç½®çº¿ç¨‹åå­—</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token class-name\">Thread</span><span class=\"token punctuation\">.</span><span class=\"token function\">currentThread</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">setName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"main thread:\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token class-name\">Thread</span> thread <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Thread</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">MyRunnable</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">// æç¤ºï¼šä¸è¦æ˜¾å¼åˆ›å»ºçº¿ç¨‹ï¼Œè¯·ä½¿ç”¨çº¿ç¨‹æ± ã€‚</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        thread<span class=\"token punctuation\">.</span><span class=\"token function\">setName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"å­çº¿ç¨‹:\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token comment\">// å¼€å¯çº¿ç¨‹</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        thread<span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> <span class=\"token number\">5</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Thread</span><span class=\"token punctuation\">.</span><span class=\"token function\">currentThread</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">MyRunnable</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">Runnable</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">run</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> <span class=\"token number\">10</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Thread</span><span class=\"token punctuation\">.</span><span class=\"token function\">currentThread</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure></li>\n<li>\n<p>å®ç° Callable æ¥å£</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">CallableTest</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token comment\">// æ‰§è¡Œ Callable æ–¹å¼ï¼Œéœ€è¦ FutureTask å®ç°å®ç°ï¼Œç”¨äºæ¥æ”¶è¿ç®—ç»“æœ</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token class-name\">FutureTask</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Integer</span><span class=\"token punctuation\">></span></span> futureTask <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">FutureTask</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">MyCallable</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token keyword\">new</span> <span class=\"token class-name\">Thread</span><span class=\"token punctuation\">(</span>futureTask<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">// æç¤ºï¼šä¸è¦æ˜¾å¼åˆ›å»ºçº¿ç¨‹ï¼Œè¯·ä½¿ç”¨çº¿ç¨‹æ± ã€‚</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token comment\">// æ¥æ”¶çº¿ç¨‹è¿ç®—åçš„ç»“æœ</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token keyword\">try</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>            <span class=\"token class-name\">Integer</span> sum <span class=\"token operator\">=</span> futureTask<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>sum<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">InterruptedException</span> <span class=\"token operator\">|</span> <span class=\"token class-name\">ExecutionException</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>            e<span class=\"token punctuation\">.</span><span class=\"token function\">printStackTrace</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">MyCallable</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">Callable</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Integer</span><span class=\"token punctuation\">></span></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Integer</span> <span class=\"token function\">call</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>        <span class=\"token keyword\">int</span> sum <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> <span class=\"token number\">100</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>            sum <span class=\"token operator\">+=</span> i<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>        <span class=\"token keyword\">return</span> sum<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure></li>\n<li>\n<p>è‡ªå®šä¹‰çº¿ç¨‹æ± ã€æ¨èã€‘</p>\n<p>çº¿ç¨‹æ± æä¾›äº†ä¸€ä¸ªçº¿ç¨‹é˜Ÿåˆ—ï¼Œé˜Ÿåˆ—ä¸­ä¿å­˜ç€æ‰€æœ‰ç­‰å¾…çŠ¶æ€çš„çº¿ç¨‹ã€‚é¿å…äº†åˆ›å»ºä¸é”€æ¯é¢å¤–å¼€é”€ï¼Œæé«˜äº†å“åº”é€Ÿåº¦ã€‚</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">ThreadPoolExecutorTest</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token comment\">// æ ¸å¿ƒçº¿ç¨‹æ•°</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token keyword\">int</span> corePoolSize <span class=\"token operator\">=</span> <span class=\"token number\">3</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token comment\">// æœ€å¤§çº¿ç¨‹æ•°</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token keyword\">int</span> maximumPoolSize <span class=\"token operator\">=</span> <span class=\"token number\">6</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token comment\">// è¶…è¿‡ corePoolSize çº¿ç¨‹æ•°é‡çš„çº¿ç¨‹æœ€å¤§ç©ºé—²æ—¶é—´</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token keyword\">long</span> keepAliveTime <span class=\"token operator\">=</span> <span class=\"token number\">2</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token comment\">// ä»¥ç§’ä¸ºæ—¶é—´å•ä½</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token class-name\">TimeUnit</span> unit <span class=\"token operator\">=</span> <span class=\"token class-name\">TimeUnit</span><span class=\"token punctuation\">.</span>SECONDS<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token comment\">// åˆ›å»ºå·¥ä½œé˜Ÿåˆ—ï¼Œç”¨äºå­˜æ”¾æäº¤çš„ç­‰å¾…æ‰§è¡Œä»»åŠ¡</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token class-name\">BlockingQueue</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Runnable</span><span class=\"token punctuation\">></span></span> workQueue <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ArrayBlockingQueue</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Runnable</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token comment\">// åˆ›å»ºçº¿ç¨‹æ± </span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        <span class=\"token class-name\">ThreadPoolExecutor</span> threadPoolExecutor <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ThreadPoolExecutor</span><span class=\"token punctuation\">(</span>corePoolSize<span class=\"token punctuation\">,</span> maximumPoolSize<span class=\"token punctuation\">,</span> keepAliveTime<span class=\"token punctuation\">,</span> unit<span class=\"token punctuation\">,</span> workQueue<span class=\"token punctuation\">,</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ThreadPoolExecutor<span class=\"token punctuation\">.</span>AbortPolicy</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        </pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        <span class=\"token comment\">// ExecutorService threadPoolExecutor = Executors.newFixedThreadPool(10);</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        </pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        <span class=\"token class-name\">ThreadPool</span> threadPool <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ThreadPool</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> <span class=\"token number\">5</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>            <span class=\"token comment\">// ä¸ºçº¿ç¨‹æ± åˆ†é…ä»»åŠ¡</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>            threadPoolExecutor<span class=\"token punctuation\">.</span><span class=\"token function\">submit</span><span class=\"token punctuation\">(</span>threadPool<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>        <span class=\"token comment\">// å…³é—­çº¿ç¨‹æ± </span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>        threadPoolExecutor<span class=\"token punctuation\">.</span><span class=\"token function\">shutdown</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre></pre></td></tr><tr><td data-num=\"29\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">ThreadPool</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">Runnable</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>    <span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">run</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> <span class=\"token number\">10</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Thread</span><span class=\"token punctuation\">.</span><span class=\"token function\">currentThread</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">\":\"</span> <span class=\"token operator\">+</span> i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><blockquote>\n<p>é˜¿é‡Œå·´å·´ Java å¼€å‘è§„èŒƒä¸æ¨èç›´æ¥ä½¿ç”¨  <code>Executors.newFixedThreadPool()</code>  çš„æ–¹å¼åˆ›å»ºçº¿ç¨‹æ± ã€‚</p>\n</blockquote>\n</li>\n</ul>\n<h4 id=\"å®ˆæŠ¤çº¿ç¨‹\"><a class=\"anchor\" href=\"#å®ˆæŠ¤çº¿ç¨‹\">#</a> å®ˆæŠ¤çº¿ç¨‹</h4>\n<p>åœ¨ Java ä¸­æœ‰ä¸¤ç±»çº¿ç¨‹ï¼šç”¨æˆ·çº¿ç¨‹ã€å®ˆæŠ¤çº¿ç¨‹ï¼ˆä¹Ÿç§°ä¸ºæœåŠ¡çº¿ç¨‹ï¼‰ã€‚</p>\n<p>ä¸Šæ–‡å·²æåˆ°ï¼Œå®ˆæŠ¤çº¿ç¨‹æ˜¯ä¸€ç§ç”¨äºç›‘è§†å…¶ä»–çº¿ç¨‹å·¥ä½œçš„æœåŠ¡çº¿ç¨‹ï¼Œå› æ­¤ï¼Œåªè¦å­˜åœ¨ä»»ä½•ä¸€ä¸ªæœªç»“æŸçš„ç”¨æˆ·çº¿ç¨‹ï¼Œå®ˆæŠ¤çº¿ç¨‹å°±ä¼šä¸€ç›´è¿è¡Œï¼Œç›´åˆ°æ‰€æœ‰ç”¨æˆ·çº¿ç¨‹éƒ½ç»“æŸåï¼Œå®ˆæŠ¤çº¿ç¨‹æ‰ä¼šéšç€ JVM ä¸€åŒç»“æŸã€‚ç”¨æˆ·çº¿ç¨‹ä¸å®ˆæŠ¤çº¿ç¨‹å‡ ä¹æ²¡æœ‰åŒºåˆ«ï¼Œå®ƒä»¬ä¹‹é—´å”¯ä¸€çš„åŒºåˆ«åªåœ¨äºçº¿ç¨‹é€€å‡ºçš„æ—¶æœºã€‚</p>\n<p>å®ˆæŠ¤çº¿ç¨‹å¹¶éåªæœ‰è™šæ‹Ÿæœºå†…éƒ¨æä¾›ï¼Œç”¨æˆ·åœ¨ç¼–å†™ç¨‹åºæ—¶ä¹Ÿå¯ä»¥è‡ªå·±è®¾ç½®å®ˆæŠ¤çº¿ç¨‹ã€‚</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token class-name\">Thread</span> daemonThread <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Thread</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>daemonThread<span class=\"token punctuation\">.</span><span class=\"token function\">setDaemon</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">// è®¾ç½®çº¿ç¨‹ä¸ºå®ˆæŠ¤çº¿ç¨‹</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>daemonThread<span class=\"token punctuation\">.</span><span class=\"token function\">isDaemon</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">// åˆ¤æ–­çº¿ç¨‹æ˜¯å¦æ˜¯å®ˆæŠ¤çº¿ç¨‹</span></pre></td></tr></table></figure><p>ç”¨æˆ·åœ¨è®¾ç½®å®ˆæŠ¤çº¿ç¨‹æ—¶ï¼Œåº”å½“æ³¨æ„ï¼š</p>\n<ol>\n<li><code>daemonThread.setDaemon(true)</code>  å¿…é¡»åœ¨  <code>thread.start()</code>  ä¹‹å‰æ‰§è¡Œï¼Œå¦åˆ™ä¼šæŠ›å‡º IllegalThreadStateException å¼‚å¸¸ï¼Œè¿™æ˜¯å› ä¸ºç¨‹åºæ— æ³•æŠŠä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„çº¿ç¨‹è®¾ç½®ä¸ºå®ˆæŠ¤çº¿ç¨‹ã€‚</li>\n<li>åœ¨å®ˆæŠ¤çº¿ç¨‹ä¸­äº§ç”Ÿçš„æ–°çº¿ç¨‹ä¹Ÿæ˜¯å®ˆæŠ¤çº¿ç¨‹ã€‚</li>\n<li>å¹¶éæ‰€æœ‰çš„åº”ç”¨éƒ½å¯ä»¥åˆ†é…ç»™å®ˆæŠ¤çº¿ç¨‹è¿›è¡ŒæœåŠ¡ï¼Œå¦‚è¯»å†™æ“ä½œå’Œè®¡ç®—é€»è¾‘ã€‚</li>\n</ol>\n<p>JRE åˆ¤æ–­ç¨‹åºæ˜¯å¦æ‰§è¡Œç»“æŸçš„æ ‡å‡†æ˜¯æ‰€æœ‰çš„å‰å°çº¿ç¨‹ï¼ˆç”¨æˆ·çº¿ç¨‹ï¼‰æ˜¯å¦æ‰§è¡Œå®Œæ¯•ï¼Œè€Œä¸å…³æ³¨åå°çº¿ç¨‹ï¼ˆå®ˆæŠ¤çº¿ç¨‹ï¼‰çš„çŠ¶æ€ï¼Œæ‰€ä»¥ç»å¸¸ä¼šå‡ºç°å‰å°çº¿ç¨‹ç»“æŸï¼Œç¨‹åºå°±æ‰§è¡Œå®Œæ¯•ï¼Œå¹¶å…³é—­å®ˆæŠ¤çº¿ç¨‹ï¼Œä½†å®é™…ä¸Šå®ˆæŠ¤çº¿ç¨‹å¹¶æœªæ‰§è¡Œå®Œæˆã€‚å› æ­¤æˆ‘ä»¬ä¸åº”å½“ç”¨å®ˆæŠ¤çº¿ç¨‹å»è®¿é—®å›ºæœ‰èµ„æºï¼Œå¦‚æ–‡ä»¶ã€æ•°æ®åº“ç­‰ï¼Œå› ä¸ºå®ƒå¯èƒ½åœ¨ä»»ä½•æ—¶å€™å‘ç”Ÿä¸­æ–­ã€‚</p>\n<p>å®ˆæŠ¤çº¿ç¨‹ä¸ä¾èµ–äºç»ˆç«¯ï¼Œä½†æ˜¯ä¾èµ–äºç³»ç»Ÿã€‚</p>\n<p>å®ˆæŠ¤çº¿ç¨‹çš„ä¼˜å…ˆçº§æ¯”è¾ƒä½ï¼Œåƒåœ¾å›æ”¶çº¿ç¨‹å°±æ˜¯ä¸€ä¸ªç»å…¸çš„å®ˆæŠ¤çº¿ç¨‹ã€‚</p>\n<h4 id=\"çº¿ç¨‹ä¸è¿›ç¨‹\"><a class=\"anchor\" href=\"#çº¿ç¨‹ä¸è¿›ç¨‹\">#</a> çº¿ç¨‹ä¸è¿›ç¨‹</h4>\n<ul>\n<li>\n<p>è¿›ç¨‹</p>\n<p>æ¯ä¸ªè¿›ç¨‹éƒ½æœ‰ç‹¬ç«‹çš„ä»£ç å’Œæ•°æ®ç©ºé—´ï¼ˆè¿›ç¨‹ä¸Šä¸‹æ–‡ï¼‰ï¼Œè¿›ç¨‹é—´çš„åˆ‡æ¢ä¼šæœ‰è¾ƒå¤§çš„å¼€é”€ï¼Œä¸€ä¸ªè¿›ç¨‹åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªçº¿ç¨‹ã€‚ï¼ˆè¿›ç¨‹æ˜¯èµ„æºåˆ†é…çš„æœ€å°å•ä½ï¼‰</p>\n<p>å¤šè¿›ç¨‹æ˜¯æŒ‡æ“ä½œç³»ç»Ÿèƒ½åŒæ—¶è¿è¡Œå¤šä¸ªä»»åŠ¡ï¼ˆç¨‹åºï¼‰ã€‚</p>\n</li>\n<li>\n<p>çº¿ç¨‹</p>\n<p>åŒä¸€ç±»çº¿ç¨‹å…±äº«ä»£ç å’Œæ•°æ®ç©ºé—´ï¼Œæ¯ä¸ªçº¿ç¨‹æœ‰ç‹¬ç«‹çš„è¿è¡Œæ ˆå’Œç¨‹åºè®¡æ•°å™¨ï¼Œçº¿ç¨‹åˆ‡æ¢å¼€é”€å°ã€‚ï¼ˆçº¿ç¨‹æ˜¯ cpu è°ƒåº¦çš„æœ€å°å•ä½ï¼‰</p>\n<p>å¤šçº¿ç¨‹æ˜¯æŒ‡åœ¨åŒä¸€ç¨‹åºä¸­æœ‰å¤šä¸ªé¡ºåºæµåœ¨æ‰§è¡Œã€‚</p>\n</li>\n</ul>\n<p>æ¯ä¸ªæ­£åœ¨ç³»ç»Ÿä¸Šè¿è¡Œçš„ç¨‹åºéƒ½æ˜¯ä¸€ä¸ªè¿›ç¨‹ã€‚æ¯ä¸ªè¿›ç¨‹åŒ…å«ä¸€åˆ°å¤šä¸ªçº¿ç¨‹ã€‚è¿›ç¨‹ä¹Ÿå¯èƒ½æ˜¯æ•´ä¸ªç¨‹åºæˆ–è€…æ˜¯éƒ¨åˆ†ç¨‹åºçš„åŠ¨æ€æ‰§è¡Œã€‚çº¿ç¨‹æ˜¯ä¸€ç»„æŒ‡ä»¤çš„é›†åˆï¼Œæˆ–è€…æ˜¯ç¨‹åºçš„ç‰¹æ®Šæ®µï¼Œå®ƒå¯ä»¥åœ¨ç¨‹åºé‡Œç‹¬ç«‹æ‰§è¡Œã€‚</p>\n<p>åœ¨ Java ä¸­ï¼Œä¸€ä¸ªåº”ç”¨ç¨‹åºå¯ä»¥åŒ…å«å¤šä¸ªçº¿ç¨‹ã€‚æ¯ä¸ªçº¿ç¨‹æ‰§è¡Œç‰¹å®šçš„ä»»åŠ¡ï¼Œå¹¶å¯ä¸å…¶ä»–çº¿ç¨‹å¹¶å‘æ‰§è¡Œå¤šçº¿ç¨‹ä½¿ç³»ç»Ÿçš„ç©ºè½¬æ—¶é—´æœ€å°‘ï¼Œæé«˜ CPU åˆ©ç”¨ç‡ã€å¤šçº¿ç¨‹ç¼–ç¨‹ç¯å¢ƒç”¨æ–¹ä¾¿çš„æ¨¡å‹éšè— CPU åœ¨ä»»åŠ¡é—´åˆ‡æ¢çš„äº‹å®åœ¨ Java ç¨‹åºå¯åŠ¨æ—¶ï¼Œä¸€ä¸ªçº¿ç¨‹ç«‹åˆ»è¿è¡Œï¼Œè¯¥çº¿ç¨‹é€šå¸¸ç§°ä¸ºç¨‹åºçš„ä¸»çº¿ç¨‹ã€‚</p>\n<p>ä¸»çº¿ç¨‹çš„é‡è¦æ€§ä½“ç°åœ¨ä¸¤ä¸ªæ–¹é¢ï¼š</p>\n<ol>\n<li>ä¸»çº¿ç¨‹æ˜¯äº§ç”Ÿå…¶ä»–å­çº¿ç¨‹çš„çº¿ç¨‹ã€‚</li>\n<li>é€šå¸¸ä¸»çº¿ç¨‹å¿…é¡»æœ€åå®Œæˆæ‰§è¡Œï¼Œå› ä¸ºå®ƒéœ€è¦æ‰§è¡Œå„ç§å…³é—­åŠ¨ä½œã€‚</li>\n</ol>\n<h4 id=\"çº¿ç¨‹çš„åŒæ­¥ä¸äº’æ–¥\"><a class=\"anchor\" href=\"#çº¿ç¨‹çš„åŒæ­¥ä¸äº’æ–¥\">#</a> çº¿ç¨‹çš„åŒæ­¥ä¸äº’æ–¥</h4>\n<p>äº’æ–¥æ˜¯æŒ‡ä¸åŒçº¿ç¨‹é€šè¿‡ç«äº‰è¿›å…¥ä¸´ç•ŒåŒºï¼ˆå…±äº«çš„æ•°æ®å’Œç¡¬ä»¶èµ„æºï¼‰ï¼Œä¸ºäº†é˜²æ­¢è®¿é—®å†²çªï¼ŒåŒä¸€æ—¶é—´åªå…è®¸ä¸€ä¸ªè®¿é—®è€…å¯¹å…¶è¿›è¡Œè®¿é—®ï¼Œå…·æœ‰å”¯ä¸€æ€§å’Œæ’å®ƒæ€§ã€‚ä½†äº’æ–¥æ— æ³•é™åˆ¶è®¿é—®è€…å¯¹èµ„æºçš„è®¿é—®é¡ºåºï¼Œå³è®¿é—®æ˜¯æ— åºçš„ã€‚</p>\n<p>çº¿ç¨‹çš„åŒæ­¥å…³ç³»æ˜¯æŒ‡å¤šä¸ªçº¿ç¨‹å½¼æ­¤åˆä½œï¼Œé€šè¿‡ä¸€å®šçš„é€»è¾‘å…³ç³»æ¥å…±åŒå®Œæˆä¸€ä¸ªä»»åŠ¡ï¼Œå®ƒåœ¨äº’æ–¥çš„åŸºç¡€ä¸Šï¼ˆå¤§å¤šæ•°æƒ…å†µï¼‰ï¼Œé€šè¿‡å…¶å®ƒæœºåˆ¶å®ç°è®¿é—®è€…æŒ‰ç…§æŸç§é€»è¾‘é¡ºåºå¯¹èµ„æºè¿›è¡Œè®¿é—®ã€‚</p>\n<p>åŒæ­¥å…¶å®å·²ç»å®ç°äº†äº’æ–¥ï¼Œæ‰€ä»¥åŒæ­¥æ˜¯ä¸€ç§æ›´ä¸ºå¤æ‚çš„äº’æ–¥ã€‚äº’æ–¥æ˜¯ä¸€ç§ç‰¹æ®Šçš„åŒæ­¥ã€‚</p>\n<p>æ€»çš„æ¥è¯´ï¼ŒåŒæ­¥ä¸äº’æ–¥çš„åŒºåˆ«åœ¨äºï¼š</p>\n<ul>\n<li>äº’æ–¥æ˜¯é€šè¿‡ç«äº‰å¯¹èµ„æºçš„ç‹¬å ä½¿ç”¨ï¼Œçº¿ç¨‹å½¼æ­¤ä¹‹é—´ä¸éœ€è¦çŸ¥é“å¯¹æ–¹çš„å­˜åœ¨ï¼Œæ‰§è¡Œé¡ºåºæ˜¯ä¸€ä¸ªä¹±åºã€‚</li>\n<li>åŒæ­¥æ˜¯åè°ƒå¤šä¸ªç›¸äº’å…³è”çº¿ç¨‹åˆä½œå®Œæˆä»»åŠ¡ï¼Œå½¼æ­¤ä¹‹é—´çŸ¥é“å¯¹æ–¹å­˜åœ¨ï¼Œæ‰§è¡Œé¡ºåºå¾€å¾€æ˜¯æœ‰åºçš„ã€‚</li>\n</ul>\n<blockquote>\n<p>åŒæ­¥ä¸äº’æ–¥çš„å…³ç³»åŒæ ·é€‚ç”¨äºæè¿°ä¸åŒè¿›ç¨‹ä¹‹é—´çš„å…³ç³»ã€‚</p>\n</blockquote>\n<h3 id=\"çº¿ç¨‹æ± \"><a class=\"anchor\" href=\"#çº¿ç¨‹æ± \">#</a> çº¿ç¨‹æ± </h3>\n<p>çº¿ç¨‹æ± æ˜¯ä¸€ç§å¤šçº¿ç¨‹å¤„ç†å½¢å¼ï¼Œå¤„ç†è¿‡ç¨‹ä¸­å°†ä»»åŠ¡æ·»åŠ åˆ°é˜Ÿåˆ—ï¼Œç„¶ååœ¨åˆ›å»ºçº¿ç¨‹åè‡ªåŠ¨å¯åŠ¨è¿™äº›ä»»åŠ¡ã€‚çº¿ç¨‹æ± çº¿ç¨‹éƒ½æ˜¯åå°çº¿ç¨‹ã€‚æ¯ä¸ªçº¿ç¨‹éƒ½ä½¿ç”¨é»˜è®¤çš„å †æ ˆå¤§å°ï¼Œä»¥é»˜è®¤çš„ä¼˜å…ˆçº§è¿è¡Œï¼Œå¹¶å¤„äºå¤šçº¿ç¨‹å•å…ƒä¸­ã€‚</p>\n<p>ä½¿ç”¨çº¿ç¨‹æ± å¯ä»¥å¾ˆå¥½åœ°æé«˜æ€§èƒ½ï¼Œçº¿ç¨‹æ± åœ¨ç³»ç»Ÿå¯åŠ¨æ—¶å³åˆ›å»ºå¤§é‡ç©ºé—²çš„çº¿ç¨‹ï¼Œç¨‹åºå°†ä¸€ä¸ªä»»åŠ¡ä¼ ç»™çº¿ç¨‹æ± ï¼Œçº¿ç¨‹æ± å°±ä¼šå¯åŠ¨ä¸€æ¡çº¿ç¨‹æ¥æ‰§è¡Œè¿™ä¸ªä»»åŠ¡ï¼Œæ‰§è¡Œç»“æŸä»¥åï¼Œè¯¥çº¿ç¨‹å¹¶ä¸ä¼šæ­»äº¡ï¼Œè€Œæ˜¯å†æ¬¡è¿”å›çº¿ç¨‹æ± ä¸­æˆä¸ºç©ºé—²çŠ¶æ€ï¼Œç­‰å¾…æ‰§è¡Œä¸‹ä¸€ä¸ªä»»åŠ¡ã€‚</p>\n<p><strong>ä¸ºä»€ä¹ˆä½¿ç”¨çº¿ç¨‹æ± ï¼Ÿ</strong></p>\n<p>å¤šçº¿ç¨‹è¿è¡Œæ—¶é—´ï¼Œç³»ç»Ÿä¸æ–­çš„å¯åŠ¨å’Œå…³é—­æ–°çº¿ç¨‹ï¼Œæˆæœ¬éå¸¸é«˜ï¼Œä¼šè¿‡æ¸¡æ¶ˆè€—ç³»ç»Ÿèµ„æºï¼Œä»¥åŠè¿‡æ¸¡åˆ‡æ¢çº¿ç¨‹çš„å±é™©ï¼Œä»è€Œå¯èƒ½å¯¼è‡´ç³»ç»Ÿèµ„æºçš„å´©æºƒã€‚ä½¿ç”¨çº¿ç¨‹æ± èƒ½å¾ˆå¥½åœ°è§£å†³è¿™ä¸€é—®é¢˜ã€‚</p>\n<h4 id=\"å››ç§å¸¸è§çš„çº¿ç¨‹æ± \"><a class=\"anchor\" href=\"#å››ç§å¸¸è§çš„çº¿ç¨‹æ± \">#</a> å››ç§å¸¸è§çš„çº¿ç¨‹æ± </h4>\n<ol>\n<li>\n<p>CachedThreadPool</p>\n<p>ç¼“å­˜çº¿ç¨‹æ± ï¼Œæ²¡æœ‰æ ¸å¿ƒçº¿ç¨‹ï¼Œæ™®é€šçº¿ç¨‹æ•°é‡ä¸º  <code>Integer.MAX_VALUE</code>  ï¼ˆå¯ä»¥ç†è§£ä¸ºæ— é™ï¼‰ï¼Œçº¿ç¨‹é—²ç½® 60s åå›æ”¶ï¼Œä»»åŠ¡é˜Ÿåˆ—ä½¿ç”¨  <code>SynchronousQueue</code>  è¿™ç§æ— å®¹é‡çš„åŒæ­¥é˜Ÿåˆ—ã€‚<ins class=\"wavy\">é€‚ç”¨äºä»»åŠ¡é‡å¤§ä½†è€—æ—¶ä½çš„åœºæ™¯</ins>ã€‚</p>\n<p>ä½¿ç”¨ç¤ºä¾‹ï¼š</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Test</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token comment\">// 1. åˆ›å»ºç¼“å­˜çº¿ç¨‹æ± </span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token class-name\">ExecutorService</span> cachedThreadPool <span class=\"token operator\">=</span> <span class=\"token class-name\">Executors</span><span class=\"token punctuation\">.</span><span class=\"token function\">newCachedThreadPool</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token comment\">// 2. åˆ›å»ºçº¿ç¨‹ä»»åŠ¡</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token class-name\">Runnable</span> task <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-></span> <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Thread</span><span class=\"token punctuation\">.</span><span class=\"token function\">currentThread</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">\" ----> running\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">// use Lambda</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token comment\">// 3. å‘çº¿ç¨‹æ± æäº¤ä»»åŠ¡</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> <span class=\"token number\">5</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>            cachedThreadPool<span class=\"token punctuation\">.</span><span class=\"token function\">execute</span><span class=\"token punctuation\">(</span>task<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure></li>\n<li>\n<p>ScheduledThreadPool</p>\n<p>å®šæ—¶çº¿ç¨‹æ± ï¼ŒæŒ‡å®šæ ¸å¿ƒçº¿ç¨‹æ•°é‡ï¼Œæ™®é€šçº¿ç¨‹æ•°é‡æ— é™ï¼Œçº¿ç¨‹æ‰§è¡Œå®Œä»»åŠ¡ç«‹å³å›æ”¶ï¼Œä»»åŠ¡é˜Ÿåˆ—ä¸ºå»¶æ—¶é˜»å¡é˜Ÿåˆ—ã€‚è¿™æ˜¯ä¸€ä¸ªæ¯”è¾ƒç‰¹åˆ«çš„çº¿ç¨‹æ± ï¼Œ<ins class=\"wavy\">é€‚ç”¨äºæ‰§è¡Œå®šæ—¶æˆ–å‘¨æœŸæ€§çš„ä»»åŠ¡</ins>ã€‚</p>\n<p>ä½¿ç”¨ç¤ºä¾‹ï¼š</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Test</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token comment\">// 1. åˆ›å»ºå®šæ—¶çº¿ç¨‹æ± </span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token class-name\">ScheduledExecutorService</span> scheduledThreadPool <span class=\"token operator\">=</span> <span class=\"token class-name\">Executors</span><span class=\"token punctuation\">.</span><span class=\"token function\">newScheduledThreadPool</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">// æ ¸å¿ƒçº¿ç¨‹æ•°ï¼š5</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token comment\">// 2. åˆ›å»ºçº¿ç¨‹ä»»åŠ¡</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token class-name\">Runnable</span> task <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-></span> <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Thread</span><span class=\"token punctuation\">.</span><span class=\"token function\">currentThread</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">\" ----> running\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">// use Lambda</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token comment\">// 3. å‘çº¿ç¨‹æ± æäº¤ä»»åŠ¡</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        scheduledThreadPool<span class=\"token punctuation\">.</span><span class=\"token function\">schedule</span><span class=\"token punctuation\">(</span>task<span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">TimeUnit</span><span class=\"token punctuation\">.</span>SECONDS<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">// å»¶è¿Ÿ 2s åæ‰§è¡Œä»»åŠ¡</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        scheduledThreadPool<span class=\"token punctuation\">.</span><span class=\"token function\">scheduleAtFixedRate</span><span class=\"token punctuation\">(</span>task<span class=\"token punctuation\">,</span> <span class=\"token number\">50</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2000</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">TimeUnit</span><span class=\"token punctuation\">.</span>MILLISECONDS<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">// å»¶è¿Ÿ 50ms åï¼Œæ¯éš” 2000ms æ‰§è¡Œä»»åŠ¡</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure></li>\n<li>\n<p>SingleThreadPool</p>\n<p>å•çº¿ç¨‹çº¿ç¨‹æ± ã€‚ç‰¹ç‚¹æ˜¯çº¿ç¨‹æ± ä¸­åªæœ‰ä¸€ä¸ªçº¿ç¨‹ï¼ˆæ ¸å¿ƒçº¿ç¨‹ï¼‰ï¼Œçº¿ç¨‹æ‰§è¡Œå®Œä»»åŠ¡ç«‹å³å›æ”¶ï¼Œä½¿ç”¨æœ‰ç•Œé˜»å¡é˜Ÿåˆ—ï¼ˆå®¹é‡æœªæŒ‡å®šï¼Œåˆ™ä½¿ç”¨é»˜è®¤å€¼  <code>Integer.MAX_VALUE</code>  ï¼‰ã€‚</p>\n<p>ä½¿ç”¨ç¤ºä¾‹ï¼š</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Test</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token comment\">// 1. åˆ›å»ºå•çº¿ç¨‹çº¿ç¨‹æ± </span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token class-name\">ExecutorService</span> singleThreadPool <span class=\"token operator\">=</span> <span class=\"token class-name\">Executors</span><span class=\"token punctuation\">.</span><span class=\"token function\">newSingleThreadScheduledExecutor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token comment\">// 2. åˆ›å»ºçº¿ç¨‹ä»»åŠ¡</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token class-name\">Runnable</span> task <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-></span> <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Thread</span><span class=\"token punctuation\">.</span><span class=\"token function\">currentThread</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">\" ----> running\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">// use Lambda</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token comment\">// 3. å‘çº¿ç¨‹æ± æäº¤ä»»åŠ¡</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        singleThreadPool<span class=\"token punctuation\">.</span><span class=\"token function\">execute</span><span class=\"token punctuation\">(</span>task<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure></li>\n<li>\n<p>FixedThreadPool</p>\n<p>å›ºå®šå®¹é‡çº¿ç¨‹æ± ï¼Œå…¶ç‰¹ç‚¹æ˜¯æœ€å¤§çº¿ç¨‹æ•°å°±æ˜¯æ ¸å¿ƒçº¿ç¨‹æ•°ï¼Œæ„å‘³ç€çº¿ç¨‹æ± <ins>åªèƒ½åˆ›å»ºæ ¸å¿ƒçº¿ç¨‹</ins>ï¼Œ  <code>keepAliveTime</code>  ä¸º 0ï¼Œå³çº¿ç¨‹æ‰§è¡Œå®Œä»»åŠ¡ç«‹å³å›æ”¶ã€‚ä»»åŠ¡é˜Ÿåˆ—æœªæŒ‡å®šå®¹é‡ï¼Œä»£è¡¨ä½¿ç”¨é»˜è®¤å€¼  <code>Integer.MAX_VALUE</code>  ã€‚<ins class=\"wavy\">é€‚ç”¨äºéœ€è¦æ§åˆ¶å¹¶å‘çº¿ç¨‹çš„åœºæ™¯</ins>ã€‚</p>\n<p>ä½¿ç”¨ç¤ºä¾‹ï¼š</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Test</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token comment\">// 1. åˆ›å»ºå›ºå®šå®¹é‡çº¿ç¨‹æ± </span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token class-name\">ExecutorService</span> fixedThreadPool <span class=\"token operator\">=</span> <span class=\"token class-name\">Executors</span><span class=\"token punctuation\">.</span><span class=\"token function\">newFixedThreadPool</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token comment\">// 2. åˆ›å»ºçº¿ç¨‹ä»»åŠ¡</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token class-name\">Runnable</span> task <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-></span> <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Thread</span><span class=\"token punctuation\">.</span><span class=\"token function\">currentThread</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">\" ----> running\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">// use Lambda</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token comment\">// 3. å‘çº¿ç¨‹æ± æäº¤ä»»åŠ¡</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        fixedThreadPool<span class=\"token punctuation\">.</span><span class=\"token function\">execute</span><span class=\"token punctuation\">(</span>task<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure></li>\n</ol>\n<h4 id=\"è‡ªå·±è®¾è®¡çº¿ç¨‹æ± \"><a class=\"anchor\" href=\"#è‡ªå·±è®¾è®¡çº¿ç¨‹æ± \">#</a> è‡ªå·±è®¾è®¡çº¿ç¨‹æ± </h4>\n<p>çº¿ç¨‹æ± è®¾è®¡ç¤ºä¾‹ï¼š</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">ThreadPool</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">int</span> threadPoolSize<span class=\"token punctuation\">;</span> <span class=\"token comment\">// çº¿ç¨‹æ± å¤§å°</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">final</span> <span class=\"token class-name\">LinkedList</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Runnable</span><span class=\"token punctuation\">></span></span> tasks <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">LinkedList</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// ä»»åŠ¡å®¹å™¨</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">ThreadPool</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        threadPoolSize <span class=\"token operator\">=</span> <span class=\"token number\">5</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token comment\">// é¢„å…ˆåˆ›å»ºå¤šä¸ªçº¿ç¨‹</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Create \"</span> <span class=\"token operator\">+</span> threadPoolSize <span class=\"token operator\">+</span> <span class=\"token string\">\" thread(s) and pre-start them:\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token keyword\">synchronized</span> <span class=\"token punctuation\">(</span>tasks<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>            <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> threadPoolSize<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>                <span class=\"token keyword\">new</span> <span class=\"token class-name\">TaskConsumeThread</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Thread-\"</span> <span class=\"token operator\">+</span> i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Runnable</span> r<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>        <span class=\"token keyword\">synchronized</span> <span class=\"token punctuation\">(</span>tasks<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>            tasks<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>r<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>            <span class=\"token comment\">// å½“æœ‰ä»»åŠ¡è¿›å…¥æ—¶ï¼Œå”¤é†’çº¿ç¨‹æ± ä¸­æ‰€æœ‰çº¿ç¨‹</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>            tasks<span class=\"token punctuation\">.</span><span class=\"token function\">notify</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>    <span class=\"token keyword\">class</span> <span class=\"token class-name\">TaskConsumeThread</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Thread</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>        <span class=\"token keyword\">public</span> <span class=\"token class-name\">TaskConsumeThread</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> name<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>            <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>        <span class=\"token class-name\">Runnable</span> task<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>        <span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>        <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">run</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">\" is pre-started.\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>            <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>                <span class=\"token keyword\">synchronized</span> <span class=\"token punctuation\">(</span>tasks<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>                    <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>tasks<span class=\"token punctuation\">.</span><span class=\"token function\">isEmpty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>                        <span class=\"token keyword\">try</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>                            tasks<span class=\"token punctuation\">.</span><span class=\"token function\">wait</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>                        <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">InterruptedException</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>                            e<span class=\"token punctuation\">.</span><span class=\"token function\">printStackTrace</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>                        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre>                    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre>                    task <span class=\"token operator\">=</span> tasks<span class=\"token punctuation\">.</span><span class=\"token function\">removeLast</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre>                    tasks<span class=\"token punctuation\">.</span><span class=\"token function\">notifyAll</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre>                <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre>                <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\\n\"</span> <span class=\"token operator\">+</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">\" received a task:\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre>                task<span class=\"token punctuation\">.</span><span class=\"token function\">run</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"51\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"52\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"53\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"54\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>æµ‹è¯•è°ƒç”¨ï¼š</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Test</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token class-name\">ThreadPool</span> pool <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ThreadPool</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> <span class=\"token number\">8</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>            <span class=\"token class-name\">Runnable</span> task <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-></span> <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Thread</span><span class=\"token punctuation\">.</span><span class=\"token function\">currentThread</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">\" is dealing with it!\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>            pool<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>task<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>            <span class=\"token keyword\">try</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>                <span class=\"token class-name\">Thread</span><span class=\"token punctuation\">.</span><span class=\"token function\">sleep</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">long</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Math</span><span class=\"token punctuation\">.</span><span class=\"token function\">random</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token number\">2000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">InterruptedException</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>                e<span class=\"token punctuation\">.</span><span class=\"token function\">printStackTrace</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h4 id=\"submit-å’Œ-execute\"><a class=\"anchor\" href=\"#submit-å’Œ-execute\">#</a> submit () å’Œ execute ()</h4>\n<p>çº¿ç¨‹æ± æ¡†æ¶æä¾›äº†ä¸¤ç§æ–¹å¼æäº¤ä»»åŠ¡ï¼Œæ ¹æ®ä¸åŒçš„ä¸šåŠ¡éœ€æ±‚é€‰æ‹©ä¸åŒçš„æ–¹å¼ã€‚</p>\n<p><code>execute()</code>  å‡½æ•°çš„å®šä¹‰ï¼š</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">Executor</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">void</span> <span class=\"token function\">execute</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Runnable</span> command<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p><code>submit()</code>  å‡½æ•°çš„å®šä¹‰ï¼š</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">ExecutorService</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Executor</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">T</span><span class=\"token punctuation\">></span></span> <span class=\"token class-name\">Future</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">T</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">submit</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Callable</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">T</span><span class=\"token punctuation\">></span></span> task<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">T</span><span class=\"token punctuation\">></span></span> <span class=\"token class-name\">Future</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">T</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">submit</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Runnable</span> task<span class=\"token punctuation\">,</span> <span class=\"token class-name\">T</span> result<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token class-name\">Future</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token operator\">?</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">submit</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Runnable</span> task<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>submit () å’Œ execute () çš„åŒºåˆ«åœ¨äºï¼š</p>\n<ol>\n<li>\n<p>æ¥æ”¶å‚æ•°ä¸åŒã€‚</p>\n<p>execute () åªèƒ½æ¥æ”¶ Runnable ç±»å‹çš„å‚æ•°ï¼Œè€Œ submit () å‡½æ•°è¿˜å¯ä»¥æ¥å— Callable ç±»å‹å‚æ•°ã€‚</p>\n</li>\n<li>\n<p>è¿”å›å€¼ä¸åŒã€‚</p>\n<p>submit () çš„æ‰€æœ‰æ–¹æ³•éƒ½æœ‰è¿”å›å€¼ Futureï¼Œè€Œ execute () å‡½æ•°çš„è¿”å›å€¼ä¸ºç©ºã€‚</p>\n</li>\n<li>\n<p>å¼‚å¸¸å¤„ç†ã€‚</p>\n<p>submit () æ›´æ–¹ä¾¿å¯¹å¼‚å¸¸è¿›è¡Œå¤„ç†ï¼Œå®ƒä¸ä¼šæŠ›å‡ºå¼‚å¸¸è€Œæ˜¯æŠŠå¼‚å¸¸ä¿å­˜åœ¨æˆå‘˜å˜é‡ä¸­ï¼Œåœ¨  <code>FutureTask.get</code>  é˜»å¡è·å–çš„æ—¶å€™å†æŠŠå¼‚å¸¸æŠ›å‡ºæ¥ã€‚è€Œ execute () ç›´æ¥æŠ›å‡ºå¼‚å¸¸ä¹‹åï¼Œçº¿ç¨‹å°±æ­»æ‰äº†ã€‚</p>\n</li>\n</ol>\n<h4 id=\"çº¿ç¨‹æ± åŸç†\"><a class=\"anchor\" href=\"#çº¿ç¨‹æ± åŸç†\">#</a> çº¿ç¨‹æ± åŸç†</h4>\n<p>çº¿ç¨‹æ± çŠ¶æ€ï¼š</p>\n<p><img data-src=\"https://img.xfc-exclave.com/2021/09/f95d6281993a721f4b2dd9d78991cfbd1631087693.jpg\" alt=\"çº¿ç¨‹æ± çŠ¶æ€çš„è½¬æ¢\" /></p>\n<p>çº¿ç¨‹æ± å’Œçº¿ç¨‹ä¸€æ ·æ‹¥æœ‰è‡ªå·±çš„çŠ¶æ€ï¼Œåœ¨ ThreadPoolExecutor ç±»ä¸­å®šä¹‰äº†ä¸€ä¸ª volatile å˜é‡é€šè¿‡ runState æ¥è¡¨ç¤ºçº¿ç¨‹æ± çš„çŠ¶æ€ï¼Œçº¿ç¨‹æ± æœ‰äº”ç§çŠ¶æ€ï¼Œåˆ†åˆ«ä¸º RUNNINGã€SHURDOWNã€STOPã€TIDYINGã€TERMINATEDã€‚</p>\n<ul>\n<li>çº¿ç¨‹æ± åˆ›å»ºåå¤„äº RUNNING çŠ¶æ€ã€‚</li>\n<li>è°ƒç”¨ shutdown åå¤„äº SHUTDOWN çŠ¶æ€ï¼Œæ­¤æ—¶çº¿ç¨‹æ± ä¸èƒ½æ¥å—æ–°çš„ä»»åŠ¡ï¼Œä¼šç­‰å¾…ç¼“å†²é˜Ÿåˆ—çš„ä»»åŠ¡å®Œæˆã€‚</li>\n<li>è°ƒç”¨ shutdownNow åå¤„äº STOP çŠ¶æ€ï¼Œçº¿ç¨‹æ± ä¸èƒ½æ¥å—æ–°çš„ä»»åŠ¡ï¼Œå¹¶å°è¯•ç»ˆæ­¢æ­£åœ¨æ‰§è¡Œçš„ä»»åŠ¡ã€‚</li>\n<li>å½“æ‰€æœ‰çš„ä»»åŠ¡å·²ç»ˆæ­¢ï¼Œçº¿ç¨‹æ± ä»»åŠ¡æ•°é‡ä¸º 0 ï¼Œçº¿ç¨‹æ± ä¼šå˜ä¸º TIDYING çŠ¶æ€ï¼Œå¹¶ä¸”ä¼šæ‰§è¡Œé’©å­å‡½æ•°  <code>terminated()</code>  ã€‚</li>\n<li>å½“çº¿ç¨‹æ± å¤„åœ¨ TIDYING çŠ¶æ€æ—¶ï¼Œå¹¶æ‰§è¡Œå®Œ  <code>terminated()</code>  ä¹‹åï¼Œçº¿ç¨‹æ± å°±ä¼šå˜æ›´ä¸º TERMINATED çŠ¶æ€ã€‚</li>\n</ul>\n<p>çº¿ç¨‹æ± åŸç†ï¼š</p>\n<p>é¢„å…ˆå¯åŠ¨ä¸€äº›çº¿ç¨‹ï¼Œçº¿ç¨‹æ— é™å¾ªç¯ä»ä»»åŠ¡é˜Ÿåˆ—ä¸­è·å–ä¸€ä¸ªä»»åŠ¡è¿›è¡Œæ‰§è¡Œï¼Œç›´åˆ°çº¿ç¨‹æ± è¢«å…³é—­ã€‚å¦‚æœæŸä¸ªçº¿ç¨‹å› ä¸ºæ‰§è¡ŒæŸä¸ªä»»åŠ¡å‘ç”Ÿå¼‚å¸¸è€Œç»ˆæ­¢ï¼Œé‚£ä¹ˆé‡æ–°åˆ›å»ºä¸€ä¸ªæ–°çš„çº¿ç¨‹è€Œå·²ï¼Œå¦‚æ­¤åå¤ã€‚</p>\n<p>çº¿ç¨‹æ± å·¥ä½œæµç¨‹ï¼š</p>\n<p><img data-src=\"https://img.xfc-exclave.com/2021/08/3fff712aeccffb2cc5f77a9b20c68b191630301653.jpg\" alt=\"çº¿ç¨‹æ± å·¥ä½œæµç¨‹\" /></p>\n<p>æ‰§è¡Œé€»è¾‘è¯´æ˜ï¼š</p>\n<ol>\n<li>åˆ¤æ–­æ ¸å¿ƒçº¿ç¨‹æ•°æ˜¯å¦å·²æ»¡ï¼Œæ ¸å¿ƒçº¿ç¨‹æ•°å¤§å°å’Œ corePoolSize å‚æ•°æœ‰å…³ï¼Œæœªæ»¡åˆ™åˆ›å»ºçº¿ç¨‹æ‰§è¡Œä»»åŠ¡ã€‚</li>\n<li>è‹¥æ ¸å¿ƒçº¿ç¨‹æ•°å·²æ»¡ï¼Œåˆ™åˆ¤æ–­é˜Ÿåˆ—æ˜¯å¦å·²æ»¡ï¼Œé˜Ÿåˆ—æ˜¯å¦å·²æ»¡å’Œ workQueue å‚æ•°æœ‰å…³ï¼Œæœªæ»¡åˆ™åŠ å…¥é˜Ÿåˆ—ä¸­ã€‚</li>\n<li>è‹¥æ ¸å¿ƒçº¿ç¨‹æ± å’Œé˜Ÿåˆ—éƒ½å·²æ»¡ï¼Œåˆ™åˆ¤æ–­çº¿ç¨‹æ± æ˜¯å¦å·²æ»¡ï¼Œçº¿ç¨‹æ± æ˜¯å¦å·²æ»¡å’Œ maximumPoolSize å‚æ•°æœ‰å…³ï¼Œæœªæ»¡åˆ™åˆ›å»ºçº¿ç¨‹æ‰§è¡Œä»»åŠ¡ã€‚</li>\n<li>è‹¥æ ¸å¿ƒçº¿ç¨‹æ± ã€é˜Ÿåˆ—å’Œçº¿ç¨‹æ± éƒ½å·²æ»¡ï¼Œåˆ™é‡‡ç”¨æ‹’ç»ç­–ç•¥å¤„ç†æ— æ³•æ‰§æ‰§è¡Œçš„ä»»åŠ¡ï¼Œæ‹’ç»ç­–ç•¥å’Œ handler å‚æ•°æœ‰å…³ã€‚</li>\n</ol>\n<h4 id=\"ä¸ºä»€ä¹ˆä¸å…è®¸ä½¿ç”¨executorsåˆ›å»ºçº¿ç¨‹æ± \"><a class=\"anchor\" href=\"#ä¸ºä»€ä¹ˆä¸å…è®¸ä½¿ç”¨executorsåˆ›å»ºçº¿ç¨‹æ± \">#</a> ä¸ºä»€ä¹ˆä¸å…è®¸ä½¿ç”¨ Executors åˆ›å»ºçº¿ç¨‹æ± </h4>\n<blockquote>\n<p>çº¿ç¨‹æ± ä¸å…è®¸ä½¿ç”¨ Executors å»åˆ›å»ºï¼Œè€Œæ˜¯é€šè¿‡ ThreadPoolExecutor çš„æ–¹å¼ï¼Œè¿™æ ·çš„å¤„ç†æ–¹å¼è®©å†™çš„åŒå­¦æ›´åŠ æ˜ç¡®çº¿ç¨‹æ± çš„è¿è¡Œè§„åˆ™ï¼Œè§„é¿èµ„æºè€—å°½çš„é£é™©ã€‚</p>\n<p>quote from ã€Šé˜¿é‡Œå·´å·´ Java å¼€å‘æ‰‹å†Œã€‹</p>\n</blockquote>\n<p>åˆç†ä½¿ç”¨çº¿ç¨‹æ± å¯ä»¥å¸¦æ¥ä»¥ä¸‹å¥½å¤„ï¼š</p>\n<ol>\n<li>é™ä½èµ„æºæ¶ˆè€—ã€‚é€šè¿‡é‡å¤åˆ©ç”¨å·²åˆ›å»ºçš„çº¿ç¨‹é™ä½çº¿ç¨‹åˆ›å»ºå’Œé”€æ¯é€ æˆçš„æ¶ˆè€—ã€‚</li>\n<li>æé«˜å“åº”é€Ÿåº¦ã€‚å½“ä»»åŠ¡åˆ°è¾¾æ—¶ï¼Œä»»åŠ¡å¯ä»¥ä¸éœ€è¦çš„ç­‰åˆ°çº¿ç¨‹åˆ›å»ºå°±èƒ½ç«‹å³æ‰§è¡Œã€‚</li>\n<li>æé«˜çº¿ç¨‹çš„å¯ç®¡ç†æ€§ã€‚çº¿ç¨‹æ˜¯ç¨€ç¼ºèµ„æºï¼Œå¦‚æœæ— é™åˆ¶çš„åˆ›å»ºï¼Œä¸ä»…ä¼šæ¶ˆè€—ç³»ç»Ÿèµ„æºï¼Œè¿˜ä¼šé™ä½ç³»ç»Ÿçš„ç¨³å®šæ€§ï¼Œä½¿ç”¨çº¿ç¨‹æ± å¯ä»¥è¿›è¡Œç»Ÿä¸€çš„åˆ†é…ã€è°ƒä¼˜å’Œç›‘æ§ã€‚</li>\n</ol>\n<p>ä¸€èˆ¬æ¥è¯´çº¿ç¨‹æ± çš„åˆ›å»ºæœ€å¥½é€šè¿‡  <code>new ThreadPoolExecutor</code>  æ¥åˆ›å»ºï¼Œè¿™æ ·æ–¹ä¾¿æ§åˆ¶å‚æ•°ã€‚è€Œä½¿ç”¨ Executors åˆ›å»ºçš„çº¿ç¨‹æ± å®¹æ˜“é€ æˆ<ins class=\"wavy success\">å†…å­˜æº¢å‡º</ins>ã€‚</p>\n<p>è®°ä½çº¿ç¨‹æ± çš„å·¥ä½œæµç¨‹ï¼Œå¹¶ä¸”è§‚å¯Ÿ  <code>Executors.newCachedThreadPool()</code>  æºä»£ç ï¼š</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token class-name\">ExecutorService</span> <span class=\"token function\">newCachedThreadPool</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ThreadPoolExecutor</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">Integer</span><span class=\"token punctuation\">.</span>MAX_VALUE<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>                                  <span class=\"token number\">60L</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">TimeUnit</span><span class=\"token punctuation\">.</span>SECONDS<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>                                  <span class=\"token keyword\">new</span> <span class=\"token class-name\">SynchronousQueue</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Runnable</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>å½“ä¸€ä¸ªä»»åŠ¡æäº¤æ—¶ï¼Œæ ¸å¿ƒçº¿ç¨‹æ•°ä¸º 0 ï¼Œåˆ™ä¸åˆ›å»ºæ ¸å¿ƒçº¿ç¨‹ï¼Œè€Œ  <code>SynchronousQueue</code>  æ˜¯ä¸€ä¸ªä¸å­˜å‚¨å…ƒç´ çš„é˜Ÿåˆ—ï¼ˆå¯ä»¥ç†è§£ä¸ºé˜Ÿåˆ—æ°¸è¿œæ˜¯æ»¡çš„ï¼‰ï¼Œæ‰€ä»¥æœ€ç»ˆä¼šåˆ›å»ºéæ ¸å¿ƒçº¿ç¨‹æ¥æ‰§è¡Œä»»åŠ¡ã€‚è€Œå¯¹äºéæ ¸å¿ƒçº¿ç¨‹ï¼Œä¼šç«™å…¶ç©ºé—² 60s åè¢«å›æ”¶ï¼Œä½†  <code>Integer.MAX_VALUE</code>  åˆéå¸¸å¤§ï¼Œåœ¨èµ„æºæœ‰é™çš„æƒ…å†µä¸‹ï¼Œå°±å®¹æ˜“å¯¼è‡´å†…å­˜æº¢å‡ºçš„å¼‚å¸¸ã€‚</p>\n<p>è€Œ newSingleThreadExecutor å’Œ newFixedThreadPool å‡æ˜¯ä½¿ç”¨  <code>LinkedBlockingQueue</code>  é˜Ÿåˆ—ï¼Œè€Œè¿™ä¸ªé˜Ÿåˆ—çš„é•¿åº¦æŒ‡å®šä¸º  <code>Integer.MAX_VALUE</code>  ï¼Œå³æ— ç•Œé˜Ÿåˆ—ï¼Œå› æ­¤å¾€é˜Ÿåˆ—ä¸­å¯ä»¥æ’å…¥æ— é™å¤šçš„ä»»åŠ¡ï¼Œåœ¨èµ„æºæœ‰é™çš„æ—¶å€™å®¹æ˜“å¼•èµ·å†…å­˜æº¢å‡ºçš„å¼‚å¸¸ã€‚</p>\n<p>æ€»ç»“ï¼š</p>\n<p>FixedThreadPool å’Œ SingleThreadExecutorï¼Œå…è®¸çš„è¯·æ±‚é˜Ÿåˆ—é•¿åº¦ä¸º Integer.MAX_VALUEï¼Œå¯èƒ½ä¼šå †ç§¯å¤§é‡çš„è¯·æ±‚ï¼Œå¯¼è‡´å†…å­˜æº¢å‡ºã€‚</p>\n<p>CachedThreadPoolï¼Œå…è®¸åˆ›å»ºçš„çº¿ç¨‹æ•°ä¸º Integer.MAX_VALUE å¯èƒ½ä¼šåˆ›å»ºå¤§é‡çš„çº¿ç¨‹ï¼Œå¯¼è‡´å†…å­˜ç§»å‡ºã€‚</p>\n<p>è§£å†³æ–¹æ³•ï¼š</p>\n<p>å‚è€ƒä¸Šæ–‡<strong>åˆ›å»ºçº¿ç¨‹çš„å¤šç§æ–¹å¼</strong>éƒ¨åˆ†ã€‚</p>\n<h3 id=\"çº¿ç¨‹å®‰å…¨\"><a class=\"anchor\" href=\"#çº¿ç¨‹å®‰å…¨\">#</a> çº¿ç¨‹å®‰å…¨</h3>\n<h4 id=\"ä»€ä¹ˆæ˜¯çº¿ç¨‹å®‰å…¨\"><a class=\"anchor\" href=\"#ä»€ä¹ˆæ˜¯çº¿ç¨‹å®‰å…¨\">#</a> ä»€ä¹ˆæ˜¯çº¿ç¨‹å®‰å…¨</h4>\n<blockquote>\n<p>å¤šä¸ªçº¿ç¨‹è®¿é—®åŒä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œå¦‚æœä¸ç”¨è€ƒè™‘è¿™äº›çº¿ç¨‹åœ¨è¿è¡Œæ—¶ç¯å¢ƒä¸‹çš„è°ƒåº¦å’Œäº¤æ›¿æ‰§è¡Œï¼Œä¹Ÿä¸éœ€è¦è¿›è¡Œé¢å¤–çš„åŒæ­¥ï¼Œæˆ–è€…åœ¨è°ƒç”¨æ–¹è¿›è¡Œä»»ä½•å…¶ä»–æ“ä½œï¼Œè°ƒç”¨è¿™ä¸ªå¯¹è±¡çš„è¡Œä¸ºéƒ½å¯ä»¥è·å¾—æ­£ç¡®çš„ç»“æœï¼Œé‚£ä¹ˆè¿™ä¸ªå¯¹è±¡å°±æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚</p>\n<p>æˆ–è€…è¯´ï¼Œä¸€ä¸ªç±»æˆ–è€…ç¨‹åºæ‰€æä¾›çš„æ¥å£å¯¹äºçº¿ç¨‹æ¥è¯´æ˜¯åŸå­æ“ä½œæˆ–è€…å¤šä¸ªçº¿ç¨‹ä¹‹é—´çš„åˆ‡æ¢ä¸ä¼šå¯¼è‡´è¯¥æ¥å£çš„æ‰§è¡Œç»“æœå­˜åœ¨äºŒä¹‰æ€§ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬ä¸ç”¨è€ƒè™‘åŒæ­¥çš„é—®é¢˜ã€‚</p>\n<p>quote from <span class=\"exturl\" data-url=\"aHR0cHM6Ly9iYWlrZS5iYWlkdS5jb20vaXRlbS8lRTclQkElQkYlRTclQTglOEIlRTUlQUUlODklRTUlODUlQTg=\">ç™¾åº¦ç™¾ç§‘_çº¿ç¨‹å®‰å…¨</span></p>\n</blockquote>\n<h4 id=\"å¤šçº§ç¼“å­˜å’Œä¸€è‡´æ€§é—®é¢˜\"><a class=\"anchor\" href=\"#å¤šçº§ç¼“å­˜å’Œä¸€è‡´æ€§é—®é¢˜\">#</a> å¤šçº§ç¼“å­˜å’Œä¸€è‡´æ€§é—®é¢˜</h4>\n<h5 id=\"ä»€ä¹ˆæ˜¯-cpu-ç¼“å­˜\"><a class=\"anchor\" href=\"#ä»€ä¹ˆæ˜¯-cpu-ç¼“å­˜\">#</a> ä»€ä¹ˆæ˜¯ CPU ç¼“å­˜</h5>\n<p>CPU ç¼“å­˜æ˜¯ä½äº CPU ä¸å†…å­˜ä¹‹é—´çš„ä¸´æ—¶å­˜å‚¨å™¨ï¼Œå®ƒçš„å®¹é‡æ¯”å†…å­˜å°çš„å¤šï¼Œä½†æ˜¯äº¤æ¢é€Ÿåº¦å´æ¯”å†…å­˜è¦å¿«å¾—å¤šã€‚CPU ç¼“å­˜ä¸€èˆ¬ç›´æ¥è·Ÿ CPU èŠ¯ç‰‡é›†æˆæˆ–ä½äºä¸»æ¿æ€»çº¿äº’è¿çš„ç‹¬ç«‹èŠ¯ç‰‡ä¸Šã€‚</p>\n<p>éšç€ç¡¬ä»¶çš„å‘å±•ï¼Œä¸»å­˜çš„è¯»å–é€Ÿåº¦è¿œè¿œè·Ÿä¸ä¸Š CPU çš„é¢‘ç‡ï¼Œè¿™æ ·ï¼Œåœ¨å¤„ç†å™¨æ—¶é’Ÿå‘¨æœŸå†…ï¼ŒCPU å¸¸å¸¸éœ€è¦ç­‰å¾…ä¸»å­˜ï¼Œå› æ­¤å¯¼è‡´ CPU ä¸å¿…è¦çš„æµªè´¹ã€‚è€Œ cache çš„å‡ºç°æ­£æ˜¯ä¸ºäº†è§£å†³ç¼“å­˜ CPU å’Œä¸»å­˜ä¹‹é—´çš„é€Ÿåº¦ä¸åŒ¹é…çš„é—®é¢˜ã€‚</p>\n<p>CPU å¾€å¾€éœ€è¦é‡å¤å¤„ç†ç›¸åŒçš„æ•°æ®ã€é‡å¤æ‰§è¡Œç›¸åŒçš„æŒ‡ä»¤ï¼Œå¦‚æœè¿™éƒ¨åˆ†æ•°æ®ã€æŒ‡ä»¤ CPU èƒ½åœ¨ CPU ç¼“å­˜ä¸­æ‰¾åˆ°ï¼ŒCPU å°±ä¸éœ€è¦ä»å†…å­˜æˆ–ç¡¬ç›˜ä¸­å†è¯»å–æ•°æ®ã€æŒ‡ä»¤ï¼Œä»è€Œå‡å°‘äº†æ•´æœºçš„å“åº”æ—¶é—´ã€‚æ‰€ä»¥ï¼Œç¼“å­˜çš„æ„ä¹‰æ»¡è¶³ä»¥ä¸‹ä¸¤ç§<mark>å±€éƒ¨æ€§åŸç†</mark>ï¼š</p>\n<ul>\n<li>æ—¶é—´å±€éƒ¨æ€§ï¼ˆTemporal Localityï¼‰ï¼šå¦‚æœä¸€ä¸ªä¿¡æ¯é¡¹æ­£åœ¨è¢«è®¿é—®ï¼Œé‚£ä¹ˆåœ¨è¿‘æœŸå®ƒå¾ˆå¯èƒ½è¿˜ä¼šè¢«å†æ¬¡è®¿é—®ã€‚</li>\n<li>ç©ºé—´å±€éƒ¨æ€§ï¼ˆSpatial Localityï¼‰ï¼šå¦‚æœä¸€ä¸ªå­˜å‚¨å™¨çš„ä½ç½®è¢«å¼•ç”¨ï¼Œé‚£ä¹ˆå°†æ¥ä»–é™„è¿‘çš„ä½ç½®ä¹Ÿå¯èƒ½è¢«å¼•ç”¨ã€‚</li>\n</ul>\n<h5 id=\"cpu-çš„ä¸‰çº§ç¼“å­˜\"><a class=\"anchor\" href=\"#cpu-çš„ä¸‰çº§ç¼“å­˜\">#</a> CPU çš„ä¸‰çº§ç¼“å­˜</h5>\n<p>åœ¨ Windows ç¯å¢ƒä¸­æŸ¥çœ‹ä¸»æœºçš„ä¸‰çº§ç¼“å­˜ï¼š</p>\n<p><img data-src=\"https://img.xfc-exclave.com/2021/08/f3b032e86f5de9de162183a2387fc1801630310347.png\" alt=\"WindowsæŸ¥çœ‹ä¸‰çº§ç¼“å­˜\" /></p>\n<p>éšç€å¤šæ ¸ CPU çš„å‘å±•ï¼ŒCPU ç¼“å­˜é€šå¸¸åˆ†æˆäº†ä¸‰ä¸ªçº§åˆ«ï¼š  <code>L1</code>  ï¼Œ  <code>L2</code>  ï¼Œ  <code>L3</code>  ã€‚çº§åˆ«è¶Šå°è¶Šæ¥è¿‘ CPUï¼Œæ‰€ä»¥é€Ÿåº¦ä¹Ÿæ›´å¿«ï¼ŒåŒæ—¶ä¹Ÿä»£è¡¨ç€å®¹é‡è¶Šå°ã€‚åœ¨æ¯ä¸ª CPU å†…æ ¸ä¸Šéƒ½å­˜åœ¨ä¸¤ä¸ªä¸€çº§ç¼“å­˜ï¼Œä¸€ä¸ªæ˜¯ç”¨äºå­˜å‚¨æ•°æ®çš„ L1d Cacheï¼ˆData Cacheï¼‰ï¼Œå¦ä¸€ä¸ªæ˜¯ç”¨äºå­˜å‚¨æŒ‡ä»¤çš„ L1i Cacheï¼ˆInstruction Cacheï¼‰ã€‚ä»¥åŠç¼“å­˜æœ€å°ï¼Œä¹Ÿæœ€æ¥è¿‘ CPUï¼ŒäºŒä¸‰çº§åˆ™ç›¸å¯¹æ›´å¤§ï¼Œè· CPU ä¹Ÿç›¸å¯¹è¾ƒè¿œã€‚ä¸€èˆ¬æ¥è¯´ï¼Œæ¯çº§ç¼“å­˜çš„å‘½ä¸­ç‡å¤§æ¦‚éƒ½åœ¨ 80% å·¦å³ï¼Œä¹Ÿå°±æ˜¯è¯´å…¨éƒ¨æ•°æ®é‡çš„ 80% éƒ½å¯ä»¥åœ¨ä¸€çº§ç¼“å­˜ä¸­æ‰¾åˆ°ã€‚å‰©ä¸‹æœªå‘½ä¸­çš„ 20% åˆ™ä»äºŒçº§ç¼“å­˜ä¸­æŸ¥æ‰¾ï¼Œå¦‚æœä¸‰çº§ç¼“å­˜ä¸­éƒ½ä¸ºæ‰¾åˆ°ï¼Œæ‰ä»ä¸»å­˜ä¸­è¯»å–ã€‚</p>\n<p><img data-src=\"https://img.xfc-exclave.com/2021/08/8bb43d19c54087fee7fc3e01b1a049d21630310735.png\" alt=\"ä¸‰çº§ç¼“å­˜ç¤ºæ„å›¾\" /></p>\n<blockquote>\n<p>å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œä¸€ä¸ªæ ¸æ‹¥æœ‰ä¸¤ä¸ª L1 ç¼“å­˜ï¼Œä¸€ä¸ª L2 ç¼“å­˜ï¼›åœ¨åŒä¸€ä¸ª CPU æ’æ§½ä¹‹é—´çš„æ‰€æœ‰æ ¸å…±äº«ä¸€ä¸ª L3 ç¼“å­˜ã€‚</p>\n</blockquote>\n<p>å¸¦æœ‰é«˜é€Ÿç¼“å­˜ CPU æ‰§è¡Œè®¡ç®—çš„æµç¨‹ï¼š</p>\n<ol>\n<li>å°†ç¨‹åºå’Œæ•°æ®ä»ç¡¬ç›˜åŠ è½½åˆ°å†…å­˜ä¸­ã€‚</li>\n<li>å°†ç¨‹åºå’Œæ•°æ®ä»å†…å­˜åŠ è½½åˆ°ç¼“å­˜ä¸­ï¼ˆç›®å‰å¤šä¸‰çº§ç¼“å­˜ï¼Œæ•°æ®åŠ è½½é¡ºåºï¼šL3 -&gt; L2 -&gt; L1ï¼‰ã€‚</li>\n<li>CPU å°†ç¼“å­˜ä¸­çš„æ•°æ®åŠ è½½åˆ°å¯„å­˜å™¨ä¸­ï¼Œå¹¶è¿›è¡Œè¿ç®—ã€‚</li>\n<li>CPU ä¼šå°†æ•°æ®åˆ·æ–°å›ç¼“å­˜ï¼Œå¹¶åœ¨ä¸€å®šçš„æ—¶é—´å‘¨æœŸä¹‹ååˆ·æ–°å›å†…å­˜ã€‚</li>\n</ol>\n<h5 id=\"ç¼“å­˜ä¸€è‡´æ€§åè®®mesi\"><a class=\"anchor\" href=\"#ç¼“å­˜ä¸€è‡´æ€§åè®®mesi\">#</a> ç¼“å­˜ä¸€è‡´æ€§åè®®ï¼ˆMESIï¼‰</h5>\n<p>å¤šæ ¸ CPU æƒ…å†µä¸‹ï¼Œå­˜åœ¨å¤šä¸ª L1 ç¼“å­˜ï¼Œè¦ä¿è¯ç¼“å­˜æ•°æ®çš„ä¸€è‡´ï¼Œä¸è®©æ•°æ®äº§ç”Ÿæ··ä¹±ã€‚å…¶å¸¸è§çš„è§£å†³æ–¹æ¡ˆæ˜¯ç¼“å­˜ä¸€è‡´æ€§ï¼ˆMESIï¼‰ã€‚</p>\n<blockquote>\n<p>é™¤äº† MESI ä¹‹å¤–ï¼Œè¿˜æœ‰<ins>é”ä½æ€»çº¿</ins>ä¹Ÿå¯ç”¨äºä¿è¯ç¼“å­˜æ•°æ®çš„ä¸€è‡´ã€‚</p>\n</blockquote>\n<p>MESI ï¼ˆ <code>Modified Exclusive Shared Or Invalid</code> ï¼‰ä¹Ÿæˆä¸ºä¼Šåˆ©è¯ºæ–¯åè®®ï¼Œå®ƒæ˜¯ä¸€ç§å¹¿æ³›ä½¿ç”¨çš„æ”¯æŒå†™å›ç­–ç•¥çš„ç¼“å­˜ä¸€è‡´æ€§åè®®ã€‚ä¸ºäº†ä¿è¯å¤šä¸ª CPU ç¼“å­˜ä¸­å…±äº«æ•°æ®çš„ä¸€è‡´æ€§ï¼Œå®šä¹‰äº†ç¼“å­˜è¡Œï¼ˆCache Lineï¼‰å››ç§çŠ¶æ€ï¼Œè€Œ CPU å¯¹ç¼“å­˜è¡Œçš„å››ç§æ“ä½œå¯èƒ½ä¼šäº§ç”Ÿä¸ä¸€è‡´çš„çŠ¶æ€ï¼Œå› æ­¤ç¼“å­˜æ§åˆ¶å™¨ç›‘å¬åˆ°æœ¬åœ°æ“ä½œå’Œè¿œç¨‹æ“ä½œçš„æ—¶å€™ï¼Œéœ€è¦å¯¹åœ°å€ä¸€è‡´çš„ç¼“å­˜è¡Œçš„çŠ¶æ€è¿›è¡Œä¸€è‡´æ€§ä¿®æ”¹ï¼Œä»è€Œä¿è¯æ•°æ®åœ¨å¤šä¸ªç¼“å­˜ä¹‹é—´ä¿æŒä¸€è‡´æ€§ã€‚</p>\n<blockquote>\n<p>ç¼“å­˜è¡Œï¼ˆCache Lineï¼‰ï¼šå®ƒæ˜¯å­˜å‚¨ç¼“å­˜æ•°æ®çš„å•å…ƒï¼Œæœ€å¸¸è§çš„ç¼“å­˜è¡Œå¤§å°æ˜¯ 64 ä¸ªå­—èŠ‚ã€‚</p>\n<p>å½“å¤šçº¿ç¨‹ä¿®æ”¹äº’ç›¸ç‹¬ç«‹çš„å˜é‡æ—¶ï¼Œå¦‚æœè¿™äº›å˜é‡å…±äº«åŒä¸€ä¸ªç¼“å­˜è¡Œï¼Œå°±ä¼šæ— æ„ä¸­å½±å“å½¼æ­¤çš„æ€§èƒ½ï¼Œè¿™å°±æ˜¯ä¼ªå…±äº«ã€‚</p>\n</blockquote>\n<p>MESI ä¸­çš„æ¯ä¸ªç¼“å­˜è¡Œéƒ½æœ‰ 4 ä¸ªçŠ¶æ€ï¼Œåˆ†åˆ«æ˜¯  <code>Exclusive</code>  ã€  <code>Modified</code>  ã€  <code>Shared</code>  å’Œ  <code>Invalid</code>  ã€‚</p>\n<ol>\n<li>\n<p>Modifiedï¼ˆä¿®æ”¹ï¼‰</p>\n<p>è¡¨ç¤ºæ”¹ç¼“å­˜è¡Œä¸­çš„å†…å®¹è¢«ä¿®æ”¹äº†ï¼Œå’Œå†…å­˜ä¸­çš„æ•°æ®ä¸ä¸€è‡´ï¼Œæ•°æ®åªå­˜åœ¨å½“å‰ Cache ä¸­ã€‚</p>\n<p>ç¼“å­˜è¡Œå¿…é¡»æ—¶åˆ»ç›‘å¬æ‰€æœ‰è¯•å›¾è¯»å–è¯¥ç¼“å­˜è¡Œç›¸å¯¹å°±ä¸»å­˜çš„æ“ä½œï¼Œè¿™ç§æ“ä½œå¿…é¡»åœ¨ç¼“å­˜å°†è¯¥ç¼“å­˜è¡Œå†™å›ä¸»å­˜å¹¶å°†çŠ¶æ€å˜æˆ Sï¼ˆå…±äº«ï¼‰çŠ¶æ€ä¹‹å‰è¢«å»¶è¿Ÿæ‰§è¡Œã€‚</p>\n<p>å½“è¢«å†™å›ä¸»å­˜ä¹‹åï¼Œè¯¥ç¼“å­˜è¡Œçš„çŠ¶æ€ä¼šå˜æˆç‹¬äº«ï¼ˆexclusive) çŠ¶æ€ã€‚</p>\n</li>\n<li>\n<p>Exclusiveï¼ˆç‹¬äº«ã€äº’æ–¥ï¼‰</p>\n<p>è¡¨ç¤ºæ”¹ç¼“å­˜è¡Œä¸­çš„æ•°æ®å’Œå†…å­˜ä¸­çš„ä¸€è‡´ï¼Œæ•°æ®åªå­˜åœ¨å½“å‰ Cache ä¸­ã€‚</p>\n<p>ç¼“å­˜è¡Œä¹Ÿå¿…é¡»ç›‘å¬å…¶å®ƒç¼“å­˜è¯»ä¸»å­˜ä¸­è¯¥ç¼“å­˜è¡Œçš„æ“ä½œï¼Œä¸€æ—¦æœ‰è¿™ç§æ“ä½œï¼Œè¯¥ç¼“å­˜è¡Œéœ€è¦å˜æˆ Sï¼ˆå…±äº«ï¼‰çŠ¶æ€ã€‚</p>\n<p>å½“ CPU ä¿®æ”¹è¯¥ç¼“å­˜è¡Œä¸­å†…å®¹æ—¶ï¼Œè¯¥çŠ¶æ€å¯ä»¥å˜æˆ Modified çŠ¶æ€ã€‚</p>\n</li>\n<li>\n<p>Sharedï¼ˆå…±äº«ï¼‰</p>\n<p>è¡¨ç¤ºè¯¥ç¼“å­˜è¡Œä¸­å•æ•°æ®å’Œå†…å­˜ä¸­çš„ä¸€è‡´ï¼Œæ•°æ®å­˜åœ¨äºå¤šä¸ª Cache ä¸­ã€‚</p>\n<p>ç¼“å­˜è¡Œä¹Ÿå¿…é¡»ç›‘å¬å…¶å®ƒç¼“å­˜ä½¿è¯¥ç¼“å­˜è¡Œæ— æ•ˆæˆ–è€…ç‹¬äº«è¯¥ç¼“å­˜è¡Œçš„è¯·æ±‚ï¼Œå¹¶å°†è¯¥ç¼“å­˜è¡Œå˜æˆæ— æ•ˆï¼ˆInvalidï¼‰ã€‚</p>\n<p>å½“æœ‰ä¸€ä¸ª CPU ä¿®æ”¹è¯¥ç¼“å­˜è¡Œæ—¶ï¼Œå…¶å®ƒ CPU ä¸­è¯¥ç¼“å­˜è¡Œå¯ä»¥è¢«ä½œåºŸï¼ˆå˜æˆæ— æ•ˆçŠ¶æ€ Invalidï¼‰ã€‚</p>\n</li>\n<li>\n<p>Invalidï¼ˆæ— æ•ˆï¼‰</p>\n<p>è¡¨ç¤ºè¯¥ç¼“å­˜è¡Œä¸­çš„å†…å®¹æ— æ•ˆã€‚</p>\n</li>\n</ol>\n<p>MESI çŠ¶æ€è½¬æ¢å›¾ï¼š</p>\n<p class=\"gallery\"><img data-src=\"https://img.xfc-exclave.com/2021/09/0a434f9fe2eff4d10ea33a2e00ced5411630458713.jpg\" alt=\"MESI çŠ¶æ€è½¬æ¢å›¾ç¤ºä¸€\" title=\"MESI çŠ¶æ€è½¬æ¢å›¾ç¤ºä¸€\" /><br />\n<img data-src=\"https://img.xfc-exclave.com/2021/09/ba52990cfaaf1aefe8a2ac44b18d93fb1630469750.jpg\" alt=\"MESI çŠ¶æ€è½¬æ¢å›¾ç¤ºäºŒ\" title=\"MESI çŠ¶æ€è½¬æ¢å›¾ç¤ºäºŒ\" /></p>\n<h4 id=\"å¹¶å‘ç¼–ç¨‹ä¸‰å¤§ç‰¹æ€§\"><a class=\"anchor\" href=\"#å¹¶å‘ç¼–ç¨‹ä¸‰å¤§ç‰¹æ€§\">#</a> å¹¶å‘ç¼–ç¨‹ä¸‰å¤§ç‰¹æ€§</h4>\n<p>å¹¶å‘ç¼–ç¨‹çš„ç›®æ ‡æ˜¯å……åˆ†çš„åˆ©ç”¨å¤„ç†å™¨çš„æ¯ä¸€ä¸ªæ ¸ï¼Œä»¥è¾¾åˆ°æœ€é«˜çš„å¤„ç†æ€§èƒ½ï¼ŒåŸå­æ€§ã€å¯è§æ€§å’Œæœ‰åºæ€§æ˜¯ Java å¹¶å‘ç¼–ç¨‹çš„ä¸‰å¤§ç‰¹æ€§ã€‚</p>\n<p>è¦æƒ³å¹¶å‘ç¨‹åºæ­£ç¡®åœ°æ‰§è¡Œï¼Œå¿…é¡»è¦ä¿è¯åŸå­æ€§ã€å¯è§æ€§ä»¥åŠæœ‰åºæ€§ã€‚åªè¦æœ‰ä¸€ä¸ªæ²¡æœ‰è¢«ä¿è¯ï¼Œå°±æœ‰å¯èƒ½ä¼šå¯¼è‡´ç¨‹åºè¿è¡Œä¸æ­£ç¡®ã€‚</p>\n<ol>\n<li>\n<p>å¯è§æ€§</p>\n<p>å¯è§æ€§æ˜¯æŒ‡å½“ä¸€ä¸ªçº¿ç¨‹ä¿®æ”¹äº†å…±äº«å˜é‡åï¼Œå…¶ä»–çº¿ç¨‹èƒ½å¤Ÿç«‹å³çœ‹è§è¿™ä¸ªä¿®æ”¹ã€‚</p>\n<p>CPU ä¸­æœ‰ä¸€å—ç¼“å­˜åŒºå«åšé«˜é€Ÿç¼“å­˜ï¼Œå¦‚æœçº¿ç¨‹ä¿®æ”¹äº†æŸä¸ªå˜é‡çš„å€¼ï¼Œé‚£ä¹ˆï¼Œç¨‹åºä¼šå…ˆå°†ä¿®æ”¹è¿‡çš„å€¼æ”¾å…¥ç¼“å­˜åŒºï¼Œç„¶ååœ¨æ»¡è¶³ä¸€å®šæ¡ä»¶æ—¶ï¼Œè¯¥æ•°æ®æ‰ä¼šä»ç¼“å­˜åŒºåŒæ­¥åˆ°ä¸»å­˜åŒºã€‚è€Œåªæœ‰åŒæ­¥åˆ°ä¸»å­˜åŒºåï¼Œå…¶ä»–çº¿ç¨‹æ‰èƒ½ â€œçœ‹åˆ°â€ è¿™ä¸ªä¿®æ”¹åçš„å€¼ã€‚</p>\n<p>è¦ä¿è¯å¯è§æ€§ï¼Œå°±éœ€è¦ä½¿ç”¨  <code>volatile</code>  å…³é”®å­—ï¼Œå®ƒä¼šå°†é«˜é€Ÿç¼“å­˜åŒºä¸­è¢«ä¿®æ”¹çš„ç»“æœåˆ·æ–°åˆ°ä¸»å­˜ä¸­ï¼Œç„¶åå†è¯»å–ä¸»å­˜ä¸­çš„æ•°æ®ï¼Œè¿™é‡Œä½¿ç”¨åˆ°ä¸€ç§æœºåˆ¶ï¼Œå«åš<mark>æ€»çº¿å—…æ¢æœºåˆ¶</mark>ã€‚</p>\n<p>è¿™é‡Œæˆ‘å°è¯•ç”»äº†ä¸€å¼ å›¾ï¼Œæ¥è§£é‡Šå¦‚ä½•ä¿è¯å¯è§æ€§ï¼š</p>\n<p><img data-src=\"https://img.xfc-exclave.com/2021/09/01e093d709568b37f3731b541e49769c1630570044.jpg\" alt=\"æ€»çº¿å—…æ¢æœºåˆ¶å·¥ä½œå›¾ç¤º\" width=\"450px\" /></p>\n<p>è§£é‡Šï¼š</p>\n<p>æ€»çº¿å—…æ¢æœºåˆ¶ä¼šå—…æ¢é€šè¿‡é”æ€»çº¿çš„æ•°æ®ï¼Œå¦‚æœè¯¥æ•°æ®åªè¢«ä¸€ä¸ªæ ¸å¿ƒå¼•ç”¨ï¼Œé‚£ä¹ˆï¼Œè¯¥ç¼“å­˜è¡Œå°±ä¼šæ ‡è®°ä¸ºç‹¬äº«çŠ¶æ€ï¼ˆEï¼‰ï¼Œè€Œå½“é”æ€»çº¿å—…æ¢åˆ°å¤šä¸ªçº¿ç¨‹åŒæ—¶å¼•ç”¨è¯¥æ•°æ®ï¼Œé‚£ä¹ˆ CPU å°±ä¼šé€šè¿‡å¹¿æ’­æœºåˆ¶ï¼Œé€šçŸ¥æ‰€æœ‰å¼•ç”¨è¯¥æ•°æ®çš„æ ¸å¿ƒï¼Œå°†å¯¹åº”çš„ç¼“å­˜è¡ŒçŠ¶æ€å˜æ›´ä¸ºå…±äº«çŠ¶æ€ï¼ˆSï¼‰ï¼Œå¦‚æœå…±äº«çš„æ•°æ®è¢«å…¶ä¸­æŸä¸€çº¿ç¨‹ï¼ˆæ ¸å¿ƒï¼‰ä¿®æ”¹ï¼Œé‚£ä¹ˆæ­¤æ—¶ï¼Œè¯¥æ•°æ®ç›¸å¯¹äºå¯¹å…¶è¿›è¡Œä¿®æ”¹çš„çº¿ç¨‹æ¥è¯´ï¼Œå°±ä¼šå˜æ›´ä¸ºä¿®æ”¹çŠ¶æ€ï¼ˆMï¼‰ï¼Œè¿™æ—¶ä¿®æ”¹çŠ¶æ€çš„æ•°æ®åˆ·æ–°åˆ°ä¸»å­˜åŒºå¿…ç„¶ä¼šå†æ¬¡ç»è¿‡é”æ€»çº¿ï¼Œé”æ€»çº¿å—…æ¢åˆ°æ•°æ®å‘ç”Ÿäº†ä¿®æ”¹ï¼Œå°±ä¼šå†æ¬¡é€šçŸ¥å…¶ä»–æ‰€æœ‰å¼•ç”¨è¯¥æ•°æ®çš„æ ¸å¿ƒï¼Œå°†å„è‡ªåŸæœ¬å¼•ç”¨æ•°æ®å¯¹åº”çš„ç¼“å­˜è¡Œå˜æ›´ä¸ºæ— æ•ˆçŠ¶æ€ï¼ˆIï¼‰ã€‚è€Œå¦‚æœå…¶ä»–æ ¸å¿ƒæƒ³è¦å†æ¬¡è¯»å–è¯¥æ•°æ®ï¼Œå‘ç°ç¼“å­˜è¡Œå¤„äºæ— æ•ˆçŠ¶æ€ï¼Œå°±ä¼šé‡æ–°ä»ä¸»å†…å­˜ä¸­å°†è¿™ä¸ªå˜é‡åŠ è½½åˆ°å®ƒä»¬å„è‡ªçš„ç¼“å­˜ä¸­ã€‚</p>\n<p>å¯è§æ€§æ˜¯ä¿éšœå¤šçº¿ç¨‹æ“ä½œä¸­æ•°æ®ä¸€è‡´æ€§å’Œç»“æœæ­£ç¡®æ€§çš„åŸºçŸ³ï¼Œå¤šçº¿ç¨‹ç¯å¢ƒä¸‹å½±å“å˜é‡å¯è§æ€§çš„å› ç´ ï¼š</p>\n<ul>\n<li>æŒ‡ä»¤é‡æ’ã€‚</li>\n<li>çº¿ç¨‹è°ƒåº¦ï¼ˆåˆ‡æ¢ï¼‰ã€‚</li>\n<li>å·¥ä½œå†…å­˜å’Œä¸»å†…å­˜æ²¡æœ‰åŠæ—¶åˆ·æ–°ã€‚</li>\n</ul>\n<p>JVM ä¿éšœå¯è§æ€§çš„æ–¹æ³•ï¼šfinalã€volatileã€é”ã€‚</p>\n</li>\n<li>\n<p>åŸå­æ€§</p>\n<p>åŸå­æ“ä½œæ˜¯æŒ‡ä¸€ä¸ªæ“ä½œä¸ä¼šè¢«çº¿ç¨‹è°ƒåº¦æœºåˆ¶æ‰“æ–­ï¼Œä¸€æ—¦å¼€å§‹ï¼Œå°±ä¸€ç›´è¿è¡Œåˆ°ç»“æŸï¼Œä¸­é—´ä¸ä¼šæœ‰ä»»ä½•çº¿ç¨‹åˆ‡æ¢ã€‚</p>\n<p>åŸå­æ€§å¯ä»¥ä¿éšœè¯»å–åˆ°çš„æŸä¸ªå±æ€§çš„å€¼æ˜¯ç”±ä¸€ä¸ªçº¿ç¨‹å†™å…¥çš„ã€‚ å˜é‡ä¸ä¼šåœ¨åŒä¸€æ—¶åˆ»å—åˆ°å¤šä¸ªçº¿ç¨‹åŒæ—¶å†™å…¥é€ æˆå¹²æ‰°ã€‚</p>\n<blockquote>\n<p>åŸºæœ¬ç±»å‹çš„å•æ¬¡è¯»å†™æ“ä½œæ˜¯åŸå­çš„ï¼Œä½†æ˜¯å¤åˆæ“ä½œå¦‚ï¼š  <code>int i=0;i++</code>  ï¼Œå°±æ˜¯éåŸå­æ€§çš„ã€‚</p>\n</blockquote>\n<p>åŸå­æ€§æ˜¯æ‹’ç»å¤šçº¿ç¨‹æ“ä½œçš„ï¼Œä¸è®ºæ˜¯å¤šæ ¸è¿˜æ˜¯å•æ ¸ï¼Œå…·æœ‰åŸå­æ€§çš„é‡ï¼ŒåŒä¸€æ—¶åˆ»åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹æ¥å¯¹å®ƒè¿›è¡Œæ“ä½œï¼å› æ­¤ï¼Œåœ¨çº¿ç¨‹æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œä¸å…è®¸å…¶ä»–å¹¶è¡Œçº¿ç¨‹å¯¹è¯¥å˜é‡è¿›è¡Œè¯»å–å’Œå†™å…¥çš„æ“ä½œã€‚å¦‚æœå‘ç”Ÿç«äº‰ï¼Œåˆ™å…¶ä»–çº¿ç¨‹å¿…é¡»ç­‰å¾…ã€‚</p>\n<p>ä½¿ç”¨ volatile å…³é”®å­—å¯ä»¥ä¿è¯å˜é‡å•æ¬¡æ“ä½œçš„åŸå­æ€§ï¼Œä½†è¦æƒ³åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ä¿è¯åŸå­æ€§ï¼Œvolatile å´æ˜¯æ— æ³•ä¿è¯å¤åˆæ“ä½œçš„åŸå­æ€§çš„ï¼Œè¿™æ—¶å°±éœ€è¦é€šè¿‡é”æœºåˆ¶ã€ <code>synchronized</code>  æ¥ç¡®ä¿ã€‚</p>\n</li>\n<li>\n<p>æœ‰åºæ€§</p>\n<p>ç”±äº CPU è®¡ç®—é€Ÿåº¦çš„å‘å±•è¿œè¿œé«˜äºå†…å­˜è¯»å†™é€Ÿåº¦ï¼Œå› æ­¤å‡ºç°æ€§èƒ½æµªè´¹ï¼Œä½†å³ä½¿é‡‡ç”¨äº†é«˜é€Ÿç¼“å­˜æ¥æŠµæ¶ˆå†…å­˜è®¿é—®æ—¶å¸¦æ¥çš„å»¶è¿Ÿï¼Œè¿™ç§æƒ…å†µä»æ—§ååˆ†çªå‡ºã€‚å› æ­¤ï¼Œä¸ºäº†å°½é‡å‡å°‘ cache çš„ç­‰å¾…æ—¶é—´ï¼ŒCPU é‡‡ç”¨äº†æŒ‡ä»¤çº§å¹¶è¡Œé‡æ’åºæ¥æé«˜æ‰§è¡Œæ•ˆç‡ï¼Œè¿™ä¹Ÿè¢«ç§°ä¸º CPU ä¹±åºæ‰§è¡Œï¼Œè€Œæœ‰åºæ€§åˆ™æ˜¯æŒ‡ç¨‹åºæŒ‡ä»¤æŒ‰ç…§é¢„æœŸçš„é¡ºåºæ‰§è¡Œè€Œéä¹±åºæ‰§è¡Œã€‚</p>\n<p>è™½ç„¶å¤„ç†å™¨ä¼šå¯¹æŒ‡ä»¤è¿›è¡Œé‡æ’åºï¼Œä½†æ˜¯å®ƒä¼šä¿è¯ç¨‹åºæœ€ç»ˆç»“æœä¼šå’Œä»£ç é¡ºåºæ‰§è¡Œç»“æœç›¸åŒï¼Œè¿™æ˜¯å› ä¸ºå¤„ç†å™¨åœ¨è¿›è¡Œé‡æ’åºæ—¶æ˜¯ä¼šè€ƒè™‘æŒ‡ä»¤ä¹‹é—´çš„æ•°æ®ä¾èµ–æ€§ï¼Œè¿™æ ·ä¼˜åŒ–äº†æ•ˆç‡ï¼Œè€Œä¸”å¯¹å•ä¸ªçº¿ç¨‹çš„æ‰§è¡Œç»“æœä¹Ÿä¸ä¼šäº§ç”Ÿå½±å“ã€‚</p>\n<p>ä½†æ˜¯ï¼Œåœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ï¼ŒæŒ‡ä»¤é‡æ’åºå°±æ— æ³•ä¿éšœæ‰§è¡Œç»“æœçš„æ­£ç¡®æ€§äº†ï¼Œè¿™æ—¶å°±éœ€è¦ä½¿ç”¨åˆ° synchronized å…³é”®å­—å’Œ Lock æ¥å£ï¼Œå®ƒä»¬éƒ½å¯ä»¥ä¿è¯äº†å¤šçº¿ç¨‹ç¯å¢ƒä¸‹çº¿ç¨‹é—´æ“ä½œçš„æœ‰åºæ€§ï¼š</p>\n<ul>\n<li>synchronized å…³é”®å­—æ˜¯ç”± â€œä¸€ä¸ªå˜é‡åœ¨åŒä¸€æ—¶åˆ»åªå…è®¸ä¸€æ¡çº¿ç¨‹å¯¹å…¶è¿›è¡Œé”æ“ä½œâ€ è¿™æ¡è§„åˆ™è·å¾—çš„ï¼Œè¿™æ¡è§„åˆ™å†³å®šäº†æŒæœ‰åŒä¸€ä¸ªé”çš„ä¸¤ä¸ªåŒæ­¥å—åªèƒ½ä¸²è¡Œåœ°è¿›å…¥ã€‚</li>\n<li>Lock æ¥å£çš„ä½œç”¨åŸŸ synchronized å…³é”®å­—ç›¸ä¼¼ï¼Œä½†å®ƒæä¾›äº†æ›´åŠ å¹¿æ³›çš„é”å®šæ“ä½œã€‚</li>\n</ul>\n<blockquote>\n<p>volatile å…³é”®å­—ä¹Ÿæ˜¯å¯ä»¥ä¿è¯æœ‰åºæ€§çš„ï¼Œå› ä¸ºå®ƒç¦æ­¢äº†æŒ‡ä»¤é‡æ’åºã€‚</p>\n</blockquote>\n</li>\n</ol>\n<p>å…³äºä¸‰å¤§ç‰¹æ€§ï¼Œè¿™ç¯‡æ–‡ç« ä¹Ÿè®²å¾—å¾ˆå¥½ï¼š<span class=\"exturl\" data-url=\"aHR0cHM6Ly9jbG91ZC50ZW5jZW50LmNvbS9kZXZlbG9wZXIvYXJ0aWNsZS8xNzM1MDE2\">ã€é«˜å¹¶å‘ã€‘å¦‚ä½•è§£å†³å¯è§æ€§å’Œæœ‰åºæ€§é—®é¢˜ï¼Ÿ</span></p>\n<h4 id=\"æŒ‡ä»¤é‡æ’ç»“æœçš„æ­£ç¡®æ€§\"><a class=\"anchor\" href=\"#æŒ‡ä»¤é‡æ’ç»“æœçš„æ­£ç¡®æ€§\">#</a> æŒ‡ä»¤é‡æ’ç»“æœçš„æ­£ç¡®æ€§</h4>\n<h5 id=\"as-if-serial-è¯­ä¹‰\"><a class=\"anchor\" href=\"#as-if-serial-è¯­ä¹‰\">#</a> as-if-serial è¯­ä¹‰</h5>\n<p><code>as-if-serial</code>  æ˜¯æŒ‡æ‰€æœ‰çš„æŒ‡ä»¤éƒ½å¯ä»¥ä¸ºäº†ä¼˜åŒ–è€Œè¢«é‡æ’åºï¼Œä½†æ˜¯å¿…é¡»ä¿è¯æœ€ç»ˆæ‰§è¡Œçš„ç»“æœå’Œé‡æ’åºä¹‹å‰çš„ç»“æœæ˜¯ä¸€è‡´çš„ï¼Œå…¶ä¸»è¦éµå®ˆçš„è§„åˆ™æ˜¯<ins>é‡æ’åºä¸ç ´åæ•°æ®é—´çš„ä¾èµ–å…³ç³»</ins>ã€‚</p>\n<p>as-if-serial æœ‰æ•ˆåœ°ä¿è¯äº†å•çº¿ç¨‹ç¯å¢ƒä¸‹æŒ‡ä»¤é‡æ’åºæ‰§è¡Œç»“æœçš„æ­£ç¡®æ€§ã€‚</p>\n<h5 id=\"happens-before-åŸåˆ™\"><a class=\"anchor\" href=\"#happens-before-åŸåˆ™\">#</a> happens-before åŸåˆ™</h5>\n<p>å…ˆè¡Œå‘ç”ŸåŸåˆ™ï¼ˆ <code>happens-before</code> ï¼‰æ˜¯  <code>JMM</code>  ç”¨æ¥è§„å®šä¸¤ä¸ªæ“ä½œä¹‹é—´çš„ååºå…³ç³»ï¼Œè¿™ä¸¤ä¸ªæ“ä½œæ˜¯å¯ä»¥è·¨çº¿ç¨‹çš„ã€‚happens-before ä¸­ç¡®å®šäº† 8 æ¡è§„åˆ™ï¼Œå¦‚æœä¸¤ä¸ªæ“ä½œä¹‹é—´çš„å…³ç³»å¯ä»¥ä»å…¶ä¸­æ¨å¯¼å‡ºæ¥ï¼Œå°±è¯´æ˜è¿™ä¸¤ä¸ªæ“ä½œæ˜¯æœ‰åºçš„ã€‚</p>\n<p>happens-before å¹¶ä¸é™åˆ¶æŒ‡ä»¤é‡æ’ï¼Œä½†æ˜¯éœ€è¦ä¿è¯æŒ‡ä»¤é‡æ’ç»“æœä¸æŒ‰ happens-before å…³ç³»æ¥æ‰§è¡Œçš„ç»“æœä¸€è‡´ã€‚happens-before åŸåˆ™ä¿è¯äº†å‰åä¸¤ä¸ªæ“ä½œé—´ä¸ä¼šè¢«é‡æ’åºä¸”åè€…å¯¹å‰è€…çš„å†…å­˜æ˜¯å¯è§çš„ã€‚</p>\n<p>happens-before çš„å…«æ¡åŸåˆ™ï¼š</p>\n<ol>\n<li>\n<p>ç¨‹åºæ¬¡åºè§„åˆ™ï¼ˆProgram Order Ruleï¼‰</p>\n<p>åœ¨ä¸€ä¸ªçº¿ç¨‹å†…ï¼ŒæŒ‰ç…§æ§åˆ¶æµé¡ºåºï¼Œä¹¦å†™åœ¨å‰é¢çš„æ“ä½œå…ˆè¡Œå‘ç”Ÿäºä¹¦å†™åœ¨åé¢çš„æ“ä½œã€‚</p>\n<blockquote>\n<p>æ³¨æ„ï¼Œè¿™é‡Œè¯´çš„æ˜¯æ§åˆ¶æµé¡ºåºè€Œä¸æ˜¯ç¨‹åºä»£ç é¡ºåºï¼Œå› ä¸ºè¦è€ƒè™‘åˆ°åˆ†æ”¯ã€å¾ªç¯ç­‰ç»“æ„ã€‚</p>\n</blockquote>\n</li>\n<li>\n<p>ç®¡ç¨‹é”å®šè§„åˆ™ï¼ˆMonitor Lock Ruleï¼‰</p>\n<p>ä¸€ä¸ª unlock æ“ä½œå…ˆè¡Œå‘ç”Ÿäºåé¢å¯¹åŒä¸€ä¸ªé”çš„ lock æ“ä½œã€‚</p>\n<blockquote>\n<p>è¿™é‡Œå¿…é¡»å¼ºè°ƒçš„æ˜¯ â€œåŒä¸€ä¸ªé”â€ï¼Œè€Œ â€œåé¢â€ æŒ‡çš„æ˜¯æ—¶é—´ä¸Šçš„å…ˆåé¡ºåºã€‚</p>\n</blockquote>\n</li>\n<li>\n<p>volatile å˜é‡è§„åˆ™ï¼ˆVolatile Variale Ruleï¼‰</p>\n<p>å¯¹äºä¸€ä¸ª volatile å˜é‡çš„å†™æ“ä½œå…ˆè¡Œå‘ç”Ÿäºè¿™ä¸ªå˜é‡çš„è¯»æ“ä½œã€‚</p>\n<blockquote>\n<p>è¿™é‡Œçš„ â€œåé¢â€ åŒæ ·æ˜¯æŒ‡æ—¶é—´ä¸Šçš„å…ˆåã€‚</p>\n</blockquote>\n</li>\n<li>\n<p>çº¿ç¨‹å¯åŠ¨è§„åˆ™ï¼ˆThread Start Ruleï¼‰</p>\n<p>Thread å¯¹è±¡æ˜¯  <code>start()</code>  æ–¹æ³•å…ˆè¡Œå‘ç”Ÿäºæ­¤çº¿ç¨‹çš„æ¯ä¸€ä¸ªåŠ¨ä½œã€‚</p>\n</li>\n<li>\n<p>çº¿ç¨‹ç»ˆæ­¢è§„åˆ™ï¼ˆThread Termination Ruleï¼‰</p>\n<p>çº¿ç¨‹ä¸­çš„æ‰€æœ‰æ“ä½œéƒ½å…ˆè¡Œå‘ç”Ÿäºå¯¹æ­¤çº¿ç¨‹çš„ä¸­æ­¢æ£€æµ‹ã€‚</p>\n<blockquote>\n<p>æˆ‘ä»¬å¯ä»¥é€šè¿‡  <code>Thread::join()</code>  æ–¹æ³•æ˜¯å¦ç»“æŸã€ <code>Thread::isAlive()</code>  çš„è¿”å›å€¼ç­‰æ‰‹æ®µæ£€æµ‹çº¿ç¨‹æ˜¯å¦å·²ç»ç»ˆæ­¢æ‰§è¡Œã€‚</p>\n</blockquote>\n</li>\n<li>\n<p>çº¿ç¨‹ä¸­æ–­è§„åˆ™ï¼ˆThread Interruption Ruleï¼‰</p>\n<p>å¯¹çº¿ç¨‹çš„ interrupt () æ–¹æ³•çš„è°ƒç”¨å…ˆè¡Œå‘ç”Ÿäºè¢«ä¸­æ–­çº¿ç¨‹çš„ä»£ç æ£€æµ‹åˆ°ä¸­æ–­äº‹ä»¶çš„å‘ç”Ÿã€‚</p>\n<blockquote>\n<p>å¯ä»¥é€šè¿‡  <code>Thread::interrupt()</code>  æ£€æµ‹åˆ°æ˜¯å¦æœ‰ä¸­æ–­å‘ç”Ÿã€‚</p>\n</blockquote>\n</li>\n<li>\n<p>å¯¹è±¡ç»ˆç»“è§„åˆ™ï¼ˆFinalizer Ruleï¼‰</p>\n<p>ä¸€ä¸ªå¯¹è±¡çš„åˆå§‹åŒ–å®Œæˆï¼ˆæ„é€ å‡½æ•°æ‰§è¡Œç»“æŸï¼‰å…ˆè¡Œå‘ç”Ÿäºå®ƒçš„ finalize () æ–¹æ³•çš„å¼€å§‹ã€‚</p>\n</li>\n<li>\n<p>ä¼ é€’æ€§ï¼ˆTransitivityï¼‰</p>\n<p>å¦‚æœæ“ä½œ A å…ˆè¡Œå‘ç”Ÿäºæ“ä½œ Bï¼Œæ“ä½œ B å…ˆè¡Œå‘ç”Ÿäºæ“ä½œ Cï¼Œé‚£ä¹ˆå°±å¯ä»¥å¾—å‡ºæ“ä½œ A å…ˆè¡Œå‘ç”Ÿäºæ“ä½œ C çš„ç»“è®ºã€‚</p>\n<blockquote>\n<p>è¿™ä¸€æ¡è§„åˆ™æ˜¯å»ºç«‹åœ¨å‰é¢ 7 æ¡è§„åˆ™åŸºç¡€ä¸Šï¼Œæ»¡è¶³ä»»æ„ä¸€æ¡å³å¯ä½¿ç”¨ã€‚</p>\n</blockquote>\n</li>\n</ol>\n<h3 id=\"é”\"><a class=\"anchor\" href=\"#é”\">#</a> é”</h3>\n<p>é”ä¸ synchronized åŒæ­¥å—ä¸€æ ·ï¼Œæ˜¯ä¸€ç§çº¿ç¨‹åŒæ­¥æœºåˆ¶ã€‚è‡ª Java5 å¼€å§‹ï¼Œ  <code>java.util.concurrent.locks</code>  åŒ…æä¾›äº†å¦ä¸€ç§æ–¹å¼å®ç°çº¿ç¨‹åŒæ­¥æœºåˆ¶ â€”â€” Lock ã€‚</p>\n<h4 id=\"æ­»é”-æ´»é”å’Œé¥¥é¥¿\"><a class=\"anchor\" href=\"#æ­»é”-æ´»é”å’Œé¥¥é¥¿\">#</a> æ­»é”ã€æ´»é”å’Œé¥¥é¥¿</h4>\n<ol>\n<li>\n<p>æ­»é”</p>\n<p>å¤šä¸ªçº¿ç¨‹ç›¸äº’å ç”¨å¯¹æ–¹çš„èµ„æºçš„é”ï¼Œè€Œåˆç›¸äº’ç­‰å¯¹æ–¹é‡Šæ”¾é”ï¼Œæ­¤æ—¶è‹¥æ— å¤–åŠ›å¹²é¢„ï¼Œè¿™äº›çº¿ç¨‹åˆ™ä¸€ç›´å¤„ç†é˜»å¡çš„å‡æ­»çŠ¶æ€ï¼Œå½¢æˆæ­»é”ã€‚</p>\n<p>æ­»é”äº§ç”Ÿçš„å››ä¸ªå¿…è¦æ¡ä»¶ï¼š</p>\n<ol>\n<li>äº’æ–¥æ€§ï¼šçº¿ç¨‹å¯¹èµ„æºçš„å æœ‰æ˜¯æ’ä»–æ€§çš„ï¼Œä¸€ä¸ªèµ„æºåªèƒ½è¢«ä¸€ä¸ªçº¿ç¨‹å æœ‰ï¼Œç›´åˆ°é‡Šæ”¾ã€‚</li>\n<li>è¯·æ±‚å’Œä¿æŒæ¡ä»¶ï¼šä¸€ä¸ªçº¿ç¨‹å¯¹è¯·æ±‚è¢«å æœ‰èµ„æºå‘ç”Ÿé˜»å¡æ—¶ï¼Œå¯¹å·²ç»è·å¾—çš„èµ„æºä¸é‡Šæ”¾ã€‚</li>\n<li>ä¸å‰¥å¤ºï¼šä¸€ä¸ªçº¿ç¨‹åœ¨é‡Šæ”¾èµ„æºä¹‹å‰ï¼Œå…¶ä»–çš„çº¿ç¨‹æ— æ³•å‰¥å¤ºå ç”¨ã€‚</li>\n<li>å¾ªç¯ç­‰å¾…ï¼šå‘ç”Ÿæ­»é”æ—¶ï¼Œçº¿ç¨‹è¿›å…¥æ­»å¾ªç¯ï¼Œæ°¸ä¹…é˜»å¡ã€‚</li>\n</ol>\n<p>æ­»é”çš„åŸå› ï¼š</p>\n<ol>\n<li>\n<p>ç«äº‰ä¸å¯æŠ¢å æ€§èµ„æºã€‚</p>\n</li>\n<li>\n<p>ç«äº‰å¯æ¶ˆè€—èµ„æºå¼•èµ·æ­»é”ã€‚</p>\n</li>\n<li>\n<p>è¿›ç¨‹æ¨è¿›é¡ºåºä¸å½“ã€‚</p>\n<p>è¿›ç¨‹åœ¨è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œè¯·æ±‚å’Œé‡Šæ”¾èµ„æºçš„é¡ºåºä¸å½“ï¼Œä¹Ÿä¼šå¯¼è‡´äº§ç”Ÿè¿›ç¨‹æ­»é”ã€‚</p>\n</li>\n</ol>\n<p>é¿å…æ­»é”çš„æ–¹æ³•ï¼š</p>\n<ol>\n<li>ç ´å â€œè¯·æ±‚å’Œä¿æŒâ€ æ¡ä»¶ã€‚</li>\n<li>ç ´å â€œä¸å¯æŠ¢å â€ æ¡ä»¶ã€‚</li>\n<li>ç ´å â€œå¾ªç¯ç­‰å¾…â€ æ¡ä»¶ã€‚</li>\n</ol>\n</li>\n<li>\n<p>æ´»é”</p>\n<p>æ´»é”ä¸æ­»é”æ­£å¥½ç›¸åï¼Œå®ƒæ˜¯æŒ‡å¤šä¸ªçº¿ç¨‹ç›¸äº’æ‹¿åˆ°å¯¹æ–¹èµ„æºçš„é”ä¹‹åï¼Œå´åˆç›¸äº’è°¦è®©ï¼Œéƒ½ä¸»åŠ¨å°†èµ„æºé‡Šæ”¾ç»™åˆ«çš„çº¿ç¨‹ä½¿ç”¨ï¼Œè¿™æ ·è¿™ä¸ªèµ„æºåœ¨å¤šä¸ªçº¿ç¨‹ä¹‹é—´è·³åŠ¨è€Œåˆå¾—ä¸åˆ°æ‰§è¡Œï¼Œè¿™å°±æ˜¯æ´»é”ã€‚</p>\n</li>\n<li>\n<p>é¥¥é¥¿</p>\n<p>å¯¹äºä¸åŒä¼˜å…ˆçº§çš„å¤šä¸ªçº¿ç¨‹ï¼Œä¼˜å…ˆçº§é«˜çš„çº¿ç¨‹èƒ½å¤Ÿæ’é˜Ÿå¹¶ä¼˜å…ˆæ‰§è¡Œï¼Œä½†å¦‚æœä¼˜å…ˆçº§é«˜çš„çº¿ç¨‹ä¸€ç›´æŠ¢å ï¼ˆæˆ–æŸä¸€çº¿ç¨‹ä¸€ç›´ç‹¬å ï¼‰ä¼˜å…ˆçº§ä½çº¿ç¨‹çš„èµ„æºï¼Œå°±ä¼šå¯¼è‡´ä¼˜å…ˆçº§ä½çº¿ç¨‹æ— æ³•å¾—åˆ°æ‰§è¡Œï¼Œè¿™å°±æ˜¯é¥¥é¥¿ã€‚</p>\n</li>\n</ol>\n<p>æ­»é”ç¨‹åºç¤ºä¾‹ï¼š</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">DeadLockDemo</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token class-name\">Object</span> lockA <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Object</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token class-name\">Object</span> lockB <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Object</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token keyword\">new</span> <span class=\"token class-name\">Thread</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Runnable</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>            <span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>            <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">run</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>                <span class=\"token class-name\">String</span> name <span class=\"token operator\">=</span> <span class=\"token class-name\">Thread</span><span class=\"token punctuation\">.</span><span class=\"token function\">currentThread</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>                <span class=\"token keyword\">synchronized</span> <span class=\"token punctuation\">(</span>lockA<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>                    <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>name <span class=\"token operator\">+</span> <span class=\"token string\">\" got lockA,  want LockB\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>                    <span class=\"token keyword\">try</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>                        <span class=\"token class-name\">Thread</span><span class=\"token punctuation\">.</span><span class=\"token function\">sleep</span><span class=\"token punctuation\">(</span><span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>                    <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">InterruptedException</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>                        e<span class=\"token punctuation\">.</span><span class=\"token function\">printStackTrace</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>                    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>                    <span class=\"token keyword\">synchronized</span> <span class=\"token punctuation\">(</span>lockB<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>                        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>name <span class=\"token operator\">+</span> <span class=\"token string\">\" got lockB\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>                        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>name <span class=\"token operator\">+</span> <span class=\"token string\">\": say Hello!\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>                    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>                <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"çº¿ç¨‹-A\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>        <span class=\"token keyword\">new</span> <span class=\"token class-name\">Thread</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Runnable</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>            <span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>            <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">run</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>                <span class=\"token class-name\">String</span> name <span class=\"token operator\">=</span> <span class=\"token class-name\">Thread</span><span class=\"token punctuation\">.</span><span class=\"token function\">currentThread</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>                <span class=\"token keyword\">synchronized</span> <span class=\"token punctuation\">(</span>lockB<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>                    <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>name <span class=\"token operator\">+</span> <span class=\"token string\">\" got lockB, want LockA\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>                    <span class=\"token keyword\">try</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>                        <span class=\"token class-name\">Thread</span><span class=\"token punctuation\">.</span><span class=\"token function\">sleep</span><span class=\"token punctuation\">(</span><span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>                    <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">InterruptedException</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>                        e<span class=\"token punctuation\">.</span><span class=\"token function\">printStackTrace</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>                    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>                    <span class=\"token keyword\">synchronized</span> <span class=\"token punctuation\">(</span>lockA<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>                        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>name <span class=\"token operator\">+</span> <span class=\"token string\">\" got lockA\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>                        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>name <span class=\"token operator\">+</span> <span class=\"token string\">\": say Hello!\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>                    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>                <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"çº¿ç¨‹-B\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h4 id=\"å…¬å¹³é”ä¸éå…¬å¹³é”\"><a class=\"anchor\" href=\"#å…¬å¹³é”ä¸éå…¬å¹³é”\">#</a> å…¬å¹³é”ä¸éå…¬å¹³é”</h4>\n<p>å…¬å¹³é”æ˜¯æŒ‡å¤šä¸ªçº¿ç¨‹åœ¨ç­‰å¾…åŒä¸€ä¸ªé”æ—¶ï¼Œå¿…é¡»æŒ‰ç…§ç”³è¯·é”çš„å…ˆåé¡ºåºæ¥ä¸€æ¬¡è·å¾—é”ã€‚</p>\n<p>ç›¸åçš„éå…¬å¹³é”æ˜¯æŒ‡å¤šä¸ªçº¿ç¨‹è·å–é”çš„é¡ºåºå¹¶ä¸æ˜¯æŒ‰ç…§ç”³è¯·é”çš„é¡ºåºï¼Œæœ‰å¯èƒ½åç”³è¯·çš„çº¿ç¨‹æ¯”å…ˆç”³è¯·çš„çº¿ç¨‹ä¼˜å…ˆè·å–é”ã€‚</p>\n<p>å…¬å¹³é”çš„å¥½å¤„æ˜¯ç­‰å¾…é”çš„çº¿ç¨‹ä¸ä¼šé¥¿æ­»ï¼Œä½†æ˜¯æ•´ä½“æ•ˆç‡ç›¸å¯¹ä½ä¸€äº›ï¼›éå…¬å¹³é”çš„å¥½å¤„æ˜¯æ•´ä½“æ•ˆç‡ç›¸å¯¹é«˜ä¸€äº›ï¼Œä½†æ˜¯æœ‰äº›çº¿ç¨‹å¯èƒ½ä¼šé¥¿æ­»æˆ–è€…è¯´å¾ˆæ—©å°±åœ¨ç­‰å¾…é”ï¼Œä½†è¦ç­‰å¾ˆä¹…æ‰ä¼šè·å¾—é”ã€‚å…¶ä¸­çš„åŸå› æ˜¯å…¬å¹³é”æ˜¯ä¸¥æ ¼æŒ‰ç…§è¯·æ±‚é”çš„é¡ºåºæ¥æ’é˜Ÿè·å¾—é”çš„ï¼Œè€Œéå…¬å¹³é”æ˜¯å¯ä»¥æŠ¢å çš„ï¼Œå³å¦‚æœåœ¨æŸä¸ªæ—¶åˆ»æœ‰çº¿ç¨‹éœ€è¦è·å–é”ï¼Œè€Œè¿™ä¸ªæ—¶å€™åˆšå¥½é”å¯ç”¨ï¼Œé‚£ä¹ˆè¿™ä¸ªçº¿ç¨‹ä¼šç›´æ¥æŠ¢å ï¼Œè€Œè¿™æ—¶é˜»å¡åœ¨ç­‰å¾…é˜Ÿåˆ—çš„çº¿ç¨‹åˆ™ä¸ä¼šè¢«å”¤é†’ã€‚</p>\n<p>å¯¹äº Java  <code>ReentrantLock</code>  è€Œè¨€ï¼Œé€šè¿‡æ„é€ å‡½æ•°å¯æŒ‡å®šè¯¥é”æ˜¯å¦æ˜¯å…¬å¹³é”ï¼Œé»˜è®¤æ˜¯éå…¬å¹³é”ï¼Œä¾‹å¦‚ï¼š <code>new ReentrantLock(true)</code>  ä¸ºå…¬å¹³é”ã€‚</p>\n<p>Synchronized ä¹Ÿæ˜¯ä¸€ç§éå…¬å¹³é”ï¼Œç”±äºå…¶å¹¶ä¸åƒ  <code>ReentrantLock</code>  æ˜¯é€šè¿‡ AQS çš„æ¥å®ç°çº¿ç¨‹è°ƒåº¦ï¼Œæ‰€ä»¥å¹¶æ²¡æœ‰ä»»ä½•åŠæ³•ä½¿å…¶å˜æˆå…¬å¹³é”ã€‚</p>\n<h4 id=\"å…±äº«é”ä¸æ’ä»–é”\"><a class=\"anchor\" href=\"#å…±äº«é”ä¸æ’ä»–é”\">#</a> å…±äº«é”ä¸æ’ä»–é”</h4>\n<p>å…±äº«é”ï¼ˆShare Lockï¼‰åˆç§°è¯»é”ï¼Œæ˜¯è¯»å–æ“ä½œåˆ›å»ºçš„é”ã€‚å…¶ä»–ç”¨æˆ·å¯ä»¥å¹¶å‘è¯»å–æ•°æ®ï¼Œä½†ä»»ä½•äº‹åŠ¡éƒ½ä¸èƒ½å¯¹æ•°æ®è¿›è¡Œä¿®æ”¹ï¼ˆè·å–æ•°æ®ä¸Šçš„æ’ä»–é”ï¼‰ï¼Œç›´åˆ°å·²é‡Šæ”¾æ‰€æœ‰å…±äº«é”ã€‚</p>\n<p>å¦‚æœäº‹åŠ¡ T å¯¹æ•°æ® A åŠ ä¸Šå…±äº«é”åï¼Œåˆ™å…¶ä»–äº‹åŠ¡åªèƒ½å¯¹ A å†åŠ å…±äº«é”ï¼Œä¸èƒ½åŠ æ’ä»–é”ã€‚è·å‡†å…±äº«é”çš„äº‹åŠ¡åªèƒ½è¯»æ•°æ®ï¼Œä¸èƒ½ä¿®æ”¹æ•°æ®ã€‚</p>\n<p>å½“ä½¿ç”¨  <code>SELECT ... LOCK IN SHARE MODE;</code>  è¿›è¡ŒæŸ¥è¯¢æ—¶ï¼ŒMysql ä¼šå¯¹æŸ¥è¯¢ç»“æœä¸­çš„æ¯è¡Œéƒ½åŠ å…±äº«é”ï¼Œå½“æ²¡æœ‰å…¶ä»–çº¿ç¨‹å¯¹æŸ¥è¯¢ç»“æœé›†ä¸­çš„ä»»ä½•ä¸€è¡Œä½¿ç”¨æ’ä»–é”æ—¶ï¼Œå¯ä»¥æˆåŠŸç”³è¯·å…±äº«é”ï¼Œå¦åˆ™ä¼šè¢«é˜»å¡ã€‚å…¶ä»–çº¿ç¨‹ä¹Ÿå¯ä»¥è¯»å–ä½¿ç”¨å…±äº«é”çš„è¡¨ï¼Œè€Œä¸”è¿™äº›çº¿ç¨‹è¯»å–çš„æ˜¯åŒä¸€ä¸ªç‰ˆæœ¬çš„æ•°æ®ã€‚</p>\n<p>æ’ä»–é”ï¼ˆExclusive Lockï¼‰åˆç§°å†™é”ï¼Œå¦‚æœäº‹åŠ¡ T å¯¹æ•°æ® A åŠ ä¸Šæ’ä»–é”åï¼Œåˆ™å…¶ä»–äº‹åŠ¡ä¸èƒ½å†å¯¹ A åŠ ä»»ä»»ä½•ç±»å‹çš„å°é”ã€‚è·å‡†æ’ä»–é”çš„äº‹åŠ¡æ—¢èƒ½è¯»æ•°æ®ï¼Œåˆèƒ½ä¿®æ”¹æ•°æ®ã€‚</p>\n<p>å½“ä½¿ç”¨  <code>SELECT ... FOR UPDATE</code>  è¿›è¡ŒæŸ¥è¯¢æ—¶ï¼ŒMysql ä¼šå¯¹æŸ¥è¯¢ç»“æœä¸­çš„æ¯è¡Œéƒ½åŠ æ’ä»–é”ï¼Œå½“æ²¡æœ‰å…¶ä»–çº¿ç¨‹å¯¹æŸ¥è¯¢ç»“æœé›†ä¸­çš„ä»»ä½•ä¸€è¡Œä½¿ç”¨æ’ä»–é”æ—¶ï¼Œå¯ä»¥æˆåŠŸç”³è¯·æ’ä»–é”ï¼Œå¦åˆ™ä¼šè¢«é˜»å¡ã€‚</p>\n<h4 id=\"ä¹è§‚é”ä¸æ‚²è§‚é”\"><a class=\"anchor\" href=\"#ä¹è§‚é”ä¸æ‚²è§‚é”\">#</a> ä¹è§‚é”ä¸æ‚²è§‚é”</h4>\n<p>ä¹è§‚é”ä¸æ‚²è§‚é”ä¸æ˜¯æŒ‡å…·ä½“çš„ä»€ä¹ˆç±»å‹çš„é”ï¼Œè€Œæ˜¯æŒ‡çœ‹å¾…å¹¶å‘åŒæ­¥çš„è§’åº¦ï¼ˆæ€åº¦ï¼‰ã€‚</p>\n<h5 id=\"æ‚²è§‚é”\"><a class=\"anchor\" href=\"#æ‚²è§‚é”\">#</a> æ‚²è§‚é”</h5>\n<p>æ‚²è§‚é”æŒ‡çš„æ˜¯å¯¹æ•°æ®è¢«å¤–ç•Œï¼ˆåŒ…æ‹¬æœ¬ç³»ç»Ÿçš„å…¶ä»–äº‹åŠ¡å’Œå¤–éƒ¨ç³»ç»Ÿçš„äº‹åŠ¡ï¼‰ä¿®æ”¹æŒä¿å®ˆæ€åº¦ï¼Œå› æ­¤ï¼Œåœ¨æ•´ä¸ªæ•°æ®å¤„ç†è¿‡ç¨‹ä¸­ï¼Œå°†æ•°æ®å¤„äºé”å®šçŠ¶æ€ã€‚</p>\n<p>å½“æˆ‘ä»¬è¦å¯¹ä¸€ä¸ªæ•°æ®åº“ä¸­çš„ä¸€æ¡æ•°æ®è¿›è¡Œä¿®æ”¹çš„æ—¶å€™ï¼Œä¸ºäº†é¿å…åŒæ—¶è¢«å…¶ä»–äººä¿®æ”¹ï¼Œæœ€å¥½çš„åŠæ³•å°±æ˜¯ç›´æ¥å¯¹è¯¥æ•°æ®è¿›è¡ŒåŠ é”ä»¥é˜²æ­¢å¹¶å‘ã€‚è¿™ç§å€ŸåŠ©æ•°æ®åº“é”æœºåˆ¶åœ¨ä¿®æ”¹æ•°æ®ä¹‹å‰å…ˆé”å®šï¼Œå†ä¿®æ”¹çš„æ–¹å¼è¢«ç§°ä¹‹ä¸ºæ‚²è§‚å¹¶å‘æ§åˆ¶ï¼ˆåˆå â€œæ‚²è§‚é”â€ï¼ŒPessimistic Concurrency Controlï¼Œç¼©å†™ â€œPCCâ€ï¼‰ã€‚å¦‚æœä¸€ä¸ªäº‹åŠ¡æ‰§è¡Œçš„æ“ä½œå¯¹æŸè¡Œæ•°æ®åº”ç”¨äº†é”ï¼Œé‚£åªæœ‰å½“è¿™ä¸ªäº‹åŠ¡æŠŠé”é‡Šæ”¾ï¼Œå…¶ä»–äº‹åŠ¡æ‰èƒ½å¤Ÿæ‰§è¡Œä¸è¯¥é”å†²çªçš„æ“ä½œã€‚</p>\n<p>æ‚²è§‚å¹¶å‘æ§åˆ¶ä¸»è¦ç”¨äºæ•°æ®äº‰ç”¨æ¿€çƒˆçš„ç¯å¢ƒï¼Œä»¥åŠå‘ç”Ÿå¹¶å‘å†²çªæ—¶ä½¿ç”¨é”ä¿æŠ¤æ•°æ®çš„æˆæœ¬è¦ä½äºå›æ»šäº‹åŠ¡çš„æˆæœ¬çš„ç¯å¢ƒä¸­ã€‚</p>\n<p>æ‚²è§‚é”çš„å®ç°ï¼Œå¾€å¾€ä¾é æ•°æ®åº“æä¾›çš„é”æœºåˆ¶ï¼Œåœ¨æ•°æ®åº“ä¸­ï¼Œæ‚²è§‚é”çš„æµç¨‹å¦‚ä¸‹ï¼š</p>\n<ol>\n<li>åœ¨å¯¹ä»»æ„è®°å½•è¿›è¡Œä¿®æ”¹å‰ï¼Œå…ˆå°è¯•ä¸ºè¯¥è®°å½•åŠ ä¸Šæ’ä»–é”ï¼ˆexclusive lockingï¼‰ã€‚</li>\n<li>å¦‚æœåŠ é”å¤±è´¥ï¼Œè¯´æ˜è¯¥è®°å½•æ­£åœ¨è¢«ä¿®æ”¹ï¼Œé‚£ä¹ˆå½“å‰æŸ¥è¯¢å¯èƒ½è¦ç­‰å¾…æˆ–è€…æŠ›å‡ºå¼‚å¸¸ã€‚</li>\n<li>å¦‚æœæˆåŠŸåŠ é”ï¼Œé‚£ä¹ˆå°±å¯ä»¥å¯¹è®°å½•åšä¿®æ”¹ï¼Œäº‹åŠ¡å®Œæˆåå°±ä¼šè§£é”ã€‚</li>\n<li>å…¶é—´å¦‚æœæœ‰å…¶ä»–å¯¹è¯¥è®°å½•åšä¿®æ”¹æˆ–åŠ æ’ä»–é”çš„æ“ä½œï¼Œéƒ½ä¼šç­‰å¾…æˆ‘ä»¬è§£é”æˆ–ç›´æ¥æŠ›å‡ºå¼‚å¸¸ã€‚</li>\n</ol>\n<p><strong>åœ¨ MySQL InnoDB ä¸­ä½¿ç”¨æ‚²è§‚é”ï¼š</strong></p>\n<blockquote>\n<p>è¦ä½¿ç”¨æ‚²è§‚é”ï¼Œæˆ‘ä»¬å¿…é¡»å…³é—­ MySQL æ•°æ®åº“çš„è‡ªåŠ¨æäº¤å±æ€§ï¼Œå› ä¸º MySQL é»˜è®¤ä½¿ç”¨ autocommit æ¨¡å¼ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå½“ä½ æ‰§è¡Œä¸€ä¸ªæ›´æ–°æ“ä½œåï¼ŒMySQL ä¼šç«‹åˆ»å°†ç»“æœè¿›è¡Œæäº¤ï¼Œå…³é—­è‡ªåŠ¨æäº¤å±æ€§ï¼š  <code>set autocommit=0;</code>  ã€‚</p>\n</blockquote>\n<figure class=\"highlight sql\"><figcaption data-lang=\"SQL\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">-- 0. å¼€å§‹äº‹åŠ¡</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">begin</span><span class=\"token punctuation\">;</span><span class=\"token comment\">-- æˆ– begin work; æˆ– start transaction;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\">-- 1. æŸ¥è¯¢å‡ºå•†å“ä¿¡æ¯</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">select</span> <span class=\"token keyword\">status</span> <span class=\"token keyword\">from</span> t_goods <span class=\"token keyword\">where</span> id <span class=\"token operator\">=</span> <span class=\"token number\">1</span> <span class=\"token keyword\">for</span> <span class=\"token keyword\">update</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\">-- 2. æ ¹æ®å•†å“ä¿¡æ¯ç”Ÿæˆè®¢å•</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">insert</span> <span class=\"token keyword\">into</span> t_orders <span class=\"token punctuation\">(</span>id<span class=\"token punctuation\">,</span> goods_id<span class=\"token punctuation\">)</span> <span class=\"token keyword\">values</span> <span class=\"token punctuation\">(</span><span class=\"token boolean\">null</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token comment\">-- 3. ä¿®æ”¹å•†å“ status ä¸º 2</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">update</span> t_goods <span class=\"token keyword\">set</span> <span class=\"token keyword\">status</span> <span class=\"token operator\">=</span> <span class=\"token number\">2</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\">-- 4. æäº¤äº‹åŠ¡</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token keyword\">commit</span><span class=\"token punctuation\">;</span><span class=\"token comment\">-- æˆ– commit work;</span></pre></td></tr></table></figure><p>è¿™ç§ä½¿ç”¨  <code>select ... for update</code>  çš„æ–¹å¼ï¼Œé€šè¿‡å¼€å¯æ’ä»–é”çš„æ–¹å¼å®ç°æ‚²è§‚é”æ˜¯ä¸€ç§æ¯”è¾ƒå…¸å‹çš„æ‚²è§‚é”ç­–ç•¥ï¼Œå¦‚æœå‡ºç°å¹¶å‘ä¿®æ”¹æ“ä½œï¼Œå…¶ä»–äº‹åŠ¡å¿…é¡»ç­‰å¾…æœ¬æ¬¡äº‹åŠ¡æäº¤ä¹‹åæ‰èƒ½æ‰§è¡Œï¼Œè¿™æ ·å°±ä¿è¯äº†å½“å‰æ•°æ®ä¸ä¼šè¢«å…¶ä»–äº‹åŠ¡ä¿®æ”¹ã€‚</p>\n<blockquote>\n<p>æ³¨æ„ï¼šä½¿ç”¨  <code>select ... for update</code>  ä¼šå°†æ•°æ®é”ä½ï¼Œä½†æ˜¯æˆ‘ä»¬éœ€è¦æ³¨æ„ä¸€äº›é”çš„çº§åˆ«ï¼ŒMySQL InnoDB é»˜è®¤ä½¿ç”¨è¡Œçº§é”ï¼Œè¡Œçº§é”éƒ½æ˜¯åŸºäºç´¢å¼•çš„ï¼Œå¦‚æœä¸€æ¡ SQL è¯­å¥ç”¨ä¸åˆ°ç´¢å¼•æ˜¯ä¸ä¼šä½¿ç”¨è¡Œçº§é”çš„ï¼Œå°±ä¼šä½¿ç”¨è¡¨çº§é”æŠŠæ•´å¼ è¡¨é”ä½ã€‚</p>\n</blockquote>\n<p><strong>æ‚²è§‚é”çš„ä¼˜ç¼ºç‚¹ï¼š</strong></p>\n<p>æ‚²è§‚å¹¶å‘æ§åˆ¶å®é™…ä¸Šæ˜¯ â€œå…ˆå–é”å†è®¿é—®â€ çš„ä¿å®ˆç­–ç•¥ï¼Œä¸ºæ•°æ®å¤„ç†çš„å®‰å…¨æä¾›äº†ä¿è¯ã€‚ä½†æ˜¯åœ¨æ•ˆç‡æ–¹é¢ï¼Œå¤„ç†åŠ é”çš„æœºåˆ¶ä¼šè®©æ•°æ®åº“äº§ç”Ÿé¢å¤–çš„å¼€é”€ï¼Œè¿˜æœ‰å¢åŠ äº§ç”Ÿæ­»é”çš„æœºä¼šï¼›å¦å¤–ï¼Œåœ¨åªè¯»å‹äº‹åŠ¡å¤„ç†ä¸­ç”±äºä¸ä¼šäº§ç”Ÿå†²çªï¼Œä¹Ÿæ²¡å¿…è¦ä½¿ç”¨é”ï¼Œè¿™æ ·åšåªèƒ½å¢åŠ ç³»ç»Ÿè´Ÿè½½ï¼›è¿˜æœ‰ä¼šé™ä½äº†å¹¶è¡Œæ€§ï¼Œä¸€ä¸ªäº‹åŠ¡å¦‚æœé”å®šäº†æŸè¡Œæ•°æ®ï¼Œå…¶ä»–äº‹åŠ¡å°±å¿…é¡»ç­‰å¾…è¯¥äº‹åŠ¡å¤„ç†å®Œæ‰å¯ä»¥å¤„ç†é‚£è¡Œæ•°ã€‚</p>\n<h5 id=\"ä¹è§‚é”\"><a class=\"anchor\" href=\"#ä¹è§‚é”\">#</a> ä¹è§‚é”</h5>\n<p>ä¹è§‚å¹¶å‘æ§åˆ¶ï¼ˆåˆå â€œä¹è§‚é”â€ï¼ŒOptimistic Concurrency Controlï¼Œç¼©å†™ â€œOCCâ€ï¼‰ã€‚</p>\n<p>ä¹è§‚é”æ˜¯ç›¸å¯¹æ‚²è§‚é”è€Œè¨€çš„ï¼Œä¹è§‚é”å‡è®¾è®¤ä¸ºæ•°æ®ä¸€èˆ¬æƒ…å†µä¸‹ä¸ä¼šé€ æˆå†²çªï¼Œæ‰€ä»¥åœ¨æ•°æ®è¿›è¡Œæäº¤æ›´æ–°çš„æ—¶å€™ï¼Œæ‰ä¼šæ­£å¼å¯¹æ•°æ®çš„å†²çªä¸å¦è¿›è¡Œæ£€æµ‹ï¼Œå¦‚æœå‘ç°å†²çªäº†ï¼Œåˆ™è®©è¿”å›ç”¨æˆ·é”™è¯¯çš„ä¿¡æ¯ï¼Œè®©ç”¨æˆ·å†³å®šå¦‚ä½•å»åšã€‚</p>\n<p>ç›¸å¯¹äºæ‚²è§‚é”ï¼Œä¹è§‚é”åœ¨å¯¹æ•°æ®åº“è¿›è¡Œå¤„ç†çš„æ—¶å€™ï¼Œå¹¶ä¸ä¼šä½¿ç”¨æ•°æ®åº“æä¾›çš„é”æœºåˆ¶ã€‚ä¸€èˆ¬çš„å®ç°ä¹è§‚é”çš„æ–¹å¼å°±æ˜¯è®°å½•æ•°æ®ç‰ˆæœ¬ã€‚</p>\n<blockquote>\n<p>æ•°æ®ç‰ˆæœ¬ï¼šä¸ºæ•°æ®å¢åŠ çš„ä¸€ä¸ªç‰ˆæœ¬æ ‡è¯†ã€‚å½“è¯»å–æ•°æ®æ—¶ï¼Œå°†ç‰ˆæœ¬æ ‡è¯†çš„å€¼ä¸€åŒè¯»å‡ºï¼Œæ•°æ®æ¯æ›´æ–°ä¸€æ¬¡ï¼ŒåŒæ—¶å¯¹ç‰ˆæœ¬æ ‡è¯†è¿›è¡Œæ›´æ–°ã€‚å½“æˆ‘ä»¬æäº¤æ›´æ–°çš„æ—¶å€™ï¼Œåˆ¤æ–­æ•°æ®åº“è¡¨å¯¹åº”è®°å½•çš„å½“å‰ç‰ˆæœ¬ä¿¡æ¯ä¸ç¬¬ä¸€æ¬¡å–å‡ºæ¥çš„ç‰ˆæœ¬æ ‡è¯†è¿›è¡Œæ¯”å¯¹ï¼Œå¦‚æœæ•°æ®åº“è¡¨å½“å‰ç‰ˆæœ¬å·ä¸ç¬¬ä¸€æ¬¡å–å‡ºæ¥çš„ç‰ˆæœ¬æ ‡è¯†å€¼ç›¸ç­‰ï¼Œåˆ™äºˆä»¥æ›´æ–°ï¼Œå¦åˆ™è®¤ä¸ºæ˜¯è¿‡æœŸæ•°æ®ã€‚</p>\n<p>å®ç°æ•°æ®ç‰ˆæœ¬æœ‰ä¸¤ç§æ–¹å¼ï¼Œç¬¬ä¸€ç§æ˜¯ä½¿ç”¨ç‰ˆæœ¬å·ï¼Œç¬¬äºŒç§æ˜¯ä½¿ç”¨æ—¶é—´æˆ³ã€‚</p>\n</blockquote>\n<p><strong>ä½¿ç”¨ç‰ˆæœ¬å·å®ç°ä¹è§‚é”ï¼š</strong></p>\n<figure class=\"highlight sql\"><figcaption data-lang=\"SQL\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">-- 1. æŸ¥è¯¢å‡ºå•†å“ä¿¡æ¯</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">select</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">status</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">status</span><span class=\"token punctuation\">,</span> version<span class=\"token punctuation\">)</span> <span class=\"token keyword\">from</span> t_goods <span class=\"token keyword\">where</span> id<span class=\"token operator\">=</span><span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\">-- 2. æ ¹æ®å•†å“ä¿¡æ¯ç”Ÿæˆè®¢å•</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\">-- 3. ä¿®æ”¹å•†å“ status ä¸º 2</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">update</span> t_goods <span class=\"token keyword\">set</span> <span class=\"token keyword\">status</span><span class=\"token operator\">=</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span>version<span class=\"token operator\">=</span>version<span class=\"token operator\">+</span><span class=\"token number\">1</span> <span class=\"token keyword\">where</span> id<span class=\"token operator\">=</span><span class=\"token number\">1</span> <span class=\"token operator\">and</span> version<span class=\"token operator\">=</span><span class=\"token comment\">#&#123;version&#125;;</span></pre></td></tr></table></figure><p>ä½†æ˜¯ï¼Œä½¿ç”¨ä¹è§‚é”æ—¶ï¼Œè¿˜éœ€è¦æ³¨æ„è¿›è¡Œç²’åº¦æ§åˆ¶ï¼Œå¦‚æœå¹¶å‘ç‡è¾ƒé«˜ï¼Œåˆ™åº”å½“ä¼˜åŒ–æŸ¥è¯¢ï¼Œå‡å°ä¹è§‚é”çš„ç²’åº¦ã€‚</p>\n<p><strong>ä¹è§‚é”çš„ä¼˜ç¼ºç‚¹ï¼š</strong></p>\n<p>ä¹è§‚å¹¶å‘æ§åˆ¶ç›¸ä¿¡äº‹åŠ¡ä¹‹é—´çš„æ•°æ®ç«äº‰çš„æ¦‚ç‡æ˜¯æ¯”è¾ƒå°çš„ï¼Œå› æ­¤å°½å¯èƒ½ç›´æ¥åšä¸‹å»ï¼Œç›´åˆ°æäº¤çš„æ—¶å€™æ‰å»é”å®šï¼Œæ‰€ä»¥ä¸ä¼šäº§ç”Ÿä»»ä½•é”å’Œæ­»é”ã€‚</p>\n<h5 id=\"ä¹è§‚é”ä¸æ‚²è§‚é”çš„é€‰æ‹©\"><a class=\"anchor\" href=\"#ä¹è§‚é”ä¸æ‚²è§‚é”çš„é€‰æ‹©\">#</a> ä¹è§‚é”ä¸æ‚²è§‚é”çš„é€‰æ‹©</h5>\n<p>å¯¹äºä¹è§‚é”ä¸æ‚²è§‚é”ï¼Œéœ€è¦æ ¹æ®å®é™…çš„ä¸šåŠ¡åœºæ™¯è¿›è¡Œé€‰æ‹©ï¼š</p>\n<ol>\n<li>ä¹è§‚é”å¹¶æœªçœŸæ­£åŠ é”ï¼Œæ•ˆç‡é«˜ã€‚ä¸€æ—¦é”çš„ç²’åº¦æŒæ¡ä¸å¥½ï¼Œæ›´æ–°å¤±è´¥çš„æ¦‚ç‡å°±ä¼šæ¯”è¾ƒé«˜ï¼Œå®¹æ˜“å‘ç”Ÿä¸šåŠ¡å¤±è´¥ã€‚</li>\n<li>æ‚²è§‚é”ä¾èµ–æ•°æ®åº“é”ï¼Œæ•ˆç‡ä½ã€‚æ›´æ–°å¤±è´¥çš„æ¦‚ç‡æ¯”è¾ƒä½ã€‚</li>\n</ol>\n<p>éšç€äº’è”ç½‘ä¸‰é«˜æ¶æ„çš„æå‡ºï¼Œæ‚²è§‚é”åœ¨ç”Ÿäº§ç¯å¢ƒä¸­çš„åº”ç”¨é¢‘ç‡è¶Šæ¥è¶Šä½ã€‚</p>\n<h4 id=\"é˜»å¡é”ä¸éé˜»å¡é”\"><a class=\"anchor\" href=\"#é˜»å¡é”ä¸éé˜»å¡é”\">#</a> é˜»å¡é”ä¸éé˜»å¡é”</h4>\n<ol>\n<li>\n<p>é˜»å¡é”</p>\n<p>å¤šä¸ªçº¿ç¨‹åŒæ—¶è°ƒç”¨åŒä¸€ä¸ªæ–¹æ³•æ—¶ï¼Œæ‰€æœ‰çº¿ç¨‹éƒ½å°†æ’é˜Ÿç­‰å¾…ã€‚æ²¡æœ‰è·å¾—é”çš„çº¿ç¨‹è¿›å…¥é˜»å¡çŠ¶æ€è¿›è¡Œç­‰å¾…ï¼Œç­‰å¾…çš„çº¿ç¨‹åœ¨è·å¾—å“åº”çš„ä¿¡å·ï¼ˆå”¤é†’æˆ–æ—¶é—´ï¼‰æ—¶ï¼Œæ‰å¯ä»¥è¿›å…¥çº¿ç¨‹çš„å‡†å¤‡å°±ç»ªçŠ¶æ€ï¼Œå‡†å¤‡å°±ç»ªçŠ¶æ€çš„æ‰€æœ‰çº¿ç¨‹ï¼Œé€šè¿‡ç«äº‰ï¼Œè¿›å…¥è¿è¡ŒçŠ¶æ€ã€‚</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// é˜»å¡é”ç¤ºä¾‹</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Lock</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token keyword\">boolean</span> isLocked <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">synchronized</span> <span class=\"token keyword\">void</span> <span class=\"token function\">lock</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">InterruptedException</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token keyword\">while</span><span class=\"token punctuation\">(</span>isLocked<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>            <span class=\"token comment\">// å½“å…¶ä»–çº¿ç¨‹è¿›æ¥ï¼Œå³å¤„äºç­‰å¾…é˜»å¡çŠ¶æ€    </span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>            <span class=\"token function\">wait</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        isLocked <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">synchronized</span> <span class=\"token keyword\">void</span> <span class=\"token function\">unlock</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        isLocked <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token function\">notify</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>ä½†æ˜¯ï¼Œå½“è¢«è°ƒç”¨çš„æ–¹æ³•è€—æ—¶è¾ƒé•¿ä¸”ç­‰å¾…çº¿ç¨‹è¾ƒå¤šçš„æ—¶å€™ï¼Œçº¿ç¨‹ç­‰å¾…çš„æ—¶é—´å°±ä¼šå¾ˆé•¿ï¼Œå¯¹äºä¸€äº›è¦æ±‚å“åº”æ—¶é—´çš„ç³»ç»Ÿæ¥è¯´ï¼Œè¿™ç§æƒ…å†µæ˜¯ä¸èƒ½å®¹å¿çš„ï¼Œå› æ­¤ï¼Œéœ€è¦è®©çº¿ç¨‹è¿›å…¥éé˜»å¡çŠ¶æ€ï¼Œçº¿ç¨‹åœ¨æœªè·å–åˆ°é”æ—¶ç«‹åˆ»è¿”å›ï¼Œå¹¶å‘ŠçŸ¥ç”¨æˆ·ç¨åé‡è¯•ã€‚</p>\n</li>\n<li>\n<p>éé˜»å¡é”</p>\n<p>å½“å¤šä¸ªçº¿ç¨‹ç«äº‰åŒä¸€æŠŠé”æ—¶ï¼Œå…¶ä¸­æŸä¸€çº¿ç¨‹æˆåŠŸè·å¾—é”ï¼Œå…¶ä»–çº¿ç¨‹åˆ¤æ–­æœªè·å–åˆ°é”ï¼Œåˆ™ç›´æ¥è¿”å›ã€‚</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// éé˜»å¡é”ç¤ºä¾‹</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Lock</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token keyword\">boolean</span> isLocked <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">synchronized</span> <span class=\"token keyword\">boolean</span> <span class=\"token function\">lock</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">InterruptedException</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>isLocked<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>            <span class=\"token comment\">// å½“æ²¡æœ‰æ‹¿åˆ°é”ï¼Œç«‹å³è¿”å›ï¼Œçº¿ç¨‹ä¸é˜»å¡</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>            <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        isLocked <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">synchronized</span> <span class=\"token keyword\">void</span> <span class=\"token function\">unlock</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        isLocked <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure></li>\n</ol>\n<h4 id=\"è‡ªæ—‹é”-äº’æ–¥é”ä¸è¯»å†™é”\"><a class=\"anchor\" href=\"#è‡ªæ—‹é”-äº’æ–¥é”ä¸è¯»å†™é”\">#</a> è‡ªæ—‹é”ã€äº’æ–¥é”ä¸è¯»å†™é”</h4>\n<h5 id=\"è‡ªæ—‹é”\"><a class=\"anchor\" href=\"#è‡ªæ—‹é”\">#</a> è‡ªæ—‹é”</h5>\n<p>åœ¨ Java ä¸­ï¼Œè‡ªæ—‹é”æ˜¯æŒ‡å°è¯•è·å–é”çš„çº¿ç¨‹ä¸ä¼šç«‹å³é˜»å¡ï¼Œè€Œæ˜¯é‡‡ç”¨å¾ªç¯çš„æ–¹å¼å»å°è¯•è·å–é”ï¼Œè¿™æ ·çš„å¥½å¤„æ˜¯å‡å°‘çº¿ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢çš„æ¶ˆè€—ï¼Œç¼ºç‚¹æ˜¯å¾ªç¯ä¼šæ¶ˆè€— CPUã€‚</p>\n<p>JDK6 ä¸­å·²ç»å˜ä¸ºé»˜è®¤å¼€å¯è‡ªæ—‹é”ï¼Œå¹¶ä¸”å¼•å…¥äº†è‡ªé€‚åº”çš„è‡ªæ—‹é”ã€‚è‡ªé€‚åº”æ„å‘³ç€è‡ªæ—‹çš„æ—¶é—´ä¸åœ¨å›ºå®šäº†ï¼Œè€Œæ˜¯ç”±å‰ä¸€æ¬¡åœ¨åŒä¸€ä¸ªé”ä¸Šçš„è‡ªæ—‹æ—¶é—´åŠé”çš„æ‹¥æœ‰è€…çš„çŠ¶æ€æ¥å†³å®šã€‚</p>\n<p>è‡ªæ—‹æ˜¯åœ¨è½»é‡çº§é”ä¸­ä½¿ç”¨çš„ï¼Œåœ¨é‡é‡çº§é”ä¸­ï¼Œçº¿ç¨‹ä¸ä½¿ç”¨è‡ªæ—‹ã€‚</p>\n<h5 id=\"äº’æ–¥é”\"><a class=\"anchor\" href=\"#äº’æ–¥é”\">#</a> äº’æ–¥é”</h5>\n<p>ç›¸äº¤è¿›ç¨‹ä¹‹é—´çš„å…³ç³»ä¸»è¦æœ‰ä¸¤ç§ï¼šåŒæ­¥å’Œäº’æ–¥ã€‚</p>\n<ul>\n<li>äº’æ–¥ï¼Œæ˜¯æŒ‡æŸä¸€èµ„æºåŒæ—¶åªå…è®¸ä¸€ä¸ªè®¿é—®è€…å¯¹å…¶è¿›è¡Œè®¿é—®ï¼Œå…·æœ‰å”¯ä¸€æ€§å’Œæ’å®ƒæ€§ã€‚ä½†äº’æ–¥æ— æ³•é™åˆ¶è®¿é—®è€…å¯¹èµ„æºçš„è®¿é—®é¡ºåºï¼Œå³è®¿é—®æ˜¯æ— åºçš„ã€‚</li>\n<li>åŒæ­¥ï¼Œæ˜¯æŒ‡åœ¨äº’æ–¥çš„åŸºç¡€ä¸Šï¼ˆå¤§å¤šæ•°æƒ…å†µï¼‰ï¼Œé€šè¿‡å…¶å®ƒæœºåˆ¶å®ç°è®¿é—®è€…å¯¹èµ„æºçš„æœ‰åºè®¿é—®ã€‚åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼ŒåŒæ­¥å·²ç»å®ç°äº†äº’æ–¥ï¼Œç‰¹åˆ«æ˜¯æ‰€æœ‰å†™å…¥èµ„æºçš„æƒ…å†µå¿…å®šæ˜¯äº’æ–¥çš„ã€‚å°‘æ•°æƒ…å†µæ˜¯æŒ‡å¯ä»¥å…è®¸å¤šä¸ªè®¿é—®è€…åŒæ—¶è®¿é—®èµ„æºã€‚</li>\n</ul>\n<p>æ‰€è°“äº’æ–¥é”å°±æ˜¯æŒ‡ä¸€æ¬¡æœ€å¤šåªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹æŒæœ‰çš„é”ã€‚åœ¨ JDK ä¸­ synchronized å’Œ JUC çš„ Lock å°±æ˜¯äº’æ–¥é”ã€‚</p>\n<p>äº’æ–¥é”çš„ç‰¹ç‚¹ï¼šä¸€æ¬¡åªèƒ½ä¸€ä¸ªçº¿ç¨‹æ‹¥æœ‰äº’æ–¥é”ï¼Œå…¶ä»–çº¿ç¨‹åªæœ‰ç­‰å¾…ã€‚</p>\n<h5 id=\"è¯»å†™é”\"><a class=\"anchor\" href=\"#è¯»å†™é”\">#</a> è¯»å†™é”</h5>\n<p>è¯»å†™é”å®é™…æ˜¯ä¸€ç§ç‰¹æ®Šçš„è‡ªæ—‹é”ï¼Œå®ƒæŠŠå¯¹å…±äº«èµ„æºçš„è®¿é—®è€…åˆ’åˆ†æˆè¯»è€…å’Œå†™è€…ï¼Œè¯»è€…åªå¯¹å…±äº«èµ„æºè¿›è¡Œè¯»è®¿é—®ï¼Œå†™è€…åˆ™éœ€è¦å¯¹å…±äº«èµ„æºè¿›è¡Œå†™æ“ä½œã€‚è¿™ç§é”ç›¸å¯¹äºè‡ªæ—‹é”è€Œè¨€ï¼Œèƒ½æé«˜å¹¶å‘æ€§ï¼Œå› ä¸ºåœ¨å¤šå¤„ç†å™¨ç³»ç»Ÿä¸­ï¼Œå®ƒå…è®¸åŒæ—¶æœ‰å¤šä¸ªè¯»è€…æ¥è®¿é—®å…±äº«èµ„æºï¼Œæœ€å¤§å¯èƒ½çš„è¯»è€…æ•°ä¸ºå®é™…çš„é€»è¾‘ CPU æ•°ã€‚å†™è€…æ˜¯æ’ä»–æ€§çš„ï¼Œä¸€ä¸ªè¯»å†™é”åŒæ—¶åªèƒ½æœ‰ä¸€ä¸ªå†™è€…æˆ–å¤šä¸ªè¯»è€…ï¼ˆä¸ CPU æ•°ç›¸å…³ï¼‰ï¼Œä½†ä¸èƒ½åŒæ—¶æ—¢æœ‰è¯»è€…åˆæœ‰å†™è€…ã€‚</p>\n<p>åœ¨è¯»å†™é”ä¿æŒæœŸé—´ä¹Ÿæ˜¯æŠ¢å å¤±æ•ˆçš„ã€‚å¦‚æœè¯»å†™é”å½“å‰æ²¡æœ‰è¯»è€…ï¼Œä¹Ÿæ²¡æœ‰å†™è€…ï¼Œé‚£ä¹ˆå†™è€…å¯ä»¥ç«‹åˆ»è·å¾—è¯»å†™é”ï¼Œå¦åˆ™å®ƒå¿…é¡»è‡ªæ—‹åœ¨é‚£é‡Œï¼Œç›´åˆ°æ²¡æœ‰ä»»ä½•å†™è€…æˆ–è¯»è€…ï¼›å¦‚æœè¯»å†™é”æ²¡æœ‰å†™è€…ï¼Œé‚£ä¹ˆè¯»è€…å¯ä»¥ç«‹å³è·å¾—è¯¥è¯»å†™é”ï¼Œå¦åˆ™è¯»è€…å¿…é¡»è‡ªæ—‹åœ¨é‚£é‡Œï¼Œç›´åˆ°å†™è€…é‡Šæ”¾è¯¥è¯»å†™é”ã€‚</p>\n<h4 id=\"ç±»é”ä¸å¯¹è±¡é”\"><a class=\"anchor\" href=\"#ç±»é”ä¸å¯¹è±¡é”\">#</a> ç±»é”ä¸å¯¹è±¡é”</h4>\n<h5 id=\"ç±»é”\"><a class=\"anchor\" href=\"#ç±»é”\">#</a> ç±»é”</h5>\n<p>ç±»é”æ˜¯åŠ æŒåœ¨ç±»ä¸Šçš„ï¼Œä½¿ç”¨  <code>synchronized static</code>  æˆ–è€…  <code>synchronized(Xxx.class)</code>  æ–¹æ³•ä½¿ç”¨çš„é”éƒ½æ˜¯ç±»é”ï¼Œå› ä¸º class å’Œé™æ€æ–¹æ³•åœ¨ç³»ç»Ÿä¸­åªä¼šäº§ç”Ÿä¸€ä»½ï¼Œæ‰€ä»¥åœ¨å•ç³»ç»Ÿç¯å¢ƒä¸­ä½¿ç”¨ç±»é”æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">TestLock</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">synchronized</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">methodName1</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ç±»é”æ–¹å¼ä¸€\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">methodName2</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token keyword\">synchronized</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">TestLock</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ç±»é”æ–¹å¼äºŒ\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h5 id=\"å¯¹è±¡é”\"><a class=\"anchor\" href=\"#å¯¹è±¡é”\">#</a> å¯¹è±¡é”</h5>\n<p>synchronized ä¿®é¥°éé™æ€çš„æ–¹æ³•å’Œ  <code>synchronized(this)</code>  ä½¿ç”¨çš„éƒ½æ˜¯å¯¹è±¡é”ï¼Œä¸€ä¸ªç³»ç»Ÿå¯ä»¥æœ‰å¤šä¸ªå¯¹è±¡å®ä¾‹ï¼Œæ‰€ä»¥ä½¿ç”¨å¯¹è±¡é”ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œé™¤éä¿è¯ä¸€ä¸ªç³»ç»Ÿè¯¥ç±»å‹çš„å¯¹è±¡åªä¼šåˆ›å»ºä¸€ä¸ªï¼ˆé€šå¸¸ä½¿ç”¨å•ä¾‹æ¨¡å¼ï¼‰æ‰èƒ½ä¿è¯çº¿ç¨‹å®‰å…¨ã€‚</p>\n<p>å•ä¾‹æ¨¡å¼ä¿è¯å¯¹è±¡å®‰å…¨ï¼š</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// å•ä¾‹æ¨¡å¼ - åŒé‡æ£€æŸ¥é”</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">TestLock</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token keyword\">static</span> <span class=\"token class-name\">TestLock</span> testLock <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token comment\">// ç§æœ‰åŒ–æ„é€ å‡½æ•°ä¸å…è®¸ new æ¥äº§ç”Ÿå¯¹è±¡</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">TestLock</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token comment\">// ä¿è¯ä¸€ä¸ªç³»ç»Ÿåªä¼šåˆ›å»ºä¸€ä¸ªå¯¹è±¡å®ä¾‹</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">synchronized</span> <span class=\"token keyword\">static</span> <span class=\"token class-name\">TestLock</span> <span class=\"token function\">getInstance</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>testLock <span class=\"token operator\">==</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>            <span class=\"token keyword\">synchronized</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">TestLock</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>                <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>testLock <span class=\"token operator\">==</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>                    testLock <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">TestLock</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>                <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        <span class=\"token keyword\">return</span> testLock<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h4 id=\"å†…ç½®é”ä¸æ˜¾å¼é”\"><a class=\"anchor\" href=\"#å†…ç½®é”ä¸æ˜¾å¼é”\">#</a> å†…ç½®é”ä¸æ˜¾å¼é”</h4>\n<p>åœ¨ Java å¹¶å‘ç¼–ç¨‹ä¸­ï¼Œå¯ä»¥å°†é”åˆ†ä¸ºä¸¤ç±»ï¼šå†…ç½®é”ï¼ˆéšå¼é”ï¼Œsychronizedï¼‰å’Œæ˜¾å¼é”ï¼ˆlockï¼‰ã€‚</p>\n<p>æ‰€è°“çš„æ˜¾ç¤ºå’Œéšå¼å°±æ˜¯åœ¨ä½¿ç”¨çš„æ—¶å€™ï¼Œä½¿ç”¨è€…è¦ä¸è¦æ‰‹åŠ¨å†™ä»£ç å»è·å–é”å’Œé‡Šæ”¾é”çš„æ“ä½œã€‚</p>\n<p>å†…ç½®é”çš„ä½¿ç”¨ï¼š</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// åŒæ­¥æ™®é€šæ–¹æ³•ï¼Œå…¶é”å¯¹è±¡æ˜¯ï¼šthis</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">synchronized</span> <span class=\"token keyword\">void</span> <span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> t<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>v <span class=\"token operator\">+=</span> t<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token comment\">// åŒæ­¥é™æ€æ–¹æ³•ï¼Œå…¶é”å¯¹è±¡æ˜¯ï¼šå½“å‰ç±»çš„ Class å¯¹è±¡</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">synchronized</span> <span class=\"token keyword\">void</span> <span class=\"token function\">sub</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> t<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>v <span class=\"token operator\">-=</span> t<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token comment\">// åŒæ­¥ä»£ç å—ï¼Œå…¶é”å¯¹è±¡æ˜¯ï¼šsynchronized æ‰€ä¿®é¥°çš„ obj</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">int</span> <span class=\"token function\">decrementAndGet</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token keyword\">synchronized</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token operator\">--</span>v<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>æ˜¾å¼é”çš„ä½¿ç”¨ï¼š</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    </pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token class-name\">ReentrantLock</span> lock <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ReentrantLock</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    </pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    lock<span class=\"token punctuation\">.</span><span class=\"token function\">lock</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">// æ‰‹åŠ¨è·å–é”</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">try</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token comment\">// ...</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">finally</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        lock<span class=\"token punctuation\">.</span><span class=\"token function\">unlock</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">// æ‰‹åŠ¨é‡Šæ”¾é”</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>åœ¨ä½¿ç”¨ lock çš„æ—¶å€™ï¼Œä½¿ç”¨è€…éœ€è¦æ‰‹åŠ¨çš„è·å–å’Œé‡Šæ”¾é”ï¼Œå¦‚æœæ²¡æœ‰é‡Šæ”¾é”ï¼Œå°±æœ‰å¯èƒ½å¯¼è‡´å‡ºç°æ­»é”çš„ç°è±¡ï¼Œé€šå¸¸éœ€è¦é…åˆ  <code>try/finally</code>  è¯­å¥å—æ¥å®Œæˆã€‚</p>\n<p><strong>å†…ç½®é”å’Œæ˜¾å¼é”çš„åŒºåˆ«ï¼š</strong></p>\n<ol>\n<li>\n<p>ä½¿ç”¨æ–¹å¼ä¸åŒã€‚</p>\n</li>\n<li>\n<p>ç­‰å¾…æ˜¯å¦å¯ä¸­æ–­ï¼š</p>\n<p>synchronized ä¸å¯ä¸­æ–­ï¼Œé™¤éæŠ›å‡ºå¼‚å¸¸æˆ–è€…æ­£å¸¸è¿è¡Œå®Œæˆã€‚</p>\n<p>lock å¯ä»¥ä¸­æ–­ï¼Œä¸­æ–­æ–¹å¼ï¼š</p>\n<ol>\n<li>è°ƒç”¨è®¾ç½®è¶…æ—¶æ–¹æ³•  <code>tryLock(long timeout ,timeUnit unit)</code>  ã€‚</li>\n<li>è°ƒç”¨  <code>lockInterruptibly()</code>  ã€  <code>interrupt()</code>  æ–¹æ³• ã€‚</li>\n</ol>\n</li>\n<li>\n<p>åŠ é”æ—¶æ˜¯å¦å¯ä»¥å…¬å¹³ï¼š</p>\n<p>synchronized æ˜¯éå…¬å¹³é”ã€‚</p>\n<p>lock å¯ä»¥æŒ‡å®šæ˜¯å¦å¯ä»¥å…¬å¹³ï¼Œé»˜è®¤ä¸ºéå…¬å¹³æ‰€ï¼ŒæŒ‡å®šæ–¹å¼ï¼š  <code>new ReentrantLock(true)</code>  ï¼Œtrue è¡¨ç¤ºå…¬å¹³é”ã€‚</p>\n</li>\n<li>\n<p>æ˜¯å¦å¯ä»¥ç²¾ç¡®å”¤é†’çº¿ç¨‹ã€‚</p>\n<p>synchronized è¦ä¹ˆéšæœºå”¤é†’ä¸€ä¸ªçº¿ç¨‹ï¼Œè¦ä¹ˆæ˜¯å”¤é†’æ‰€æœ‰ç­‰å¾…çš„çº¿ç¨‹ã€‚</p>\n<p>lock å¯ä»¥ç”¨åˆ†ç»„æ¥å®ç°å”¤é†’éœ€è¦å”¤é†’çš„çº¿ç¨‹ï¼Œå®ƒå¯ä»¥ç²¾ç¡®åœ°å”¤é†’çº¿ç¨‹ã€‚</p>\n</li>\n</ol>\n<h4 id=\"å¯é‡å…¥é”ä¸ä¸å¯é‡å…¥é”\"><a class=\"anchor\" href=\"#å¯é‡å…¥é”ä¸ä¸å¯é‡å…¥é”\">#</a> å¯é‡å…¥é”ä¸ä¸å¯é‡å…¥é”</h4>\n<p>å¯é‡å…¥é”ä¹Ÿå«é€’å½’é”ï¼Œæ˜¯æŒ‡åœ¨å¤–å±‚å‡½æ•°è·å¾—é”ä¹‹åï¼Œå†…å±‚é€’å½’å‡½æ•°ä»ç„¶å¯ä»¥è·å–åˆ°è¯¥é”ï¼Œå³çº¿ç¨‹å¯ä»¥è¿›å…¥ä»»ä½•ä¸€ä¸ªå®ƒå·²ç»æ‹¥æœ‰é”çš„ä»£ç å—ã€‚åœ¨ JAVA ç¯å¢ƒä¸‹ ReentrantLock å’Œ synchronized éƒ½æ˜¯å¯é‡å…¥é”ã€‚å¯é‡å…¥é”æœ€å¤§çš„ä½œç”¨æ˜¯é¿å…æ­»é”ã€‚å…¶å®ç°åŸç†æ˜¯é€šè¿‡ä¸ºæ¯ä¸ªé”å…³è”ä¸€ä¸ªè¯·æ±‚è®¡æ•°å™¨å’Œä¸€ä¸ªå æœ‰å®ƒçš„çº¿ç¨‹ï¼Œå½“è®¡æ•°ä¸º 0 æ—¶ï¼Œè®¤ä¸ºé”æ˜¯æœªè¢«å æœ‰çš„ï¼›çº¿ç¨‹è¯·æ±‚ä¸€ä¸ªæœªè¢«å æœ‰çš„é”æ—¶ï¼ŒJVM å°†è®°å½•é”çš„å æœ‰è€…ï¼Œå¹¶ä¸”å°†è¯·æ±‚è®¡æ•°å™¨ç½®ä¸º 1 ã€‚å¦‚æœåŒä¸€ä¸ªçº¿ç¨‹å†æ¬¡è¯·æ±‚è¿™ä¸ªé”ï¼Œè®¡æ•°å™¨å°†é€’å¢ï¼›æ¯æ¬¡å ç”¨çº¿ç¨‹é€€å‡ºåŒæ­¥å—ï¼Œè®¡æ•°å™¨å€¼å°†é€’å‡ã€‚ç›´åˆ°è®¡æ•°å™¨ä¸º 0 æ—¶é”è¢«é‡Šæ”¾ã€‚</p>\n<p>å¯é‡å…¥é”åœ¨é‡Šæ”¾é”å‰ï¼Œçº¿ç¨‹å¯å†æ¬¡è¿›å…¥é”æ–¹æ³•ï¼Œé€šè¿‡è¿™ç§æ–¹å¼ï¼Œå¯ä»¥ä¿è¯åœ¨é€’å½’çš„ç¯å¢ƒä¸‹ï¼Œä¸ä¼šå‡ºç°æ­»é”çš„ç°è±¡ã€‚</p>\n<p>ä¸å¯é‡å…¥é”ï¼ˆè‡ªæ—‹é”ï¼‰ï¼Œçº¿ç¨‹åœ¨é‡Šæ”¾é”å‰ä¸å¯å†æ¬¡è¿›å…¥é”æ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œè·å¾—ä¸€æ¬¡é”å°±åªèƒ½è¿›å…¥ä¸€æ¬¡é”æ–¹æ³•ï¼Œå†æ¬¡è¿›å…¥åˆ™éœ€è¦é‡æ–°è·å–é”ã€‚</p>\n<h4 id=\"æ— é”-åå‘é”-è½»é‡çº§é”å’Œé‡é‡çº§é”\"><a class=\"anchor\" href=\"#æ— é”-åå‘é”-è½»é‡çº§é”å’Œé‡é‡çº§é”\">#</a> æ— é”ã€åå‘é”ã€è½»é‡çº§é”å’Œé‡é‡çº§é”</h4>\n<p>Java ä¸­æ¯ä¸ªå¯¹è±¡éƒ½å¯ä½œä¸ºé”ï¼Œé”æœ‰å››ç§çº§åˆ«ï¼ŒæŒ‰ç…§é‡çº§ä»è½»åˆ°é‡åˆ†ä¸ºï¼šæ— é”ã€åå‘é”ã€è½»é‡çº§é”å’Œé‡é‡çº§é”ï¼Œå¹¶ä¸”ï¼Œé”åªèƒ½å‡çº§ä¸èƒ½é™çº§ã€‚</p>\n<p>ä¸‹å›¾æ¥æºäºç½‘ç»œï¼Œè¯·ç‚¹å‡»æ”¾å¤§è¿›è¡ŒæŸ¥çœ‹ï¼š</p>\n<p><img data-src=\"https://img.xfc-exclave.com/2021/09/6906fc9714f23752e400c59c59003d551631003242.png\" alt=\"ä¸åŒé‡çº§é”çš„è·å–æµç¨‹\" /></p>\n<h5 id=\"æ— é”\"><a class=\"anchor\" href=\"#æ— é”\">#</a> æ— é”</h5>\n<p>æ— é”æ˜¯æŒ‡çº¿ç¨‹é€šè¿‡æ— é™å¾ªç¯æ¥æ‰§è¡Œæ›´æ–°æ“ä½œï¼Œå¦‚æœæ‰§è¡ŒæˆåŠŸå°±é€€å‡ºå¾ªç¯ï¼Œå¦‚æœæ‰§è¡Œå¤±è´¥ï¼ˆæœ‰å…¶ä»–çº¿ç¨‹æ›´æ–°äº†å€¼ï¼‰ï¼Œåˆ™ç»§ç»­æ‰§è¡Œï¼Œç›´åˆ°æˆåŠŸä¸ºæ­¢ã€‚CAS æ“ä½œå°±å±äºæ— é”ã€‚å¦‚æœä»æ€§èƒ½çš„è§’åº¦æ¥çœ‹ï¼Œæ— é”çŠ¶æ€çš„æ€§èƒ½æ˜¯éå¸¸é«˜çš„ã€‚</p>\n<h5 id=\"åå‘é”\"><a class=\"anchor\" href=\"#åå‘é”\">#</a> åå‘é”</h5>\n<p>å¼•å…¥åå‘é”æ˜¯ä¸ºäº†åœ¨æ— å¤šçº¿ç¨‹ç«äº‰çš„æƒ…å†µä¸‹å°½é‡å‡å°‘ä¸å¿…è¦çš„è½»é‡çº§é”æ‰§è¡Œè·¯å¾„ï¼Œå› ä¸ºè½»é‡çº§é”çš„è·å–åŠé‡Šæ”¾ä¾èµ–å¤šæ¬¡ CAS åŸå­æŒ‡ä»¤ï¼Œè€Œåå‘é”åªéœ€è¦åœ¨ç½®æ¢ ThreadID çš„æ—¶å€™ä¾èµ–ä¸€æ¬¡ CAS åŸå­æŒ‡ä»¤ã€‚</p>\n<p>å½“åªæœ‰ä¸€ä¸ªçº¿ç¨‹ç«äº‰é”æ—¶ï¼Œæˆ‘ä»¬æ—¢ä¸éœ€è¦é˜»å¡ï¼Œä¹Ÿä¸éœ€è¦è‡ªæ—‹ï¼Œå› ä¸ºåªæœ‰ä¸€ä¸ªçº¿ç¨‹åœ¨ç«äº‰ï¼Œæˆ‘ä»¬åªéœ€è¦åˆ¤æ–­è¯¥åå‘é”ä¸­çš„ ThreadID æ˜¯å¦ä¸ºå½“å‰çº¿ç¨‹å³å¯ã€‚å¦‚æœæ˜¯ï¼Œå°±æ‰§è¡ŒåŒæ­¥ä»£ç ï¼Œåä¹‹ï¼Œå°±å°è¯•ä½¿ç”¨ CAS ä¿®æ”¹ ThreadIDï¼Œä¿®æ”¹æˆåŠŸæ‰§è¡ŒåŒæ­¥ä»£ç ï¼Œä¸æˆåŠŸå°±å°†åå‘é”è†¨èƒ€ä¸ºè½»é‡çº§é”ã€‚</p>\n<h5 id=\"è½»é‡çº§é”\"><a class=\"anchor\" href=\"#è½»é‡çº§é”\">#</a> è½»é‡çº§é”</h5>\n<p>è·å–è½»é‡é”çš„è¿‡ç¨‹ä¸åå‘é”ä¸åŒï¼Œç«äº‰é”çš„çº¿ç¨‹é¦–å…ˆéœ€è¦æ‹·è´å¯¹è±¡å¤´ä¸­çš„  <code>Mark Word</code>  åˆ°å¸§æ ˆçš„é”è®°å½•ä¸­ã€‚æ‹·è´æˆåŠŸåä½¿ç”¨ CAS æ“ä½œå°è¯•å°†å¯¹è±¡çš„ Mark Word æ›´æ–°ä¸ºæŒ‡å‘å½“å‰çº¿ç¨‹çš„æŒ‡é’ˆã€‚å¦‚æœè¿™ä¸ªæ›´æ–°åŠ¨ä½œæˆåŠŸäº†ï¼Œé‚£ä¹ˆè¿™ä¸ªçº¿ç¨‹å°±æ‹¥æœ‰äº†è¯¥å¯¹è±¡çš„é”ã€‚å¦‚æœæ›´æ–°å¤±è´¥ï¼Œé‚£ä¹ˆæ„å‘³ç€æœ‰å¤šä¸ªçº¿ç¨‹åœ¨ç«äº‰ã€‚</p>\n<p>å½“ç«äº‰çº¿ç¨‹å°è¯•å ç”¨è½»é‡çº§é”å¤±è´¥å¤šæ¬¡ä¹‹åï¼ˆä½¿ç”¨è‡ªæ—‹ï¼‰è½»é‡çº§é”å°±ä¼šè†¨èƒ€ä¸ºé‡é‡çº§é”ï¼Œé‡é‡çº§çº¿ç¨‹æŒ‡é’ˆæŒ‡å‘ç«äº‰çº¿ç¨‹ï¼Œç«äº‰çº¿ç¨‹ä¹Ÿä¼šé˜»å¡ï¼Œç­‰å¾…è½»é‡çº§çº¿ç¨‹é‡Šæ”¾é”åå”¤é†’ã€‚</p>\n<p>è½»é‡çº§é”çš„å‰æå‡è®¾æ˜¯å¯¹äºç»å¤§éƒ¨åˆ†çš„é”ï¼Œåœ¨æ•´ä¸ªåŒæ­¥å‘¨æœŸå†…éƒ½æ˜¯ä¸å­˜åœ¨ç«äº‰çš„ï¼Œé€šè¿‡ CAS æ“ä½œæ¥é¿å…æ—¶å€™äº’æ–¥é”çš„å¼€é”€ã€‚</p>\n<h5 id=\"é‡é‡çº§é”\"><a class=\"anchor\" href=\"#é‡é‡çº§é”\">#</a> é‡é‡çº§é”</h5>\n<p>é‡é‡çº§é”çš„åŠ é”ã€è§£é”è¿‡ç¨‹å’Œè½»é‡çº§é”å·®ä¸å¤šï¼ŒåŒºåˆ«åœ¨äºï¼šé‡é‡çº§é”åœ¨ç«äº‰å¤±è´¥åï¼Œçº¿ç¨‹é˜»å¡ï¼Œé‡Šæ”¾é”åï¼Œå”¤é†’é˜»å¡çš„çº¿ç¨‹ï¼Œä¸ä½¿ç”¨è‡ªæ—‹é”ï¼Œå®ƒä¸ä¼šé‚£ä¹ˆæ¶ˆè€— CPUï¼Œæ‰€ä»¥é€‚åˆç”¨åœ¨åŒæ­¥å—æ‰§è¡Œæ—¶é—´é•¿çš„æƒ…å†µä¸‹ã€‚</p>\n<h4 id=\"compare-and-swap\"><a class=\"anchor\" href=\"#compare-and-swap\">#</a> Compare and Swap</h4>\n<blockquote>\n<p>CAS æ˜¯  <code>Compare and Swap</code>  çš„ç¼©å†™ï¼Œæ„ä¸ºæ¯”è¾ƒå¹¶è½¬æ¢ï¼Œå®ƒæ˜¯è§£å†³å¤šçº¿ç¨‹å¹¶è¡Œæƒ…å†µä¸‹ä½¿ç”¨é”é€ æˆæ€§èƒ½æŸè€—çš„ä¸€ç§æœºåˆ¶ï¼ŒCAS æ“ä½œåŒ…å«ä¸‰ä¸ªæ“ä½œæ•° â€”â€” å†…å­˜ä½ç½®ï¼ˆVï¼‰ã€é¢„æœŸåŸå€¼ï¼ˆAï¼‰å’Œæ–°å€¼ (B)ã€‚å¦‚æœå†…å­˜ä½ç½®çš„å€¼ä¸é¢„æœŸåŸå€¼ç›¸åŒ¹é…ï¼Œé‚£ä¹ˆå¤„ç†å™¨ä¼šè‡ªåŠ¨å°†è¯¥ä½ç½®å€¼æ›´æ–°ä¸ºæ–°å€¼ã€‚å¦åˆ™ï¼Œå¤„ç†å™¨ä¸åšä»»ä½•æ“ä½œã€‚æ— è®ºå“ªç§æƒ…å†µï¼Œå®ƒéƒ½ä¼šåœ¨ CAS æŒ‡ä»¤ä¹‹å‰è¿”å›è¯¥ä½ç½®çš„å€¼ã€‚CAS æœ‰æ•ˆåœ°è¯´æ˜äº† â€œæˆ‘è®¤ä¸ºä½ç½® V åº”è¯¥åŒ…å«å€¼ Aï¼›å¦‚æœåŒ…å«è¯¥å€¼ï¼Œåˆ™å°† B æ”¾åˆ°è¿™ä¸ªä½ç½®ï¼›å¦åˆ™ï¼Œä¸è¦æ›´æ”¹è¯¥ä½ç½®ï¼Œåªå‘Šè¯‰æˆ‘è¿™ä¸ªä½ç½®ç°åœ¨çš„å€¼å³å¯ã€‚</p>\n<p>quote from <span class=\"exturl\" data-url=\"aHR0cHM6Ly9iYWlrZS5iYWlkdS5jb20vaXRlbS9DQVMvMTYzNzk4MDE=\">ç™¾åº¦ç™¾ç§‘_CAS</span></p>\n</blockquote>\n<h4 id=\"æ•°æ®åº“ç›¸å…³é”æœºåˆ¶\"><a class=\"anchor\" href=\"#æ•°æ®åº“ç›¸å…³é”æœºåˆ¶\">#</a> æ•°æ®åº“ç›¸å…³é”æœºåˆ¶</h4>\n<p><img data-src=\"https://img.xfc-exclave.com/2021/12/cd181f5eadb4aef1161b52d157626a561640618640.png\" alt=\"æ•°æ®åº“ç›¸å…³çš„é”æœºåˆ¶\" /></p>\n<h4 id=\"åˆ†å¸ƒå¼é”\"><a class=\"anchor\" href=\"#åˆ†å¸ƒå¼é”\">#</a> åˆ†å¸ƒå¼é”</h4>\n<blockquote>\n<p>åˆ†å¸ƒå¼é”ï¼Œæ˜¯æ§åˆ¶åˆ†å¸ƒå¼ç³»ç»Ÿä¹‹é—´åŒæ­¥è®¿é—®å…±äº«èµ„æºçš„ä¸€ç§æ–¹å¼ã€‚ åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œå¸¸å¸¸éœ€è¦åè°ƒä»–ä»¬çš„åŠ¨ä½œã€‚å¦‚æœä¸åŒçš„ç³»ç»Ÿæˆ–æ˜¯åŒä¸€ä¸ªç³»ç»Ÿçš„ä¸åŒä¸»æœºä¹‹é—´å…±äº«äº†ä¸€ä¸ªæˆ–ä¸€ç»„èµ„æºï¼Œé‚£ä¹ˆè®¿é—®è¿™äº›èµ„æºçš„æ—¶å€™ï¼Œå¾€å¾€éœ€è¦äº’æ–¥æ¥é˜²æ­¢å½¼æ­¤å¹²æ‰°æ¥ä¿è¯ä¸€è‡´æ€§ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä¾¿éœ€è¦ä½¿ç”¨åˆ°åˆ†å¸ƒå¼é”ã€‚</p>\n<p>quote from <span class=\"exturl\" data-url=\"aHR0cHM6Ly96aC53aWtpcGVkaWEub3JnL3poLWhhbnMvJUU1JTg4JTg2JUU1JUI4JTgzJUU1JUJDJThGJUU5JTk0JTgx\">ç»´åŸºç™¾ç§‘_åˆ†å¸ƒå¼é”</span></p>\n</blockquote>\n<p>CAP åŸåˆ™ï¼šä»»ä½•ä¸€ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿéƒ½æ— æ³•åŒæ—¶æ»¡è¶³ä¸€è‡´æ€§ï¼ˆConsistencyï¼‰ã€å¯ç”¨æ€§ï¼ˆAvailabilityï¼‰å’Œåˆ†åŒºå®¹é”™æ€§ï¼ˆPartition toleranceï¼‰ï¼Œæœ€å¤šåªèƒ½åŒæ—¶æ»¡è¶³ä¸¤é¡¹ã€‚</p>\n<p><img data-src=\"https://img.xfc-exclave.com/2021/12/9f6062e3cc60f3000ed37d2fd4aa50731640618654.png\" alt=\"CAPåŸåˆ™\" height=\"400px\" /></p>\n<p>ä¹Ÿå°±æ˜¯è¯´å•çº¯çš„ Java Api å¹¶ä¸èƒ½æä¾›åˆ†å¸ƒå¼é”çš„èƒ½åŠ›ã€‚ç›®å‰ä¸»æµçš„åˆ†å¸ƒå¼é”ä¸»è¦æœ‰ä¸‰ç§ï¼šæ•°æ®åº“ã€ç¼“å­˜ï¼ˆRedis ç­‰ï¼‰ã€Zookeeper ç­‰ä¸­é—´ä»¶ã€‚</p>\n<h5 id=\"åŸºäºæ•°æ®åº“çš„å®ç°\"><a class=\"anchor\" href=\"#åŸºäºæ•°æ®åº“çš„å®ç°\">#</a> åŸºäºæ•°æ®åº“çš„å®ç°</h5>\n<ol>\n<li>\n<p>åŸºäºæ•°æ®åº“è¡¨</p>\n<p>å®ç°åˆ†å¸ƒå¼é”æœ€ç®€å•çš„æ–¹å¼ï¼Œå°±æ˜¯ç›´æ¥åˆ›å»ºä¸€å¼ é”è¡¨ï¼Œç„¶åé€šè¿‡æ“ä½œè¯¥è¡¨ä¸­çš„æ•°æ®æ¥å®ç°ã€‚å½“æˆ‘ä»¬è¦é”ä½æŸä¸ªæ–¹æ³•æˆ–èµ„æºæ—¶ï¼Œæˆ‘ä»¬å°±åœ¨è¯¥è¡¨ä¸­å¢åŠ ä¸€æ¡è®°å½•ï¼Œæƒ³è¦é‡Šæ”¾é”çš„æ—¶å€™å°±åˆ é™¤è¿™æ¡è®°å½•ã€‚</p>\n<figure class=\"highlight sql\"><figcaption data-lang=\"SQL\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">CREATE</span> <span class=\"token keyword\">TABLE</span> <span class=\"token punctuation\">`</span>methodLock<span class=\"token punctuation\">`</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token punctuation\">`</span>id<span class=\"token punctuation\">`</span> <span class=\"token keyword\">int</span><span class=\"token punctuation\">(</span><span class=\"token number\">11</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">AUTO_INCREMENT</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'ä¸»é”®'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token punctuation\">`</span>method_name<span class=\"token punctuation\">`</span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">64</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token string\">''</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'é”å®šçš„æ–¹æ³•å'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token punctuation\">`</span><span class=\"token keyword\">desc</span><span class=\"token punctuation\">`</span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">1024</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token string\">'å¤‡æ³¨ä¿¡æ¯'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token punctuation\">`</span>update_time<span class=\"token punctuation\">`</span> <span class=\"token keyword\">timestamp</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token keyword\">CURRENT_TIMESTAMP</span> <span class=\"token keyword\">ON</span> <span class=\"token keyword\">UPDATE</span> <span class=\"token keyword\">CURRENT_TIMESTAMP</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'ä¿å­˜æ•°æ®æ—¶é—´ï¼Œè‡ªåŠ¨ç”Ÿæˆ'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">PRIMARY</span> <span class=\"token keyword\">KEY</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">`</span>id<span class=\"token punctuation\">`</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">UNIQUE</span> <span class=\"token keyword\">KEY</span> <span class=\"token punctuation\">`</span>uidx_method_name<span class=\"token punctuation\">`</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">`</span>method_name<span class=\"token punctuation\">`</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">USING</span> <span class=\"token keyword\">BTREE</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token punctuation\">)</span> <span class=\"token keyword\">ENGINE</span><span class=\"token operator\">=</span><span class=\"token keyword\">InnoDB</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token keyword\">CHARSET</span><span class=\"token operator\">=</span>utf8 <span class=\"token keyword\">COMMENT</span><span class=\"token operator\">=</span><span class=\"token string\">'é”å®šä¸­çš„æ–¹æ³•'</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p>å½“æˆ‘ä»¬æƒ³è¦é”ä½æŸä¸ªæ–¹æ³•æ—¶ï¼Œåˆ™æ‰§è¡Œå¦‚ä¸‹ SQL ï¼š</p>\n<figure class=\"highlight sql\"><figcaption data-lang=\"SQL\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">insert</span> <span class=\"token keyword\">into</span> methodLock<span class=\"token punctuation\">(</span>method_name<span class=\"token punctuation\">,</span> <span class=\"token keyword\">desc</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">values</span> <span class=\"token punctuation\">(</span><span class=\"token string\">'methodName'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'desc'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p>åœ¨è¿™é‡Œçš„ç¤ºä¾‹ä¸­ï¼Œç”±äºå¯¹å­—æ®µ method_name è¿›è¡Œäº†å”¯ä¸€æ€§çº¦æŸï¼Œæ‰€ä»¥ï¼Œå½“å¤šä¸ªè¯·æ±‚è°ƒç”¨ methodName æ–¹æ³•æ—¶ï¼Œæ•°æ®åº“ä¼šä¿è¯åªæœ‰ä¸€ä¸ªæ“ä½œå¯ä»¥æˆåŠŸï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥è®¤ä¸ºæ“ä½œæˆåŠŸçš„é‚£ä¸ªçº¿ç¨‹è·å¾—äº†è¯¥æ–¹æ³•çš„é”ï¼Œå¯ä»¥æ‰§è¡Œæ–¹æ³•ä½“å†…å®¹ã€‚å½“æ–¹æ³•æ‰§è¡Œå®Œæ¯•ä¹‹åï¼Œéœ€è¦é‡Šæ”¾é”ï¼Œåˆ™æ‰§è¡Œå¦‚ä¸‹ SQL ï¼š</p>\n<figure class=\"highlight sql\"><figcaption data-lang=\"SQL\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">delete</span> <span class=\"token keyword\">from</span> methodLock <span class=\"token keyword\">where</span> method_name <span class=\"token operator\">=</span> <span class=\"token string\">'methodName'</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p>ä½†è¿™ç§å®ç°æ–¹å¼å­˜åœ¨è¾ƒå¤§é—®é¢˜ï¼š</p>\n<ul>\n<li>è¿™æŠŠé”ä¾èµ–ä¸æ•°æ®åº“çš„å¯ç”¨æ€§ï¼Œä¸€æ—¦æ•°æ®åº“å®•æœºå°±ä¼šå¯¼è‡´ä¸šåŠ¡ä¸å¯ç”¨ã€‚</li>\n<li>è¿™æŠŠé”æ²¡æœ‰å¤±æ•ˆæ—¶é—´ï¼Œä¸€æ—¦è§£é”å¤±è´¥å°±ä¼šå¯¼è‡´é”è®°å½•ä¸€ç›´å­˜åœ¨ï¼Œå…¶ä»–çº¿ç¨‹æ— æ³•å†æ¬¡è·å¾—é”ã€‚</li>\n<li>è¿™æŠŠé”åªèƒ½æ˜¯éé˜»å¡çš„ï¼Œå› ä¸ºæ•°æ®çš„æ’å…¥æ“ä½œä¸€æ—¦æ‰§è¡Œå¤±è´¥å°±ä¼šç›´æ¥æŠ¥é”™ï¼Œè€Œä¸ä¼šç­‰å¾…é”çš„é‡Šæ”¾ã€‚</li>\n<li>è¿™æŠŠé”æ˜¯éé‡å…¥çš„ï¼ŒåŒä¸€çº¿ç¨‹è·å¾—é”åï¼Œæ— æ³•å†æ¬¡è·å¾—é”ï¼Œå› ä¸ºæ•°æ®åº“ä¸­å·²å­˜åœ¨ç›¸åŒè®°å½•ã€‚</li>\n</ul>\n<p>å½“ç„¶ï¼Œå¯¹äºè¿™äº›é—®é¢˜ï¼Œä¹Ÿå¯ä»¥æœ‰é’ˆå¯¹æ€§çš„æ–¹æ¡ˆï¼Œä¾‹å¦‚ï¼šæ•°æ®åº“åŒæ­¥ä¿è¯æ•°æ®å¯ç”¨ã€å®šæ—¶ä»»åŠ¡é˜²æ­¢é”æ»ç•™ã€å¾ªç¯é‡è¯•ä½¿çº¿ç¨‹ç­‰å¾…ã€è®°å½•é¢å¤–ä¿¡æ¯å®ç°é”é‡å…¥ã€‚</p>\n</li>\n<li>\n<p>åŸºäºæ•°æ®åº“æ’ä»–é”</p>\n<p>é™¤äº†é€šè¿‡å¢åˆ è¡¨è®°å½•æ¥å®ç°åˆ†å¸ƒå¼é”å¤–ï¼Œè¿˜å¯ä»¥å€ŸåŠ©æ•°æ®ä¸­è‡ªå¸¦çš„é”æ¥å®ç°ã€‚</p>\n<p>åœ¨æŸ¥è¯¢è¯­å¥æ—¶å¢åŠ   <code>for update</code>  ï¼Œæ•°æ®åº“å°±ä¼šåœ¨æŸ¥è¯¢çš„è¿‡ç¨‹ä¸­ä¸ºæ•°æ®åº“è¡¨å¢åŠ æ’ä»–é”ï¼Œå½“æŸæ¡è®°å½•è¢«åŠ ä¸Šæ’ä»–é”ä¹‹åï¼Œå…¶ä»–çº¿ç¨‹æ— æ³•å†åœ¨è¯¥è¡Œè®°å½•ä¸Šå¢åŠ æ’ä»–é”ã€‚</p>\n<p>æˆ‘ä»¬å¯ä»¥è®¤ä¸ºè·å¾—æ’å®ƒé”çš„çº¿ç¨‹å³å¯è·å¾—åˆ†å¸ƒå¼é”ï¼Œå½“è·å–åˆ°é”ä¹‹åï¼Œå¯ä»¥æ‰§è¡Œæ–¹æ³•çš„ä¸šåŠ¡é€»è¾‘ï¼Œæ‰§è¡Œå®Œæ–¹æ³•ä¹‹åï¼Œé€šè¿‡  <code>commit()</code>  æäº¤äº‹åŠ¡ï¼Œå³å¯é‡Šæ”¾é”ã€‚</p>\n<blockquote>\n<p>è¿™é‡Œç‰¹æŒ‡ Mysql çš„ InnoDB å¼•æ“ï¼Œåªæœ‰é€šè¿‡ç´¢å¼•è¿›è¡Œæ£€ç´¢çš„æ—¶å€™æ‰ä¼šä½¿ç”¨è¡Œçº§é”ï¼Œå¦åˆ™ä¼šä½¿ç”¨è¡¨çº§é”ï¼Œå¦‚æœå¸Œæœ›ä½¿ç”¨è¡Œçº§é”ï¼Œåˆ™éœ€è¦ç»™å¯¹åº”çš„å­—æ®µæ·»åŠ å”¯ä¸€ç´¢å¼•ã€‚</p>\n</blockquote>\n<p>ç›¸æ¯”å¢åˆ è¡¨è®°å½•çš„æ–¹å¼å®ç°åˆ†å¸ƒå¼é”ï¼Œè¿™ç§æ–¹æ³•å¯ä»¥æœ‰æ•ˆåœ°è§£å†³æ— æ³•é‡Šæ”¾é”å’Œé”é˜»å¡çš„é—®é¢˜ã€‚</p>\n<p>ä½†è¿™é‡Œè¿˜å¯èƒ½å­˜åœ¨å¦å¤–ä¸€ä¸ªé—®é¢˜ï¼Œè™½ç„¶æˆ‘ä»¬å¯¹ method_name ä½¿ç”¨äº†å”¯ä¸€ç´¢å¼•ï¼Œå¹¶ä¸”æ˜¾ç¤ºä½¿ç”¨ for update æ¥ä½¿ç”¨è¡Œçº§é”ã€‚ä½†æ˜¯ï¼ŒMySql ä¼šå¯¹æŸ¥è¯¢è¿›è¡Œä¼˜åŒ–ï¼Œå³ä¾¿åœ¨æ¡ä»¶ä¸­ä½¿ç”¨äº†ç´¢å¼•å­—æ®µï¼Œä½†æ˜¯å¦ä½¿ç”¨ç´¢å¼•æ¥æ£€ç´¢æ•°æ®æ˜¯ç”± MySQL é€šè¿‡åˆ¤æ–­ä¸åŒæ‰§è¡Œè®¡åˆ’çš„ä»£ä»·æ¥å†³å®šçš„ï¼Œå¦‚æœ MySQL è®¤ä¸ºå…¨è¡¨æ‰«æ•ˆç‡æ›´é«˜ï¼Œæ¯”å¦‚å¯¹ä¸€äº›å¾ˆå°çš„è¡¨ï¼Œå®ƒå°±ä¸ä¼šä½¿ç”¨ç´¢å¼•ï¼Œè¿™ç§æƒ…å†µä¸‹ InnoDB å°†ä½¿ç”¨è¡¨é”ï¼Œè€Œä¸æ˜¯è¡Œé”ã€‚</p>\n<p>æ­¤å¤–ï¼Œæˆ‘ä»¬è¦ä½¿ç”¨æ’ä»–é”æ¥è¿›è¡Œåˆ†å¸ƒå¼é”çš„ lockï¼Œé‚£ä¹ˆä¸€ä¸ªæ’ä»–é”é•¿æ—¶é—´ä¸æäº¤ï¼Œå°±ä¼šå ç”¨æ•°æ®åº“è¿æ¥ã€‚ä¸€æ—¦ç±»ä¼¼çš„è¿æ¥å˜å¾—å¤šäº†ï¼Œå°±å¯èƒ½æŠŠæ•°æ®åº“è¿æ¥æ± æ’‘çˆ†ã€‚</p>\n</li>\n</ol>\n<h5 id=\"åŸºäºç¼“å­˜çš„å®ç°\"><a class=\"anchor\" href=\"#åŸºäºç¼“å­˜çš„å®ç°\">#</a> åŸºäºç¼“å­˜çš„å®ç°</h5>\n<blockquote>\n<p>è¿™é‡Œ redis ä¸ºä¾‹ã€‚</p>\n</blockquote>\n<p>ä½¿ç”¨ redis ç¼“å­˜å®ç°åˆ†å¸ƒå¼é”ï¼Œéœ€è¦ä½¿ç”¨åˆ°å¦‚ä¸‹å‘½ä»¤ï¼š</p>\n<ol>\n<li>\n<p>setnx</p>\n<p><code>setnx key value</code>  å½“ä¸”ä»…å½“ key ä¸å­˜åœ¨æ—¶ï¼Œå°† key è®¾ç½®ä¸º value å­—ç¬¦ä¸²ï¼Œè‹¥è®¾ç½®æˆåŠŸï¼Œåˆ™è¿”å› 1 ã€‚è‹¥ key å·²å­˜åœ¨ï¼Œåˆ™ä¸è¿›è¡Œæ“ä½œç›´æ¥è¿”å› 0 ã€‚</p>\n</li>\n<li>\n<p>expire</p>\n<p><code>expire key timeout</code>  ä¸º key è®¾ç½®ä¸€ä¸ªè¶…æ—¶æ—¶é—´ï¼Œå•ä½ä¸º second ï¼Œè¶…è¿‡è¿™ä¸ªæ—¶é—´ä¼šè‡ªåŠ¨é‡Šæ”¾ï¼Œå¯ä»¥é¿å…æ­»é”ã€‚</p>\n</li>\n<li>\n<p>delete</p>\n<p><code>delete key</code>  åˆ é™¤ key ã€‚</p>\n</li>\n</ol>\n<p>redis åˆ†å¸ƒå¼é”å®ç°çš„æ€æƒ³ï¼š</p>\n<ol>\n<li>è·å–é”çš„æ—¶å€™ï¼Œä½¿ç”¨ setnx åŠ é”ï¼Œå¹¶ä½¿ç”¨ expire å‘½ä»¤ä¸ºé”æ·»åŠ ä¸€ä¸ªè¶…æ—¶æ—¶é—´ï¼Œè¶…è¿‡è¯¥æ—¶é—´åˆ™è‡ªåŠ¨é‡Šæ”¾é”ï¼Œé”çš„ value å€¼ä¸ºä¸€ä¸ªéšæœºç”Ÿæˆçš„ UUIDï¼Œé€šè¿‡æ­¤åœ¨é‡Šæ”¾é”çš„æ—¶å€™è¿›è¡Œåˆ¤æ–­ã€‚</li>\n<li>è·å–é”çš„æ—¶å€™è¿˜è®¾ç½®ä¸€ä¸ªè·å–çš„è¶…æ—¶æ—¶é—´ï¼Œè‹¥è¶…è¿‡è¿™ä¸ªæ—¶é—´åˆ™æ”¾å¼ƒè·å–é”ã€‚</li>\n<li>é‡Šæ”¾é”çš„æ—¶å€™ï¼Œé€šè¿‡ UUID åˆ¤æ–­æ˜¯ä¸æ˜¯è¯¥é”ï¼Œè‹¥æ˜¯è¯¥é”ï¼Œåˆ™æ‰§è¡Œ delete è¿›è¡Œé”é‡Šæ”¾ã€‚</li>\n</ol>\n<p>å¯ä»¥ä½¿ç”¨ç¼“å­˜æ¥ä»£æ›¿æ•°æ®åº“æ¥å®ç°åˆ†å¸ƒå¼é”ï¼Œè¿™ä¸ªå¯ä»¥æä¾›æ›´å¥½çš„æ€§èƒ½ï¼ŒåŒæ—¶ï¼Œå¾ˆå¤šç¼“å­˜æœåŠ¡éƒ½æ˜¯é›†ç¾¤éƒ¨ç½²çš„ï¼Œå¯ä»¥é¿å…å•ç‚¹é—®é¢˜ã€‚å¹¶ä¸”å¾ˆå¤šç¼“å­˜æœåŠ¡éƒ½æä¾›äº†å¯ä»¥ç”¨æ¥å®ç°åˆ†å¸ƒå¼é”çš„æ–¹æ³•ï¼Œæ¯”å¦‚ redis çš„ setnx æ–¹æ³•ã€‚å¹¶ä¸”ï¼Œè¿™äº›ç¼“å­˜æœåŠ¡ä¹Ÿéƒ½æä¾›äº†å¯¹æ•°æ®çš„è¿‡æœŸè‡ªåŠ¨åˆ é™¤çš„æ”¯æŒï¼Œå¯ä»¥ç›´æ¥è®¾ç½®è¶…æ—¶æ—¶é—´æ¥æ§åˆ¶é”çš„é‡Šæ”¾ã€‚</p>\n<p>ä½†ç¼“å­˜å®ç°åˆ†å¸ƒå¼é”ä¹Ÿæœ‰å…¶ç¼ºé™·ï¼Œå³é€šè¿‡è¶…æ—¶æ—¶é—´æ¥æ§åˆ¶é”çš„å¤±æ•ˆæ—¶é—´å¹¶ä¸æ˜¯ååˆ†é è°±ã€‚</p>\n<h5 id=\"åŸºäº-zookeeper-çš„å®ç°\"><a class=\"anchor\" href=\"#åŸºäº-zookeeper-çš„å®ç°\">#</a> åŸºäº Zookeeper çš„å®ç°</h5>\n<p><span class=\"label danger\">â—ï¸TODO</span> ç”±äºè¿˜ä¸äº†è§£ zookeeper ï¼Œç­‰è¯¦ç»†äº†è§£ä¹‹åå†è¿›è¡Œè¡¥å……ã€‚</p>\n<h4 id=\"monitor\"><a class=\"anchor\" href=\"#monitor\">#</a> monitor</h4>\n<p>Monitor å…¶å®æ˜¯ä¸€ç§åŒæ­¥å·¥å…·ï¼Œæˆ–è€…è¯´æ˜¯åŒæ­¥æœºåˆ¶ï¼Œå®ƒé€šå¸¸è¢«æè¿°æˆä¸€ä¸ªå¯¹è±¡ï¼Œä¸»è¦ç‰¹ç‚¹æ˜¯ï¼š</p>\n<ol>\n<li>åŒæ­¥ï¼šå¯¹è±¡å†…çš„æ‰€æœ‰æ–¹æ³•éƒ½äº’æ–¥çš„æ‰§è¡Œã€‚åŒä¸€ä¸ª Monitor åªæœ‰ä¸€ä¸ªè¿è¡Œè®¸å¯ï¼Œä»»ä½•çº¿ç¨‹è¿›å…¥ä»»ä½•ä¸€ä¸ªæ–¹æ³•éƒ½éœ€è¦è·å–è¯¥è®¸å¯ï¼Œå¹¶åœ¨ç¦»å¼€æ—¶å½’è¿˜ã€‚</li>\n<li>åä½œï¼šMonitor é€šå¸¸æä¾›  <code>signal</code>  æœºåˆ¶ï¼Œå…è®¸æ­£æŒæœ‰è®¸å¯çš„çº¿ç¨‹æš‚æ—¶æ”¾å¼ƒè®¸å¯ï¼Œç­‰å¾…æŸä¸ªç›‘è§†æ¡ä»¶æˆç«‹åï¼Œå½“å‰çº¿ç¨‹å°±å¯ä»¥é€šçŸ¥æ­£åœ¨ç­‰å¾…è¿™ä¸ªæ¡ä»¶çš„çº¿ç¨‹ï¼Œè®©å®ƒå¯ä»¥é‡æ–°è·å¾—è¿è¡Œè®¸å¯ã€‚</li>\n</ol>\n<p>åœ¨ Monitor Object æ¨¡å¼ä¸­ï¼Œä¸»è¦æœ‰å››ç§ç±»å‹çš„å‚ä¸è€…ï¼š</p>\n<ol>\n<li>ç›‘è§†è€…å¯¹è±¡ï¼ˆMonitor Objectï¼‰ï¼šè´Ÿè´£å…¬å…±çš„æ¥å£æ–¹æ³•ï¼Œè¿™äº›å…¬å…±çš„æ¥å£æ–¹æ³•ä¼šåœ¨å¤šçº¿ç¨‹çš„ç¯å¢ƒä¸‹è¢«è°ƒç”¨æ‰§è¡Œã€‚</li>\n<li>åŒæ­¥æ–¹æ³•ï¼šè¿™äº›æ–¹æ³•æ˜¯ç›‘è§†è€…å¯¹è±¡æ‰€å®šä¹‰çš„ï¼Œå®ƒä¿è¯åœ¨ä»»ä¸€äº‹ä»¶å†…åªæœ‰ä¸€ä¸ªåŒæ­¥æ–¹æ³•èƒ½å¤Ÿæ‰§è¡Œã€‚</li>\n<li>ç›‘æ§é”ï¼ˆMonitor Lockï¼‰ï¼šæ¯ä¸€ä¸ªç›‘è§†è€…å¯¹è±¡éƒ½ä¼šæ‹¥æœ‰ä¸€æŠŠç›‘è§†é”ã€‚</li>\n<li>ç›‘æ§æ¡ä»¶ï¼ˆMonitor Conditionï¼‰ï¼šåŒæ­¥æ–¹æ³•ä½¿ç”¨ç›‘æ§é”å’Œç›‘æ§æ¡ä»¶æ¥å†³å®šæ–¹æ³•æ˜¯å¦éœ€è¦é˜»å¡æˆ–é‡æ–°æ‰§è¡Œã€‚</li>\n</ol>\n<p>å®é™…ä¸Š Java Object ç±»æœ¬èº«å°±æ˜¯ç›‘è§†è€…å¯¹è±¡ï¼ŒJava å¯¹äº Monitor Object æ¨¡å¼åšäº†å†…å»ºçš„æ”¯æŒã€‚æ¯ä¸ª Object éƒ½å¸¦äº†ä¸€æŠŠçœ‹ä¸è§çš„é”ï¼Œé€šå¸¸ç§°ä¸ºå†…éƒ¨é”ã€ Monitor é”ï¼Œæˆ–è€… Instrinsic Lockï¼Œè¿™æŠŠé”å°±æ˜¯ç›‘æ§é”ï¼Œå¹¶ä¸”é€šè¿‡  <code>wait()</code> ã€ <code>notify()</code> ã€ <code>notifyAll()</code>  æ–¹æ³•æ„æˆç›‘æ§æ¡ä»¶ã€‚</p>\n<blockquote>\n<p>å…³äº waitã€notifyã€notifyAll å°†åœ¨æœ¬æ–‡åç»­éƒ¨åˆ†è¿›è¡Œæ›´åŠ è¯¦ç»†çš„è¯´æ˜ã€‚</p>\n</blockquote>\n<h3 id=\"é”çš„ä¼˜åŒ–\"><a class=\"anchor\" href=\"#é”çš„ä¼˜åŒ–\">#</a> é”çš„ä¼˜åŒ–</h3>\n<p>å…³äºé”çš„ä¼˜åŒ–çš„æ–¹æ³•å’Œæ€è·¯ï¼Œä¸»è¦å¯ä»¥ä»ä¸¤ä¸ªå±‚é¢è¿›è¡Œï¼Œå…¶ä¸€æ˜¯åœ¨<ins>è™šæ‹Ÿæœºå±‚é¢</ins>å¯¹é”è¿›è¡Œä¼˜åŒ–ï¼Œå®ƒä¸»è¦æ˜¯åœ¨åå‘é”ã€è½»é‡çº§é”å’Œé‡é‡çº§é”æ–¹é¢è¿›è¡Œä¼˜åŒ–ã€‚è€Œå¦ä¸€å±‚é¢åˆ™æ˜¯åœ¨å¼€å‘è€…å¯æ§çš„<ins>ä»£ç å±‚é¢</ins>è¿›è¡Œä¼˜åŒ–ï¼Œä¸»è¦æœ‰ä»¥ä¸‹å‡ ç§æ€è·¯å’Œæ–¹æ³•ï¼š</p>\n<ol>\n<li>\n<p>å‡å°‘é”æŒæœ‰çš„æ—¶é—´ã€‚</p>\n<p>ä¸€ä¸ªçº¿ç¨‹æŒæœ‰é”çš„æ—¶é—´è¶Šé•¿ï¼Œå…¶ä»–ç«äº‰çº¿ç¨‹ç­‰å¾…çš„æ—¶é—´å°±è¶Šé•¿ï¼Œå› æ­¤ï¼Œä¸ºäº†æé«˜é”çš„æ€§èƒ½ï¼Œåªéœ€è¦åœ¨å¿…è¦æ—¶æ‰è¿›è¡ŒåŒæ­¥ï¼Œè¿™æ ·å°±èƒ½æ˜æ˜¾å‡å°çº¿ç¨‹æŒæœ‰é”çš„æ—¶é—´ã€‚</p>\n<p>ä¼˜åŒ–å‰çš„åŒæ­¥ä»£ç å—ï¼š</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">synchronized</span> <span class=\"token keyword\">void</span> <span class=\"token function\">syncMethod</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token comment\">//... å…¶ä»–ä»£ç ç‰‡æ®µ</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token function\">mutextMethod</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    </pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token comment\">//... å…¶ä»–ä»£ç ç‰‡æ®µ</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>ä¼˜åŒ–åçš„åŒæ­¥ä»£ç å—ï¼š</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">syncMethod</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token comment\">//... å…¶ä»–ä»£ç ç‰‡æ®µ</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">synchronized</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    \t<span class=\"token function\">mutextMethod</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    </pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token comment\">//... å…¶ä»–ä»£ç ç‰‡æ®µ</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure></li>\n<li>\n<p>å‡å°é”ç²’åº¦ã€‚</p>\n<p>å°†å¤§å¯¹è±¡ï¼ˆè¿™ä¸ªå¯¹è±¡å¯èƒ½ä¼šè¢«å¾ˆå¤šçº¿ç¨‹è®¿é—®ï¼‰ï¼Œæ‹†æˆå°å¯¹è±¡ï¼Œå¤§å¤§å¢åŠ å¹¶è¡Œåº¦ï¼Œé™ä½é”ç«äº‰ã€‚é™ä½äº†é”çš„ç«äº‰ï¼Œåå‘é”ï¼Œè½»é‡çº§é”æˆåŠŸç‡æ‰ä¼šæé«˜ã€‚</p>\n<p>æœ€å…¸å‹çš„å‡å°é”ç²’åº¦çš„æ¡ˆä¾‹å°±æ˜¯  <code>ConcurrentHashMap</code>  ï¼Œä»–åªé”ä½äº† Hash æ¡¶ä¸­çš„æŸä¸€ä¸ªæ¡¶ï¼Œè€Œä¸åƒ HashTable ä¸€æ ·é”ä½æ•´ä¸ªå¯¹è±¡ã€‚</p>\n</li>\n<li>\n<p>é”åˆ†ç¦»ã€‚</p>\n<p>æœ€å¸¸è§çš„é”åˆ†ç¦»å°±æ˜¯è¯»å†™é” ReadWriteLockï¼Œæ ¹æ®åŠŸèƒ½è¿›è¡Œåˆ†ç¦»æˆè¯»é”å’Œå†™é”ï¼Œè¿™æ ·è¯»è¯»ä¸äº’æ–¥ï¼Œè¯»å†™äº’æ–¥ï¼Œå†™å†™äº’æ–¥ï¼Œå³ä¿è¯äº†çº¿ç¨‹å®‰å…¨ï¼Œåˆæé«˜äº†æ€§èƒ½ã€‚</p>\n<blockquote>\n<p>è¯»å†™åˆ†ç¦»æ€æƒ³å¯ä»¥å»¶ä¼¸ï¼Œåªè¦æ“ä½œäº’ä¸å½±å“ï¼Œé”å°±å¯ä»¥åˆ†ç¦»ã€‚</p>\n</blockquote>\n</li>\n<li>\n<p>é”ç²—åŒ–ã€‚</p>\n<p>ä¸ºäº†ä¿è¯å¤šçº¿ç¨‹çš„æ‰§è¡Œæ•ˆç‡ï¼Œé€šå¸¸æƒ…å†µä¸‹ä¼šè¦æ±‚æ¯ä¸ªçº¿ç¨‹æŒæœ‰é”çš„æ—¶é—´å°½é‡çŸ­ï¼Œä¸€æ—¦ä½¿ç”¨å®Œå…¬å…±èµ„æºåï¼Œå°±åº”å½“ç«‹å³é‡Šæ”¾é”ã€‚ä½†æ˜¯ï¼Œä¹Ÿåº”å½“è€ƒè™‘ä¸åŒçš„åœºæ™¯ï¼Œå¦‚æœä¸€ä¸ªçº¿ç¨‹å¯¹äºåŒä¸€ä¸ªé”ä¸æ–­è¿›è¡Œè¯·æ±‚ã€åŒæ­¥å’Œé‡Šæ”¾æ“ä½œï¼Œå…¶æœ¬èº«ä¹Ÿä¼šæ¶ˆè€—å®è´µçš„èµ„æºã€‚</p>\n<p>ä¼˜åŒ–å‰çš„åŒæ­¥ä»£ç å—ï¼š</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">syncMethod</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> len<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        <span class=\"token keyword\">synchronized</span><span class=\"token punctuation\">(</span>lock<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token comment\">// é¢‘ç¹è·å–é”</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>            <span class=\"token comment\">// ... do sth.</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>ä¼˜åŒ–åçš„åŒæ­¥ä»£ç å—ï¼š</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">syncMethod</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">synchronized</span><span class=\"token punctuation\">(</span>lock<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token comment\">// è·å–é”é¢‘ç‡å‡å°</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> len<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>            <span class=\"token comment\">// ... do sth.</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><blockquote>\n<p>æ³¨æ„ï¼šé”ç²—åŒ–çš„æ“ä½œï¼Œéœ€è¦æ ¹æ®å®é™…æƒ…å†µè¿›è¡Œè€ƒè™‘ï¼Œè¢«çº³å…¥åŒä¸€ä¸ªé”è¿›è¡Œå¤„ç†çš„å¤šä¸ªæ“ä½œï¼Œåº”å½“å°½é‡ä¿è¯å®ƒä»¬èƒ½å¤Ÿåœ¨è¾ƒçŸ­çš„æ—¶é—´å†…æ‰§è¡Œå®Œæ¯•ï¼Œå¦åˆ™å°±ä¼šå¯¼è‡´å…¶ä»–ç«äº‰çº¿ç¨‹ç­‰å¾…æ—¶é—´è¿‡é•¿ã€‚</p>\n</blockquote>\n</li>\n<li>\n<p>é”æ¶ˆé™¤ã€‚</p>\n<p>é”æ¶ˆé™¤æ˜¯åœ¨ç¼–è¯‘å™¨çº§åˆ«è¿›è¡Œçš„ï¼Œåœ¨å³æ—¶ç¼–è¯‘æ—¶ï¼Œå¦‚æœå‘ç°ä¸å¯èƒ½è¢«å…±äº«çš„å¯¹è±¡ï¼Œåˆ™å¯ä»¥æ¶ˆé™¤è¿™äº›å¯¹è±¡çš„é”æ“ä½œã€‚</p>\n<blockquote>\n<p>è¿™äº›åœ¨å³æ—¶ç¼–è¯‘æ—¶å‡ºç°çš„ä¸å¯èƒ½è¢«å…±äº«çš„å¯¹è±¡ï¼Œä¸ä¸€å®šæ˜¯æˆ‘ä»¬åœ¨ç¼–å†™ç¨‹åºæ—¶ä¸ºå…¶è¿›è¡Œäº†åŠ é”çš„æ“ä½œï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯åœ¨ JDK çš„å®ç°ä¸­å°±åŒ…å«æœ‰åŠ é”çš„æ“ä½œï¼Œæ¯”å¦‚  <code>Vector</code>  å’Œ  <code>StringBuffer</code>  ç±»ä¸­çš„å¾ˆå¤šæ–¹æ³•éƒ½æ˜¯åŠ é”çš„ã€‚å½“æˆ‘ä»¬åœ¨ä¸€äº›ä¸ä¼šæœ‰çº¿ç¨‹å®‰å…¨çš„æƒ…å†µä¸‹ä½¿ç”¨è¿™äº›ç±»çš„æ–¹æ³•æ—¶ï¼Œè¾¾åˆ°æŸäº›æ¡ä»¶æ—¶ï¼Œç¼–è¯‘å™¨ä¼šå°†é”æ¶ˆé™¤æ¥æé«˜æ€§èƒ½ã€‚</p>\n</blockquote>\n</li>\n</ol>\n<h3 id=\"synchronized\"><a class=\"anchor\" href=\"#synchronized\">#</a> synchronized</h3>\n<p>synchronized æ˜¯ Java ä¸­çš„å…³é”®å­—ï¼Œåœ¨ä¸Šæ–‡ä¸­ä»‹ç»é”çš„ç›¸å…³æ¦‚å¿µæ—¶å·²ç»åå¤ä½¿ç”¨åˆ°ï¼Œå®ƒæ˜¯ä¸€ç§åŒæ­¥é”ã€‚å®ƒä¿®é¥°çš„å¯¹è±¡ä¸»è¦æœ‰ä»¥ä¸‹å‡ ç§ï¼š</p>\n<ol>\n<li>ä¿®é¥°ä»£ç å—ï¼Œè¢«ä¿®é¥°çš„ä»£ç å—ç§°ä¸ºåŒæ­¥è¯­å¥å—ï¼Œå…¶ä½œç”¨çš„èŒƒå›´æ˜¯å¤§æ‹¬å·æ‹¬èµ·æ¥çš„ä»£ç ï¼Œä½œç”¨çš„å¯¹è±¡æ˜¯è°ƒç”¨è¿™ä¸ªä»£ç å—çš„å¯¹è±¡ã€‚</li>\n<li>ä¿®é¥°æ–¹æ³•ï¼Œè¢«ä¿®é¥°çš„æ–¹æ³•ç§°ä¸ºåŒæ­¥æ–¹æ³•ï¼Œå…¶ä½œç”¨çš„èŒƒå›´æ˜¯æ•´ä¸ªæ–¹æ³•ï¼Œä½œç”¨çš„å¯¹è±¡æ˜¯è°ƒç”¨è¿™ä¸ªæ–¹æ³•çš„å¯¹è±¡ã€‚</li>\n<li>ä¿®é¥°é™æ€æ–¹æ³•ï¼Œå…¶ä½œç”¨çš„èŒƒå›´æ˜¯æ•´ä¸ªé™æ€æ–¹æ³•ï¼Œä½œç”¨çš„å¯¹è±¡æ˜¯è¿™ä¸ªç±»çš„æ‰€æœ‰å¯¹è±¡ã€‚</li>\n<li>ä¿®é¥°ç±»ï¼Œå…¶ä½œç”¨çš„èŒƒå›´æ˜¯ synchronized åé¢æ‹¬å·æ‹¬èµ·æ¥çš„éƒ¨åˆ†ï¼Œä½œç”¨ä¸»çš„å¯¹è±¡æ˜¯è¿™ä¸ªç±»çš„æ‰€æœ‰å¯¹è±¡ã€‚</li>\n</ol>\n<h4 id=\"synchronized-çš„åº•å±‚å®ç°\"><a class=\"anchor\" href=\"#synchronized-çš„åº•å±‚å®ç°\">#</a> synchronized çš„åº•å±‚å®ç°</h4>\n<p>é’ˆå¯¹ä¸€ä¸ª synchronized ä¿®é¥°çš„ä»£ç å—è¿›è¡Œåç¼–è¯‘ï¼Œå¾—åˆ°å¦‚ä¸‹ç»“æœï¼š</p>\n<p><img data-src=\"https://img.xfc-exclave.com/2021/09/4ab22003c06d96e69207a1b8e402df801631158386.png\" alt=\"åŒæ­¥ä»£ç å—åç¼–è¯‘ç»“æœ\" /></p>\n<p>å¯ä»¥è§‚å¯Ÿåˆ°ï¼Œ <code>synchronized</code>  å…³é”®å­—åœ¨ç»è¿‡ Javac ç¼–è¯‘ä¹‹åï¼Œä¼šåœ¨åŒæ­¥å—çš„å‰åå½¢æˆ  <code>monitorenter</code>  å’Œ  <code>monitorexit</code>  ä¸¤ä¸ªå­—èŠ‚ç æŒ‡ä»¤ã€‚</p>\n<p>æ ¹æ®ã€ŠJava è™šæ‹Ÿæœºè§„èŒƒã€‹çš„è¦æ±‚ï¼š</p>\n<ul>\n<li>åœ¨æ‰§è¡Œ  <code>monitorenter</code>  æŒ‡ä»¤æ—¶ï¼Œé¦–å…ˆè¦å»å°è¯•è·å–å¯¹è±¡çš„é”ï¼ˆè·å–å¯¹è±¡é”çš„è¿‡ç¨‹ï¼Œå…¶å®æ˜¯è·å– monitor å¯¹è±¡çš„æ‰€æœ‰æƒçš„è¿‡ç¨‹ï¼‰ã€‚</li>\n<li>å¦‚æœè¿™ä¸ªå¯¹è±¡æ²¡è¢«é”å®šï¼Œæˆ–è€…å½“å‰çº¿ç¨‹å·²ç»æŒæœ‰äº†é‚£ä¸ªå¯¹è±¡çš„é”ï¼Œå°±æŠŠé”çš„è®¡æ•°å™¨çš„å€¼å¢åŠ ä¸€ã€‚</li>\n<li>è€Œåœ¨æ‰§è¡Œ  <code>monitorexit</code>  æŒ‡ä»¤æ—¶ä¼šå°†é”è®¡æ•°å™¨å‡ä¸€ï¼Œä¸€æ—¦è®¡æ•°å™¨çš„å€¼ä¸ºé›¶ï¼Œé”éšå³å°±è¢«é‡Šæ”¾äº†ã€‚</li>\n<li>å¦‚æœè·å–å¯¹è±¡é”å¤±è´¥ï¼Œé‚£å½“å‰çº¿ç¨‹å°±åº”å½“è¢«é˜»å¡ç­‰å¾…ï¼Œç›´åˆ°è¯·æ±‚é”å®šçš„å¯¹è±¡è¢«æŒæœ‰å®ƒçš„çº¿ç¨‹é‡Šæ”¾ä¸ºæ­¢ã€‚</li>\n</ul>\n<p>ç”±æ­¤å¯ä»¥çœ‹å‡º synchronized çš„å®ç°åŸç†ï¼šsynchronized çš„è¯­ä¹‰åº•å±‚æ˜¯é€šè¿‡ä¸€ä¸ª monitor çš„å¯¹è±¡æ¥å®Œæˆï¼Œå…¶å® wait/notify ç­‰æ–¹æ³•ä¹Ÿä¾èµ–äº monitor å¯¹è±¡ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆåªæœ‰åœ¨åŒæ­¥çš„å—æˆ–è€…æ–¹æ³•ä¸­æ‰èƒ½è°ƒç”¨ wait/notify ç­‰æ–¹æ³•ï¼Œå¦åˆ™ä¼šæŠ›å‡º  <code>java.lang.IllegalMonitorStateException</code>  çš„å¼‚å¸¸çš„åŸå› ã€‚</p>\n<blockquote>\n<p>synchronized ä¿®é¥°çš„å…¶ä»–å¯¹è±¡ä¹Ÿæ˜¯åŒç†ï¼Œå°½ç®¡å®ƒä»¬æœ‰å¯èƒ½å¹¶ä¸æ˜¯æ˜¾å¼åœ°è°ƒç”¨ monitorenter å’Œ monitorexit æŒ‡ä»¤ã€‚</p>\n<p>åç¼–è¯‘æ–‡ä»¶ä¹‹æ‰€ä»¥æœ‰ä¸¤ä¸ª monitorexit æŒ‡ä»¤ï¼Œæ˜¯å› ä¸ºå®ƒä»¬åˆ†åˆ«ç”¨äºæ­£å¸¸é€€å‡ºå’Œå¼‚å¸¸é€€å‡ºã€‚</p>\n</blockquote>\n<h4 id=\"synchronized-ä¸-lock-çš„å…³ç³»\"><a class=\"anchor\" href=\"#synchronized-ä¸-lock-çš„å…³ç³»\">#</a> synchronized ä¸ lock çš„å…³ç³»</h4>\n<blockquote>\n<p>å‚è€ƒä¸Šæ–‡  <code>é” &gt;&gt; å†…ç½®é”ä¸æ˜¾å¼é”</code>  éƒ¨åˆ†ã€‚</p>\n</blockquote>\n<h4 id=\"ä¸ä½¿ç”¨-synchronized-å¦‚ä½•å®ç°ä¸€ä¸ªçº¿ç¨‹å®‰å…¨çš„å•ä¾‹\"><a class=\"anchor\" href=\"#ä¸ä½¿ç”¨-synchronized-å¦‚ä½•å®ç°ä¸€ä¸ªçº¿ç¨‹å®‰å…¨çš„å•ä¾‹\">#</a> ä¸ä½¿ç”¨ synchronized å¦‚ä½•å®ç°ä¸€ä¸ªçº¿ç¨‹å®‰å…¨çš„å•ä¾‹</h4>\n<p>å€ŸåŠ© CASï¼ˆAtomicReferenceï¼‰å®ç°å•ä¾‹æ¨¡å¼ï¼š</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Singleton</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    </pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">AtomicReference</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Singleton</span><span class=\"token punctuation\">></span></span> INSTANCE <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">AtomicReference</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    </pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Singleton</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    </pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token class-name\">Singleton</span> <span class=\"token function\">getInstance</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>            <span class=\"token class-name\">Singleton</span> instance <span class=\"token operator\">=</span> INSTANCE<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span> <span class=\"token operator\">!=</span> instance<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>                <span class=\"token keyword\">return</span> instance<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>            </pre></td></tr><tr><td data-num=\"14\"></td><td><pre>            instance <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Singleton</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>INSTANCE<span class=\"token punctuation\">.</span><span class=\"token function\">compareAndSet</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> instance<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>                <span class=\"token keyword\">return</span> instance<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>ç”¨ CAS çš„å¥½å¤„åœ¨äºä¸éœ€è¦ä½¿ç”¨ä¼ ç»Ÿçš„é”æœºåˆ¶æ¥ä¿è¯çº¿ç¨‹å®‰å…¨ï¼ŒCAS æ˜¯ä¸€ç§åŸºäºå¿™ç­‰å¾…çš„ç®—æ³•ï¼Œä¾èµ–åº•å±‚ç¡¬ä»¶çš„å®ç°ï¼Œç›¸å¯¹äºé”å®ƒæ²¡æœ‰çº¿ç¨‹åˆ‡æ¢å’Œé˜»å¡çš„é¢å¤–æ¶ˆè€—ï¼Œå¯ä»¥æ”¯æŒè¾ƒå¤§çš„å¹¶è¡Œåº¦ã€‚<br />\nCAS çš„ä¸€ä¸ªé‡è¦ç¼ºç‚¹åœ¨äºå¦‚æœå¿™ç­‰å¾…ä¸€ç›´æ‰§è¡Œä¸æˆåŠŸï¼ˆä¸€ç›´åœ¨æ­»å¾ªç¯ä¸­ï¼‰ï¼Œä¼šå¯¹ CPU é€ æˆè¾ƒå¤§çš„æ‰§è¡Œå¼€é”€ã€‚</p>\n<h4 id=\"synchronized-å’ŒåŸå­æ€§-å¯è§æ€§å’Œæœ‰åºæ€§ä¹‹é—´çš„å…³ç³»\"><a class=\"anchor\" href=\"#synchronized-å’ŒåŸå­æ€§-å¯è§æ€§å’Œæœ‰åºæ€§ä¹‹é—´çš„å…³ç³»\">#</a> synchronized å’ŒåŸå­æ€§ã€å¯è§æ€§å’Œæœ‰åºæ€§ä¹‹é—´çš„å…³ç³»</h4>\n<ol>\n<li>\n<p>synchronized ä¸åŸå­æ€§</p>\n<p>åœ¨ Java ä¸­ï¼Œä¸ºäº†ä¿è¯åŸå­æ€§ï¼Œæä¾›äº†ä¸¤ä¸ªé«˜çº§çš„å­—èŠ‚ç æŒ‡ä»¤  <code>monitorenter</code>  å’Œ  <code>monitorexit</code>  ã€‚è¿™ä¸¤ä¸ªå­—èŠ‚ç æŒ‡ä»¤ï¼Œåœ¨ Java ä¸­å¯¹åº”çš„å…³é”®å­—å°±æ˜¯ synchronized ã€‚</p>\n<p>é€šè¿‡ monitorenter å’Œ monitorexit æŒ‡ä»¤ï¼Œå¯ä»¥ä¿è¯è¢« synchronized ä¿®é¥°çš„ä»£ç åœ¨åŒä¸€æ—¶é—´åªèƒ½è¢«ä¸€ä¸ªçº¿ç¨‹è®¿é—®ï¼Œåœ¨é”æœªé‡Šæ”¾ä¹‹å‰ï¼Œæ— æ³•è¢«å…¶ä»–çº¿ç¨‹è®¿é—®åˆ°ã€‚å› æ­¤ï¼Œåœ¨ Java ä¸­å¯ä»¥ä½¿ç”¨ synchronized æ¥ä¿è¯æ–¹æ³•å’Œä»£ç å—å†…çš„æ“ä½œæ˜¯åŸå­æ€§çš„ã€‚</p>\n</li>\n<li>\n<p>synchronized ä¸å¯è§æ€§</p>\n<p>è¢« synchronized ä¿®é¥°çš„ä»£ç ï¼Œåœ¨å¼€å§‹æ‰§è¡Œæ—¶ä¼šåŠ é”ï¼Œæ‰§è¡Œå®Œæˆåä¼šè¿›è¡Œè§£é”ã€‚è€Œä¸ºäº†ä¿è¯å¯è§æ€§ï¼Œæœ‰è¿™æ ·ä¸€æ¡è§„åˆ™ï¼šå¯¹ä¸€ä¸ªå˜é‡è§£é”ä¹‹å‰ï¼Œå¿…é¡»å…ˆæŠŠæ­¤å˜é‡åŒæ­¥å›ä¸»å­˜ä¸­ã€‚è¿™æ ·è§£é”åï¼Œåç»­çº¿ç¨‹å°±å¯ä»¥è®¿é—®åˆ°è¢«ä¿®æ”¹åçš„å€¼ã€‚</p>\n<p>æ‰€ä»¥ï¼Œsynchronized å…³é”®å­—é”ä½çš„å¯¹è±¡ï¼Œå…¶å€¼æ˜¯å…·æœ‰å¯è§æ€§çš„ã€‚</p>\n</li>\n<li>\n<p>synchronized ä¸æœ‰åºæ€§</p>\n<p>ç”±äº synchronized ä¿®é¥°çš„ä»£ç ï¼ŒåŒä¸€æ—¶é—´åªèƒ½è¢«åŒä¸€çº¿ç¨‹è®¿é—®ã€‚é‚£ä¹ˆä¹Ÿå°±æ˜¯å•çº¿ç¨‹æ‰§è¡Œçš„ã€‚æ‰€ä»¥ï¼Œå¯ä»¥ä¿è¯å…¶æœ‰åºæ€§ã€‚</p>\n</li>\n</ol>\n<h3 id=\"volatile\"><a class=\"anchor\" href=\"#volatile\">#</a> volatile</h3>\n<p><code>volatile</code>  é€šå¸¸è¢«æ¯”å–»æˆ â€œè½»é‡çº§çš„  <code>synchronized</code>  â€ï¼Œä¹Ÿæ˜¯ Java å¹¶å‘ç¼–ç¨‹ä¸­æ¯”è¾ƒé‡è¦çš„ä¸€ä¸ªå…³é”®å­—ã€‚å’Œ synchronized ä¸åŒï¼Œvolatile æ˜¯ä¸€ä¸ªå˜é‡ä¿®é¥°ç¬¦ï¼Œåªèƒ½ç”¨æ¥ä¿®é¥°å˜é‡ï¼Œæ— æ³•ä¿®é¥°æ–¹æ³•åŠä»£ç å—ç­‰ã€‚</p>\n<p>volatile çš„ç”¨æ³•æ¯”è¾ƒç®€å•ï¼Œåªéœ€è¦åœ¨å£°æ˜ä¸€ä¸ªå¯èƒ½è¢«å¤šçº¿ç¨‹åŒæ—¶è®¿é—®çš„å˜é‡æ—¶ï¼Œä½¿ç”¨ volatile ä¿®é¥°å³å¯ï¼š</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Singleton</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    </pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token keyword\">volatile</span> <span class=\"token keyword\">static</span> <span class=\"token class-name\">Singleton</span> singleton<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    </pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Singleton</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    </pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token class-name\">Singleton</span> <span class=\"token function\">getSingleton</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>singleton <span class=\"token operator\">==</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>            <span class=\"token keyword\">synchronized</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Singleton</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>                <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>singleton <span class=\"token operator\">==</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>                    singleton <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Singleton</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>                <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        <span class=\"token keyword\">return</span> singleton<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h4 id=\"volatile-çš„å®ç°åŸç†\"><a class=\"anchor\" href=\"#volatile-çš„å®ç°åŸç†\">#</a> volatile çš„å®ç°åŸç†</h4>\n<p>å¯¹äº volatile å˜é‡ï¼Œå½“å¯¹ volatile å˜é‡è¿›è¡Œå†™æ“ä½œçš„æ—¶å€™ï¼ŒJVM ä¼šå‘å¤„ç†å™¨å‘é€ä¸€æ¡ lock å‰ç¼€çš„æŒ‡ä»¤ï¼Œå°†è¿™ä¸ªç¼“å­˜ä¸­çš„å˜é‡å›å†™åˆ°ç³»ç»Ÿä¸»å­˜ä¸­ã€‚è€Œåœ¨å¤šå¤„ç†å™¨ä¸‹ï¼Œä½†å•çº¯å†™å›åˆ°å†…å­˜ä¹Ÿå¹¶ä¸èƒ½ä½¿å…¶ä»–å¤„ç†å™¨çš„ç¼“å­˜æ•°æ®å¾—åˆ°æ›´æ–°ï¼Œä¸ºäº†ä¿è¯å„ä¸ªå¤„ç†å™¨çš„ç¼“å­˜æ˜¯ä¸€è‡´çš„ï¼Œå°±ä¼šå®ç°ç¼“å­˜ä¸€è‡´æ€§åè®®ã€‚</p>\n<blockquote>\n<p><code>ç¼“å­˜ä¸€è‡´æ€§åè®®</code>  åœ¨å‰æ–‡ä¸­å·²æœ‰è¯¦ç»†è¯´æ˜ï¼Œæ­¤å¤„ä¸å†èµ˜è¿°ã€‚</p>\n</blockquote>\n<p>æ€»ä¹‹ï¼Œå¦‚æœä¸€ä¸ªå˜é‡è¢« volatile æ‰€ä¿®é¥°çš„è¯ï¼Œåœ¨æ¯æ¬¡æ•°æ®å˜åŒ–ä¹‹åï¼Œå…¶å€¼éƒ½ä¼šè¢«å¼ºåˆ¶åˆ·å…¥ä¸»å­˜ã€‚è€Œå…¶ä»–å¤„ç†å™¨çš„ç¼“å­˜ç”±äºéµå®ˆäº†ç¼“å­˜ä¸€è‡´æ€§åè®®ï¼Œä¹Ÿä¼šæŠŠè¿™ä¸ªå˜é‡çš„å€¼ä»ä¸»å­˜åŠ è½½åˆ°è‡ªå·±çš„ç¼“å­˜ä¸­ï¼Œè¿™å°±ä¿è¯äº†ä¸€ä¸ª volatile åœ¨å¹¶å‘ç¼–ç¨‹ä¸­ï¼Œå…¶å€¼åœ¨å¤šä¸ªç¼“å­˜ä¸­æ˜¯å¯è§çš„ã€‚</p>\n<h4 id=\"volatile-å’ŒåŸå­æ€§-å¯è§æ€§å’Œæœ‰åºæ€§ä¹‹é—´çš„å…³ç³»\"><a class=\"anchor\" href=\"#volatile-å’ŒåŸå­æ€§-å¯è§æ€§å’Œæœ‰åºæ€§ä¹‹é—´çš„å…³ç³»\">#</a> volatile å’ŒåŸå­æ€§ã€å¯è§æ€§å’Œæœ‰åºæ€§ä¹‹é—´çš„å…³ç³»</h4>\n<ol>\n<li>\n<p>volatile ä¸åŸå­æ€§</p>\n<p>è¦ä¿è¯åŸå­æ€§ï¼Œå°±éœ€è¦é€šè¿‡å­—èŠ‚ç æŒ‡ä»¤ monitorenter å’Œ monitorexitï¼Œä½†æ˜¯ volatile å’Œè¿™ä¸¤ä¸ªæŒ‡ä»¤ä¹‹é—´æ˜¯æ²¡æœ‰ä»»ä½•å…³ç³»çš„ã€‚æ‰€ä»¥ï¼Œ<mark>volatile æ˜¯ä¸èƒ½ä¿è¯åŸå­æ€§çš„</mark>ã€‚</p>\n<p>åªæœ‰åœ¨éƒ¨åˆ†åœºæ™¯ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ volatile æ¥ä»£æ›¿ synchronizedï¼š</p>\n<ul>\n<li>è¿ç®—ç»“æœå¹¶ä¸ä¾èµ–å˜é‡çš„å½“å‰å€¼ï¼Œæˆ–è€…èƒ½å¤Ÿç¡®ä¿åªæœ‰å•ä¸€çš„çº¿ç¨‹ä¼šä¿®æ”¹å˜é‡çš„å€¼ã€‚</li>\n<li>å˜é‡ä¸éœ€è¦ä¸å…¶ä»–çŠ¶æ€å˜é‡å…±åŒå‚ä¸ä¸å˜çº¦æŸã€‚</li>\n</ul>\n</li>\n<li>\n<p>volatile ä¸å¯è§æ€§</p>\n<p>Java ä¸­çš„ volatile å…³é”®å­—æä¾›äº†ä¸€ä¸ªåŠŸèƒ½ï¼Œé‚£å°±æ˜¯è¢«å…¶ä¿®é¥°çš„å˜é‡åœ¨è¢«ä¿®æ”¹åå¯ä»¥ç«‹å³åŒæ­¥åˆ°ä¸»å†…å­˜ï¼Œè¢«å…¶ä¿®é¥°çš„å˜é‡åœ¨æ¯æ¬¡ä½¿ç”¨ä¹‹å‰éƒ½ä»ä¸»å†…å­˜åˆ·æ–°ã€‚å› æ­¤ï¼Œå¯ä»¥ä½¿ç”¨ volatile æ¥ä¿è¯å¤šçº¿ç¨‹æ“ä½œæ—¶å˜é‡çš„å¯è§æ€§ã€‚</p>\n<p>å…³é”®è¯ï¼šç¼“å­˜ä¸€è‡´æ€§åè®®ï¼Œæ€»çº¿å—…æ¢æœºåˆ¶ã€‚</p>\n</li>\n<li>\n<p>volatile ä¸æœ‰åºæ€§</p>\n<p>volatile å¯ä»¥ç¦æ­¢æŒ‡ä»¤é‡æ’ï¼Œè¿™å°±ä¿è¯äº†ä»£ç çš„ç¨‹åºä¼šä¸¥æ ¼æŒ‰ç…§ä»£ç çš„å…ˆåé¡ºåºæ‰§è¡Œï¼Œè¿™å°±ä¿è¯äº†æœ‰åºæ€§ã€‚</p>\n<p>å…³é”®è¯ï¼šå†…å­˜å±éšœã€‚</p>\n</li>\n</ol>\n<h4 id=\"å†…å­˜å±éšœ\"><a class=\"anchor\" href=\"#å†…å­˜å±éšœ\">#</a> å†…å­˜å±éšœ</h4>\n<p>å†…å­˜å±éšœï¼ˆMemory Barrierï¼‰ï¼Œä¹Ÿç§°å†…å­˜æ …æ ï¼ˆMemory Fenceï¼‰ï¼Œå†…å­˜æ …éšœï¼Œå±éšœæŒ‡ä»¤ç­‰ï¼Œæ˜¯ä¸€ç±»åŒæ­¥å±éšœæŒ‡ä»¤ï¼Œæ˜¯ CPU æˆ–ç¼–è¯‘å™¨åœ¨å¯¹å†…å­˜éšæœºè®¿é—®çš„æ“ä½œä¸­çš„ä¸€ä¸ªåŒæ­¥ç‚¹ï¼Œä½¿å¾—æ­¤ç‚¹ä¹‹å‰çš„æ‰€æœ‰è¯»å†™æ“ä½œéƒ½æ‰§è¡Œåæ‰å¯ä»¥å¼€å§‹æ‰§è¡Œæ­¤ç‚¹ä¹‹åçš„æ“ä½œã€‚</p>\n<p>å†…å­˜å±éšœè¦æ±‚è¾¾åˆ°å½“å‰æ‰§è¡Œç‚¹ä¹‹å‰çš„æ‰€æœ‰æ“ä½œï¼Œå¿…é¡»ä¸ä¸»å†…å­˜è¿›è¡ŒåŒæ­¥ï¼Œæ‰èƒ½å¤Ÿç»§ç»­æ‰§è¡Œï¼Œè€Œå†…å­˜å±éšœä¹‹åçš„è¯»æ“ä½œéƒ½å¯ä»¥è·å¾—åŒæ­¥å±éšœä¹‹å‰çš„å†™æ“ä½œçš„ç»“æœã€‚å› æ­¤ï¼Œå¯¹äºæ•æ„Ÿçš„ç¨‹åºå—ï¼Œåœ¨å†™æ“ä½œä¹‹åã€è¯»æ“ä½œä¹‹å‰å¯ä»¥æ’å…¥å†…å­˜å±éšœã€‚</p>\n<p>é€šè¿‡ volatile æ ‡è®°ï¼Œå¯ä»¥è§£å†³ç¼–è¯‘å™¨å±‚é¢çš„å¯è§æ€§ä¸é‡æ’åºé—®é¢˜ã€‚è€Œå†…å­˜å±éšœåˆ™è§£å†³äº†ç¡¬ä»¶å±‚é¢çš„å¯è§æ€§ä¸é‡æ’åºé—®é¢˜ã€‚</p>\n<h4 id=\"jvm-æŒ‡ä»¤é‡æ’å’Œ-cpu-æŒ‡ä»¤é‡æ’\"><a class=\"anchor\" href=\"#jvm-æŒ‡ä»¤é‡æ’å’Œ-cpu-æŒ‡ä»¤é‡æ’\">#</a> JVM æŒ‡ä»¤é‡æ’å’Œ CPU æŒ‡ä»¤é‡æ’</h4>\n<p><span class=\"label warning\">ğŸ”” â€‹FIXME</span> æš‚æœªæ‰¾åˆ°ç›¸å…³èµ„æ–™ï¼Œç½‘ä¸Šå¤§å¤šéƒ½æ˜¯å°† CPU å’Œç¼–è¯‘å™¨çš„æŒ‡ä»¤é‡æ’ä¸€å¹¶è®¨è®ºï¼Œä½†å¹¶æœªè¯´æ˜ä¸¤è€…åŒºåˆ«ã€‚å¯ä»¥ç¡®å®šçš„æ˜¯ï¼ŒCPU æŒ‡ä»¤é‡æ’æ˜¯åœ¨ç¡¬ä»¶å±‚é¢å®ç°çš„ï¼Œå®ƒåœ¨å‡ºå‚æ—¶å°±å·²è®¾ç½®å®Œæˆã€‚è€Œ JVM æŒ‡ä»¤é‡æ’æ˜¯åœ¨ Java è™šæ‹Ÿæœºå±‚é¢è¿›è¡Œçš„ã€‚ä¸¤è€…å®ç°çš„æ–¹å¼åŸºæœ¬ç›¸åŒã€‚</p>\n<blockquote>\n<p>ç”±äºç¼ºä¹ç›¸å…³èµ„æ–™ï¼Œè¿™ä¸€éƒ¨åˆ†å†…å®¹æœ‰æ‰€ç¼ºå¤±ï¼Œå¦‚æœåç»­æœ‰äº†æ›´åŠ æ˜ç¡®çš„äº†è§£ï¼Œå°†ä¼šè¡¥å……ã€‚å¦‚æœè¯»è€…æœ‹å‹ä»¬æœ‰æ‰€è¡¥å……ï¼Œæ¬¢è¿ç•™è¨€ã€‚</p>\n</blockquote>\n<h4 id=\"synchronized-ä¸-volatile\"><a class=\"anchor\" href=\"#synchronized-ä¸-volatile\">#</a> synchronized ä¸ volatile</h4>\n<blockquote>\n<p>synchronized å…³é”®å­—èƒ½ä¿è¯å¹¶å‘ç¼–ç¨‹ä¸­ä¸ä¼šå‡ºç°åŸå­æ€§ã€å¯è§æ€§å’Œæœ‰åºæ€§é—®é¢˜ï¼Œè€Œ volatile åªèƒ½ä¿è¯å¯è§æ€§å’Œæœ‰åºæ€§ã€‚é‚£ä¹ˆï¼Œvolatile æœ‰ä»€ä¹ˆå­˜åœ¨çš„å¿…è¦å‘¢ï¼Ÿ</p>\n</blockquote>\n<p>synchronized æœ¬è´¨ä¸Šæ˜¯ä¸€ç§åŠ é”æœºåˆ¶ï¼Œä½†æ‰€æœ‰çš„é”éƒ½å­˜åœ¨ä»¥ä¸‹ç¼ºç‚¹ï¼š</p>\n<ol>\n<li>\n<p>æœ‰æ€§èƒ½æŸè€—</p>\n<p>å°½ç®¡ JDK æ›¾å¯¹ synchronized è¿›è¡Œäº†è¯¸å¦‚é€‚åº”æ€§è‡ªæ—‹ã€é”æ¶ˆé™¤ã€é”ç²—åŒ–ã€è½»é‡çº§é”å’Œåå‘é”ç­‰ä¼˜åŒ–ï¼Œä½†å®ƒä»æ—§å­˜åœ¨ä¸€å®šçš„æ€§èƒ½æŸè€—ã€‚å¹¶ä¸”ï¼Œè¿™äº›æ–¹æ³•éƒ½æ˜¯é€šè¿‡é¿å…å¯¹ Monitor è¿›è¡ŒåŠ é”å½“æ–¹æ³•æ¥æ§åˆ¶çš„ï¼Œä½†æ˜¯å¹¶éæ‰€æœ‰æƒ…å†µéƒ½èƒ½é€šè¿‡è¿™ç§æ–¹æ³•è¿›è¡Œä¼˜åŒ–ï¼Œå†µä¸”ï¼Œä¼˜åŒ–è¡Œä¸ºæœ¬èº«ä¹Ÿéœ€è¦ä¸€å®šçš„è€—æ—¶ã€‚</p>\n<p>æ€»ä¹‹ï¼ŒåŠ é”å’Œè§£é”çš„è¿‡ç¨‹æ˜¯éœ€è¦ä¸€å®šçš„æ—¶è€—çš„ã€‚è€Œ volatile å˜é‡è¯»æ“ä½œçš„æ€§èƒ½å’Œæ™®é€šå˜é‡å‡ ä¹æ— å·®åˆ«ï¼Œè€Œ volatile å†™æ“ä½œç”±äºéœ€è¦æ’å…¥å†…å­˜å±éšœæ‰€ä»¥ä¼šæ…¢ä¸€äº›ï¼Œä½†å³ä¾¿å¦‚æ­¤ï¼Œvolatile æ’å…¥å†…å­˜å±éšœçš„å¼€é”€åœ¨å¤§å¤šæ•°åœºæ™¯ä¸‹ä¹Ÿæ¯”é”çš„å¼€é”€è¦ä½ã€‚</p>\n</li>\n<li>\n<p>äº§ç”Ÿé˜»å¡</p>\n<p>synchronized å®ç°çš„é”æœ¬è´¨ä¸Šæ˜¯ä¸€ç§é˜»å¡é”ï¼Œä¹Ÿå°±æ˜¯è¯´å¤šä¸ªçº¿ç¨‹è¦æ’é˜Ÿè®¿é—®åŒä¸€ä¸ªå…±äº«å¯¹è±¡ã€‚</p>\n<p>è€Œ volatile æ˜¯ Java è™šæ‹Ÿæœºæä¾›çš„ä¸€ç§è½»é‡çº§åŒæ­¥æœºåˆ¶ï¼Œä»–æ˜¯åŸºäºå†…å­˜å±éšœå®ç°çš„ã€‚è¯´åˆ°åº•ï¼Œä»–å¹¶ä¸æ˜¯é”ï¼Œæ‰€ä»¥ä»–ä¸ä¼šæœ‰ synchronized å¸¦æ¥çš„é˜»å¡å’Œæ€§èƒ½æŸè€—çš„é—®é¢˜ã€‚</p>\n</li>\n</ol>\n<p>æ­¤å¤–ï¼Œvolatile çš„å¦å¤–ä¸€ä¸ªå¥½å¤„æ˜¯ç¦æ­¢æŒ‡ä»¤é‡æ’ï¼Œåœ¨æœ‰äº›æƒ…å†µä¸‹ï¼Œéœ€è¦ç»“åˆä½¿ç”¨ volatile å’Œ synchronized æ‰èƒ½è¾¾åˆ°æœ€å¤§çš„æ€§èƒ½æ•ˆæœã€‚</p>\n<h3 id=\"çº¿ç¨‹ç›¸å…³æ–¹æ³•\"><a class=\"anchor\" href=\"#çº¿ç¨‹ç›¸å…³æ–¹æ³•\">#</a> çº¿ç¨‹ç›¸å…³æ–¹æ³•</h3>\n<h4 id=\"start-ä¸-run\"><a class=\"anchor\" href=\"#start-ä¸-run\">#</a> start ä¸ run</h4>\n<p>åº”å½“ä½¿ç”¨  <code>Thread</code>  ç±»ä¸­çš„  <code>start()</code>  æ–¹æ³•æ¥å¯åŠ¨ä¸€ä¸ªçº¿ç¨‹ã€‚</p>\n<ol>\n<li>\n<p>start æ–¹æ³•</p>\n<p>Java çº¿ç¨‹é€šè¿‡ start æ–¹æ³•æ¥å¯åŠ¨ï¼Œé€šè¿‡è¿™ä¸ªæ–¹æ³•å®ç°äº†å¤šçº¿ç¨‹çš„è¿è¡Œï¼Œå®ƒæ— é¡»ç­‰å¾… run æ–¹æ³•ä½“ä»£ç æ‰§è¡Œå®Œæ¯•ï¼Œå°±å¯ä»¥ç›´æ¥ç»§ç»­æ‰§è¡Œåç»­ä»£ç ã€‚é€šè¿‡ start æ–¹æ³•æ¥å¯åŠ¨ä¸€ä¸ªçº¿ç¨‹ï¼Œè¿™æ—¶è¿™ä¸ªçº¿ç¨‹å¤„äºå°±ç»ªï¼ˆå¯è¿è¡Œï¼‰çŠ¶æ€ï¼Œå¹¶æ²¡æœ‰çœŸæ­£è¿è¡Œï¼Œä¸€æ—¦è¿™ä¸ªçº¿ç¨‹è·å¾—äº† CPU æ—¶é—´ç‰‡ï¼Œå®ƒæ‰å¼€å§‹æ‰§è¡Œ run æ–¹æ³•ï¼Œè¿™é‡Œçš„ run æ–¹æ³•ç§°ä¸ºçº¿ç¨‹ä½“ï¼Œå®ƒåŒ…å«äº†è¦æ‰§è¡Œçš„è¿™ä¸ªçº¿ç¨‹çš„å†…å®¹ï¼Œrun æ–¹æ³•è¿è¡Œç»“æŸï¼Œçº¿ç¨‹å³ç»ˆæ­¢ã€‚</p>\n</li>\n<li>\n<p>run æ–¹æ³•</p>\n<p>run æ–¹æ³•åªæ˜¯ Thread ç±»ä¸­çš„ä¸€ä¸ªæ™®é€šæ–¹æ³•ï¼Œå¦‚æœç›´æ¥è°ƒç”¨è¯¥æ–¹æ³•ï¼Œç¨‹åºå°±åªä¼šæœ‰ä¸€ä¸ªä¸»çº¿ç¨‹è¿è¡Œï¼Œå…¶æ‰§è¡Œè·¯å¾„åªæœ‰ä¸€æ¡ï¼Œå¹¶ä¸”ç¨‹åºè¦ç­‰å¾… run æ–¹æ³•ä½“æ‰§è¡Œå®Œæ¯•åæ‰ä¼šæ‰§è¡Œåç»­ä»£ç ã€‚å¦‚æœä½¿ç”¨ run æ–¹æ³•æ¥å¯åŠ¨çº¿ç¨‹ï¼Œå®ƒå°±æ˜¯åŒæ­¥æ‰§è¡Œï¼Œè€Œéå¼‚æ­¥ï¼Œå¦‚æœè¿™æ ·å¯åŠ¨ä¸€ä¸ªçº¿ç¨‹ï¼Œé‚£ä¹ˆå°±å¤±å»äº†çº¿ç¨‹çš„æ„ä¹‰ã€‚</p>\n</li>\n</ol>\n<h4 id=\"sleep-ä¸-wait\"><a class=\"anchor\" href=\"#sleep-ä¸-wait\">#</a> sleep ä¸ wait</h4>\n<p>åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸­ï¼Œ <code>Thread.sleep(long)</code>  å’Œ  <code>Thread.wait(long)</code>  éƒ½å¯ä»¥åœ¨ç¨‹åºçš„è°ƒç”¨å¤„å°†çº¿ç¨‹é˜»å¡æŒ‡å®šæ¯«ç§’æ•°å¹¶è¿”å›ï¼Œä½†æ˜¯å®ƒä»¬ä¹‹é—´ä¹Ÿæœ‰å¦‚ä¸‹ä¸åŒï¼š</p>\n<ol>\n<li>\n<p>ä½¿ç”¨é™åˆ¶</p>\n<p>ä½¿ç”¨ sleep æ–¹æ³•å¯ä»¥è®©è®©å½“å‰çº¿ç¨‹ä¼‘çœ ï¼Œæ—¶é—´ä¸€åˆ°å½“å‰çº¿ç¨‹ç»§ç»­å¾€ä¸‹æ‰§è¡Œï¼Œåœ¨ä»»ä½•åœ°æ–¹éƒ½èƒ½ä½¿ç”¨ï¼Œä½†éœ€è¦æ•è·  <code>InterruptedException</code>  å¼‚å¸¸ã€‚</p>\n<p>è€Œä½¿ç”¨ wait æ–¹æ³•åˆ™å¿…é¡»æ”¾åœ¨ synchronized å—é‡Œé¢ï¼ŒåŒæ ·éœ€è¦æ•è· InterruptedException å¼‚å¸¸ï¼Œå¹¶ä¸”éœ€è¦è·å–å¯¹è±¡çš„é”ã€‚</p>\n</li>\n<li>\n<p>ä½¿ç”¨åœºæ™¯</p>\n<p>sleep ä¸€èˆ¬ç”¨äºå½“å‰çº¿ç¨‹ä¼‘çœ ï¼Œæˆ–è€…è½®å¾ªæš‚åœæ“ä½œï¼Œwait åˆ™å¤šç”¨äºå¤šçº¿ç¨‹ä¹‹é—´çš„é€šä¿¡ã€‚</p>\n</li>\n<li>\n<p>æ‰€å±ç±»</p>\n<p>sleep æ˜¯ Thread ç±»çš„é™æ€æœ¬åœ°æ–¹æ³•ï¼Œwait åˆ™æ˜¯ Object ç±»çš„æœ¬åœ°æ–¹æ³•ã€‚</p>\n<blockquote>\n<p>sleep æ˜¯è®©å½“å‰çº¿ç¨‹ä¼‘çœ ï¼Œä¸æ¶‰åŠåˆ°å¯¹è±¡ç±»ï¼Œä¹Ÿä¸éœ€è¦è·å¾—å¯¹è±¡çš„é”ï¼Œæ‰€ä»¥æ˜¯çº¿ç¨‹ç±»çš„æ–¹æ³•ã€‚wait æ˜¯è®©è·å¾—å¯¹è±¡é”çš„çº¿ç¨‹å®ç°ç­‰å¾…ï¼Œå‰ææ˜¯è¦æ¥šè·å¾—å¯¹è±¡çš„é”ï¼Œæ‰€ä»¥æ˜¯ç±»çš„æ–¹æ³•ã€‚</p>\n</blockquote>\n</li>\n<li>\n<p>é‡Šæ”¾é”</p>\n<p>wait å¯ä»¥é‡Šæ”¾å½“å‰çº¿ç¨‹å¯¹ lock å¯¹è±¡é”çš„æŒæœ‰ï¼Œè€Œ sleep åˆ™ä¸ä¼šã€‚</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token class-name\">Object</span> lock <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Object</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">synchronized</span> <span class=\"token punctuation\">(</span>lock<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">try</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        lock<span class=\"token punctuation\">.</span><span class=\"token function\">wait</span><span class=\"token punctuation\">(</span><span class=\"token number\">3000L</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token class-name\">Thread</span><span class=\"token punctuation\">.</span><span class=\"token function\">sleep</span><span class=\"token punctuation\">(</span><span class=\"token number\">2000L</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">InterruptedException</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        e<span class=\"token punctuation\">.</span><span class=\"token function\">printStackTrace</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure></li>\n<li>\n<p>çº¿ç¨‹åˆ‡æ¢</p>\n<p>sleep ä¼šè®©å‡º CPU æ‰§è¡Œæ—¶é—´ä¸”å¼ºåˆ¶ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Œè€Œ wait åˆ™ä¸ä¸€å®šï¼Œwait åå¯èƒ½è¿˜æ˜¯æœ‰æœºä¼šé‡æ–°ç«äº‰åˆ°é”ç»§ç»­æ‰§è¡Œçš„ã€‚</p>\n</li>\n</ol>\n<h4 id=\"notify-ä¸-notifyall\"><a class=\"anchor\" href=\"#notify-ä¸-notifyall\">#</a> notify ä¸ notifyAll</h4>\n<p><code>notify()</code>  å’Œ  <code>notifyAll()</code>  æ–¹æ³•éƒ½æ˜¯ç”¨æ¥å”¤é†’  <code>wait</code>  çš„çº¿ç¨‹ã€‚</p>\n<ul>\n<li>å¦‚æœçº¿ç¨‹è°ƒç”¨äº†å¯¹è±¡çš„ wait æ–¹æ³•ï¼Œé‚£ä¹ˆçº¿ç¨‹ä¾¿ä¼šå¤„äºè¯¥å¯¹è±¡çš„ç­‰å¾…æ± ä¸­ï¼Œç­‰å¾…æ± ä¸­çš„çº¿ç¨‹ä¸ä¼šå»ç«äº‰è¯¥å¯¹è±¡çš„é”ã€‚</li>\n<li>å½“æœ‰çº¿ç¨‹è°ƒç”¨äº†å¯¹è±¡çš„ notifyAll æ–¹æ³•æˆ– notify æ–¹æ³•ï¼Œè¢«å”¤é†’çš„çš„çº¿ç¨‹ä¾¿ä¼šè¿›å…¥è¯¥å¯¹è±¡çš„é”æ± ä¸­ï¼Œé”æ± ä¸­çš„çº¿ç¨‹ä¼šå»ç«äº‰è¯¥å¯¹è±¡é”ã€‚</li>\n<li>ä¼˜å…ˆçº§é«˜çš„çº¿ç¨‹ç«äº‰åˆ°å¯¹è±¡é”çš„æ¦‚ç‡å¤§ï¼Œå‡è‹¥æŸçº¿ç¨‹æ²¡æœ‰ç«äº‰åˆ°è¯¥å¯¹è±¡é”ï¼Œå®ƒè¿˜ä¼šç•™åœ¨é”æ± ä¸­ï¼Œå”¯æœ‰çº¿ç¨‹å†æ¬¡è°ƒç”¨ wait æ–¹æ³•ï¼Œå®ƒæ‰ä¼šé‡æ–°å›åˆ°ç­‰å¾…æ± ä¸­ã€‚</li>\n</ul>\n<p>æ‰€è°“å”¤é†’çº¿ç¨‹ï¼Œå…¶å®å¯ä»¥è¯´æ˜¯å°†çº¿ç¨‹ç”±ç­‰å¾…æ± ç§»åŠ¨åˆ°é”æ± ï¼Œnotify åªä¼šå”¤é†’ï¼ˆç§»åŠ¨ï¼‰æŸä¸€ä¸ªçº¿ç¨‹ï¼ˆå…·ä½“æ˜¯å“ªä¸ªç”± JVM å†³å®šï¼‰ï¼ŒnotifyAll åˆ™ä¼šå”¤é†’ï¼ˆç§»åŠ¨ï¼‰æ‰€æœ‰ç­‰å¾…çš„çº¿ç¨‹ã€‚</p>\n<blockquote>\n<p>â€œnotify å¯èƒ½ä¼šå¯¼è‡´æ­»é”ï¼Œè€Œ notifyAll åˆ™ä¸ä¼šã€‚â€ æ³¨æ„ï¼Œè¿™å¥è¯å¹¶ä¸å®Œå…¨å‡†ç¡®ï¼Œnotify å¯èƒ½å¯¼è‡´çš„é—®é¢˜å’Œæ­»é”ååˆ†ç›¸ä¼¼ï¼Œå¹¶éçœŸæ­£æ„ä¹‰ä¸Šçš„æ­»é”ã€‚</p>\n</blockquote>\n<p>notify å¯èƒ½ä¼šå¯¼è‡´çš„é—®é¢˜ï¼ˆå¯ç§°å…¶ä¸ºç”Ÿäº§è€…æ¶ˆè´¹è€…é—®é¢˜ï¼‰ï¼š</p>\n<p>è¿™é‡Œå‡å®šæœ‰å‡ ç§å¯¹è±¡ï¼Œåˆ†åˆ«æ˜¯ï¼š</p>\n<ul>\n<li>ç”Ÿäº§è€…ï¼šè´Ÿè´£ç”Ÿäº§èµ„æºï¼Œç”Ÿäº§çš„èµ„æºå°†æ”¾å…¥åˆ°å…¬å…±èµ„æºæ± ä¸­ã€‚</li>\n<li>æ¶ˆè´¹è€…ï¼šè´Ÿè´£æ¶ˆè´¹èµ„æºï¼Œæ¶ˆè´¹çš„èµ„æºå°†ä»å…¬å…±èµ„æºæ± ä¸­ç§»å‡ºã€‚</li>\n<li>å…¬å…±èµ„æºæ± ï¼šæœ‰é™å®¹é‡ï¼Œè´Ÿè´£ä¸´æ—¶å­˜æ”¾èµ„æºã€‚</li>\n<li>ç­‰å¾…æ± ï¼šç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…çš„ä¸´æ—¶ç­‰å¾…åŒºã€‚</li>\n</ul>\n<p>å½“æ¶ˆè´¹é€Ÿåº¦å¤§äºç”Ÿäº§é€Ÿåº¦æ—¶ï¼Œå…¬å…±èµ„æºæ± ä¸­çš„èµ„æºå¾ˆå¿«å°±ä¼šè¢«æ¶ˆè€—ç©ºï¼Œæ­¤æ—¶æ¶ˆè´¹è€…è‹¥æ˜¯å‘ç°å…¬å…±èµ„æºæ± ä¸­æ²¡æœ‰èµ„æºï¼Œæ¶ˆè´¹è€…å°±ä¼šè¿›å…¥ç­‰å¾…æ± ä¸­ã€‚åŒæ ·ï¼Œå½“ç”Ÿäº§é€Ÿåº¦å¤§äºæ¶ˆè´¹é€Ÿåº¦æ—¶ï¼Œå…¬å…±èµ„æºæ± ä¸­çš„å®¹é‡å¾ˆå¿«å°±ä¼šè¢«å æ»¡ï¼Œæ­¤æ—¶ç”Ÿäº§è€…è‹¥æ˜¯å‘å°å…¬å…±èµ„æºæ± ä¸­æ²¡æœ‰å¯ç”¨ç©ºé—´ï¼Œç”Ÿäº§è€…å°±ä¼šè¿›å…¥ç­‰å¾…æ± ä¸­ã€‚</p>\n<p>å¦‚æœä»¥ä¸Šä¸¤ç§æƒ…å†µéƒ½å…ˆåå‡ºç°ï¼Œé‚£ä¹ˆï¼Œç­‰å¾…æ± ä¸­å°±ä¼šåŒæ—¶å­˜åœ¨ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…ã€‚</p>\n<p>å½“å…¬å…±èµ„æºæ± ä¸ºç©ºæ—¶ï¼Œç”Ÿäº§è€…ç”Ÿäº§å‡ºæ–°çš„èµ„æºï¼Œå°±ä¼šé€šçŸ¥ç­‰å¾…æ± çš„å¯¹è±¡ç»§ç»­æ¶ˆè´¹ï¼Œä½†æ­¤æ—¶ç­‰å¾…æ± ä¸­æ—¢æœ‰ç”Ÿäº§è€…ä¹Ÿæœ‰æ¶ˆè´¹è€…ï¼Œå¦‚æœä½¿ç”¨ notify é€šçŸ¥ï¼Œé‚£ä¹ˆè¢«å”¤é†’çš„å¯¹è±¡å¯èƒ½ä»ç„¶æ˜¯ç”Ÿäº§è€…ï¼Œå¦‚æœå¤šæ¬¡å”¤é†’çš„éƒ½æ˜¯ç”Ÿäº§è€…ï¼Œæœ€ç»ˆå¯¼è‡´ç”Ÿäº§è€…è¿‡å‰©ï¼Œå…¬å…±èµ„æºæ± å æ»¡ï¼Œé‚£ä¹ˆï¼Œæ­¤æ—¶æ‰€æœ‰ç”Ÿäº§è€…ä¹Ÿå°†è¿›å…¥ç­‰å¾…æ± ã€‚è¿™æ—¶çš„æƒ…å†µå°±æ˜¯ï¼šå…¬å…±èµ„æºæ± å æ»¡ï¼Œä½†æ— äººæ¶ˆè´¹ï¼Œç”Ÿäº§è€…å› ä¸ºèµ„æºæ± å æ»¡ï¼Œä¹Ÿæ— æ³•ç»§ç»­ç”Ÿäº§ã€‚</p>\n<p>åŒç†ï¼Œå½“å…¬å…±èµ„æºæ± å æ»¡æ—¶ï¼Œæ¶ˆè´¹è€…æ¶ˆè´¹ä¸€å®šèµ„æºåï¼Œèµ„æºæ± å‡ºç°ç©ºé—²ï¼Œæƒ³è¦é€šçŸ¥ç­‰å¾…æ± çš„ç”Ÿäº§è€…ç»§ç»­ç”Ÿäº§ï¼Œä½†å¦‚æœæ¥æ”¶åˆ°é€šçŸ¥çš„å§‹ç»ˆéƒ½æ˜¯æ¶ˆè´¹è€…ï¼Œé‚£ä¹ˆï¼Œå…¬å…±èµ„æºæ± æœ€ç»ˆå°†è¢«è€—ç©ºï¼Œæ­¤æ—¶ç­‰å¾…æ± çš„ç”Ÿäº§è€…æ²¡æœ‰è¢«é€šçŸ¥ç»§ç»­ç”Ÿäº§ï¼Œæ¶ˆè´¹è€…åˆæ²¡æœ‰å¯ç»§ç»­æ¶ˆè´¹çš„èµ„æºï¼Œé‚£ä¹ˆæ­¤æ—¶å°±å‡ºç°äº†è¿™ç§æƒ…å†µï¼šå…¬å…±èµ„æºæ± ä¸ºç©ºï¼Œä½†æ— äººç”Ÿäº§ï¼Œæ¶ˆè´¹è€…å› ä¸ºèµ„æºæ± ä¸ºç©ºï¼Œä¹Ÿæ— æ³•ç»§ç»­æ¶ˆè´¹ã€‚</p>\n<p>å‡ºç°ä¸Šé¢çš„é—®é¢˜æ˜¯å› ä¸ºä½¿ç”¨äº† notify é€šçŸ¥ï¼Œå®ƒä¸ä¼šè¯†åˆ«çº¿ç¨‹ç±»å‹ï¼Œå¹¶ä¸”åªä¼šå”¤é†’æŸä¸€ä¸ªçº¿ç¨‹ï¼Œä½†å¦‚æœä½¿ç”¨ notifyAll æ¥è¿›è¡Œé€šçŸ¥ï¼Œå°†ä¼šå”¤é†’æ‰€æœ‰çº¿ç¨‹ï¼Œé‚£ä¹ˆï¼Œæ— è®ºæ˜¯åœ¨èµ„æºå æ»¡è¿˜æ˜¯èµ„æºè€—ç©ºå•æƒ…å†µä¸‹ï¼Œéƒ½ä¼šæœ‰æ–°å”¤é†’çš„ç”Ÿäº§è€…æˆ–æ¶ˆè´¹è€…è¿›è¡Œå¤„ç†ï¼Œè€Œä¸ä¼šå¯¼è‡´ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…åŒæ—¶ç½¢å·¥çš„æƒ…å†µã€‚</p>\n<p>å¦‚ä½•è§£å†³ç”Ÿäº§è€…ä¸æ¶ˆè´¹è€…é—®é¢˜ï¼Ÿå¯ä»¥å‚è€ƒ<span class=\"exturl\" data-url=\"aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xkeDE5OTgwMTA4L2FydGljbGUvZGV0YWlscy84MTcwNzc1MQ==\">è¿™ç¯‡æ–‡ç« </span>ã€‚</p>\n<h3 id=\"threadlocal\"><a class=\"anchor\" href=\"#threadlocal\">#</a> ThreadLocal</h3>\n<p><code>ThreadLocal</code>  è¢«ç§°ä¸ºçº¿ç¨‹å˜é‡ï¼Œæ„æ€æ˜¯ ThreadLocal ä¸­å¡«å……çš„å˜é‡å±äºå½“å‰çº¿ç¨‹ï¼Œè¯¥å˜é‡å¯¹å…¶ä»–çº¿ç¨‹è€Œè¨€æ˜¯éš”ç¦»çš„ï¼Œä¹Ÿå°±æ˜¯è¯´è¯¥å˜é‡æ˜¯å½“å‰çº¿ç¨‹ç‹¬æœ‰çš„å˜é‡ã€‚ThreadLocal ä¸ºå˜é‡åœ¨æ¯ä¸ªçº¿ç¨‹ä¸­éƒ½åˆ›å»ºäº†ä¸€ä¸ªå‰¯æœ¬ï¼Œé‚£ä¹ˆæ¯ä¸ªçº¿ç¨‹å¯ä»¥è®¿é—®è‡ªå·±å†…éƒ¨çš„å‰¯æœ¬å˜é‡ã€‚</p>\n<p>å¯¹äºåŒä¸€ä¸ª ThreadLocal æ‰€åŒ…å«çš„å¯¹è±¡ï¼Œåœ¨ä¸åŒçš„çº¿ç¨‹ä¸­æœ‰ä¸åŒçš„å‰¯æœ¬ï¼Œä¸”è¯¥å‰¯æœ¬åªèƒ½ç”±å½“å‰çº¿ç¨‹ä½¿ç”¨ï¼Œå¤šçº¿ç¨‹ä¹‹é—´å¹¶ä¸å…±äº«ã€‚</p>\n<p>ThreadLocal æä¾›äº†çº¿ç¨‹æœ¬åœ°çš„å®ä¾‹ã€‚å®ƒä¸æ™®é€šå˜é‡çš„åŒºåˆ«åœ¨äºï¼Œæ¯ä¸ªä½¿ç”¨è¯¥å˜é‡çš„çº¿ç¨‹éƒ½ä¼šåˆå§‹åŒ–ä¸€ä¸ªå®Œå…¨ç‹¬ç«‹çš„å®ä¾‹å‰¯æœ¬ã€‚ThreadLocal å˜é‡é€šå¸¸ä½¿ç”¨  <code>private static</code>  è¿›è¡Œä¿®é¥°ã€‚å½“ä¸€ä¸ªçº¿ç¨‹ç»“æŸæ—¶ï¼Œå®ƒæ‰€ä½¿ç”¨çš„æ‰€æœ‰ ThreadLocal ç›¸å¯¹çš„å®ä¾‹å‰¯æœ¬éƒ½å¯è¢«å›æ”¶ã€‚</p>\n<p>æ€»çš„æ¥è¯´ï¼ŒThreadLocal é€‚ç”¨äºå˜é‡åœ¨çº¿ç¨‹é—´éš”ç¦»è€Œåœ¨æ–¹æ³•æˆ–ç±»é—´å…±äº«çš„åœºæ™¯ã€‚</p>\n<h4 id=\"threadlocal-ä¸-synchronized-åŒºåˆ«\"><a class=\"anchor\" href=\"#threadlocal-ä¸-synchronized-åŒºåˆ«\">#</a> ThreadLocal ä¸ synchronized åŒºåˆ«</h4>\n<p><code>ThreadLocal&lt;T&gt;</code>  å…¶å®æ˜¯ä¸çº¿ç¨‹ç»‘å®šçš„ä¸€ä¸ªå˜é‡ã€‚ThreadLocal å’Œ Synchonized éƒ½ç”¨äºè§£å†³å¤šçº¿ç¨‹å¹¶å‘è®¿é—®ï¼Œä½†æ˜¯å®ƒä»¬ä¹‹é—´å´æœ‰æœ¬è´¨ä¸Šçš„åŒºåˆ«ï¼š</p>\n<ol>\n<li>Synchronized ç”¨äºçº¿ç¨‹é—´çš„æ•°æ®å…±äº«ï¼Œè€Œ ThreadLocal åˆ™<ins>ç”¨äºçº¿ç¨‹é—´çš„æ•°æ®éš”ç¦»</ins>ã€‚</li>\n<li>Synchronized æ˜¯åˆ©ç”¨é”çš„æœºåˆ¶ï¼Œä½¿å˜é‡æˆ–ä»£ç å—åœ¨æŸä¸€æ—¶è¯¥åªèƒ½è¢«ä¸€ä¸ªçº¿ç¨‹è®¿é—®ï¼Œè€Œ ThreadLocal ä¸ºæ¯ä¸€ä¸ªçº¿ç¨‹éƒ½æä¾›äº†å˜é‡çš„å‰¯æœ¬ï¼Œä½¿å¾—æ¯ä¸ªçº¿ç¨‹åœ¨æŸä¸€æ—¶é—´è®¿é—®åˆ°çš„å¹¶ä¸æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼Œè¿™æ ·å°±éš”ç¦»äº†å¤šä¸ªçº¿ç¨‹å¯¹æ•°æ®çš„æ•°æ®å…±äº«ã€‚</li>\n</ol>\n<p>å‘ ThreadLocal å­˜å‚¨æ•°æ®ï¼Œå®é™…ä¸Šæ˜¯å­˜å‚¨åœ¨å®ƒå†…éƒ¨çš„ Map ä¸­ï¼Œå¹¶ä¸” ThreadLocal ä¼šå°†è¿™ä¸ª Map å…³è”åˆ°å½“å‰çº¿ç¨‹ã€‚</p>\n<h4 id=\"threadlocal-çš„ä½¿ç”¨\"><a class=\"anchor\" href=\"#threadlocal-çš„ä½¿ç”¨\">#</a> ThreadLocal çš„ä½¿ç”¨</h4>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">ThreadLocalDemo</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token keyword\">static</span> <span class=\"token class-name\">ThreadLocal</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">></span></span> threadLocal <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ThreadLocal</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">doRemove</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> str<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>str <span class=\"token operator\">+</span> <span class=\"token string\">\" remove \"</span> <span class=\"token operator\">+</span> threadLocal<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">\" from ThreadLocal.\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        threadLocal<span class=\"token punctuation\">.</span><span class=\"token function\">remove</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">InterruptedException</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token keyword\">new</span> <span class=\"token class-name\">Thread</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Set vlaueA into ThreadLocal.\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>            <span class=\"token class-name\">ThreadLocalDemo</span><span class=\"token punctuation\">.</span>threadLocal<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"value A\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"A\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        <span class=\"token class-name\">Thread</span><span class=\"token punctuation\">.</span><span class=\"token function\">sleep</span><span class=\"token punctuation\">(</span><span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        <span class=\"token keyword\">new</span> <span class=\"token class-name\">Thread</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Set vlaueB into ThreadLocal.\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>            <span class=\"token class-name\">ThreadLocalDemo</span><span class=\"token punctuation\">.</span>threadLocal<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"value B\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>            <span class=\"token function\">doRemove</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Thread-B\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ThreadLocal after remove: \"</span> <span class=\"token operator\">+</span> threadLocal<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"B\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre></pre></td></tr><tr><td data-num=\"27\"></td><td><pre><span class=\"token comment\">// æ‰§è¡Œç»“æœï¼š</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre><span class=\"token comment\">// Set vlaueA into ThreadLocal.</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre><span class=\"token comment\">// Set vlaueB into ThreadLocal.</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre><span class=\"token comment\">// Thread-B remove value B from ThreadLocal.</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre><span class=\"token comment\">// ThreadLocal after remove: null</span></pre></td></tr></table></figure><p>ä»ç¤ºä¾‹ä¸­å¯ä»¥è§‚å¯Ÿåˆ°ï¼Œä¸¤ä¸ªçº¿ç¨‹ä¹‹é—´åˆ†åˆ«ä¿ç•™æœ‰å„è‡ªçº¿ç¨‹çš„ ThreadLocal å‰¯æœ¬ï¼Œçº¿ç¨‹ä¹‹é—´å¯¹ ThreadLocal å‰¯æœ¬çš„ä¿®æ”¹äº’ä¸å½±å“ã€‚</p>\n<h4 id=\"threadlocal-åŸç†\"><a class=\"anchor\" href=\"#threadlocal-åŸç†\">#</a> ThreadLocal åŸç†</h4>\n<p>å¯ä»¥é€šè¿‡æŸ¥çœ‹ ThreadLoal ç›¸å…³æ–¹æ³•å½“æºç æ¥ç†è§£å®ƒçš„å®ç°åŸç†ï¼š</p>\n<ol>\n<li>\n<p>ThreadLocal çš„ set æ–¹æ³•</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// ThreadLocal.set () æºç </span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">set</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">T</span> value<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token class-name\">Thread</span> t <span class=\"token operator\">=</span> <span class=\"token class-name\">Thread</span><span class=\"token punctuation\">.</span><span class=\"token function\">currentThread</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token class-name\">ThreadLocalMap</span> map <span class=\"token operator\">=</span> <span class=\"token function\">getMap</span><span class=\"token punctuation\">(</span>t<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>map <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        map<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">else</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token function\">createMap</span><span class=\"token punctuation\">(</span>t<span class=\"token punctuation\">,</span> value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token class-name\">ThreadLocalMap</span> <span class=\"token function\">getMap</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Thread</span> t<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token keyword\">return</span> t<span class=\"token punctuation\">.</span>threadLocals<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token keyword\">void</span> <span class=\"token function\">createMap</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Thread</span> t<span class=\"token punctuation\">,</span> <span class=\"token class-name\">T</span> firstValue<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    t<span class=\"token punctuation\">.</span>threadLocals <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ThreadLocalMap</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> firstValue<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°ï¼ŒThreadLocal çš„ set æ–¹æ³•ï¼Œå…¶å†…éƒ¨ä¼šåˆ›å»ºä¸€ä¸ª  <code>ThreadLocalMap</code>  å¯¹è±¡ï¼ˆæˆ–ä»å½“å‰çº¿ç¨‹è·å–ï¼‰ï¼Œå¹¶å°†å½“å‰çº¿ç¨‹çš„ä½œä¸º key ï¼Œå°†ä¼ å…¥çš„å†…å®¹ä½œä¸º value è¿›è¡Œå­˜å‚¨ã€‚</p>\n</li>\n<li>\n<p>ThreadLocal çš„ get æ–¹æ³•</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// ThreadLocal.get () æºç </span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token class-name\">T</span> <span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token class-name\">Thread</span> t <span class=\"token operator\">=</span> <span class=\"token class-name\">Thread</span><span class=\"token punctuation\">.</span><span class=\"token function\">currentThread</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token class-name\">ThreadLocalMap</span> map <span class=\"token operator\">=</span> <span class=\"token function\">getMap</span><span class=\"token punctuation\">(</span>t<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>map <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token class-name\">ThreadLocalMap<span class=\"token punctuation\">.</span>Entry</span> e <span class=\"token operator\">=</span> map<span class=\"token punctuation\">.</span><span class=\"token function\">getEntry</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>e <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>            <span class=\"token annotation punctuation\">@SuppressWarnings</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"unchecked\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>            <span class=\"token class-name\">T</span> result <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">T</span><span class=\"token punctuation\">)</span>e<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>            <span class=\"token keyword\">return</span> result<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token function\">setInitialValue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token keyword\">private</span> <span class=\"token class-name\">T</span> <span class=\"token function\">setInitialValue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token class-name\">T</span> value <span class=\"token operator\">=</span> <span class=\"token function\">initialValue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token class-name\">Thread</span> t <span class=\"token operator\">=</span> <span class=\"token class-name\">Thread</span><span class=\"token punctuation\">.</span><span class=\"token function\">currentThread</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token class-name\">ThreadLocalMap</span> map <span class=\"token operator\">=</span> <span class=\"token function\">getMap</span><span class=\"token punctuation\">(</span>t<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>map <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>        map<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    <span class=\"token keyword\">else</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>        <span class=\"token function\">createMap</span><span class=\"token punctuation\">(</span>t<span class=\"token punctuation\">,</span> value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>    <span class=\"token keyword\">return</span> value<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>ä»è¿™é‡Œå¯ä»¥çœ‹åˆ°ï¼ŒThreadLocal çš„ get æ–¹æ³•ï¼Œå®é™…ä¸Šæ˜¯ä» ThreadLocal å†…éƒ¨çš„ ThreadLocalMap ä¸­æ ¹æ®å½“å‰çº¿ç¨‹ä½œä¸º key è¿›è¡Œå–å€¼ã€‚</p>\n</li>\n<li>\n<p>ThreadLocal çš„ remove æ–¹æ³•</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// ThreadLocal.remove () æºç </span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">remove</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token class-name\">ThreadLocalMap</span> m <span class=\"token operator\">=</span> <span class=\"token function\">getMap</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Thread</span><span class=\"token punctuation\">.</span><span class=\"token function\">currentThread</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>m <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        m<span class=\"token punctuation\">.</span><span class=\"token function\">remove</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>ThreadLocal çš„ remove æ–¹æ³•ï¼Œä¹Ÿæ˜¯ç›´æ¥æ ¹æ®å½“å‰çº¿ç¨‹åˆ é™¤å…¶å¯¹åº”åœ¨ ThreadLocalMap ä¸­çš„æ•°æ®ã€‚</p>\n</li>\n</ol>\n<blockquote>\n<p>ThreadLocal çš„æºç å¾ˆå®¹æ˜“è¯»æ‡‚ï¼Œå¦‚æœæ—¶é—´è¶³å¤Ÿï¼Œæ¨èç›´æ¥è¯»ä¸€ä¸‹æºç ï¼Œæ›´å®¹æ˜“ç†è§£ã€‚</p>\n</blockquote>\n<h4 id=\"threadlocal-åº•å±‚æ•°æ®ç»“æ„\"><a class=\"anchor\" href=\"#threadlocal-åº•å±‚æ•°æ®ç»“æ„\">#</a> ThreadLocal åº•å±‚æ•°æ®ç»“æ„</h4>\n<p>ä¸Šé¢æåˆ°ï¼ŒThreadLocal æœ¬è´¨ä¸Šæ˜¯å°†å½“å‰çº¿ç¨‹ä½œä¸º key ï¼Œä¼ å…¥çš„å€¼ä½œä¸º value å­˜å‚¨åœ¨ä¸€ä¸ª ThreadLocalMap ä¸­ï¼Œè€Œ ThreadLocalMap çš„éƒ¨åˆ†æºç å¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// ThreadLocalMap éƒ¨åˆ†æºç å†…å®¹</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">private</span> <span class=\"token class-name\">Entry</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> table<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">static</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">ThreadLocalMap</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">static</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Entry</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">WeakReference</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">ThreadLocal</span><span class=\"token punctuation\">&lt;</span><span class=\"token operator\">?</span><span class=\"token punctuation\">></span><span class=\"token punctuation\">></span></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token comment\">/** The value associated with this ThreadLocal. */</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token class-name\">Object</span> value<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token class-name\">Entry</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">ThreadLocal</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token operator\">?</span><span class=\"token punctuation\">></span></span> k<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Object</span> v<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>            <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>k<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>            value <span class=\"token operator\">=</span> v<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token class-name\">ThreadLocalMap</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">ThreadLocal</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token operator\">?</span><span class=\"token punctuation\">></span></span> firstKey<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Object</span> firstValue<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    table <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Entry</span><span class=\"token punctuation\">[</span>INITIAL_CAPACITY<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> firstKey<span class=\"token punctuation\">.</span>threadLocalHashCode <span class=\"token operator\">&amp;</span> <span class=\"token punctuation\">(</span>INITIAL_CAPACITY <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    table<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Entry</span><span class=\"token punctuation\">(</span>firstKey<span class=\"token punctuation\">,</span> firstValue<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    size <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    <span class=\"token function\">setThreshold</span><span class=\"token punctuation\">(</span>INITIAL_CAPACITY<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°ï¼ŒThreadLocalMap å†…éƒ¨ä½¿ç”¨çš„æ˜¯ä¸€ä¸ªç»§æ‰¿äº WeakReference çš„ Entry æ¥å­˜å‚¨æ•°æ®çš„ã€‚</p>\n<h4 id=\"threadlocal-å¯¼è‡´å†…å­˜æ³„éœ²\"><a class=\"anchor\" href=\"#threadlocal-å¯¼è‡´å†…å­˜æ³„éœ²\">#</a> ThreadLocal å¯¼è‡´å†…å­˜æ³„éœ²</h4>\n<p>å¦‚æœ ThreadLocal ä½¿ç”¨ä¸å½“ï¼Œå¯èƒ½ä¼šå¯¼è‡´å†…å­˜æ³„éœ²ã€‚</p>\n<p>ThreadLocalMap æ˜¯ ThreadLocal çš„å†…éƒ¨ç±»ï¼Œå®ƒæ²¡æœ‰å®ç° Map æ¥å£ï¼Œè€Œæ˜¯ç”¨ç‹¬ç«‹çš„æ–¹å¼å®ç°äº† Map çš„åŠŸèƒ½ï¼Œå…¶å†…éƒ¨çš„ Entry ä¹Ÿç‹¬ç«‹å®ç°ã€‚</p>\n<p>å’Œ HashMap çš„æœ€å¤§çš„ä¸åŒåœ¨äºï¼ŒThreadLocalMap ç»“æ„éå¸¸ç®€å•ï¼Œæ²¡æœ‰ next å¼•ç”¨ï¼Œä¹Ÿå°±æ˜¯è¯´ ThreadLocalMap ä¸­è§£å†³ Hash å†²çªçš„æ–¹å¼å¹¶éé“¾è¡¨çš„æ–¹å¼ï¼Œè€Œæ˜¯é‡‡ç”¨<strong>çº¿æ€§æ¢æµ‹çš„æ–¹å¼</strong>ã€‚åœ¨ ThreadLocalMap ä¸­ï¼Œè™½ç„¶ä¹Ÿæ˜¯ç”¨ Entry æ¥ä¿å­˜ç»“æ„æ•°æ®ï¼Œä½†æ˜¯è¿™ä¸ª Entry ä¸­ key åªèƒ½æ˜¯ ThreadLocal å¯¹è±¡ã€‚è€Œè¿™ä¸ª Entry ç»§æ‰¿è‡ª  <code>WeakReference</code>  ï¼ˆå¼±å¼•ç”¨ï¼Œç”Ÿå‘½å‘¨æœŸåªèƒ½å­˜æ´»åˆ°ä¸‹ä¸€æ¬¡ GC å‰ï¼‰ï¼Œä½†æ˜¯åªæœ‰ key æ˜¯å¼±å¼•ç”¨ï¼Œè€Œ value æ˜¯å¼ºå¼•ç”¨ï¼Œè¿™å°±å¯¼è‡´ ThreadLocal åœ¨æ²¡æœ‰å¤–éƒ¨å¯¹è±¡å¼ºå¼•ç”¨æ—¶ï¼Œå½“å‘ç”Ÿ GC æ—¶ï¼Œä½¿ç”¨å¼±å¼•ç”¨çš„ key ä¼šè¢«å›æ”¶ï¼Œè€Œä½¿ç”¨å¼ºå¼•ç”¨çš„ value åˆ™ä¼šå­˜æ´»ä¸‹æ¥ã€‚</p>\n<p>å½“çº¿ç¨‹æ²¡æœ‰ç»“æŸï¼Œä½†æ˜¯ ThreadLocal å·²è¢«å›æ”¶ï¼Œå°±å¯èƒ½å¯¼è‡´çº¿ç¨‹ä¸­å­˜åœ¨  <code>ThreadLocalMap&lt;null, Object&gt;</code>  çš„é”®å€¼å¯¹ï¼Œä»è€Œé€ æˆå†…å­˜æ³„éœ²ã€‚</p>\n<p>ç®€å•æ¥è¯´ï¼ŒThreadLocal å¯èƒ½å¯¼è‡´å†…å­˜æ³„éœ²ï¼Œæ˜¯å› ä¸º ThreadLocalMap çš„ key ä½¿ç”¨äº†å¼±å¼•ç”¨ï¼Œè€Œ value ä½¿ç”¨åˆ°æ˜¯å¼ºå¼•ç”¨ã€‚</p>\n<p>ä½¿ç”¨ ThreadLocal æ—¶ï¼Œä¸ºäº†é˜²æ­¢å†…å­˜æ³„éœ²ï¼Œé€šå¸¸æœ‰ä¸¤ç§æ‰‹æ®µï¼š</p>\n<ol>\n<li>ä½¿ç”¨å®Œçº¿ç¨‹å…±äº«å˜é‡åï¼Œæ˜¾ç¤ºè°ƒç”¨  <code>ThreadLocalMap.remove()</code>  æ–¹æ³•æ¥æ¸…é™¤çº¿ç¨‹å…±äº«å˜é‡ã€‚</li>\n<li>JDK å»ºè®® ThreadLocal å®šä¹‰ä¸º  <code>private static</code> ï¼Œè¿™æ · ThreadLocal çš„å¼±å¼•ç”¨é—®é¢˜åˆ™ä¸å­˜åœ¨äº†ã€‚</li>\n</ol>\n<h4 id=\"threadlocal-å¸¸è§ä½¿ç”¨åœºæ™¯\"><a class=\"anchor\" href=\"#threadlocal-å¸¸è§ä½¿ç”¨åœºæ™¯\">#</a> ThreadLocal å¸¸è§ä½¿ç”¨åœºæ™¯</h4>\n<p>ThreadLocal é€‚ç”¨äºå¦‚ä¸‹ä¸¤ç§åœºæ™¯ï¼š</p>\n<ol>\n<li>æ¯ä¸ªçº¿ç¨‹éœ€è¦æœ‰è‡ªå·±å•ç‹¬çš„å®ä¾‹ã€‚</li>\n<li>å®ä¾‹éœ€è¦åœ¨å¤šä¸ªæ–¹æ³•ä¸­å…±äº«ï¼Œä½†ä¸å¸Œæœ›è¢«å¤šçº¿ç¨‹å…±äº«ã€‚</li>\n</ol>\n<p><strong>åœºæ™¯ä¸€ï¼šå­˜å‚¨ç”¨æˆ· Session</strong></p>\n<p><strong>åœºæ™¯äºŒï¼šæ•°æ®åº“è¿æ¥ï¼Œå¤„ç†æ•°æ®åº“äº‹åŠ¡</strong></p>\n<p><strong>åœºæ™¯ä¸‰ï¼šæ•°æ®è·¨å±‚ä¼ é€’</strong></p>\n<p><strong>åœºæ™¯å››ï¼šSpring ä½¿ç”¨ ThreadLocal è§£å†³çº¿ç¨‹å®‰å…¨é—®é¢˜</strong></p>\n<p>Spring é‡‡ç”¨ Threadlocal çš„æ–¹å¼ï¼Œæ¥ä¿è¯å•ä¸ªçº¿ç¨‹ä¸­çš„æ•°æ®åº“æ“ä½œä½¿ç”¨çš„æ˜¯åŒä¸€ä¸ªæ•°æ®åº“è¿æ¥ï¼ŒåŒæ—¶ï¼Œé‡‡ç”¨è¿™ç§æ–¹å¼å¯ä»¥ä½¿ä¸šåŠ¡å±‚ä½¿ç”¨äº‹åŠ¡æ—¶ä¸éœ€è¦æ„ŸçŸ¥å¹¶ç®¡ç† connection å¯¹è±¡ï¼Œé€šè¿‡ä¼ æ’­çº§åˆ«ï¼Œå·§å¦™åœ°ç®¡ç†å¤šä¸ªäº‹åŠ¡é…ç½®ä¹‹é—´çš„åˆ‡æ¢ï¼ŒæŒ‚èµ·å’Œæ¢å¤ã€‚</p>\n<p>Spring æ¡†æ¶é‡Œé¢å°±æ˜¯ç”¨çš„ ThreadLocal æ¥å®ç°è¿™ç§éš”ç¦»ï¼Œä¸»è¦æ˜¯åœ¨ TransactionSynchronizationManager è¿™ä¸ªç±»é‡Œé¢ã€‚</p>\n<h3 id=\"å¹¶å‘åŒ…\"><a class=\"anchor\" href=\"#å¹¶å‘åŒ…\">#</a> å¹¶å‘åŒ…</h3>\n<p><code>JUC</code>  ï¼ˆjava.util.concurrentï¼‰æ˜¯ Java å¹¶å‘ç¼–ç¨‹çš„æ ¸å¿ƒåŒ…ï¼Œè¿™ä¸ªåŒ…çš„ä¸»è¦ç»“æ„å¦‚ä¸‹ï¼š</p>\n<ul>\n<li>atomicï¼šåŸå­åŒ…ã€‚åŸºç¡€æ•°æ®ç±»å‹çš„åŸå­æ“ä½œç±»å‹åŒ…ï¼Œå¯¹åŸºç¡€ç±»å‹è¿›è¡Œäº†å°è£…ï¼Œç”¨äºåŸºç¡€ç±»å‹å¹¶å‘ä¸‹çš„åŸå­è®¡ç®—ã€‚</li>\n<li>lockï¼šé”åŒ…ã€‚å¤šçº¿ç¨‹å¤„ç†ç›¸åŒæ•°æ®æ—¶ï¼Œä½¿ç”¨é”æ¥ä¿è¯æ•°æ®åº“çš„å‡†ç¡®æ€§çš„æœ€å¸¸ç”¨çš„æ–¹å¼ï¼Œè¿™ä¸ªåŒ…ä¸‹æ˜¯é”ç›¸å…³çš„ç±»ã€‚</li>\n<li>å…¶ä»–ç±»ï¼šJDK åŸç”Ÿä¸­æŠŠå…¶ä»–ç±»åˆå¹¶å­˜æ”¾ï¼Œå¹¶æœªåŒºåˆ†ç±»åŒ…ã€‚</li>\n</ul>\n<p>å¹¶å‘åŒ…è¯¦ç»†å†…å®¹ï¼Œå¯ä»¥å‚è€ƒ<span class=\"exturl\" data-url=\"aHR0cHM6Ly9kb2NzLm9yYWNsZS5jb20vamF2YXNlLzgvZG9jcy9hcGkvaW5kZXguaHRtbA==\"> Java8 API</span></p>\n<h4 id=\"åŒæ­¥å®¹å™¨ä¸å¹¶å‘å®¹å™¨\"><a class=\"anchor\" href=\"#åŒæ­¥å®¹å™¨ä¸å¹¶å‘å®¹å™¨\">#</a> åŒæ­¥å®¹å™¨ä¸å¹¶å‘å®¹å™¨</h4>\n<p>åŒæ­¥å®¹å™¨ï¼šé€šè¿‡ synchronized å…³é”®å­—ä¿®é¥°çš„å®¹å™¨ï¼Œä¿è¯åŒä¸€æ—¶åˆ»å†…åªæœ‰ä¸€ä¸ªçº¿ç¨‹åœ¨ä½¿ç”¨å®¹å™¨ï¼Œä»è€Œä½¿å¾—å®¹å™¨çº¿ç¨‹å®‰å…¨ã€‚</p>\n<p>å¹¶å‘å®¹å™¨ï¼šå…è®¸å¤šçº¿ç¨‹åŒæ—¶ä½¿ç”¨å®¹å™¨ï¼Œå¹¶ä¸”ä¿è¯çº¿ç¨‹å®‰å…¨ã€‚è€Œä¸ºäº†è¾¾åˆ°å°½å¯èƒ½æé«˜å¹¶å‘ï¼ŒJUC é‡‡ç”¨äº†å¤šç§ä¼˜åŒ–æ–¹å¼æ¥æé«˜å¹¶å‘å®¹å™¨çš„æ‰§è¡Œæ•ˆç‡ï¼Œæ ¸å¿ƒçš„å°±æ˜¯ï¼šé”ã€CASï¼ˆæ— é”ï¼‰ã€COWï¼ˆè¯»å†™åˆ†ç¦»ï¼‰ã€åˆ†æ®µé”ã€‚</p>\n<p>å¸¸ç”¨çš„åŒæ­¥å®¹å™¨ï¼š</p>\n<ol>\n<li>\n<p>Vector</p>\n<p>Vector å’Œ ArrayList ä¸€æ ·å®ç°äº† List æ¥å£ï¼Œå…¶å¯¹äºæ•°ç»„çš„å„ç§æ“ä½œå’Œ ArrayList ä¸€æ ·ï¼ŒåŒºåˆ«åœ¨äº Vertor åœ¨å¯èƒ½å‡ºç°çº¿ç¨‹ä¸å®‰å…¨çš„æ‰€æœ‰æ–¹æ³•éƒ½ç”¨ synchronized è¿›è¡Œäº†ä¿®é¥°ã€‚</p>\n</li>\n<li>\n<p>Stack</p>\n<p>Stack æ˜¯ Vertor çš„å­ç±»ï¼ŒStack å®ç°çš„æ˜¯å…ˆè¿›åå‡ºçš„æ ˆã€‚åœ¨å‡ºæ ˆå…¥æ ˆç­‰æ“ä½œéƒ½è¿›è¡Œäº† synchronized ä¿®é¥°ã€‚</p>\n</li>\n<li>\n<p>HashTable</p>\n<p>HashTable å®ç°äº† Map æ¥å£ï¼Œå®ƒå®ç°çš„åŠŸèƒ½ HashMap åŸºæœ¬ä¸€è‡´ï¼ˆHashTable ä¸å¯å­˜ nullï¼Œè€Œ HashMap çš„é”®å’Œå€¼éƒ½å¯ä»¥å­˜ nullï¼‰ã€‚åŒºåˆ«åœ¨äº HashTable ä½¿ç”¨äº† synchronized ä¿®é¥°äº†æ–¹æ³•ã€‚</p>\n</li>\n<li>\n<p>Collections æä¾›çš„åŒæ­¥é›†åˆç±»</p>\n<ul>\n<li><code>List list = Collections.synchronizedList(new ArrayList())</code></li>\n<li><code>Set set = Collections.synchronizedSet(new HashSet())</code></li>\n<li><code>Map map = Collections.synchronizedMap(new HashMap())</code></li>\n</ul>\n<p>Collections é€šè¿‡ä»£ç†æ¨¡å¼å¯¹åŸæœ¬çš„æ“ä½œåŠ ä¸Šäº† synchronized åŒæ­¥ï¼Œè€Œ synchronized çš„åŒæ­¥ç²’åº¦å¤ªå¤§ï¼Œå¯¼è‡´åœ¨å¤šçº¿ç¨‹å¤„ç†çš„æ•ˆç‡å¾ˆä½ã€‚æ‰€ä»¥åœ¨ JDK1.5 çš„æ—¶å€™æ¨å‡ºäº†å¹¶å‘åŒ…ä¸‹çš„å¹¶å‘å®¹å™¨ï¼Œæ¥åº”å¯¹å¤šçº¿ç¨‹ä¸‹å®¹å™¨å¤„ç†æ•ˆç‡ä½çš„é—®é¢˜ã€‚</p>\n</li>\n</ol>\n<p>å¸¸ç”¨çš„å¹¶å‘å®¹å™¨ï¼š</p>\n<ol>\n<li>\n<p>CopyOnWriteArrayList</p>\n<p>CopyOnWriteArrayList ç›¸å½“äºå®ç°äº†çº¿ç¨‹å®‰å…¨çš„ ArrayListï¼Œå®ƒçš„æœºåˆ¶æ˜¯åœ¨å¯¹å®¹å™¨æœ‰å†™å…¥æ“ä½œæ—¶ï¼Œcopy å‡ºä¸€ä»½å‰¯æœ¬æ•°ç»„ï¼Œå®Œæˆæ“ä½œåå°†å‰¯æœ¬æ•°ç»„å¼•ç”¨èµ‹å€¼ç»™å®¹å™¨ã€‚åº•å±‚æ˜¯é€šè¿‡ ReentrantLock æ¥ä¿è¯åŒæ­¥ã€‚ä½†å®ƒé€šè¿‡ç‰ºç‰²å®¹å™¨çš„ä¸€è‡´æ€§æ¥æ¢å–å®¹å™¨çš„é«˜å¹¶å‘æ•ˆç‡ï¼ˆåœ¨ copy æœŸé—´è¯»åˆ°çš„æ˜¯æ—§æ•°æ®ï¼‰ã€‚æ‰€ä»¥ä¸èƒ½åœ¨éœ€è¦å¼ºä¸€è‡´æ€§çš„åœºæ™¯ä¸‹ä½¿ç”¨ã€‚</p>\n</li>\n<li>\n<p>CopyOnWriteArraySet</p>\n<p>CopyOnWriteArraySet å’Œ CopyOnWriteArrayList åŸç†ä¸€æ ·ï¼Œå®ƒæ˜¯å®ç°äº† CopyOnWrite æœºåˆ¶çš„ Set é›†åˆã€‚</p>\n</li>\n<li>\n<p>ConcurrentHashMap</p>\n<p>ConcurrentHashMap ç›¸å½“äºå®ç°äº†çº¿ç¨‹å®‰å…¨çš„ HashMapã€‚å…¶ä¸­çš„ key æ˜¯æ— åºçš„ï¼Œå¹¶ä¸” key å’Œ value éƒ½ä¸èƒ½ä¸º nullã€‚åœ¨ JDK8 ä¹‹å‰ï¼Œ ConcurrentHashMap é‡‡ç”¨äº†åˆ†æ®µé”æœºåˆ¶æ¥æé«˜å¹¶å‘æ•ˆç‡ï¼Œåªæœ‰åœ¨æ“ä½œåŒä¸€åˆ†æ®µçš„é”®å€¼å¯¹æ—¶æ‰éœ€è¦åŠ é”ã€‚åˆ°äº† JDK8 ä¹‹åï¼Œæ‘’å¼ƒäº†é”åˆ†æ®µæœºåˆ¶ï¼Œæ”¹ä¸ºåˆ©ç”¨ CAS ç®—æ³•ã€‚</p>\n</li>\n<li>\n<p>ConcurrentSkipListMap</p>\n<p>ConcurrentSkipListMap ç›¸å½“äºå®ç°äº†çº¿ç¨‹å®‰å…¨çš„ TreeMapã€‚å…¶ä¸­çš„ key æ˜¯æœ‰åºçš„ï¼Œå¹¶ä¸” key å’Œ value éƒ½ä¸èƒ½ä¸º nullã€‚å®ƒé‡‡ç”¨çš„è·³è·ƒè¡¨çš„æœºåˆ¶æ¥æ›¿ä»£çº¢é»‘æ ‘ã€‚ä¸ºä»€ä¹ˆä¸ç»§ç»­ä½¿ç”¨çº¢é»‘æ ‘å‘¢ï¼Ÿå› ä¸ºçº¢é»‘æ ‘åœ¨æ’å…¥æˆ–åˆ é™¤èŠ‚ç‚¹çš„æ—¶å€™éœ€è¦æ—‹è½¬è°ƒæ•´ï¼Œå¯¼è‡´éœ€è¦æ§åˆ¶çš„ç²’åº¦è¾ƒå¤§ã€‚è€Œè·³è·ƒè¡¨ä½¿ç”¨çš„æ˜¯é“¾è¡¨ï¼Œåˆ©ç”¨æ— é” CAS æœºåˆ¶å®ç°é«˜å¹¶å‘çº¿ç¨‹å®‰å…¨ã€‚</p>\n</li>\n<li>\n<p>ConcurrentSkipListSet</p>\n<p>ConcurrentSkipListSet å’Œ ConcurrentSkipListMap åŸç†ä¸€æ ·ï¼Œå®ƒæ˜¯å®ç°äº†é«˜å¹¶å‘çº¿ç¨‹å®‰å…¨çš„ TreeSetã€‚</p>\n</li>\n</ol>\n<p>å¸¸ç”¨çš„ Queue ç±»å‹ï¼š</p>\n<ol>\n<li>\n<p>ArrayBlockingQueue</p>\n<p>ArrayBlockingQueue æ˜¯é‡‡ç”¨æ•°ç»„å®ç°çš„æœ‰ç•Œé˜»å¡çº¿ç¨‹å®‰å…¨é˜Ÿåˆ—ã€‚å¦‚æœå‘å·²æ»¡çš„é˜Ÿåˆ—ç»§ç»­å¡å…¥å…ƒç´ ï¼Œå°†å¯¼è‡´å½“å‰çš„çº¿ç¨‹é˜»å¡ã€‚å¦‚æœå‘ç©ºé˜Ÿåˆ—è·å–å…ƒç´ ï¼Œé‚£ä¹ˆå°†å¯¼è‡´å½“å‰çº¿ç¨‹é˜»å¡ã€‚é‡‡ç”¨ ReentrantLock æ¥ä¿è¯åœ¨å¹¶å‘æƒ…å†µä¸‹çš„çº¿ç¨‹å®‰å…¨ã€‚</p>\n</li>\n<li>\n<p>LinkedBlockingQueue</p>\n<p>LinkedBlockingQueue æ˜¯ä¸€ä¸ªåŸºäºå•å‘é“¾è¡¨çš„ã€èŒƒå›´ä»»æ„çš„ï¼ˆå…¶å®æ˜¯æœ‰ç•Œçš„ï¼‰ã€FIFO é˜»å¡é˜Ÿåˆ—ã€‚è®¿é—®ä¸ç§»é™¤æ“ä½œæ˜¯åœ¨é˜Ÿå¤´è¿›è¡Œï¼Œæ·»åŠ æ“ä½œæ˜¯åœ¨é˜Ÿå°¾è¿›è¡Œï¼Œå¹¶åˆ†åˆ«ä½¿ç”¨ä¸åŒçš„é”è¿›è¡Œä¿æŠ¤ï¼Œåªæœ‰åœ¨å¯èƒ½æ¶‰åŠå¤šä¸ªèŠ‚ç‚¹çš„æ“ä½œæ‰åŒæ—¶å¯¹ä¸¤ä¸ªé”è¿›è¡ŒåŠ é”ã€‚</p>\n</li>\n<li>\n<p>PriorityBlockingQueue</p>\n<p>PriorityBlockingQueue æ˜¯ä¸€ä¸ªæ”¯æŒä¼˜å…ˆçº§çš„æ— ç•Œé˜»å¡é˜Ÿåˆ—ã€‚é»˜è®¤æƒ…å†µä¸‹å…ƒç´ é‡‡ç”¨è‡ªç„¶é¡ºåºå‡åºæ’åˆ—ï¼Œä¹Ÿå¯ä»¥è‡ªå®šä¹‰ç±»å®ç°  <code>compareTo()</code>  æ–¹æ³•æ¥æŒ‡å®šå…ƒç´ æ’åºè§„åˆ™ã€‚</p>\n</li>\n<li>\n<p>DelayQueue</p>\n<p>DelayQueue æ˜¯ä¸€ä¸ªå†…éƒ¨ä½¿ç”¨ä¼˜å…ˆçº§é˜Ÿåˆ—å®ç°çš„æ— ç•Œé˜»å¡é˜Ÿåˆ—ã€‚åŒæ—¶å…ƒç´ èŠ‚ç‚¹æ•°æ®éœ€è¦ç­‰å¾…å¤šä¹…ä¹‹åæ‰å¯è¢«è®¿é—®ã€‚å–æ•°æ®é˜Ÿåˆ—ä¸ºç©ºæ—¶ç­‰å¾…ï¼Œæœ‰æ•°æ®ä½†å»¶è¿Ÿæ—¶é—´æœªåˆ°æ—¶è¶…æ—¶ç­‰å¾…ã€‚</p>\n</li>\n<li>\n<p>SynchronousQueue</p>\n<p>SynchronousQueue æ²¡æœ‰å®¹é‡ï¼Œæ˜¯ä¸€ä¸ªä¸å­˜å‚¨å…ƒç´ çš„é˜»å¡é˜Ÿåˆ—ï¼Œä¼šç›´æ¥å°†å…ƒç´ äº¤ç»™æ¶ˆè´¹è€…ï¼Œå¿…é¡»ç­‰é˜Ÿåˆ—ä¸­çš„æ·»åŠ å…ƒç´ è¢«æ¶ˆè´¹åæ‰èƒ½ç»§ç»­æ·»åŠ æ–°çš„å…ƒç´ ã€‚ç›¸å½“äºä¸€æ¡å®¹é‡ä¸º 1 çš„ä¼ é€å¸¦ã€‚</p>\n</li>\n<li>\n<p>LinkedTransferQueue</p>\n<p>LinkedTransferQueue æ˜¯ä¸€ä¸ªæœ‰é“¾è¡¨ç»„æˆçš„æ— ç•Œä¼ è¾“é˜»å¡é˜Ÿåˆ—ã€‚å®ƒé›†åˆäº† ConcurrentLinkedQueueã€SynchronousQueueã€LinkedBlockingQueue ç­‰ä¼˜ç‚¹ã€‚å…·ä½“æœºåˆ¶è¾ƒä¸ºå¤æ‚ã€‚</p>\n</li>\n<li>\n<p>LinkedBlockingDeque</p>\n<p>LinkedBlockingDeque æ˜¯ä¸€ä¸ªç”±é“¾è¡¨ç»“æ„ç»„æˆçš„åŒå‘é˜»å¡é˜Ÿåˆ—ã€‚æ‰€è°“åŒå‘é˜Ÿåˆ—æŒ‡çš„æ˜¯å¯ä»¥ä»é˜Ÿåˆ—çš„ä¸¤ç«¯æ’å…¥å’Œç§»å‡ºå…ƒç´ ã€‚</p>\n</li>\n<li>\n<p>ConcurrentLinkedQueue</p>\n<p>ä¸Šé¢çš„ä¸ƒç§é˜Ÿåˆ—ç±»å‹éƒ½æ˜¯é˜»å¡å‹ï¼Œè€Œ ConcurrentLinkedQueue åˆ™æ˜¯çº¿ç¨‹å®‰å…¨çš„æ— ç•Œéé˜»å¡é˜Ÿåˆ—ï¼Œå…¶åº•å±‚æ•°æ®ç»“æ„æ˜¯ä½¿ç”¨å•å‘é“¾è¡¨å®ç°ï¼Œå…¥é˜Ÿå’Œå‡ºé˜Ÿæ“ä½œéƒ½æ˜¯ä½¿ç”¨ CAS æ¥ä¿è¯çº¿ç¨‹å®‰å…¨ã€‚</p>\n</li>\n</ol>\n<h4 id=\"thread\"><a class=\"anchor\" href=\"#thread\">#</a> Thread</h4>\n<p>Thread ç±»æ˜¯ Java ä¸­çš„çº¿ç¨‹ç±»ï¼Œå®ƒå®ç°äº† Runnable æ¥å£ï¼Œåœ¨ Thread ç±»ä¸­ï¼Œå…³ç³»åˆ°çº¿ç¨‹è¿è¡ŒçŠ¶æ€çš„æœ‰ä»¥ä¸‹å‡ ä¸ªæ–¹æ³•ï¼š</p>\n<ol>\n<li>\n<p>start</p>\n<p>ç”¨äºå¯åŠ¨ä¸€ä¸ªçº¿ç¨‹ã€‚</p>\n</li>\n<li>\n<p>run</p>\n<p>è¿™ä¸ªæ–¹æ³•ä¸éœ€è¦ç”¨æˆ·æ¥è°ƒç”¨ï¼Œå½“é€šè¿‡ start æ–¹æ³•å¯åŠ¨çº¿ç¨‹åï¼Œçº¿ç¨‹åœ¨è·å¾— CPU æ—¶é—´ç‰‡æ—¶ï¼Œä¼šè‡ªåŠ¨æ‰§è¡Œ run æ–¹æ³•ã€‚æ³¨æ„ï¼Œç»§æ‰¿ Thread ç±»å¿…é¡»é‡å†™ run æ–¹æ³•ï¼Œæ–¹æ³•ä½“ä¸­å®šä¹‰è¦æ‰§è¡Œçš„ä»»åŠ¡å†…å®¹ã€‚</p>\n</li>\n<li>\n<p>sleep</p>\n<p>ç›¸å½“äºè®©çº¿ç¨‹ç¡çœ ï¼Œäº¤å‡º CPUï¼Œè®© CPU å»æ‰§è¡Œå…¶ä»–ä»»åŠ¡ï¼Œä½†éœ€è¦æ³¨æ„ï¼Œsleep æ–¹æ³•å¹¶ä¸ä¼šé‡Šæ”¾é”ã€‚</p>\n<p>å½“çº¿ç¨‹ç¡çœ æ—¶é—´æ»¡åï¼Œä¸ä¸€å®šä¼šç«‹å³å¾—åˆ°æ‰§è¡Œï¼Œå› ä¸ºæ­¤æ—¶å¯èƒ½ CPU æ­£åœ¨æ‰§è¡Œå…¶ä»–çš„ä»»åŠ¡ã€‚æ‰€ä»¥è¯´è°ƒç”¨ sleep æ–¹æ³•ç›¸å½“äºè®©çº¿ç¨‹è¿›å…¥é˜»å¡çŠ¶æ€ã€‚</p>\n</li>\n<li>\n<p>yield</p>\n<p>è°ƒç”¨ yield æ–¹æ³•ä¼šè®©å½“å‰çº¿ç¨‹äº¤å‡º CPU æƒé™ï¼Œè®© CPU å»æ‰§è¡Œå…¶ä»–çš„çº¿ç¨‹ã€‚å®ƒè·Ÿ sleep æ–¹æ³•ç±»ä¼¼ï¼ŒåŒæ ·ä¸ä¼šé‡Šæ”¾é”ã€‚ä½†æ˜¯ yield ä¸èƒ½æ§åˆ¶å…·ä½“çš„äº¤å‡º CPU çš„æ—¶é—´ï¼Œå¦å¤–ï¼Œyield æ–¹æ³•åªèƒ½è®©æ‹¥æœ‰ç›¸åŒä¼˜å…ˆçº§çš„çº¿ç¨‹æœ‰è·å– CPU æ‰§è¡Œæ—¶é—´çš„æœºä¼šã€‚</p>\n<p>æ³¨æ„ï¼Œè°ƒç”¨ yield æ–¹æ³•å¹¶ä¸ä¼šè®©çº¿ç¨‹è¿›å…¥é˜»å¡çŠ¶æ€ï¼Œè€Œæ˜¯è®©çº¿ç¨‹é‡å›å°±ç»ªçŠ¶æ€ï¼Œå®ƒåªéœ€è¦ç­‰å¾…é‡æ–°è·å– CPU æ‰§è¡Œæ—¶é—´ï¼Œè¿™ä¸€ç‚¹æ˜¯å’Œ sleep æ–¹æ³•ä¸ä¸€æ ·çš„ã€‚</p>\n</li>\n<li>\n<p>join</p>\n<p>å®é™…ä¸Šè°ƒç”¨ join æ–¹æ³•æ˜¯è°ƒç”¨äº† Object çš„ wait æ–¹æ³•ï¼Œwait æ–¹æ³•ä¼šè®©çº¿ç¨‹è¿›å…¥é˜»å¡çŠ¶æ€ï¼Œå¹¶ä¸”ä¼šé‡Šæ”¾çº¿ç¨‹å æœ‰çš„é”ï¼Œå¹¶äº¤å‡º CPU æ‰§è¡Œæƒé™ï¼Œç”±äº wait æ–¹æ³•ä¼šè®©çº¿ç¨‹é‡Šæ”¾å¯¹è±¡é”ï¼Œæ‰€ä»¥ join æ–¹æ³•åŒæ ·ä¼šè®©çº¿ç¨‹é‡Šæ”¾å¯¹ä¸€ä¸ªå¯¹è±¡æŒæœ‰çš„é”ã€‚</p>\n</li>\n<li>\n<p>interrupt</p>\n<p>å•ç‹¬è°ƒç”¨ interrupt æ–¹æ³•å¯ä»¥ä½¿å¾—å¤„äºé˜»å¡çŠ¶æ€çš„çº¿ç¨‹æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ï¼Œå› æ­¤ï¼Œå®ƒå¯ä»¥ç”¨æ¥ä¸­æ–­ä¸€ä¸ªæ­£å¤„äºé˜»å¡çŠ¶æ€çš„çº¿ç¨‹ï¼›å¦å¤–ï¼Œå¯ä»¥é€šè¿‡ interrupt æ–¹æ³•å’Œ  <code>isInterrupted()</code>  æ–¹æ³•æ¥åœæ­¢æ­£åœ¨è¿è¡Œçš„çº¿ç¨‹ã€‚</p>\n</li>\n<li>\n<p>stopï¼šå·²åºŸå¼ƒï¼Œå®ƒæ˜¯ä¸€ä¸ªä¸å®‰å…¨çš„æ–¹æ³•ã€‚</p>\n</li>\n<li>\n<p>destoryï¼šå·²åºŸå¼ƒã€‚</p>\n</li>\n</ol>\n<h4 id=\"runnable\"><a class=\"anchor\" href=\"#runnable\">#</a> Runnable</h4>\n<p>Runnable æ¥å£æ˜¯çº¿ç¨‹è¾…åŠ©ç±»ï¼Œä»…å®šä¹‰äº†ä¸€ä¸ªæ–¹æ³• run æ–¹æ³•ã€‚</p>\n<p>Runnable çš„ä½¿ç”¨æ–¹æ³•ï¼š</p>\n<ol>\n<li>å®ç° Runnable æ¥å£ã€‚</li>\n<li>é‡å†™ run æ–¹æ³•ã€‚</li>\n<li>åˆ›å»º runnable å®ä¾‹ã€‚</li>\n<li>åˆ›å»º Thread å®ä¾‹ã€‚</li>\n<li>å°† Runnable å®ä¾‹æ”¾å…¥ Thread å®ä¾‹ä¸­ã€‚</li>\n<li>é€šè¿‡çº¿ç¨‹å®ä¾‹æ§åˆ¶çº¿ç¨‹çš„è¡Œä¸ºï¼Œåœ¨è¿è¡Œæ—¶ä¼šè°ƒç”¨ Runnable æ¥å£ä¸­çš„ run æ–¹æ³•ã€‚</li>\n</ol>\n<blockquote>\n<p>æ³¨æ„ï¼šJava ä¸­çœŸæ­£èƒ½åˆ›å»ºæ–°çº¿ç¨‹çš„åªæœ‰ Thread ç±»å¯¹è±¡ï¼Œé€šè¿‡å®ç° Runnable çš„æ–¹å¼ï¼Œæœ€ç»ˆè¿˜æ˜¯é€šè¿‡ Thread ç±»å¯¹è±¡æ¥åˆ›å»ºçº¿ç¨‹ã€‚</p>\n</blockquote>\n<h4 id=\"callable\"><a class=\"anchor\" href=\"#callable\">#</a> Callable</h4>\n<p>å‚è€ƒå‰æ–‡ <code>åˆ›å»ºçº¿ç¨‹çš„å¤šç§æ–¹å¼</code> éƒ¨åˆ†ã€‚</p>\n<h4 id=\"reentrantlock\"><a class=\"anchor\" href=\"#reentrantlock\">#</a> ReentrantLock</h4>\n<p>å‚è€ƒå‰æ–‡ <code>å¯é‡å…¥é”ä¸ä¸å¯é‡å…¥é”</code> éƒ¨åˆ†ã€‚</p>\n<h4 id=\"reentrantreadwritelock\"><a class=\"anchor\" href=\"#reentrantreadwritelock\">#</a> ReentrantReadWriteLock</h4>\n<p>ReentrantReadWriteLock æ˜¯ Lock çš„å¦ä¸€ç§å®ç°æ–¹å¼ï¼Œä»å‰æ–‡æˆ‘ä»¬å·²ç»çŸ¥é“ ReentrantLock æ˜¯ä¸€ä¸ªæ’ä»–é”ï¼ŒåŒä¸€æ—¶é—´åªå…è®¸ä¸€ä¸ªçº¿ç¨‹è®¿é—®ï¼Œè€Œ ReentrantReadWriteLock å…è®¸å¤šä¸ªè¯»çº¿ç¨‹åŒæ—¶è®¿é—®ï¼Œä½†ä¸å…è®¸å†™çº¿ç¨‹å’Œè¯»çº¿ç¨‹ã€å†™çº¿ç¨‹å’Œå†™çº¿ç¨‹åŒæ—¶è®¿é—®ã€‚</p>\n<p>å‚è€ƒå‰æ–‡ <code>è‡ªæ—‹é”ã€äº’æ–¥é”ä¸è¯»å†™é”</code> éƒ¨åˆ†ã€‚</p>\n<h4 id=\"atomic\"><a class=\"anchor\" href=\"#atomic\">#</a> Atomic*</h4>\n<h4 id=\"semaphore\"><a class=\"anchor\" href=\"#semaphore\">#</a> Semaphore</h4>\n<p><code>Semaphore</code>  é€šå¸¸è¢«ç§°ä¸ºä¿¡å·é‡ï¼Œå¯ä»¥ç”¨æ¥æ§åˆ¶åŒæ—¶è®¿é—®ç‰¹å®šèµ„æºçš„çº¿ç¨‹æ•°é‡ï¼Œé€šè¿‡åè°ƒå„ä¸ªçº¿ç¨‹ï¼Œä»¥ä¿è¯åˆç†çš„ä½¿ç”¨èµ„æºã€‚</p>\n<p>å®ƒä¸»è¦æœ‰ä»¥ä¸‹å¸¸ç”¨æ–¹æ³•ï¼š</p>\n<ul>\n<li><code>acquire()</code> ï¼šè·å–ä¸€ä¸ªä»¤ç‰Œï¼Œåœ¨è·å–åˆ°ä»¤ç‰Œã€æˆ–è€…è¢«å…¶ä»–çº¿ç¨‹è°ƒç”¨ä¸­æ–­ä¹‹å‰çº¿ç¨‹ä¸€ç›´å¤„äºé˜»å¡çŠ¶æ€ã€‚</li>\n<li><code>acquire(int permits)</code> ï¼šè·å–ä¸€ä¸ªä»¤ç‰Œï¼Œåœ¨è·å–åˆ°ä»¤ç‰Œã€æˆ–è€…è¢«å…¶ä»–çº¿ç¨‹è°ƒç”¨ä¸­æ–­ã€æˆ–è¶…æ—¶ä¹‹å‰çº¿ç¨‹ä¸€ç›´å¤„äºé˜»å¡çŠ¶æ€ã€‚</li>\n<li><code>acquireUninterruptibly()</code> ï¼šè·å–ä¸€ä¸ªä»¤ç‰Œï¼Œåœ¨è·å–åˆ°ä»¤ç‰Œä¹‹å‰çº¿ç¨‹ä¸€ç›´å¤„äºé˜»å¡çŠ¶æ€ï¼ˆå¿½ç•¥ä¸­æ–­ï¼‰ã€‚</li>\n<li><code>tryAcquire()</code> ï¼šå°è¯•è·å¾—ä»¤ç‰Œï¼Œè¿”å›è·å–ä»¤ç‰ŒæˆåŠŸæˆ–å¤±è´¥ï¼Œä¸é˜»å¡çº¿ç¨‹ã€‚</li>\n<li><code>tryAcquire(long timeout, TimeUnit unit)</code> ï¼šå°è¯•è·å¾—ä»¤ç‰Œï¼Œåœ¨è¶…æ—¶æ—¶é—´å†…å¾ªç¯å°è¯•è·å–ï¼Œç›´åˆ°å°è¯•è·å–æˆåŠŸæˆ–è¶…æ—¶è¿”å›ï¼Œä¸é˜»å¡çº¿ç¨‹ã€‚</li>\n<li><code>release()</code> ï¼šé‡Šæ”¾ä¸€ä¸ªä»¤ç‰Œï¼Œå”¤é†’ä¸€ä¸ªè·å–ä»¤ç‰Œä¸æˆåŠŸçš„é˜»å¡çº¿ç¨‹ã€‚</li>\n<li><code>hasQueuedThreads()</code> ï¼šç­‰å¾…é˜Ÿåˆ—é‡Œæ˜¯å¦è¿˜å­˜åœ¨ç­‰å¾…çº¿ç¨‹ã€‚</li>\n<li><code>getQueueLength()</code> ï¼šè·å–ç­‰å¾…é˜Ÿåˆ—é‡Œé˜»å¡çš„çº¿ç¨‹æ•°ã€‚</li>\n<li><code>drainPermits()</code> ï¼šæ¸…ç©ºä»¤ç‰ŒæŠŠå¯ç”¨ä»¤ç‰Œæ•°ç½®ä¸º 0ï¼Œè¿”å›æ¸…ç©ºä»¤ç‰Œçš„æ•°é‡ã€‚</li>\n<li><code>availablePermits()</code> ï¼šè¿”å›å¯ç”¨çš„ä»¤ç‰Œæ•°é‡ã€‚</li>\n</ul>\n<p>Semaphore çš„å®ç°åŸç†ï¼š</p>\n<p>Semaphore æä¾›äº†ä¸¤ä¸ªæ„é€ æ–¹æ³•ï¼Œç”¨äºå¯¹å…¶è¿›è¡Œåˆå§‹åŒ–ï¼š</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token class-name\">Semaphore</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> <span class=\"token keyword\">permits</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    sync <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">NonfairSync</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">permits</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\">/**</pre></td></tr><tr><td data-num=\"6\"></td><td><pre> * permitsï¼šä¿¡å·æ•°é‡</pre></td></tr><tr><td data-num=\"7\"></td><td><pre> * fairï¼šæ˜¯å¦æ˜¯å…¬å¹³é”ï¼ˆé»˜è®¤éå…¬å¹³ï¼‰</pre></td></tr><tr><td data-num=\"8\"></td><td><pre> */</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token class-name\">Semaphore</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> <span class=\"token keyword\">permits</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">boolean</span> fair<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    sync <span class=\"token operator\">=</span> fair <span class=\"token operator\">?</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">FairSync</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">permits</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">NonfairSync</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">permits</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>é€šè¿‡ acquire æ–¹æ³•è·å–ä¿¡å·æ—¶ï¼Œå…¶å†…éƒ¨ä¼šè°ƒç”¨ AQS ä¸­çš„  <code>acquireSharedInterruptibly()</code>  æ–¹æ³•ï¼š</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// java.util.concurrent.Semaphore.class</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">acquire</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">InterruptedException</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    sync<span class=\"token punctuation\">.</span><span class=\"token function\">acquireSharedInterruptibly</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token comment\">// java.util.concurrent.locks.AbstractQueuedSynchronizer.class</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">final</span> <span class=\"token keyword\">void</span> <span class=\"token function\">acquireSharedInterruptibly</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> arg<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token keyword\">throws</span> <span class=\"token class-name\">InterruptedException</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Thread</span><span class=\"token punctuation\">.</span><span class=\"token function\">interrupted</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">InterruptedException</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">tryAcquireShared</span><span class=\"token punctuation\">(</span>arg<span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token function\">doAcquireSharedInterruptibly</span><span class=\"token punctuation\">(</span>arg<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>è¿™ä¸ªæ–¹æ³•ä¼šè°ƒç”¨  <code>tryAcquireShared()</code>  å°è¯•è·å–ä¿¡å·ï¼Œå¦‚æœæ²¡æœ‰è·å–åˆ°ä¿¡å·ï¼Œåˆ™ä¼šå°†å½“å‰çº¿ç¨‹åŠ å…¥ç­‰å¾…é˜Ÿåˆ—å¹¶æŒ‚èµ·ã€‚è€Œ Semaphore çš„å†…éƒ¨ç±» NonfairSync å’Œ FairSync éƒ½å¯¹ tryAcquireShared æ–¹æ³•è¿›è¡Œäº†é‡å†™ï¼š</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">abstract</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Sync</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">AbstractQueuedSynchronizer</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token comment\">// ...</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">final</span> <span class=\"token keyword\">int</span> <span class=\"token function\">nonfairTryAcquireShared</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> acquires<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>            <span class=\"token keyword\">int</span> available <span class=\"token operator\">=</span> <span class=\"token function\">getState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>            <span class=\"token keyword\">int</span> remaining <span class=\"token operator\">=</span> available <span class=\"token operator\">-</span> acquires<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>remaining <span class=\"token operator\">&lt;</span> <span class=\"token number\">0</span> <span class=\"token operator\">||</span> <span class=\"token function\">compareAndSetState</span><span class=\"token punctuation\">(</span>available<span class=\"token punctuation\">,</span> remaining<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>                <span class=\"token keyword\">return</span> remaining<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token comment\">// ...</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token keyword\">static</span> <span class=\"token keyword\">final</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">NonfairSync</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Sync</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">final</span> <span class=\"token keyword\">long</span> serialVersionUID <span class=\"token operator\">=</span> <span class=\"token operator\">-</span><span class=\"token number\">2694183684443567898L</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token class-name\">NonfairSync</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> <span class=\"token keyword\">permits</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">permits</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    <span class=\"token keyword\">protected</span> <span class=\"token keyword\">int</span> <span class=\"token function\">tryAcquireShared</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> acquires<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token function\">nonfairTryAcquireShared</span><span class=\"token punctuation\">(</span>acquires<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre></pre></td></tr><tr><td data-num=\"26\"></td><td><pre><span class=\"token keyword\">static</span> <span class=\"token keyword\">final</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">FairSync</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Sync</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">final</span> <span class=\"token keyword\">long</span> serialVersionUID <span class=\"token operator\">=</span> <span class=\"token number\">2014338818796000944L</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>    <span class=\"token class-name\">FairSync</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> <span class=\"token keyword\">permits</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>        <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">permits</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>    <span class=\"token keyword\">protected</span> <span class=\"token keyword\">int</span> <span class=\"token function\">tryAcquireShared</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> acquires<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">hasQueuedPredecessors</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>                <span class=\"token keyword\">return</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>            <span class=\"token keyword\">int</span> available <span class=\"token operator\">=</span> <span class=\"token function\">getState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>            <span class=\"token keyword\">int</span> remaining <span class=\"token operator\">=</span> available <span class=\"token operator\">-</span> acquires<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>remaining <span class=\"token operator\">&lt;</span> <span class=\"token number\">0</span> <span class=\"token operator\">||</span> <span class=\"token function\">compareAndSetState</span><span class=\"token punctuation\">(</span>available<span class=\"token punctuation\">,</span> remaining<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>                <span class=\"token keyword\">return</span> remaining<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>è¿™æ—¶ï¼Œå…¬å¹³é”ä¸éå…¬å¹³é”åœ¨å®ç°ä¸Šæœ‰æ‰€åŒºåˆ«ï¼Œéå…¬å¹³é”ç›´æ¥ä½¿ç”¨ CAS æ¥å°è¯•è·å–ä¿¡å·ã€‚è€Œå…¬å¹³é”åˆ™ä¼šå…ˆè°ƒç”¨  <code>hasQueuedPredecessors()</code>  æ–¹æ³•ï¼Œåˆ¤æ–­é˜Ÿåˆ—ä¸­æ˜¯å¦æœ‰ç­‰å¾…çº¿ç¨‹ï¼Œå¦‚æœé˜Ÿåˆ—ä¸­æ²¡æœ‰ç­‰å¾…çº¿ç¨‹ï¼Œæ‰ä¼šä½¿ç”¨ CAS å°è¯•è·å–ä¿¡å·ï¼Œå¦‚æœæœ‰åˆ™è¿”å› -1ï¼Œè¿™æ—¶ acquire å°±ä¼šç»§ç»­æ‰§è¡Œ  <code>doAcquireSharedInterruptibly()</code>  æ–¹æ³•ï¼š</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">private</span> <span class=\"token keyword\">void</span> <span class=\"token function\">doAcquireSharedInterruptibly</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> arg<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">throws</span> <span class=\"token class-name\">InterruptedException</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">final</span> <span class=\"token class-name\">Node</span> node <span class=\"token operator\">=</span> <span class=\"token function\">addWaiter</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Node</span><span class=\"token punctuation\">.</span>SHARED<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">// 1</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">boolean</span> failed <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">try</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>            <span class=\"token keyword\">final</span> <span class=\"token class-name\">Node</span> p <span class=\"token operator\">=</span> node<span class=\"token punctuation\">.</span><span class=\"token function\">predecessor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>p <span class=\"token operator\">==</span> head<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span><span class=\"token comment\">// 2</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>                <span class=\"token keyword\">int</span> r <span class=\"token operator\">=</span> <span class=\"token function\">tryAcquireShared</span><span class=\"token punctuation\">(</span>arg<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>                <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>r <span class=\"token operator\">>=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>                    <span class=\"token function\">setHeadAndPropagate</span><span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">,</span> r<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>                    p<span class=\"token punctuation\">.</span>next <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// help GC</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>                    failed <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>                    <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>                <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">shouldParkAfterFailedAcquire</span><span class=\"token punctuation\">(</span>p<span class=\"token punctuation\">,</span> node<span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>                <span class=\"token function\">parkAndCheckInterrupt</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 3</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>                <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">InterruptedException</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">finally</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>failed<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>            <span class=\"token function\">cancelAcquire</span><span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>è¿™ä¸ªæ–¹æ³•ä¸»è¦è¿›è¡Œäº†ä»¥ä¸‹é€»è¾‘ï¼š</p>\n<ol>\n<li>å°è£…ä¸€ä¸ª Node èŠ‚ç‚¹ï¼Œå¹¶åŠ å…¥é˜Ÿåˆ—å°¾éƒ¨ã€‚</li>\n<li>åœ¨æ— é™å¾ªç¯ä¸­ï¼Œå¦‚æœå½“å‰èŠ‚ç‚¹æ˜¯å¤´èŠ‚ç‚¹ï¼Œå°±å°è¯•è·å–ä¿¡å·ã€‚</li>\n<li>å¦‚æœä¸æ˜¯å¤´èŠ‚ç‚¹ï¼Œåœ¨ç»è¿‡èŠ‚ç‚¹çŠ¶æ€åˆ¤æ–­åï¼ŒæŒ‚èµ·å½“å‰çº¿ç¨‹ã€‚</li>\n</ol>\n<p>è€Œ  <code>semaphore.release()</code>  é‡Šæ”¾ä¿¡å·åˆ™ç»å†äº†å¦‚ä¸‹é€»è¾‘ï¼š</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// java.util.concurrent.Semaphore.class</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">release</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    sync<span class=\"token punctuation\">.</span><span class=\"token function\">releaseShared</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token comment\">// java.util.concurrent.locks.AbstractQueuedSynchronizer.class</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">final</span> <span class=\"token keyword\">boolean</span> <span class=\"token function\">releaseShared</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> arg<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">tryReleaseShared</span><span class=\"token punctuation\">(</span>arg<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token function\">doReleaseShared</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token comment\">// java.util.concurrent.Semaphore.class</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token keyword\">protected</span> <span class=\"token keyword\">final</span> <span class=\"token keyword\">boolean</span> <span class=\"token function\">tryReleaseShared</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> releases<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        <span class=\"token keyword\">int</span> current <span class=\"token operator\">=</span> <span class=\"token function\">getState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        <span class=\"token keyword\">int</span> next <span class=\"token operator\">=</span> current <span class=\"token operator\">+</span> releases<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>next <span class=\"token operator\">&lt;</span> current<span class=\"token punctuation\">)</span> <span class=\"token comment\">// overflow</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>            <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Maximum permit count exceeded\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">compareAndSetState</span><span class=\"token punctuation\">(</span>current<span class=\"token punctuation\">,</span> next<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>            <span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°ï¼Œé‡Šæ”¾ä¿¡å·æ—¶ä¹Ÿæ˜¯ä½¿ç”¨ CAS ç®—æ³•ï¼Œå¹¶ä¸”å°†å¯ç”¨ä¿¡å· state åŠ ä¸€ã€‚</p>\n<h4 id=\"countdownlatch\"><a class=\"anchor\" href=\"#countdownlatch\">#</a> CountDownLatch</h4>\n<p><code>CountDownLatch</code>  æ˜¯ä¸€ä¸ªåŒæ­¥å·¥å…·ç±»ï¼Œç”¨æ¥åè°ƒå¤šä¸ªçº¿ç¨‹ä¹‹é—´çš„åŒæ­¥ï¼Œæˆ–è€…è¯´èµ·åˆ°çº¿ç¨‹ä¹‹é—´çš„é€šä¿¡ã€‚</p>\n<p>CountDownLatch èƒ½å¤Ÿä½¿ä¸€ä¸ªçº¿ç¨‹åœ¨ç­‰å¾…å¦å¤–ä¸€äº›çº¿ç¨‹å®Œæˆå„è‡ªå·¥ä½œä¹‹åï¼Œå†ç»§ç»­æ‰§è¡Œï¼Œå®ƒä½¿ç”¨ä¸€ä¸ªè®¡æ•°å™¨è¿›è¡Œå®ç°ï¼Œè®¡æ•°å™¨åˆå§‹å€¼ä¸ºçº¿ç¨‹çš„æ•°é‡ã€‚å½“æ¯ä¸€ä¸ªçº¿ç¨‹å®Œæˆè‡ªå·±ä»»åŠ¡åï¼Œè®¡æ•°å™¨çš„å€¼å°±ä¼šå‡ä¸€ã€‚å½“è®¡æ•°å™¨çš„å€¼ä¸º 0 æ—¶ï¼Œè¡¨ç¤ºæ‰€æœ‰çš„çº¿ç¨‹éƒ½å·²ç»å®Œæˆä¸€äº›ä»»åŠ¡ï¼Œç„¶ååœ¨ CountDownLatch ä¸Šç­‰å¾…çš„çº¿ç¨‹å°±å¯ä»¥æ¢å¤æ‰§è¡Œæ¥ä¸‹æ¥çš„ä»»åŠ¡ã€‚</p>\n<p>CountDownLatch çš„ç”¨æ³•ï¼š</p>\n<ol>\n<li>\n<p>æŸä¸€çº¿ç¨‹åœ¨å¼€å§‹è¿è¡Œå‰ç­‰å¾… n ä¸ªçº¿ç¨‹æ‰§è¡Œå®Œæ¯•ã€‚</p>\n<p>é€šè¿‡  <code>new CountDownLatch(n)</code>  æ¥åˆå§‹åŒ–è®¡æ•°å™¨ï¼Œæ¯å½“æœ‰ä¸€ä¸ªä»»åŠ¡çº¿ç¨‹æ‰§è¡Œå®Œæ¯•ï¼Œå°±æ‰§è¡Œ  <code>countdownLatch.countDown()</code>  å°†è®¡æ•°å™¨å‡ä¸€ï¼Œå½“è®¡æ•°å™¨çš„å€¼å˜ä¸º 0 æ—¶ï¼Œåœ¨ CountDownLatch ä¸Š  <code>await()</code>  çš„çº¿ç¨‹å°±ä¼šè¢«å”¤é†’ã€‚</p>\n<p>ä¸€ä¸ªå…¸å‹åº”ç”¨åœºæ™¯å°±æ˜¯å¯åŠ¨ä¸€ä¸ªæœåŠ¡æ—¶ï¼Œä¸»çº¿ç¨‹éœ€è¦ç­‰å¾…å¤šä¸ªç»„ä»¶åŠ è½½å®Œæ¯•ï¼Œä¹‹åå†ç»§ç»­æ‰§è¡Œã€‚</p>\n</li>\n<li>\n<p>å®ç°å¤šä¸ªçº¿ç¨‹å¼€å§‹æ‰§è¡Œä»»åŠ¡çš„æœ€å¤§å¹¶è¡Œæ€§ã€‚</p>\n<p>è¿™é‡Œéœ€è¦å¼ºè°ƒçš„æ˜¯å¹¶è¡Œæ€§ï¼Œè€Œä¸æ˜¯å¹¶å‘ã€‚å…¶åšæ³•æ˜¯åˆå§‹åŒ–ä¸€ä¸ªå…±äº«çš„  <code>new CountDownLatch(1)</code>  ï¼Œå¤šä¸ªçº¿ç¨‹åœ¨å¼€å§‹æ‰§è¡Œä»»åŠ¡å‰ï¼Œé¦–å…ˆ  <code>countdownlatch.await()</code> ï¼Œå½“ä¸»çº¿ç¨‹è°ƒç”¨  <code>countdownLatch.countDown()</code>  æ—¶ï¼Œè®¡ç®—å™¨å˜ä¸º 0 ï¼Œå¤šä¸ªçº¿ç¨‹å°±ä¼šè¢«åŒæ—¶å”¤é†’ï¼Œå¹¶å¼€å§‹å¹¶è¡Œæ‰§è¡Œä»»åŠ¡ã€‚</p>\n<blockquote>\n<p>æœ‰ç‚¹ç±»ä¼¼äºå¤šä¸ªçº¿ç¨‹è¿›è¡Œèµ›è·‘ï¼Œå½“åˆå§‹åŒ–  <code>new CountDownLatch(1)</code>  æ—¶ï¼Œç›¸å½“äºå‚ä¸èµ›è·‘çš„è¿åŠ¨å‘˜ï¼ˆçº¿ç¨‹ï¼‰è¿›å…¥é¢„å¤‡çŠ¶æ€ï¼Œå½“æ‰§è¡Œ  <code>countdownLatch.countDown()</code>  å°±ç›¸å½“äºå‘å·æªå“èµ·ï¼Œå¤šä¸ªè¿åŠ¨å‘˜ï¼ˆçº¿ç¨‹ï¼‰å°±å¼€å§‹èµ›è·‘ã€‚</p>\n</blockquote>\n</li>\n</ol>\n<p>CountDownLatch çš„ä¸è¶³ï¼šå®ƒæ˜¯ä¸€æ¬¡æ€§çš„ï¼Œè®¡ç®—å™¨çš„å€¼åªèƒ½åœ¨æ„é€ æ–¹æ³•ä¸­åˆå§‹åŒ–ä¸€æ¬¡ï¼Œä¹‹åæ²¡æœ‰ä»»ä½•æœºåˆ¶å†æ¬¡å¯¹å…¶è®¾ç½®å€¼ï¼Œå½“ CountDownLatch ä½¿ç”¨å®Œæ¯•åï¼Œå®ƒä¸èƒ½å†æ¬¡è¢«ä½¿ç”¨ã€‚</p>\n<p>CountDownLatch ä½¿ç”¨ç¤ºä¾‹ï¼š</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">CountdownLatchTest</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    </pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token class-name\">ExecutorService</span> service <span class=\"token operator\">=</span> <span class=\"token class-name\">Executors</span><span class=\"token punctuation\">.</span><span class=\"token function\">newFixedThreadPool</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token keyword\">final</span> <span class=\"token class-name\">CountDownLatch</span> latch <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">CountDownLatch</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> <span class=\"token number\">3</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>            <span class=\"token class-name\">Runnable</span> runnable <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>                <span class=\"token keyword\">try</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>                    <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"å­çº¿ç¨‹ã€\"</span> <span class=\"token operator\">+</span> <span class=\"token class-name\">Thread</span><span class=\"token punctuation\">.</span><span class=\"token function\">currentThread</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">\"ã€‘å¼€å§‹æ‰§è¡Œ\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>                    <span class=\"token class-name\">Thread</span><span class=\"token punctuation\">.</span><span class=\"token function\">sleep</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">long</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Math</span><span class=\"token punctuation\">.</span><span class=\"token function\">random</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token number\">10000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>                    <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"å­çº¿ç¨‹ã€\"</span> <span class=\"token operator\">+</span> <span class=\"token class-name\">Thread</span><span class=\"token punctuation\">.</span><span class=\"token function\">currentThread</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">\"ã€‘æ‰§è¡Œå®Œæ¯•\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>                    latch<span class=\"token punctuation\">.</span><span class=\"token function\">countDown</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>                <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">InterruptedException</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>                    e<span class=\"token punctuation\">.</span><span class=\"token function\">printStackTrace</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>                <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>            service<span class=\"token punctuation\">.</span><span class=\"token function\">execute</span><span class=\"token punctuation\">(</span>runnable<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>        <span class=\"token keyword\">try</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ä¸»çº¿ç¨‹\"</span> <span class=\"token operator\">+</span> <span class=\"token class-name\">Thread</span><span class=\"token punctuation\">.</span><span class=\"token function\">currentThread</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">\"ç­‰å¾…å­çº¿ç¨‹æ‰§è¡Œå®Œæˆ...\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>            latch<span class=\"token punctuation\">.</span><span class=\"token function\">await</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">// é˜»å¡å½“å‰çº¿ç¨‹ï¼Œç­‰å¾…æ‰€æœ‰å­çº¿ç¨‹æ‰§è¡Œå®Œæ¯•</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"å­çº¿ç¨‹æ‰§è¡Œå®Œæ¯•ã€‚\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ä¸»çº¿ç¨‹ã€\"</span> <span class=\"token operator\">+</span> <span class=\"token class-name\">Thread</span><span class=\"token punctuation\">.</span><span class=\"token function\">currentThread</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">\"ã€‘å¼€å§‹æ‰§è¡Œ...\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">InterruptedException</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>            e<span class=\"token punctuation\">.</span><span class=\"token function\">printStackTrace</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h4 id=\"concurrenthashmap\"><a class=\"anchor\" href=\"#concurrenthashmap\">#</a> ConcurrentHashMap</h4>\n<p>ConcurrentHashMap é€šå¸¸ä¼šä¸ HashMap å’Œ HashTable æ”¾åœ¨ä¸€èµ·è¿›è¡Œæ¯”è¾ƒã€‚</p>\n<p>åœ¨éå¹¶å‘ç¯å¢ƒä¸‹ï¼Œæˆ‘ä»¬é€šå¸¸ä½¿ç”¨ HashMap æ¥ä½œä¸ºå­˜å‚¨ key/value çš„å®¹å™¨ï¼Œä½†æ˜¯ï¼ŒHashMap åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹å´æ˜¯å­˜åœ¨çº¿ç¨‹å®‰å…¨é—®é¢˜çš„ï¼Œè€Œè¦å¤„ç†è¿™ä¸ªé—®é¢˜ï¼Œä¸»è¦æœ‰ä»¥ä¸‹å‡ ç§æ–¹å¼ï¼š</p>\n<ol>\n<li>\n<p>ä½¿ç”¨  <code>Collections.synchronizedmap(new HashMap&lt;&gt;())</code>  ã€‚</p>\n<p>å®ƒå…¶å®æ˜¯å¯¹ HashMap çš„ä¸€ä¸ªåŒ…è£…ï¼Œä½†æ˜¯è¿™ç§æ–¹å¼åªé€‚ç”¨äºå¹¶å‘é‡è¾ƒå°çš„æƒ…å†µã€‚å®ƒè¿”å›ä¸€ä¸ª  <code>SynchronizedMap</code>  å¯¹è±¡ï¼Œè€Œåœ¨è¿™ä¸ªå¯¹è±¡ä¸­çš„æ‰€æœ‰æ“ä½œï¼Œéƒ½è¢«  <code>synchronized</code>  å…³é”®å­—ä¿®é¥°ï¼Œå¹¶ä¸”æ¯ä¸ªæ–¹æ³•è·å–çš„éƒ½æ˜¯åŒä¸€æŠŠé” mutexï¼Œå› æ­¤ï¼Œæ‰€æœ‰æ“ä½œä¹‹é—´æ˜¯äº’æ–¥çš„ï¼Œä»è€Œå‡å°‘äº†å¹¶å‘é‡ã€‚</p>\n<p>åŒç†ï¼Œå¯¹äº List å’Œ Setï¼ŒCollections ä¹Ÿæä¾›äº†ç±»ä¼¼çš„æ–¹æ³•ï¼Œå‚è§ä¸Šæ–‡ <code>åŒæ­¥å®¹å™¨ä¸å¹¶å‘å®¹å™¨</code> éƒ¨åˆ†ã€‚</p>\n</li>\n<li>\n<p>ä½¿ç”¨ HashTableã€‚</p>\n<p>HashTable æ˜¯ä¸€ä¸ªçº¿ç¨‹å®‰å…¨çš„ç±»ï¼Œå®ƒä½¿ç”¨ synchronized æ¥é”ä½æ•´å¼  Hash è¡¨æ¥å®ç°çº¿ç¨‹å®‰å…¨ï¼Œå³æ¯æ¬¡é”ä½æ•´å¼ è¡¨è®©çº¿ç¨‹ç‹¬å ã€‚</p>\n</li>\n<li>\n<p>ä½¿ç”¨ ConcurrentHashMapã€‚</p>\n<p>å‰ä¸¤è€…åœ¨å®ç°ä¸Šå‡ä½¿ç”¨äº† synchronized å…³é”®å­—ï¼Œæ€§èƒ½å’Œæ•ˆç‡ä¸Šéƒ½æ˜æ˜¾ä½äº ConcurrentHashMapï¼ŒConcurrentHashMap å…è®¸å¤šä¸ªä¿®æ”¹æ“ä½œå¹¶å‘è¿›è¡Œï¼Œå…¶å…³é”®åœ¨äºä½¿ç”¨äº†é”åˆ†ç¦»æŠ€æœ¯ã€‚å®ƒä½¿ç”¨äº†å¤šä¸ªé”æ¥æ§åˆ¶å¯¹ hash è¡¨çš„ä¸åŒéƒ¨åˆ†è¿›è¡Œçš„ä¿®æ”¹ã€‚ConcurrentHashMap å†…éƒ¨ä½¿ç”¨æ®µï¼ˆSegmentï¼‰æ¥è¡¨ç¤ºè¿™äº›ä¸åŒçš„éƒ¨åˆ†ï¼Œæ¯ä¸ªæ®µå…¶å®å°±æ˜¯ä¸€ä¸ªå°çš„ Hashtableï¼Œå®ƒä»¬æœ‰è‡ªå·±çš„é”ã€‚åªè¦å¤šä¸ªä¿®æ”¹æ“ä½œå‘ç”Ÿåœ¨ä¸åŒçš„æ®µä¸Šï¼Œå®ƒä»¬å°±å¯ä»¥å¹¶å‘è¿›è¡Œã€‚</p>\n<p>æœ‰äº›æ–¹æ³•éœ€è¦è·¨æ®µï¼Œæ¯”å¦‚  <code>size()</code>  å’Œ  <code>containsValue()</code> ï¼Œå®ƒä»¬å¯èƒ½éœ€è¦é”å®šæ•´ä¸ªè¡¨è€Œè€Œä¸ä»…ä»…æ˜¯æŸä¸ªæ®µï¼Œè¿™éœ€è¦<ins>æŒ‰é¡ºåº</ins>ï¼ˆæŒ‰é¡ºåºé˜²æ­¢äº†æ­»é”ï¼‰é”å®šæ‰€æœ‰æ®µï¼Œæ“ä½œå®Œæ¯•åï¼ŒåˆæŒ‰é¡ºåºé‡Šæ”¾æ‰€æœ‰æ®µçš„é”ã€‚</p>\n</li>\n</ol>\n<p>ConcurrentHashMap å®ç°åŸç†ï¼š</p>\n<p>ConcurrentHashMap ä½¿ç”¨<ins>åˆ†æ®µé”æŠ€æœ¯</ins>ï¼Œå°†æ•°æ®åˆ†æˆä¸€æ®µä¸€æ®µçš„å­˜å‚¨ï¼Œç„¶åç»™æ¯ä¸€æ®µæ•°æ®é…ä¸€æŠŠé”ï¼Œå½“ä¸€ä¸ªçº¿ç¨‹å ç”¨é”è®¿é—®å…¶ä¸­ä¸€ä¸ªæ®µæ•°æ®çš„æ—¶å€™ï¼Œå…¶ä»–æ®µçš„æ•°æ®ä¹Ÿèƒ½è¢«å…¶ä»–çº¿ç¨‹è®¿é—®ï¼Œèƒ½å¤Ÿå®ç°çœŸæ­£çš„å¹¶å‘è®¿é—®ã€‚</p>\n<p>å…¶ä¸­ï¼ŒSegment ç»§æ‰¿äº† ReentrantLockï¼Œè¡¨æ˜æ¯ä¸ªæ®µéƒ½å¯ä»¥å½“åšä¸€ä¸ªé”ï¼Œè¿™æ ·å¯¹æ¯ä¸ªæ®µä¸­çš„æ•°æ®éœ€è¦è¿›è¡ŒåŒæ­¥æ“ä½œçš„è¯éƒ½æ˜¯ä½¿ç”¨æ¯ä¸ª Segment å®¹å™¨å¯¹è±¡è‡ªèº«çš„é”æ¥å®ç°çš„ã€‚åªæœ‰éœ€è¦å¯¹å…¨å±€è¿›è¡Œæ”¹å˜æ—¶æ‰ä¼šé”å®šæ‰€æœ‰çš„æ®µã€‚</p>\n<blockquote>\n<p>è™½ç„¶ ConcurrentHashMap çš„åº•å±‚æ•°æ®ç»“æ„ï¼Œå’Œæ–¹æ³•çš„å®ç°ç»†èŠ‚å’Œ HashMap å¤§ä½“ä¸€è‡´ï¼Œä½†ä¸¤è€…åœ¨ç±»ç»“æ„ä¸Šå´æ²¡æœ‰ä»»ä½•å…³è”ã€‚</p>\n</blockquote>\n<h4 id=\"executors\"><a class=\"anchor\" href=\"#executors\">#</a> Executors</h4>\n<p>Executorã€Executorsã€ExecutorService ä¹‹é—´çš„å…³ç³»ï¼š</p>\n<ul>\n<li>Executors æ˜¯ JUC åŒ…ä¸‹çš„ä¸€ä¸ªç±»ï¼Œä¸»è¦ç”¨äºæä¾›çº¿ç¨‹æ± ç›¸å…³çš„æ“ä½œï¼Œå®ƒæä¾›äº†ä¸€ç³»åˆ—å·¥å‚æ–¹æ³•ç”¨äºåˆ›å»ºçº¿ç¨‹æ± ï¼Œè¿”å›çš„çº¿ç¨‹æ± éƒ½å®ç°äº† ExecutorService æ¥å£ã€‚Executors å¯ç”¨äºåˆ›å»ºå››ç±»çº¿ç¨‹æ± ï¼Œè¿™åœ¨å‰æ–‡ <code>å››ç§å¸¸è§çš„çº¿ç¨‹æ± </code> éƒ¨åˆ†å·²æœ‰è¯¦ç»†è¯´æ˜ã€‚</li>\n<li>è€Œ Executor åˆ™æ˜¯ Java çº¿ç¨‹æ± çš„è¶…çº§æ¥å£ï¼Œå®ƒæä¾›ä¸€ä¸ª  <code>void execute(Runnable command)</code>  æ–¹æ³•ï¼Œè¿™ä¸ªæ¥å£æˆ‘ä»¬ä¸€èˆ¬ä¸ç›´æ¥ä½¿ç”¨ï¼Œè€Œæ˜¯ç”¨å®ƒçš„ç»§æ‰¿æ¥å£ ExecutorServiceã€‚</li>\n<li>ExecutorService æ¥å£ç»§æ‰¿è‡ª Executor ï¼Œå®ƒæœ‰ä¸¤ä¸ªå®ç°ç±»ï¼Œåˆ†åˆ«æ˜¯ï¼šThreadPoolExecutor å’Œ ScheduledThreadPoolExecutor ã€‚</li>\n</ul>\n<p><img data-src=\"https://img.xfc-exclave.com/2021/09/a8b242b059f223b91f679504809658de1631547853.png\" alt=\"Executorç›¸å…³ç±»å›¾\" /></p>\n<h3 id=\"å‚è€ƒ\"><a class=\"anchor\" href=\"#å‚è€ƒ\">#</a> å‚è€ƒ</h3>\n<blockquote>\n<p>å‚è€ƒå†…å®¹æ¥æºäºç½‘ç»œï¼Œæœ¬æ–‡ä¸ä¿è¯å‚è€ƒé“¾æ¥çš„é•¿æœŸæœ‰æ•ˆæ€§ï¼Œä»¥åŠå‚è€ƒå†…å®¹çš„åŸåˆ›æ€§ã€‚</p>\n</blockquote>\n<ul>\n<li><span class=\"exturl\" data-url=\"aHR0cDovL2hvbGxpc2NodWFuZy5naXRlZS5pby90b2JldG9wamF2YWVy\">Java å·¥ç¨‹å¸ˆæˆç¥ä¹‹è·¯</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuaG9sbGlzY2h1YW5nLmNvbS9hcmNoaXZlcy85MzQ=\">https://www.hollischuang.com/archives/934</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3NoaW1pc28vYXJ0aWNsZS9kZXRhaWxzLzg5NjQ0MTQ=\">https://blog.csdn.net/shimiso/article/details/8964414</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mjk4MTQxOS9hcnRpY2xlL2RldGFpbHMvODYxNjIwNzE=\">https://blog.csdn.net/weixin_42981419/article/details/86162071</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L211X3dpbmQvYXJ0aWNsZS9kZXRhaWxzLzExMzgwNjY4MA==\">https://blog.csdn.net/mu_wind/article/details/113806680</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuY25ibG9ncy5jb20vaC0tZC9wLzE0MTc5MTQ0Lmh0bWw=\">https://www.cnblogs.com/h--d/p/14179144.html</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9sZDI0Ni5jb20vYXJ0aWNsZS8xNTc2MDcwOTI1NDY0\">https://ld246.com/article/1576070925464</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuamlhbnNodS5jb20vcC85YzVhN2QyMWMwMmY=\">https://www.jianshu.com/p/9c5a7d21c02f</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9ob25leXBwcy5jb20vamF2YS9sb2Nrcy1pbi1qYXZh\">https://honeypps.com/java/locks-in-java</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuaG9sbGlzY2h1YW5nLmNvbS9hcmNoaXZlcy8xNzE2\">https://www.hollischuang.com/archives/1716</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuamlhbnNodS5jb20vcC82ZmU0YmMzMzc0YTI=\">https://www.jianshu.com/p/6fe4bc3374a2</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuaG9sbGlzY2h1YW5nLmNvbS9hcmNoaXZlcy8zOTI4\">https://www.hollischuang.com/archives/3928</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3UwMTA0NDUzMDEvYXJ0aWNsZS9kZXRhaWxzLzExMTMyMjU2OQ==\">https://blog.csdn.net/u010445301/article/details/111322569</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9teS5vc2NoaW5hLm5ldC9ob3NlZS9ibG9nLzYzOTM1Mg==\">https://my.oschina.net/hosee/blog/639352</span></li>\n</ul>\n",
            "tags": [
                "è®¡ç®—æœºç§‘å­¦",
                "JAVAå­¦ä¹ è·¯çº¿",
                "åŸºç¡€ç¯‡",
                "java"
            ]
        },
        {
            "id": "https://www.chinmoku.cc/computer-science/java-learning-path/1-basic/01-java-basic/",
            "url": "https://www.chinmoku.cc/computer-science/java-learning-path/1-basic/01-java-basic/",
            "title": "JAVA åŸºç¡€çŸ¥è¯†å¤§ç›˜ç‚¹",
            "date_published": "2021-08-24T11:37:53.000Z",
            "content_html": "<div class=\"note info\">\n<p>æ³¨æ„ï¼Œæœ¬æ–‡å¹¶éæ˜¯é¢å‘åˆå­¦è€…çš„å­¦ä¹ æ•™ç¨‹ï¼Œè€Œæ˜¯é¢å‘æ‹¥æœ‰ä¸€å®šåŸºç¡€ï¼ˆå…¥é—¨ï¼‰ï¼Œæˆ–åˆçº§ã€ä¸­çº§ JAVA å¼€å‘äººå‘˜ï¼Œè€Œæ•´ç†å‡ºçš„ä¸€äº› JAVA åŸºç¡€ç›¸å…³çš„<span class=\"label primary\">å…³é”®æ€§çŸ¥è¯†</span>ï¼Œå› æ­¤ï¼Œéƒ¨åˆ†çŸ¥è¯†ç‚¹åªä¼šæå‡ºè¦ç‚¹æ¢—æ¦‚ï¼Œè€Œä¸ä¼šå…³æ³¨å…·ä½“ä»£ç ç¤ºä¾‹å’Œå®ç°ã€‚æœ¬æ–‡çš„ä¸»è¦ç›®çš„åœ¨äºå¸®åŠ©å·²æŒæ¡ç›¸å…³çŸ¥è¯†çš„å¼€å‘è€…ä»¬å¿«é€Ÿåœ°è¿›è¡ŒçŸ¥è¯†å›é¡¾ã€‚</p>\n</div>\n<h2 id=\"é¢å‘å¯¹è±¡\"><a class=\"anchor\" href=\"#é¢å‘å¯¹è±¡\">#</a> é¢å‘å¯¹è±¡</h2>\n<p>Java æŠ€æœ¯ä½“ç³»åŒ…æ‹¬ï¼š</p>\n<ol>\n<li>Java ç¨‹åºè®¾è®¡è¯­è¨€</li>\n<li>å„ç§ç¡¬ä»¶å¹³å°ä¸Šçš„ Java è™šæ‹Ÿæœºå®ç°</li>\n<li>Class æ–‡ä»¶æ ¼å¼</li>\n<li>Java ç±»åº“ API</li>\n<li>æ¥è‡ªå•†ä¸šæœºæ„å’Œå¼€æºç¤¾åŒºçš„ç¬¬ä¸‰æ–¹ Java ç±»åº“</li>\n</ol>\n<h3 id=\"ä»€ä¹ˆæ˜¯é¢å‘å¯¹è±¡\"><a class=\"anchor\" href=\"#ä»€ä¹ˆæ˜¯é¢å‘å¯¹è±¡\">#</a> ä»€ä¹ˆæ˜¯é¢å‘å¯¹è±¡ï¼Ÿ</h3>\n<h4 id=\"é¢å‘è¿‡ç¨‹\"><a class=\"anchor\" href=\"#é¢å‘è¿‡ç¨‹\">#</a> é¢å‘è¿‡ç¨‹</h4>\n<p>é¢å‘è¿‡ç¨‹ (Procedure Oriented) æ˜¯ä¸€ç§ä»¥è¿‡ç¨‹ä¸ºä¸­å¿ƒçš„ç¼–ç¨‹æ€æƒ³ã€‚è¿™äº›éƒ½æ˜¯ä»¥ä»€ä¹ˆæ­£åœ¨å‘ç”Ÿä¸ºä¸»è¦ç›®æ ‡è¿›è¡Œç¼–ç¨‹ï¼Œä¸åŒäºé¢å‘å¯¹è±¡çš„æ˜¯è°åœ¨å—å½±å“ã€‚ä¸é¢å‘å¯¹è±¡ç›¸å¯¹åº”çš„ï¼Œå³å­˜åœ¨äºæ—©æœŸç‰ˆæœ¬ C è¯­è¨€ä¸­çš„é¢å‘è¿‡ç¨‹ã€‚é¢å‘è¿‡ç¨‹å¼€å‘çš„è¿‡ç¨‹ï¼Œæœ‰ç‚¹ç±»ä¼¼äºæ ‘çŠ¶è°ƒç”¨å‡½æ•°ï¼Œæ ‘çŠ¶çš„æ ¹èŠ‚ç‚¹ä¸»ç¨‹åºå¯¹å‡½æ•°è¿›è¡Œå±‚å±‚è°ƒç”¨ã€‚</p>\n<p><strong>é¢å‘è¿‡ç¨‹çš„é—®é¢˜</strong></p>\n<ul>\n<li>\n<p>å¤ç”¨æ€§ä¸ä½³ï¼š</p>\n<p>æŒ‰è¿‡ç¨‹æ¥çš„è¯ï¼Œä¸åŒè¿‡ç¨‹ä¸­ç›¸ä¼¼çš„ä»£ç ä¹Ÿä¸å¥½è¿›è¡Œå¤ç”¨ï¼Œå‰åŠæ®µçš„è¿‡ç¨‹ä¸­ç”¨åˆ°çš„é€»è¾‘ï¼Œåœ¨ååŠæ®µå†æ¬¡ä½¿ç”¨çš„è¯éœ€è¦å†å†™ä¸€éï¼Œå¦‚æœæ˜¯ç›¸åŒçš„é€»è¾‘ï¼Œä¿®æ”¹ä¹Ÿä¼šå‡ºç°å¾ˆå¤šå¤æ‚é—®é¢˜ã€‚</p>\n</li>\n<li>\n<p>æ‰©å±•æ€§ä¸æ˜“</p>\n<p>ç›¸åŒçš„é€»è¾‘ï¼Œå¦‚æœè¦æœ‰ä¸¤ä»½ç›¸ä¼¼é€»è¾‘ï¼Œé‚£åœ¨é¢å‘è¿‡ç¨‹ä¸­ï¼Œå°±å¾ˆå¤šæ—¶å€™éœ€è¦å†™ä¸¤ä»½ã€‚</p>\n</li>\n<li>\n<p>è€¦åˆåº¦é«˜</p>\n<p>é¢å‘è¿‡ç¨‹å¾ˆéš¾å°†å†…å®¹å‰¥ç¦»å¼€ã€‚</p>\n</li>\n</ul>\n<h4 id=\"é¢å‘å¯¹è±¡-2\"><a class=\"anchor\" href=\"#é¢å‘å¯¹è±¡-2\">#</a> é¢å‘å¯¹è±¡</h4>\n<p>é¢å‘å¯¹è±¡ (Object Orientedï¼ŒOO) æ˜¯ä¸€ç§å¯¹ç°å®ä¸–ç•Œç†è§£å’ŒæŠ½è±¡çš„æ–¹æ³•ï¼Œæ˜¯è®¡ç®—æœºç¼–ç¨‹æŠ€æœ¯å‘å±•åˆ°ä¸€å®šé˜¶æ®µåçš„äº§ç‰©ã€‚é¢å‘å¯¹è±¡çš„ç¼–ç¨‹æ–¹å¼ä½¿å¾—æ¯ä¸€ä¸ªç±»éƒ½åªåšä¸€ä»¶äº‹ã€‚</p>\n<h4 id=\"é¢å‘å¯¹è±¡çš„ä¸‰å¤§åŸºæœ¬ç‰¹å¾\"><a class=\"anchor\" href=\"#é¢å‘å¯¹è±¡çš„ä¸‰å¤§åŸºæœ¬ç‰¹å¾\">#</a> é¢å‘å¯¹è±¡çš„ä¸‰å¤§åŸºæœ¬ç‰¹å¾</h4>\n<ul>\n<li>\n<p><strong>å°è£…</strong></p>\n<p>å°è£…ï¼Œä¹Ÿå°±æ˜¯æŠŠå®¢è§‚äº‹ç‰©å°è£…æˆæŠ½è±¡çš„ç±»ï¼Œå¹¶ä¸”ç±»å¯ä»¥æŠŠè‡ªå·±çš„æ•°æ®å’Œæ–¹æ³•åªè®©å¯ä¿¡çš„ç±»æˆ–è€…å¯¹è±¡æ“ä½œï¼Œå¯¹ä¸å¯ä¿¡çš„è¿›è¡Œä¿¡æ¯éšè—ã€‚</p>\n</li>\n<li>\n<p><strong>ç»§æ‰¿</strong></p>\n<p>ç»§æ‰¿æ˜¯æŒ‡è¿™æ ·ä¸€ç§èƒ½åŠ›ï¼šå®ƒå¯ä»¥ä½¿ç”¨ç°æœ‰ç±»çš„æ‰€æœ‰åŠŸèƒ½ï¼Œå¹¶åœ¨æ— éœ€é‡æ–°ç¼–å†™åŸæ¥ç±»çš„æƒ…å†µä¸‹å¯¹è¿™äº›åŠŸèƒ½è¿›è¡Œæ‰©å±•ã€‚é€šè¿‡ç»§æ‰¿åˆ›å»ºçš„æ–°ç±»ç§°ä¸ºã€Œå­ç±»ã€æˆ–ã€Œæ´¾ç”Ÿç±»ã€ï¼Œè¢«ç»§æ‰¿çš„ç±»ç§°ä¸ºã€ŒåŸºç±»ã€ã€ã€Œçˆ¶ç±»ã€æˆ–ã€Œè¶…ç±»ã€ã€‚è¦å®ç°ç»§æ‰¿ï¼Œå¯ä»¥é€šè¿‡ <strong>ç»§æ‰¿å’Œç»„åˆ</strong> æ¥å®ç°ã€‚</p>\n</li>\n<li>\n<p><strong>å¤šæ€</strong></p>\n<p>å¤šæ€æ€§æ˜¯å…è®¸ä½ å°†çˆ¶å¯¹è±¡è®¾ç½®æˆä¸ºå’Œä¸€ä¸ªæˆ–æ›´å¤šçš„ä»–çš„å­å¯¹è±¡ç›¸ç­‰çš„æŠ€æœ¯ï¼Œèµ‹å€¼ä¹‹åï¼Œçˆ¶å¯¹è±¡å°±å¯ä»¥æ ¹æ®å½“å‰èµ‹å€¼ç»™å®ƒçš„å­å¯¹è±¡çš„ç‰¹æ€§ä»¥ä¸åŒçš„æ–¹å¼è¿ä½œã€‚ç®€å•è¯´å°±æ˜¯ä¸€å¥è¯ï¼šå…è®¸å°†å­ç±»ç±»å‹çš„æŒ‡é’ˆèµ‹å€¼ç»™çˆ¶ç±»ç±»å‹çš„æŒ‡é’ˆã€‚<br />\nå®ç°å¤šæ€ï¼Œæœ‰ä¸¤ç§æ–¹å¼ï¼Œè¦†ç›–å’Œé‡è½½ã€‚ä¸¤è€…çš„åŒºåˆ«åœ¨äºï¼š<strong>è¦†ç›–åœ¨è¿è¡Œæ—¶å†³å®š</strong>ï¼Œ<strong>é‡è½½æ˜¯åœ¨ç¼–è¯‘æ—¶å†³å®š</strong>ã€‚<strong>å¹¶ä¸”è¦†ç›–å’Œé‡è½½çš„æœºåˆ¶ä¸åŒ</strong>ã€‚åœ¨ Java ä¸­ï¼Œé‡è½½æ–¹æ³•çš„ç­¾åå¿…é¡»ä¸åŒäºåŸå…ˆæ–¹æ³•çš„ï¼Œä½†å¯¹äºè¦†ç›–ç­¾åå¿…é¡»ç›¸åŒã€‚</p>\n</li>\n</ul>\n<h4 id=\"javaå¦‚ä½•å®ç°å¹³å°æ— å…³\"><a class=\"anchor\" href=\"#javaå¦‚ä½•å®ç°å¹³å°æ— å…³\">#</a> Java å¦‚ä½•å®ç°å¹³å°æ— å…³</h4>\n<p>å¹³å°æ— å…³æ€§å°±æ˜¯ä¸€ç§è¯­è¨€åœ¨è®¡ç®—æœºä¸Šçš„è¿è¡Œä¸å—å¹³å°çš„çº¦æŸï¼Œä¸€æ¬¡ç¼–è¯‘ï¼Œåˆ°å¤„æ‰§è¡Œï¼ˆWrite Once ,Run Anywhereï¼‰ã€‚å¯¹äº Java çš„å¹³å°æ— å…³æ€§çš„æ”¯æŒï¼Œå°±åƒå¯¹å®‰å…¨æ€§å’Œç½‘ç»œç§»åŠ¨æ€§çš„æ”¯æŒä¸€æ ·ï¼Œæ˜¯åˆ†å¸ƒåœ¨æ•´ä¸ª Java ä½“ç³»ç»“æ„ä¸­çš„ã€‚å…¶ä¸­æ‰®æ¼”è€…é‡è¦çš„è§’è‰²çš„æœ‰ Java è¯­è¨€è§„èŒƒã€Class æ–‡ä»¶ã€Java è™šæ‹Ÿæœºï¼ˆJVMï¼‰ç­‰ã€‚</p>\n<h4 id=\"jvmè¿˜æ”¯æŒå“ªäº›è¯­è¨€\"><a class=\"anchor\" href=\"#jvmè¿˜æ”¯æŒå“ªäº›è¯­è¨€\">#</a> JVM è¿˜æ”¯æŒå“ªäº›è¯­è¨€</h4>\n<ul>\n<li>Kotlin</li>\n<li>Clojure</li>\n<li>Groovy</li>\n<li>JRuby</li>\n<li>Jython</li>\n<li>Scala</li>\n</ul>\n<h3 id=\"å€¼ä¼ é€’\"><a class=\"anchor\" href=\"#å€¼ä¼ é€’\">#</a> å€¼ä¼ é€’</h3>\n<ul>\n<li>\n<p>å½¢å¼å‚æ•°ï¼š</p>\n<p>æ˜¯åœ¨å®šä¹‰å‡½æ•°åå’Œå‡½æ•°ä½“çš„æ—¶å€™ä½¿ç”¨çš„å‚æ•°ï¼Œç›®çš„æ˜¯ç”¨æ¥æ¥æ”¶è°ƒç”¨è¯¥å‡½æ•°æ—¶ä¼ å…¥çš„å‚æ•°ã€‚</p>\n</li>\n<li>\n<p>å®é™…å‚æ•°ï¼š</p>\n<p>åœ¨è°ƒç”¨æœ‰å‚å‡½æ•°æ—¶ï¼Œä¸»è°ƒå‡½æ•°å’Œè¢«è°ƒå‡½æ•°ä¹‹é—´æœ‰æ•°æ®ä¼ é€’å…³ç³»ã€‚åœ¨ä¸»è°ƒå‡½æ•°ä¸­è°ƒç”¨ä¸€ä¸ªå‡½æ•°æ—¶ï¼Œå‡½æ•°ååé¢æ‹¬å·ä¸­çš„å‚æ•°ç§°ä¸º â€œå®é™…å‚æ•°â€ã€‚</p>\n</li>\n</ul>\n<h4 id=\"å€¼ä¼ é€’-2\"><a class=\"anchor\" href=\"#å€¼ä¼ é€’-2\">#</a> å€¼ä¼ é€’</h4>\n<p>åœ¨æ–¹æ³•è¢«è°ƒç”¨æ—¶ï¼Œå®å‚é€šè¿‡å½¢å‚æŠŠå®ƒçš„å†…å®¹å‰¯æœ¬ä¼ å…¥æ–¹æ³•å†…éƒ¨ï¼Œæ­¤æ—¶å½¢å‚æ¥æ”¶åˆ°çš„å†…å®¹æ˜¯å®å‚å€¼çš„ä¸€ä¸ªæ‹·è´ï¼Œå› æ­¤åœ¨æ–¹æ³•å†…å¯¹å½¢å‚çš„ä»»ä½•æ“ä½œï¼Œéƒ½ä»…ä»…æ˜¯å¯¹è¿™ä¸ªå‰¯æœ¬çš„æ“ä½œï¼Œä¸å½±å“åŸå§‹å€¼çš„å†…å®¹ã€‚</p>\n<h4 id=\"å¼•ç”¨ä¼ å€¼\"><a class=\"anchor\" href=\"#å¼•ç”¨ä¼ å€¼\">#</a> å¼•ç”¨ä¼ å€¼</h4>\n<p>â€œå¼•ç”¨â€ ä¹Ÿå°±æ˜¯æŒ‡å‘çœŸå®å†…å®¹çš„åœ°å€å€¼ï¼Œåœ¨æ–¹æ³•è°ƒç”¨æ—¶ï¼Œå®å‚çš„åœ°å€é€šè¿‡æ–¹æ³•è°ƒç”¨è¢«ä¼ é€’ç»™ç›¸åº”çš„å½¢å‚ï¼Œåœ¨æ–¹æ³•ä½“å†…ï¼Œå½¢å‚å’Œå®å‚æŒ‡å‘åŒä¸€å—å†…å­˜åœ°å€ï¼Œå¯¹å½¢å‚çš„æ“ä½œä¼šå½±å“çš„çœŸå®å†…å®¹ã€‚</p>\n<h4 id=\"ä¸ºä»€ä¹ˆè¯´javaä¸­åªæœ‰å€¼ä¼ é€’\"><a class=\"anchor\" href=\"#ä¸ºä»€ä¹ˆè¯´javaä¸­åªæœ‰å€¼ä¼ é€’\">#</a> ä¸ºä»€ä¹ˆè¯´ Java ä¸­åªæœ‰å€¼ä¼ é€’</h4>\n<p>Java ä¸­çš„å¼•ç”¨ä¼ é€’å…¶å®è¿˜æ˜¯å€¼ä¼ é€’çš„ï¼Œåªä¸è¿‡å¯¹äºå¯¹è±¡å‚æ•°ï¼Œå€¼çš„å†…å®¹æ˜¯å¯¹è±¡çš„å¼•ç”¨ã€‚ç®€å•ç‚¹è¯´ï¼ŒJava ä¸­çš„ä¼ é€’ï¼Œæ˜¯å€¼ä¼ é€’ï¼Œè€Œè¿™ä¸ªå€¼ï¼Œå®é™…ä¸Šæ˜¯å¯¹è±¡çš„å¼•ç”¨ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥è¯´ Java çš„ä¼ é€’æ˜¯æŒ‰å…±äº«ä¼ é€’ï¼Œæˆ–è€…è¯´ Java ä¸­çš„ä¼ é€’æ˜¯å€¼ä¼ é€’ã€‚</p>\n<h3 id=\"ä¸‰å¤§åŸºæœ¬ç‰¹å¾\"><a class=\"anchor\" href=\"#ä¸‰å¤§åŸºæœ¬ç‰¹å¾\">#</a> ä¸‰å¤§åŸºæœ¬ç‰¹å¾</h3>\n<p>å°è£…ã€ç»§æ‰¿ã€å¤šæ€æ˜¯ Java é¢å‘å¯¹è±¡çš„ä¸‰å¤§åŸºæœ¬ç‰¹å¾ã€‚</p>\n<h4 id=\"ä»€ä¹ˆæ˜¯å¤šæ€\"><a class=\"anchor\" href=\"#ä»€ä¹ˆæ˜¯å¤šæ€\">#</a> ä»€ä¹ˆæ˜¯å¤šæ€</h4>\n<blockquote>\n<p>è§  <code>é¢å‘å¯¹è±¡</code>  éƒ¨åˆ†ã€‚</p>\n</blockquote>\n<ul>\n<li>\n<p>æ–¹æ³•é‡å†™ä¸é‡è½½</p>\n<table>\n<thead>\n<tr>\n<th>åŒºåˆ«</th>\n<th>é‡è½½</th>\n<th>é‡å†™</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>è‹±æ–‡</td>\n<td>Overload</td>\n<td>Override</td>\n</tr>\n<tr>\n<td>ç›®çš„</td>\n<td>å¢åŠ ç¨‹åºçš„å¯è¯»æ€§</td>\n<td>æä¾›å…¶è¶…çº§ç±»å·²ç»æä¾›çš„æ–¹æ³•çš„ç‰¹å®šå®ç°</td>\n</tr>\n<tr>\n<td>èŒƒå›´</td>\n<td>å‘ç”Ÿåœ¨ä¸€ä¸ªç±»ä¸­</td>\n<td>å‘ç”Ÿåœ¨ç»§æ‰¿ç±»ä¸­</td>\n</tr>\n<tr>\n<td>å‚æ•°</td>\n<td>å‚æ•°å¿…é¡»ä¸åŒ</td>\n<td>å‚æ•°å¿…é¡»ç›¸åŒ</td>\n</tr>\n</tbody>\n</table>\n</li>\n</ul>\n<h4 id=\"javaçš„ç»§æ‰¿ä¸å®ç°\"><a class=\"anchor\" href=\"#javaçš„ç»§æ‰¿ä¸å®ç°\">#</a> Java çš„ç»§æ‰¿ä¸å®ç°</h4>\n<ul>\n<li>\n<p><strong>ç»§æ‰¿</strong></p>\n<p>ç»§æ‰¿æ˜¯ä»å·²æœ‰çš„ç±»ä¸­æ´¾ç”Ÿå‡ºæ–°çš„ç±»ï¼Œæ–°çš„ç±»èƒ½å¸æ”¶å·²æœ‰ç±»çš„æ•°æ®å±æ€§å’Œè¡Œä¸ºï¼Œå¹¶èƒ½æ‰©å±•æ–°çš„èƒ½åŠ›ã€‚Java ç»§æ‰¿æ˜¯ä½¿ç”¨å·²å­˜åœ¨çš„ç±»çš„å®šä¹‰ä½œä¸ºåŸºç¡€å»ºç«‹æ–°ç±»çš„æŠ€æœ¯ï¼Œæ–°ç±»çš„å®šä¹‰å¯ä»¥å¢åŠ æ–°çš„æ•°æ®æˆ–æ–°çš„åŠŸèƒ½ï¼Œä¹Ÿå¯ä»¥ç”¨çˆ¶ç±»çš„åŠŸèƒ½ï¼Œä½†ä¸èƒ½é€‰æ‹©æ€§åœ°ç»§æ‰¿çˆ¶ç±»ã€‚ç»§æ‰¿åªèƒ½å•ç»§æ‰¿ã€‚</p>\n</li>\n<li>\n<p><strong>å®ç°</strong></p>\n<p>å¦‚æœå¤šä¸ªç±»å¤„ç†çš„ç›®æ ‡æ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯å¤„ç†çš„æ–¹æ³•æ–¹å¼ä¸åŒï¼Œé‚£ä¹ˆå°±å®šä¹‰ä¸€ä¸ªæ¥å£ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªæ ‡å‡†ï¼Œè®©ä»–ä»¬çš„å®ç°è¿™ä¸ªæ¥å£ï¼Œå„è‡ªå®ç°è‡ªå·±å…·ä½“çš„å¤„ç†æ–¹æ³•æ¥å¤„ç†é‚£ä¸ªç›®æ ‡ã€‚å®ç°å¯ä»¥å¤šå®ç°ã€‚</p>\n</li>\n</ul>\n<h4 id=\"æ„é€ å‡½æ•°\"><a class=\"anchor\" href=\"#æ„é€ å‡½æ•°\">#</a> æ„é€ å‡½æ•°</h4>\n<p>æ„é€ å‡½æ•°å¯ä»¥å«åšæ„é€ å™¨ï¼Œå®ƒçš„å‡½æ•°åä¸ç±»åç›¸åŒï¼Œä¸ç”¨å®šä¹‰è¿”å›å€¼ç±»å‹ï¼Œä¹Ÿæ²¡æœ‰å…·ä½“çš„è¿”å›å€¼ã€‚æ„é€ å‡½æ•°æ˜¯åœ¨æ„å»ºåˆ›é€ å¯¹è±¡æ—¶è°ƒç”¨å‡½æ•°ï¼Œä½œç”¨æ˜¯å¯ä»¥ç»™å¯¹è±¡è¿›è¡Œåˆå§‹åŒ–ï¼Œåˆ›å»ºå¯¹è±¡éƒ½å¿…é¡»è¦é€šè¿‡æ„é€ å‡½æ•°åˆå§‹åŒ–ã€‚</p>\n<ul>\n<li>\n<p>é»˜è®¤æ„é€ å‡½æ•°</p>\n<p>ä¸€ä¸ªç±»ä¸­å¦‚æœæ²¡æœ‰å®šä¹‰è¿‡æ„é€ å‡½æ•°ï¼Œé‚£ä¹ˆè¯¥ç±»ä¼šæœ‰ä¸€ä¸ªé»˜è®¤çš„ç©ºå‚æ•°æ„é€ å‡½æ•°ã€‚å¦‚æœåœ¨ç±»ä¸­å®šä¹‰äº†æŒ‡å®šçš„æ„é€ å‡½æ•°ï¼Œé‚£ä¹ˆè¯¥ç±»ä¸­çš„é»˜è®¤æ„é€ å‡½æ•°å°±æ²¡æœ‰äº†ã€‚</p>\n</li>\n</ul>\n<h4 id=\"å˜é‡\"><a class=\"anchor\" href=\"#å˜é‡\">#</a> å˜é‡</h4>\n<ul>\n<li>\n<p>ç±»å˜é‡</p>\n<p>é™æ€å˜é‡å³ç±»å˜é‡ï¼Œä½äºæ–¹æ³•åŒºï¼Œä¸ºæ‰€æœ‰å¯¹è±¡å…±äº«ï¼Œå…±äº«ä¸€ä»½å†…å­˜ï¼Œä¸€æ—¦é™æ€å˜é‡è¢«ä¿®æ”¹ï¼Œå…¶ä»–å¯¹è±¡å‡å¯¹ä¿®æ”¹å¯è§ï¼Œæ•…çº¿ç¨‹éå®‰å…¨ã€‚ç±»å˜é‡åˆç§°å…¨å±€å˜é‡æˆ–é™æ€å˜é‡ï¼Œéœ€è¦ä½¿ç”¨ static å…³é”®å­—ä¿®é¥°ã€‚ç±»çº§å˜é‡åœ¨ç±»å®šä¹‰åå°±å·²ç»å­˜åœ¨ï¼Œå ç”¨å†…å­˜ç©ºé—´ï¼Œå¯ä»¥é€šè¿‡ç±»åæ¥è®¿é—®ï¼Œä¸éœ€è¦å®ä¾‹åŒ–ã€‚</p>\n</li>\n<li>\n<p>æˆå‘˜å˜é‡</p>\n<ol>\n<li>æˆå‘˜å˜é‡å®šä¹‰åœ¨ç±»ä¸­ï¼Œåœ¨æ•´ä¸ªç±»ä¸­éƒ½å¯ä»¥è¢«è®¿é—®ã€‚</li>\n<li>æˆå‘˜å˜é‡éšç€å¯¹è±¡çš„å»ºç«‹è€Œå»ºç«‹ï¼Œéšç€å¯¹è±¡çš„æ¶ˆå¤±è€Œæ¶ˆå¤±ï¼Œå­˜åœ¨äºå¯¹è±¡æ‰€åœ¨çš„å †å†…å­˜ä¸­ã€‚</li>\n<li>æˆå‘˜å˜é‡æœ‰é»˜è®¤åˆå§‹åŒ–å€¼ã€‚</li>\n<li>å®ä¾‹åŒ–åæ‰ä¼šåˆ†é…å†…å­˜ç©ºé—´ï¼Œæ‰èƒ½è®¿é—®ã€‚</li>\n</ol>\n<blockquote>\n<p>æˆå‘˜å˜é‡ = åŸºæœ¬æ•°æ®ç±»å‹å˜é‡ + å®ä¾‹å˜é‡ã€‚</p>\n<p>å®ä¾‹å˜é‡ï¼šå•ä¾‹æ¨¡å¼ï¼ˆåªæœ‰ä¸€ä¸ªå¯¹è±¡å®ä¾‹å­˜åœ¨ï¼‰çº¿ç¨‹éå®‰å…¨ï¼Œéå•ä¾‹çº¿ç¨‹å®‰å…¨ã€‚</p>\n</blockquote>\n</li>\n<li>\n<p>å±€éƒ¨å˜é‡</p>\n<p>å› ä¸ºå±€éƒ¨å˜é‡å­˜åœ¨äºæ–¹æ³•å†…éƒ¨ï¼Œä¸ä¼šä¸å…¶ä»–çº¿ç¨‹å…±äº«ï¼Œå³ä¸ä¼šå­˜åœ¨å¹¶å‘é—®é¢˜ï¼Œå› æ­¤æ˜¯çº¿ç¨‹å®‰å…¨å¸¦ã€‚è¿™ç§è§£å†³é—®é¢˜çš„æŠ€æœ¯ä¹Ÿå«åšçº¿ç¨‹å°é—­ã€‚</p>\n<ol>\n<li>å±€éƒ¨å˜é‡åªå®šä¹‰åœ¨å±€éƒ¨èŒƒå›´å†…ï¼Œå¦‚ï¼šå‡½æ•°å†…ï¼Œè¯­å¥å†…ç­‰ï¼Œåªåœ¨æ‰€å±çš„åŒºåŸŸæœ‰æ•ˆã€‚</li>\n<li>å±€éƒ¨å˜é‡å­˜åœ¨äºæ ˆå†…å­˜ä¸­ï¼Œä½œç”¨çš„èŒƒå›´ç»“æŸï¼Œå˜é‡ç©ºé—´ä¼šè‡ªåŠ¨é‡Šæ”¾ã€‚</li>\n<li>å±€éƒ¨å˜é‡æ²¡æœ‰é»˜è®¤åˆå§‹åŒ–å€¼ã€‚</li>\n</ol>\n</li>\n</ul>\n<p>åœ¨ä½¿ç”¨å˜é‡æ—¶éœ€è¦éµå¾ª <strong>å°±è¿‘åŸåˆ™</strong> ï¼Œé¦–å…ˆåœ¨å±€éƒ¨èŒƒå›´æŸ¥æ‰¾ï¼Œæ¥ç€åœ¨æˆå‘˜ä½ç½®æ‰¾ã€‚</p>\n<h4 id=\"ä½œç”¨åŸŸ\"><a class=\"anchor\" href=\"#ä½œç”¨åŸŸ\">#</a> ä½œç”¨åŸŸ</h4>\n<p>åœ¨ Java ä¸­ï¼Œå˜é‡çš„ä½œç”¨åŸŸåˆ†ä¸ºå››ä¸ªçº§åˆ«ï¼šç±»çº§ã€å¯¹è±¡å®ä¾‹çº§ã€æ–¹æ³•çº§ã€å—çº§ã€‚</p>\n<p>æˆå‘˜å˜é‡æˆ–æ–¹æ³•çš„ä½œç”¨åŸŸ</p>\n<ul>\n<li><strong>public</strong> è¡¨æ˜è¯¥æˆå‘˜å˜é‡æˆ–è€…æ–¹æ³•å¯¹æ‰€æœ‰ç±»æˆ–è€…å¯¹è±¡éƒ½æ˜¯å¯è§çš„ï¼Œæ‰€æœ‰ç±»æˆ–è€…å¯¹è±¡éƒ½å¯ä»¥ç›´æ¥è®¿é—®ã€‚</li>\n<li><strong>private</strong> è¡¨æ˜è¯¥æˆå‘˜å˜é‡æˆ–è€…æ–¹æ³•æ˜¯ç§æœ‰çš„ï¼Œåªæœ‰å½“å‰ç±»å¯¹å…¶å…·æœ‰è®¿é—®æƒé™ï¼Œé™¤æ­¤ä¹‹å¤–çš„ç±»æˆ–è€…å¯¹è±¡éƒ½æ²¡æœ‰è®¿é—®æƒé™ã€‚</li>\n<li><strong>protected</strong> è¡¨æ˜è¯¥æˆå‘˜å˜é‡æˆ–è€…æ–¹æ³•åªå¯¹è‡ªå·±åŠå…¶å­ç±»å¯è§ï¼Œå³è‡ªå·±å’Œå­ç±»å…·æœ‰è®¿é—®æƒé™ã€‚é™¤æ­¤ä¹‹å¤–çš„éƒ½æ²¡æœ‰è®¿é—®æƒé™ã€‚</li>\n<li><strong>default</strong> è¡¨æ˜è¯¥æˆå‘˜å˜é‡æˆ–è€…æ–¹æ³•å¯¹è‡ªå·±æˆ–è€…ä¸å…¶ä½äºåŒä¸€åŒ…å†…çš„ç±»å¯è§ã€‚è‹¥çˆ¶ç±»å’Œå­ç±»ä½äºåŒä¸€åŒ…å†…ï¼Œåˆ™å­ç±»å¯¹äºçˆ¶ç±»çš„ default æˆå‘˜å˜é‡æˆ–è€…æ–¹æ³•å…·æœ‰è®¿é—®æƒé™ï¼Œè‹¥ä½äºä¸åŒåŒ…å†…ï¼Œåˆ™æ²¡æœ‰è®¿é—®æƒé™ã€‚</li>\n</ul>\n<h3 id=\"äº”å¤§åŸºæœ¬åŸåˆ™\"><a class=\"anchor\" href=\"#äº”å¤§åŸºæœ¬åŸåˆ™\">#</a> äº”å¤§åŸºæœ¬åŸåˆ™</h3>\n<p>é¢å‘å¯¹è±¡éµå¾ªäº”å¤§åŸºæœ¬åŸåˆ™ï¼š</p>\n<ol>\n<li>\n<p>å•ä¸€èŒè´£åŸåˆ™</p>\n<p>SRPï¼ˆSingle Responsibility Principleï¼‰ï¼Œæ˜¯æŒ‡ä¸€ä¸ªç±»çš„åŠŸèƒ½å•ä¸€ï¼Œå¯ä»¥çœ‹åšæ˜¯ä½è€¦åˆé«˜å†…èšæ€æƒ³çš„å»¶ä¼¸ã€‚</p>\n</li>\n<li>\n<p>å¼€æ”¾å°é—­åŸåˆ™</p>\n<p>OCPï¼ˆOpen-Close Principleï¼‰ï¼Œåœ¨è®¾è®¡ä¸€ä¸ªç±»æˆ–è€…ä¸€ä¸ªæ¨¡å—ï¼Œåœ¨æ‰©å±•æ€§æ–¹ä¾¿åº”å½“æ˜¯å¼€æ”¾çš„ï¼Œè€Œåœ¨æ›´æ”¹æ€§æ–¹é¢ï¼Œåˆ™åº”å½“æ˜¯å°é—­çš„ã€‚</p>\n</li>\n<li>\n<p>é‡Œæ°æ›¿æ¢åŸåˆ™</p>\n<p>LSPï¼ˆLiskov Substitution Principleï¼‰ï¼Œä»»ä½•åŸºç±»å¯ä»¥å‡ºç°çš„åœ°æ–¹ï¼Œå­ç±»ä¸€å®šå¯ä»¥å‡ºç°ã€‚</p>\n</li>\n<li>\n<p>ä¾èµ–å€’ç½®åŸåˆ™</p>\n<p>DIPï¼ˆDependency Inversion Principleï¼‰ï¼Œé«˜å±‚æ¬¡çš„æ¨¡å—ä¸åº”è¯¥ä¾èµ–äºä½å±‚æ¬¡çš„æ¨¡å—ï¼Œä»–ä»¬éƒ½åº”è¯¥ä¾èµ–äºæŠ½è±¡ã€‚æŠ½è±¡ä¸åº”è¯¥ä¾èµ–äºå…·ä½“å®ç°ï¼Œå…·ä½“å®ç°åº”è¯¥ä¾èµ–äºæŠ½è±¡ã€‚</p>\n</li>\n<li>\n<p>æ¥å£éš”ç¦»åŸåˆ™</p>\n<p>ISPï¼ˆInterface Segregation Principleï¼‰ï¼Œæ¥å£ç«¯ä¸åº”è¯¥ä¾èµ–å®ƒä¸éœ€è¦çš„æ¥å£ï¼Œä¸€ä¸ªç±»å¯¹å¦ä¸€ä¸ªç±»çš„ä¾èµ–åº”è¯¥å»ºç«‹åœ¨æœ€å°çš„æ¥å£ä¸Šã€‚</p>\n</li>\n</ol>\n<h2 id=\"java-åŸºç¡€\"><a class=\"anchor\" href=\"#java-åŸºç¡€\">#</a> Java åŸºç¡€</h2>\n<h3 id=\"åŸºæœ¬æ•°æ®ç±»å‹\"><a class=\"anchor\" href=\"#åŸºæœ¬æ•°æ®ç±»å‹\">#</a> åŸºæœ¬æ•°æ®ç±»å‹</h3>\n<p>å˜é‡å°±æ˜¯ç”³è¯·å†…å­˜æ¥å­˜å‚¨å€¼ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå½“åˆ›å»ºå˜é‡çš„æ—¶å€™ï¼Œéœ€è¦åœ¨å†…å­˜ä¸­ç”³è¯·ç©ºé—´ã€‚å†…å­˜ç®¡ç†ç³»ç»Ÿæ ¹æ®å˜é‡çš„ç±»å‹ä¸ºå˜é‡åˆ†é…å­˜å‚¨ç©ºé—´ï¼Œåˆ†é…çš„ç©ºé—´åªèƒ½ç”¨æ¥å‚¨å­˜è¯¥ç±»å‹æ•°æ®ã€‚å› æ­¤ï¼Œé€šè¿‡å®šä¹‰ä¸åŒç±»å‹çš„å˜é‡ï¼Œå¯ä»¥åœ¨å†…å­˜ä¸­å‚¨å­˜æ•´æ•°ã€å°æ•°æˆ–è€…å­—ç¬¦ã€‚Java è¯­è¨€æä¾›äº†å…«ç§åŸºæœ¬ç±»å‹ã€‚å…­ç§æ•°å­—ç±»å‹ï¼ˆå››ä¸ªæ•´æ•°å‹ï¼Œä¸¤ä¸ªæµ®ç‚¹å‹ï¼‰ï¼Œä¸€ç§å­—ç¬¦ç±»å‹ï¼Œè¿˜æœ‰ä¸€ç§å¸ƒå°”å‹ã€‚</p>\n<h4 id=\"8ç§åŸºæœ¬æ•°æ®ç±»å‹\"><a class=\"anchor\" href=\"#8ç§åŸºæœ¬æ•°æ®ç±»å‹\">#</a> 8 ç§åŸºæœ¬æ•°æ®ç±»å‹</h4>\n<h5 id=\"æ•´æ•°å‹\"><a class=\"anchor\" href=\"#æ•´æ•°å‹\">#</a> æ•´æ•°å‹</h5>\n<ul>\n<li>byte</li>\n<li>int</li>\n<li>short</li>\n<li>long</li>\n</ul>\n<h5 id=\"æµ®ç‚¹å‹\"><a class=\"anchor\" href=\"#æµ®ç‚¹å‹\">#</a> æµ®ç‚¹å‹</h5>\n<p>é€šå¸¸çš„æµ®ç‚¹å‹æ•°æ®åœ¨ä¸å£°æ˜çš„æƒ…å†µä¸‹éƒ½æ˜¯ double å‹çš„ï¼Œå¦‚æœè¦è¡¨ç¤ºä¸€ä¸ªæ•°æ®æ—¶ float å‹çš„ï¼Œå¯ä»¥åœ¨æ•°æ®åé¢åŠ ä¸Š  <code>F</code>  ã€‚æµ®ç‚¹å‹çš„æ•°æ®æ˜¯ä¸èƒ½å®Œå…¨ç²¾ç¡®çš„ï¼Œæœ‰æ—¶å€™åœ¨è®¡ç®—æ—¶å¯èƒ½å‡ºç°å°æ•°ç‚¹æœ€åå‡ ä½å‡ºç°æµ®åŠ¨ï¼Œè¿™æ—¶æ­£å¸¸çš„ã€‚</p>\n<ul>\n<li>\n<p>float</p>\n<p>floatï¼šå•ç²¾åº¦ï¼Œåœ¨è®¡ç®—æœºä¸­å­˜å‚¨å ç”¨ 4 å­—èŠ‚ï¼Œä¹Ÿ 32 ä½ï¼Œæœ‰æ•ˆä½æ•°ä¸º 7 ä½ã€‚</p>\n</li>\n<li>\n<p>double</p>\n<p>doubleï¼šåŒç²¾åº¦ï¼Œåœ¨è®¡ç®—æœºä¸­å­˜å‚¨å ç”¨ 8 å­—èŠ‚ï¼Œ64 ä½ï¼Œæœ‰æ•ˆä½æ•°ä¸º 16 ä½ã€‚</p>\n</li>\n</ul>\n<h5 id=\"å­—ç¬¦å‹\"><a class=\"anchor\" href=\"#å­—ç¬¦å‹\">#</a> å­—ç¬¦å‹</h5>\n<ul>\n<li>\n<p>char</p>\n<p>char æœ‰ä»¥ä¸‹çš„åˆå§‹åŒ–æ–¹å¼ï¼š</p>\n<ul>\n<li>\n<p>char ch = 'a'; // å¯ä»¥æ˜¯æ±‰å­—ï¼Œå› ä¸ºæ˜¯ Unicode ç¼–ç </p>\n</li>\n<li>\n<p>char ch = 1010; // å¯ä»¥æ˜¯åè¿›åˆ¶æ•°ã€å…«è¿›åˆ¶æ•°ã€åå…­è¿›åˆ¶æ•°ç­‰ç­‰ã€‚</p>\n</li>\n<li>\n<p>char ch = '\\0'; // å¯ä»¥ç”¨å­—ç¬¦ç¼–ç æ¥åˆå§‹åŒ–ï¼Œå¦‚ï¼š'\\0' è¡¨ç¤ºç»“æŸç¬¦ï¼Œå®ƒçš„ ASCII ç æ˜¯ 0ï¼Œè¿™å¥è¯çš„æ„æ€å’Œ ch = 0 æ˜¯ä¸€ä¸ªæ„æ€ã€‚</p>\n</li>\n</ul>\n</li>\n</ul>\n<h5 id=\"å¸ƒå°”å‹\"><a class=\"anchor\" href=\"#å¸ƒå°”å‹\">#</a> å¸ƒå°”å‹</h5>\n<ul>\n<li>\n<p>boolean</p>\n<p>ä¾‹ï¼šboolean flag = false;</p>\n</li>\n</ul>\n<h5 id=\"åŸºæœ¬æ•°æ®ç±»å‹å¯¹æ¯”\"><a class=\"anchor\" href=\"#åŸºæœ¬æ•°æ®ç±»å‹å¯¹æ¯”\">#</a> åŸºæœ¬æ•°æ®ç±»å‹å¯¹æ¯”</h5>\n<table>\n<thead>\n<tr>\n<th>æ•°æ®ç±»å‹åç§°</th>\n<th>å ç”¨å­—èŠ‚</th>\n<th>ä½æ•°</th>\n<th>é»˜è®¤å€¼</th>\n<th>å–å€¼èŒƒå›´</th>\n<th>å°è£…å™¨ç±»</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>byte</td>\n<td>1</td>\n<td>8</td>\n<td>0</td>\n<td>-2^7 - 2^7-1[-128ï½127]</td>\n<td>Byte</td>\n</tr>\n<tr>\n<td>short</td>\n<td>2</td>\n<td>16</td>\n<td>0</td>\n<td>-2^15 - 2^15-1</td>\n<td>Short</td>\n</tr>\n<tr>\n<td>int</td>\n<td>4</td>\n<td>32</td>\n<td>0</td>\n<td>-2^31 - 2^31-1</td>\n<td>Integer</td>\n</tr>\n<tr>\n<td>long</td>\n<td>8</td>\n<td>64</td>\n<td>0L</td>\n<td>-2^63 - 2^63-1</td>\n<td>Long</td>\n</tr>\n<tr>\n<td>float</td>\n<td>4</td>\n<td>32</td>\n<td>0.0f</td>\n<td>-2^31 - 2^31-1</td>\n<td>Float</td>\n</tr>\n<tr>\n<td>double</td>\n<td>8</td>\n<td>64</td>\n<td>0.0d</td>\n<td>-2^63 - 2^63-1</td>\n<td>Double</td>\n</tr>\n<tr>\n<td>char</td>\n<td>2</td>\n<td>16</td>\n<td>'\\u0000'</td>\n<td>0 - 2^16-1</td>\n<td>Character</td>\n</tr>\n<tr>\n<td>boolean</td>\n<td>1</td>\n<td>8</td>\n<td>false</td>\n<td>trueã€false</td>\n<td>Boolean</td>\n</tr>\n</tbody>\n</table>\n<h4 id=\"3ç§å¼•ç”¨æ•°æ®ç±»å‹\"><a class=\"anchor\" href=\"#3ç§å¼•ç”¨æ•°æ®ç±»å‹\">#</a> 3 ç§å¼•ç”¨æ•°æ®ç±»å‹</h4>\n<p>åŸºæœ¬æ•°æ®ç±»å‹å’Œå¼•ç”¨æ•°æ®ç±»å‹çš„åŒºåˆ«ä¸»è¦åœ¨å­˜å‚¨æ–¹å¼ä¸Šï¼ŒåŸºæœ¬æ•°æ®ç±»å‹åœ¨è¢«åˆ›å»ºæ—¶ï¼Œåœ¨æ ˆä¸Šç»™å…¶åˆ’åˆ†ä¸€å—å†…å­˜ï¼Œå°†æ•°å€¼ç›´æ¥å­˜å‚¨åœ¨æ ˆä¸Šï¼›å¼•ç”¨æ•°æ®ç±»å‹åœ¨è¢«åˆ›å»ºæ—¶ï¼Œé¦–å…ˆè¦åœ¨æ ˆä¸Šç»™å…¶å¼•ç”¨ï¼ˆå¥æŸ„ï¼‰åˆ†é…ä¸€å—å†…å­˜ï¼Œè€Œå¯¹è±¡çš„å…·ä½“ä¿¡æ¯éƒ½å­˜å‚¨åœ¨å †å†…å­˜ä¸Šï¼Œç„¶åç”±æ ˆä¸Šé¢çš„å¼•ç”¨æŒ‡å‘å †ä¸­å¯¹è±¡çš„åœ°å€ã€‚</p>\n<ul>\n<li>ç±»ï¼ˆå¯¹è±¡ï¼‰</li>\n<li>æ¥å£</li>\n<li>æ•°ç»„</li>\n</ul>\n<h3 id=\"è‡ªåŠ¨æ‹†è£…ç®±\"><a class=\"anchor\" href=\"#è‡ªåŠ¨æ‹†è£…ç®±\">#</a> è‡ªåŠ¨æ‹†è£…ç®±</h3>\n<p>è‡ªåŠ¨ç±»å‹è½¬æ¢æ—¶ï¼Œè½¬æ¢å‰çš„æ•°æ®ç±»å‹çš„ä½æ•°ä½äºè½¬æ¢åçš„æ•°æ®ç±»å‹ã€‚</p>\n<blockquote>\n<p>ä½  -------------------------------------------------------------&gt;  é«˜</p>\n<p>byte,short,charâ€”&gt; int â€”&gt; longâ€”&gt; float â€”&gt; double</p>\n</blockquote>\n<p>æ•°æ®ç±»å‹è½¬æ¢å¿…é¡»æ»¡è¶³å¦‚ä¸‹è§„åˆ™ï¼š</p>\n<ul>\n<li>\n<p>ä¸èƒ½å¯¹ boolean ç±»å‹è¿›è¡Œç±»å‹è½¬æ¢ã€‚</p>\n</li>\n<li>\n<p>ä¸èƒ½æŠŠå¯¹è±¡ç±»å‹è½¬æ¢æˆä¸ç›¸å…³ç±»çš„å¯¹è±¡ã€‚</p>\n</li>\n<li>\n<p>ç”±å¤§åˆ°å°ä¼šä¸¢å¤±ç²¾åº¦ï¼šåœ¨æŠŠå®¹é‡å¤§çš„ç±»å‹è½¬æ¢ä¸ºå®¹é‡å°çš„ç±»å‹æ—¶å¿…é¡»ä½¿ç”¨å¼ºåˆ¶ç±»å‹è½¬æ¢ã€‚</p>\n<p>å¼ºåˆ¶ç±»å‹è½¬æ¢</p>\n<ul>\n<li>æ¡ä»¶æ˜¯è½¬æ¢çš„æ•°æ®ç±»å‹å¿…é¡»æ˜¯å…¼å®¹çš„ã€‚</li>\n<li>æ ¼å¼ï¼š(type) value type æ˜¯è¦å¼ºåˆ¶ç±»å‹è½¬æ¢åçš„æ•°æ®ç±»å‹</li>\n</ul>\n</li>\n<li>\n<p>è½¬æ¢è¿‡ç¨‹ä¸­å¯èƒ½å¯¼è‡´æº¢å‡ºæˆ–æŸå¤±ç²¾åº¦ï¼Œä¾‹å¦‚ï¼š</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span><span class=\"token number\">128</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">byte</span> b <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">byte</span><span class=\"token punctuation\">)</span>i<span class=\"token punctuation\">;</span><span class=\"token comment\">// -128</span></pre></td></tr></table></figure></li>\n<li>\n<p>æµ®ç‚¹æ•°åˆ°æ•´æ•°çš„è½¬æ¢æ˜¯é€šè¿‡èˆå¼ƒå°æ•°å¾—åˆ°ï¼Œè€Œä¸æ˜¯å››èˆäº”å…¥ã€‚</p>\n</li>\n</ul>\n<h4 id=\"åŒ…è£…ç±»å‹\"><a class=\"anchor\" href=\"#åŒ…è£…ç±»å‹\">#</a> åŒ…è£…ç±»å‹</h4>\n<p>åŒ…è£…ç±»å‹ä½¿å¾—åŸºæœ¬æ•°æ®ç±»å‹ä¸­çš„å˜é‡å…·æœ‰äº†ç±»ä¸­å¯¹è±¡çš„ç‰¹å¾ã€‚åŸºæœ¬æ•°æ®ç±»å‹ï¼Œä½¿ç”¨èµ·æ¥éå¸¸æ–¹ä¾¿ï¼Œä½†æ˜¯æ²¡æœ‰å¯¹åº”çš„æ–¹æ³•æ¥æ“ä½œè¿™äº›åŸºæœ¬ç±»å‹çš„æ•°æ®ï¼Œå¯ä»¥ä½¿ç”¨ä¸€ä¸ªç±»ï¼ŒæŠŠåŸºæœ¬æ•°æ®ç±»å‹çš„æ•°æ®è£…èµ·æ¥ï¼Œè¿™ä¸ªç±»å«åšåŒ…è£…ç±»ï¼ˆwrapperï¼‰ã€‚è¿™æ ·æˆ‘ä»¬å¯ä»¥è°ƒç”¨ç±»ä¸­çš„æ–¹æ³•ã€‚</p>\n<h4 id=\"åŸºæœ¬ç±»å‹\"><a class=\"anchor\" href=\"#åŸºæœ¬ç±»å‹\">#</a> åŸºæœ¬ç±»å‹</h4>\n<blockquote>\n<p>è§åŸºæœ¬æ•°æ®ç±»å‹éƒ¨åˆ†</p>\n</blockquote>\n<h4 id=\"è‡ªåŠ¨æ‹†è£…ç®±-2\"><a class=\"anchor\" href=\"#è‡ªåŠ¨æ‹†è£…ç®±-2\">#</a> è‡ªåŠ¨æ‹†è£…ç®±</h4>\n<p>è‡ªåŠ¨è£…ç®±æ—¶ç¼–è¯‘å™¨è°ƒç”¨  <code>valueOf</code>  æ–¹æ³•å°†åŸå§‹ç±»å‹å€¼è½¬æ¢æˆå¯¹è±¡ï¼ŒåŒæ—¶è‡ªåŠ¨æ‹†ç®±æ—¶ï¼Œç¼–è¯‘å™¨é€šè¿‡è°ƒç”¨ç±»ä¼¼  <code>intValue()</code>  ï¼Œ <code>doubleValue()</code>  è¿™ç±»çš„æ–¹æ³•å°†å¯¹è±¡è½¬æ¢æˆåŸå§‹ç±»å‹å€¼ã€‚</p>\n<ul>\n<li>\n<p>è£…ç®±ï¼ˆåŸºæœ¬ç±»å‹ -&gt; åŒ…è£…ç±»ï¼‰</p>\n<p>é€šè¿‡åŒ…è£…ç±»çš„æ„é€ å™¨å®ç°è£…ç®±ï¼ˆJDK1.5 ä¹‹å‰ï¼‰</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token class-name\">Integer</span> t <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Integer</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p>é€šè¿‡å­—ç¬¦ä¸²å‚æ•°æ„é€ åŒ…è£…ç±»å¯¹è±¡å®ç°è£…ç®±</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token class-name\">Float</span> f <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Float</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"4.56\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token class-name\">Long</span> l <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Long</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"wer\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">// NumberFormatException</span></pre></td></tr></table></figure><p>è‡ªåŠ¨è£…ç®±ï¼ˆJDK1.5 ä¹‹åï¼‰</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token class-name\">Integer</span> i <span class=\"token operator\">=</span> <span class=\"token number\">100</span><span class=\"token punctuation\">;</span><span class=\"token comment\">// è‡ªåŠ¨è£…ç®±</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\">// ç›¸å½“äºç¼–è¯‘å™¨è‡ªåŠ¨ä½œä»¥ä¸‹çš„è¯­æ³•ç¼–è¯‘ï¼šInteger i = Integer.valueOf (100);</span></pre></td></tr></table></figure></li>\n<li>\n<p>æ‹†ç®±ï¼ˆåŒ…è£…ç±» -&gt; åŸºæœ¬ç±»å‹ï¼‰</p>\n<p>è°ƒç”¨åŒ…è£…ç±»ä¸­çš„  <code>.xxxValue()</code>  æ–¹æ³•</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token class-name\">Integer</span> t <span class=\"token operator\">=</span> <span class=\"token number\">128</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// æ­¤æ—¶ t å°±æ˜¯ä¸€ä¸ªåŒ…è£…ç±»</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>t<span class=\"token punctuation\">.</span><span class=\"token function\">intValue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//128</span></pre></td></tr></table></figure><p>è‡ªåŠ¨æ‹†ç®±</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token class-name\">Integer</span> i <span class=\"token operator\">=</span> <span class=\"token number\">10</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// è‡ªåŠ¨è£…ç®± </span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">int</span> t <span class=\"token operator\">=</span> i<span class=\"token punctuation\">;</span> <span class=\"token comment\">// è‡ªåŠ¨æ‹†ç®±ï¼Œå®é™…ä¸Šæ‰§è¡Œäº† int t = i.intValue ();</span></pre></td></tr></table></figure></li>\n</ul>\n<h4 id=\"integerçš„ç¼“å­˜æœºåˆ¶\"><a class=\"anchor\" href=\"#integerçš„ç¼“å­˜æœºåˆ¶\">#</a> Integer çš„ç¼“å­˜æœºåˆ¶</h4>\n<p>Integer ä¸ Integer æ¯”è¾ƒçš„æ—¶å€™ï¼Œç”±äºç›´æ¥èµ‹å€¼çš„æ—¶å€™ä¼šè¿›è¡Œè‡ªåŠ¨è£…ç®±ã€‚é‚£ä¹ˆè¿™é‡Œå°±éœ€è¦æ³¨æ„ä¸¤ä¸ªé—®é¢˜</p>\n<ol>\n<li>Integer è¿›è¡Œè‡ªåŠ¨è£…ç®±æ—¶ï¼Œä¸ºå…¶èµ‹å€¼å¤„äºåŒºé—´ [-128, 127] çš„æ•´æ•°æ—¶ï¼Œæ•°å€¼å°†ä¼šç›´æ¥è¢«ç¼“å­˜åœ¨  <code>IntegerCache</code>  ä¸­ï¼Œè€Œå½“è¿›è¡Œèµ‹å€¼æ“ä½œæ—¶ï¼Œä¸ä¼šåˆ›å»ºæ–°çš„ Integer å¯¹è±¡ï¼Œè€Œæ˜¯ä»ç¼“å­˜ä¸­è·å–å·²ç»åˆ›å»ºå¥½çš„ Integer å¯¹è±¡ã€‚</li>\n<li>è€Œå½“æ•°å€¼å¤„äºåŒºé—´ [-128, 127] çš„æ•´æ•°ä¹‹å¤–æ—¶ï¼Œç¨‹åºå†…éƒ¨åˆ™ä¼šç›´æ¥ä½¿ç”¨  <code>new Integer()</code>  çš„æ–¹å¼æ¥åˆ›å»º Integer å¯¹è±¡ã€‚</li>\n</ol>\n<h3 id=\"string\"><a class=\"anchor\" href=\"#string\">#</a> String</h3>\n<h4 id=\"å­—ç¬¦ä¸²çš„ä¸å¯å˜æ€§\"><a class=\"anchor\" href=\"#å­—ç¬¦ä¸²çš„ä¸å¯å˜æ€§\">#</a> å­—ç¬¦ä¸²çš„ä¸å¯å˜æ€§</h4>\n<p>å­—ç¬¦ä¸²çš„åº•å±‚æ˜¯ä½¿ç”¨æ•°ç»„å­˜å‚¨çš„ï¼Œæ•°ç»„çš„é•¿åº¦æ˜¯ä¸å¯å˜çš„ï¼Œä¸”ä½¿ç”¨ final å’Œ private è¿›è¡Œä¿®é¥°ï¼Œä¸èƒ½ç›´æ¥ä¿®æ”¹ï¼ŒString ä¹Ÿæ²¡æœ‰æä¾›ç›´æ¥ä¿®æ”¹çš„æ–¹æ³•ã€‚å› æ­¤ String ä¸€æ—¦è¢«åˆ›å»ºï¼Œåˆ™ä¸èƒ½è¢«ä¿®æ”¹ï¼Œæ‰€è°“çš„ä¿®æ”¹ä¹Ÿåªæ˜¯åˆ›å»ºäº†æ–°çš„å¯¹è±¡ã€‚å­—ç¬¦ä¸²å¸¸é‡å¯¹è±¡å­˜å‚¨åœ¨å¸¸é‡æ± ä¸­ï¼Œå¸¸é‡æ± ä¸­çš„å­—ç¬¦ä¸²æ˜¯ä¸ä¼šé‡å¤çš„ã€‚</p>\n<h4 id=\"jdk6-å’Œ-jdk7-ä¸­-substring-çš„åŸç†åŠåŒºåˆ«\"><a class=\"anchor\" href=\"#jdk6-å’Œ-jdk7-ä¸­-substring-çš„åŸç†åŠåŒºåˆ«\">#</a> JDK6 å’Œ JDK7 ä¸­ substring çš„åŸç†åŠåŒºåˆ«</h4>\n<ul>\n<li>\n<p>JDK6 ä¸­çš„ substring</p>\n<p>åœ¨ JDK6 ä¸­ï¼ŒString ç±»åŒ…å«ä¸‰ä¸ªæˆå‘˜å˜é‡ï¼š  <code>char value[]</code>  ï¼Œ  <code>int offset</code>  ï¼Œ  <code>int count</code>  ã€‚ä»–ä»¬åˆ†åˆ«ç”¨æ¥å­˜å‚¨çœŸæ­£çš„å­—ç¬¦æ•°ç»„ï¼Œæ•°ç»„çš„ç¬¬ä¸€ä¸ªä½ç½®ç´¢å¼•ä»¥åŠå­—ç¬¦ä¸²ä¸­åŒ…å«çš„å­—ç¬¦ä¸ªæ•°ã€‚å½“è°ƒç”¨ substring æ–¹æ³•çš„æ—¶å€™ï¼Œä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ string å¯¹è±¡ï¼Œä½†æ˜¯è¿™ä¸ª string çš„å€¼ä»ç„¶æŒ‡å‘å †ä¸­çš„åŒä¸€ä¸ªå­—ç¬¦æ•°ç»„ã€‚è¿™ä¸¤ä¸ªå¯¹è±¡ä¸­åªæœ‰ count å’Œ offset çš„å€¼æ˜¯ä¸åŒçš„ã€‚</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// JDK 6</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token class-name\">String</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> offset<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> count<span class=\"token punctuation\">,</span> <span class=\"token keyword\">char</span> value<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>value <span class=\"token operator\">=</span> value<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>offset <span class=\"token operator\">=</span> offset<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>count <span class=\"token operator\">=</span> count<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">substring</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> beginIndex<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> endIndex<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token comment\">//check boundary</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token keyword\">return</span>  <span class=\"token keyword\">new</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">(</span>offset <span class=\"token operator\">+</span> beginIndex<span class=\"token punctuation\">,</span> endIndex <span class=\"token operator\">-</span> beginIndex<span class=\"token punctuation\">,</span> value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p><strong>JDK 6 ä¸­çš„ substring å¯¼è‡´çš„é—®é¢˜</strong></p>\n<p>å¦‚æœä½ æœ‰ä¸€ä¸ªå¾ˆé•¿å¾ˆé•¿çš„å­—ç¬¦ä¸²ï¼Œä½†æ˜¯å½“ä½ ä½¿ç”¨ substring è¿›è¡Œåˆ‡å‰²çš„æ—¶å€™ä½ åªéœ€è¦å¾ˆçŸ­çš„ä¸€æ®µã€‚è¿™å¯èƒ½å¯¼è‡´æ€§èƒ½é—®é¢˜ï¼Œå› ä¸ºä½ éœ€è¦çš„åªæ˜¯ä¸€å°æ®µå­—ç¬¦åºåˆ—ï¼Œä½†æ˜¯ä½ å´å¼•ç”¨äº†æ•´ä¸ªå­—ç¬¦ä¸²ï¼ˆå› ä¸ºè¿™ä¸ªéå¸¸é•¿çš„å­—ç¬¦æ•°ç»„ä¸€ç›´åœ¨è¢«å¼•ç”¨ï¼Œæ‰€ä»¥æ— æ³•è¢«å›æ”¶ï¼Œå°±å¯èƒ½å¯¼è‡´å†…å­˜æ³„éœ²ï¼‰ã€‚åœ¨ JDK 6 ä¸­ï¼Œä¸€èˆ¬ç”¨ä»¥ä¸‹æ–¹å¼æ¥è§£å†³è¯¥é—®é¢˜ï¼ŒåŸç†å…¶å®å°±æ˜¯ç”Ÿæˆä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²å¹¶å¼•ç”¨ä»–ã€‚</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>x <span class=\"token operator\">=</span> x<span class=\"token punctuation\">.</span><span class=\"token function\">substring</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure></li>\n<li>\n<p>JDK7 ä¸­çš„ substring</p>\n<p>åœ¨ JDK7 ä¸­ï¼Œsubstring æ–¹æ³•ä¼šåœ¨å †å†…å­˜ä¸­åˆ›å»ºä¸€ä¸ªæ–°çš„æ•°ç»„ï¼Œsubstring ä½¿ç”¨ <code>new String</code>  åˆ›å»ºäº†ä¸€ä¸ªæ–°å­—ç¬¦ä¸²ï¼Œé¿å…å¯¹è€å­—ç¬¦ä¸²çš„å¼•ç”¨ã€‚ä»è€Œè§£å†³äº†å†…å­˜æ³„éœ²é—®é¢˜ã€‚</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// JDK 7</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">char</span> value<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> offset<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> count<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token comment\">//check boundary</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>value <span class=\"token operator\">=</span> <span class=\"token class-name\">Arrays</span><span class=\"token punctuation\">.</span><span class=\"token function\">copyOfRange</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">,</span> offset<span class=\"token punctuation\">,</span> offset <span class=\"token operator\">+</span> count<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">substring</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> beginIndex<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> endIndex<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token comment\">//check boundary</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token keyword\">int</span> subLen <span class=\"token operator\">=</span> endIndex <span class=\"token operator\">-</span> beginIndex<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">,</span> beginIndex<span class=\"token punctuation\">,</span> subLen<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure></li>\n</ul>\n<h4 id=\"replacefirst-replaceall-replaceåŒºåˆ«\"><a class=\"anchor\" href=\"#replacefirst-replaceall-replaceåŒºåˆ«\">#</a> replaceFirstã€replaceAllã€replace åŒºåˆ«</h4>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Replace</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        <span class=\"token class-name\">String</span> s <span class=\"token operator\">=</span> <span class=\"token string\">\"my.test.txt\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token string\">\".\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"#\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>      <span class=\"token comment\">//replace å°†å­—ç¬¦ä¸²ä¸­çš„ã€‚éƒ½æ›¿æ¢ä¸º #</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">.</span><span class=\"token function\">replaceAll</span><span class=\"token punctuation\">(</span><span class=\"token string\">\".\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"#\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>   <span class=\"token comment\">//replaceAll ç”¨åˆ°äº†æ­£åˆ™è¡¨è¾¾å¼ï¼Œå…¶ä¸­ã€‚æ˜¯ä»»æ„å­—ç¬¦çš„æ„æ€ï¼Œæ‰€ä»¥ç»“æœæ˜¯å­—ç¬¦ä¸²å…¨éƒ¨æ›¿æ¢ä¸º#</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">.</span><span class=\"token function\">replaceFirst</span><span class=\"token punctuation\">(</span><span class=\"token string\">\".\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"#\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//replaceFirst ç”¨åˆ°äº†æ­£åˆ™è¡¨è¾¾å¼ï¼Œ å…¶ä¸­ã€‚æ˜¯ä»»æ„å­—ç¬¦çš„æ„æ€ï¼Œæ‰€ä»¥ç¬¬ä¸€ä¸ªå­—ç¬¦è¢« #å·ä»£æ›¿</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">.</span><span class=\"token function\">replaceFirst</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\\\\.\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"#\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  <span class=\"token comment\">// æ­£åˆ™è¡¨è¾¾å¼ä¸­åŒæ æ˜¯åŸç”Ÿå­—ç¬¦ä¸²çš„æ„æ€ï¼Œæ‰€ä»¥ç»“æœæ˜¯å­—ç¬¦ä¸²ä¸­ç¬¬ä¸€ä¸ªã€‚è¢« #ä»£æ›¿å¾—åˆ°</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h4 id=\"stringå¯¹çš„é‡è½½\"><a class=\"anchor\" href=\"#stringå¯¹çš„é‡è½½\">#</a> String å¯¹ [+] çš„é‡è½½</h4>\n<p>Java ä¸­å®é™…æ²¡æœ‰è¿ç®—ç¬¦çš„é‡è½½ï¼Œä½†æ˜¯å¯¹ String å¯¹è±¡è€Œè¨€ï¼Œå®ƒæ˜¯å¯ä»¥ç›´æ¥ <code>+</code>  å°†ä¸¤ä¸ª String å¯¹è±¡çš„å­—ç¬¦ä¸²å€¼ç›¸åŠ ã€‚ä¹çœ‹èµ·æ¥è¿™æ˜¯å¯¹  <code>+</code>  çš„é‡è½½ï¼Œä½†æˆ‘ä»¬å¯ä»¥é€šè¿‡ class æ–‡ä»¶çœ‹å‡ºï¼Œè¿™åªæ˜¯ JVM åšçš„è¯­æ³•ç³–ã€‚</p>\n<p>é€šè¿‡åç¼–è¯‘çš„æ–¹å¼ï¼Œä¸éš¾å‘ç°ï¼Œå…¶å® String å¯¹  <code>+</code>  çš„æ”¯æŒå…¶å®å°±æ˜¯ä½¿ç”¨äº† StringBuilder ä»¥åŠä»–çš„ append å’Œ toString ä¸¤ä¸ªæ–¹æ³•ã€‚</p>\n<h4 id=\"å­—ç¬¦ä¸²æ‹¼æ¥çš„å‡ ç§æ–¹å¼å’ŒåŒºåˆ«\"><a class=\"anchor\" href=\"#å­—ç¬¦ä¸²æ‹¼æ¥çš„å‡ ç§æ–¹å¼å’ŒåŒºåˆ«\">#</a> å­—ç¬¦ä¸²æ‹¼æ¥çš„å‡ ç§æ–¹å¼å’ŒåŒºåˆ«</h4>\n<ul>\n<li>\n<p>+</p>\n<p>Java ä¸­çš„  <code>+</code>  å®é™…ä¸Šæ˜¯å…ˆæ„å»ºä¸€ä¸ª  <code>StringBuilder</code>  å¯¹è±¡ï¼Œç„¶åä½¿ç”¨  <code>append()</code>  æ–¹æ³•æ‹¼æ¥å­—ç¬¦ä¸²ï¼Œæœ€åè°ƒç”¨  <code>toString()</code>  æ–¹æ³•ç”Ÿæˆå­—ç¬¦ä¸²ï¼Œç®€å•æ¥è¯´ï¼Œå…¶å®ç°åŸç†æ˜¯ä½¿ç”¨  <code>StringBuilder.append</code>  ã€‚</p>\n</li>\n<li>\n<p>concat</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">concat</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> str<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">int</span> otherLen <span class=\"token operator\">=</span> str<span class=\"token punctuation\">.</span><span class=\"token function\">length</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>otherLen <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">int</span> len <span class=\"token operator\">=</span> value<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">char</span> buf<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token class-name\">Arrays</span><span class=\"token punctuation\">.</span><span class=\"token function\">copyOf</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">,</span> len <span class=\"token operator\">+</span> otherLen<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    str<span class=\"token punctuation\">.</span><span class=\"token function\">getChars</span><span class=\"token punctuation\">(</span>buf<span class=\"token punctuation\">,</span> len<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">(</span>buf<span class=\"token punctuation\">,</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p><code>concat</code>  å®ç°å­—ç¬¦ä¸²æ‹¼æ¥ï¼Œé¦–å…ˆæ˜¯åˆ›å»ºäº†ä¸€ä¸ªå­—ç¬¦æ•°ç»„ï¼Œé•¿åº¦æ˜¯å·²æœ‰å­—ç¬¦ä¸²å’Œå¾…æ‹¼æ¥å­—ç¬¦ä¸²çš„é•¿åº¦ä¹‹å’Œï¼Œå†æŠŠä¸¤ä¸ªå­—ç¬¦ä¸²çš„å€¼å¤åˆ¶åˆ°æ–°çš„å­—ç¬¦æ•°ç»„ä¸­ï¼Œå¹¶ä½¿ç”¨è¿™ä¸ªå­—ç¬¦æ•°ç»„åˆ›å»ºä¸€ä¸ªæ–°çš„ String å¯¹è±¡å¹¶è¿”å›ã€‚</p>\n</li>\n<li>\n<p>StringBuilder.append</p>\n<p>å’Œ String ç±»ç±»ä¼¼ï¼ŒStringBuilder ç±»ä¹Ÿå°è£…äº†ä¸€ä¸ªå­—ç¬¦æ•°ç»„ï¼Œä¸ String ä¸åŒçš„æ˜¯ï¼Œå®ƒå¹¶ä¸æ˜¯ final çš„ï¼Œæ‰€ä»¥ä»–æ˜¯å¯ä»¥ä¿®æ”¹çš„ã€‚å¦å¤–ï¼Œä¸ String ä¸åŒï¼Œå­—ç¬¦æ•°ç»„ä¸­ä¸ä¸€å®šæ‰€æœ‰ä½ç½®éƒ½å·²ç»è¢«ä½¿ç”¨ï¼Œå®ƒæœ‰ä¸€ä¸ªå®ä¾‹å˜é‡ï¼Œè¡¨ç¤ºæ•°ç»„ä¸­å·²ç»ä½¿ç”¨çš„å­—ç¬¦ä¸ªæ•°ã€‚StringBuilder çš„ append æ–¹æ³•ä¼šç›´æ¥æ‹·è´å­—ç¬¦åˆ°å†…éƒ¨çš„å­—ç¬¦æ•°ç»„ä¸­ï¼Œå¦‚æœå­—ç¬¦æ•°ç»„é•¿åº¦ä¸å¤Ÿï¼Œä¼šè¿›è¡Œæ‰©å±•ã€‚</p>\n</li>\n<li>\n<p>StringBuffer.append</p>\n<p>StringBuffer å’Œ StringBuilder ç±»ä¼¼ï¼Œæœ€å¤§çš„åŒºåˆ«å°±æ˜¯ StringBuffer æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå…¶ append æ–¹æ³•ä½¿ç”¨ synchronized è¿›è¡Œå£°æ˜ï¼Œè¯´æ˜æ˜¯ä¸€ä¸ªçº¿ç¨‹å®‰å…¨çš„æ–¹æ³•ã€‚è€Œ StringBuilder åˆ™ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚</p>\n</li>\n<li>\n<p>StringUtils.join</p>\n<p>å…¶å®ä¹Ÿæ˜¯é€šè¿‡  <code>StringBuilder</code>  æ¥å®ç°çš„ã€‚</p>\n</li>\n</ul>\n<p><strong>æ€»ç»“</strong></p>\n<ol>\n<li>å¦‚æœä¸æ˜¯åœ¨å¾ªç¯ä½“ä¸­è¿›è¡Œå­—ç¬¦ä¸²æ‹¼æ¥çš„è¯ï¼Œç›´æ¥ä½¿ç”¨  <code>+</code>  å°±å¥½äº†ã€‚</li>\n<li>å¦‚æœåœ¨å¹¶å‘åœºæ™¯ä¸­è¿›è¡Œå­—ç¬¦ä¸²æ‹¼æ¥çš„è¯ï¼Œè¦ä½¿ç”¨  <code>StringBuffer</code>  æ¥ä»£æ›¿  <code>StringBuilder</code>  ã€‚</li>\n</ol>\n<h4 id=\"stringvalueof-å’Œ-integertostring-çš„åŒºåˆ«\"><a class=\"anchor\" href=\"#stringvalueof-å’Œ-integertostring-çš„åŒºåˆ«\">#</a> String.valueOf å’Œ Integer.toString çš„åŒºåˆ«</h4>\n<p><code>String.valueOf</code>  å’Œ  <code>Integer.toString</code>  æ²¡æœ‰åŒºåˆ«ï¼Œå› ä¸ºå‰è€…å†…éƒ¨æ˜¯é€šè¿‡åè€…å®ç°çš„ã€‚</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token class-name\">String</span> <span class=\"token function\">valueOf</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token class-name\">Integer</span><span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h4 id=\"switch-å¯¹-string-çš„æ”¯æŒ\"><a class=\"anchor\" href=\"#switch-å¯¹-string-çš„æ”¯æŒ\">#</a> switch å¯¹ String çš„æ”¯æŒ</h4>\n<p><strong>å…¶å® swich åªæ”¯æŒä¸€ç§æ•°æ®ç±»å‹ï¼Œé‚£å°±æ˜¯æ•´å‹ï¼Œå…¶ä»–æ•°æ®ç±»å‹éƒ½æ˜¯è½¬æ¢æˆæ•´å‹ä¹‹åå†ä½¿ç”¨ switch çš„ã€‚</strong></p>\n<ul>\n<li>\n<p>switch å¯¹ int çš„åˆ¤æ–­æ˜¯ç›´æ¥æ¯”è¾ƒæ•´æ•°çš„å€¼ã€‚</p>\n</li>\n<li>\n<p>switch å¯¹ char ç±»å‹è¿›è¡Œæ¯”è¾ƒçš„æ—¶å€™ï¼Œå®é™…ä¸Šæ¯”è¾ƒçš„æ˜¯ ascii ç ï¼Œç¼–è¯‘å™¨ä¼šæŠŠ char å‹å˜é‡è½¬æ¢æˆå¯¹åº”çš„ int å‹å˜é‡ã€‚</p>\n</li>\n<li>\n<p>switch å¯¹å­—ç¬¦ä¸²çš„ switch æ˜¯é€šè¿‡  <code>equals()</code>  å’Œ  <code>hashCode()</code>  æ–¹æ³•æ¥å®ç°çš„ã€‚</p>\n</li>\n</ul>\n<h4 id=\"å­—ç¬¦ä¸²æ± string-pool\"><a class=\"anchor\" href=\"#å­—ç¬¦ä¸²æ± string-pool\">#</a> å­—ç¬¦ä¸²æ± ï¼ˆString Poolï¼‰</h4>\n<p>å­—ç¬¦ä¸²æ± çš„ä¼˜ç‚¹å°±æ˜¯é¿å…äº†ç›¸åŒå†…å®¹çš„å­—ç¬¦ä¸²çš„åˆ›å»ºï¼ŒèŠ‚çœäº†å†…å­˜ï¼Œçœå»äº†åˆ›å»ºç›¸åŒå­—ç¬¦ä¸²çš„æ—¶é—´ï¼ŒåŒæ—¶æå‡äº†æ€§èƒ½ï¼›å¦ä¸€æ–¹é¢ï¼Œå­—ç¬¦ä¸²æ± çš„ç¼ºç‚¹å°±æ˜¯ç‰ºç‰²äº† JVM åœ¨å¸¸é‡æ± ä¸­éå†å¯¹è±¡æ‰€éœ€è¦çš„æ—¶é—´ï¼Œä¸è¿‡å…¶æ—¶é—´æˆæœ¬ç›¸æ¯”è€Œè¨€æ¯”è¾ƒä½ã€‚</p>\n<h4 id=\"å¸¸é‡æ± \"><a class=\"anchor\" href=\"#å¸¸é‡æ± \">#</a> å¸¸é‡æ± </h4>\n<p>å¸¸é‡æ± åœ¨ java ç”¨äºä¿å­˜åœ¨ç¼–è¯‘æœŸå·²ç¡®å®šçš„ï¼Œå·²ç¼–è¯‘çš„ class æ–‡ä»¶ä¸­çš„ä¸€ä»½æ•°æ®ã€‚å®ƒåŒ…æ‹¬äº†å…³äºç±»ï¼Œæ–¹æ³•ï¼Œæ¥å£ç­‰ä¸­çš„å¸¸é‡ï¼Œä¹ŸåŒ…æ‹¬å­—ç¬¦ä¸²ï¼Œæ‰§è¡Œå™¨äº§ç”Ÿçš„å¸¸é‡ä¹Ÿä¼šæ”¾å…¥å¸¸é‡æ± ï¼Œæ•…è®¤ä¸ºå¸¸é‡æ± æ˜¯ JVM çš„ä¸€å—ç‰¹æ®Šçš„å†…å­˜ç©ºé—´ã€‚</p>\n<h4 id=\"intern\"><a class=\"anchor\" href=\"#intern\">#</a> intern</h4>\n<p>intern () æ–¹æ³•è¿”å›å­—ç¬¦ä¸²å¯¹è±¡çš„è§„èŒƒåŒ–è¡¨ç¤ºå½¢å¼ã€‚å®ƒéµå¾ªä»¥ä¸‹è§„åˆ™ï¼šå¯¹äºä»»æ„ä¸¤ä¸ªå­—ç¬¦ä¸² s å’Œ tï¼Œå½“ä¸”ä»…å½“ s.equals (t) ä¸º true æ—¶ï¼Œs.intern () == t.intern () æ‰ä¸º trueã€‚</p>\n<p>å½“å­—ç¬¦ä¸²è°ƒç”¨  <code>intern()</code>  æ–¹æ³•æ—¶ï¼Œè¿™ä¸ªæ–¹æ³•ä¼šé¦–å…ˆæ£€æŸ¥å­—ç¬¦ä¸²æ± ä¸­æ˜¯å¦å­˜åœ¨è¯¥å­—ç¬¦ä¸²ï¼Œå¦‚æœå­˜åœ¨ï¼Œåˆ™è¿”å›è¯¥å­—ç¬¦ä¸²çš„å¼•ç”¨ï¼›å¦‚æœä¸å­˜åœ¨ï¼Œåˆ™å°†è¿™ä¸ªå­—ç¬¦ä¸²æ·»åŠ åˆ°å­—ç¬¦ä¸²æ± ä¸­ï¼Œå¹¶è¿”å›è¿™ä¸ªå­—ç¬¦ä¸²çš„å¼•ç”¨ã€‚</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token class-name\">String</span> str1 <span class=\"token operator\">=</span> <span class=\"token string\">\"a\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token class-name\">String</span> str2 <span class=\"token operator\">=</span> <span class=\"token string\">\"b\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token class-name\">String</span> str3 <span class=\"token operator\">=</span> <span class=\"token string\">\"ab\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token class-name\">String</span> str4 <span class=\"token operator\">=</span> str1 <span class=\"token operator\">+</span> str2<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token class-name\">String</span> str5 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ab\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>str5<span class=\"token punctuation\">.</span><span class=\"token function\">equals</span><span class=\"token punctuation\">(</span>str3<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//true æ¯”è¾ƒå­—ç¬¦ä¸²çš„å€¼</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>str5 <span class=\"token operator\">==</span> str3<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//false æ¯”è¾ƒå†…å­˜åœ°å€ï¼Œstr5 ä½¿ç”¨ new String æ–¹å¼åˆ›å»ºäº†æ–°çš„å­—ç¬¦ä¸²å¯¹è±¡</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>str5<span class=\"token punctuation\">.</span><span class=\"token function\">intern</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> str3<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//true intern å…ˆè¡Œæ£€æŸ¥å­—ç¬¦ä¸²æ˜¯å¦èƒ½å­˜åœ¨</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>str5<span class=\"token punctuation\">.</span><span class=\"token function\">intern</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> str4<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//false str4 ä½¿ç”¨ + å·ï¼Œç›¸å½“äºæ–°åˆ›å»ºäº†å­—ç¬¦ä¸²å¯¹è±¡</span></pre></td></tr></table></figure><h3 id=\"å…³é”®å­—\"><a class=\"anchor\" href=\"#å…³é”®å­—\">#</a> å…³é”®å­—</h3>\n<ul>\n<li>transient</li>\n<li>instanceof</li>\n<li>volatile</li>\n<li>synchronized</li>\n<li>final</li>\n<li>static</li>\n<li>const</li>\n</ul>\n<h3 id=\"é›†åˆç±»\"><a class=\"anchor\" href=\"#é›†åˆç±»\">#</a> é›†åˆç±»</h3>\n<h4 id=\"java-é›†åˆç±»å›¾\"><a class=\"anchor\" href=\"#java-é›†åˆç±»å›¾\">#</a> Java é›†åˆç±»å›¾</h4>\n<p><img data-src=\"https://img.xfc-exclave.com/2021/08/9880d75c8d57964e3e91fb7d216bc7cd1629097816.gif\" alt=\"javaé›†åˆç±»å›¾\" /></p>\n<p>æ³¨ï¼šå›¾ä¸­  <code>LinkIterator</code>  åº”ä¸º  <code>ListIterator</code></p>\n<h4 id=\"å¸¸ç”¨é›†åˆç±»çš„ä½¿ç”¨\"><a class=\"anchor\" href=\"#å¸¸ç”¨é›†åˆç±»çš„ä½¿ç”¨\">#</a> å¸¸ç”¨é›†åˆç±»çš„ä½¿ç”¨</h4>\n<p><span class=\"label danger\">â—ï¸TODO</span> å¾…å®Œå–„</p>\n<h4 id=\"arraylist-linklist-å’Œ-vector-çš„åŒºåˆ«\"><a class=\"anchor\" href=\"#arraylist-linklist-å’Œ-vector-çš„åŒºåˆ«\">#</a> ArrayListã€LinkList å’Œ Vector çš„åŒºåˆ«</h4>\n<p>ArrayList å’Œ Vector éƒ½æ˜¯åŸºäºæ•°ç»„å®ç°çš„ï¼Œè€Œ LinkedList åˆ™æ˜¯åŸºäºåŒå‘é“¾è¡¨å®ç°çš„ã€‚ï¼ˆæŸ¥è¯¢å—ï¼Œå¢åˆ æ…¢ï¼‰</p>\n<ul>\n<li>Arraylist çš„å®ç°åŸç†æ˜¯é‡‡ç”¨ä¸€ä¸ªåŠ¨æ€å¯¹è±¡æ•°ç»„å®ç°çš„ï¼Œé»˜è®¤æ„é€ æ–¹æ³•åˆ›å»ºä¸€ä¸ªç©ºæ•°ç»„ï¼Œå®ƒåœ¨ç¬¬ä¸€æ¬¡æ·»åŠ å…ƒç´ æ—¶å€™ï¼Œæ‰©å±•å®¹é‡ä¸º 10ï¼Œä¹‹åçš„æ‰©å……ç®—æ³•ï¼šåŸæ¥æ•°ç»„å¤§å° + åŸæ¥æ•°ç»„çš„ä¸€åŠï¼ˆä¹Ÿå°±æ˜¯ 1.5 å€ï¼‰ã€‚</li>\n<li>Vector çš„å®ç°åŸç†ä¹Ÿæ˜¯é‡‡ç”¨ä¸€ä¸ªåŠ¨æ€å¯¹è±¡æ•°ç»„å®ç°çš„ï¼Œåªä¸è¿‡å®ƒçš„é»˜è®¤æ„é€ æ–¹æ³•åˆ›å»ºä¸€ä¸ªå¤§å°ä¸º 10 çš„å¯¹è±¡æ•°ç»„ï¼Œä¸ Arraylist ä¸åŒçš„æ˜¯ï¼Œ åœ¨ç¼ºçœçš„æƒ…å†µä¸‹ï¼Œå¢é•¿åŸæ•°ç»„é•¿åº¦çš„ä¸€å€ï¼ˆä¹Ÿå°±æ˜¯ 2 å€ï¼‰ã€‚</li>\n<li>è€Œå¯¹ ArrayList å’Œ Vector è¦è¿›è¡Œå¢åˆ æ“ä½œçš„æ—¶å€™ï¼Œéœ€è¦ç§»åŠ¨ä¿®æ”¹å…ƒç´ åé¢çš„æ‰€æœ‰å…ƒç´ ï¼Œæ‰€ä»¥å¢åˆ çš„å¼€é”€æ¯”è¾ƒå¤§ï¼Œå¯¹å¢åˆ æ“ä½œçš„æ‰§è¡Œæ•ˆç‡ä½ã€‚</li>\n<li>ä¸ºäº†é˜²æ­¢æ•°ç»„åŠ¨æ€æ‰©å……è¿‡å¤šï¼Œå»ºè®®åˆ›å»º ArrayList æˆ–è€… Vector æ—¶ï¼Œç»™å®šåˆå§‹å®¹é‡ã€‚</li>\n<li>Arraylist å¤šçº¿ç¨‹ä¸­ä½¿ç”¨ä¸å®‰å…¨ï¼Œé€‚åˆåœ¨å•çº¿ç¨‹è®¿é—®æ—¶ä½¿ç”¨ï¼Œæ•ˆç‡è¾ƒé«˜ï¼Œè€Œ Vector çº¿ç¨‹å®‰å…¨ï¼Œé€‚åˆåœ¨å¤šçº¿ç¨‹è®¿é—®æ—¶ä½¿ç”¨ï¼Œæ•ˆç‡è¾ƒä½ã€‚</li>\n</ul>\n<p>è€Œå¯¹äº LinkedList æ¥è¯´ï¼Œå¢åŠ å’Œåˆ é™¤å…ƒç´ æ–¹ä¾¿ï¼Œå¢åŠ æˆ–åˆ é™¤ä¸€ä¸ªå…ƒç´ ï¼Œä»…éœ€å¤„ç†ç»“ç‚¹é—´çš„å¼•ç”¨å³å¯ã€‚ä½†æ˜¯æŸ¥è¯¢ä¸æ–¹ä¾¿ï¼Œéœ€è¦ä¸€ä¸ªä¸ªå¯¹æ¯”ï¼Œæ— æ³•æ ¹æ®ä¸‹æ ‡ç›´æ¥æŸ¥æ‰¾ã€‚ï¼ˆå¢åˆ å—ï¼ŒæŸ¥è¯¢æ…¢ï¼‰ï¼ŒåŒæ—¶ï¼ŒLinkedList ä¹Ÿæ˜¯éçº¿ç¨‹å®‰å…¨çš„ã€‚</p>\n<blockquote>\n<p>æ‰©å±•æœç´¢ï¼š<span class=\"blue\">ArrayList å’Œ Vector çš„æ‰©å®¹æœºåˆ¶</span>ã€<span class=\"blue\">å•å‘é“¾è¡¨ã€åŒå‘é“¾è¡¨</span> ã€‚</p>\n</blockquote>\n<h4 id=\"synchronizedlist-å’Œ-vector-çš„åŒºåˆ«\"><a class=\"anchor\" href=\"#synchronizedlist-å’Œ-vector-çš„åŒºåˆ«\">#</a> SynchronizedList å’Œ Vector çš„åŒºåˆ«</h4>\n<p>SynchronizedList å’Œ Vector æœ€ä¸»è¦çš„åŒºåˆ«ï¼š</p>\n<ol>\n<li>SynchronizedList æœ‰å¾ˆå¥½çš„æ‰©å±•å’Œå…¼å®¹åŠŸèƒ½ã€‚ä»–å¯ä»¥å°†æ‰€æœ‰çš„ List çš„å­ç±»è½¬æˆçº¿ç¨‹å®‰å…¨çš„ç±»ã€‚</li>\n<li>ä½¿ç”¨ SynchronizedList çš„æ—¶å€™ï¼Œè¿›è¡Œéå†æ—¶è¦æ‰‹åŠ¨è¿›è¡ŒåŒæ­¥å¤„ç†ã€‚</li>\n<li>SynchronizedList å¯ä»¥æŒ‡å®šé”å®šçš„å¯¹è±¡ã€‚</li>\n</ol>\n<h4 id=\"hashmap-hashtable-concurrenthashmapåŒºåˆ«\"><a class=\"anchor\" href=\"#hashmap-hashtable-concurrenthashmapåŒºåˆ«\">#</a> HashMapã€HashTableã€ConcurrentHashMap åŒºåˆ«</h4>\n<ul>\n<li>HashTable ä¸­çš„æ–¹æ³•æ˜¯åŒæ­¥çš„ï¼Œè€Œ HashMap ä¸­çš„æ–¹æ³•åœ¨é»˜è®¤æƒ…å†µä¸‹æ˜¯éåŒæ­¥çš„ã€‚åœ¨å¤šçº¿ç¨‹å¹¶å‘çš„ç¯å¢ƒä¸‹ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ HashTableï¼Œä½†æ˜¯è¦ä½¿ç”¨ HashMap çš„è¯å°±è¦è‡ªå·±å¢åŠ åŒæ­¥å¤„ç†äº†ã€‚</li>\n<li>åœ¨ç»§æ‰¿å…³ç³»ä¸Šï¼ŒHashTable æ˜¯åŸºäºé™ˆæ—§çš„ Dictionary ç±»ç»§æ‰¿æ¥çš„ã€‚ HashMap ç»§æ‰¿çš„æŠ½è±¡ç±» AbstractMap å®ç°äº† Map æ¥å£ã€‚</li>\n<li>HashTable ä¸­ï¼Œkey å’Œ value éƒ½ä¸å…è®¸å‡ºç° null å€¼ï¼Œå¦åˆ™ä¼šæŠ›å‡º NullPointerException å¼‚å¸¸ã€‚ HashMap ä¸­ï¼Œnull å¯ä»¥ä½œä¸ºé”®ï¼Œè¿™æ ·çš„é”®åªæœ‰ä¸€ä¸ªï¼›å¯ä»¥æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªé”®æ‰€å¯¹åº”çš„å€¼ä¸º nullã€‚</li>\n<li>åœ¨æ‰©å®¹æœºåˆ¶ä¸Šï¼ŒHashTable ä¸­çš„ hash æ•°ç»„åˆå§‹å¤§å°æ˜¯ 11ï¼Œå¢åŠ çš„æ–¹å¼æ˜¯ old*2+1ã€‚HashMap ä¸­ hash æ•°ç»„çš„é»˜è®¤å¤§å°æ˜¯ 16ï¼Œè€Œä¸”ä¸€å®šæ˜¯ 2 çš„æŒ‡æ•°ã€‚</li>\n<li>HashTable ç›´æ¥ä½¿ç”¨å¯¹è±¡çš„ hashCodeã€‚ HashMap é‡æ–°è®¡ç®— hash å€¼ã€‚</li>\n<li>Hashtableã€HashMap éƒ½ä½¿ç”¨äº† Iteratorã€‚è€Œç”±äºå†å²åŸå› ï¼ŒHashtable è¿˜ä½¿ç”¨äº† Enumeration çš„æ–¹å¼ ã€‚ HashMap å®ç° Iteratorï¼Œæ”¯æŒ fast-failï¼ŒHashtable çš„ Iterator éå†æ”¯æŒ fast-failï¼Œç”¨ Enumeration ä¸æ”¯æŒ fast-failã€‚</li>\n</ul>\n<p><strong>HashMap å’Œ ConcurrentHashMap çš„åŒºåˆ«ï¼Ÿ</strong></p>\n<p>ConcurrentHashMap å’Œ HashMap çš„å®ç°æ–¹å¼ä¸ä¸€æ ·ï¼Œè™½ç„¶éƒ½æ˜¯ä½¿ç”¨æ¡¶æ•°ç»„å®ç°çš„ï¼Œä½†æ˜¯è¿˜æ˜¯æœ‰åŒºåˆ«ï¼ŒConcurrentHashMap å¯¹æ¡¶æ•°ç»„è¿›è¡Œäº†åˆ†æ®µï¼Œè€Œ HashMap å¹¶æ²¡æœ‰ã€‚</p>\n<p>ConcurrentHashMap åœ¨æ¯ä¸€ä¸ªåˆ†æ®µä¸Šéƒ½ç”¨é”è¿›è¡Œäº†ä¿æŠ¤ã€‚HashMap æ²¡æœ‰é”æœºåˆ¶ã€‚æ‰€ä»¥ï¼Œå‰è€…çº¿ç¨‹å®‰å…¨çš„ï¼Œåè€…ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚</p>\n<h4 id=\"setå’Œlistçš„åŒºåˆ«\"><a class=\"anchor\" href=\"#setå’Œlistçš„åŒºåˆ«\">#</a> Set å’Œ List çš„åŒºåˆ«</h4>\n<p>List,Set éƒ½æ˜¯ç»§æ‰¿è‡ª Collection æ¥å£ã€‚éƒ½æ˜¯ç”¨æ¥å­˜å‚¨ä¸€ç»„ç›¸åŒç±»å‹çš„å…ƒç´ çš„ã€‚</p>\n<p>List ç‰¹ç‚¹ï¼šå…ƒç´ æœ‰æ”¾å…¥é¡ºåºï¼Œå…ƒç´ å¯é‡å¤ ã€‚</p>\n<p>Set ç‰¹ç‚¹ï¼šå…ƒç´ æ— æ”¾å…¥é¡ºåºï¼Œå…ƒç´ ä¸å¯é‡å¤ã€‚</p>\n<h4 id=\"setå¦‚ä½•ä¿è¯å…ƒç´ ä¸é‡å¤\"><a class=\"anchor\" href=\"#setå¦‚ä½•ä¿è¯å…ƒç´ ä¸é‡å¤\">#</a> Set å¦‚ä½•ä¿è¯å…ƒç´ ä¸é‡å¤</h4>\n<p>åœ¨ Java çš„ Set ä½“ç³»ä¸­ï¼Œæ ¹æ®å®ç°æ–¹å¼ä¸åŒä¸»è¦åˆ†ä¸ºä¸¤å¤§ç±»ã€‚HashSet å’Œ TreeSetã€‚</p>\n<ol>\n<li>TreeSet æ˜¯äºŒå‰æ ‘å®ç°çš„ï¼ŒTreeset ä¸­çš„æ•°æ®æ˜¯è‡ªåŠ¨æ’å¥½åºçš„ï¼Œä¸å…è®¸æ”¾å…¥ null å€¼</li>\n<li>HashSet æ˜¯å“ˆå¸Œè¡¨å®ç°çš„ï¼ŒHashSet ä¸­çš„æ•°æ®æ˜¯æ— åºçš„ï¼Œå¯ä»¥æ”¾å…¥ nullï¼Œä½†åªèƒ½æ”¾å…¥ä¸€ä¸ª nullï¼Œä¸¤è€…ä¸­çš„å€¼éƒ½ä¸èƒ½é‡å¤ï¼Œå°±å¦‚æ•°æ®åº“ä¸­å”¯ä¸€çº¦æŸã€‚</li>\n</ol>\n<p>åœ¨ HashSet ä¸­ï¼ŒåŸºæœ¬çš„æ“ä½œéƒ½æ˜¯æœ‰ HashMap åº•å±‚å®ç°çš„ï¼Œå› ä¸º HashSet åº•å±‚æ˜¯ç”¨ HashMap å­˜å‚¨æ•°æ®çš„ã€‚å½“å‘ HashSet ä¸­æ·»åŠ å…ƒç´ çš„æ—¶å€™ï¼Œé¦–å…ˆè®¡ç®—å…ƒç´ çš„ hashcode å€¼ï¼Œç„¶åé€šè¿‡æ‰°åŠ¨è®¡ç®—å’ŒæŒ‰ä½ä¸çš„æ–¹å¼è®¡ç®—å‡ºè¿™ä¸ªå…ƒç´ çš„å­˜å‚¨ä½ç½®ï¼Œå¦‚æœè¿™ä¸ªä½ç½®ä½ç©ºï¼Œå°±å°†å…ƒç´ æ·»åŠ è¿›å»ï¼›å¦‚æœä¸ä¸ºç©ºï¼Œåˆ™ç”¨ equals æ–¹æ³•æ¯”è¾ƒå…ƒç´ æ˜¯å¦ç›¸ç­‰ï¼Œç›¸ç­‰å°±ä¸æ·»åŠ ï¼Œå¦åˆ™æ‰¾ä¸€ä¸ªç©ºä½æ·»åŠ ã€‚</p>\n<p>TreeSet çš„åº•å±‚æ˜¯ TreeMap çš„ keySet ()ï¼Œè€Œ TreeMap æ˜¯åŸºäºçº¢é»‘æ ‘å®ç°çš„ï¼Œçº¢é»‘æ ‘æ˜¯ä¸€ç§å¹³è¡¡äºŒå‰æŸ¥æ‰¾æ ‘ï¼Œå®ƒèƒ½ä¿è¯ä»»ä½•ä¸€ä¸ªèŠ‚ç‚¹çš„å·¦å³å­æ ‘çš„é«˜åº¦å·®ä¸ä¼šè¶…è¿‡è¾ƒçŸ®çš„é‚£æ£µçš„ä¸€å€ã€‚</p>\n<p>TreeMap æ˜¯æŒ‰ key æ’åºçš„ï¼Œå…ƒç´ åœ¨æ’å…¥ TreeSet æ—¶ compareTo () æ–¹æ³•è¦è¢«è°ƒç”¨ï¼Œæ‰€ä»¥ TreeSet ä¸­çš„å…ƒç´ è¦å®ç° Comparable æ¥å£ã€‚TreeSet ä½œä¸ºä¸€ç§ Setï¼Œå®ƒä¸å…è®¸å‡ºç°é‡å¤å…ƒç´ ã€‚TreeSet æ˜¯ç”¨ compareTo () æ¥åˆ¤æ–­é‡å¤å…ƒç´ çš„ã€‚</p>\n<h4 id=\"java8ä¸­streamç›¸å…³ç”¨æ³•\"><a class=\"anchor\" href=\"#java8ä¸­streamç›¸å…³ç”¨æ³•\">#</a> Java8 ä¸­ stream ç›¸å…³ç”¨æ³•</h4>\n<p>Stream ä½¿ç”¨ä¸€ç§ç±»ä¼¼ç”¨ SQL è¯­å¥ä»æ•°æ®åº“æŸ¥è¯¢æ•°æ®çš„ç›´è§‚æ–¹å¼æ¥æä¾›ä¸€ç§å¯¹ Java é›†åˆè¿ç®—å’Œè¡¨è¾¾çš„é«˜é˜¶æŠ½è±¡ã€‚</p>\n<p>Stream API å¯ä»¥æå¤§æé«˜ Java ç¨‹åºå‘˜çš„ç”Ÿäº§åŠ›ï¼Œè®©ç¨‹åºå‘˜å†™å‡ºé«˜æ•ˆç‡ã€å¹²å‡€ã€ç®€æ´çš„ä»£ç ã€‚</p>\n<p>è¿™ç§é£æ ¼å°†è¦å¤„ç†çš„å…ƒç´ é›†åˆçœ‹ä½œä¸€ç§æµï¼Œæµåœ¨ç®¡é“ä¸­ä¼ è¾“ï¼Œå¹¶ä¸”å¯ä»¥åœ¨ç®¡é“çš„èŠ‚ç‚¹ä¸Šè¿›è¡Œå¤„ç†ï¼Œæ¯”å¦‚ç­›é€‰ï¼Œæ’åºï¼Œèšåˆç­‰ã€‚</p>\n<p>Stream æœ‰ä»¥ä¸‹ç‰¹æ€§åŠä¼˜ç‚¹ï¼š</p>\n<ul>\n<li>æ— å­˜å‚¨ã€‚Stream ä¸æ˜¯ä¸€ç§æ•°æ®ç»“æ„ï¼Œå®ƒåªæ˜¯æŸç§æ•°æ®æºçš„ä¸€ä¸ªè§†å›¾ï¼Œæ•°æ®æºå¯ä»¥æ˜¯ä¸€ä¸ªæ•°ç»„ï¼ŒJava å®¹å™¨æˆ– I/O channel ç­‰ã€‚</li>\n<li>ä¸ºå‡½æ•°å¼ç¼–ç¨‹è€Œç”Ÿã€‚å¯¹ Stream çš„ä»»ä½•ä¿®æ”¹éƒ½ä¸ä¼šä¿®æ”¹èƒŒåçš„æ•°æ®æºï¼Œæ¯”å¦‚å¯¹ Stream æ‰§è¡Œè¿‡æ»¤æ“ä½œå¹¶ä¸ä¼šåˆ é™¤è¢«è¿‡æ»¤çš„å…ƒç´ ï¼Œè€Œæ˜¯ä¼šäº§ç”Ÿä¸€ä¸ªä¸åŒ…å«è¢«è¿‡æ»¤å…ƒç´ çš„æ–° Streamã€‚</li>\n<li>æƒ°å¼æ‰§è¡Œã€‚Stream ä¸Šçš„æ“ä½œå¹¶ä¸ä¼šç«‹å³æ‰§è¡Œï¼Œåªæœ‰ç­‰åˆ°ç”¨æˆ·çœŸæ­£éœ€è¦ç»“æœçš„æ—¶å€™æ‰ä¼šæ‰§è¡Œã€‚</li>\n<li>å¯æ¶ˆè´¹æ€§ã€‚Stream åªèƒ½è¢« â€œæ¶ˆè´¹â€ ä¸€æ¬¡ï¼Œä¸€æ—¦éå†è¿‡å°±ä¼šå¤±æ•ˆï¼Œå°±åƒå®¹å™¨çš„è¿­ä»£å™¨é‚£æ ·ï¼Œæƒ³è¦å†æ¬¡éå†å¿…é¡»é‡æ–°ç”Ÿæˆã€‚</li>\n</ul>\n<p>å’Œä»¥å‰çš„ Collection æ“ä½œä¸åŒï¼Œ Stream æ“ä½œè¿˜æœ‰ä¸¤ä¸ªåŸºç¡€çš„ç‰¹å¾ï¼š</p>\n<ul>\n<li><strong>Pipelining</strong>: ä¸­é—´æ“ä½œéƒ½ä¼šè¿”å›æµå¯¹è±¡æœ¬èº«ã€‚ è¿™æ ·å¤šä¸ªæ“ä½œå¯ä»¥ä¸²è”æˆä¸€ä¸ªç®¡é“ï¼Œ å¦‚åŒæµå¼é£æ ¼ï¼ˆfluent styleï¼‰ã€‚ è¿™æ ·åšå¯ä»¥å¯¹æ“ä½œè¿›è¡Œä¼˜åŒ–ï¼Œ æ¯”å¦‚å»¶è¿Ÿæ‰§è¡Œ (laziness) å’ŒçŸ­è·¯ ( short-circuiting)ã€‚</li>\n<li><strong>å†…éƒ¨è¿­ä»£</strong>ï¼š ä»¥å‰å¯¹é›†åˆéå†éƒ½æ˜¯é€šè¿‡ Iterator æˆ–è€… For-Each çš„æ–¹å¼ï¼Œæ˜¾å¼çš„åœ¨é›†åˆå¤–éƒ¨è¿›è¡Œè¿­ä»£ï¼Œ è¿™å«åšå¤–éƒ¨è¿­ä»£ã€‚ Stream æä¾›äº†å†…éƒ¨è¿­ä»£çš„æ–¹å¼ï¼Œ é€šè¿‡è®¿é—®è€…æ¨¡å¼ (Visitor) å®ç°ã€‚</li>\n</ul>\n<p><strong>ç¤ºä¾‹</strong></p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Java8Tester</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> args<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ä½¿ç”¨ Java 7: \"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token comment\">// è®¡ç®—ç©ºå­—ç¬¦ä¸²</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">></span></span> strings <span class=\"token operator\">=</span> <span class=\"token class-name\">Arrays</span><span class=\"token punctuation\">.</span><span class=\"token function\">asList</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"abc\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"bc\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"efg\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"abcd\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"jkl\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"åˆ—è¡¨: \"</span> <span class=\"token operator\">+</span> strings<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token keyword\">long</span> count <span class=\"token operator\">=</span> <span class=\"token function\">getCountEmptyStringUsingJava7</span><span class=\"token punctuation\">(</span>strings<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ç©ºå­—ç¬¦æ•°é‡ä¸º: \"</span> <span class=\"token operator\">+</span> count<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        count <span class=\"token operator\">=</span> <span class=\"token function\">getCountLength3UsingJava7</span><span class=\"token punctuation\">(</span>strings<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"å­—ç¬¦ä¸²é•¿åº¦ä¸º 3 çš„æ•°é‡ä¸º: \"</span> <span class=\"token operator\">+</span> count<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        <span class=\"token comment\">// åˆ é™¤ç©ºå­—ç¬¦ä¸²</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">></span></span> filtered <span class=\"token operator\">=</span> <span class=\"token function\">deleteEmptyStringsUsingJava7</span><span class=\"token punctuation\">(</span>strings<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ç­›é€‰åçš„åˆ—è¡¨: \"</span> <span class=\"token operator\">+</span> filtered<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        <span class=\"token comment\">// åˆ é™¤ç©ºå­—ç¬¦ä¸²ï¼Œå¹¶ä½¿ç”¨é€—å·æŠŠå®ƒä»¬åˆå¹¶èµ·æ¥</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>        <span class=\"token class-name\">String</span> mergedString <span class=\"token operator\">=</span> <span class=\"token function\">getMergedStringUsingJava7</span><span class=\"token punctuation\">(</span>strings<span class=\"token punctuation\">,</span> <span class=\"token string\">\", \"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"åˆå¹¶å­—ç¬¦ä¸²: \"</span> <span class=\"token operator\">+</span> mergedString<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>        <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Integer</span><span class=\"token punctuation\">></span></span> numbers <span class=\"token operator\">=</span> <span class=\"token class-name\">Arrays</span><span class=\"token punctuation\">.</span><span class=\"token function\">asList</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">7</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>        <span class=\"token comment\">// è·å–åˆ—è¡¨å…ƒç´ å¹³æ–¹æ•°</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>        <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Integer</span><span class=\"token punctuation\">></span></span> squaresList <span class=\"token operator\">=</span> <span class=\"token function\">getSquares</span><span class=\"token punctuation\">(</span>numbers<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"å¹³æ–¹æ•°åˆ—è¡¨: \"</span> <span class=\"token operator\">+</span> squaresList<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>        <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Integer</span><span class=\"token punctuation\">></span></span> integers <span class=\"token operator\">=</span> <span class=\"token class-name\">Arrays</span><span class=\"token punctuation\">.</span><span class=\"token function\">asList</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">13</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">15</span><span class=\"token punctuation\">,</span> <span class=\"token number\">6</span><span class=\"token punctuation\">,</span> <span class=\"token number\">17</span><span class=\"token punctuation\">,</span> <span class=\"token number\">8</span><span class=\"token punctuation\">,</span> <span class=\"token number\">19</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"åˆ—è¡¨: \"</span> <span class=\"token operator\">+</span> integers<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"åˆ—è¡¨ä¸­æœ€å¤§çš„æ•° : \"</span> <span class=\"token operator\">+</span> <span class=\"token function\">getMax</span><span class=\"token punctuation\">(</span>integers<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"åˆ—è¡¨ä¸­æœ€å°çš„æ•° : \"</span> <span class=\"token operator\">+</span> <span class=\"token function\">getMin</span><span class=\"token punctuation\">(</span>integers<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"æ‰€æœ‰æ•°ä¹‹å’Œ : \"</span> <span class=\"token operator\">+</span> <span class=\"token function\">getSum</span><span class=\"token punctuation\">(</span>integers<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"å¹³å‡æ•° : \"</span> <span class=\"token operator\">+</span> <span class=\"token function\">getAverage</span><span class=\"token punctuation\">(</span>integers<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"éšæœºæ•°: \"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>        <span class=\"token comment\">// è¾“å‡º 10 ä¸ªéšæœºæ•°</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>        <span class=\"token class-name\">Random</span> random <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Random</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> <span class=\"token number\">10</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>random<span class=\"token punctuation\">.</span><span class=\"token function\">nextInt</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ä½¿ç”¨ Java 8: \"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"åˆ—è¡¨: \"</span> <span class=\"token operator\">+</span> strings<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre></pre></td></tr><tr><td data-num=\"46\"></td><td><pre>        count <span class=\"token operator\">=</span> strings<span class=\"token punctuation\">.</span><span class=\"token function\">stream</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span>string <span class=\"token operator\">-></span> string<span class=\"token punctuation\">.</span><span class=\"token function\">isEmpty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">count</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ç©ºå­—ç¬¦ä¸²æ•°é‡ä¸º: \"</span> <span class=\"token operator\">+</span> count<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre></pre></td></tr><tr><td data-num=\"49\"></td><td><pre>        count <span class=\"token operator\">=</span> strings<span class=\"token punctuation\">.</span><span class=\"token function\">stream</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span>string <span class=\"token operator\">-></span> string<span class=\"token punctuation\">.</span><span class=\"token function\">length</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">count</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"å­—ç¬¦ä¸²é•¿åº¦ä¸º 3 çš„æ•°é‡ä¸º: \"</span> <span class=\"token operator\">+</span> count<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"51\"></td><td><pre></pre></td></tr><tr><td data-num=\"52\"></td><td><pre>        filtered <span class=\"token operator\">=</span> strings<span class=\"token punctuation\">.</span><span class=\"token function\">stream</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span>string <span class=\"token operator\">-></span> <span class=\"token operator\">!</span>string<span class=\"token punctuation\">.</span><span class=\"token function\">isEmpty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">collect</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Collectors</span><span class=\"token punctuation\">.</span><span class=\"token function\">toList</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"53\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ç­›é€‰åçš„åˆ—è¡¨: \"</span> <span class=\"token operator\">+</span> filtered<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"54\"></td><td><pre></pre></td></tr><tr><td data-num=\"55\"></td><td><pre>        mergedString <span class=\"token operator\">=</span> strings<span class=\"token punctuation\">.</span><span class=\"token function\">stream</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span>string <span class=\"token operator\">-></span> <span class=\"token operator\">!</span>string<span class=\"token punctuation\">.</span><span class=\"token function\">isEmpty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">collect</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Collectors</span><span class=\"token punctuation\">.</span><span class=\"token function\">joining</span><span class=\"token punctuation\">(</span><span class=\"token string\">\", \"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"56\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"åˆå¹¶å­—ç¬¦ä¸²: \"</span> <span class=\"token operator\">+</span> mergedString<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"57\"></td><td><pre></pre></td></tr><tr><td data-num=\"58\"></td><td><pre>        squaresList <span class=\"token operator\">=</span> numbers<span class=\"token punctuation\">.</span><span class=\"token function\">stream</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span>i <span class=\"token operator\">-></span> i <span class=\"token operator\">*</span> i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">distinct</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">collect</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Collectors</span><span class=\"token punctuation\">.</span><span class=\"token function\">toList</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"59\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Squares List: \"</span> <span class=\"token operator\">+</span> squaresList<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"60\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"åˆ—è¡¨: \"</span> <span class=\"token operator\">+</span> integers<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"61\"></td><td><pre></pre></td></tr><tr><td data-num=\"62\"></td><td><pre>        <span class=\"token class-name\">IntSummaryStatistics</span> stats <span class=\"token operator\">=</span> integers<span class=\"token punctuation\">.</span><span class=\"token function\">stream</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">mapToInt</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span> <span class=\"token operator\">-></span> x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">summaryStatistics</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"63\"></td><td><pre></pre></td></tr><tr><td data-num=\"64\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"åˆ—è¡¨ä¸­æœ€å¤§çš„æ•° : \"</span> <span class=\"token operator\">+</span> stats<span class=\"token punctuation\">.</span><span class=\"token function\">getMax</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"65\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"åˆ—è¡¨ä¸­æœ€å°çš„æ•° : \"</span> <span class=\"token operator\">+</span> stats<span class=\"token punctuation\">.</span><span class=\"token function\">getMin</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"66\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"æ‰€æœ‰æ•°ä¹‹å’Œ : \"</span> <span class=\"token operator\">+</span> stats<span class=\"token punctuation\">.</span><span class=\"token function\">getSum</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"67\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"å¹³å‡æ•° : \"</span> <span class=\"token operator\">+</span> stats<span class=\"token punctuation\">.</span><span class=\"token function\">getAverage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"68\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"éšæœºæ•°: \"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"69\"></td><td><pre></pre></td></tr><tr><td data-num=\"70\"></td><td><pre>        random<span class=\"token punctuation\">.</span><span class=\"token function\">ints</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">limit</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">sorted</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token operator\">::</span><span class=\"token function\">println</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"71\"></td><td><pre></pre></td></tr><tr><td data-num=\"72\"></td><td><pre>        <span class=\"token comment\">// å¹¶è¡Œå¤„ç†</span></pre></td></tr><tr><td data-num=\"73\"></td><td><pre>        count <span class=\"token operator\">=</span> strings<span class=\"token punctuation\">.</span><span class=\"token function\">parallelStream</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span>string <span class=\"token operator\">-></span> string<span class=\"token punctuation\">.</span><span class=\"token function\">isEmpty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">count</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"74\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ç©ºå­—ç¬¦ä¸²çš„æ•°é‡ä¸º: \"</span> <span class=\"token operator\">+</span> count<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"75\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"76\"></td><td><pre></pre></td></tr><tr><td data-num=\"77\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">int</span> <span class=\"token function\">getCountEmptyStringUsingJava7</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">></span></span> strings<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"78\"></td><td><pre>        <span class=\"token keyword\">int</span> count <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"79\"></td><td><pre></pre></td></tr><tr><td data-num=\"80\"></td><td><pre>        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> string <span class=\"token operator\">:</span> strings<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"81\"></td><td><pre>            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>string<span class=\"token punctuation\">.</span><span class=\"token function\">isEmpty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"82\"></td><td><pre>                count<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"83\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"84\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"85\"></td><td><pre>        <span class=\"token keyword\">return</span> count<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"86\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"87\"></td><td><pre></pre></td></tr><tr><td data-num=\"88\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">int</span> <span class=\"token function\">getCountLength3UsingJava7</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">></span></span> strings<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"89\"></td><td><pre>        <span class=\"token keyword\">int</span> count <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"90\"></td><td><pre></pre></td></tr><tr><td data-num=\"91\"></td><td><pre>        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> string <span class=\"token operator\">:</span> strings<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"92\"></td><td><pre>            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>string<span class=\"token punctuation\">.</span><span class=\"token function\">length</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"93\"></td><td><pre>                count<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"94\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"95\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"96\"></td><td><pre>        <span class=\"token keyword\">return</span> count<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"97\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"98\"></td><td><pre></pre></td></tr><tr><td data-num=\"99\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token keyword\">static</span> <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">deleteEmptyStringsUsingJava7</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">></span></span> strings<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"100\"></td><td><pre>        <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">></span></span> filteredList <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ArrayList</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"101\"></td><td><pre></pre></td></tr><tr><td data-num=\"102\"></td><td><pre>        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> string <span class=\"token operator\">:</span> strings<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"103\"></td><td><pre>            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>string<span class=\"token punctuation\">.</span><span class=\"token function\">isEmpty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"104\"></td><td><pre>                filteredList<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>string<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"105\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"106\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"107\"></td><td><pre>        <span class=\"token keyword\">return</span> filteredList<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"108\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"109\"></td><td><pre></pre></td></tr><tr><td data-num=\"110\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token keyword\">static</span> <span class=\"token class-name\">String</span> <span class=\"token function\">getMergedStringUsingJava7</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">></span></span> strings<span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span> separator<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"111\"></td><td><pre>        <span class=\"token class-name\">StringBuilder</span> stringBuilder <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">StringBuilder</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"112\"></td><td><pre></pre></td></tr><tr><td data-num=\"113\"></td><td><pre>        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> string <span class=\"token operator\">:</span> strings<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"114\"></td><td><pre>            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>string<span class=\"token punctuation\">.</span><span class=\"token function\">isEmpty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"115\"></td><td><pre>                stringBuilder<span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span>string<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"116\"></td><td><pre>                stringBuilder<span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span>separator<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"117\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"118\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"119\"></td><td><pre>        <span class=\"token class-name\">String</span> mergedString <span class=\"token operator\">=</span> stringBuilder<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"120\"></td><td><pre>        <span class=\"token keyword\">return</span> mergedString<span class=\"token punctuation\">.</span><span class=\"token function\">substring</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> mergedString<span class=\"token punctuation\">.</span><span class=\"token function\">length</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"121\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"122\"></td><td><pre></pre></td></tr><tr><td data-num=\"123\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token keyword\">static</span> <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Integer</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">getSquares</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Integer</span><span class=\"token punctuation\">></span></span> numbers<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"124\"></td><td><pre>        <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Integer</span><span class=\"token punctuation\">></span></span> squaresList <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ArrayList</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Integer</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"125\"></td><td><pre></pre></td></tr><tr><td data-num=\"126\"></td><td><pre>        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Integer</span> number <span class=\"token operator\">:</span> numbers<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"127\"></td><td><pre>            <span class=\"token class-name\">Integer</span> square <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Integer</span><span class=\"token punctuation\">(</span>number<span class=\"token punctuation\">.</span><span class=\"token function\">intValue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> number<span class=\"token punctuation\">.</span><span class=\"token function\">intValue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"128\"></td><td><pre></pre></td></tr><tr><td data-num=\"129\"></td><td><pre>            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>squaresList<span class=\"token punctuation\">.</span><span class=\"token function\">contains</span><span class=\"token punctuation\">(</span>square<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"130\"></td><td><pre>                squaresList<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>square<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"131\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"132\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"133\"></td><td><pre>        <span class=\"token keyword\">return</span> squaresList<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"134\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"135\"></td><td><pre></pre></td></tr><tr><td data-num=\"136\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">int</span> <span class=\"token function\">getMax</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Integer</span><span class=\"token punctuation\">></span></span> numbers<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"137\"></td><td><pre>        <span class=\"token keyword\">int</span> max <span class=\"token operator\">=</span> numbers<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"138\"></td><td><pre></pre></td></tr><tr><td data-num=\"139\"></td><td><pre>        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> numbers<span class=\"token punctuation\">.</span><span class=\"token function\">size</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"140\"></td><td><pre></pre></td></tr><tr><td data-num=\"141\"></td><td><pre>            <span class=\"token class-name\">Integer</span> number <span class=\"token operator\">=</span> numbers<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"142\"></td><td><pre></pre></td></tr><tr><td data-num=\"143\"></td><td><pre>            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>number<span class=\"token punctuation\">.</span><span class=\"token function\">intValue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">></span> max<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"144\"></td><td><pre>                max <span class=\"token operator\">=</span> number<span class=\"token punctuation\">.</span><span class=\"token function\">intValue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"145\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"146\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"147\"></td><td><pre>        <span class=\"token keyword\">return</span> max<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"148\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"149\"></td><td><pre></pre></td></tr><tr><td data-num=\"150\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">int</span> <span class=\"token function\">getMin</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Integer</span><span class=\"token punctuation\">></span></span> numbers<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"151\"></td><td><pre>        <span class=\"token keyword\">int</span> min <span class=\"token operator\">=</span> numbers<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"152\"></td><td><pre></pre></td></tr><tr><td data-num=\"153\"></td><td><pre>        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> numbers<span class=\"token punctuation\">.</span><span class=\"token function\">size</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"154\"></td><td><pre>            <span class=\"token class-name\">Integer</span> number <span class=\"token operator\">=</span> numbers<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"155\"></td><td><pre></pre></td></tr><tr><td data-num=\"156\"></td><td><pre>            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>number<span class=\"token punctuation\">.</span><span class=\"token function\">intValue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;</span> min<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"157\"></td><td><pre>                min <span class=\"token operator\">=</span> number<span class=\"token punctuation\">.</span><span class=\"token function\">intValue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"158\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"159\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"160\"></td><td><pre>        <span class=\"token keyword\">return</span> min<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"161\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"162\"></td><td><pre></pre></td></tr><tr><td data-num=\"163\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">int</span> <span class=\"token function\">getSum</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">List</span> numbers<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"164\"></td><td><pre>        <span class=\"token keyword\">int</span> sum <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">(</span>numbers<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"165\"></td><td><pre></pre></td></tr><tr><td data-num=\"166\"></td><td><pre>        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> numbers<span class=\"token punctuation\">.</span><span class=\"token function\">size</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"167\"></td><td><pre>            sum <span class=\"token operator\">+=</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span><span class=\"token punctuation\">)</span> numbers<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"168\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"169\"></td><td><pre>        <span class=\"token keyword\">return</span> sum<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"170\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"171\"></td><td><pre></pre></td></tr><tr><td data-num=\"172\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">int</span> <span class=\"token function\">getAverage</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Integer</span><span class=\"token punctuation\">></span></span> numbers<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"173\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token function\">getSum</span><span class=\"token punctuation\">(</span>numbers<span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> numbers<span class=\"token punctuation\">.</span><span class=\"token function\">size</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"174\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"175\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h4 id=\"apacheé›†åˆå¤„ç†å·¥å…·ç±»çš„ä½¿ç”¨\"><a class=\"anchor\" href=\"#apacheé›†åˆå¤„ç†å·¥å…·ç±»çš„ä½¿ç”¨\">#</a> apache é›†åˆå¤„ç†å·¥å…·ç±»çš„ä½¿ç”¨</h4>\n<p><span class=\"label danger\">â—ï¸TODO</span> å¾…å®Œå–„</p>\n<p>Commons Collections å¢å¼ºäº† Java Collections Frameworkã€‚å®ƒæä¾›äº†å‡ ä¸ªåŠŸèƒ½ï¼Œä½¿æ”¶é›†å¤„ç†å˜å¾—å®¹æ˜“ã€‚å®ƒæä¾›äº†è®¸å¤šæ–°çš„æ¥å£ï¼Œå®ç°å’Œå®ç”¨ç¨‹åºã€‚Commons Collections çš„ä¸»è¦åŠŸèƒ½å¦‚ä¸‹ï¼š</p>\n<ol>\n<li>Bag - Bag ç•Œé¢ç®€åŒ–äº†æ¯ä¸ªå¯¹è±¡å…·æœ‰å¤šä¸ªå‰¯æœ¬çš„é›†åˆã€‚</li>\n<li>BidiMap - BidiMap æ¥å£æä¾›åŒå‘æ˜ å°„ï¼Œå¯ç”¨äºä½¿ç”¨å€¼ä½¿ç”¨é”®æˆ–é”®æŸ¥æ‰¾å€¼ã€‚</li>\n<li>MapIterator - MapIterator æ¥å£æä¾›ç®€å•è€Œå®¹æ˜“çš„è¿­ä»£è¿­ä»£ã€‚</li>\n<li>Transforming Decorators - è½¬æ¢è£…é¥°å™¨å¯ä»¥åœ¨å°†é›†åˆæ·»åŠ åˆ°é›†åˆæ—¶æ›´æ”¹é›†åˆçš„æ¯ä¸ªå¯¹è±¡ã€‚</li>\n<li>Composite Collections - åœ¨éœ€è¦ç»Ÿä¸€å¤„ç†å¤šä¸ªé›†åˆçš„æƒ…å†µä¸‹ä½¿ç”¨å¤åˆé›†åˆã€‚</li>\n<li>Ordered Map - æœ‰åºåœ°å›¾ä¿ç•™æ·»åŠ å…ƒç´ çš„é¡ºåºã€‚</li>\n<li>Ordered Set - æœ‰åºé›†ä¿ç•™äº†æ·»åŠ å…ƒç´ çš„é¡ºåºã€‚</li>\n<li>Reference map - å‚è€ƒå›¾å…è®¸åœ¨å¯†åˆ‡æ§åˆ¶ä¸‹å¯¹é”® / å€¼è¿›è¡Œåƒåœ¾æ”¶é›†ã€‚</li>\n<li>Comparator implementations - å¯ä»¥ä½¿ç”¨è®¸å¤š Comparator å®ç°ã€‚</li>\n<li>Iterator implementations - è®¸å¤š Iterator å®ç°éƒ½å¯ç”¨ã€‚</li>\n<li>Adapter Classes - é€‚é…å™¨ç±»å¯ç”¨äºå°†æ•°ç»„å’Œæšä¸¾è½¬æ¢ä¸ºé›†åˆã€‚</li>\n<li>Utilities - å®ç”¨ç¨‹åºå¯ç”¨äºæµ‹è¯•æµ‹è¯•æˆ–åˆ›å»ºé›†åˆçš„å…¸å‹é›†åˆè®ºå±æ€§ï¼Œä¾‹å¦‚ unionï¼Œintersectionã€‚ æ”¯æŒå…³é—­ã€‚</li>\n</ol>\n<h4 id=\"ä¸åŒjdkç‰ˆæœ¬ä¸­çš„hashmap\"><a class=\"anchor\" href=\"#ä¸åŒjdkç‰ˆæœ¬ä¸­çš„hashmap\">#</a> ä¸åŒ JDK ç‰ˆæœ¬ä¸­çš„ HashMap</h4>\n<p><span class=\"label danger\">â—ï¸TODO</span> å¾…å®Œå–„</p>\n<h4 id=\"collection-å’Œ-collections-çš„åŒºåˆ«\"><a class=\"anchor\" href=\"#collection-å’Œ-collections-çš„åŒºåˆ«\">#</a> Collection å’Œ Collections çš„åŒºåˆ«</h4>\n<ul>\n<li><code>java.util.Collection</code>  æ˜¯ä¸€ä¸ªé›†åˆæ¥å£ã€‚å®ƒæä¾›äº†å¯¹é›†åˆå¯¹è±¡è¿›è¡ŒåŸºæœ¬æ“ä½œçš„é€šç”¨æ¥å£æ–¹æ³•ã€‚Collection æ¥å£çš„æ„ä¹‰æ˜¯ä¸ºå„ç§å…·ä½“çš„é›†åˆæä¾›äº†æœ€å¤§åŒ–çš„ç»Ÿä¸€æ“ä½œæ–¹å¼ã€‚</li>\n<li><code>java.util.Collections</code>  æ˜¯ä¸€ä¸ªåŒ…è£…ç±»ã€‚å®ƒåŒ…å«æœ‰å„ç§æœ‰å…³é›†åˆæ“ä½œçš„é™æ€å¤šæ€æ–¹æ³•ã€‚æ­¤ç±»ä¸èƒ½å®ä¾‹åŒ–ï¼Œå°±åƒä¸€ä¸ªå·¥å…·ç±»ï¼ŒæœåŠ¡äº Java çš„ Collection æ¡†æ¶ã€‚</li>\n</ul>\n<h4 id=\"arraysaslist-è·å¾—çš„-list-ä½¿ç”¨æ—¶éœ€æ³¨æ„ä»€ä¹ˆ\"><a class=\"anchor\" href=\"#arraysaslist-è·å¾—çš„-list-ä½¿ç”¨æ—¶éœ€æ³¨æ„ä»€ä¹ˆ\">#</a> Arrays.asList è·å¾—çš„ List ä½¿ç”¨æ—¶éœ€æ³¨æ„ä»€ä¹ˆ</h4>\n<ul>\n<li>\n<p>asList å¾—åˆ°çš„åªæ˜¯ä¸€ä¸ª Arrays çš„å†…éƒ¨ç±»ï¼Œä¸€ä¸ªåŸæ¥æ•°ç»„çš„è§†å›¾ Listï¼Œå› æ­¤å¦‚æœå¯¹å®ƒè¿›è¡Œå¢åˆ æ“ä½œä¼šæŠ¥é”™ã€‚</p>\n<p>è¿™æ˜¯å› ä¸º Arrays.asList () æ–¹æ³•è¿”å›çš„ ArrayList ä¸æ˜¯ java.util åŒ…ä¸‹çš„ï¼Œè€Œæ˜¯ java.util.Arrays.ArrayList ã€‚è¿™ä¸ªå†…éƒ¨ç±»æ²¡æœ‰å®ç° add ()ã€remove () æ–¹æ³•ï¼Œè€Œæ˜¯ç›´æ¥ä½¿ç”¨å®ƒçš„çˆ¶ç±» AbstractList çš„ç›¸åº”æ–¹æ³•ã€‚è€Œè¿™ä¸ªæ–¹æ³•ä¸­ç›¸å…³çš„ setï¼Œadd å’Œ remove æ–¹æ³•å‡è¿”å›  <code>throw new UnsupportedOperationException();</code>  ã€‚</p>\n</li>\n<li>\n<p>ç”¨ ArrayList çš„æ„é€ å™¨å¯ä»¥å°†å…¶è½¬å˜æˆçœŸæ­£çš„ ArrayListã€‚</p>\n</li>\n</ul>\n<h4 id=\"enumeration-å’Œ-iterator-çš„åŒºåˆ«\"><a class=\"anchor\" href=\"#enumeration-å’Œ-iterator-çš„åŒºåˆ«\">#</a> Enumeration å’Œ Iterator çš„åŒºåˆ«</h4>\n<ul>\n<li>\n<p>å‡½æ•°æ¥å£ä¸åŒ</p>\n<p>Enumeration åªæœ‰ 2 ä¸ªå‡½æ•°æ¥å£ã€‚é€šè¿‡ Enumerationï¼Œæˆ‘ä»¬åªèƒ½è¯»å–é›†åˆçš„æ•°æ®ï¼Œè€Œä¸èƒ½å¯¹æ•°æ®è¿›è¡Œä¿®æ”¹ã€‚</p>\n<p>Iterator åªæœ‰ 3 ä¸ªå‡½æ•°æ¥å£ã€‚Iterator é™¤äº†èƒ½è¯»å–é›†åˆçš„æ•°æ®ä¹‹å¤–ï¼Œä¹Ÿèƒ½æ•°æ®è¿›è¡Œåˆ é™¤æ“ä½œã€‚</p>\n</li>\n<li>\n<p>Iterator æ”¯æŒ fail-fast æœºåˆ¶ï¼Œè€Œ Enumeration ä¸æ”¯æŒã€‚</p>\n<p>Enumeration æ˜¯ JDK 1.0 æ·»åŠ çš„æ¥å£ã€‚ä½¿ç”¨åˆ°å®ƒçš„å‡½æ•°åŒ…æ‹¬ Vectorã€Hashtable ç­‰ç±»ï¼Œè¿™äº›ç±»éƒ½æ˜¯ JDK 1.0 ä¸­åŠ å…¥çš„ï¼ŒEnumeration å­˜åœ¨çš„ç›®çš„å°±æ˜¯ä¸ºå®ƒä»¬æä¾›éå†æ¥å£ã€‚Enumeration æœ¬èº«å¹¶æ²¡æœ‰æ”¯æŒåŒæ­¥ï¼Œè€Œåœ¨ Vectorã€Hashtable å®ç° Enumeration æ—¶ï¼Œæ·»åŠ äº†åŒæ­¥ã€‚</p>\n<p>è€Œ Iterator æ˜¯ JDK 1.2 æ‰æ·»åŠ çš„æ¥å£ï¼Œå®ƒä¹Ÿæ˜¯ä¸ºäº† HashMapã€ArrayList ç­‰é›†åˆæä¾›éå†æ¥å£ã€‚Iterator æ˜¯æ”¯æŒ fail-fast æœºåˆ¶çš„ï¼šå½“å¤šä¸ªçº¿ç¨‹å¯¹åŒä¸€ä¸ªé›†åˆçš„å†…å®¹è¿›è¡Œæ“ä½œæ—¶ï¼Œå°±å¯èƒ½ä¼šäº§ç”Ÿ fail-fast äº‹ä»¶ã€‚</p>\n</li>\n</ul>\n<blockquote>\n<p>æ³¨æ„ï¼šEnumeration è¿­ä»£å™¨åªèƒ½éå† Vectorã€Hashtable è¿™ç§å¤è€çš„é›†åˆï¼Œå› æ­¤é€šå¸¸ä¸è¦ä½¿ç”¨å®ƒï¼Œé™¤éåœ¨æŸäº›æç«¯æƒ…å†µä¸‹ï¼Œä¸å¾—ä¸ä½¿ç”¨ Enumerationï¼Œå¦åˆ™éƒ½åº”è¯¥é€‰æ‹© Iterator è¿­ä»£å™¨ã€‚</p>\n</blockquote>\n<h4 id=\"fail-fastå’Œfail-safe\"><a class=\"anchor\" href=\"#fail-fastå’Œfail-safe\">#</a> fail-fast å’Œ fail-safe</h4>\n<p><strong>fail-fast</strong></p>\n<p>åœ¨ç³»ç»Ÿè®¾è®¡ä¸­ï¼Œå¿«é€Ÿå¤±æ•ˆç³»ç»Ÿæ˜¯ä¸€ç§å¯ä»¥ç«‹å³æŠ¥å‘Šä»»ä½•å¯èƒ½è¡¨æ˜æ•…éšœæƒ…å†µçš„ç³»ç»Ÿã€‚å¿«é€Ÿå¤±æ•ˆç³»ç»Ÿé€šå¸¸è®¾è®¡ç”¨äºåœæ­¢æ­£å¸¸æ“ä½œï¼Œè€Œä¸æ˜¯è¯•å›¾ç»§ç»­å¯èƒ½å­˜åœ¨ç¼ºé™·çš„è¿‡ç¨‹ã€‚è¿™ç§è®¾è®¡é€šå¸¸ä¼šåœ¨æ“ä½œä¸­çš„å¤šä¸ªç‚¹æ£€æŸ¥ç³»ç»Ÿçš„çŠ¶æ€ï¼Œå› æ­¤å¯ä»¥åŠæ—©æ£€æµ‹åˆ°ä»»ä½•æ•…éšœã€‚å¿«é€Ÿå¤±æ•ˆæ¨¡å—çš„èŒè´£æ˜¯æ£€æµ‹é”™è¯¯ï¼Œç„¶åè®©ç³»ç»Ÿçš„ä¸‹ä¸€ä¸ªæœ€é«˜çº§åˆ«å¤„ç†é”™è¯¯ã€‚</p>\n<p>fail-fast æœºåˆ¶å¯ä»¥é¢„å…ˆè¯†åˆ«å‡ºä¸€äº›é”™è¯¯æƒ…å†µï¼Œä¸€æ–¹é¢å¯ä»¥é¿å…æ‰§è¡Œå¤æ‚çš„å…¶ä»–ä»£ç ï¼Œå¦å¤–ä¸€æ–¹é¢ï¼Œè¿™ç§å¼‚å¸¸æƒ…å†µè¢«è¯†åˆ«ä¹‹åä¹Ÿå¯ä»¥é’ˆå¯¹æ€§çš„åšä¸€äº›å•ç‹¬å¤„ç†ã€‚</p>\n<p>ä½†å€¼å¾—æ³¨æ„çš„æ˜¯ï¼ŒJava çš„é›†åˆç±»ä¸­è¿ç”¨äº† fail-fast æœºåˆ¶è¿›è¡Œè®¾è®¡ï¼Œä¸€æ—¦ä½¿ç”¨ä¸å½“ï¼Œè§¦å‘ fail-fast æœºåˆ¶è®¾è®¡çš„ä»£ç ï¼Œå°±ä¼šå‘ç”Ÿéé¢„æœŸæƒ…å†µã€‚</p>\n<p>æˆ‘ä»¬é€šå¸¸è¯´çš„ Java ä¸­çš„ fail-fast æœºåˆ¶ï¼Œé»˜è®¤æŒ‡çš„æ˜¯ Java é›†åˆçš„ä¸€ç§é”™è¯¯æ£€æµ‹æœºåˆ¶ã€‚å½“å¤šä¸ªçº¿ç¨‹å¯¹éƒ¨åˆ†é›†åˆè¿›è¡Œç»“æ„ä¸Šçš„æ”¹å˜çš„æ“ä½œæ—¶ï¼Œæœ‰å¯èƒ½ä¼šäº§ç”Ÿ fail-fast æœºåˆ¶ï¼Œè¿™ä¸ªæ—¶å€™å°±ä¼šæŠ›å‡º ConcurrentModificationExceptionã€‚å¦‚åœ¨ foreach å¾ªç¯ä¸­å¯¹æŸäº›é›†åˆå…ƒç´ è¿›è¡Œå…ƒç´ è¿›è¡Œ remove/add æ“ä½œã€‚</p>\n<p>åœ¨ foreach è¿›è¡Œ add/remove æ“ä½œå‡ºç°å¼‚å¸¸çš„åŸå› ï¼š</p>\n<blockquote>\n<p>foreach ä½¿ç”¨äº†å¢å¼º for å¾ªç¯ï¼Œè€Œåœ¨å¢å¼º for å¾ªç¯ä¸­ï¼Œé›†åˆéå†æ˜¯é€šè¿‡ iterator è¿›è¡Œçš„ï¼Œä½†æ˜¯å…ƒç´ çš„ add/remove å´æ˜¯ç›´æ¥ä½¿ç”¨çš„é›†åˆç±»è‡ªå·±çš„æ–¹æ³•ã€‚è¿™å°±å¯¼è‡´ iterator åœ¨éå†çš„æ—¶å€™ï¼Œä¼šå‘ç°æœ‰ä¸€ä¸ªå…ƒç´ åœ¨è‡ªå·±ä¸çŸ¥ä¸è§‰çš„æƒ…å†µä¸‹å°±è¢«åˆ é™¤ / æ·»åŠ äº†ï¼Œå°±ä¼šæŠ›å‡ºä¸€ä¸ª ConcurrentModificationException å¼‚å¸¸ï¼Œç”¨æ¥æç¤ºç”¨æˆ·ï¼Œå¯èƒ½å‘ç”Ÿäº†å¹¶å‘ä¿®æ”¹ï¼ä½†å®é™…ä¸Šè¿™é‡Œå¹¶æ²¡æœ‰çœŸçš„å‘ç”Ÿå¹¶å‘ï¼Œåªæ˜¯ Iterator ä½¿ç”¨äº† fail-fast çš„ä¿æŠ¤æœºåˆ¶ï¼Œåªè¦ä»–å‘ç°æœ‰æŸä¸€æ¬¡ä¿®æ”¹æ˜¯æœªç»è¿‡è‡ªå·±è¿›è¡Œçš„ï¼Œé‚£ä¹ˆå°±ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚</p>\n</blockquote>\n<p><strong>fail-safe</strong></p>\n<p>ä¸ºäº†é¿å…è§¦å‘ fail-fast æœºåˆ¶ï¼Œå¯¼è‡´å¼‚å¸¸ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Java ä¸­æä¾›çš„ä¸€äº›é‡‡ç”¨äº† fail-safe æœºåˆ¶çš„é›†åˆç±»ã€‚è¿™æ ·çš„é›†åˆå®¹å™¨åœ¨éå†æ—¶ä¸æ˜¯ç›´æ¥åœ¨é›†åˆå†…å®¹ä¸Šè®¿é—®çš„ï¼Œè€Œæ˜¯å…ˆå¤åˆ¶åŸæœ‰é›†åˆå†…å®¹ï¼Œåœ¨æ‹·è´çš„é›†åˆä¸Šè¿›è¡Œéå†ã€‚</p>\n<p><code>java.util.concurrent</code>  åŒ…ä¸‹çš„å®¹å™¨éƒ½æ˜¯ fail-safe çš„ï¼Œå¯ä»¥åœ¨å¤šçº¿ç¨‹ä¸‹å¹¶å‘ä½¿ç”¨ï¼Œå¹¶å‘ä¿®æ”¹ã€‚åŒæ—¶ä¹Ÿå¯ä»¥åœ¨ foreach ä¸­è¿›è¡Œ add/remove ã€‚fail-safe é›†åˆçš„æ‰€æœ‰å¯¹é›†åˆçš„ä¿®æ”¹éƒ½æ˜¯å…ˆæ‹·è´ä¸€ä»½å‰¯æœ¬ï¼Œç„¶ååœ¨å‰¯æœ¬é›†åˆä¸Šè¿›è¡Œçš„ï¼Œå¹¶ä¸æ˜¯ç›´æ¥å¯¹åŸé›†åˆè¿›è¡Œä¿®æ”¹ã€‚å¹¶ä¸”è¿™äº›ä¿®æ”¹æ–¹æ³•ï¼Œå¦‚ add/remove éƒ½æ˜¯é€šè¿‡åŠ é”æ¥æ§åˆ¶å¹¶å‘çš„ã€‚</p>\n<p>ä½†æ˜¯ï¼Œè™½ç„¶åŸºäºæ‹·è´å†…å®¹çš„ä¼˜ç‚¹æ˜¯é¿å…äº† ConcurrentModificationExceptionï¼Œä½†åŒæ ·åœ°ï¼Œè¿­ä»£å™¨å¹¶ä¸èƒ½è®¿é—®åˆ°ä¿®æ”¹åçš„å†…å®¹ã€‚</p>\n<p>CopyOnWriteArrayList ä¸­ add/remove ç­‰å†™æ–¹æ³•æ˜¯éœ€è¦åŠ é”çš„ï¼Œç›®çš„æ˜¯ä¸ºäº†é¿å… Copy å‡º N ä¸ªå‰¯æœ¬å‡ºæ¥ï¼Œå¯¼è‡´å¹¶å‘å†™ã€‚ä½†æ˜¯ï¼ŒCopyOnWriteArrayList ä¸­çš„è¯»æ–¹æ³•æ˜¯æ²¡æœ‰åŠ é”çš„ã€‚è¿™æ ·åšçš„å¥½å¤„æ˜¯æˆ‘ä»¬å¯ä»¥å¯¹ CopyOnWrite å®¹å™¨è¿›è¡Œå¹¶å‘çš„è¯»ï¼Œå½“ç„¶ï¼Œè¿™é‡Œè¯»åˆ°çš„æ•°æ®å¯èƒ½ä¸æ˜¯æœ€æ–°çš„ã€‚å› ä¸ºå†™æ—¶å¤åˆ¶çš„æ€æƒ³æ˜¯é€šè¿‡å»¶æ—¶æ›´æ–°çš„ç­–ç•¥æ¥å®ç°æ•°æ®çš„æœ€ç»ˆä¸€è‡´æ€§çš„ï¼Œå¹¶éå¼ºä¸€è‡´æ€§ã€‚</p>\n<p>ä½†å¯¹äºåœ¨å¾ªç¯ä¸­è¿›è¡Œ add/remove æ“ä½œæ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ™®é€šçš„ for å¾ªç¯ï¼Œå› ä¸ºæ™®é€š for å¾ªç¯å¹¶æ²¡æœ‰ç”¨åˆ° Iterator çš„éå†ï¼Œæ‰€ä»¥å‹æ ¹å°±æ²¡æœ‰è¿›è¡Œ fail-fast çš„æ£€éªŒã€‚</p>\n<h4 id=\"copy-on-write\"><a class=\"anchor\" href=\"#copy-on-write\">#</a> Copy-On-Write</h4>\n<p>Copy-On-Write ç®€ç§° COWï¼Œæ˜¯ä¸€ç§ç”¨äºç¨‹åºè®¾è®¡ä¸­çš„ä¼˜åŒ–ç­–ç•¥ã€‚å…¶åŸºæœ¬æ€è·¯æ˜¯ï¼Œä»ä¸€å¼€å§‹å¤§å®¶éƒ½åœ¨å…±äº«åŒä¸€ä¸ªå†…å®¹ï¼Œå½“æŸä¸ªäººæƒ³è¦ä¿®æ”¹è¿™ä¸ªå†…å®¹çš„æ—¶å€™ï¼Œæ‰ä¼šçœŸæ­£æŠŠå†…å®¹ Copy å‡ºå»å½¢æˆä¸€ä¸ªæ–°çš„å†…å®¹ç„¶åå†æ”¹ï¼Œè¿™æ˜¯ä¸€ç§å»¶æ—¶æ‡’æƒ°ç­–ç•¥ã€‚</p>\n<p>CopyOnWrite å®¹å™¨å³å†™æ—¶å¤åˆ¶çš„å®¹å™¨ã€‚é€šä¿—çš„ç†è§£æ˜¯å½“æˆ‘ä»¬å¾€ä¸€ä¸ªå®¹å™¨æ·»åŠ å…ƒç´ çš„æ—¶å€™ï¼Œä¸ç›´æ¥å¾€å½“å‰å®¹å™¨æ·»åŠ ï¼Œè€Œæ˜¯å…ˆå°†å½“å‰å®¹å™¨è¿›è¡Œ Copyï¼Œå¤åˆ¶å‡ºä¸€ä¸ªæ–°çš„å®¹å™¨ï¼Œç„¶åæ–°çš„å®¹å™¨é‡Œæ·»åŠ å…ƒç´ ï¼Œæ·»åŠ å®Œå…ƒç´ ä¹‹åï¼Œå†å°†åŸå®¹å™¨çš„å¼•ç”¨æŒ‡å‘æ–°çš„å®¹å™¨ã€‚</p>\n<p>æ‰€ä»¥ CopyOnWrite å®¹å™¨æ˜¯ä¸€ç§è¯»å†™åˆ†ç¦»çš„æ€æƒ³ï¼Œè¯»å’Œå†™ä¸åŒçš„å®¹å™¨ã€‚è€Œ Vector åœ¨è¯»å†™çš„æ—¶å€™ä½¿ç”¨åŒä¸€ä¸ªå®¹å™¨ï¼Œè¯»å†™äº’æ–¥ï¼ŒåŒæ—¶åªèƒ½åšä¸€ä»¶äº‹å„¿ã€‚</p>\n<h4 id=\"copyonwritearraylist-concurrentskiplistmap\"><a class=\"anchor\" href=\"#copyonwritearraylist-concurrentskiplistmap\">#</a> CopyOnWriteArrayListã€ConcurrentSkipListMap</h4>\n<p>ä» JDK1.5 å¼€å§‹ Java å¹¶å‘åŒ…é‡Œæä¾›äº†ä¸¤ä¸ªä½¿ç”¨ CopyOnWrite æœºåˆ¶å®ç°çš„å¹¶å‘å®¹å™¨ï¼Œå®ƒä»¬æ˜¯ CopyOnWriteArrayList å’Œ CopyOnWriteArraySetã€‚CopyOnWrite å®¹å™¨éå¸¸æœ‰ç”¨ï¼Œå¯ä»¥åœ¨éå¸¸å¤šçš„å¹¶å‘åœºæ™¯ä¸­ä½¿ç”¨åˆ°ã€‚</p>\n<p><strong>CopyOnWriteArrayList</strong></p>\n<p>CopyOnWriteArrayList çš„æ•´ä¸ª add æ“ä½œéƒ½æ˜¯åœ¨é”çš„ä¿æŠ¤ä¸‹è¿›è¡Œçš„ã€‚ä¹Ÿå°±æ˜¯è¯´ add æ–¹æ³•æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚CopyOnWrite å¹¶å‘å®¹å™¨å¸¸ç”¨äºè¯»å¤šå†™å°‘çš„å¹¶å‘åœºæ™¯ã€‚</p>\n<p>å’Œ ArrayList ä¸åŒçš„æ˜¯ï¼ŒCopyOnWriteArrayList å…·æœ‰ä»¥ä¸‹ç‰¹æ€§ï¼š</p>\n<ul>\n<li>æ”¯æŒé«˜æ•ˆç‡å¹¶å‘ä¸”æ˜¯çº¿ç¨‹å®‰å…¨çš„</li>\n<li>å› ä¸ºé€šå¸¸éœ€è¦å¤åˆ¶æ•´ä¸ªåŸºç¡€æ•°ç»„ï¼Œæ‰€ä»¥å¯å˜æ“ä½œï¼ˆadd ()ã€set () å’Œ remove () ç­‰ç­‰ï¼‰çš„å¼€é”€å¾ˆå¤§</li>\n<li>è¿­ä»£å™¨æ”¯æŒ hasNext (), next () ç­‰ä¸å¯å˜æ“ä½œï¼Œä½†ä¸æ”¯æŒå¯å˜ remove () ç­‰æ“ä½œ</li>\n<li>ä½¿ç”¨è¿­ä»£å™¨è¿›è¡Œéå†çš„é€Ÿåº¦å¾ˆå¿«ï¼Œå¹¶ä¸”ä¸ä¼šä¸å…¶ä»–çº¿ç¨‹å‘ç”Ÿå†²çªã€‚åœ¨æ„é€ è¿­ä»£å™¨æ—¶ï¼Œè¿­ä»£å™¨ä¾èµ–äºä¸å˜çš„æ•°ç»„å¿«ç…§ã€‚</li>\n</ul>\n<p><strong>ConcurrentSkipListMap</strong></p>\n<p>ConcurrentSkipListMap æ˜¯ä¸€ä¸ªå†…éƒ¨ä½¿ç”¨è·³è¡¨ï¼Œå¹¶ä¸”æ”¯æŒæ’åºå’Œå¹¶å‘çš„ä¸€ä¸ª Mapï¼Œæ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚ï¼ˆä¸€èˆ¬å¾ˆå°‘ä¼šè¢«ç”¨åˆ°ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªæ¯”è¾ƒåé—¨çš„æ•°æ®ç»“æ„ï¼‰</p>\n<p>ConcurrentSkipListMap å’Œ ConcurrentHashMap çš„ä¸»è¦åŒºåˆ«ï¼š</p>\n<ul>\n<li>åº•å±‚å®ç°æ–¹å¼ä¸åŒã€‚ConcurrentSkipListMap åº•å±‚åŸºäºè·³è¡¨ã€‚ConcurrentHashMap åº•å±‚åŸºäº Hash æ¡¶å’Œçº¢é»‘æ ‘ã€‚</li>\n<li>ConcurrentHashMap ä¸æ”¯æŒæ’åºã€‚ConcurrentSkipListMap æ”¯æŒæ’åºã€‚</li>\n</ul>\n<h3 id=\"æšä¸¾\"><a class=\"anchor\" href=\"#æšä¸¾\">#</a> æšä¸¾</h3>\n<h4 id=\"æšä¸¾çš„ç”¨æ³•\"><a class=\"anchor\" href=\"#æšä¸¾çš„ç”¨æ³•\">#</a> æšä¸¾çš„ç”¨æ³•</h4>\n<p>åœ¨ Java æšä¸¾å‡ºç°ä¹‹å‰ï¼Œè¡¨ç¤ºæšä¸¾ç±»å‹çš„é€šå¸¸æ¨¡å¼æ˜¯å£°æ˜ä¸€ç»„ int å¸¸é‡æ¥è¡¨ç¤ºã€‚è¿™ç§æ–¹æ³•åœ¨ç¼–è¯‘æ—¶ï¼Œæ— æ³•æ ¡éªŒè¯¥ç±»å‹çš„åˆæ³•æ€§ï¼Œå¹¶ä¸”åœ¨è·å–æšä¸¾å€¼æ—¶ï¼Œå¯è¯»æ€§å·®ã€‚å› æ­¤ï¼Œä»  <code>Java1.5</code>  å‘è¡Œç‰ˆæœ¬å¼€å§‹ï¼Œå°±æå‡ºäº†æšä¸¾ç±»å‹ï¼Œä½œä¸ºæ›¿ä»£çš„è§£å†³æ–¹æ¡ˆï¼Œå¯ä»¥é¿å… <code>int</code>  å’Œ <code>String</code>  æšä¸¾æ¨¡å¼çš„ç¼ºç‚¹ï¼Œå¹¶æä¾›äº†è®¸å¤šé¢å¤–çš„å¥½å¤„ã€‚</p>\n<p>æšä¸¾ç±»å‹ï¼ˆ <code>enum type</code> ï¼‰æ˜¯æŒ‡ç”±ä¸€ç»„å›ºå®šçš„å¸¸é‡ç»„æˆåˆæ³•çš„ç±»å‹ã€‚ <code>Java</code>  ä¸­ç”±å…³é”®å­— <code>enum</code>  æ¥å®šä¹‰ä¸€ä¸ªæšä¸¾ç±»å‹ã€‚</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">enum</span> <span class=\"token class-name\">Color</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    RED<span class=\"token punctuation\">,</span> GREEN<span class=\"token punctuation\">,</span> BLANK<span class=\"token punctuation\">,</span> YELLOW<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h4 id=\"æšä¸¾çš„å®ç°\"><a class=\"anchor\" href=\"#æšä¸¾çš„å®ç°\">#</a> æšä¸¾çš„å®ç°</h4>\n<p>æšä¸¾ç±»æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªç»§æ‰¿è‡ª Enum çš„ç±»ï¼Œå¹¶ä¸”ä½¿ç”¨å…³é”®å­— final è¿›è¡Œä¿®é¥°ã€‚å½“æˆ‘ä»¬ä½¿ç”¨ enmu æ¥å®šä¹‰ä¸€ä¸ªæšä¸¾ç±»å‹çš„æ—¶å€™ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬åˆ›å»ºä¸€ä¸ª final ç±»å‹çš„ç±»ç»§æ‰¿ Enum ç±»ï¼Œæ‰€ä»¥æšä¸¾ç±»å‹ä¸èƒ½è¢«ç»§æ‰¿ã€‚</p>\n<h4 id=\"æšä¸¾ä¸å•ä¾‹\"><a class=\"anchor\" href=\"#æšä¸¾ä¸å•ä¾‹\">#</a> æšä¸¾ä¸å•ä¾‹</h4>\n<p><span class=\"label danger\">â—ï¸TODO</span> å¾…å®Œå–„</p>\n<h4 id=\"enumç±»\"><a class=\"anchor\" href=\"#enumç±»\">#</a> Enum ç±»</h4>\n<p>æˆ‘ä»¬ä½¿ç”¨ enum å®šä¹‰çš„æšä¸¾ï¼Œå…¶å®ç°æ–¹å¼å°±æ˜¯é€šè¿‡ç»§æ‰¿ Enum ç±»å®ç°çš„ã€‚å½“æˆ‘ä»¬ä½¿ç”¨ enmu æ¥å®šä¹‰ä¸€ä¸ªæšä¸¾ç±»å‹çš„æ—¶å€™ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬åˆ›å»ºä¸€ä¸ª final ç±»å‹çš„ç±»ç»§æ‰¿ Enum ç±»ï¼Œæ‰€ä»¥æšä¸¾ç±»å‹ä¸èƒ½è¢«ç»§æ‰¿ã€‚</p>\n<p>java.lang.Enum ç±»çš„å®šä¹‰å¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>lang</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">abstract</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Enum</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">E</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Enum</span><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">E</span><span class=\"token punctuation\">></span><span class=\"token punctuation\">></span></span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">Constable</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">Comparable</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">E</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">Serializable</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">String</span> name<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token keyword\">int</span> ordinal<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h4 id=\"javaæšä¸¾å¦‚ä½•æ¯”è¾ƒ\"><a class=\"anchor\" href=\"#javaæšä¸¾å¦‚ä½•æ¯”è¾ƒ\">#</a> Java æšä¸¾å¦‚ä½•æ¯”è¾ƒ</h4>\n<p>java æšä¸¾å€¼åœ¨æ¯”è¾ƒæ—¶ä½¿ç”¨  <code>==</code>  å’Œ  <code>equals</code>  æ–¹æ³•æ²¡æœ‰åŒºåˆ«ï¼Œä¸¤ä¸ªéšä¾¿ç”¨éƒ½æ˜¯ä¸€æ ·çš„æ•ˆæœã€‚å› ä¸ºæšä¸¾ Enum ç±»çš„ equals æ–¹æ³•é»˜è®¤å®ç°å°±æ˜¯é€šè¿‡ == æ¥æ¯”è¾ƒçš„ï¼›</p>\n<p>ç±»ä¼¼çš„ Enum çš„ compareTo æ–¹æ³•æ¯”è¾ƒçš„æ˜¯ Enum çš„ ordinal é¡ºåºå¤§å°ï¼›</p>\n<p>ç±»ä¼¼çš„è¿˜æœ‰ Enum çš„ name æ–¹æ³•å’Œ toString æ–¹æ³•ä¸€æ ·éƒ½è¿”å›çš„æ˜¯ Enum çš„ name å€¼ã€‚</p>\n<h4 id=\"switchå¯¹æšä¸¾çš„æ”¯æŒ\"><a class=\"anchor\" href=\"#switchå¯¹æšä¸¾çš„æ”¯æŒ\">#</a> switch å¯¹æšä¸¾çš„æ”¯æŒ</h4>\n<p>Java 1.7 ä¹‹å‰ switch å‚æ•°å¯ç”¨ç±»å‹ä¸º shortã€byteã€intã€charï¼Œæšä¸¾ç±»å‹ä¹‹æ‰€ä»¥èƒ½ä½¿ç”¨å…¶å®æ˜¯ç¼–è¯‘å™¨å±‚é¢å®ç°çš„</p>\n<p>ç¼–è¯‘å™¨ä¼šå°†æšä¸¾ switch è½¬æ¢ä¸ºç±»ä¼¼ä¸‹é¢çš„å½¢å¼ï¼š</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">switch</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">.</span><span class=\"token function\">ordinal</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">case</span> <span class=\"token class-name\">Status</span><span class=\"token punctuation\">.</span>START<span class=\"token punctuation\">.</span><span class=\"token function\">ordinal</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>æ‰€ä»¥å…¶å®è´¨è¿˜æ˜¯ int å‚æ•°ç±»å‹ã€‚</p>\n<h4 id=\"æšä¸¾çš„åºåˆ—åŒ–å¦‚ä½•å®ç°\"><a class=\"anchor\" href=\"#æšä¸¾çš„åºåˆ—åŒ–å¦‚ä½•å®ç°\">#</a> æšä¸¾çš„åºåˆ—åŒ–å¦‚ä½•å®ç°</h4>\n<p><span class=\"label danger\">â—ï¸TODO</span> å¾…å®Œå–„</p>\n<h4 id=\"æšä¸¾çš„çº¿ç¨‹å®‰å…¨æ€§é—®é¢˜\"><a class=\"anchor\" href=\"#æšä¸¾çš„çº¿ç¨‹å®‰å…¨æ€§é—®é¢˜\">#</a> æšä¸¾çš„çº¿ç¨‹å®‰å…¨æ€§é—®é¢˜</h4>\n<p>ç¼–è¯‘å™¨ä¼šå°†æˆ‘ä»¬åˆ›å»ºçš„æšä¸¾ç±»ä¸­çš„å±æ€§åŠæ–¹æ³•å£°æ˜ä¸º static ä¿®é¥°ï¼Œè€Œå½“ä¸€ä¸ª Java ç±»ç¬¬ä¸€æ¬¡è¢«çœŸæ­£ä½¿ç”¨åˆ°çš„æ—¶å€™é™æ€èµ„æºè¢«åˆå§‹åŒ–ã€Java ç±»çš„åŠ è½½å’Œåˆå§‹åŒ–è¿‡ç¨‹éƒ½æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚æ‰€ä»¥ï¼Œåˆ›å»ºä¸€ä¸ª enum ç±»å‹æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚</p>\n<h3 id=\"io\"><a class=\"anchor\" href=\"#io\">#</a> IO</h3>\n<p>Bit æ˜¯æœ€å°çš„äºŒè¿›åˆ¶å•ä½ ï¼Œæ˜¯è®¡ç®—æœºçš„æ“ä½œéƒ¨åˆ†ã€‚å–å€¼ 0 æˆ–è€… 1</p>\n<p>Byteï¼ˆå­—èŠ‚ï¼‰æ˜¯è®¡ç®—æœºæ“ä½œæ•°æ®çš„æœ€å°å•ä½ç”± 8 ä½ bit ç»„æˆ å–å€¼ï¼ˆ-128~127ï¼‰</p>\n<p>Charï¼ˆå­—ç¬¦ï¼‰æ˜¯ç”¨æˆ·çš„å¯è¯»å†™çš„æœ€å°å•ä½ï¼Œåœ¨ Java é‡Œé¢ç”± 16 ä½ bit ç»„æˆ å–å€¼ï¼ˆ0~65535ï¼‰</p>\n<h4 id=\"å­—ç¬¦æµ-å­—èŠ‚æµ\"><a class=\"anchor\" href=\"#å­—ç¬¦æµ-å­—èŠ‚æµ\">#</a> å­—ç¬¦æµã€å­—èŠ‚æµ</h4>\n<p>å­—èŠ‚æµï¼Œç”¨äºæ“ä½œ byteï¼ˆå­—èŠ‚ï¼‰ç±»å‹æ•°æ®ï¼Œä¸»è¦æ“ä½œç±»æ˜¯ OutputStreamã€InputStream çš„å­ç±»ï¼›ä¸ç”¨ç¼“å†²åŒºï¼Œç›´æ¥å¯¹æ–‡ä»¶æœ¬èº«æ“ä½œã€‚</p>\n<p>å­—ç¬¦æµï¼Œç”¨äºæ“ä½œ charï¼ˆå­—ç¬¦ï¼‰å­—ç¬¦ç±»å‹æ•°æ®ï¼Œä¸»è¦æ“ä½œç±»æ˜¯ Readerã€Writer çš„å­ç±»ï¼›ä½¿ç”¨ç¼“å†²åŒºç¼“å†²å­—ç¬¦ï¼Œä¸å…³é—­æµå°±ä¸ä¼šè¾“å‡ºä»»ä½•å†…å®¹ã€‚</p>\n<p>æ•´ä¸ª IO åŒ…å®é™…ä¸Šåˆ†ä¸ºå­—èŠ‚æµå’Œå­—ç¬¦æµï¼Œä½†æ˜¯é™¤äº†è¿™ä¸¤ä¸ªæµä¹‹å¤–ï¼Œè¿˜å­˜åœ¨ä¸€ç»„å­—èŠ‚æµ - å­—ç¬¦æµçš„è½¬æ¢ç±»ã€‚</p>\n<p>OutputStreamWriterï¼šæ˜¯ Writer çš„å­ç±»ï¼Œå°†è¾“å‡ºçš„å­—ç¬¦æµå˜ä¸ºå­—èŠ‚æµï¼Œå³å°†ä¸€ä¸ªå­—ç¬¦æµçš„è¾“å‡ºå¯¹è±¡å˜ä¸ºå­—èŠ‚æµè¾“å‡ºå¯¹è±¡ã€‚</p>\n<p>InputStreamReaderï¼šæ˜¯ Reader çš„å­ç±»ï¼Œå°†è¾“å…¥çš„å­—èŠ‚æµå˜ä¸ºå­—ç¬¦æµï¼Œå³å°†ä¸€ä¸ªå­—èŠ‚æµçš„è¾“å…¥å¯¹è±¡å˜ä¸ºå­—ç¬¦æµçš„è¾“å…¥å¯¹è±¡ã€‚</p>\n<h4 id=\"è¾“å…¥æµ-è¾“å‡ºæµ\"><a class=\"anchor\" href=\"#è¾“å…¥æµ-è¾“å‡ºæµ\">#</a> è¾“å…¥æµã€è¾“å‡ºæµ</h4>\n<p>è¾“å…¥ã€è¾“å‡ºä»¥å­˜å‚¨æ•°æ®çš„ä»‹è´¨ä½œä¸ºå‚ç…§ç‰©ï¼Œå¦‚æœæ˜¯æŠŠå¯¹è±¡è¯»å…¥åˆ°ä»‹è´¨ä¸­ï¼Œè¿™å°±æ˜¯è¾“å…¥ã€‚ä»ä»‹è´¨ä¸­å‘å¤–è¯»æ•°æ®ï¼Œè¿™å°±æ˜¯è¾“å‡ºã€‚æ‰€ä»¥ï¼Œè¾“å…¥æµæ˜¯æŠŠæ•°æ®å†™å…¥å­˜å‚¨ä»‹è´¨çš„ã€‚è¾“å‡ºæµæ˜¯ä»å­˜å‚¨ä»‹è´¨ä¸­æŠŠæ•°æ®è¯»å–å‡ºæ¥ã€‚</p>\n<h4 id=\"åŒæ­¥-å¼‚æ­¥-é˜»å¡-éé˜»å¡\"><a class=\"anchor\" href=\"#åŒæ­¥-å¼‚æ­¥-é˜»å¡-éé˜»å¡\">#</a> åŒæ­¥ã€å¼‚æ­¥ã€é˜»å¡ã€éé˜»å¡</h4>\n<p>åŒæ­¥å’Œå¼‚æ­¥æ˜¯é’ˆå¯¹åº”ç”¨ç¨‹åºå’Œå†…æ ¸äº¤äº’è€Œè¨€çš„ï¼Œä¹Ÿå¯ç†è§£ä¸º <strong>è¢«è°ƒç”¨è€…ï¼ˆç³»ç»Ÿï¼‰</strong> ï¼Œå¦‚æœæ˜¯åŒæ­¥ï¼Œåœ¨è¢«è°ƒç”¨æ—¶ä¼šç«‹å³æ‰§è¡Œè¦åšçš„äº‹ã€‚å¦‚æœæ˜¯å¼‚æ­¥ï¼Œåœ¨è¢«è°ƒç”¨æ—¶ä¸ä¿è¯ä¼šç«‹å³æ‰§è¡Œè¦åšçš„äº‹ï¼Œä½†æ˜¯ä¿è¯ä¼šå»åšï¼Œè€Œåšå®Œä¹‹åå†é€šçŸ¥è°ƒç”¨è€…ã€‚</p>\n<p>é˜»å¡å’Œéé˜»å¡æ˜¯é’ˆå¯¹äºè¿›ç¨‹åœ¨è®¿é—®æ•°æ®çš„æ—¶å€™ï¼Œä¹Ÿå¯ç†è§£ä¸º <strong>è°ƒç”¨è€…ï¼ˆç¨‹åºï¼‰</strong> ï¼Œå¦‚æœæ˜¯é˜»å¡ï¼Œå‘å‡ºè°ƒç”¨åï¼Œè¦ä¸€ç›´ç­‰å¾…è¿”å›ç»“æœã€‚å¦‚æœæ˜¯éé˜»å¡ï¼Œåœ¨å‘å‡ºè°ƒç”¨åä¸éœ€è¦ç­‰å¾…ï¼Œå¯ä»¥å»åšè‡ªå·±çš„äº‹æƒ…ã€‚</p>\n<h4 id=\"linux-5ç§ioæ¨¡å‹\"><a class=\"anchor\" href=\"#linux-5ç§ioæ¨¡å‹\">#</a> Linux 5 ç§ IO æ¨¡å‹</h4>\n<p>åœ¨ç†è§£ 5 ç§ I/O æ¨¡å‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å…ˆæ˜ç¡®ä¸€ç‚¹ï¼Œä¸ç®¡æ˜¯ç½‘ç»œ IO è¿˜æ˜¯ç£ç›˜ IOï¼Œå¯¹äºè¯»æ“ä½œè€Œè¨€ï¼Œéƒ½æ˜¯ç­‰åˆ°ç½‘ç»œçš„æŸä¸ªæ•°æ®åˆ†ç»„åˆ°è¾¾åï¼ˆå³<mark>æ•°æ®å‡†å¤‡é˜¶æ®µ</mark>ï¼‰ï¼Œå°†æ•°æ®<ins>æ‹·è´åˆ°å†…æ ¸ç©ºé—´çš„ç¼“å†²åŒºä¸­</ins>ï¼Œå†ä»å†…æ ¸ç©ºé—´<ins>æ‹·è´åˆ°ç”¨æˆ·ç©ºé—´çš„ç¼“å†²åŒº</ins>ã€‚</p>\n<p>åŸºäºè¿™ä¸€ç‚¹ï¼Œè¿™é‡Œæˆ‘ä»¬é€šè¿‡å‡è®¾ä¸€ä¸ªç‚¹é¤çš„ç”Ÿæ´»åœºæ™¯æ¥ç†è§£ 5 ç§ I/O æ¨¡å‹ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>\n<p><img data-src=\"https://img.xfc-exclave.com/2021/08/2bebc3152c645587b021c6c6b9e3db891629350846.jpeg\" alt=\"IOæ¨¡å‹åœºæ™¯å›¾è§£\" /></p>\n<h4 id=\"bio-nioå’Œaioçš„åŒºåˆ«-ç”¨æ³•å’ŒåŸç†\"><a class=\"anchor\" href=\"#bio-nioå’Œaioçš„åŒºåˆ«-ç”¨æ³•å’ŒåŸç†\">#</a> BIOã€NIO å’Œ AIO çš„åŒºåˆ«ã€ç”¨æ³•å’ŒåŸç†</h4>\n<ul>\n<li>\n<p>BIOï¼ˆBlocking I/Oï¼‰</p>\n<p>åŒæ­¥é˜»å¡ I/O æ¨¡å¼ï¼Œæ•°æ®çš„è¯»å–å†™å…¥å¿…é¡»é˜»å¡åœ¨ä¸€ä¸ªçº¿ç¨‹å†…ç­‰å¾…å…¶å®Œæˆã€‚BIO é€‚ç”¨äºè¿æ¥æ•°ç›®æ¯”è¾ƒå°ä¸”å›ºå®šçš„æ¶æ„ï¼Œå¯¹æœåŠ¡å™¨èµ„æºè¦æ±‚é«˜ï¼Œå¹¶å‘å±€é™äºåº”ç”¨ä¸­ã€‚</p>\n</li>\n<li>\n<p>NIOï¼ˆNew I/Oï¼‰</p>\n<p>åŒæ­¥éé˜»å¡ I/O æ¨¡å¼ï¼Œå®ƒæ˜¯åŸºäºäº‹ä»¶é©±åŠ¨æ€æƒ³æ¥å®Œæˆçš„ï¼Œå…¶æœåŠ¡å™¨å®ç°æ¨¡å¼ä¸ºä¸€ä¸ªè¯·æ±‚ä¸€ä¸ªé€šé“ï¼Œå³å®¢æˆ·ç«¯å‘é€çš„è¿æ¥è¯·æ±‚éƒ½ä¼šæ³¨å†Œåˆ°<ins class=\"dot\">å¤šè·¯å¤ç”¨å™¨</ins>ä¸Šï¼Œå¤šè·¯å¤ç”¨å™¨è½®è¯¢åˆ°è¿æ¥æœ‰ I/O è¯·æ±‚æ—¶æ‰å¯åŠ¨ä¸€ä¸ªçº¿ç¨‹è¿›è¡Œå¤„ç†ã€‚</p>\n<p>è¿™ç§æ–¹å¼é€‚ç”¨äºè¿æ¥æ•°ç›®å¤šä¸”è¿æ¥æ¯”è¾ƒçŸ­ï¼ˆè½»æ“ä½œï¼‰çš„æ¶æ„ï¼Œæ¯”å¦‚èŠå¤©æœåŠ¡å™¨ï¼Œå¹¶å‘å±€é™äºåº”ç”¨ä¸­ï¼Œç¼–ç¨‹å¤æ‚ã€‚</p>\n<p>NIO ä¸­æœ‰ä»¥ä¸‹å‡ ç§é‡è¦è§’è‰²ï¼š</p>\n<ol>\n<li>ç¼“å†²åŒº Buffer</li>\n<li>é€šé“ Channel</li>\n<li>å¤šè·¯å¤ç”¨å™¨ Selector</li>\n</ol>\n</li>\n<li>\n<p>AIOï¼ˆAsynchronous I/Oï¼‰</p>\n<p>å¼‚æ­¥éé˜»å¡ I/O æ¨¡å¼ï¼Œåœ¨è¿›è¡Œè¯»å†™æ“ä½œæ—¶ï¼Œåªé¡»ç›´æ¥è°ƒç”¨ API çš„è¯»å†™æ–¹æ³•å³å¯ã€‚ä¸€ä¸ªæœ‰æ•ˆè¯·æ±‚å¯¹åº”ä¸€ä¸ªçº¿ç¨‹ï¼Œå®¢æˆ·ç«¯çš„ IO è¯·æ±‚éƒ½æ˜¯ OS å…ˆå®Œæˆäº†å†é€šçŸ¥æœåŠ¡å™¨åº”ç”¨å»å¯åŠ¨çº¿ç¨‹è¿›è¡Œå¤„ç†ã€‚</p>\n</li>\n</ul>\n<h4 id=\"netty\"><a class=\"anchor\" href=\"#netty\">#</a> Netty</h4>\n<p>Netty æ˜¯ä¸€ä¸ªéé˜»å¡ I/O å®¢æˆ·ç«¯ - æœåŠ¡å™¨æ¡†æ¶ï¼Œä¸»è¦ç”¨äºå¼€å‘ Java ç½‘ç»œåº”ç”¨ç¨‹åºï¼Œå¦‚åè®®æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯ã€‚å¼‚æ­¥äº‹ä»¶é©±åŠ¨çš„ç½‘ç»œåº”ç”¨ç¨‹åºæ¡†æ¶å’Œå·¥å…·ç”¨äºç®€åŒ–ç½‘ç»œç¼–ç¨‹ï¼Œä¾‹å¦‚ TCP å’Œ UDP å¥—æ¥å­—æœåŠ¡å™¨ã€‚Netty åŒ…æ‹¬äº†ååº”å™¨ç¼–ç¨‹æ¨¡å¼çš„å®ç°ã€‚</p>\n<p>é™¤äº†ä½œä¸ºå¼‚æ­¥ç½‘ç»œåº”ç”¨ç¨‹åºæ¡†æ¶ï¼ŒNetty è¿˜åŒ…æ‹¬äº†å¯¹ HTTPã€HTTP2ã€DNS åŠå…¶ä»–åè®®çš„æ”¯æŒï¼Œæ¶µç›–äº†åœ¨ Servlet å®¹å™¨å†…è¿è¡Œçš„èƒ½åŠ›ã€å¯¹ WebSockets çš„æ”¯æŒã€ä¸ Google Protocol Buffers çš„é›†æˆã€å¯¹ SSL/TLS çš„æ”¯æŒä»¥åŠå¯¹ç”¨äº SPDY åè®®å’Œæ¶ˆæ¯å‹ç¼©çš„æ”¯æŒã€‚</p>\n<p>ä¸»è¦ä¼˜ç‚¹ï¼šæä¾›å¼‚æ­¥çš„ã€äº‹ä»¶é©±åŠ¨çš„ç½‘ç»œåº”ç”¨ç¨‹åºæ¡†æ¶å’Œå·¥å…·ã€‚</p>\n<p>è¯¦ç»†ä½¿ç”¨å‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼š<span class=\"exturl\" data-url=\"aHR0cHM6Ly9uZXR0eS5pby93aWtpL2luZGV4Lmh0bWw=\">https://netty.io/wiki/index.html</span></p>\n<h3 id=\"åå°„\"><a class=\"anchor\" href=\"#åå°„\">#</a> åå°„</h3>\n<p>åå°„æœºåˆ¶æŒ‡çš„æ˜¯ç¨‹åºåœ¨è¿è¡Œæ—¶èƒ½å¤Ÿè·å–è‡ªèº«çš„ä¿¡æ¯ã€‚åœ¨ Java ä¸­ï¼Œåªè¦ç»™å®šç±»çš„åå­—ï¼Œé‚£ä¹ˆå°±å¯ä»¥é€šè¿‡åå°„æœºåˆ¶æ¥è·å¾—ç±»çš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•ã€‚</p>\n<p>ä¸»è¦ç”±ä»¥ä¸‹çš„ç±»æ¥å®ç°åå°„æœºåˆ¶ï¼ˆè¿™äº›ç±»éƒ½ä½äº  <code>java.lang.reflect</code>  åŒ…ä¸­ï¼‰ï¼š</p>\n<ol>\n<li>Class ç±»ï¼šä»£è¡¨ä¸€ä¸ªç±»ã€‚</li>\n<li>Field ç±»ï¼šä»£è¡¨ç±»çš„æˆå‘˜å˜é‡ï¼ˆæˆå‘˜å˜é‡ä¹Ÿç§°ä¸ºç±»çš„å±æ€§ï¼‰ã€‚</li>\n<li>Method ç±»ï¼šä»£è¡¨ç±»çš„æ–¹æ³•ã€‚</li>\n<li>Constructor ç±»ï¼šä»£è¡¨ç±»çš„æ„é€ æ–¹æ³•ã€‚</li>\n<li>Array ç±»ï¼šæä¾›äº†åŠ¨æ€åˆ›å»ºæ•°ç»„ï¼Œä»¥åŠè®¿é—®æ•°ç»„çš„å…ƒç´ çš„é™æ€æ–¹æ³•ã€‚</li>\n</ol>\n<h4 id=\"åå°„ä¸å·¥å‚æ¨¡å¼\"><a class=\"anchor\" href=\"#åå°„ä¸å·¥å‚æ¨¡å¼\">#</a> åå°„ä¸å·¥å‚æ¨¡å¼</h4>\n<p>å·¥å‚æ¨¡å¼æœ‰ä¸‰ç§ï¼š</p>\n<ol>\n<li>\n<p>ç®€å•å·¥å‚æ¨¡å¼</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">interface</span> <span class=\"token class-name\">Car</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">void</span> <span class=\"token class-name\">Name</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">Aodi</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">Car</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token class-name\">Name</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Aodi\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">Aotuo</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">Car</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token class-name\">Name</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Aotuo\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">Factory</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Factory</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token class-name\">Car</span> <span class=\"token function\">getInstance</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> className<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token string\">\"Aodi\"</span><span class=\"token punctuation\">.</span><span class=\"token function\">equalsIgnoreCase</span><span class=\"token punctuation\">(</span>className<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>            <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Aodi</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token string\">\"Aotuo\"</span><span class=\"token punctuation\">.</span><span class=\"token function\">equalsIgnoreCase</span><span class=\"token punctuation\">(</span>className<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>            <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Aotuo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre></pre></td></tr><tr><td data-num=\"33\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Test</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">Exception</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>        <span class=\"token class-name\">Car</span> car <span class=\"token operator\">=</span> <span class=\"token class-name\">Factory</span><span class=\"token punctuation\">.</span><span class=\"token function\">getInstance</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Aodi\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>        <span class=\"token class-name\"><span class=\"token namespace\">car<span class=\"token punctuation\">.</span></span>Name</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure></li>\n<li>\n<p>å·¥å‚æ–¹æ³•æ¨¡å¼</p>\n<p>ç®€å•å·¥å‚æ¨¡å¼å¼•å…¥ Java åå°„æœºåˆ¶åï¼Œå˜ä¸ºå·¥å‚æ–¹æ³•æ¨¡å¼ã€‚</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">interface</span> <span class=\"token class-name\">Car</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">void</span> <span class=\"token class-name\">Name</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">Aodi</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">Car</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token class-name\">Name</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Aodi\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">Aotuo</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">Car</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token class-name\">Name</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Aotuo\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">Factory</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Factory</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token class-name\">Car</span> <span class=\"token function\">getInstance</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> className<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>        <span class=\"token class-name\">Car</span> instance <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>        <span class=\"token keyword\">try</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>            instance <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Car</span><span class=\"token punctuation\">)</span> <span class=\"token class-name\">Class</span><span class=\"token punctuation\">.</span><span class=\"token function\">forName</span><span class=\"token punctuation\">(</span>className<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getDeclaredConstructor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">newInstance</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Exception</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>            e<span class=\"token punctuation\">.</span><span class=\"token function\">printStackTrace</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>        <span class=\"token keyword\">return</span> instance<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre></pre></td></tr><tr><td data-num=\"34\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Test</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>        <span class=\"token class-name\">Car</span> car <span class=\"token operator\">=</span> <span class=\"token class-name\">Factory</span><span class=\"token punctuation\">.</span><span class=\"token function\">getInstance</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"sample.Aodi\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>        <span class=\"token class-name\"><span class=\"token namespace\">car<span class=\"token punctuation\">.</span></span>Name</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure></li>\n<li>\n<p>æŠ½è±¡å·¥å‚æ¨¡å¼</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// æŠ½è±¡äº§å“</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">interface</span> <span class=\"token class-name\">Car</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">void</span> <span class=\"token class-name\">Name</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token comment\">// å…·ä½“äº§å“</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">Aodi</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">Car</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token class-name\">Name</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Aodi\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token comment\">// å…·ä½“äº§å“</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">Aotuo</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">Car</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token class-name\">Name</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Aotuo\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre></pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token comment\">// æŠ½è±¡å·¥å‚</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token keyword\">interface</span> <span class=\"token class-name\">CarFactory</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>    <span class=\"token class-name\">Car</span> <span class=\"token function\">getInstance</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre></pre></td></tr><tr><td data-num=\"27\"></td><td><pre><span class=\"token comment\">// å…·ä½“å·¥å‚</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">AodiFactory</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">CarFactory</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>    <span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Car</span> <span class=\"token function\">getInstance</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Aodi</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre></pre></td></tr><tr><td data-num=\"35\"></td><td><pre><span class=\"token comment\">// å…·ä½“å·¥å‚</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">AotuoFactory</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">CarFactory</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>    <span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Car</span> <span class=\"token function\">getInstance</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Aotuo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre></pre></td></tr><tr><td data-num=\"43\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Test</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre>        <span class=\"token class-name\">CarFactory</span> carFactory <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">AodiFactory</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre>        <span class=\"token class-name\">Car</span> audi <span class=\"token operator\">=</span> carFactory<span class=\"token punctuation\">.</span><span class=\"token function\">getInstance</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre>        <span class=\"token class-name\"><span class=\"token namespace\">audi<span class=\"token punctuation\">.</span></span>Name</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure></li>\n</ol>\n<p>å…¶å®ï¼Œ  <code>Spring IoC</code>  å°±æ˜¯å·¥å‚æ¨¡å¼ + Java çš„åå°„æœºåˆ¶çš„å®é™…åº”ç”¨ã€‚</p>\n<h4 id=\"åå°„æœ‰ä»€ä¹ˆç”¨\"><a class=\"anchor\" href=\"#åå°„æœ‰ä»€ä¹ˆç”¨\">#</a> åå°„æœ‰ä»€ä¹ˆç”¨</h4>\n<ul>\n<li>åœ¨è¿è¡Œæ—¶åˆ¤æ–­ä»»æ„ä¸€ä¸ªå¯¹è±¡æ‰€å±çš„ç±»ã€‚</li>\n<li>åœ¨è¿è¡Œæ—¶åˆ¤æ–­ä»»æ„ä¸€ä¸ªç±»æ‰€å…·æœ‰çš„æˆå‘˜å˜é‡å’Œæ–¹æ³•ã€‚</li>\n<li>åœ¨è¿è¡Œæ—¶ä»»æ„è°ƒç”¨ä¸€ä¸ªå¯¹è±¡çš„æ–¹æ³•ã€‚</li>\n<li>åœ¨è¿è¡Œæ—¶æ„é€ ä»»æ„ä¸€ä¸ªç±»çš„å¯¹è±¡ã€‚</li>\n</ul>\n<h4 id=\"classç±»\"><a class=\"anchor\" href=\"#classç±»\">#</a> Class ç±»</h4>\n<p>Java çš„ Class ç±»æ˜¯ java åå°„æœºåˆ¶çš„åŸºç¡€ï¼Œé€šè¿‡ Class ç±»æˆ‘ä»¬å¯ä»¥è·å¾—å…³äºä¸€ä¸ªç±»çš„ç›¸å…³ä¿¡æ¯ã€‚</p>\n<p>Java.lang.Class æ˜¯ä¸€ä¸ªæ¯”è¾ƒç‰¹æ®Šçš„ç±»ï¼Œå®ƒç”¨äºå°è£…è¢«è£…å…¥åˆ° JVM ä¸­çš„ç±»ï¼ˆåŒ…æ‹¬ç±»å’Œæ¥å£ï¼‰çš„ä¿¡æ¯ã€‚å½“ä¸€ä¸ªç±»æˆ–æ¥å£è¢«è£…å…¥çš„ JVM æ—¶ä¾¿ä¼šäº§ç”Ÿä¸€ä¸ªä¸ä¹‹å…³è”çš„ java.lang.Class å¯¹è±¡ï¼Œå¯ä»¥é€šè¿‡è¿™ä¸ª Class å¯¹è±¡å¯¹è¢«è£…å…¥ç±»çš„è¯¦ç»†ä¿¡æ¯è¿›è¡Œè®¿é—®ã€‚</p>\n<p>è™šæ‹Ÿæœºä¸ºæ¯ç§ç±»å‹ç®¡ç†ä¸€ä¸ªç‹¬ä¸€æ— äºŒçš„ Class å¯¹è±¡ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ¯ä¸ªç±»ï¼ˆå‹ï¼‰éƒ½æœ‰ä¸€ä¸ª Class å¯¹è±¡ã€‚è¿è¡Œç¨‹åºæ—¶ï¼ŒJava è™šæ‹Ÿæœº (JVM) é¦–å…ˆæ£€æŸ¥æ˜¯å¦æ‰€è¦åŠ è½½çš„ç±»å¯¹åº”çš„ Class å¯¹è±¡æ˜¯å¦å·²ç»åŠ è½½ã€‚å¦‚æœæ²¡æœ‰åŠ è½½ï¼ŒJVM å°±ä¼šæ ¹æ®ç±»åæŸ¥æ‰¾.class æ–‡ä»¶ï¼Œå¹¶å°†å…¶ Class å¯¹è±¡è½½å…¥ã€‚</p>\n<blockquote>\n<p>å¦‚æœç²¾åŠ›å…è®¸ï¼Œå¯ä»¥çœ‹çœ‹  <code>java.lang.reflect</code>  åŒ…ä¸‹å†…çš„æºç ã€‚</p>\n</blockquote>\n<h3 id=\"åŠ¨æ€ä»£ç†\"><a class=\"anchor\" href=\"#åŠ¨æ€ä»£ç†\">#</a> åŠ¨æ€ä»£ç†</h3>\n<p>ä»£ç†æ¨¡å¼ä¸ºå…¶ä»–å¯¹è±¡æä¾›äº†ä¸€ä¸ªä»£ç†ï¼Œä»¥æ§åˆ¶å¯¹æŸä¸ªå¯¹è±¡è®¿é—®ï¼Œä»£ç†ç±»ä¸ºè¢«ä»£ç†ç±»é¢„å¤„ç†æ¶ˆæ¯ã€è¿‡æ»¤æ¶ˆæ¯å¹¶åœ¨æ­¤ä¹‹åå°†æ¶ˆæ¯è½¬å‘ç»™è¢«ä»£ç†ç±»ï¼Œä¹‹åè¿˜èƒ½è¿›è¡Œæ¶ˆæ¯çš„åç½®å¤„ç†ã€‚ä»£ç†ç±»å’Œè¢«ä»£ç†ç±»é€šå¸¸ä¼šå­˜åœ¨å…³è”å…³ç³»ï¼ˆå³æŒæœ‰è¢«ä»£ç†å¯¹è±¡çš„å¼•ç”¨ï¼‰ï¼Œä»£ç†ç±»æœ¬èº«ä¸å®ç°æœåŠ¡ï¼Œè€Œæ˜¯é€šè¿‡è°ƒç”¨è¢«ä»£ç†ç±»ä¸­çš„æ–¹æ³•æ¥æä¾›æœåŠ¡ã€‚</p>\n<h4 id=\"java-ä¸‰ç§ä»£ç†æ¨¡å¼\"><a class=\"anchor\" href=\"#java-ä¸‰ç§ä»£ç†æ¨¡å¼\">#</a> Java ä¸‰ç§ä»£ç†æ¨¡å¼</h4>\n<h5 id=\"é™æ€ä»£ç†\"><a class=\"anchor\" href=\"#é™æ€ä»£ç†\">#</a> é™æ€ä»£ç†</h5>\n<p>é™æ€ä»£ç†ç¤ºä¾‹ï¼š</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Test</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">interface</span> <span class=\"token class-name\">HelloInterface</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token keyword\">void</span> <span class=\"token function\">sayHello</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">static</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Hello</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">HelloInterface</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">sayHello</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Hello Chinmoku!\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token keyword\">static</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">HelloProxy</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">HelloInterface</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        <span class=\"token keyword\">private</span> <span class=\"token class-name\">HelloInterface</span> helloInterface <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Hello</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        <span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">sayHello</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Before invoke sayHello\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>            helloInterface<span class=\"token punctuation\">.</span><span class=\"token function\">sayHello</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"After invoke sayHello\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>        <span class=\"token class-name\">HelloProxy</span> helloProxy <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">HelloProxy</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>        helloProxy<span class=\"token punctuation\">.</span><span class=\"token function\">sayHello</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre></pre></td></tr><tr><td data-num=\"31\"></td><td><pre><span class=\"token comment\">// æ‰§è¡Œç»“æœï¼š</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre><span class=\"token comment\">// Before invoke sayHello</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre><span class=\"token comment\">// Hello Chinmoku!</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre><span class=\"token comment\">// After invoke sayHello</span></pre></td></tr></table></figure><p>é™æ€ä»£ç†éœ€è¦ä»£ç†å¯¹è±¡å’Œç›®æ ‡å¯¹è±¡å®ç°ä¸€æ ·çš„æ¥å£ã€‚</p>\n<p>å…¶ä¼˜ç‚¹åœ¨äºï¼Œå®ƒå¯ä»¥åœ¨ä¸ä¿®æ”¹ç›®æ ‡å¯¹è±¡çš„å‰æä¸‹æ‰©å±•ç›®æ ‡å¯¹è±¡çš„åŠŸèƒ½ã€‚</p>\n<p>è€Œç”±äºä»£ç†å¯¹è±¡è¦å®ç°ä¸ç›®æ ‡å¯¹è±¡ä¸€è‡´çš„æ¥å£ï¼Œè¿™ä¼šäº§ç”Ÿè¿‡å¤šçš„ä»£ç†ç±»ï¼Œå¦ä¸€æ–¹é¢ï¼Œä¸€æ—¦æ¥å£çš„æ–¹æ³•è¿›è¡Œäº†æ›´æ–°ï¼Œç›®æ ‡å¯¹è±¡ä¸ä»£ç†å¯¹è±¡éƒ½è¦è¿›è¡Œä¿®æ”¹ï¼Œç®€å•æ¥è¯´ï¼Œ<mark>é™æ€ä»£ç†çš„ç¼ºç‚¹åœ¨äºå†—ä½™å’Œä¸æ˜“ç»´æŠ¤</mark>ã€‚</p>\n<h5 id=\"åŠ¨æ€ä»£ç†-2\"><a class=\"anchor\" href=\"#åŠ¨æ€ä»£ç†-2\">#</a> åŠ¨æ€ä»£ç†</h5>\n<p>åŠ¨æ€ä»£ç†åˆ©ç”¨äº† JDK API ï¼ŒåŠ¨æ€åœ°åœ¨å†…å­˜ä¸­æ„å»ºä»£ç†å¯¹è±¡ï¼Œä»è€Œå®ç°å¯¹ç›®æ ‡å¯¹è±¡çš„ä»£ç†åŠŸèƒ½ã€‚å› æ­¤åŠ¨æ€ä»£ç†åˆè¢«ç§°ä¸º JDK ä»£ç†æˆ–æ¥å£ä»£ç†ã€‚</p>\n<p>é™æ€ä»£ç†ä¸åŠ¨æ€ä»£ç†çš„åŒºåˆ«ä¸»è¦åœ¨äºï¼š</p>\n<ol>\n<li>é™æ€ä»£ç†åœ¨ç¼–è¯‘æ—¶å°±å·²ç»å®ç°ï¼Œç¼–è¯‘å®Œæˆåä»£ç†ç±»æ˜¯ä¸€ä¸ªå®é™…çš„ class æ–‡ä»¶ã€‚</li>\n<li>åŠ¨æ€ä»£ç†æ˜¯åœ¨è¿è¡Œæ—¶åŠ¨æ€ç”Ÿæˆçš„ï¼Œå³ç¼–è¯‘å®Œæˆåæ²¡æœ‰å®é™…çš„ class æ–‡ä»¶ï¼Œè€Œæ˜¯<mark>åœ¨è¿è¡Œæ—¶åŠ¨æ€ç”Ÿæˆç±»å­—èŠ‚ç </mark>ï¼Œå¹¶åŠ è½½åˆ° JVM ä¸­ã€‚</li>\n</ol>\n<p>åŠ¨æ€ä»£ç†å¯¹è±¡ä¸éœ€è¦å®ç°æ¥å£ï¼Œä½†æ˜¯è¦æ±‚ç›®æ ‡å¯¹è±¡å¿…é¡»å®ç°æ¥å£ï¼Œå¦åˆ™ä¸èƒ½ä½¿ç”¨åŠ¨æ€ä»£ç†ã€‚</p>\n<p>åŠ¨æ€ä»£ç†ç¤ºä¾‹ï¼š</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>lang<span class=\"token punctuation\">.</span>reflect<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">InvocationHandler</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>lang<span class=\"token punctuation\">.</span>reflect<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Method</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>lang<span class=\"token punctuation\">.</span>reflect<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Proxy</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Test</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">interface</span> <span class=\"token class-name\">HelloInterface</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token keyword\">void</span> <span class=\"token function\">sayHello</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token keyword\">static</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Hello</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">HelloInterface</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">sayHello</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Hello Chinmoku!\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token keyword\">static</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">DynamicProxy</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">InvocationHandler</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        <span class=\"token keyword\">private</span> <span class=\"token class-name\">Object</span> object<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>        <span class=\"token keyword\">public</span> <span class=\"token class-name\">DynamicProxy</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Object</span> obj<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>object <span class=\"token operator\">=</span> obj<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>        <span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>        <span class=\"token keyword\">public</span> <span class=\"token class-name\">Object</span> <span class=\"token function\">invoke</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Object</span> proxy<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Method</span> method<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Object</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">Throwable</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Before invoke sayHello\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>            method<span class=\"token punctuation\">.</span><span class=\"token function\">invoke</span><span class=\"token punctuation\">(</span>object<span class=\"token punctuation\">,</span> args<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"After invoke sayHello\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>            <span class=\"token keyword\">return</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>        <span class=\"token class-name\">HelloInterface</span> hello <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Hello</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>        <span class=\"token class-name\">InvocationHandler</span> h <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">DynamicProxy</span><span class=\"token punctuation\">(</span>hello<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>        <span class=\"token class-name\">HelloInterface</span> proxy <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">HelloInterface</span><span class=\"token punctuation\">)</span> <span class=\"token class-name\">Proxy</span><span class=\"token punctuation\">.</span><span class=\"token function\">newProxyInstance</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">HelloInterface</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">.</span><span class=\"token function\">getClassLoader</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Class</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">&#123;</span><span class=\"token class-name\">HelloInterface</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> h<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>        proxy<span class=\"token punctuation\">.</span><span class=\"token function\">sayHello</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre></pre></td></tr><tr><td data-num=\"42\"></td><td><pre><span class=\"token comment\">// æ‰§è¡Œç»“æœï¼š</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre><span class=\"token comment\">// Before invoke sayHello</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre><span class=\"token comment\">// Hello Chinmoku!</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre><span class=\"token comment\">// After invoke sayHello</span></pre></td></tr></table></figure><h5 id=\"cglib-ä»£ç†\"><a class=\"anchor\" href=\"#cglib-ä»£ç†\">#</a> Cglib ä»£ç†</h5>\n<p>JDK ä»£ç†è¦æ±‚è¢«ä»£ç†å¯¹è±¡æ˜¯ä¸€ä¸ªæ¥å£çš„å®ç°ç±»ï¼Œå¦‚æœè¢«ä»£ç†å¯¹è±¡æ²¡æœ‰å®ç°ä»»ä½•æ¥å£ï¼Œå°±å¯ä»¥é€šè¿‡ Cglib è¿›è¡Œä»£ç†ã€‚Cglib æ˜¯é’ˆå¯¹ç±»æ¥å®ç°ä»£ç†çš„ï¼Œä»–çš„åŸç†æ˜¯å¯¹æŒ‡å®šçš„ç›®æ ‡ç”Ÿæˆä¸€ä¸ªå­ç±»ï¼Œå¹¶è¦†ç›–å…¶ä¸­çš„æ–¹æ³•å®ç°å¢å¼ºã€‚ä½†ç”±äºå…¶ä½¿ç”¨ç»§æ‰¿æ–¹å¼å®ç°ï¼Œå› æ­¤ï¼Œå®ƒæ— æ³•å¯¹ final å…³é”®è¯ä¿®é¥°çš„ç±»è¿›è¡Œä»£ç†ã€‚</p>\n<blockquote>\n<p>Cglib æ—¢å¯ä»¥ä¸ºå®ç°æ¥å£çš„ç±»è¿›è¡Œä»£ç†ï¼Œä¹Ÿå¯ä»¥ä¸ºæ²¡æœ‰å®ç°æ¥å£çš„ç±»è¿›è¡Œä»£ç†ã€‚</p>\n</blockquote>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>cglib<span class=\"token punctuation\">.</span>proxy<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Enhancer</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>cglib<span class=\"token punctuation\">.</span>proxy<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">MethodInterceptor</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>cglib<span class=\"token punctuation\">.</span>proxy<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">MethodProxy</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>lang<span class=\"token punctuation\">.</span>reflect<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Method</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Test</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token keyword\">static</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Hello</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">sayHello</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Hello Chinmoku!\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token keyword\">static</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">HelloServiceCglibProxy</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">MethodInterceptor</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        <span class=\"token keyword\">private</span> <span class=\"token class-name\">Object</span> target<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        <span class=\"token keyword\">public</span> <span class=\"token class-name\">HelloServiceCglibProxy</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Object</span> target<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>target <span class=\"token operator\">=</span> target<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>        <span class=\"token keyword\">public</span> <span class=\"token class-name\">Object</span> <span class=\"token function\">getProxyInstance</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>            <span class=\"token class-name\">Enhancer</span> en <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Enhancer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>            en<span class=\"token punctuation\">.</span><span class=\"token function\">setSuperclass</span><span class=\"token punctuation\">(</span>target<span class=\"token punctuation\">.</span><span class=\"token function\">getClass</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>            en<span class=\"token punctuation\">.</span><span class=\"token function\">setCallback</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>            <span class=\"token keyword\">return</span> en<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>        <span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>        <span class=\"token keyword\">public</span> <span class=\"token class-name\">Object</span> <span class=\"token function\">intercept</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Object</span> object<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Method</span> method<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Object</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> arg2<span class=\"token punctuation\">,</span> <span class=\"token class-name\">MethodProxy</span> proxy<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">Throwable</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Before invoke sayHello\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>            <span class=\"token class-name\">Object</span> obj <span class=\"token operator\">=</span> method<span class=\"token punctuation\">.</span><span class=\"token function\">invoke</span><span class=\"token punctuation\">(</span>target<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"After invoke sayHello\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>            <span class=\"token keyword\">return</span> obj<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>        <span class=\"token class-name\">Hello</span> target <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Hello</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>        <span class=\"token class-name\">HelloServiceCglibProxy</span> proxyFactory <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">HelloServiceCglibProxy</span><span class=\"token punctuation\">(</span>target<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>        <span class=\"token class-name\">Hello</span> proxy <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Hello</span><span class=\"token punctuation\">)</span>proxyFactory<span class=\"token punctuation\">.</span><span class=\"token function\">getProxyInstance</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>        proxy<span class=\"token punctuation\">.</span><span class=\"token function\">sayHello</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre></pre></td></tr><tr><td data-num=\"47\"></td><td><pre><span class=\"token comment\">// æ‰§è¡Œç»“æœï¼š</span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre><span class=\"token comment\">// Before invoke sayHello</span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre><span class=\"token comment\">// Hello Chinmoku!</span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre><span class=\"token comment\">// After invoke sayHello</span></pre></td></tr></table></figure><h4 id=\"åŠ¨æ€ä»£ç†å’Œåå°„çš„å…³ç³»\"><a class=\"anchor\" href=\"#åŠ¨æ€ä»£ç†å’Œåå°„çš„å…³ç³»\">#</a> åŠ¨æ€ä»£ç†å’Œåå°„çš„å…³ç³»</h4>\n<p>åŠ¨æ€ä»£ç†å®ç°äº†  <code>java.lang.reflect.InvocationHandler</code>  æ¥å£ï¼Œè€Œ  <code>java.lang.reflect.Proxy</code>  ä½œä¸ºå…¶å®ä¾‹ï¼Œå®ƒæä¾›äº†ä¸€ä¸ª  <code>newProxyInstance()</code>  æ–¹æ³•ï¼Œé€šè¿‡è¿™ä¸ªæ–¹æ³•ï¼Œç¨‹åºå¯ä»¥å°†éœ€è¦è¢«ä»£ç†çš„å¯¹è±¡ä¿¡æ¯ä¼ é€’åˆ°  <code>InvocationHandler</code>  è¿™ä¸ªå¤„ç†å™¨ä¸Šã€‚</p>\n<p>åå°„çš„ä¸»è¦ä½œç”¨æ˜¯ï¼š</p>\n<ol>\n<li>åŠ¨æ€åœ°åˆ›å»ºç±»çš„å®ä¾‹ï¼Œå¹¶å°†ç±»ç»‘å®šåˆ°ç°æœ‰çš„å¯¹è±¡ä¸­ï¼Œæˆ–ä»ç°æœ‰çš„å¯¹è±¡ä¸­è·å–ç±»å‹ã€‚</li>\n<li>åº”ç”¨ç¨‹åºéœ€è¦åœ¨è¿è¡Œæ—¶ä»æŸä¸ªç‰¹å®šçš„ç¨‹åºé›†ä¸­è½½å…¥ä¸€ä¸ªç‰¹å®šçš„ç±»ã€‚</li>\n</ol>\n<p>è€ŒåŠ¨æ€ä»£ç†åˆ™æ˜¯æ ¹æ®å¯¹è±¡åœ¨å†…å­˜ä¸­åŠ è½½çš„ Class ç±»åˆ›å»ºè¿è¡Œæ—¶ç±»å¯¹è±¡ï¼Œä»è€Œè°ƒç”¨ä»£ç†ç±»æ–¹æ³•å’Œå±æ€§ã€‚ç®€å•æ¥è¯´ï¼Œ<mark>åŠ¨æ€ä»£ç†æ˜¯åŸºäº Java åå°„æœºåˆ¶å®ç°çš„</mark>ã€‚</p>\n<h4 id=\"aop\"><a class=\"anchor\" href=\"#aop\">#</a> AOP</h4>\n<p>Java æ˜¯ä¸€ç§é¢å‘å¯¹è±¡çš„ç¼–ç¨‹è¯­è¨€ï¼Œå®ƒç”¨å¯¹è±¡ã€å±æ€§å’Œè¡Œä¸ºæ¥æè¿°ä¸€ä¸ªç®€å•çš„äº‹ç‰©ï¼Œå¹¶å¼•å…¥äº†å°è£…ã€ç»§æ‰¿ã€å¤šæ€çš„æ¦‚å¿µï¼Œä½¿å…¶å…·å¤‡äº†æè¿°å¤æ‚äº‹ç‰©çš„èƒ½åŠ›ã€‚ä½†å½“å®ƒéœ€è¦ä¸ºä¸€äº›åˆ†æ•£å¯¹è±¡çš„å…¬å…±è¡Œä¸ºè¿›è¡Œæè¿°æ—¶ï¼Œå°±ä¼šæ˜¾å¾—ç›¸å½“ä¹åŠ›ï¼ˆä¸æ˜¯ä¸èƒ½ï¼‰ï¼Œå› æ­¤å°±å‡ºç°äº†é¢å‘åˆ‡é¢ç¼–ç¨‹ï¼ˆAOPï¼‰çš„æ€æƒ³ï¼Œå®ƒä½¿ç”¨ä¸€ç§è¢«ç§°ä¸ºæ¨ªåˆ‡ï¼ˆcross-cuttingï¼‰çš„æŠ€æœ¯ï¼Œå®ƒå°†ä¸€ç³»åˆ—ï¼ˆçºµå‘å‘å±•çš„ï¼‰è¡Œä¸ºï¼ˆæ¨ªå‘ï¼‰å‰–è§£å¼€æ¥ï¼Œå¹¶ä¸ºå…¶ç»‡å…¥ä»£ç†å¯¹è±¡ï¼Œä»¥è¾¾åˆ°ä¸ºè¿™äº›å¤æ‚çš„è¡Œä¸ºæå–å‡ºå…¬å…±è¡Œä¸ºçš„ç›®çš„ï¼Œè¿™ç§å…¬å…±è¡Œä¸ºåœ¨ AOP æ€æƒ³ä¸­è¢«ç§°ä¸ºåˆ‡é¢ï¼ˆAspectï¼‰ï¼Œè€Œè¿™ç§å…¬å…±è¡Œä¸ºï¼Œå¾€å¾€æ˜¯ä¸ä¸»è¦è¡Œä¸ºï¼ˆå³ä¸šåŠ¡é€»è¾‘ï¼‰æ— å…³æˆ–å…³è”æ€§æä½çš„è¡Œä¸ºï¼Œæ¯”å¦‚æ—¥å¿—è®°å½•ã€æƒé™æ§åˆ¶ã€æ€§èƒ½ç›‘æ§ã€ç¼“å­˜ä¼˜åŒ–ã€äº‹åŠ¡ç®¡ç†ç­‰ã€‚AOP å°†è¿™äº›éä¸šåŠ¡æ€§è€Œåˆè‡³å…³é‡è¦çš„ä»£ç æå–å‡ºæ¥ï¼Œæå¤§åœ°å‡å°‘äº†ä»£ç çš„é‡å¤å’Œè€¦åˆï¼Œå¹¶ä¸”æœ‰åˆ©äºç»´æŠ¤ã€‚</p>\n<p>éœ€è¦ç‰¹åˆ«å¼ºè°ƒçš„æ˜¯ï¼ŒAOP å’Œ OOP ä¸€æ ·ï¼Œå®ƒå¹¶ä¸æ˜¯æŸç§ç‰¹å®šçš„æŠ€æœ¯ï¼Œè€Œæ˜¯ä¸€ç§ç¼–ç¨‹æ€æƒ³ï¼Œå®ƒå¼¥è¡¥äº† OOP æ€æƒ³çš„ä¸è¶³ä¹‹å¤„ï¼Œæˆ‘ä»¬å¯ä»¥è¯´ AOP æ˜¯ OOP çš„è¡¥å……å’Œå®Œå–„ã€‚</p>\n<p>ç®€å•æ¥è¯´ï¼ŒåŠ¨æ€åœ°å°†ä»£ç åˆ‡å…¥åˆ°ç±»çš„æŒ‡å®šæ–¹æ³•ã€æŒ‡å®šä½ç½®ä¸Šçš„ç¼–ç¨‹æ€æƒ³ï¼Œå°±æ˜¯åˆ‡é¢ç¼–ç¨‹ã€‚</p>\n<blockquote>\n<p>æ³¨æ„ï¼šSpring AOP æ˜¯åœ¨è¿è¡Œæ—¶ç”Ÿæˆå¹¶ç»‡å…¥ï¼ˆweaveï¼‰ä»£ç†å¯¹è±¡çš„ï¼Œä½†å¹¶éæ‰€æœ‰çš„ AOP å®ç°æ–¹å¼éƒ½æ˜¯å¦‚æ­¤ï¼Œä¹Ÿæœ‰çš„å¯ä»¥åœ¨ç¼–è¯‘æœŸæˆ–ç±»åŠ è½½æœŸç»‡å…¥ï¼Œæ¯”å¦‚ AspectJ ã€‚</p>\n</blockquote>\n<h5 id=\"aop-ç›¸å…³æ¦‚å¿µ\"><a class=\"anchor\" href=\"#aop-ç›¸å…³æ¦‚å¿µ\">#</a> AOP ç›¸å…³æ¦‚å¿µ</h5>\n<ol>\n<li>\n<p>åˆ‡é¢ï¼ˆAspectï¼‰</p>\n<p>åˆ‡é¢ç”±åˆ‡å…¥ç‚¹å’Œé€šçŸ¥ç»„æˆï¼Œå®ƒæ—¢åŒ…å«äº†æ¨ªåˆ‡é€»è¾‘çš„å®šä¹‰ï¼Œä¹ŸåŒ…æ‹¬äº†åˆ‡å…¥ç‚¹çš„å®šä¹‰ã€‚</p>\n<p>å¯ä»¥ç®€å•åœ°è®¤ä¸ºï¼Œä½¿ç”¨ @Aspect æ³¨è§£çš„ç±»å°±æ˜¯åˆ‡é¢ã€‚</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token annotation punctuation\">@Component</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token annotation punctuation\">@Aspect</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">LogAspect</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure></li>\n<li>\n<p>ç›®æ ‡å¯¹è±¡ï¼ˆTargetï¼‰</p>\n<p>ç›®æ ‡å¯¹è±¡æŒ‡å°†è¦è¢«å¢å¼ºçš„å¯¹è±¡ï¼Œå³åŒ…å«ä¸»ä¸šåŠ¡é€»è¾‘çš„ç±»å¯¹è±¡ã€‚æˆ–è€…è¯´æ˜¯è¢«ä¸€ä¸ªæˆ–è€…å¤šä¸ªåˆ‡é¢æ‰€é€šçŸ¥çš„å¯¹è±¡ã€‚</p>\n</li>\n<li>\n<p>è¿æ¥ç‚¹ï¼ˆJoinPointï¼‰</p>\n<p>ç¨‹åºæ‰§è¡Œè¿‡ç¨‹ä¸­æ˜ç¡®çš„ç‚¹ï¼Œå¦‚æ–¹æ³•çš„è°ƒç”¨æˆ–ç‰¹å®šçš„å¼‚å¸¸è¢«æŠ›å‡ºã€‚è¿æ¥ç‚¹ç”±ä¸¤ä¸ªä¿¡æ¯ç¡®å®šï¼š</p>\n<ul>\n<li>æ–¹æ³•ï¼ˆè¡¨ç¤ºç¨‹åºæ‰§è¡Œç‚¹ï¼Œå³åœ¨å“ªä¸ªç›®æ ‡æ–¹æ³•ï¼‰</li>\n<li>ç›¸å¯¹ç‚¹ï¼ˆè¡¨ç¤ºæ–¹ä½ï¼Œå³ç›®æ ‡æ–¹æ³•çš„ä»€ä¹ˆä½ç½®ï¼Œæ¯”å¦‚è°ƒç”¨å‰ï¼Œåç­‰ï¼‰</li>\n</ul>\n<p>ç®€å•æ¥è¯´ï¼Œè¿æ¥ç‚¹å°±æ˜¯è¢«æ‹¦æˆªåˆ°çš„ç¨‹åºæ‰§è¡Œç‚¹ï¼Œå› ä¸º Spring åªæ”¯æŒæ–¹æ³•ç±»å‹çš„è¿æ¥ç‚¹ï¼Œæ‰€ä»¥åœ¨ Spring ä¸­è¿æ¥ç‚¹å°±æ˜¯è¢«æ‹¦æˆªåˆ°çš„æ–¹æ³•ã€‚</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token annotation punctuation\">@Before</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"pointcut()\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">JoinPoint</span> joinPoint<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token comment\">// è¿™ä¸ª JoinPoint å‚æ•°å°±æ˜¯è¿æ¥ç‚¹</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure></li>\n<li>\n<p>åˆ‡å…¥ç‚¹ï¼ˆPointCutï¼‰</p>\n<p>åˆ‡å…¥ç‚¹æ˜¯å¯¹è¿æ¥ç‚¹è¿›è¡Œæ‹¦æˆªçš„æ¡ä»¶å®šä¹‰ã€‚åˆ‡å…¥ç‚¹è¡¨è¾¾å¼å¦‚ä½•å’Œè¿æ¥ç‚¹åŒ¹é…æ˜¯ AOP çš„æ ¸å¿ƒï¼ŒSpring ç¼ºçœä½¿ç”¨ AspectJ åˆ‡å…¥ç‚¹è¯­æ³•ã€‚</p>\n<p>ä¸€èˆ¬è®¤ä¸ºï¼Œæ‰€æœ‰çš„æ–¹æ³•éƒ½å¯ä»¥è®¤ä¸ºæ˜¯è¿æ¥ç‚¹ï¼Œä½†æ˜¯æˆ‘ä»¬å¹¶ä¸å¸Œæœ›åœ¨æ‰€æœ‰çš„æ–¹æ³•ä¸Šéƒ½æ·»åŠ é€šçŸ¥ï¼Œè€Œåˆ‡å…¥ç‚¹çš„ä½œç”¨å°±æ˜¯æä¾›ä¸€ç»„è§„åˆ™ï¼ˆä½¿ç”¨ AspectJ pointcut expression language æ¥æè¿°ï¼‰æ¥åŒ¹é…è¿æ¥ç‚¹ï¼Œç»™æ»¡è¶³è§„åˆ™çš„è¿æ¥ç‚¹æ·»åŠ é€šçŸ¥ã€‚</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token annotation punctuation\">@Pointcut</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"execution(* com.chinmoku.test.aop.service..*(..))\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">pointcut</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure></li>\n<li>\n<p>é€šçŸ¥ï¼ˆAdviceï¼‰</p>\n<p>é€šçŸ¥æ˜¯æŒ‡æ‹¦æˆªåˆ°è¿æ¥ç‚¹ä¹‹åè¦æ‰§è¡Œçš„ä»£ç ï¼ŒSpring AOP æ¡†æ¶ä»¥æ‹¦æˆªå™¨æ¥å®ç°é€šçŸ¥æ¨¡å‹ï¼Œå¹¶ç»´æŠ¤ä¸€ä¸ªä»¥è¿æ¥ç‚¹ä¸ºä¸­å¿ƒçš„æ‹¦æˆªå™¨é“¾ã€‚</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// @Before è¯´æ˜è¿™æ˜¯ä¸€ä¸ªå‰ç½®é€šçŸ¥ï¼Œlog å‡½æ•°ä¸­æ˜¯è¦å‰ç½®æ‰§è¡Œçš„ä»£ç ï¼ŒJoinPoint æ˜¯è¿æ¥ç‚¹ï¼Œ</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token annotation punctuation\">@Before</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"pointcut()\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">JoinPoint</span> joinPoint<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span> </pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>é€šçŸ¥ç±»å‹ï¼š</p>\n<ul>\n<li>å‰ç½®é€šçŸ¥</li>\n<li>ç¯ç»•é€šçŸ¥</li>\n<li>åç½®é€šçŸ¥</li>\n<li>å¼‚å¸¸é€šçŸ¥</li>\n<li>æœ€ç»ˆé€šçŸ¥</li>\n</ul>\n</li>\n<li>\n<p>ç»‡å…¥ï¼ˆweaveï¼‰</p>\n<p>ç»‡å…¥æ˜¯å°†åˆ‡é¢å’Œä¸šåŠ¡é€»è¾‘å¯¹è±¡è¿æ¥èµ·æ¥ï¼Œå¹¶åˆ›å»ºé€šçŸ¥ä»£ç†çš„è¿‡ç¨‹ã€‚ç»‡å…¥å¯ä»¥åœ¨ç¼–è¯‘æ—¶ï¼Œç±»åŠ è½½æ—¶å’Œè¿è¡Œæ—¶å®Œæˆã€‚åœ¨ç¼–è¯‘æ—¶è¿›è¡Œç»‡å…¥å°±æ˜¯é™æ€ä»£ç†ï¼Œè€Œåœ¨è¿è¡Œæ—¶è¿›è¡Œç»‡å…¥åˆ™æ˜¯åŠ¨æ€ä»£ç†ã€‚</p>\n</li>\n<li>\n<p>å¢å¼ºå™¨ï¼ˆAdvisorï¼‰</p>\n<p>Advisor æ˜¯åˆ‡é¢çš„å¦å¤–ä¸€ç§å®ç°ï¼Œèƒ½å¤Ÿå°†é€šçŸ¥ä»¥æ›´ä¸ºå¤æ‚çš„æ–¹å¼ç»‡å…¥åˆ°ç›®æ ‡å¯¹è±¡ä¸­ï¼Œæ˜¯å°†é€šçŸ¥åŒ…è£…ä¸ºæ›´å¤æ‚åˆ‡é¢çš„è£…é…å™¨ã€‚Advisor ç”±åˆ‡å…¥ç‚¹å’Œ Advice ç»„æˆã€‚</p>\n</li>\n</ol>\n<h3 id=\"åºåˆ—åŒ–\"><a class=\"anchor\" href=\"#åºåˆ—åŒ–\">#</a> åºåˆ—åŒ–</h3>\n<ul>\n<li>\n<p>ä»€ä¹ˆæ˜¯åºåˆ—åŒ–ä¸ååºåˆ—åŒ–ï¼Ÿ</p>\n<p>åºåˆ—åŒ–ï¼Œç®€å•æ¥è¯´ï¼Œå°±æ˜¯å°†å¯¹è±¡è½¬åŒ–æˆå­—èŠ‚åºåˆ—çš„è¿‡ç¨‹ã€‚ç”¨äºå¯¹è±¡çš„ä¼ è¾“ï¼Œå’ŒæŒä¹…åŒ–ã€‚</p>\n<p>ååºåˆ—åŒ–åˆ™ä¸åºåˆ—åŒ–ç›¸åï¼Œå®ƒæ˜¯å°†å­—èŠ‚åºåˆ—è½¬æ¢æˆå¯¹è±¡çš„è¿‡ç¨‹ã€‚</p>\n</li>\n<li>\n<p>ä¸ºä»€ä¹ˆè¦è¿›è¡Œåºåˆ—åŒ–ï¼Ÿ</p>\n<p>å½“ä¿©ä¸ªè¿›ç¨‹è¿›è¡Œè¿œç¨‹é€šä¿¡æ—¶ï¼Œå¯ä»¥ç›¸äº’å‘é€å„ç§ç±»å‹çš„æ•°æ®ï¼Œè€Œè¿™äº›æ•°æ®éƒ½ä¼šä»¥äºŒè¿›åˆ¶çš„å½¢å¼åœ¨ç½‘ç»œä¸Šä¼ é€ã€‚è€Œ Java è¿›ç¨‹åœ¨è¿›è¡Œé€šä¿¡æ—¶ï¼Œåˆ™éœ€è¦å°† Java å¯¹è±¡è½¬æ¢ä¸ºäºŒè¿›åˆ¶ï¼Œè¿™ç§è½¬æ¢çš„è¿‡ç¨‹ï¼Œåˆ™æ˜¯åºåˆ—åŒ–çš„è¿‡ç¨‹ï¼Œè€Œå°†å…¶è¿˜åŸåˆ™æ˜¯ååºåˆ—åŒ–çš„è¿‡ç¨‹ã€‚</p>\n<p>å¦å¤–ï¼Œç”±äºä¸€èˆ¬ Java å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸæ¯” JVM çŸ­ï¼Œè€Œåœ¨å®é™…çš„å¼€å‘ä¸­ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ JVM åœæ­¢åèƒ½å¤Ÿç»§ç»­æŒæœ‰å¯¹è±¡ï¼Œè¿™ä¸ªæ—¶å€™å°±éœ€è¦ç”¨åˆ°åºåˆ—åŒ–æŠ€æœ¯å°†å¯¹è±¡æŒä¹…åˆ°ç£ç›˜æˆ–æ•°æ®åº“ã€‚</p>\n</li>\n</ul>\n<p>JDK ä¸­çš„åºåˆ—åŒ–æ­¥éª¤ï¼š</p>\n<ol>\n<li>\n<p>åˆ›å»ºä¸€ä¸ªå¯¹è±¡è¾“å‡ºæµï¼Œå®ƒå¯ä»¥åŒ…è£…ä¸€ä¸ªå…¶å®ƒç±»å‹çš„ç›®æ ‡è¾“å‡ºæµï¼Œå¦‚æ–‡ä»¶è¾“å‡ºæµï¼š</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token class-name\">ObjectOutputStream</span> outputStream <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ObjectOutputStream</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">FileOutputStream</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"D:\\\\object.out\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure></li>\n<li>\n<p>é€šè¿‡å¯¹è±¡è¾“å‡ºæµçš„  <code>writeObject()</code>  æ–¹æ³•å†™å¯¹è±¡ï¼š</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>outputStream<span class=\"token punctuation\">.</span><span class=\"token function\">writeObject</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">User</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"zhangsan\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"123456\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"male\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure></li>\n</ol>\n<p>JDK ä¸­çš„ååºåˆ—åŒ–æ­¥éª¤ï¼š</p>\n<ol>\n<li>\n<p>åˆ›å»ºä¸€ä¸ªå¯¹è±¡è¾“å…¥æµï¼Œå®ƒå¯ä»¥åŒ…è£…ä¸€ä¸ªå…¶å®ƒç±»å‹è¾“å…¥æµï¼Œå¦‚æ–‡ä»¶è¾“å…¥æµï¼š</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token class-name\">ObjectInputStream</span> ois<span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ObjectInputStream</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">FileInputStream</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"object.out\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure></li>\n<li>\n<p>é€šè¿‡å¯¹è±¡è¾“å‡ºæµçš„  <code>readObject()</code>  æ–¹æ³•è¯»å–å¯¹è±¡ï¼š</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token class-name\">User</span> user <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">User</span><span class=\"token punctuation\">)</span> ois<span class=\"token punctuation\">.</span><span class=\"token function\">readObject</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure></li>\n</ol>\n<blockquote>\n<p>ä¸ºäº†æ­£ç¡®è¯»å–æ•°æ®ï¼Œå®Œæˆååºåˆ—åŒ–ï¼Œå¿…é¡»ä¿è¯å‘å¯¹è±¡è¾“å‡ºæµå†™å¯¹è±¡çš„é¡ºåºä¸ä»å¯¹è±¡è¾“å…¥æµä¸­è¯»å¯¹è±¡çš„é¡ºåºä¸€è‡´ã€‚</p>\n</blockquote>\n<p>æ³¨ï¼šstatic å’Œ transient å­—æ®µä¸èƒ½è¢«åºåˆ—åŒ–ã€‚</p>\n<h4 id=\"åºåˆ—åŒ–åº•å±‚åŸç†\"><a class=\"anchor\" href=\"#åºåˆ—åŒ–åº•å±‚åŸç†\">#</a> åºåˆ—åŒ–åº•å±‚åŸç†</h4>\n<p><span class=\"label danger\">â—ï¸TODO</span> å¾…å®Œå–„</p>\n<h4 id=\"serialversionuid\"><a class=\"anchor\" href=\"#serialversionuid\">#</a> serialVersionUID</h4>\n<p><code>serialVersionUID</code>  é€‚ç”¨äº Java çš„åºåˆ—åŒ–æœºåˆ¶ã€‚ç®€å•æ¥è¯´ï¼ŒJava çš„åºåˆ—åŒ–æœºåˆ¶æ˜¯é€šè¿‡åˆ¤æ–­ç±»çš„ serialVersionUID æ¥éªŒè¯ç‰ˆæœ¬ä¸€è‡´æ€§çš„ã€‚åœ¨è¿›è¡Œååºåˆ—åŒ–æ—¶ï¼ŒJVM ä¼šæŠŠä¼ æ¥çš„å­—èŠ‚æµä¸­çš„ serialVersionUID ä¸æœ¬åœ°ç›¸åº”å®ä½“ç±»çš„ serialVersionUID è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœç›¸åŒå°±è®¤ä¸ºæ˜¯ä¸€è‡´çš„ï¼Œå¯ä»¥è¿›è¡Œååºåˆ—åŒ–ï¼Œå¦åˆ™å°±ä¼šå‡ºç°åºåˆ—åŒ–ç‰ˆæœ¬ä¸ä¸€è‡´çš„å¼‚å¸¸ï¼Œå³æ˜¯ InvalidCastException ã€‚</p>\n<p>serialVersionUID æœ‰ä¸¤ç§æ˜¾ç¤ºçš„ç”Ÿæˆæ–¹å¼ï¼š</p>\n<ol>\n<li>\n<p>é»˜è®¤çš„ 1L</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">private</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">final</span> <span class=\"token keyword\">long</span> serialVersionUID <span class=\"token operator\">=</span> <span class=\"token number\">1L</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure></li>\n<li>\n<p>æ ¹æ®ç±»åã€æ¥å£åã€æˆå‘˜æ–¹æ³•åŠå±æ€§ç­‰æ¥ç”Ÿæˆä¸€ä¸ª 64 ä½çš„å“ˆå¸Œå­—æ®µ</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">private</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">final</span> <span class=\"token keyword\">long</span> serialVersionUID <span class=\"token operator\">=</span> xxxxL<span class=\"token punctuation\">;</span></pre></td></tr></table></figure></li>\n</ol>\n<p>å½“å®ç°  <code>java.io.Serializable</code>  æ¥å£çš„ç±»æ²¡æœ‰æ˜¾å¼åœ°å®šä¹‰ä¸€ä¸ª serialVersionUID å˜é‡æ—¶å€™ï¼ŒJava åºåˆ—åŒ–æœºåˆ¶ä¼šæ ¹æ®ç¼–è¯‘çš„ Class è‡ªåŠ¨ç”Ÿæˆä¸€ä¸ª serialVersionUID ä½œåºåˆ—åŒ–ç‰ˆæœ¬æ¯”è¾ƒç”¨ï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œå¦‚æœ Class æ–‡ä»¶ï¼ˆç±»åï¼Œæ–¹æ³•æ˜ç­‰ï¼‰æ²¡æœ‰å‘ç”Ÿå˜åŒ–ï¼ˆå¢åŠ ç©ºæ ¼ï¼Œæ¢è¡Œï¼Œå¢åŠ æ³¨é‡Šç­‰ç­‰ï¼‰ï¼Œå°±ç®—å†ç¼–è¯‘å¤šæ¬¡ï¼ŒserialVersionUID ä¹Ÿä¸ä¼šå˜åŒ–çš„ã€‚</p>\n<p>å¦‚æœæˆ‘ä»¬ä¸å¸Œæœ›é€šè¿‡ç¼–è¯‘æ¥å¼ºåˆ¶åˆ’åˆ†è½¯ä»¶ç‰ˆæœ¬ï¼Œå³å®ç°åºåˆ—åŒ–æ¥å£çš„å®ä½“èƒ½å¤Ÿå…¼å®¹å…ˆå‰ç‰ˆæœ¬ï¼Œå°±éœ€è¦æ˜¾å¼åœ°å®šä¹‰ä¸€ä¸ªåä¸º serialVersionUIDï¼Œç±»å‹ä¸º long çš„å˜é‡ï¼Œä¸ä¿®æ”¹è¿™ä¸ªå˜é‡å€¼çš„åºåˆ—åŒ–å®ä½“éƒ½å¯ä»¥ç›¸äº’è¿›è¡Œä¸²è¡ŒåŒ–å’Œåä¸²è¡ŒåŒ–ã€‚</p>\n<h4 id=\"åºåˆ—åŒ–ä¸å•ä¾‹æ¨¡å¼\"><a class=\"anchor\" href=\"#åºåˆ—åŒ–ä¸å•ä¾‹æ¨¡å¼\">#</a> åºåˆ—åŒ–ä¸å•ä¾‹æ¨¡å¼</h4>\n<p>åºåˆ—åŒ–å’Œååºåˆ—åŒ–ä¼šå½±å“ç ´åå•ä¾‹æ¨¡å¼ï¼Œè¿™æ˜¯å› ä¸ºååºåˆ—åŒ–çš„æ—¶å€™ä¼šå»åå°„è°ƒç”¨å¯¹è±¡çš„æ— å‚æ„é€ æ–¹æ³•ã€‚</p>\n<p>è§£å†³æ–¹æ³•ï¼š</p>\n<p>åªè¦åœ¨ Singleton ç±»ä¸­å®šä¹‰  <code>readResolve</code>  å°±å¯ä»¥è§£å†³åºåˆ—åŒ–å’Œååºåˆ—åŒ–å¯¹å•ä¾‹æ¨¡å¼çš„ç ´åã€‚</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Singleton</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">Serializable</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token keyword\">volatile</span> <span class=\"token keyword\">static</span> <span class=\"token class-name\">Singleton</span> singleton<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Singleton</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token class-name\">Singleton</span> <span class=\"token function\">getSingleton</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>singleton <span class=\"token operator\">==</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>            <span class=\"token keyword\">synchronized</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Singleton</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>                <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>singleton <span class=\"token operator\">==</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>                    singleton <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Singleton</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>                <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token keyword\">return</span> singleton<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Object</span> <span class=\"token function\">readResolve</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        <span class=\"token keyword\">return</span> singleton<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>æ›´åŠ è¯¦ç»†çš„è§£é‡Šï¼Œå¯å‚è€ƒï¼š<span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuaG9sbGlzY2h1YW5nLmNvbS9hcmNoaXZlcy8xMTQ0\">https://www.hollischuang.com/archives/1144</span></p>\n<h4 id=\"protobuf\"><a class=\"anchor\" href=\"#protobuf\">#</a> ProtoBuf</h4>\n<p><code>ProtoBuf</code>  ï¼ˆGoogle Protocol Buffersï¼‰æ˜¯ä¸€ç§çµæ´»ï¼Œé«˜æ•ˆï¼Œè‡ªåŠ¨åŒ–æœºåˆ¶çš„ç»“æ„æ•°æ®åºåˆ—åŒ–æ–¹æ³•ï¼Œå¯ç±»æ¯” XML ï¼Œä½†æ˜¯å®ƒæ¯” XML æ›´å°ã€æ›´å¿«ã€æ›´ä¸ºç®€å•ã€‚ä½ å¯ä»¥å®šä¹‰æ•°æ®çš„ç»“æ„ï¼Œç„¶åä½¿ç”¨ ProtoBuf ç”Ÿæˆçš„æºä»£ç è½»æ¾çš„åœ¨å„ç§æ•°æ®æµä¸­ä½¿ç”¨å„ç§è¯­è¨€è¿›è¡Œç¼–å†™å’Œè¯»å–ç»“æ„æ•°æ®ã€‚ä½ ç”šè‡³å¯ä»¥æ›´æ–°æ•°æ®ç»“æ„ï¼Œè€Œä¸ç ´åæ ¹æ®æ—§æ•°æ®ç»“æ„ç¼–è¯‘è€Œæˆå¹¶ä¸”å·²éƒ¨ç½²çš„ç¨‹åºã€‚</p>\n<table>\n<thead>\n<tr>\n<th>å¯¹æ¯”æ–¹é¢</th>\n<th>XML</th>\n<th>JSON</th>\n<th>ProtoBuf</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>æ•°æ®ç»“æ„</td>\n<td>ä¸€èˆ¬å¤æ‚</td>\n<td>ç®€å•</td>\n<td>æ¯”è¾ƒå¤æ‚</td>\n</tr>\n<tr>\n<td>æ•°æ®å­˜å‚¨æ–¹å¼</td>\n<td>æ–‡æœ¬</td>\n<td>æ–‡æœ¬</td>\n<td>äºŒè¿›åˆ¶</td>\n</tr>\n<tr>\n<td>æ•°æ®å­˜å‚¨å¤§å°</td>\n<td>å¤§</td>\n<td>ä¸€èˆ¬</td>\n<td>å°</td>\n</tr>\n<tr>\n<td>è§£ææ•ˆç‡</td>\n<td>æ…¢</td>\n<td>ä¸€èˆ¬</td>\n<td>å¿«</td>\n</tr>\n<tr>\n<td>è·¨è¯­è¨€æ”¯æŒ</td>\n<td>éå¸¸å¤š</td>\n<td>å¤š</td>\n<td>ä¸€èˆ¬</td>\n</tr>\n<tr>\n<td>å­¦ä¹ æˆæœ¬</td>\n<td>æ¯”è¾ƒç¹ç</td>\n<td>ç®€å•</td>\n<td>ä¸€èˆ¬</td>\n</tr>\n<tr>\n<td>å¼€å‘æˆæœ¬</td>\n<td>ä¸€èˆ¬</td>\n<td>ä½</td>\n<td>ä¸€èˆ¬</td>\n</tr>\n</tbody>\n</table>\n<p>ProtoBuf æ–‡ä»¶ä»¥  <code>.proto</code>  ä½œä¸ºåç¼€åï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ ProtoBuf æ–‡ä»¶å†…å®¹ç¤ºä¾‹ï¼š</p>\n<figure class=\"highlight protobuf\"><figcaption data-lang=\"Protocol Buffers\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">syntax</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"proto3\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">message</span> <span class=\"token class-name\">Person</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token keyword\">required</span> <span class=\"token builtin\">string</span> name <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token keyword\">required</span> <span class=\"token builtin\">int32</span> id <span class=\"token operator\">=</span> <span class=\"token number\">2</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  <span class=\"token keyword\">optional</span> <span class=\"token builtin\">string</span> email <span class=\"token operator\">=</span> <span class=\"token number\">3</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>  <span class=\"token keyword\">enum</span> <span class=\"token class-name\">PhoneType</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    MOBILE <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    HOME <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    WORK <span class=\"token operator\">=</span> <span class=\"token number\">2</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>  <span class=\"token keyword\">message</span> <span class=\"token class-name\">PhoneNumber</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token keyword\">required</span> <span class=\"token builtin\">string</span> number <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token keyword\">optional</span> <span class=\"token positional-class-name class-name\">PhoneType</span> type <span class=\"token operator\">=</span> <span class=\"token number\">2</span> <span class=\"token punctuation\">[</span><span class=\"token annotation\">default</span> <span class=\"token operator\">=</span> HOME<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>  <span class=\"token keyword\">repeated</span> <span class=\"token positional-class-name class-name\">PhoneNumber</span> phone <span class=\"token operator\">=</span> <span class=\"token number\">4</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h4 id=\"ä¸ºä»€ä¹ˆè¯´åºåˆ—åŒ–å¹¶ä¸å®‰å…¨\"><a class=\"anchor\" href=\"#ä¸ºä»€ä¹ˆè¯´åºåˆ—åŒ–å¹¶ä¸å®‰å…¨\">#</a> ä¸ºä»€ä¹ˆè¯´åºåˆ—åŒ–å¹¶ä¸å®‰å…¨</h4>\n<p>å› ä¸ºåºåˆ—åŒ–çš„å¯¹è±¡æ•°æ®è½¬æ¢ä¸ºäºŒè¿›åˆ¶ï¼Œå¹¶ä¸”å®Œå…¨å¯é€†ã€‚åœ¨ RMI è°ƒç”¨æ—¶ï¼Œæ‰€æœ‰ private å­—æ®µçš„æ•°æ®éƒ½ä»¥æ˜æ–‡äºŒè¿›åˆ¶çš„å½¢å¼å‡ºç°åœ¨ç½‘ç»œçš„å¥—æ¥å­—ä¸Šï¼Œ</p>\n<p>æ›´åŠ æ·±å…¥çš„ç†è§£ï¼Œå¯å‚è€ƒï¼š<span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuamlhbnNodS5jb20vcC9mYTkxMmNlMDQyNmY=\">https://www.jianshu.com/p/fa912ce0426f</span></p>\n<h3 id=\"æ³¨è§£\"><a class=\"anchor\" href=\"#æ³¨è§£\">#</a> æ³¨è§£</h3>\n<h4 id=\"å…ƒæ³¨è§£\"><a class=\"anchor\" href=\"#å…ƒæ³¨è§£\">#</a> å…ƒæ³¨è§£</h4>\n<p>å…ƒæ³¨è§£ï¼Œå³å®šä¹‰å…¶ä»–æ³¨è§£çš„æ³¨è§£ã€‚å…ƒæ³¨è§£æœ‰å››ä¸ªï¼š</p>\n<ul>\n<li>@Targetï¼ˆè¡¨ç¤ºè¯¥æ³¨è§£å¯ä»¥ç”¨äºä»€ä¹ˆåœ°æ–¹ï¼‰</li>\n<li>@Retentionï¼ˆè¡¨ç¤ºåœ¨ä»€ä¹ˆçº§åˆ«ä¿å­˜è¯¥æ³¨è§£ä¿¡æ¯ï¼‰</li>\n<li>@Documentedï¼ˆå°†æ­¤æ³¨è§£åŒ…å«å† javadoc ä¸­ï¼‰</li>\n<li>@Inheritedï¼ˆå…è®¸å­ç±»ç»§æ‰¿çˆ¶ç±»ä¸­çš„æ³¨è§£ï¼‰</li>\n</ul>\n<h4 id=\"è‡ªå®šä¹‰æ³¨è§£\"><a class=\"anchor\" href=\"#è‡ªå®šä¹‰æ³¨è§£\">#</a> è‡ªå®šä¹‰æ³¨è§£</h4>\n<p>é™¤äº†å…ƒæ³¨è§£ï¼Œéƒ½æ˜¯è‡ªå®šä¹‰æ³¨è§£ã€‚é€šè¿‡å…ƒæ³¨è§£å®šä¹‰å‡ºæ¥çš„æ³¨è§£ã€‚å¦‚æˆ‘ä»¬å¸¸ç”¨çš„ Override ã€Autowire ç­‰ã€‚ æ—¥å¸¸å¼€å‘ä¸­ä¹Ÿå¯ä»¥è‡ªå®šä¹‰ä¸€ä¸ªæ³¨è§£ï¼Œè¿™äº›éƒ½æ˜¯è‡ªå®šä¹‰æ³¨è§£ã€‚</p>\n<h4 id=\"javaä¸­å¸¸ç”¨æ³¨è§£ä½¿ç”¨\"><a class=\"anchor\" href=\"#javaä¸­å¸¸ç”¨æ³¨è§£ä½¿ç”¨\">#</a> Java ä¸­å¸¸ç”¨æ³¨è§£ä½¿ç”¨</h4>\n<ul>\n<li>@Override è¡¨ç¤ºå½“å‰æ–¹æ³•è¦†ç›–äº†çˆ¶ç±»çš„æ–¹æ³•</li>\n<li>@Deprecation è¡¨ç¤ºæ–¹æ³•å·²ç»è¿‡æ—¶ï¼Œæ–¹æ³•ä¸Šæœ‰æ¨ªçº¿ï¼Œä½¿ç”¨æ—¶ä¼šæœ‰è­¦å‘Šã€‚</li>\n<li>@SuppressWarnings è¡¨ç¤ºå…³é—­ä¸€äº›è­¦å‘Šä¿¡æ¯ (é€šçŸ¥ java ç¼–è¯‘å™¨å¿½ç•¥ç‰¹å®šçš„ç¼–è¯‘è­¦å‘Š)</li>\n<li>@SafeVarargs (jdk1.7 æ›´æ–°) ï¼šä¸“é—¨ä¸ºæŠ‘åˆ¶ â€œå †æ±¡æŸ“â€ è­¦å‘Šæä¾›çš„ã€‚</li>\n<li>@FunctionalInterface (jdk1.8 æ›´æ–°) ï¼šç”¨æ¥æŒ‡å®šæŸä¸ªæ¥å£å¿…é¡»æ˜¯å‡½æ•°å¼æ¥å£ï¼Œå¦åˆ™å°±ä¼šç¼–è¯‘å‡ºé”™ã€‚</li>\n</ul>\n<h4 id=\"æ³¨è§£ä¸åå°„çš„ç»“åˆ\"><a class=\"anchor\" href=\"#æ³¨è§£ä¸åå°„çš„ç»“åˆ\">#</a> æ³¨è§£ä¸åå°„çš„ç»“åˆ</h4>\n<p>æ³¨è§£ä¸åå°„ç»“åˆä½¿ç”¨ç¤ºä¾‹ï¼š</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Test</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token annotation punctuation\">@Retention</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">RetentionPolicy</span><span class=\"token punctuation\">.</span>RUNTIME<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token annotation punctuation\">@Target</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span><span class=\"token class-name\">ElementType</span><span class=\"token punctuation\">.</span>FIELD<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token annotation punctuation\">@interface</span> <span class=\"token class-name\">MyAnnotation</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token keyword\">int</span> <span class=\"token function\">value</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token keyword\">static</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">MyBean</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token annotation punctuation\">@MyAnnotation</span><span class=\"token punctuation\">(</span><span class=\"token number\">20</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token keyword\">private</span> <span class=\"token keyword\">int</span> value<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>            <span class=\"token keyword\">return</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">.</span><span class=\"token function\">valueOf</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>        <span class=\"token keyword\">try</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>            <span class=\"token class-name\">Field</span> field <span class=\"token operator\">=</span> <span class=\"token class-name\">MyBean</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">.</span><span class=\"token function\">getDeclaredField</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"value\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">// è·å–æˆå‘˜å˜é‡ value</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>            field<span class=\"token punctuation\">.</span><span class=\"token function\">setAccessible</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">// å°† value è®¾ç½®æˆå¯è®¿é—®çš„</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>field<span class=\"token punctuation\">.</span><span class=\"token function\">isAnnotationPresent</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">MyAnnotation</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span><span class=\"token comment\">// åˆ¤æ–­æˆå‘˜å˜é‡æ˜¯å¦æœ‰æ³¨è§£</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>                <span class=\"token class-name\">MyAnnotation</span> myAnnotation <span class=\"token operator\">=</span> field<span class=\"token punctuation\">.</span><span class=\"token function\">getAnnotation</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">MyAnnotation</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">// è·å–å®šä¹‰åœ¨æˆå‘˜å˜é‡ä¸­çš„æ³¨è§£ MyAnnotation</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>                <span class=\"token keyword\">int</span> value <span class=\"token operator\">=</span> myAnnotation<span class=\"token punctuation\">.</span><span class=\"token function\">value</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">// è·å–å®šä¹‰åœ¨ MyBean çš„ MyAnnotation é‡Œé¢å±æ€§å€¼</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>                <span class=\"token class-name\">MyBean</span> myBean <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">MyBean</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>                field<span class=\"token punctuation\">.</span><span class=\"token function\">setInt</span><span class=\"token punctuation\">(</span>myBean<span class=\"token punctuation\">,</span> value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">// å°†æ³¨è§£çš„å€¼ 20 å¯ä»¥èµ‹ç»™æˆå‘˜å˜é‡ value</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>                <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>myBean<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">// éªŒè¯ç»“æœ</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Exception</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>            e<span class=\"token punctuation\">.</span><span class=\"token function\">printStackTrace</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>        <span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h4 id=\"springå¸¸ç”¨æ³¨è§£\"><a class=\"anchor\" href=\"#springå¸¸ç”¨æ³¨è§£\">#</a> Spring å¸¸ç”¨æ³¨è§£</h4>\n<ul>\n<li>@Configuration æŠŠä¸€ä¸ªç±»ä½œä¸ºä¸€ä¸ª IoC å®¹å™¨ï¼Œå®ƒçš„æŸä¸ªæ–¹æ³•å¤´ä¸Šå¦‚æœæ³¨å†Œäº† @Beanï¼Œå°±ä¼šä½œä¸ºè¿™ä¸ª Spring å®¹å™¨ä¸­çš„ Beanã€‚</li>\n<li>@Scope æ³¨è§£ ä½œç”¨åŸŸ</li>\n<li>@Lazy (true) è¡¨ç¤ºå»¶è¿Ÿåˆå§‹åŒ–</li>\n<li>@Service ç”¨äºæ ‡æ³¨ä¸šåŠ¡å±‚ç»„ä»¶</li>\n<li>@Controller ç”¨äºæ ‡æ³¨æ§åˆ¶å±‚ç»„ä»¶ @Repository ç”¨äºæ ‡æ³¨æ•°æ®è®¿é—®ç»„ä»¶ï¼Œå³ DAO ç»„ä»¶ã€‚</li>\n<li>@Component æ³›æŒ‡ç»„ä»¶ï¼Œå½“ç»„ä»¶ä¸å¥½å½’ç±»çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¿™ä¸ªæ³¨è§£è¿›è¡Œæ ‡æ³¨ã€‚</li>\n<li>@Scope ç”¨äºæŒ‡å®š scope ä½œç”¨åŸŸçš„ï¼ˆç”¨åœ¨ç±»ä¸Šï¼‰</li>\n<li>@PostConstruct ç”¨äºæŒ‡å®šåˆå§‹åŒ–æ–¹æ³•ï¼ˆç”¨åœ¨æ–¹æ³•ä¸Šï¼‰</li>\n<li>@PreDestory ç”¨äºæŒ‡å®šé”€æ¯æ–¹æ³•ï¼ˆç”¨åœ¨æ–¹æ³•ä¸Šï¼‰</li>\n<li>@DependsOn å®šä¹‰ Bean åˆå§‹åŒ–åŠé”€æ¯æ—¶çš„é¡ºåº</li>\n<li>@Primary è‡ªåŠ¨è£…é…æ—¶å½“å‡ºç°å¤šä¸ª Bean å€™é€‰è€…æ—¶ï¼Œè¢«æ³¨è§£ä¸º @Primary çš„ Bean å°†ä½œä¸ºé¦–é€‰è€…ï¼Œå¦åˆ™å°†æŠ›å‡ºå¼‚å¸¸</li>\n<li>@Autowired é»˜è®¤æŒ‰ç±»å‹è£…é…ï¼Œå¦‚æœæˆ‘ä»¬æƒ³ä½¿ç”¨æŒ‰åç§°è£…é…ï¼Œå¯ä»¥ç»“åˆ @Qualifier æ³¨è§£ä¸€èµ·ä½¿ç”¨ã€‚å¦‚ä¸‹ï¼š</li>\n<li>@Autowired @Qualifier (&quot;personDaoBean&quot;) å­˜åœ¨å¤šä¸ªå®ä¾‹é…åˆä½¿ç”¨</li>\n<li>@Resource é»˜è®¤æŒ‰åç§°è£…é…ï¼Œå½“æ‰¾ä¸åˆ°ä¸åç§°åŒ¹é…çš„ bean æ‰ä¼šæŒ‰ç±»å‹è£…é…ã€‚</li>\n<li>@PostConstruct åˆå§‹åŒ–æ³¨è§£</li>\n<li>@PreDestroy æ‘§æ¯æ³¨è§£ï¼Œé»˜è®¤ï¼Œå•ä¾‹ï¼Œå¯åŠ¨å°±åŠ è½½</li>\n</ul>\n<h3 id=\"jms\"><a class=\"anchor\" href=\"#jms\">#</a> JMS</h3>\n<blockquote>\n<p>å…³äº JMS åŠå…¶å®ç°ï¼Œè¿™é‡Œä»…æå‡ºæ¢—è¦ï¼Œæ›´å¤šè¯¦ç»†å†…å®¹å°†è®°å½•åœ¨ Java é«˜çº§ç¯‡ç›¸å…³æ–‡ç« å†…ã€‚</p>\n</blockquote>\n<h4 id=\"ä»€ä¹ˆæ˜¯javaæ¶ˆæ¯æœåŠ¡\"><a class=\"anchor\" href=\"#ä»€ä¹ˆæ˜¯javaæ¶ˆæ¯æœåŠ¡\">#</a> ä»€ä¹ˆæ˜¯ Java æ¶ˆæ¯æœåŠ¡</h4>\n<p><code>JMS</code>  å³ Java æ¶ˆæ¯æœåŠ¡ï¼ˆJava Message Serverï¼‰åº”ç”¨ç¨‹åºæ¥å£ï¼Œå®ƒæ˜¯ Java å¹³å°ä¸­å…³äºé¢å‘æ¶ˆæ¯ä¸­é—´ä»¶ï¼ˆMOMï¼‰çš„ APIï¼Œç”¨äºä¸¤ä¸ªåº”ç”¨ç¨‹åºä¹‹é—´ï¼Œæˆ–åˆ†å¸ƒå¼ç³»ç»Ÿä¸­å‘é€æ¶ˆæ¯ï¼Œè¿›è¡Œå¼‚æ­¥é€šä¿¡ï¼ŒJava æ¶ˆæ¯æœåŠ¡æ˜¯ä¸€ä¸ªä¸å…·ä½“å¹³å°æ— å…³çš„ APIï¼Œç»å¤§å¤šæ•° MOM æä¾›å•†éƒ½å¯¹ JMS æä¾›æ”¯æŒã€‚</p>\n<h4 id=\"jmsæ¶ˆæ¯ä¼ é€æ¨¡å‹\"><a class=\"anchor\" href=\"#jmsæ¶ˆæ¯ä¼ é€æ¨¡å‹\">#</a> JMS æ¶ˆæ¯ä¼ é€æ¨¡å‹</h4>\n<p>JMS å…·æœ‰ä¸¤ç§é€šä¿¡æ¨¡å¼ï¼š</p>\n<ol>\n<li>Point-to-Point Messaging Domainï¼ˆç‚¹å¯¹ç‚¹é€šä¿¡æ¨¡å‹ï¼‰</li>\n<li>Publish/Subscribe Messaging Domainï¼ˆå‘å¸ƒ / è®¢é˜…é€šä¿¡æ¨¡å‹ï¼‰</li>\n</ol>\n<h4 id=\"jms-ç¼–ç¨‹æ¨¡å‹\"><a class=\"anchor\" href=\"#jms-ç¼–ç¨‹æ¨¡å‹\">#</a> JMS ç¼–ç¨‹æ¨¡å‹</h4>\n<p>JMS ç¼–ç¨‹æ¨¡å‹ç”±ä»¥ä¸‹ä¸»ä½“æ„æˆï¼š</p>\n<ul>\n<li>ConnectionFactoryï¼šè¿æ¥å·¥å‚ï¼ˆåˆ›å»ºè¿æ¥ï¼‰</li>\n<li>Connectionï¼šè¿æ¥ï¼ˆåˆ›å»ºä¼šè¯ï¼‰</li>\n<li>Sessionï¼šä¼šè¯ï¼ˆåˆ›å»ºç›®çš„åœ°ã€ç”Ÿäº§è€…ã€æ¶ˆè´¹è€…ã€æ¶ˆæ¯ï¼‰</li>\n<li>Destinationï¼šç›®çš„åœ°ï¼ˆæ¶ˆæ¯å‘é€ç›®æ ‡ï¼‰</li>\n<li>MessageProducerï¼šæ¶ˆæ¯ç”Ÿäº§è€…ï¼ˆå‘é€æ¶ˆæ¯ï¼‰</li>\n<li>MessageConsumerï¼šæ¶ˆæ¯æ¶ˆè´¹è€…ï¼ˆæ¶ˆè´¹æ¶ˆæ¯ï¼‰</li>\n<li>Messageï¼šæ¶ˆæ¯ï¼ˆå†…å®¹ä¸»ä½“ï¼‰</li>\n</ul>\n<p><img data-src=\"https://img.xfc-exclave.com/2021/08/4cd1c84d75eea9166690e8fa2b7180101629451502.png\" alt=\"JMSç¼–ç¨‹æ¨¡å‹å…³ç³»å›¾\" /></p>\n<h4 id=\"å¸¸ç”¨çš„-jms-å®ç°\"><a class=\"anchor\" href=\"#å¸¸ç”¨çš„-jms-å®ç°\">#</a> å¸¸ç”¨çš„ JMS å®ç°</h4>\n<ul>\n<li>ActiveMQ</li>\n<li>RabbitMQ</li>\n<li>RocketMQ</li>\n</ul>\n<blockquote>\n<p>æ³¨æ„ï¼škafka ä¸æ˜¯ JMS çš„å®ç°ã€‚</p>\n</blockquote>\n<h3 id=\"jmx\"><a class=\"anchor\" href=\"#jmx\">#</a> JMX</h3>\n<p>JMX å…¨ç§°ä¸º Java Management Extensionsï¼Œå®ƒæ˜¯ä¸€ä¸ª Java å¹³å°çš„ç®¡ç†å’Œç›‘æ§æ¥å£ã€‚å®ƒæœ€å¸¸ç”¨åˆ°çš„å°±æ˜¯å¯¹äº JVM çš„ç›‘æµ‹å’Œç®¡ç†ï¼Œæ¯”å¦‚ JVM å†…å­˜ã€CPU ä½¿ç”¨ç‡ã€çº¿ç¨‹æ•°ã€åƒåœ¾æ”¶é›†æƒ…å†µç­‰ç­‰ã€‚å¦å¤–ï¼Œè¿˜å¯ä»¥ç”¨ä½œæ—¥å¿—çº§åˆ«çš„åŠ¨æ€ä¿®æ”¹ï¼Œæ¯”å¦‚ log4j å°±æ”¯æŒ JMX æ–¹å¼åŠ¨æ€ä¿®æ”¹çº¿ä¸ŠæœåŠ¡çš„æ—¥å¿—çº§åˆ«ã€‚æœ€ä¸»è¦çš„è¿˜æ˜¯è¢«ç”¨æ¥åšå„ç§ç›‘æ§å·¥å…·ï¼Œå¦‚ Spring Boot Actuatorã€JConsoleã€VisualVM ç­‰ã€‚</p>\n<p>ä¸ºäº†æ ‡å‡†åŒ–ç®¡ç†å’Œç›‘æ§ï¼ŒJava å¹³å°ä½¿ç”¨ JMX ä½œä¸ºç®¡ç†å’Œç›‘æ§çš„æ ‡å‡†æ¥å£ï¼Œä»»ä½•ç¨‹åºï¼Œåªè¦æŒ‰ JMX è§„èŒƒè®¿é—®è¿™ä¸ªæ¥å£ï¼Œå°±å¯ä»¥è·å–æ‰€æœ‰ç®¡ç†ä¸ç›‘æ§ä¿¡æ¯ã€‚</p>\n<p><img data-src=\"https://img.xfc-exclave.com/2021/08/42dfc37951bf02f361fc0111444eaaa81629705067.jpg\" alt=\"JMSæ¶æ„å›¾ç¤º\" /></p>\n<p>JMX æŠŠæ‰€æœ‰è¢«ç®¡ç†çš„èµ„æºéƒ½ç§°ä¸º MBeanï¼ˆManaged Beanï¼‰ï¼Œè¿™äº› MBean å…¨éƒ¨ç”± MBeanServer ç®¡ç†ï¼Œå¦‚æœè¦è®¿é—® MBeanï¼Œå¯ä»¥é€šè¿‡ MBeanServer å¯¹å¤–æä¾›çš„è®¿é—®æ¥å£ï¼Œä¾‹å¦‚é€šè¿‡ RMI æˆ– HTTP è®¿é—®ã€‚</p>\n<p>ä½¿ç”¨ JMX ä¸éœ€è¦å®‰è£…ä»»ä½•é¢å¤–ç»„ä»¶ï¼Œä¹Ÿä¸éœ€è¦ç¬¬ä¸‰æ–¹åº“ï¼Œå› ä¸º MBeanServer å·²ç»å†…ç½®åœ¨ JavaSE æ ‡å‡†åº“ä¸­äº†ã€‚JavaSE è¿˜æä¾›äº†ä¸€ä¸ª  <code>jconsole</code>  ç¨‹åºï¼Œç”¨äºé€šè¿‡ RMI è¿æ¥åˆ° MBeanServerï¼Œè¿™æ ·å°±å¯ä»¥ç®¡ç†æ•´ä¸ª Java è¿›ç¨‹ã€‚</p>\n<p>JVM ä¼šæŠŠè‡ªèº«çš„å„ç§èµ„æºä»¥ MBean æ³¨å†Œåˆ° JMX ä¸­ï¼ŒåŒæ—¶ï¼Œç¨‹åºè‡ªå·±çš„é…ç½®ã€ç›‘æ§ä¿¡æ¯ä¹Ÿå¯ä»¥ä½œä¸º MBean æ³¨å†Œåˆ° JMXï¼Œè¿™æ ·ï¼Œç®¡ç†ç¨‹åºå°±å¯ä»¥ç›´æ¥æ§åˆ¶ç¨‹åºæš´éœ²çš„ MBeanã€‚</p>\n<p>JMX ä¸­ MBean æœ‰ DynamicMBean å’Œ StandardMBean ä¸¤ç±»ï¼Œå‰è€…åŠ¨æ€ç»„è£…ä¸€ä¸ªç›‘æ§å¯¹è±¡ï¼Œè¾ƒä¸ºå¤æ‚ï¼Œä½†æ›´ä¸ºçµæ´»ï¼Œä¸éœ€è¦ç›‘æ§ç±»ç»§æ‰¿ * MBean æ¥å£ï¼Œåè€…ç®€å•ã€‚</p>\n<p>åº”ç”¨ç¨‹åºä½¿ç”¨ JMX åªéœ€è¦ä¸¤æ­¥ï¼š</p>\n<ol>\n<li>ç¼–å†™ MBean æä¾›ç®¡ç†æ¥å£å’Œç›‘æ§æ•°æ®ï¼›</li>\n<li>æ³¨å†Œ MBeanï¼ˆåœ¨ Spring åº”ç”¨ä¸­ï¼Œè¿™ä¸€æ­¥å°†è‡ªåŠ¨å®Œæˆï¼‰ã€‚</li>\n</ol>\n<p>ç¤ºä¾‹ï¼š</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">javax<span class=\"token punctuation\">.</span>management<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">MBeanServer</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">javax<span class=\"token punctuation\">.</span>management<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">ObjectName</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>lang<span class=\"token punctuation\">.</span>management<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">ManagementFactory</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">HelloJMX</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">HelloJMXMBean</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> name<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token keyword\">return</span> name<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">setName</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> name<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> name<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">printHello</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"HelloJMX, \"</span> <span class=\"token operator\">+</span> name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    <span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">printHello</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> whoName<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"HelloJMX, it is \"</span> <span class=\"token operator\">+</span> whoName<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">Exception</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>        <span class=\"token class-name\">MBeanServer</span> server <span class=\"token operator\">=</span> <span class=\"token class-name\">ManagementFactory</span><span class=\"token punctuation\">.</span><span class=\"token function\">getPlatformMBeanServer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>        <span class=\"token class-name\">ObjectName</span> helloName <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ObjectName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"george:name=HelloJMX\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>        server<span class=\"token punctuation\">.</span><span class=\"token function\">registerMBean</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">HelloJMX</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> helloName<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>        <span class=\"token class-name\">Thread</span><span class=\"token punctuation\">.</span><span class=\"token function\">sleep</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Long</span><span class=\"token punctuation\">.</span>MAX_VALUE<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>å¯åŠ¨ç¤ºä¾‹ç¨‹åºï¼Œç„¶ååœ¨ç»ˆç«¯å¯åŠ¨ä¸€ä¸ª  <code>JConsole</code>  ï¼Œå¹¶è¿æ¥è¯¥ç¤ºä¾‹ç¨‹åºçš„è¿›ç¨‹ï¼Œç›‘æ§çª—å£å¦‚ä¸‹ï¼š</p>\n<p><img data-src=\"https://img.xfc-exclave.com/2021/08/08b5de3bc7fd84487e707c854ce726911629710955.png\" alt=\"JConsoleç›‘æ§çª—å£\" /></p>\n<blockquote>\n<p>å¯åŠ¨ jconsole æ–¹æ³•ï¼šåœ¨ç»ˆç«¯æ‰§è¡Œå‘½ä»¤  <code>jconsole</code>  å³å¯ã€‚</p>\n</blockquote>\n<p>Java ç›‘æ§ç›¸å…³è½¯ä»¶åŒ…ï¼š</p>\n<ul>\n<li>java.lang.management.*</li>\n<li>javax.management.*</li>\n</ul>\n<p>æ›´å¤šå†…å®¹ï¼Œè¯·é˜…è¯»ï¼š</p>\n<ul>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubGlhb3h1ZWZlbmcuY29tL3dpa2kvMTI1MjU5OTU0ODM0Mzc0NC8xMjgyMzg1Njg3NjA5Mzc4\">https://www.liaoxuefeng.com/wiki/1252599548343744/1282385687609378</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly96aHVhbmxhbi56aGlodS5jb20vcC8xNjY1MzA0NDI=\">https://zhuanlan.zhihu.com/p/166530442</span></li>\n</ul>\n<h3 id=\"æ³›å‹\"><a class=\"anchor\" href=\"#æ³›å‹\">#</a> æ³›å‹</h3>\n<p>Java æ³›å‹ï¼ˆgenericsï¼‰æ˜¯ JDK 5 ä¸­å¼•å…¥çš„â¼€ä¸ªæ–°ç‰¹æ€§ï¼Œ å…è®¸åœ¨å®šä¹‰ç±»å’Œæ¥å£çš„æ—¶å€™ä½¿ç”¨ç±»å‹å‚æ•° ã€‚</p>\n<p>å£°æ˜çš„ç±»å‹å‚æ•°åœ¨ä½¿ç”¨æ—¶ç”¨å…·ä½“çš„ç±»å‹æ¥æ›¿æ¢ã€‚ æ³›å‹æœ€ä¸»è¦çš„åº”â½¤æ˜¯åœ¨ JDK 5 ä¸­çš„æ–°é›†åˆç±»æ¡†æ¶ä¸­ã€‚</p>\n<p>æ³›å‹æœ€â¼¤çš„å¥½å¤„æ˜¯å¯ä»¥æâ¾¼ä»£ç çš„å¤ç”¨æ€§ã€‚ ä»¥ List æ¥å£ä¸ºä¾‹ï¼Œæˆ‘ä»¬å¯ä»¥å°† Stringã€Integer ç­‰ç±»å‹æ”¾â¼Š List ä¸­ï¼Œå¦‚ä¸ç”¨æ³›å‹ï¼Œå­˜æ”¾ String ç±»å‹è¦å†™â¼€ä¸ª List æ¥å£ï¼Œå­˜æ”¾ Integer è¦å†™å¦å¤–â¼€ä¸ª List æ¥å£ï¼Œæ³›å‹å¯ä»¥å¾ˆå¥½çš„è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p>\n<h4 id=\"æ³›å‹ä¸ç»§æ‰¿\"><a class=\"anchor\" href=\"#æ³›å‹ä¸ç»§æ‰¿\">#</a> æ³›å‹ä¸ç»§æ‰¿</h4>\n<h4 id=\"ç±»å‹æ“¦é™¤\"><a class=\"anchor\" href=\"#ç±»å‹æ“¦é™¤\">#</a> ç±»å‹æ“¦é™¤</h4>\n<p>Java è¯­è¨€çš„æ³›å‹é‡‡ç”¨çš„æ˜¯æ“¦é™¤æ³•å®ç°çš„ä¼ªæ³›å‹ï¼Œæ³›å‹ä¿¡æ¯ï¼ˆç±»å‹å˜é‡ã€å‚æ•°åŒ–ç±»å‹ï¼‰ç¼–è¯‘ä¹‹åé€šé€šè¢«é™¤æ‰äº†ã€‚ä½¿ç”¨æ“¦é™¤æ³•çš„å¥½å¤„å°±æ˜¯å®ç°ç®€å•ã€å¹¶ä¸”èƒ½å¤Ÿå‘åå…¼å®¹ï¼Œè¿è¡ŒæœŸä¹Ÿèƒ½å¤ŸèŠ‚çœä¸€äº›ç±»å‹æ‰€å çš„å†…å­˜ç©ºé—´ã€‚è€Œæ“¦é™¤æ³•çš„åå¤„å°±æ˜¯ï¼Œé€šè¿‡è¿™ç§æœºåˆ¶å®ç°çš„æ³›å‹è¿œä¸å¦‚çœŸæ³›å‹çµæ´»å’Œå¼ºå¤§ã€‚Java é€‰å–è¿™ç§æ–¹æ³•æ˜¯ä¸€ç§æŠ˜ä¸­ï¼Œå› ä¸º Java æœ€å¼€å§‹çš„ç‰ˆæœ¬æ˜¯ä¸æ”¯æŒæ³›å‹çš„ï¼Œä¸ºäº†å…¼å®¹ä»¥å‰çš„åº“è€Œä¸å¾—ä¸ä½¿ç”¨æ“¦é™¤æ³•ã€‚</p>\n<p>æ³›å‹ç±»å‹åªæœ‰åœ¨é™æ€ç±»å‹æ£€æŸ¥æœŸé—´æ‰å‡ºç°ï¼Œåœ¨æ­¤ä¹‹åï¼Œç¨‹åºä¸­çš„æ‰€æœ‰æ³›å‹ç±»å‹éƒ½å°†è¢«æ“¦é™¤ï¼Œæ›¿æ¢æˆå®ƒä»¬éæ³›å‹ä¸Šç•Œã€‚</p>\n<p>å¯ä»¥ç®€å•ç†è§£ä¸ºï¼šç±»å‹æ“¦é™¤å³æ˜¯å°† Java æ³›å‹ä»£ç è½¬æ¢ä¸ºæ™®é€š Java ä»£ç ã€‚</p>\n<p>ç±»å‹æ“¦é™¤çš„ä¸»è¦è¿‡ç¨‹ï¼š</p>\n<ol>\n<li>å°†æ‰€æœ‰çš„æ³›å‹å‚æ•°ç”¨å…¶æœ€å·¦è¾¹ç•Œï¼ˆæœ€é¡¶çº§çš„çˆ¶ç±»å‹ï¼‰ç±»å‹æ›¿æ¢ã€‚</li>\n<li>ç§»é™¤æ‰€æœ‰çš„ç±»å‹å‚æ•°ã€‚</li>\n</ol>\n<h4 id=\"æ³›å‹ä¸­çš„ktveobject\"><a class=\"anchor\" href=\"#æ³›å‹ä¸­çš„ktveobject\">#</a> æ³›å‹ä¸­çš„ KTVE?object</h4>\n<ul>\n<li>K ä»£è¡¨ Key çš„æ„æ€ã€‚</li>\n<li>T ä»£è¡¨ä¸€èˆ¬çš„ä»»ä½•ç±»ã€‚</li>\n<li>V ä»£è¡¨ Value çš„æ„æ€ï¼Œé€šå¸¸ä¸ K ä¸€èµ·é…åˆä½¿ç”¨ã€‚</li>\n<li>E ä»£è¡¨ Element çš„æ„æ€ï¼Œæˆ–è€… Exception å¼‚å¸¸çš„æ„æ€ã€‚</li>\n<li>? é€šé…ç¬¦ï¼Œ ä»£è¡¨æŸç§ç¡®å®šçš„ç±»å‹ï¼Œä½†æ˜¯åˆæœ‰ä¸ç¡®å®šæ€§ã€‚ æ¯”å¦‚  <code>&lt;? extends Collection&gt;</code>  ä¸ç¡®å®šç±»å‹ï¼Œç¡®å®šå®ç°äº† Collection æ¥å£ã€‚èƒ½ç¡®å®šä¸Šé™ï¼Œæˆ–ç¡®å®šä¸‹é™ã€‚</li>\n<li>object è¶…ç±»ï¼Œéœ€è¦å¼ºåˆ¶ç±»å‹è½¬æ¢ï¼Œç¼–è¯‘æ—¶å¯èƒ½ç±»å‹ä¸ä¸€è‡´å¯¼è‡´æŠ¥é”™ã€‚</li>\n</ul>\n<h4 id=\"é™å®šé€šé…ç¬¦å’Œéé™å®šé€šé…ç¬¦\"><a class=\"anchor\" href=\"#é™å®šé€šé…ç¬¦å’Œéé™å®šé€šé…ç¬¦\">#</a> é™å®šé€šé…ç¬¦å’Œéé™å®šé€šé…ç¬¦</h4>\n<ul>\n<li>\n<p><code>&lt;?&gt;</code>  è¢«ç§°ä¸ºéé™å®šé€šé…ç¬¦ï¼Œå¯ä»¥ç”¨ä»»æ„ç±»å‹æ¥æ›¿ä»£ã€‚</p>\n</li>\n<li>\n<p><code>&lt;? extends T&gt;</code>  è¢«ç§°ä¸ºæœ‰ä¸Šé™çš„é™å®šé€šé…ç¬¦ï¼Œæ³›å‹ç±»å‹å¿…é¡»ä¸º T æˆ– T çš„å­ç±»ã€‚</p>\n<p>extends è¢«ç§°ä¸ºä¸Šç•Œé™å®šç¬¦ã€‚</p>\n</li>\n<li>\n<p><code>&lt;? super T&gt;</code>  è¢«ç§°ä¸ºæœ‰ä¸‹é™çš„é™å®šé€šé…ç¬¦ï¼Œæ³›å‹ç±»å‹å¿…é¡»ä¸º T æˆ– T çš„çˆ¶ç±»ã€‚</p>\n<p>super è¢«ç§°ä¸ºä¸‹ç•Œé™å®šç¬¦ã€‚</p>\n</li>\n</ul>\n<h4 id=\"list-listå’Œlistobject\"><a class=\"anchor\" href=\"#list-listå’Œlistobject\">#</a> Listã€List&lt;?&gt; å’Œ List&lt;Object&gt;</h4>\n<ol>\n<li>\n<p>List&lt;Object&gt; å’Œ List çš„åŒºåˆ«</p>\n<p>åŸå§‹ç±»å‹ List å’Œå¸¦å‚æ•°ç±»å‹  <code>List&lt;Object&gt;</code>  ä¹‹é—´çš„ä¸»è¦åŒºåˆ«æ˜¯ï¼Œåœ¨ç¼–è¯‘æ—¶ç¼–è¯‘å™¨ä¸ä¼šå¯¹åŸå§‹ç±»å‹è¿›è¡Œç±»å‹å®‰å…¨æ£€æŸ¥ï¼Œå´ä¼šå¯¹å¸¦å‚æ•°çš„ç±»å‹è¿›è¡Œæ£€æŸ¥ã€‚å®ƒä»¬ä¹‹é—´çš„ç¬¬äºŒç‚¹åŒºåˆ«æ˜¯ï¼Œä½ å¯ä»¥æŠŠä»»ä½•å¸¦å‚æ•°çš„ç±»å‹ä¼ é€’ç»™åŸå§‹ç±»å‹ Listï¼Œä½†å´ä¸èƒ½æŠŠ List ä¼ é€’ç»™æ¥å—  <code>List&lt;Object&gt;</code>  çš„æ–¹æ³•ï¼Œå› ä¸ºä¼šäº§ç”Ÿç¼–è¯‘é”™è¯¯ã€‚</p>\n</li>\n<li>\n<p>List&lt;Object&gt; å’Œ List&lt;?&gt; çš„åŒºåˆ«</p>\n<p><code>List&lt;?&gt;</code>  æ˜¯ä¸€ä¸ªæœªçŸ¥ç±»å‹çš„ Listï¼Œè€Œ  <code>List&lt;Object&gt;</code>  å…¶å®æ˜¯ä»»æ„ç±»å‹çš„ Listã€‚ä½ å¯ä»¥æŠŠ <code>List&lt;String&gt;</code>  ï¼Œ  <code>List&lt;Integer&gt;</code>  èµ‹å€¼ç»™  <code>List&lt;?&gt;</code>  ï¼Œå´ä¸èƒ½æŠŠ  <code>List&lt;String&gt;</code>  èµ‹å€¼ç»™  <code>List&lt;Object&gt;</code>  ã€‚</p>\n</li>\n</ol>\n<h3 id=\"å•å…ƒæµ‹è¯•\"><a class=\"anchor\" href=\"#å•å…ƒæµ‹è¯•\">#</a> å•å…ƒæµ‹è¯•</h3>\n<blockquote>\n<p>å•å…ƒæµ‹è¯•ï¼ˆunit testingï¼‰ï¼Œæ˜¯æŒ‡å¯¹è½¯ä»¶ä¸­çš„æœ€å°å¯æµ‹è¯•å•å…ƒè¿›è¡Œæ£€æŸ¥å’ŒéªŒè¯ã€‚å¯¹äºå•å…ƒæµ‹è¯•ä¸­å•å…ƒçš„å«ä¹‰ï¼Œä¸€èˆ¬æ¥è¯´ï¼Œè¦æ ¹æ®å®é™…æƒ…å†µå»åˆ¤å®šå…¶å…·ä½“å«ä¹‰ï¼ŒJava é‡Œå•å…ƒæŒ‡ä¸€ä¸ªç±»ï¼Œå›¾å½¢åŒ–çš„è½¯ä»¶ä¸­å¯ä»¥æŒ‡ä¸€ä¸ªçª—å£æˆ–ä¸€ä¸ªèœå•ç­‰ã€‚æ€»çš„æ¥è¯´ï¼Œå•å…ƒå°±æ˜¯äººä¸ºè§„å®šçš„æœ€å°çš„è¢«æµ‹åŠŸèƒ½æ¨¡å—ã€‚å•å…ƒæµ‹è¯•æ˜¯åœ¨è½¯ä»¶å¼€å‘è¿‡ç¨‹ä¸­è¦è¿›è¡Œçš„æœ€ä½çº§åˆ«çš„æµ‹è¯•æ´»åŠ¨ï¼Œè½¯ä»¶çš„ç‹¬ç«‹å•å…ƒå°†åœ¨ä¸ç¨‹åºçš„å…¶ä»–éƒ¨åˆ†ç›¸éš”ç¦»çš„æƒ…å†µä¸‹è¿›è¡Œæµ‹è¯•ã€‚</p>\n<p>quote from <span class=\"exturl\" data-url=\"aHR0cHM6Ly9iYWlrZS5iYWlkdS5jb20vaXRlbS8lRTUlOEQlOTUlRTUlODUlODMlRTYlQjUlOEIlRTglQUYlOTU=\">ç™¾åº¦ç™¾ç§‘_å•å…ƒæµ‹è¯•</span></p>\n</blockquote>\n<p>æ³¨ï¼šæœ¬æ–‡å¯¹å•å…ƒæµ‹è¯•ç›¸å…³å†…å®¹å½’ç±»ä¸ºäº†è§£æ€§çŸ¥è¯†ï¼ˆä½†å…¶å®è¿™éƒ¨åˆ†çŸ¥è¯†ç‚¹åº”ç”¨é¢‘ç‡ä¹Ÿä¸ç®—å¤ªä½ï¼Œæ€»ä¹‹ï¼Œæ ¹æ®ä¸ªäººæƒ…å†µå§ï¼‰ï¼Œè¿™é‡Œä»…ä½œç®€è¦è¯´æ˜ï¼Œå¦‚æœæƒ³è¦äº†è§£æ›´å¤šå†…å®¹ï¼Œå¯ä»¥æŸ¥çœ‹è¿™ä¸€éƒ¨åˆ†æ¨èçš„ç›¸å…³é“¾æ¥ã€‚</p>\n<p>å…³äºå•å…ƒæµ‹è¯•çš„è®¨è®ºï¼Œå¯ä»¥çœ‹è¿™ä¸€ç‰‡çŸ¥ä¹å¸–å­ï¼š<span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuemhpaHUuY29tL3F1ZXN0aW9uLzI4NzI5MjYx\">https://www.zhihu.com/question/28729261</span></p>\n<h4 id=\"junit\"><a class=\"anchor\" href=\"#junit\">#</a> JUnit</h4>\n<p>JUnit æ˜¯ä¸€ä¸ª Java ç¼–ç¨‹è¯­è¨€çš„å•å…ƒæµ‹è¯•æ¡†æ¶ï¼Œæ˜¯æˆªæ­¢ç›®å‰ Java å•å…ƒæµ‹è¯•é¢†åŸŸæœ€æµè¡Œçš„æ¡†æ¶ã€‚</p>\n<p>å…³äº JUnit5 ä»‹ç»ï¼Œå¯ä»¥é˜…è¯»ï¼š<span class=\"exturl\" data-url=\"aHR0cHM6Ly96aHVhbmxhbi56aGlodS5jb20vcC8xMTE3MDY2Mzk=\">https://zhuanlan.zhihu.com/p/111706639</span></p>\n<h4 id=\"mock\"><a class=\"anchor\" href=\"#mock\">#</a> Mock</h4>\n<p>Mock é€šå¸¸æ˜¯æŒ‡ï¼Œåœ¨æµ‹è¯•ä¸€ä¸ªå¯¹è±¡ A æ—¶ï¼Œæˆ‘ä»¬æ„é€ ä¸€äº›å‡çš„å¯¹è±¡æ¥æ¨¡æ‹Ÿä¸ A ä¹‹é—´çš„äº¤äº’ï¼Œè€Œè¿™äº› Mock å¯¹è±¡çš„è¡Œä¸ºæ˜¯æˆ‘ä»¬äº‹å…ˆè®¾å®šä¸”ç¬¦åˆé¢„æœŸã€‚é€šè¿‡è¿™äº› Mock å¯¹è±¡æ¥æµ‹è¯• A åœ¨æ­£å¸¸é€»è¾‘ï¼Œå¼‚å¸¸é€»è¾‘æˆ–å‹åŠ›æƒ…å†µä¸‹å·¥ä½œæ˜¯å¦æ­£å¸¸ã€‚</p>\n<p>å¼•å…¥ Mock æœ€å¤§çš„ä¼˜åŠ¿åœ¨äºï¼šMock çš„è¡Œä¸ºå›ºå®šï¼Œå®ƒç¡®ä¿å½“ä½ è®¿é—®è¯¥ Mock çš„æŸä¸ªæ–¹æ³•æ—¶æ€»æ˜¯èƒ½å¤Ÿè·å¾—ä¸€ä¸ªæ²¡æœ‰ä»»ä½•é€»è¾‘çš„ç›´æ¥å°±è¿”å›çš„é¢„æœŸç»“æœã€‚</p>\n<h4 id=\"mockito\"><a class=\"anchor\" href=\"#mockito\">#</a> Mockito</h4>\n<p>Mockio æ˜¯ä¸€æ¬¾ Java Mock æµ‹è¯•å·¥å…·ã€‚</p>\n<p>å…³äº Mockio ï¼Œå¯ä»¥å‚è€ƒï¼š<span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuY25ibG9ncy5jb20vYm9kaGl0cmVlL3AvOTQ1NjUxNS5odG1s\">https://www.cnblogs.com/bodhitree/p/9456515.html</span></p>\n<h4 id=\"å†…å­˜æ•°æ®åº“h2\"><a class=\"anchor\" href=\"#å†…å­˜æ•°æ®åº“h2\">#</a> å†…å­˜æ•°æ®åº“ï¼ˆh2ï¼‰</h4>\n<p>H2 æ˜¯ä¸€ä¸ªå¼€æºçš„åµŒå…¥å¼ï¼ˆéåµŒå…¥å¼è®¾å¤‡ï¼‰æ•°æ®åº“å¼•æ“ï¼Œå®ƒæ˜¯ä¸€ä¸ªç”¨ Java å¼€å‘çš„ç±»åº“ï¼Œå¯ç›´æ¥åµŒå…¥åˆ°åº”ç”¨ç¨‹åºä¸­ï¼Œä¸åº”ç”¨ç¨‹åºä¸€èµ·æ‰“åŒ…å‘å¸ƒï¼Œä¸å—å¹³å°é™åˆ¶ã€‚</p>\n<p>Java H2 æ•°æ®åº“è¿æ¥ç¤ºä¾‹ï¼š</p>\n<ol>\n<li>\n<p>ä¸‹è½½å¯åŠ¨</p>\n<p>ä¸‹è½½åœ°å€ï¼š<span class=\"exturl\" data-url=\"aHR0cDovL3d3dy5oMmRhdGFiYXNlLmNvbS9odG1sL2Rvd25sb2FkLmh0bWw=\">http://www.h2database.com/html/download.html</span></p>\n<p>è¿è¡Œè„šæœ¬æ–‡ä»¶  <code>h2.bat</code></p>\n</li>\n<li>\n<p>åœ¨æµ‹è¯•é¡¹ç›®ä¸­æ·»åŠ ä¾èµ–</p>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>com.h2database<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>h2<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>version</span><span class=\"token punctuation\">></span></span>1.4.190<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>version</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure></li>\n<li>\n<p>ç¼–å†™æµ‹è¯•æ–‡ä»¶</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>h2<span class=\"token punctuation\">.</span>tools<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Server</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>sql<span class=\"token punctuation\">.</span></span><span class=\"token operator\">*</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">H2Demo</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Server</span> server<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> port <span class=\"token operator\">=</span> <span class=\"token string\">\"8082\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> dbDir <span class=\"token operator\">=</span> <span class=\"token string\">\"jdbc:h2:tcp://192.168.0.36/~/test\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> user <span class=\"token operator\">=</span> <span class=\"token string\">\"sa\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> password <span class=\"token operator\">=</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">startServer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token keyword\">try</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"æ­£åœ¨å¯åŠ¨h2...\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>            server <span class=\"token operator\">=</span> <span class=\"token class-name\">Server</span><span class=\"token punctuation\">.</span><span class=\"token function\">createTcpServer</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">&#123;</span><span class=\"token string\">\"-tcpPort\"</span><span class=\"token punctuation\">,</span> port<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">SQLException</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"å¯åŠ¨h2å‡ºé”™ï¼š\"</span> <span class=\"token operator\">+</span> e<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>            e<span class=\"token punctuation\">.</span><span class=\"token function\">printStackTrace</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>            <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">RuntimeException</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">stopServer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>server <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"æ­£åœ¨å…³é—­h2...\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>            server<span class=\"token punctuation\">.</span><span class=\"token function\">stop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"å…³é—­æˆåŠŸ.\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">useH2</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>        <span class=\"token keyword\">try</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>            <span class=\"token class-name\">Class</span><span class=\"token punctuation\">.</span><span class=\"token function\">forName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"org.h2.Driver\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>            <span class=\"token class-name\">Connection</span> conn <span class=\"token operator\">=</span> <span class=\"token class-name\">DriverManager</span><span class=\"token punctuation\">.</span><span class=\"token function\">getConnection</span><span class=\"token punctuation\">(</span>dbDir<span class=\"token punctuation\">,</span> user<span class=\"token punctuation\">,</span> password<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>            <span class=\"token class-name\">Statement</span> stat <span class=\"token operator\">=</span> conn<span class=\"token punctuation\">.</span><span class=\"token function\">createStatement</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>            <span class=\"token comment\">// insert data</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre><span class=\"token comment\">//            stat.execute(\"CREATE TABLE TEST(NAME VARCHAR)\");</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>            stat<span class=\"token punctuation\">.</span><span class=\"token function\">execute</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"INSERT INTO TEST VALUES('Hello World')\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>            <span class=\"token comment\">// use data</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>            <span class=\"token class-name\">ResultSet</span> result <span class=\"token operator\">=</span> stat<span class=\"token punctuation\">.</span><span class=\"token function\">executeQuery</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"select name from test \"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>            <span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>            <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">.</span><span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>                <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>i<span class=\"token operator\">++</span> <span class=\"token operator\">+</span> <span class=\"token string\">\":\"</span> <span class=\"token operator\">+</span> result<span class=\"token punctuation\">.</span><span class=\"token function\">getString</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"name\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre>            result<span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre>            stat<span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre>            conn<span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Exception</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre>            e<span class=\"token punctuation\">.</span><span class=\"token function\">printStackTrace</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"51\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"52\"></td><td><pre></pre></td></tr><tr><td data-num=\"53\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"54\"></td><td><pre>        <span class=\"token class-name\">H2Demo</span> h2 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">H2Demo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"55\"></td><td><pre><span class=\"token comment\">//        h2.startServer();</span></pre></td></tr><tr><td data-num=\"56\"></td><td><pre>        h2<span class=\"token punctuation\">.</span><span class=\"token function\">useH2</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"57\"></td><td><pre><span class=\"token comment\">//        h2.stopServer();</span></pre></td></tr><tr><td data-num=\"58\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"==END==\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"59\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"60\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure></li>\n</ol>\n<h3 id=\"æ­£åˆ™è¡¨è¾¾å¼\"><a class=\"anchor\" href=\"#æ­£åˆ™è¡¨è¾¾å¼\">#</a> æ­£åˆ™è¡¨è¾¾å¼</h3>\n<p>æ­£åˆ™è¡¨è¾¾å¼æè¿°äº†ä¸€ç§å­—ç¬¦ä¸²åŒ¹é…çš„æ¨¡å¼ï¼Œå¯ä»¥ç”¨æ¥æ£€æŸ¥ä¸€ä¸ªä¸²æ˜¯å¦å«æœ‰æŸç§å­ä¸²ã€å°†åŒ¹é…çš„å­ä¸²æ›¿æ¢æˆ–è€…ä»æŸä¸ªä¸²ä¸­å–å‡ºç¬¦åˆæŸä¸ªæ¡ä»¶çš„å­ä¸²ç­‰ã€‚</p>\n<p>æ­£åˆ™è¡¨è¾¾å¼åœ¨çº¿å·¥å…·ï¼š</p>\n<ul>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9jLnJ1bm9vYi5jb20vZnJvbnQtZW5kLzg1NA==\">https://c.runoob.com/front-end/854</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cDovL3Rvb2wuY2hpbmF6LmNvbS9yZWdleA==\">http://tool.chinaz.com/regex</span></li>\n</ul>\n<h3 id=\"å¸¸ç”¨çš„javaå·¥å…·åº“\"><a class=\"anchor\" href=\"#å¸¸ç”¨çš„javaå·¥å…·åº“\">#</a> å¸¸ç”¨çš„ Java å·¥å…·åº“</h3>\n<h4 id=\"commonslang\"><a class=\"anchor\" href=\"#commonslang\">#</a> commons.lang</h4>\n<p>åœ¨  <code>org.apache.commons.lang</code>  åŒ…ä¸­æä¾›äº†ä¸€äº›æœ‰ç”¨çš„åŒ…å« static æ–¹æ³•çš„ Util ç±»ã€‚é™¤äº† 6 ä¸ª Exception ç±»å’Œ 2 ä¸ªå·²ç» deprecated çš„æ•°å­—ç±»ä¹‹å¤–ï¼Œcommons.lang åŒ…å…±åŒ…å«äº† 17 ä¸ªå®ç”¨çš„ç±»ï¼š</p>\n<ul>\n<li>ArrayUtils â€“ ç”¨äºå¯¹æ•°ç»„çš„æ“ä½œï¼Œå¦‚æ·»åŠ ã€æŸ¥æ‰¾ã€åˆ é™¤ã€å­æ•°ç»„ã€å€’åºã€å…ƒç´ ç±»å‹è½¬æ¢ç­‰ï¼›</li>\n<li>BitField â€“ ç”¨äºæ“ä½œä½å…ƒï¼Œæä¾›äº†ä¸€äº›æ–¹ä¾¿è€Œå®‰å…¨çš„æ–¹æ³•ï¼›</li>\n<li>BooleanUtils â€“ ç”¨äºæ“ä½œå’Œè½¬æ¢ boolean æˆ–è€… Boolean åŠç›¸åº”çš„æ•°ç»„ï¼›</li>\n<li>CharEncoding â€“ åŒ…å«äº† Java ç¯å¢ƒæ”¯æŒçš„å­—ç¬¦ç¼–ç ï¼Œæä¾›æ˜¯å¦æ”¯æŒæŸç§ç¼–ç çš„åˆ¤æ–­ï¼›</li>\n<li>CharRange â€“ ç”¨äºè®¾å®šå­—ç¬¦èŒƒå›´å¹¶åšç›¸åº”æ£€æŸ¥ï¼›</li>\n<li>CharSet â€“ ç”¨äºè®¾å®šä¸€ç»„å­—ç¬¦ä½œä¸ºèŒƒå›´å¹¶åšç›¸åº”æ£€æŸ¥ï¼›</li>\n<li>CharSetUtils â€“ ç”¨äºæ“ä½œ CharSetï¼›</li>\n<li>CharUtils â€“ ç”¨äºæ“ä½œ char å€¼å’Œ Character å¯¹è±¡ï¼›</li>\n<li>ClassUtils â€“ ç”¨äºå¯¹ Java ç±»çš„æ“ä½œï¼Œä¸ä½¿ç”¨åå°„ï¼›</li>\n<li>ObjectUtils â€“ ç”¨äºæ“ä½œ Java å¯¹è±¡ï¼Œæä¾› null å®‰å…¨çš„è®¿é—®å’Œå…¶ä»–ä¸€äº›åŠŸèƒ½ï¼›</li>\n<li>RandomStringUtils â€“ ç”¨äºç”Ÿæˆéšæœºçš„å­—ç¬¦ä¸²ï¼›</li>\n<li>SerializationUtils â€“ ç”¨äºå¤„ç†å¯¹è±¡åºåˆ—åŒ–ï¼Œæä¾›æ¯”ä¸€èˆ¬ Java åºåˆ—åŒ–æ›´é«˜çº§çš„å¤„ç†èƒ½åŠ›ï¼›</li>\n<li>StringEscapeUtils â€“ ç”¨äºæ­£ç¡®å¤„ç†è½¬ä¹‰å­—ç¬¦ï¼Œäº§ç”Ÿæ­£ç¡®çš„ Javaã€JavaScriptã€HTMLã€XML å’Œ SQL ä»£ç ï¼›</li>\n<li>StringUtils â€“ å¤„ç† String çš„æ ¸å¿ƒç±»ï¼Œæä¾›äº†ç›¸å½“å¤šçš„åŠŸèƒ½ï¼›</li>\n<li>SystemUtils â€“ åœ¨ java.lang.System åŸºç¡€ä¸Šæä¾›æ›´æ–¹ä¾¿çš„è®¿é—®ï¼Œå¦‚ç”¨æˆ·è·¯å¾„ã€Java ç‰ˆæœ¬ã€æ—¶åŒºã€æ“ä½œç³»ç»Ÿç­‰åˆ¤æ–­ï¼›</li>\n<li>Validate â€“ æä¾›éªŒè¯çš„æ“ä½œï¼Œæœ‰ç‚¹ç±»ä¼¼ assert æ–­è¨€ï¼›</li>\n<li>WordUtils â€“ ç”¨äºå¤„ç†å•è¯å¤§å°å†™ã€æ¢è¡Œç­‰ã€‚</li>\n</ul>\n<blockquote>\n<p>é€‰æ‹©è®°ä½ä¸€äº›å¸¸ç”¨çš„å°±è¡Œã€‚</p>\n</blockquote>\n<h4 id=\"guava-libraries\"><a class=\"anchor\" href=\"#guava-libraries\">#</a> guava-libraries</h4>\n<p>Guava-Libraries æ˜¯ä¸€å¥—æ¥è‡ª Google çš„æ ¸å¿ƒ Java åº“ï¼Œå…¶ä¸­åŒ…æ‹¬æ–°çš„é›†åˆç±»å‹ï¼ˆå¦‚ multimap å’Œ multisetï¼‰ã€ä¸å¯å˜çš„é›†åˆã€å›¾åº“ï¼Œä»¥åŠå¹¶å‘ã€I/Oã€æ•£åˆ—ã€ç¼“å­˜ã€åŸºå…ƒã€å­—ç¬¦ä¸²ç­‰å®ç”¨å·¥å…·ï¼å®ƒè¢«å¹¿æ³›ç”¨äº Google å†…éƒ¨çš„å¤§å¤šæ•° Java é¡¹ç›®ï¼Œä¹Ÿè¢«è®¸å¤šå…¶ä»–å…¬å¸å¹¿æ³›ä½¿ç”¨ã€‚</p>\n<p>Guava çš„å¥½å¤„ï¼š</p>\n<ul>\n<li>æ ‡å‡†åŒ– - Guava åº“æ˜¯ç”±è°·æ­Œæ‰˜ç®¡ã€‚</li>\n<li>é«˜æ•ˆ - å¯é ï¼Œå¿«é€Ÿå’Œæœ‰æ•ˆçš„æ‰©å±• JAVA æ ‡å‡†åº“</li>\n<li>ä¼˜åŒ– - Guava åº“ç»è¿‡é«˜åº¦çš„ä¼˜åŒ–ã€‚</li>\n<li>å‡½æ•°å¼ç¼–ç¨‹ - å¢åŠ  JAVA åŠŸèƒ½å’Œå¤„ç†èƒ½åŠ›ã€‚</li>\n<li>å®ç”¨ç¨‹åº - æä¾›äº†ç»å¸¸éœ€è¦åœ¨åº”ç”¨ç¨‹åºå¼€å‘çš„è®¸å¤šå®ç”¨ç¨‹åºç±»ã€‚</li>\n<li>éªŒè¯ - æä¾›æ ‡å‡†çš„æ•…éšœå®‰å…¨éªŒè¯æœºåˆ¶ã€‚</li>\n<li>æœ€ä½³å®è·µ - å¼ºè°ƒæœ€ä½³çš„åšæ³•ã€‚</li>\n</ul>\n<p>æœ¬éƒ¨åˆ†å†…å®¹å‚è€ƒè‡ªï¼š<span class=\"exturl\" data-url=\"aHR0cHM6Ly9tdWxhbm9zLm9zY2hpbmEubmV0L3AvZ3VhdmE=\">https://mulanos.oschina.net/p/guava</span></p>\n<h4 id=\"netty-2\"><a class=\"anchor\" href=\"#netty-2\">#</a> netty</h4>\n<p><span class=\"label danger\">â—ï¸TODO</span> å¾…å®Œå–„</p>\n<h3 id=\"api-spi\"><a class=\"anchor\" href=\"#api-spi\">#</a> API &amp; SPI</h3>\n<h4 id=\"api\"><a class=\"anchor\" href=\"#api\">#</a> API</h4>\n<blockquote>\n<p>APIï¼ˆApplication Programming Interfaceï¼Œåº”ç”¨ç¨‹åºæ¥å£ï¼‰æ˜¯ä¸€äº›é¢„å…ˆå®šä¹‰çš„æ¥å£ï¼ˆå¦‚å‡½æ•°ã€HTTP æ¥å£ï¼‰ï¼Œæˆ–æŒ‡è½¯ä»¶ç³»ç»Ÿä¸åŒç»„æˆéƒ¨åˆ†è¡”æ¥çš„çº¦å®šã€‚ç”¨æ¥æä¾›åº”ç”¨ç¨‹åºä¸å¼€å‘äººå‘˜åŸºäºæŸè½¯ä»¶æˆ–ç¡¬ä»¶å¾—ä»¥è®¿é—®çš„ä¸€ç»„ä¾‹ç¨‹ï¼Œè€Œåˆæ— éœ€è®¿é—®æºç ï¼Œæˆ–ç†è§£å†…éƒ¨å·¥ä½œæœºåˆ¶çš„ç»†èŠ‚ã€‚</p>\n<p>quote from <span class=\"exturl\" data-url=\"aHR0cHM6Ly9iYWlrZS5iYWlkdS5jb20vaXRlbS9BUEk=\">ç™¾åº¦ç™¾ç§‘_API</span></p>\n</blockquote>\n<h4 id=\"spi\"><a class=\"anchor\" href=\"#spi\">#</a> SPI</h4>\n<p>SPI å…¨ç§° Service Provider Interfaceï¼Œæ˜¯ Java æä¾›çš„ä¸€å¥—ç”¨æ¥è¢«ç¬¬ä¸‰æ–¹å®ç°æˆ–è€…æ‰©å±•çš„ APIï¼Œå®ƒå¯ä»¥ç”¨æ¥å¯ç”¨æ¡†æ¶æ‰©å±•å’Œæ›¿æ¢ç»„ä»¶ã€‚</p>\n<p>å¦‚ä½•å®šä¹‰ SPI åŠ SPI çš„å®ç°åŸç†ï¼Œå‚è€ƒï¼š<span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuY25ibG9ncy5jb20vb3NreWhnL3AvMTA4MDAwNTEuaHRtbA==\">https://www.cnblogs.com/oskyhg/p/10800051.html</span></p>\n<h4 id=\"apiä¸spiçš„å…³ç³»å’ŒåŒºåˆ«\"><a class=\"anchor\" href=\"#apiä¸spiçš„å…³ç³»å’ŒåŒºåˆ«\">#</a> API ä¸ SPI çš„å…³ç³»å’ŒåŒºåˆ«</h4>\n<p>API æè¿°çš„æ˜¯å¯ä»¥ç›´æ¥ä½¿ç”¨çš„æ–¹æ³•ï¼Œè¾¾åˆ°æŸç§åŠŸèƒ½çš„å®ç°ã€‚å¯ä»¥ç®€å•çš„ç†è§£ä¸ºæœåŠ¡æ–¹æš´éœ²è‡ªå·±çš„æœåŠ¡ä¾›å®¢æˆ·æ–¹è°ƒç”¨ã€‚æ¯”å¦‚ Java çš„ api æ–‡æ¡£ï¼ŒæœåŠ¡æ–¹æ˜¯ JDKï¼Œå®¢æˆ·æ–¹å°±æ˜¯ Java å¼€å‘äººå‘˜ã€‚API ç”±å¼€å‘äººå‘˜è°ƒç”¨ã€‚</p>\n<p>SPIï¼šæœåŠ¡æ–¹æä¾›çš„ä¸åœ¨æ˜¯æä¾›å…·ä½“çš„æ–¹æ³•ï¼Œè€Œæ˜¯æä¾›å¯¹è±¡çš„æ¥å£ï¼Œå®¢æˆ·æ–¹éœ€è¦å®ç°æ¥å£ï¼Œ ç„¶åæœåŠ¡æ–¹è°ƒç”¨å®¢æˆ·æ–¹çš„æ¥å£å®ç°ç±»ï¼Œå†æ¥å®ç°å®¢æˆ·çš„æŸç§åŠŸèƒ½ã€‚SPI æ˜¯æ¡†æ¶æ¥å£è§„èŒƒï¼Œéœ€è¦æ¡†æ¶å¼€å‘äººå‘˜å®ç°ã€‚</p>\n<p>ä½†æœ‰æ—¶å€™ï¼ŒAPI å’Œ SPI æ˜¯åˆ†ä¸æ¸…çš„ï¼Œæ¯”å¦‚ Connection æ¥å£ï¼ŒDriver æ¥å£ç­‰ã€‚</p>\n<h3 id=\"å¼‚å¸¸\"><a class=\"anchor\" href=\"#å¼‚å¸¸\">#</a> å¼‚å¸¸</h3>\n<h4 id=\"å¼‚å¸¸ç±»å‹\"><a class=\"anchor\" href=\"#å¼‚å¸¸ç±»å‹\">#</a> å¼‚å¸¸ç±»å‹</h4>\n<p><img data-src=\"http://image.mamicode.com/info/201904/20190426211659356277.png\" alt=\"å¼‚å¸¸åˆ†ç±»ç»“æ„å›¾\" /></p>\n<p>ä¸Šå›¾ç®€è¦å±•ç¤ºäº†å¼‚å¸¸ç±»å®ç°çš„ç»“æ„å›¾ï¼ˆå¹¶éå…¨éƒ¨ï¼‰ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œç”¨æˆ·ä¹Ÿå¯ä»¥è‡ªå®šä¹‰å¼‚å¸¸å®ç°ã€‚</p>\n<ol>\n<li>Throwable æ˜¯ Java å¼‚å¸¸çš„æ ¹ç±»ï¼Œæ‰€æœ‰çš„å¼‚å¸¸éƒ½æ˜¯ä» Throwable ç»§æ‰¿è€Œæ¥çš„ã€‚</li>\n<li>Throwable æœ‰ä¸¤ä¸ªå­ç±»ï¼ŒError å’Œ Exceptionã€‚</li>\n</ol>\n<h4 id=\"æ­£ç¡®å¤„ç†å¼‚å¸¸\"><a class=\"anchor\" href=\"#æ­£ç¡®å¤„ç†å¼‚å¸¸\">#</a> æ­£ç¡®å¤„ç†å¼‚å¸¸</h4>\n<p>ä»£ç ä¸­çš„å¼‚å¸¸å¤„ç†å…¶å®æ˜¯å¯¹å¯æ£€æŸ¥å¼‚å¸¸çš„å¤„ç†ï¼Œä¸»è¦æœ‰ä»¥ä¸‹å‡ ä¸ªè¦ç‚¹ï¼š</p>\n<ol>\n<li>\n<p>é€šè¿‡  <code>try&#123;&#125;catch()&#123;&#125;</code>  è¯­å¥å—å¤„ç†å¼‚å¸¸ã€‚</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">try</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token comment\">// å¯èƒ½å‡ºç°å¼‚å¸¸çš„ç¨‹åºä»£ç </span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">catch</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">ExceptionName</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token comment\">// æ•è·å¼‚å¸¸åçš„å¤„ç†</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure></li>\n<li>\n<p>é€šè¿‡  <code>throw/throws</code>  æŠ›å‡ºå¼‚å¸¸äº¤ç”±ä¸Šå±‚å¤„ç†ã€‚</p>\n<p>é™¤äº†åŠæ—¶æ•è·å¹¶å¤„ç†å¼‚å¸¸å¤–ï¼Œç¨‹åºä¹Ÿå¯ä»¥é€‰æ‹©æš‚ä¸å¤„ç†ï¼Œè€Œæ˜¯äº¤ç»™ä¸Šä¸€å±‚ï¼Œä½†å¿…é¡»ä¿è¯æŸä¸€å±‚ä»£ç è¦å¤„ç†è¯¥å¼‚å¸¸ã€‚</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Test</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        <span class=\"token keyword\">try</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>            <span class=\"token keyword\">int</span> result <span class=\"token operator\">=</span> <span class=\"token function\">divide</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">ArithmeticException</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"---------- method divide() exception ----------\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>            e<span class=\"token punctuation\">.</span><span class=\"token function\">printStackTrace</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">int</span> <span class=\"token function\">divide</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> numerator<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> denominator<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">ArithmeticException</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token keyword\">return</span> numerator <span class=\"token operator\">/</span> denominator<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure></li>\n<li>\n<p>å…³é”®å­—  <code>finally</code>  çš„ä½¿ç”¨ã€‚</p>\n<p>finally å…³é”®å­—ç”¨æ¥åˆ›å»ºåœ¨ try ä»£ç å—åé¢æ‰§è¡Œçš„ä»£ç å—ï¼Œæ— è®ºæ˜¯å¦å‘ç”Ÿå¼‚å¸¸ï¼Œfinally ä»£ç å—ä¸­çš„ä»£ç æ€»ä¼šè¢«æ‰§è¡Œã€‚åœ¨ finally ä»£ç å—ä¸­ï¼Œå°ç”¨äºè¿è¡Œæ¸…ç†ç±»å‹ç­‰æ”¶å°¾å–„åæ€§è´¨çš„è¯­å¥ã€‚</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>tyr <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token comment\">// å¯èƒ½å‡ºç°å¼‚å¸¸çš„ç¨‹åºä»£ç </span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">catch</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">ExceptionName</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token comment\">// æ•è·å¼‚å¸¸åçš„å¤„ç†</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">finally</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token comment\">// æ— è®ºæ˜¯å¦å‡ºç°å¼‚å¸¸ï¼Œéƒ½éœ€è¦æ‰§è¡Œçš„ä»£ç </span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure></li>\n</ol>\n<h4 id=\"è‡ªå®šä¹‰å¼‚å¸¸\"><a class=\"anchor\" href=\"#è‡ªå®šä¹‰å¼‚å¸¸\">#</a> è‡ªå®šä¹‰å¼‚å¸¸</h4>\n<p>åœ¨ Java ä¸­è¦æƒ³åˆ›å»ºè‡ªå®šä¹‰å¼‚å¸¸ï¼Œéœ€è¦ç»§æ‰¿ Throwable æˆ–è€…ä»–çš„å­ç±» Exceptionã€‚</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">MyBusinessException</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Exception</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token comment\">// æ ¹æ®éœ€è¦é‡å†™æ„é€ æ–¹æ³•åŠå¼‚å¸¸å¤„ç†å†…éƒ¨é€»è¾‘</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    </pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">MyBusinessException</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">MyBusinessException</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> message<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">MyBusinessException</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> message<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Throwable</span> cause<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">,</span> cause<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">MyBusinessException</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Throwable</span> cause<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>cause<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h4 id=\"error-å’Œ-exception\"><a class=\"anchor\" href=\"#error-å’Œ-exception\">#</a> Error å’Œ Exception</h4>\n<p>Error æ˜¯ç¨‹åºæ— æ³•å¤„ç†çš„é”™è¯¯ï¼Œè¡¨ç¤ºè¿è¡Œç¨‹åºä¸­è¾ƒä¸¥é‡çš„é—®é¢˜ï¼Œå®ƒä»¬åœ¨åº”ç”¨ç¨‹åºæ§åˆ¶å’Œå¤„ç†èŒƒå›´ä¹‹å¤–ï¼Œè€Œä¸”ç»å¤§å¤šæ•°æ˜¯ç¨‹åºè¿è¡Œæ—¶ä¸å…è®¸å‡ºç°çš„çŠ¶å†µï¼ˆæ˜¯å¤„ç†ä¸åˆ°çš„ï¼‰ï¼Œå¯¹äºè®¾è®¡åˆç†çš„åº”ç”¨ç¨‹åºï¼Œå³ä½¿ç¡®å®å‘ç”Ÿäº†é”™è¯¯ï¼Œæœ¬è´¨ä¹Ÿä¸åº”è¯¥è¯•å›¾å»å¤„ç†å®ƒæ‰€å¼•èµ·çš„å¼‚å¸¸çŠ¶å†µã€‚</p>\n<p>Exception æ˜¯ç¨‹åºæœ¬èº«å¯ä»¥å¤„ç†çš„å¼‚å¸¸ã€‚å¼‚å¸¸å¤„ç†é€šå¸¸æŒ‡é’ˆå¯¹è¿™ç§ç±»å‹å¼‚å¸¸å¤„ç†ï¼ŒåŒ…æ‹¬éæ£€æŸ¥å¼‚å¸¸ï¼ˆç¼–è¯‘å™¨ä¸è¦æ±‚å¼ºåˆ¶å¤„ç†çš„å¼‚å¸¸ï¼‰å’Œæ£€æŸ¥å¼‚å¸¸ï¼ˆç¼–è¯‘å™¨è¦æ±‚å¤„ç†çš„å¼‚å¸¸ï¼‰ã€‚</p>\n<ul>\n<li>\n<p>Checked Exception</p>\n<p>æ‰€æœ‰å¯æ£€æŸ¥çš„å¼‚å¸¸éƒ½æ˜¯éœ€è¦åœ¨ä»£ç ä¸­å¤„ç†çš„ã€‚å®ƒä»¬çš„å‘ç”Ÿæ˜¯å¯ä»¥é¢„æµ‹çš„ï¼Œæ­£å¸¸çš„ä¸€ç§æƒ…å†µï¼Œå¯ä»¥åˆç†çš„å¤„ç†ã€‚é™¤äº† RuntimeException åŠå…¶å­ç±»ä»¥å¤–ï¼Œéƒ½æ˜¯å¯æ£€æŸ¥çš„å¼‚å¸¸ã€‚</p>\n</li>\n<li>\n<p>Unchecked Exception</p>\n<p>RuntimeException åŠå…¶å­ç±»éƒ½æ˜¯éæ£€æŸ¥å¼‚å¸¸ã€‚æ¯”å¦‚ NPE ç©ºæŒ‡é’ˆå¼‚å¸¸ï¼Œé™¤æ•°ä¸º 0 çš„ç®—æ•°å¼‚å¸¸ ArithmeticException ç­‰ç­‰ï¼Œè¿™ç§å¼‚å¸¸æ˜¯è¿è¡Œæ—¶å‘ç”Ÿï¼Œæ— æ³•é¢„å…ˆæ•æ‰å¤„ç†çš„ã€‚</p>\n</li>\n</ul>\n<h4 id=\"å¼‚å¸¸é“¾\"><a class=\"anchor\" href=\"#å¼‚å¸¸é“¾\">#</a> å¼‚å¸¸é“¾</h4>\n<p>å½“ A æ–¹æ³•è°ƒç”¨ B æ–¹æ³•æ—¶ï¼ŒB æ–¹æ³•æŠ›å‡ºå¼‚å¸¸ï¼Œè€Œ A æ–¹æ³•æœŸæœ›æŠ›å‡ºä¸€ä¸ªæ–°çš„å¼‚å¸¸ï¼Œè¿™æ—¶åˆ™ä¼šç”¨åˆ°å¼‚å¸¸é“¾è¿›è¡Œå¤„ç†ã€‚</p>\n<p>å¼‚å¸¸é“¾ç¤ºä¾‹ï¼š</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">ExceptionChainTest</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token comment\">/**</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>     * paly () æŠ›å‡ºã€ä½ æœªéµå®ˆå…¬å¸è§„å®šã€‘çš„å¼‚å¸¸</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>     * work () è°ƒç”¨ paly ()ï¼Œæ•è·ã€ä½ åœ¨ç©æ‰‹æœºã€‘çš„å¼‚å¸¸ï¼Œå¹¶ä¸”åŒ…è£…æˆè¿è¡Œæ—¶å¼‚å¸¸ï¼Œç»§ç»­æŠ›å‡º</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>     * main () è°ƒç”¨ work ()ï¼Œå°è¯•æ•è· work () æ–¹æ³•æŠ›å‡ºçš„å¼‚å¸¸</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>     */</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token class-name\">ExceptionChainTest</span> ct <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ExceptionChainTest</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token keyword\">try</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>            ct<span class=\"token punctuation\">.</span><span class=\"token function\">work</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Exception</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>            e<span class=\"token punctuation\">.</span><span class=\"token function\">printStackTrace</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">work</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        <span class=\"token keyword\">try</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>            <span class=\"token function\">paly</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">BusinessException</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>            <span class=\"token class-name\">RuntimeException</span> newExc <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">RuntimeException</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"----> Please comply with company regulations\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>            newExc<span class=\"token punctuation\">.</span><span class=\"token function\">initCause</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>            <span class=\"token keyword\">throw</span> newExc<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">paly</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">BusinessException</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>        <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">BusinessException</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"----> Exception: Do not play mobile phones during working hours!\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>    <span class=\"token keyword\">class</span> <span class=\"token class-name\">BusinessException</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Exception</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>        <span class=\"token keyword\">public</span> <span class=\"token class-name\">BusinessException</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> message<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>            <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h4 id=\"try-with-resource\"><a class=\"anchor\" href=\"#try-with-resource\">#</a> try-with-resource</h4>\n<p><code>try-with-resource</code>  æ˜¯ jdk1.7 å¼•å…¥çš„è¯­æ³•ç³–ï¼Œå®ƒä½¿å¾—å…³é—­èµ„æºæ“ä½œæ— éœ€å±‚å±‚åµŒå¥—åœ¨ finallyã€‚è¦ä½¿ç”¨  <code>try-with-resource</code>  ï¼Œå¿…é¡»å…ˆå®ç° AutoCloseable æ¥å£ï¼Œå…¶ä¸­åŒ…å«äº†ä¸€ä¸ªæ— è¿”å›å€¼çš„ close æ–¹æ³•ï¼ŒJava ä¸ç¬¬ä¸‰æ–¹è®¸å¤šç±»å’Œæ¥å£ï¼Œå‡å®ç°æˆ–æ‰©å±•äº† AutoCloseable æ¥å£ï¼Œå› æ­¤å¼€å‘æ—¶ä¸éœ€è¦æ˜¾ç¤ºåœ°é‡å¤å£°æ˜å®ç°ã€‚</p>\n<p>ä¾‹å¦‚ä¸€æ®µå®ç°æ–‡ä»¶æ‹·è´çš„ä»£ç ï¼š</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">TryWithResourceTest</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        <span class=\"token keyword\">try</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>            <span class=\"token class-name\">BufferedInputStream</span> bis <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">BufferedInputStream</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">FileInputStream</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">File</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"in.txt\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>            <span class=\"token class-name\">BufferedOutputStream</span> bos <span class=\"token operator\">=</span> <span class=\"token class-name\">BufferedOutputStream</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">FileOutputStream</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">File</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"out.txt\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>            <span class=\"token keyword\">int</span> b<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>            <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>b <span class=\"token operator\">=</span> bis<span class=\"token punctuation\">.</span><span class=\"token function\">read</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">!=</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>                bos<span class=\"token punctuation\">.</span><span class=\"token function\">write</span><span class=\"token punctuation\">(</span>b<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">catch</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">IOException</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>            e<span class=\"token punctuation\">.</span><span class=\"token function\">printStackTrace</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><blockquote>\n<p>æ³¨ï¼šä½¿ç”¨ try-with-resource æ—¶ï¼Œä¸éœ€è¦æ‰‹åŠ¨å…³é—­èµ„æºã€‚è€Œäº‹å®ä¸Šï¼Œå®ƒåªæ˜¯ä¸€ç§è¯­æ³•ç³–ï¼Œç¨‹åºåœ¨ç¼–è¯‘æ—¶ï¼Œä¼šè¿˜åŸå‡ºçœŸæ­£çš„åŒ…å«æœ‰ finally å…³é—­èµ„æºç›¸å…³é€»è¾‘çš„ä»£ç å—ã€‚</p>\n</blockquote>\n<h4 id=\"finallyå’Œreturnçš„æ‰§è¡Œé¡ºåº\"><a class=\"anchor\" href=\"#finallyå’Œreturnçš„æ‰§è¡Œé¡ºåº\">#</a> finally å’Œ return çš„æ‰§è¡Œé¡ºåº</h4>\n<p>å¦‚æœ try ä¸­æœ‰ return è¯­å¥ï¼Œ é‚£ä¹ˆ finally ä¸­çš„ä»£ç è¿˜æ˜¯ä¼šæ‰§â¾ã€‚å› ä¸º return è¡¨â½°çš„æ˜¯è¦æ•´ä¸ªâ½…æ³•ä½“è¿”å›ï¼Œ æ‰€ä»¥ï¼Œ<mark>finally ä¸­çš„è¯­å¥ä¼šåœ¨ return ä¹‹å‰æ‰§â¾</mark>ã€‚</p>\n<p>ä½†æ˜¯ï¼Œåœ¨ return å‰æ‰§è¡Œçš„ finally å—ä¸­å¯¹æ•°æ®è¿›è¡Œæ›´æ–°çš„æ•ˆæœï¼Œä¼šå› ä¸ºå¼•ç”¨ç±»å‹å’Œå€¼ç±»å‹è€Œä¸åŒã€‚</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Test</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token function\">test1</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">// 0</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token function\">test2</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">// 1</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">int</span> <span class=\"token function\">test1</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token keyword\">int</span> a <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token keyword\">try</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>            <span class=\"token keyword\">return</span> a<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Exception</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>            e<span class=\"token punctuation\">.</span><span class=\"token function\">printStackTrace</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">finally</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>            a<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span><span class=\"token comment\">// æ“ä½œå¼•ç”¨ç±»å‹ï¼ˆæ— æ•ˆï¼‰</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        <span class=\"token keyword\">return</span> a<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">int</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token function\">test2</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>        <span class=\"token keyword\">int</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> arr <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token keyword\">int</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">&#123;</span><span class=\"token number\">0</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>        <span class=\"token keyword\">try</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>            <span class=\"token keyword\">return</span> arr<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">finally</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>            arr<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token operator\">++</span><span class=\"token punctuation\">;</span><span class=\"token comment\">// æ“ä½œå€¼ç±»å‹ï¼ˆæœ‰æ•ˆï¼‰</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h3 id=\"æ—¶é—´å¤„ç†\"><a class=\"anchor\" href=\"#æ—¶é—´å¤„ç†\">#</a> æ—¶é—´å¤„ç†</h3>\n<h4 id=\"æ—¶åŒº\"><a class=\"anchor\" href=\"#æ—¶åŒº\">#</a> æ—¶åŒº</h4>\n<p><img data-src=\"https://img.xfc-exclave.com/2021/08/c6ccf8487f42cf1d65568fcbf84497b21629790347.jpeg\" alt=\"ä¸–ç•Œæ—¶åŒºåˆ’åˆ†\" /></p>\n<p>æ—¶åŒºåˆ’åˆ†æ˜¯é«˜ä¸­åœ°ç†åŸºæœ¬çŸ¥è¯†ã€‚å¦‚æœå¯¹æ—¶åŒºç­‰åŸºæœ¬æ¦‚å¿µå’ŒåŸç†ä¸æ¸…æ¥šï¼Œå¯ä»¥ç®€å•äº†è§£ä¸‹ï¼š</p>\n<p>å‚è€ƒï¼š<span class=\"exturl\" data-url=\"aHR0cHM6Ly9iYWlqaWFoYW8uYmFpZHUuY29tL3M/aWQ9MTY3ODgyNzA1MjE4NjUxMjQ0Mg==\">https://baijiahao.baidu.com/s?id=1678827052186512442</span></p>\n<p>å¯¹äºæ—¥å¸¸å¼€å‘è€Œè¨€ï¼Œä½ åªéœ€è¦ç®€å•è®°ä½ä»¥ä¸‹å‡ ç‚¹å³å¯ï¼š</p>\n<ol>\n<li>æ—¶åŒºåˆ†ä¸ºåä¸€ä¸ªä¸œæ—¶åŒºã€åä¸€ä¸ªè¥¿æ—¶åŒºã€ä¸€ä¸ªä¸­æ—¶åŒºå’Œä¸€ä¸ªä¸œè¥¿åäºŒæ—¶åŒºã€‚</li>\n<li>ä¼¦æ•¦å¤„äºä¸­æ—¶åŒºï¼ˆæœ¬åˆå­åˆçº¿ï¼‰ã€‚</li>\n<li>åŒ—äº¬æ—¶é—´æ˜¯ä¸œå…«åŒºæ—¶é—´ã€‚</li>\n<li>ä¸¤åœ°ä¹‹é—´æ¯ç›¸è·ä¸€ä¸ªæ—¶åŒºï¼Œæ—¶é—´ç›¸å·®ä¸€å°æ—¶ã€‚</li>\n</ol>\n<h4 id=\"å†¬æ—¶ä»¤å’Œå¤æ—¶ä»¤\"><a class=\"anchor\" href=\"#å†¬æ—¶ä»¤å’Œå¤æ—¶ä»¤\">#</a> å†¬æ—¶ä»¤å’Œå¤æ—¶ä»¤</h4>\n<p>å¤ä»¤æ—¶ã€å†¬ä»¤æ—¶çš„å‡ºç°ï¼Œæ˜¯ä¸ºäº†å……åˆ†åˆ©ç”¨å¤å¤©çš„æ—¥ç…§ï¼Œæ‰€ä»¥æ—¶é’Ÿè¦å¾€å‰æ‹¨å¿«ä¸€å°æ—¶ï¼Œå†¬å¤©å†æŠŠè¡¨å¾€å›æ‹¨ä¸€å°æ—¶ã€‚å…¶ä¸­å¤ä»¤æ—¶ä» 3 æœˆç¬¬äºŒä¸ªå‘¨æ—¥æŒç»­åˆ° 11 æœˆç¬¬ä¸€ä¸ªå‘¨æ—¥ã€‚</p>\n<ul>\n<li>å†¬ä»¤æ—¶ï¼š åŒ—äº¬å’Œæ´›æ‰çŸ¶æ—¶å·®ï¼š16 åŒ—äº¬å’Œçº½çº¦æ—¶å·®ï¼š13</li>\n<li>å¤ä»¤æ—¶ï¼š åŒ—äº¬å’Œæ´›æ‰çŸ¶æ—¶å·®ï¼š15 åŒ—äº¬å’Œçº½çº¦æ—¶å·®ï¼š12</li>\n</ul>\n<h4 id=\"æ—¶é—´æˆ³\"><a class=\"anchor\" href=\"#æ—¶é—´æˆ³\">#</a> æ—¶é—´æˆ³</h4>\n<p>æ—¶é—´æˆ³ï¼ˆtimestampï¼‰ï¼Œä¸€ä¸ªèƒ½è¡¨ç¤ºä¸€ä»½æ•°æ®åœ¨æŸä¸ªç‰¹å®šæ—¶é—´ä¹‹å‰å·²ç»å­˜åœ¨çš„ã€ å®Œæ•´çš„ã€ å¯éªŒè¯çš„æ•°æ®ï¼Œé€šå¸¸æ˜¯ä¸€ä¸ªå­—ç¬¦åºåˆ—ï¼Œå”¯ä¸€åœ°æ ‡è¯†æŸä¸€åˆ»çš„æ—¶é—´ã€‚</p>\n<p>æ—¶é—´æˆ³æ˜¯æŒ‡æ ¼æ—å¨æ²»æ—¶é—´ 1970 å¹´ 01 æœˆ 01 æ—¥ 00 æ—¶ 00 åˆ† 00 ç§’ï¼ˆåŒ—äº¬æ—¶é—´ 1970 å¹´ 01 æœˆ 01 æ—¥ 08 æ—¶ 00 åˆ† 00 ç§’ï¼‰èµ·è‡³ç°åœ¨çš„æ€»ç§’æ•°ã€‚é€šä¿—çš„è®²ï¼Œ æ—¶é—´æˆ³æ˜¯ä¸€ä»½èƒ½å¤Ÿè¡¨ç¤ºä¸€ä»½æ•°æ®åœ¨ä¸€ä¸ªç‰¹å®šæ—¶é—´ç‚¹å·²ç»å­˜åœ¨çš„å®Œæ•´çš„å¯éªŒè¯çš„æ•°æ®ã€‚</p>\n<h4 id=\"javaä¸­æ—¶é—´api\"><a class=\"anchor\" href=\"#javaä¸­æ—¶é—´api\">#</a> Java ä¸­æ—¶é—´ API</h4>\n<ol>\n<li>\n<p>java.lang.System</p>\n<p>System ç±»æä¾›çš„  <code>currentTimeMillis()</code>  ç”¨æ¥è¿”å›å½“å‰æ—¶é—´ä¸ 1970 å¹´ 1 æœˆ 1 æ—¥ 0 æ—¶ 0 åˆ† 0 ç§’ä¹‹é—´ä»¥æ¯«ç§’ä¸ºå•ä½çš„æ—¶é—´å·®ã€‚</p>\n</li>\n<li>\n<p>java.util.Date</p>\n<p>ç›¸å…³æ–¹æ³•å½“åŸºæœ¬ç”¨æ³•ï¼š</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token class-name\">Date</span> date <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"date = \"</span> <span class=\"token operator\">+</span> date<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token class-name\">Date</span> date2 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token number\">1629791405786L</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"date2 = \"</span> <span class=\"token operator\">+</span> date2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token keyword\">long</span> time <span class=\"token operator\">=</span> date<span class=\"token punctuation\">.</span><span class=\"token function\">getTime</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"time = \"</span> <span class=\"token operator\">+</span> time<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    date<span class=\"token punctuation\">.</span><span class=\"token function\">setTime</span><span class=\"token punctuation\">(</span>time<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"date = \"</span> <span class=\"token operator\">+</span> date<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><blockquote>\n<p>æ³¨æ„åŒºåˆ†  <code>java.util.Date</code>  ä¸  <code>java.sql.Date</code>  ã€‚</p>\n</blockquote>\n</li>\n<li>\n<p>java.text.SimpleDateFormat</p>\n<p>è¿™ä¸ªç±»ä¸»è¦ç”¨æ¥è¿›è¡Œæ—¶é—´æ ¼å¼è½¬æ¢ï¼Œä¾‹å¦‚ï¼š</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token class-name\">Date</span> date <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token class-name\">String</span> strDateFormat <span class=\"token operator\">=</span> <span class=\"token string\">\"yyyy-MM-dd HH:mm:ss\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token class-name\">SimpleDateFormat</span> sdf <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">SimpleDateFormat</span><span class=\"token punctuation\">(</span>strDateFormat<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>sdf<span class=\"token punctuation\">.</span><span class=\"token function\">format</span><span class=\"token punctuation\">(</span>date<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure></li>\n<li>\n<p>java.util.Calendar</p>\n<p>è¿™æ˜¯ä¸€ä¸ªæ—¥å†ç±»ã€‚æ—¥å†å­—æ®µåŒ…å« YEARã€MONTHã€DAY_OF_MONTHã€HOUR ç­‰ï¼Œå®ƒä»¬éƒ½æ˜¯ Calendar ç±»çš„é™æ€å¸¸é‡ã€‚</p>\n<p>è®¡ç®—æ—¶é—´å·®ç¤ºä¾‹ï¼š</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token class-name\">LocalDate</span> now <span class=\"token operator\">=</span> <span class=\"token class-name\">LocalDate</span><span class=\"token punctuation\">.</span><span class=\"token function\">now</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token class-name\">LocalDate</span> localDate <span class=\"token operator\">=</span> <span class=\"token class-name\">LocalDate</span><span class=\"token punctuation\">.</span><span class=\"token function\">of</span><span class=\"token punctuation\">(</span><span class=\"token number\">2020</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">26</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token class-name\">Period</span> period <span class=\"token operator\">=</span> <span class=\"token class-name\">Period</span><span class=\"token punctuation\">.</span><span class=\"token function\">between</span><span class=\"token punctuation\">(</span>localDate<span class=\"token punctuation\">,</span> now<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>period<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>period<span class=\"token punctuation\">.</span><span class=\"token function\">getYears</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>period<span class=\"token punctuation\">.</span><span class=\"token function\">getMonths</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>period<span class=\"token punctuation\">.</span><span class=\"token function\">getDays</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>period<span class=\"token punctuation\">.</span><span class=\"token function\">withYears</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure></li>\n</ol>\n<h4 id=\"æ ¼æ—å¨æ²»æ—¶é—´\"><a class=\"anchor\" href=\"#æ ¼æ—å¨æ²»æ—¶é—´\">#</a> æ ¼æ—å¨æ²»æ—¶é—´</h4>\n<p>æ ¼æ—å°¼æ²»å¹³æ—¶ï¼ˆè‹±è¯­ï¼šGreenwich Mean Timeï¼ŒGMTï¼‰æ˜¯æŒ‡ä½äºè‹±å›½ä¼¦æ•¦éƒŠåŒºçš„çš‡å®¶æ ¼æ—å°¼æ²»å¤©æ–‡å°å½“åœ°çš„å¹³å¤ªé˜³æ—¶ï¼Œå› ä¸ºæœ¬åˆå­åˆçº¿è¢«å®šä¹‰ä¸ºé€šè¿‡é‚£é‡Œçš„ç»çº¿ã€‚</p>\n<p>æ ¼æ—å°¼æ²»å¹³æ—¶åŸºäºå¤©æ–‡è§‚æµ‹æœ¬èº«çš„ç¼ºé™·ï¼Œå·²ç»è¢«åŸå­é’ŸæŠ¥æ—¶çš„åè°ƒä¸–ç•Œæ—¶ï¼ˆUTCï¼‰æ‰€å–ä»£ã€‚</p>\n<p>ä¸€èˆ¬ä½¿ç”¨ GMT+8 è¡¨ç¤ºä¸­å›½çš„æ—¶é—´ï¼Œæ˜¯å› ä¸ºä¸­å›½ä½äºä¸œå…«åŒºï¼Œæ—¶é—´ä¸Šæ¯”æ ¼æ—å¨æ²»æ—¶é—´å¿« 8 ä¸ªå°æ—¶ã€‚</p>\n<h4 id=\"cetutcgmtcstå‡ ç§å¸¸è§æ—¶é—´çš„å«ä¹‰å’Œå…³ç³»\"><a class=\"anchor\" href=\"#cetutcgmtcstå‡ ç§å¸¸è§æ—¶é—´çš„å«ä¹‰å’Œå…³ç³»\">#</a> CETï¼ŒUTCï¼ŒGMTï¼ŒCST å‡ ç§å¸¸è§æ—¶é—´çš„å«ä¹‰å’Œå…³ç³»</h4>\n<p><strong>CET</strong> æ¬§æ´²ä¸­éƒ¨æ—¶é—´ï¼ˆè‹±èªï¼šCentral European Timeï¼ŒCETï¼‰æ˜¯æ¯”ä¸–ç•Œæ ‡å‡†æ—¶é—´ï¼ˆUTCï¼‰æ—©ä¸€ä¸ªå°æ—¶çš„æ—¶åŒºåç§°ä¹‹ä¸€ã€‚å®ƒè¢«å¤§éƒ¨åˆ†æ¬§æ´²å›½å®¶å’Œéƒ¨åˆ†åŒ—éå›½å®¶é‡‡ç”¨ã€‚å†¬å­£æ—¶é—´ä¸º UTC+1ï¼Œå¤å­£æ¬§æ´²å¤ä»¤æ—¶ä¸º UTC+2ã€‚</p>\n<p><strong>UTC</strong> åè°ƒä¸–ç•Œæ—¶ï¼Œåˆç§°ä¸–ç•Œæ ‡å‡†æ—¶é—´æˆ–ä¸–ç•Œåè°ƒæ—¶é—´ï¼Œç®€ç§° UTCï¼Œä»è‹±æ–‡ â€œCoordinated Universal Timeâ€ï¼æ³•æ–‡ â€œTemps Universel CordonnÃ©â€ è€Œæ¥ã€‚å°æ¹¾é‡‡ç”¨ CNS 7648 çš„ã€Šèµ„æ–™å…ƒåŠäº¤æ¢æ ¼å¼â€“èµ„è®¯äº¤æ¢â€“æ—¥æœŸåŠæ—¶é—´çš„è¡¨ç¤ºæ³•ã€‹ï¼ˆä¸ ISO 8601 ç±»ä¼¼ï¼‰ç§°ä¹‹ä¸ºä¸–ç•Œç»Ÿä¸€æ—¶é—´ã€‚ä¸­å›½å¤§é™†é‡‡ç”¨ ISO 8601-1988 çš„å›½æ ‡ã€Šæ•°æ®å…ƒå’Œäº¤æ¢æ ¼å¼ä¿¡æ¯äº¤æ¢æ—¥æœŸå’Œæ—¶é—´è¡¨ç¤ºæ³•ã€‹ï¼ˆGB/T 7408ï¼‰ä¸­ç§°ä¹‹ä¸ºå›½é™…åè°ƒæ—¶é—´ã€‚åè°ƒä¸–ç•Œæ—¶æ˜¯ä»¥åŸå­æ—¶ç§’é•¿ä¸ºåŸºç¡€ï¼Œåœ¨æ—¶åˆ»ä¸Šå°½é‡æ¥è¿‘äºä¸–ç•Œæ—¶çš„ä¸€ç§æ—¶é—´è®¡é‡ç³»ç»Ÿã€‚</p>\n<p><strong>GMT</strong> æ ¼æ—å°¼æ²»æ ‡å‡†æ—¶é—´ï¼ˆæ—§è¯‘æ ¼æ—å°¼æ²»å¹³å‡æ—¶é—´æˆ–æ ¼æ—å¨æ²»æ ‡å‡†æ—¶é—´ï¼›è‹±è¯­ï¼šGreenwich Mean Timeï¼ŒGMTï¼‰æ˜¯æŒ‡ä½äºè‹±å›½ä¼¦æ•¦éƒŠåŒºçš„çš‡å®¶æ ¼æ—å°¼æ²»å¤©æ–‡å°çš„æ ‡å‡†æ—¶é—´ï¼Œå› ä¸ºæœ¬åˆå­åˆçº¿è¢«å®šä¹‰åœ¨é€šè¿‡é‚£é‡Œçš„ç»çº¿ã€‚</p>\n<p><strong>CST</strong> åŒ—äº¬æ—¶é—´ï¼ŒChina Standard Timeï¼Œåˆåä¸­å›½æ ‡å‡†æ—¶é—´ï¼Œæ˜¯ä¸­å›½çš„æ ‡å‡†æ—¶é—´ã€‚åœ¨æ—¶åŒºåˆ’åˆ†ä¸Šï¼Œå±ä¸œå…«åŒºï¼Œæ¯”åè°ƒä¸–ç•Œæ—¶æ—© 8 å°æ—¶ï¼Œè®°ä¸º UTC+8ï¼Œä¸ä¸­åæ°‘å›½å›½å®¶æ ‡å‡†æ—¶é—´ï¼ˆæ—§ç§° â€œä¸­åŸæ ‡å‡†æ—¶é—´â€ï¼‰ã€é¦™æ¸¯æ—¶é—´å’Œæ¾³é—¨æ—¶é—´å’Œç›¸åŒã€‚</p>\n<p><strong>å…³ç³»</strong></p>\n<p>CET=UTC/GMT + 1 å°æ—¶ CST=UTC/GMT +8 å°æ—¶ CST=CET+9</p>\n<h4 id=\"simpledateformat-çš„çº¿ç¨‹å®‰å…¨é—®é¢˜\"><a class=\"anchor\" href=\"#simpledateformat-çš„çº¿ç¨‹å®‰å…¨é—®é¢˜\">#</a> SimpleDateFormat çš„çº¿ç¨‹å®‰å…¨é—®é¢˜</h4>\n<blockquote>\n<p>ã€å¼ºåˆ¶ã€‘SimpleDateFormat æ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„ç±»ï¼Œä¸€èˆ¬ä¸è¦å®šä¹‰ä¸º static å˜é‡ï¼Œå¦‚æœå®šä¹‰ä¸º staticï¼Œå¿…é¡»åŠ é”ï¼Œæˆ–è€…ä½¿ç”¨ DateUtils å·¥å…·ç±»ã€‚</p>\n<p>æ­£ä¾‹ï¼šæ³¨æ„çº¿ç¨‹å®‰å…¨ï¼Œä½¿ç”¨ DateUtils ã€‚äº¦æ¨èå¦‚ä¸‹å¤„ç†ï¼š</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">private</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">ThreadLoal</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">DateFormat</span><span class=\"token punctuation\">></span></span> df <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ThreadLocal</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">DateFormat</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">protected</span> <span class=\"token class-name\">DateFormat</span> <span class=\"token function\">initialValue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">SimpleDateFormat</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"yyyy-MM-dd\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>quote from ã€Šé˜¿é‡Œå·´å·´ Java å¼€å‘æ‰‹å†Œã€‹</p>\n</blockquote>\n<p>å¼•èµ· SimpleDateFormat çº¿ç¨‹å®‰å…¨é—®é¢˜çš„åŸå› ï¼š</p>\n<p>SimpleDateFormat ä¸­çš„ format æ–¹æ³•åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œä¼šä½¿ç”¨ä¸€ä¸ªæˆå‘˜å˜é‡ calendar æ¥ä¿å­˜æ—¶é—´ã€‚å¦‚æœæˆ‘ä»¬åœ¨å£°æ˜ SimpleDateFormat çš„æ—¶å€™ï¼Œä½¿ç”¨çš„æ˜¯ static å®šä¹‰çš„ã€‚é‚£ä¹ˆè¿™ä¸ª SimpleDateFormat å°±æ˜¯ä¸€ä¸ªå…±äº«å˜é‡ï¼Œéšä¹‹ï¼ŒSimpleDateFormat ä¸­çš„ calendar ä¹Ÿå°±å¯ä»¥è¢«å¤šä¸ªçº¿ç¨‹è®¿é—®åˆ°ã€‚ä¸€ä¸ªçº¿ç¨‹åœ¨æ‰§è¡Œ  <code>clendar.setTime</code>  æ–¹æ³•æ—¶ï¼Œå¹¶ä¸èƒ½ä¿è¯ä¸å½±å“åˆ°ä»–çº¿ç¨‹æ‰§è¡Œ  <code>clendar.getTime</code>  ã€‚</p>\n<p>é™¤äº† format æ–¹æ³•ä»¥å¤–ï¼ŒSimpleDateFormat çš„ parse æ–¹æ³•ä¹Ÿæœ‰åŒæ ·çš„é—®é¢˜ã€‚æ‰€ä»¥ï¼Œä¸è¦æŠŠ SimpleDateFormat ä½œä¸ºä¸€ä¸ªå…±äº«å˜é‡ä½¿ç”¨ã€‚</p>\n<p>è§£å†³è¿™ä¸ªé—®é¢˜çš„æ–¹æ³•æœ‰å¾ˆå¤šï¼Œå¸¸è§æœ‰ä»¥ä¸‹å‡ ç§å¤„ç†æ–¹å¼ï¼š</p>\n<ol>\n<li>\n<p>å°†  <code>SimpleDateFormat</code>  ä½œä¸ºå±€éƒ¨å˜é‡ä½¿ç”¨ã€‚</p>\n</li>\n<li>\n<p>ä¸ºå…±äº«å˜é‡æ·»åŠ åŒæ­¥é”ã€‚</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">synchronized</span> <span class=\"token punctuation\">(</span>simpleDateFormat<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token comment\">// ...</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure></li>\n<li>\n<p>ä½¿ç”¨ ThreadLocal</p>\n<p>è§ä¸Šæ–‡æåŠçš„ã€Šé˜¿é‡Œå·´å·´ Java å¼€å‘æ‰‹å†Œã€‹ã€‚</p>\n</li>\n<li>\n<p>ä½¿ç”¨ DateTimeFormatter</p>\n<p>Java8+ å¯ä»¥ä½¿ç”¨ DateTimeFormatter ä»£æ›¿ SimpleDateFormatï¼Œè¿™æ˜¯ä¸€ä¸ªçº¿ç¨‹å®‰å…¨çš„æ ¼å¼åŒ–å·¥å…·ç±»ã€‚</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// è§£ææ—¥æœŸ</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token class-name\">String</span> dateStr <span class=\"token operator\">=</span> <span class=\"token string\">\"2016å¹´10æœˆ25æ—¥\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token class-name\">DateTimeFormatter</span> formatter <span class=\"token operator\">=</span> <span class=\"token class-name\">DateTimeFormatter</span><span class=\"token punctuation\">.</span><span class=\"token function\">ofPattern</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"yyyyå¹´MMæœˆddæ—¥\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token class-name\">LocalDate</span> date <span class=\"token operator\">=</span> <span class=\"token class-name\">LocalDate</span><span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span>dateStr<span class=\"token punctuation\">,</span> formatter<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token comment\">// æ—¥æœŸè½¬æ¢ä¸ºå­—ç¬¦ä¸²</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token class-name\">LocalDateTime</span> now <span class=\"token operator\">=</span> <span class=\"token class-name\">LocalDateTime</span><span class=\"token punctuation\">.</span><span class=\"token function\">now</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token class-name\">DateTimeFormatter</span> format <span class=\"token operator\">=</span> <span class=\"token class-name\">DateTimeFormatter</span><span class=\"token punctuation\">.</span><span class=\"token function\">ofPattern</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"yyyyå¹´MMæœˆddæ—¥ hh:mm a\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token class-name\">String</span> nowStr <span class=\"token operator\">=</span> now <span class=\"token punctuation\">.</span><span class=\"token function\">format</span><span class=\"token punctuation\">(</span>format<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>nowStr<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure></li>\n</ol>\n<h4 id=\"java-8ä¸­çš„æ—¶é—´å¤„ç†\"><a class=\"anchor\" href=\"#java-8ä¸­çš„æ—¶é—´å¤„ç†\">#</a> Java 8 ä¸­çš„æ—¶é—´å¤„ç†</h4>\n<p>åœ¨ Java8 ä¹‹å‰çš„ç‰ˆæœ¬ä¸­ï¼Œæ—¥æœŸæ—¶é—´ API å­˜åœ¨è¯¸å¤šé—®é¢˜ï¼Œä¾‹å¦‚ï¼š</p>\n<ol>\n<li>éçº¿ç¨‹å®‰å…¨ âˆ’ java.util.Date æ˜¯éçº¿ç¨‹å®‰å…¨çš„ï¼Œæ‰€æœ‰çš„æ—¥æœŸç±»éƒ½æ˜¯å¯å˜çš„ï¼Œè¿™æ˜¯ Java æ—¥æœŸç±»æœ€å¤§çš„é—®é¢˜ä¹‹ä¸€ã€‚</li>\n<li>è®¾è®¡å¾ˆå·® âˆ’ Java çš„æ—¥æœŸ / æ—¶é—´ç±»çš„å®šä¹‰ä¸ä¸€è‡´ã€‚</li>\n<li>æ—¶åŒºå¤„ç†éº»çƒ¦ âˆ’ æ—¥æœŸç±»å¹¶ä¸æä¾›å›½é™…åŒ–ï¼Œæ²¡æœ‰æ—¶åŒºæ”¯æŒï¼Œå› æ­¤ Java å¼•å…¥äº† java.util.Calendar å’Œ java.util.TimeZone ç±»ï¼Œä½†ä»–ä»¬åŒæ ·å­˜åœ¨ä¸Šè¿°æ‰€æœ‰çš„é—®é¢˜ã€‚</li>\n</ol>\n<p>åœ¨ Java8 ä¸­ï¼Œ æ–°çš„æ—¶é—´åŠâ½‡æœŸ API ä½äº java.time åŒ…ä¸­ï¼Œè¯¥åŒ…ä¸­æœ‰å¦‚ä¸‹é‡è¦çš„ç±»ï¼š</p>\n<ul>\n<li><code>Instant</code> ï¼š æ—¶é—´æˆ³</li>\n<li><code>Duration</code> ï¼š æŒç»­æ—¶é—´ï¼Œæ—¶é—´å·®</li>\n<li><code>LocalDate</code> ï¼š åªåŒ…å«â½‡æœŸï¼Œâ½å¦‚ï¼š 2021-08-24</li>\n<li><code>LocalTime</code> ï¼š åªåŒ…å«æ—¶é—´ï¼Œæ¯”å¦‚ï¼š 16:37:10</li>\n<li><code>LocalDateTime</code> ï¼š åŒ…å«â½‡æœŸå’Œæ—¶é—´ï¼Œæ¯”å¦‚ï¼š2021-08-24 16:37:10</li>\n<li><code>Period</code> ï¼š æ—¶é—´æ®µ</li>\n<li><code>ZoneOffset</code> ï¼š æ—¶åŒºåç§»é‡ï¼Œâ½å¦‚ï¼š+8:00</li>\n<li><code>ZonedDateTime</code> ï¼š å¸¦æ—¶åŒºçš„æ—¶é—´</li>\n<li><code>Clock</code> ï¼š æ—¶é’Ÿï¼Œæ¯”å¦‚è·å–â½¬å‰ç¾å›½çº½çº¦çš„æ—¶é—´</li>\n</ul>\n<p>æ–°çš„ java.time åŒ…æ¶µç›–äº†æ‰€æœ‰å¤„ç†æ—¥æœŸï¼Œæ—¶é—´ï¼Œæ—¥æœŸ / æ—¶é—´ï¼Œæ—¶åŒºï¼Œæ—¶åˆ»ï¼ˆinstantsï¼‰ï¼Œè¿‡ç¨‹ï¼ˆduringï¼‰ä¸æ—¶é’Ÿï¼ˆclockï¼‰çš„æ“ä½œã€‚</p>\n<p>ä¸€äº›ç®€å•çš„ä½¿ç”¨æ–¹å¼å¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// è·å–å½“å‰æ—¶é—´</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token class-name\">LocalDate</span> today <span class=\"token operator\">=</span> <span class=\"token class-name\">LocalDate</span><span class=\"token punctuation\">.</span><span class=\"token function\">now</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">int</span> year <span class=\"token operator\">=</span> today<span class=\"token punctuation\">.</span><span class=\"token function\">getYear</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">int</span> month <span class=\"token operator\">=</span> today<span class=\"token punctuation\">.</span><span class=\"token function\">getMonthValue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">int</span> day <span class=\"token operator\">=</span> today<span class=\"token punctuation\">.</span><span class=\"token function\">getDayOfMonth</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Year : %d Month : %d day : %d t %n\"</span><span class=\"token punctuation\">,</span> year<span class=\"token punctuation\">,</span> month<span class=\"token punctuation\">,</span> day<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token comment\">// åˆ›å»ºæŒ‡å®šæ—¥æœŸçš„æ—¶é—´</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token class-name\">LocalDate</span> date <span class=\"token operator\">=</span> <span class=\"token class-name\">LocalDate</span><span class=\"token punctuation\">.</span><span class=\"token function\">of</span><span class=\"token punctuation\">(</span><span class=\"token number\">2021</span><span class=\"token punctuation\">,</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token number\">01</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token comment\">// åˆ¤æ–­é—°å¹´</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token class-name\">LocalDate</span> nowDate <span class=\"token operator\">=</span> <span class=\"token class-name\">LocalDate</span><span class=\"token punctuation\">.</span><span class=\"token function\">now</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token keyword\">boolean</span> leapYear <span class=\"token operator\">=</span> nowDate<span class=\"token punctuation\">.</span><span class=\"token function\">isLeapYear</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token comment\">// è®¡ç®—ä¸¤ä¸ªæ—¶é—´ä¹‹é—´ç›¸å·®çš„æœˆæ•°å’Œå¤©æ•°</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token class-name\">Period</span> period <span class=\"token operator\">=</span> <span class=\"token class-name\">Period</span><span class=\"token punctuation\">.</span><span class=\"token function\">between</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">LocalDate</span><span class=\"token punctuation\">.</span><span class=\"token function\">of</span><span class=\"token punctuation\">(</span><span class=\"token number\">2018</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">LocalDate</span><span class=\"token punctuation\">.</span><span class=\"token function\">of</span><span class=\"token punctuation\">(</span><span class=\"token number\">2018</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><h4 id=\"å¦‚ä½•åœ¨ä¸œå…«åŒºçš„è®¡ç®—æœºä¸Šè·å–ç¾å›½æ—¶é—´\"><a class=\"anchor\" href=\"#å¦‚ä½•åœ¨ä¸œå…«åŒºçš„è®¡ç®—æœºä¸Šè·å–ç¾å›½æ—¶é—´\">#</a> å¦‚ä½•åœ¨ä¸œå…«åŒºçš„è®¡ç®—æœºä¸Šè·å–ç¾å›½æ—¶é—´</h4>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token class-name\">LocalDateTime</span> now <span class=\"token operator\">=</span> <span class=\"token class-name\">LocalDateTime</span><span class=\"token punctuation\">.</span><span class=\"token function\">now</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">ZoneId</span><span class=\"token punctuation\">.</span><span class=\"token function\">of</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"America/Los_Angeles\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">// åŒºåŸŸ / åŸå¸‚</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>now<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><h4 id=\"yyyyå’Œyyyyçš„åŒºåˆ«\"><a class=\"anchor\" href=\"#yyyyå’Œyyyyçš„åŒºåˆ«\">#</a> yyyy å’Œ YYYY çš„åŒºåˆ«</h4>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>text<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">ParseException</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>text<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">SimpleDateFormat</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Calendar</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Date</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Test</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">ParseException</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"yyyy-MM-dd\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span><span class=\"token comment\">// å°å†™ yyyy - 2020</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"YYYY-MM-dd\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span><span class=\"token comment\">// å¤§å†™ YYYY - 2019</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">int</span> <span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> parten<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">ParseException</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token class-name\">SimpleDateFormat</span> strDateFormat <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">SimpleDateFormat</span><span class=\"token punctuation\">(</span>parten<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        <span class=\"token class-name\">Date</span> date <span class=\"token operator\">=</span> strDateFormat<span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"2020-12-24\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        <span class=\"token class-name\">Calendar</span> calendar <span class=\"token operator\">=</span> <span class=\"token class-name\">Calendar</span><span class=\"token punctuation\">.</span><span class=\"token function\">getInstance</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        calendar<span class=\"token punctuation\">.</span><span class=\"token function\">setTime</span><span class=\"token punctuation\">(</span>date<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        <span class=\"token keyword\">return</span> calendar<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Calendar</span><span class=\"token punctuation\">.</span>YEAR<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><blockquote>\n<p>åœ¨ Intellij IDEA ä¸­ä¹¦å†™  <code>new SimpleDateFormat(&quot;YYYY-MM-dd&quot;);</code>  æ—¶ï¼Œä¼šè¿›è¡Œå¦‚ä¸‹æç¤ºï¼š</p>\n<p>ã€æ—¥æœŸæ ¼å¼åŒ–å­—ç¬¦ä¸² [YYYY-MM-dd] ä½¿ç”¨é”™è¯¯ï¼Œåº”æ³¨æ„ä½¿ç”¨å°å†™â€˜yâ€™è¡¨ç¤ºå½“å¤©æ‰€åœ¨çš„å¹´ï¼Œå¤§å†™â€˜Yâ€™ä»£è¡¨ week in which yearã€‚ã€‘</p>\n</blockquote>\n<h3 id=\"ç¼–ç æ–¹å¼\"><a class=\"anchor\" href=\"#ç¼–ç æ–¹å¼\">#</a> ç¼–ç æ–¹å¼</h3>\n<h4 id=\"ascii\"><a class=\"anchor\" href=\"#ascii\">#</a> ASCII</h4>\n<p>ASCIIï¼ˆ American Standard Code for InformationInterchangeï¼Œ ç¾å›½ä¿¡æ¯äº¤æ¢æ ‡å‡†ä»£ç ï¼‰ æ˜¯åŸºäºæ‹‰ä¸å­—æ¯çš„â¼€å¥—ç”µè„‘ç¼–ç ç³»ç»Ÿï¼Œ ä¸»è¦â½¤äºæ˜¾â½°ç°ä»£è‹±è¯­å’Œå…¶ä»–è¥¿æ¬§è¯­â¾”ã€‚</p>\n<p>å®ƒæ˜¯ç°ä»Šæœ€é€šâ½¤çš„å•å­—èŠ‚ç¼–ç ç³»ç»Ÿï¼Œå¹¶ç­‰åŒäºå›½é™…æ ‡å‡† ISO/IEC646ã€‚ä½†æ˜¯ ASCII ç åªæœ‰ 256 ä¸ªå­—ç¬¦æ— æ³•é€‚åº”éè‹±è¯­è¯­è¨€ä½“ç³»çš„å›½å®¶ã€‚</p>\n<h4 id=\"unicode\"><a class=\"anchor\" href=\"#unicode\">#</a> Unicode</h4>\n<p>Unicode æ˜¯è®¡ç®—æœºç§‘å­¦é¢†åŸŸé‡Œçš„ä¸€é¡¹ä¸šç•Œæ ‡å‡†ã€‚å®ƒå¯¹ä¸–ç•Œä¸Šå¤§éƒ¨åˆ†çš„æ–‡å­—ç³»ç»Ÿè¿›è¡Œäº†æ•´ç†ã€ç¼–ç ï¼Œä½¿å¾—è®¡ç®—æœºå¯ä»¥ç”¨æ›´ä¸ºç®€å•çš„æ–¹å¼æ¥å‘ˆç°å’Œå¤„ç†æ–‡å­—ã€‚</p>\n<p>Unicode æ¶µç›–çš„æ•°æ®é™¤äº†è§†è§‰ä¸Šçš„å­—å½¢ã€ç¼–ç æ–¹æ³•ã€æ ‡å‡†çš„å­—ç¬¦ç¼–ç å¤–ï¼Œè¿˜åŒ…å«äº†å­—ç¬¦ç‰¹æ€§ï¼Œå¦‚å¤§å°å†™å­—æ¯ã€‚</p>\n<p>Unicode å¯ä»¥è¡¨ç¤ºä¸­æ–‡ã€‚</p>\n<h4 id=\"unicode-ä¸-utf-8\"><a class=\"anchor\" href=\"#unicode-ä¸-utf-8\">#</a> Unicode ä¸ UTF-8</h4>\n<p>å¹¿ä¹‰çš„ Unicode æ˜¯ä¸€ä¸ªæ ‡å‡†ï¼Œå®šä¹‰äº†ä¸€ä¸ªå­—ç¬¦é›†ä»¥åŠä¸€ç³»åˆ—çš„ç¼–ç è§„åˆ™ï¼Œå³ Unicode å­—ç¬¦é›†å’Œ UTF-8ã€UTF-16ã€UTF-32 ç­‰ç­‰ç¼–ç è§„åˆ™ã€‚</p>\n<p>Unicode æ˜¯å­—ç¬¦é›†ã€‚UTF-8 æ˜¯ç¼–ç è§„åˆ™ã€‚</p>\n<p>Unicode è™½ç„¶ç»Ÿä¸€äº†å…¨ä¸–ç•Œå­—ç¬¦çš„äºŒè¿›åˆ¶ç¼–ç ï¼Œä½†æ²¡æœ‰è§„å®šå¦‚ä½•å­˜å‚¨ã€‚ä¸åŒæ–‡å­—å•ä¸ªå­—ç¬¦å­—èŠ‚å¤§å°å¹¶ä¸ä¸€è‡´ï¼Œå¦‚æœè§„å®šç»Ÿä¸€çš„ç¼–ç å­˜å‚¨ï¼Œå­—èŠ‚é•¿åº¦è¾ƒå°çš„å­—ç¬¦åˆ™ä¼šäº§ç”Ÿå¤§é‡çš„å†…å­˜æµªè´¹ï¼Œå› æ­¤å‡ºç°äº† Unicode çš„å¤šç§å­˜å‚¨æ–¹å¼ã€‚UTF-8ï¼ˆUnicode Tranformation Formatï¼‰å°±æ˜¯ Unicode çš„ä¸€ä¸ªä½¿ç”¨æ–¹å¼ï¼Œå®ƒä½¿ç”¨å¯å˜é•¿åº¦å­—èŠ‚æ¥å‚¨å­˜ Unicode å­—ç¬¦ï¼Œè¿™æ ·å°±å¯ä»¥é€‚åº”ä¸åŒå­—èŠ‚å¤§å°çš„æ–‡å­—å­˜å‚¨ã€‚</p>\n<h4 id=\"gbk-gb2312-gb18030åŒºåˆ«\"><a class=\"anchor\" href=\"#gbk-gb2312-gb18030åŒºåˆ«\">#</a> GBKã€GB2312ã€GB18030 åŒºåˆ«</h4>\n<p>ä¸‰è€…éƒ½æ˜¯æ”¯æŒä¸­æ–‡å­—ç¬¦çš„ç¼–ç æ–¹å¼ï¼Œå…¶ä¸­æœ€å¸¸ç”¨çš„æ˜¯ GBKã€‚</p>\n<ul>\n<li>\n<p>GB2312ï¼ˆ1980 å¹´ï¼‰</p>\n<p>16 ä½å­—ç¬¦é›†ã€‚ä¼˜ç‚¹ï¼šé€‚ç”¨äºç®€ä½“ä¸­æ–‡ç¯å¢ƒï¼Œå±äºä¸­å›½å›½å®¶æ ‡å‡†ï¼Œé€šè¡Œäºå¤§é™†ï¼Œæ–°åŠ å¡ç­‰åœ°ä¹Ÿä½¿ç”¨æ­¤ç¼–ç ï¼›ç¼ºç‚¹ï¼šä¸å…¼å®¹ç¹ä½“ä¸­æ–‡ï¼Œå…¶æ±‰å­—é›†åˆè¿‡å°‘ã€‚</p>\n</li>\n<li>\n<p>GBKï¼ˆ1995 å¹´ï¼‰</p>\n<p>16 ä½å­—ç¬¦é›†ã€‚ä¼˜ç‚¹ï¼šé€‚ç”¨äºç®€ç¹ä¸­æ–‡å…±å­˜çš„ç¯å¢ƒï¼Œä¸ºç®€ä½“ Windows æ‰€ä½¿ç”¨ï¼Œæ‰€æœ‰å­—ç¬¦éƒ½å¯ä»¥ä¸€å¯¹ä¸€æ˜ å°„åˆ° unicode2.0 ä¸Šï¼›ç¼ºç‚¹ï¼šä¸å±äºå®˜æ–¹æ ‡å‡†ï¼Œå’Œ big5 ä¹‹é—´éœ€è¦è½¬æ¢ï¼›å¾ˆå¤šæœç´¢å¼•æ“éƒ½ä¸èƒ½å¾ˆå¥½åœ°æ”¯æŒ GBK æ±‰å­—ã€‚</p>\n</li>\n<li>\n<p>GB18030ï¼ˆ2000 å¹´ï¼‰</p>\n<p>32 ä½å­—ç¬¦é›†ï¼ŒåŒæ—¶æ”¶å½•äº†è—æ–‡ã€è’™æ–‡ã€ç»´å¾å°”æ–‡ç­‰ä¸»è¦çš„å°‘æ•°æ°‘æ—æ–‡å­—ã€‚ä¼˜ç‚¹ï¼šå¯ä»¥æ”¶å½•æ‰€æœ‰ä½ èƒ½æƒ³åˆ°çš„æ–‡å­—å’Œç¬¦å·ï¼Œå±äºä¸­å›½æœ€æ–°çš„å›½å®¶æ ‡å‡†ï¼›ç¼ºç‚¹ï¼šç›®å‰æ”¯æŒå®ƒçš„è½¯ä»¶è¾ƒå°‘ã€‚</p>\n</li>\n</ul>\n<p>GBK æ˜¯ä¸€å¥—å›½å†…é€šç”¨çš„ç¼–ç æ ‡å‡†ã€‚</p>\n<h4 id=\"utf8-utf16-utf32-åŒºåˆ«\"><a class=\"anchor\" href=\"#utf8-utf16-utf32-åŒºåˆ«\">#</a> UTF8ã€UTF16ã€UTF32 åŒºåˆ«</h4>\n<p>UTF æ˜¯è‹±æ–‡ Unicode Transformation Format çš„ç¼©å†™ï¼Œæ„ä¸ºæŠŠ Unicode å­—ç¬¦è½¬æ¢ä¸ºæŸç§æ ¼å¼ã€‚UTF ç³»åˆ—ç¼–ç æ–¹æ¡ˆå‡æ˜¯ç”± Unicode ç¼–ç æ–¹æ¡ˆè¡å˜è€Œæ¥ï¼Œä»¥é€‚åº”ä¸åŒçš„æ•°æ®å­˜å‚¨æˆ–ä¼ é€’ï¼Œå®ƒä»¬éƒ½å¯ä»¥å®Œå…¨è¡¨ç¤º Unicode æ ‡å‡†ä¸­çš„æ‰€æœ‰å­—ç¬¦ã€‚</p>\n<ul>\n<li>\n<p>UTF-8</p>\n<p>å…¶ä¸­å¤§éƒ¨åˆ†æ±‰å­—é‡‡ç”¨ä¸‰ä¸ªå­—èŠ‚ç¼–ç ï¼Œå°‘é‡ä¸å¸¸ç”¨æ±‰å­—é‡‡ç”¨å››ä¸ªå­—èŠ‚ç¼–ç ã€‚</p>\n</li>\n<li>\n<p>UTF-16</p>\n<p>å…¶ä¸­å¤§éƒ¨åˆ†æ±‰å­—é‡‡ç”¨ä¸¤ä¸ªå­—èŠ‚ç¼–ç ï¼Œå°‘é‡ä¸å¸¸ç”¨æ±‰å­—é‡‡ç”¨å››ä¸ªå­—èŠ‚ç¼–ç ã€‚</p>\n</li>\n<li>\n<p>UTF-32</p>\n<p>ä½¿ç”¨å››ä¸ªå­—èŠ‚ä¸ºæ¯ä¸ªå­—ç¬¦ç¼–ç ï¼Œå®ƒå ç”¨ç©ºé—´é€šå¸¸ä¼šæ˜¯å…¶å®ƒç¼–ç çš„äºŒåˆ°å››å€ã€‚</p>\n</li>\n</ul>\n<h4 id=\"url-ç¼–è§£ç \"><a class=\"anchor\" href=\"#url-ç¼–è§£ç \">#</a> URL ç¼–è§£ç </h4>\n<p>ç½‘ç»œæ ‡å‡† RFC 1738 åšäº†ç¡¬æ€§è§„å®šï¼šåªæœ‰å­—æ¯å’Œæ•°å­—  <code>0-9a-zA-Z</code>  ã€ä¸€äº›ç‰¹æ®Šç¬¦å·  <code>$-_.+!*'(),</code>  ä»¥åŠæŸäº›ä¿ç•™å­—ï¼Œæ‰å¯ä»¥ä¸ç»è¿‡ç¼–ç ç›´æ¥ç”¨äº URL;</p>\n<p>é™¤æ­¤ä»¥å¤–çš„å­—ç¬¦æ˜¯æ— æ³•åœ¨ URL ä¸­å±•ç¤ºçš„ï¼Œæ‰€ä»¥ï¼Œé‡åˆ°è¿™ç§å­—ç¬¦ï¼Œå¦‚ä¸­æ–‡ï¼Œå°±éœ€è¦è¿›è¡Œç¼–ç ã€‚æ‰€ä»¥ï¼ŒæŠŠå¸¦æœ‰ç‰¹æ®Šå­—ç¬¦çš„ URL è½¬æˆå¯ä»¥æ˜¾ç¤ºçš„ URL è¿‡ç¨‹ï¼Œç§°ä¹‹ä¸º URL ç¼–ç ã€‚åä¹‹ï¼Œå°±æ˜¯è§£ç ã€‚</p>\n<p>URL ç¼–ç å¯ä»¥ä½¿ç”¨ä¸åŒçš„æ–¹å¼ï¼Œå¦‚ escapeï¼ŒURLEncodeï¼ŒencodeURIComponentã€‚</p>\n<h4 id=\"big-endianå’Œlittle-endian\"><a class=\"anchor\" href=\"#big-endianå’Œlittle-endian\">#</a> BIG Endian å’Œ Little Endian</h4>\n<p>å­—èŠ‚åºï¼ˆEndianï¼‰ï¼Œä¹Ÿå°±æ˜¯å­—èŠ‚çš„é¡ºåºï¼ŒæŒ‡çš„æ˜¯å¤šå­—èŠ‚çš„æ•°æ®åœ¨å†…å­˜ä¸­çš„å­˜æ”¾é¡ºåºã€‚</p>\n<p>Big Endian æ˜¯æŒ‡ä½åœ°å€ç«¯å­˜æ”¾é«˜ä½å­—èŠ‚ã€‚Little Endian æ˜¯æŒ‡ä½åœ°å€ç«¯å­˜æ”¾ä½ä½å­—èŠ‚ã€‚</p>\n<p>Java é‡‡ç”¨ Big Endian æ¥å­˜å‚¨æ•°æ®ï¼ŒC/C++ é‡‡ç”¨ Little Endianã€‚åœ¨ç½‘ç»œä¼ è¾“ä¸€èˆ¬é‡‡ç”¨çš„ç½‘ç»œå­—èŠ‚åºæ˜¯ BIG-ENDIANã€‚</p>\n<p>å› æ­¤å½“ Java å’Œ C è¯­è¨€è¿›è¡Œé€šè®¯æ—¶ï¼ŒC è¯­è¨€ç«¯éœ€è¦è€ƒè™‘åˆ°å­—èŠ‚åºçš„è½¬æ¢é—®é¢˜ï¼Œè€Œ Java ç«¯åˆ™æ— éœ€è€ƒè™‘ã€‚</p>\n<h4 id=\"å¦‚ä½•è§£å†³ä¹±ç é—®é¢˜\"><a class=\"anchor\" href=\"#å¦‚ä½•è§£å†³ä¹±ç é—®é¢˜\">#</a> å¦‚ä½•è§£å†³ä¹±ç é—®é¢˜</h4>\n<p><mark>ä¹±ç é—®é¢˜æœ¬è´¨ä¸Šéƒ½æ˜¯ç”±äºå­—ç¬¦ä¸²åŸæœ¬çš„ç¼–ç æ ¼å¼ä¸è¯»å–æ—¶è§£æç”¨çš„ç¼–ç æ ¼å¼ä¸ä¸€è‡´å¯¼è‡´çš„ã€‚</mark></p>\n<p>é€ æˆä¹±ç çš„åŸå› å°±æ˜¯å› ä¸ºä½¿ç”¨äº†é”™è¯¯çš„å­—ç¬¦ç¼–ç å»è§£ç å­—èŠ‚æµï¼Œå› æ­¤å½“æˆ‘ä»¬åœ¨æ€è€ƒä»»ä½•è·Ÿæ–‡æœ¬æ˜¾ç¤ºæœ‰å…³çš„é—®é¢˜æ—¶ï¼Œéœ€è¦æ˜ç¡®å½“å‰ä½¿ç”¨çš„å­—ç¬¦ç¼–ç æ˜¯ä»€ä¹ˆã€‚</p>\n<h3 id=\"è¯­æ³•ç³–\"><a class=\"anchor\" href=\"#è¯­æ³•ç³–\">#</a> è¯­æ³•ç³–</h3>\n<p>è¯­æ³•ç³–ï¼ˆSyntactic Sugarï¼‰ï¼Œä¹Ÿç§°ç³–è¡£è¯­æ³•ï¼Œæ˜¯ç”±è‹±å›½è®¡ç®—æœºå­¦å®¶ Peter.J.Landin å‘æ˜çš„ä¸€ä¸ªæœ¯è¯­ï¼ŒæŒ‡åœ¨è®¡ç®—æœºè¯­è¨€ä¸­æ·»åŠ çš„æŸç§è¯­æ³•ï¼Œè¿™ç§è¯­æ³•å¯¹è¯­è¨€çš„åŠŸèƒ½å¹¶æ²¡æœ‰å½±å“ï¼Œä½†æ˜¯æ›´æ–¹ä¾¿ç¨‹åºå‘˜ä½¿ç”¨ã€‚ç®€è€Œè¨€ä¹‹ï¼Œè¯­æ³•ç³–è®©ç¨‹åºæ›´åŠ ç®€æ´ï¼Œæœ‰æ›´é«˜çš„å¯è¯»æ€§ã€‚</p>\n<h4 id=\"è§£è¯­æ³•ç³–\"><a class=\"anchor\" href=\"#è§£è¯­æ³•ç³–\">#</a> è§£è¯­æ³•ç³–</h4>\n<p>è¯­æ³•ç³–çš„å­˜åœ¨ä¸»è¦æ˜¯æ–¹ä¾¿å¼€å‘äººå‘˜ä½¿ç”¨ï¼Œä½†å…¶å® Java è™šæ‹Ÿæœºå¹¶ä¸æ”¯æŒè¿™äº›è¯­æ³•ç³–ã€‚è¿™äº›è¯­æ³•ç³–åœ¨ç¼–è¯‘é˜¶æ®µå°±ä¼šè¢«è¿˜åŸæˆç®€å•çš„åŸºç¡€è¯­æ³•ç»“æ„ï¼Œè¿™ä¸ªè¿‡ç¨‹å°±æ˜¯è§£è¯­æ³•ç³–ã€‚</p>\n<h4 id=\"è¯­æ³•ç³–-2\"><a class=\"anchor\" href=\"#è¯­æ³•ç³–-2\">#</a> è¯­æ³•ç³–</h4>\n<ul>\n<li>\n<p>switch æ”¯æŒ String ä¸æšä¸¾</p>\n<p>å­—ç¬¦ä¸²çš„ switch æ˜¯é€šè¿‡  <code>equals()</code>  å’Œ  <code>hashCode()</code>  æ–¹æ³•æ¥å®ç°çš„ã€‚è€Œæšä¸¾åˆ™æ˜¯é€šè¿‡å…¶  <code>ordinal()</code>  æ–¹æ³•å®ç°çš„ã€‚</p>\n</li>\n<li>\n<p>æ³›å‹</p>\n</li>\n<li>\n<p>è‡ªåŠ¨è£…ç®±ä¸æ‹†ç®±</p>\n<p>è‡ªåŠ¨è£…ç®±å°±æ˜¯ Java è‡ªåŠ¨å°†åŸå§‹ç±»å‹å€¼è½¬æ¢æˆå¯¹åº”çš„å¯¹è±¡ï¼Œåä¹‹ï¼Œåˆ™æ˜¯æ‹†ç®±ã€‚è£…ç®±è¿‡ç¨‹æ˜¯é€šè¿‡è°ƒç”¨åŒ…è£…å™¨çš„ valueOf æ–¹æ³•å®ç°çš„ï¼Œè€Œæ‹†ç®±è¿‡ç¨‹æ˜¯é€šè¿‡è°ƒç”¨åŒ…è£…å™¨çš„ xxxValue æ–¹æ³•å®ç°çš„ã€‚</p>\n</li>\n<li>\n<p>æ–¹æ³•å˜é•¿å‚æ•°</p>\n<p>å¯å˜å‚æ•°æ˜¯åœ¨ Java1.5 ä¸­å¼•å…¥çš„ä¸€ä¸ªç‰¹æ€§ã€‚å®ƒå…è®¸ä¸€ä¸ªæ–¹æ³•æŠŠä»»æ„æ•°é‡çš„å€¼ä½œä¸ºå‚æ•°ã€‚</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">run</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span> strs<span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>å¯å˜å‚æ•°åœ¨è¢«ä½¿ç”¨çš„æ—¶å€™ï¼Œä»–é¦–å…ˆä¼šåˆ›å»ºä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„çš„é•¿åº¦å°±æ˜¯è°ƒç”¨è¯¥æ–¹æ³•æ˜¯ä¼ é€’çš„å®å‚çš„ä¸ªæ•°ï¼Œç„¶åå†æŠŠå‚æ•°å€¼å…¨éƒ¨æ”¾åˆ°è¿™ä¸ªæ•°ç»„å½“ä¸­ï¼Œç„¶åå†æŠŠè¿™ä¸ªæ•°ç»„ä½œä¸ºå‚æ•°ä¼ é€’åˆ°è¢«è°ƒç”¨çš„æ–¹æ³•ä¸­ã€‚</p>\n</li>\n<li>\n<p>æšä¸¾</p>\n<p>å½“æˆ‘ä»¬ä½¿ç”¨  <code>enmu</code>  æ¥å®šä¹‰ä¸€ä¸ªæšä¸¾ç±»å‹çš„æ—¶å€™ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬åˆ›å»ºä¸€ä¸ª  <code>final</code>  ç±»å‹çš„ç±»ç»§æ‰¿  <code>Enum</code>  ç±»ï¼Œæ‰€ä»¥æšä¸¾ç±»å‹ä¸èƒ½è¢«ç»§æ‰¿ã€‚</p>\n</li>\n<li>\n<p>å†…éƒ¨ç±»</p>\n</li>\n<li>\n<p>æ¡ä»¶ç¼–è¯‘</p>\n<p>â€” èˆ¬æƒ…å†µä¸‹ï¼Œç¨‹åºä¸­çš„æ¯ä¸€è¡Œä»£ç éƒ½è¦å‚åŠ ç¼–è¯‘ã€‚ä½†æœ‰æ—¶å€™å‡ºäºå¯¹ç¨‹åºä»£ç ä¼˜åŒ–çš„è€ƒè™‘ï¼Œå¸Œæœ›åªå¯¹å…¶ä¸­ä¸€éƒ¨åˆ†å†…å®¹è¿›è¡Œç¼–è¯‘ï¼Œæ­¤æ—¶å°±éœ€è¦åœ¨ç¨‹åºä¸­åŠ ä¸Šæ¡ä»¶ï¼Œè®©ç¼–è¯‘å™¨åªå¯¹æ»¡è¶³æ¡ä»¶çš„ä»£ç è¿›è¡Œç¼–è¯‘ï¼Œå°†ä¸æ»¡è¶³æ¡ä»¶çš„ä»£ç èˆå¼ƒï¼Œè¿™å°±æ˜¯æ¡ä»¶ç¼–è¯‘ã€‚</p>\n<p>Java è¯­æ³•çš„æ¡ä»¶ç¼–è¯‘ï¼Œæ˜¯é€šè¿‡åˆ¤æ–­æ¡ä»¶ä¸ºå¸¸é‡çš„ if è¯­å¥å®ç°çš„ã€‚å…¶åŸç†ä¹Ÿæ˜¯ Java è¯­è¨€çš„è¯­æ³•ç³–ã€‚æ ¹æ® if åˆ¤æ–­æ¡ä»¶çš„çœŸå‡ï¼Œç¼–è¯‘å™¨ç›´æ¥æŠŠåˆ†æ”¯ä¸º false çš„ä»£ç å—æ¶ˆé™¤ã€‚é€šè¿‡è¯¥æ–¹å¼å®ç°çš„æ¡ä»¶ç¼–è¯‘ï¼Œå¿…é¡»åœ¨æ–¹æ³•ä½“å†…å®ç°ï¼Œè€Œæ— æ³•åœ¨æ•´ä¸ª Java ç±»çš„ç»“æ„æˆ–è€…ç±»çš„å±æ€§ä¸Šè¿›è¡Œæ¡ä»¶ç¼–è¯‘ã€‚</p>\n</li>\n<li>\n<p>æ–­è¨€</p>\n<p>Java åœ¨æ‰§è¡Œçš„æ—¶å€™é»˜è®¤æ˜¯ä¸å¯åŠ¨æ–­è¨€æ£€æŸ¥çš„ï¼Œå¦‚æœè¦å¼€å¯æ–­è¨€æ£€æŸ¥ï¼Œåˆ™éœ€è¦ç”¨å¼€å…³  <code>-enableassertions</code>  æˆ–  <code>-ea</code>  æ¥å¼€å¯ã€‚å…¶å®æ–­è¨€çš„åº•å±‚å®ç°å°±æ˜¯ if è¯­è¨€ï¼Œå¦‚æœæ–­è¨€ç»“æœä¸º trueï¼Œåˆ™ä»€ä¹ˆéƒ½ä¸åšï¼Œç¨‹åºç»§ç»­æ‰§è¡Œï¼Œå¦‚æœæ–­è¨€ç»“æœä¸º falseï¼Œåˆ™ç¨‹åºæŠ›å‡º AssertError æ¥æ‰“æ–­ç¨‹åºçš„æ‰§è¡Œã€‚</p>\n</li>\n<li>\n<p>æ•°å€¼å­—é¢é‡</p>\n<p>åœ¨ java 7 ä¸­ï¼Œæ•°å€¼å­—é¢é‡ï¼Œä¸ç®¡æ˜¯æ•´æ•°è¿˜æ˜¯æµ®ç‚¹æ•°ï¼Œéƒ½å…è®¸åœ¨æ•°å­—ä¹‹é—´æ’å…¥ä»»æ„å¤šä¸ªä¸‹åˆ’çº¿ã€‚è¿™äº›ä¸‹åˆ’çº¿ä¸ä¼šå¯¹å­—é¢é‡çš„æ•°å€¼äº§ç”Ÿå½±å“ï¼Œç›®çš„å°±æ˜¯æ–¹ä¾¿é˜…è¯»ã€‚åœ¨ç¼–è¯‘æ—¶ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨å»æ‰ä¸‹åˆ’çº¿ã€‚</p>\n</li>\n<li>\n<p>for-each</p>\n<p>for-each çš„å®ç°åŸç†å…¶å®å°±æ˜¯ä½¿ç”¨äº†æ™®é€šçš„ for å¾ªç¯å’Œè¿­ä»£å™¨ã€‚</p>\n</li>\n<li>\n<p>try-with-resources</p>\n</li>\n<li>\n<p>Lambda è¡¨è¾¾å¼</p>\n</li>\n</ul>\n<blockquote>\n<p>æ‰©å±•æœç´¢ï¼š <code>è¯­æ³•ç›</code>  ã€  <code>è¯­æ³•ç³–ç²¾</code></p>\n</blockquote>\n<h2 id=\"å‚è€ƒ\"><a class=\"anchor\" href=\"#å‚è€ƒ\">#</a> å‚è€ƒ</h2>\n<blockquote>\n<p>å‚è€ƒå£°æ˜ï¼šå‚è€ƒå†…å®¹æ¥æºäºç½‘ç»œï¼Œæœ¬æ–‡ä¸ä¿è¯å‚è€ƒé“¾æ¥çš„é•¿æœŸæœ‰æ•ˆæ€§ï¼Œä»¥åŠå‚è€ƒå†…å®¹çš„åŸåˆ›æ€§ã€‚</p>\n</blockquote>\n<ul>\n<li><span class=\"exturl\" data-url=\"aHR0cDovL2hvbGxpc2NodWFuZy5naXRlZS5pby90b2JldG9wamF2YWU=\">Java å·¥ç¨‹å¸ˆæˆç¥ä¹‹è·¯</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuaG9sbGlzY2h1YW5nLmNvbQ==\">HollisChuang's Blog</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuemhpaHUuY29tL3F1ZXN0aW9uLzI3NDY4NTY0L2Fuc3dlci83NTc1MzcyMTQ=\">https://www.zhihu.com/question/27468564/answer/757537214</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuY25ibG9ncy5jb20vYmVuamllcWlhbmcvY2F0ZWdvcnkvMTQyODExNC5odG1s\">https://www.cnblogs.com/benjieqiang/category/1428114.html</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuaG9sbGlzY2h1YW5nLmNvbS9hcmNoaXZlcy8zNDMw\">https://www.hollischuang.com/archives/3430</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly96aHVhbmxhbi56aGlodS5jb20vcC8xMjcxNzAyMDE=\">https://zhuanlan.zhihu.com/p/127170201</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuemhpaHUuY29tL3F1ZXN0aW9uLzIwMzY3NzM0\">https://www.zhihu.com/question/20367734</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuY25ibG9ncy5jb20vZHVhbnh6L3AvMzUxMTY5NS5odG1s\">https://www.cnblogs.com/duanxz/p/3511695.html</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9zZWdtZW50ZmF1bHQuY29tL2EvMTE5MDAwMDAxODEyMDcyNQ==\">https://segmentfault.com/a/1190000018120725</span></li>\n</ul>\n",
            "tags": [
                "è®¡ç®—æœºç§‘å­¦",
                "JAVAå­¦ä¹ è·¯çº¿",
                "åŸºç¡€ç¯‡",
                "java"
            ]
        },
        {
            "id": "https://www.chinmoku.cc/computer-science/java-learning-path/2-intermediate/mybatis-tutorial/",
            "url": "https://www.chinmoku.cc/computer-science/java-learning-path/2-intermediate/mybatis-tutorial/",
            "title": "MyBatis æ•™ç¨‹",
            "date_published": "2021-08-20T05:27:13.000Z",
            "content_html": "<h3 id=\"mybatis-ç®€ä»‹\"><a class=\"anchor\" href=\"#mybatis-ç®€ä»‹\">#</a> MyBatis ç®€ä»‹</h3>\n<blockquote>\n<p>MyBatis çš„å‰èº«æ˜¯ Apache çš„å¼€æºé¡¹ç›® iBatisã€‚MyBatis å‡ ä¹å¯ä»¥ä»£æ›¿ JDBCï¼Œæ˜¯ä¸€ä¸ªæ”¯æŒå®šåˆ¶åŒ– SQL æŸ¥è¯¢ï¼Œå­˜å‚¨è¿‡ç¨‹å’Œé«˜çº§æ˜ å°„çš„åŸºäº Java çš„ä¼˜ç§€æŒä¹…å±‚æ¡†æ¶ã€‚MyBatis é¿å…äº†å‡ ä¹æ‰€æœ‰çš„ JDBC ä»£ç å’Œæ‰‹åŠ¨è®¾ç½®å‚æ•°ä»¥åŠè·å–ç»“æœé›†ã€‚MyBatis å¯ä»¥å¯¹é…ç½®å’ŒåŸç”Ÿ Map ä½¿ç”¨ç®€å•çš„ XML æˆ–æ³¨è§£ï¼Œå°†æ¥å£å’Œ Java çš„ POJOsï¼ˆPlain Old Java Objectsï¼Œæ™®é€šçš„ Java å¯¹è±¡ï¼‰æ˜ å°„æˆæ•°æ®åº“ä¸­çš„è®°å½•ã€‚</p>\n</blockquote>\n<p><strong>å®‰è£… MyBatis</strong></p>\n<p>ä¸‹è½½ jar åŒ…å¹¶ç½®äº classpath ä¸‹ï¼Œæˆ–ä½¿ç”¨ maven å¯¼å…¥ï¼š</p>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>org.mybatis<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>mybatis<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p><strong>Mybatis çš„åŠŸèƒ½æ¶æ„</strong></p>\n<ol>\n<li>API æ¥å£å±‚ï¼šæä¾›ç»™å¤–éƒ¨ä½¿ç”¨çš„æ¥å£ APIï¼Œå¼€å‘äººå‘˜é€šè¿‡è¿™äº›æœ¬åœ° API æ¥æ“çºµæ•°æ®åº“ã€‚æ¥å£å±‚ä¸€æ¥æ”¶åˆ°è°ƒç”¨è¯·æ±‚å°±ä¼šè°ƒç”¨æ•°æ®å¤„ç†å±‚æ¥å®Œæˆå…·ä½“çš„æ•°æ®å¤„ç†ã€‚</li>\n<li>æ•°æ®å¤„ç†å±‚ï¼šè´Ÿè´£å…·ä½“çš„ SQL æŸ¥æ‰¾ã€SQL è§£æã€SQL æ‰§è¡Œå’Œæ‰§è¡Œç»“æœæ˜ å°„å¤„ç†ç­‰ã€‚å®ƒä¸»è¦çš„ç›®çš„æ˜¯æ ¹æ®è°ƒç”¨çš„è¯·æ±‚å®Œæˆä¸€æ¬¡æ•°æ®åº“æ“ä½œã€‚</li>\n<li>åŸºç¡€æ”¯æ’‘å±‚ï¼šè´Ÿè´£æœ€åŸºç¡€çš„åŠŸèƒ½æ”¯æ’‘ï¼ŒåŒ…æ‹¬è¿æ¥ç®¡ç†ã€äº‹åŠ¡ç®¡ç†ã€é…ç½®åŠ è½½å’Œç¼“å­˜å¤„ç†ï¼Œè¿™äº›éƒ½æ˜¯å…±ç”¨çš„ä¸œè¥¿ï¼Œå°†ä»–ä»¬æŠ½å–å‡ºæ¥ä½œä¸ºæœ€åŸºç¡€çš„ç»„ä»¶ã€‚ä¸ºä¸Šå±‚çš„æ•°æ®å¤„ç†å±‚æä¾›æœ€åŸºç¡€çš„æ”¯æ’‘ã€‚</li>\n</ol>\n<p><strong>MyBatis çš„ä¼˜ç¼ºç‚¹</strong></p>\n<p>ä¼˜ç‚¹ï¼š</p>\n<ul>\n<li>çµæ´»ï¼šmybatis ä¸ä¼šå¯¹åº”ç”¨ç¨‹åºæˆ–è€…æ•°æ®åº“çš„ç°æœ‰è®¾è®¡å¼ºåŠ ä»»ä½•å½±å“ã€‚ sql å†™åœ¨ xml é‡Œï¼Œä¾¿äºç»Ÿä¸€ç®¡ç†å’Œä¼˜åŒ–ã€‚é€šè¿‡ sql åŸºæœ¬ä¸Šå¯ä»¥å®ç°æˆ‘ä»¬ä¸ä½¿ç”¨æ•°æ®è®¿é—®æ¡†æ¶å¯ä»¥å®ç°çš„æ‰€æœ‰åŠŸèƒ½ï¼Œæˆ–è®¸æ›´å¤šã€‚</li>\n<li>è§£é™¤ sql ä¸ç¨‹åºä»£ç çš„è€¦åˆï¼šé€šè¿‡æä¾› DAL å±‚ï¼Œå°†ä¸šåŠ¡é€»è¾‘å’Œæ•°æ®è®¿é—®é€»è¾‘åˆ†ç¦»ï¼Œä½¿ç³»ç»Ÿçš„è®¾è®¡æ›´æ¸…æ™°ï¼Œæ›´æ˜“ç»´æŠ¤ï¼Œæ›´æ˜“å•å…ƒæµ‹è¯•ã€‚sql å’Œä»£ç çš„åˆ†ç¦»ï¼Œæé«˜äº†å¯ç»´æŠ¤æ€§ã€‚</li>\n<li>æä¾›æ˜ å°„æ ‡ç­¾ï¼Œæ”¯æŒå¯¹è±¡ä¸æ•°æ®åº“çš„ orm å­—æ®µå…³ç³»æ˜ å°„ã€‚</li>\n<li>æä¾›å¯¹è±¡å…³ç³»æ˜ å°„æ ‡ç­¾ï¼Œæ”¯æŒå¯¹è±¡å…³ç³»ç»„å»ºç»´æŠ¤ã€‚</li>\n<li>æä¾› xml æ ‡ç­¾ï¼Œæ”¯æŒç¼–å†™åŠ¨æ€ sqlã€‚</li>\n</ul>\n<p>ç¼ºç‚¹ï¼š</p>\n<ul>\n<li>ç¼–å†™ SQL è¯­å¥æ—¶å·¥ä½œé‡å¾ˆå¤§ï¼Œå°¤å…¶æ˜¯å­—æ®µå¤šã€å…³è”è¡¨å¤šæ—¶ï¼Œæ›´æ˜¯å¦‚æ­¤ã€‚</li>\n<li>SQL è¯­å¥ä¾èµ–äºæ•°æ®åº“ï¼Œå¯¼è‡´æ•°æ®åº“ç§»æ¤æ€§å·®ï¼Œä¸èƒ½æ›´æ¢æ•°æ®åº“ã€‚</li>\n<li>æ¡†æ¶è¿˜æ˜¯æ¯”è¾ƒç®€é™‹ï¼ŒåŠŸèƒ½å°šæœ‰ç¼ºå¤±ï¼Œè™½ç„¶ç®€åŒ–äº†æ•°æ®ç»‘å®šä»£ç ï¼Œä½†æ˜¯æ•´ä¸ªåº•å±‚æ•°æ®åº“æŸ¥è¯¢å®é™…è¿˜æ˜¯è¦è‡ªå·±å†™çš„ï¼Œå·¥ä½œé‡ä¹Ÿæ¯”è¾ƒå¤§ï¼Œè€Œä¸”ä¸å¤ªå®¹æ˜“é€‚åº”å¿«é€Ÿæ•°æ®åº“ä¿®æ”¹ã€‚</li>\n<li>äºŒçº§ç¼“å­˜æœºåˆ¶ä¸ä½³ã€‚</li>\n</ul>\n<h3 id=\"hibernate-å’Œ-mybatis-å¯¹æ¯”\"><a class=\"anchor\" href=\"#hibernate-å’Œ-mybatis-å¯¹æ¯”\">#</a> Hibernate å’Œ MyBatis å¯¹æ¯”</h3>\n<ol>\n<li>SQL ä¼˜åŒ–æ–¹é¢\n<ul>\n<li>Hibernate ä¸éœ€è¦ç¼–å†™å¤§é‡çš„ SQLï¼Œå°±å¯ä»¥å®Œå…¨æ˜ å°„ï¼Œæä¾›äº†æ—¥å¿—ã€ç¼“å­˜ã€çº§è”ï¼ˆçº§è”æ¯” MyBatis å¼ºå¤§ï¼‰ç­‰ç‰¹æ€§ï¼Œæ­¤å¤–è¿˜æä¾› HQLï¼ˆHibernate Query Languageï¼‰å¯¹ POJO è¿›è¡Œæ“ä½œã€‚ä½†ä¼šå¤šæ¶ˆè€—æ€§èƒ½ã€‚</li>\n<li>MyBatis æ‰‹åŠ¨ç¼–å†™ SQLï¼Œæ”¯æŒåŠ¨æ€ SQLã€å¤„ç†åˆ—è¡¨ã€åŠ¨æ€ç”Ÿæˆè¡¨åã€æ”¯æŒå­˜å‚¨è¿‡ç¨‹ã€‚å·¥ä½œé‡ç›¸å¯¹å¤§äº›ã€‚</li>\n</ul>\n</li>\n<li>å¼€å‘æ–¹é¢\n<ul>\n<li>MyBatis æ˜¯ä¸€ä¸ªåŠè‡ªåŠ¨æ˜ å°„çš„æ¡†æ¶ï¼Œå› ä¸º MyBatis éœ€è¦æ‰‹åŠ¨åŒ¹é… POJOã€SQL å’Œæ˜ å°„å…³ç³»ã€‚</li>\n<li>Hibernate æ˜¯ä¸€ä¸ªå…¨è¡¨æ˜ å°„çš„æ¡†æ¶ï¼Œåªéœ€æä¾› POJO å’Œæ˜ å°„å…³ç³»å³å¯ã€‚</li>\n</ul>\n</li>\n<li>Hibernate çš„ä¼˜åŠ¿\n<ul>\n<li>Hibernate çš„ DAO å±‚å¼€å‘æ¯” MyBatis ç®€å•ï¼ŒMybatis éœ€è¦ç»´æŠ¤ SQL å’Œç»“æœæ˜ å°„ã€‚</li>\n<li>Hibernate å¯¹å¯¹è±¡çš„ç»´æŠ¤å’Œç¼“å­˜è¦æ¯” MyBatis å¥½ï¼Œå¯¹å¢åˆ æ”¹æŸ¥çš„å¯¹è±¡çš„ç»´æŠ¤è¦æ–¹ä¾¿ã€‚</li>\n<li>Hibernate æ•°æ®åº“ç§»æ¤æ€§å¾ˆå¥½ï¼ŒMyBatis çš„æ•°æ®åº“ç§»æ¤æ€§ä¸å¥½ï¼Œä¸åŒçš„æ•°æ®åº“éœ€è¦å†™ä¸åŒ SQLã€‚</li>\n<li>Hibernate æœ‰æ›´å¥½çš„äºŒçº§ç¼“å­˜æœºåˆ¶ï¼Œå¯ä»¥ä½¿ç”¨ç¬¬ä¸‰æ–¹ç¼“å­˜ã€‚MyBatis æœ¬èº«æä¾›çš„ç¼“å­˜æœºåˆ¶ä¸ä½³ã€‚</li>\n</ul>\n</li>\n<li>Mybatis çš„ä¼˜åŠ¿\n<ul>\n<li>MyBatis å¯ä»¥è¿›è¡Œæ›´ä¸ºç»†è‡´çš„ SQL ä¼˜åŒ–ï¼Œå¯ä»¥å‡å°‘æŸ¥è¯¢å­—æ®µã€‚</li>\n<li>MyBatis å®¹æ˜“æŒæ¡ï¼Œè€Œ Hibernate é—¨æ§›è¾ƒé«˜ã€‚</li>\n</ul>\n</li>\n</ol>\n<p>æ€»çš„æ¥è¯´ï¼ŒMyBatis æ˜¯ä¸€ä¸ªå°å·§ã€æ–¹ä¾¿ã€é«˜æ•ˆã€ç®€å•ã€ç›´æ¥ã€åŠè‡ªåŠ¨åŒ–çš„æŒä¹…å±‚æ¡†æ¶ï¼ŒHibernate æ˜¯ä¸€ä¸ªå¼ºå¤§ã€æ–¹ä¾¿ã€é«˜æ•ˆã€å¤æ‚ã€é—´æ¥ã€å…¨è‡ªåŠ¨åŒ–çš„æŒä¹…å±‚æ¡†æ¶ã€‚æ‰€ä»¥å¯¹äºæ€§èƒ½è¦æ±‚ä¸å¤ªè‹›åˆ»çš„ç³»ç»Ÿï¼Œæ¯”å¦‚ç®¡ç†ç³»ç»Ÿã€ERP ç­‰æ¨èä½¿ç”¨ Hibernateï¼Œè€Œå¯¹äºæ€§èƒ½è¦æ±‚é«˜ã€å“åº”å¿«ã€çµæ´»çš„ç³»ç»Ÿåˆ™æ¨èä½¿ç”¨ MyBatisã€‚</p>\n<h3 id=\"mybatis-å·¥ä½œåŸç†\"><a class=\"anchor\" href=\"#mybatis-å·¥ä½œåŸç†\">#</a> MyBatis å·¥ä½œåŸç†</h3>\n<p><img data-src=\"https://img.xfc-exclave.com/2021/08/43ebf4f563f6b34480bc23d9b676c0611629098745.png\" alt=\"mybatiså·¥ä½œåŸç†\" width=\"500px\" /></p>\n<ol>\n<li>è¯»å– MyBatis é…ç½®æ–‡ä»¶ï¼š <code>mybatis-config.xml</code>  ä¸º MyBatis çš„å…¨å±€é…ç½®æ–‡ä»¶ï¼Œé…ç½®äº† MyBatis çš„è¿è¡Œç¯å¢ƒç­‰ä¿¡æ¯ï¼Œä¾‹å¦‚æ•°æ®åº“è¿æ¥ä¿¡æ¯ã€‚</li>\n<li>åŠ è½½æ˜ å°„æ–‡ä»¶ã€‚æ˜ å°„æ–‡ä»¶å³ SQL æ˜ å°„æ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶ä¸­é…ç½®äº†æ“ä½œæ•°æ®åº“çš„ SQL è¯­å¥ï¼Œéœ€è¦åœ¨ MyBatis é…ç½®æ–‡ä»¶ mybatis-config.xml ä¸­åŠ è½½ã€‚mybatis-config.xml æ–‡ä»¶å¯ä»¥åŠ è½½å¤šä¸ªæ˜ å°„æ–‡ä»¶ï¼Œæ¯ä¸ªæ–‡ä»¶å¯¹åº”æ•°æ®åº“ä¸­çš„ä¸€å¼ è¡¨ã€‚</li>\n<li>æ„é€ ä¼šè¯å·¥å‚ï¼šé€šè¿‡ MyBatis çš„ç¯å¢ƒç­‰é…ç½®ä¿¡æ¯æ„å»ºä¼šè¯å·¥å‚ SqlSessionFactoryã€‚</li>\n<li>åˆ›å»ºä¼šè¯å¯¹è±¡ï¼šç”±ä¼šè¯å·¥å‚åˆ›å»º SqlSession å¯¹è±¡ï¼Œè¯¥å¯¹è±¡ä¸­åŒ…å«äº†æ‰§è¡Œ SQL è¯­å¥çš„æ‰€æœ‰æ–¹æ³•ã€‚</li>\n<li>Executor æ‰§è¡Œå™¨ï¼šMyBatis åº•å±‚å®šä¹‰äº†ä¸€ä¸ª Executor æ¥å£æ¥æ“ä½œæ•°æ®åº“ï¼Œå®ƒå°†æ ¹æ® SqlSession ä¼ é€’çš„å‚æ•°åŠ¨æ€åœ°ç”Ÿæˆéœ€è¦æ‰§è¡Œçš„ SQL è¯­å¥ï¼ŒåŒæ—¶è´Ÿè´£æŸ¥è¯¢ç¼“å­˜çš„ç»´æŠ¤ã€‚</li>\n<li>MappedStatement å¯¹è±¡ï¼šåœ¨ Executor æ¥å£çš„æ‰§è¡Œæ–¹æ³•ä¸­æœ‰ä¸€ä¸ª MappedStatement ç±»å‹çš„å‚æ•°ï¼Œè¯¥å‚æ•°æ˜¯å¯¹æ˜ å°„ä¿¡æ¯çš„å°è£…ï¼Œç”¨äºå­˜å‚¨è¦æ˜ å°„çš„ SQL è¯­å¥çš„ idã€å‚æ•°ç­‰ä¿¡æ¯ã€‚</li>\n<li>è¾“å…¥å‚æ•°æ˜ å°„ï¼šè¾“å…¥å‚æ•°ç±»å‹å¯ä»¥æ˜¯ Mapã€List ç­‰é›†åˆç±»å‹ï¼Œä¹Ÿå¯ä»¥æ˜¯åŸºæœ¬æ•°æ®ç±»å‹å’Œ POJO ç±»å‹ã€‚è¾“å…¥å‚æ•°æ˜ å°„è¿‡ç¨‹ç±»ä¼¼äº JDBC å¯¹ preparedStatement å¯¹è±¡è®¾ç½®å‚æ•°çš„è¿‡ç¨‹ã€‚</li>\n<li>è¾“å‡ºç»“æœæ˜ å°„ï¼šè¾“å‡ºç»“æœç±»å‹å¯ä»¥æ˜¯ Mapã€ List ç­‰é›†åˆç±»å‹ï¼Œä¹Ÿå¯ä»¥æ˜¯åŸºæœ¬æ•°æ®ç±»å‹å’Œ POJO ç±»å‹ã€‚è¾“å‡ºç»“æœæ˜ å°„è¿‡ç¨‹ç±»ä¼¼äº JDBC å¯¹ç»“æœé›†çš„è§£æè¿‡ç¨‹ã€‚</li>\n</ol>\n<h3 id=\"mybatis-æ ¸å¿ƒç»„ä»¶\"><a class=\"anchor\" href=\"#mybatis-æ ¸å¿ƒç»„ä»¶\">#</a> MyBatis æ ¸å¿ƒç»„ä»¶</h3>\n<p>MyBatis çš„æ ¸å¿ƒç»„ä»¶åˆ†ä¸º 4 ä¸ªéƒ¨åˆ†ï¼š</p>\n<ol>\n<li>SqlSessionFactoryBuilderï¼ˆæ„é€ å™¨ï¼‰ï¼šå®ƒä¼šæ ¹æ®é…ç½®æˆ–è€…ä»£ç æ¥ç”Ÿæˆ SqlSessionFactoryï¼Œé‡‡ç”¨çš„æ˜¯åˆ†æ­¥æ„å»ºçš„ Builder æ¨¡å¼ã€‚</li>\n<li>SqlSessionFactoryï¼ˆå·¥å‚æ¥å£ï¼‰ï¼šä¾é å®ƒæ¥ç”Ÿæˆ SqlSessionï¼Œä½¿ç”¨çš„æ˜¯å·¥å‚æ¨¡å¼ã€‚</li>\n<li>SqlSessionï¼ˆä¼šè¯ï¼‰ï¼šä¸€ä¸ªæ—¢å¯ä»¥å‘é€ SQL æ‰§è¡Œè¿”å›ç»“æœï¼Œä¹Ÿå¯ä»¥è·å– Mapper çš„æ¥å£ã€‚åœ¨ç°æœ‰çš„æŠ€æœ¯ä¸­ï¼Œä¸€èˆ¬æˆ‘ä»¬ä¼šè®©å…¶åœ¨ä¸šåŠ¡é€»è¾‘ä»£ç ä¸­ â€œæ¶ˆå¤±â€ï¼Œè€Œä½¿ç”¨çš„æ˜¯ MyBatis æä¾›çš„ SQL Mapper æ¥å£ç¼–ç¨‹æŠ€æœ¯ï¼Œå®ƒèƒ½æé«˜ä»£ç çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚</li>\n<li>SQL Mapperï¼ˆæ˜ å°„å™¨ï¼‰:MyBatis æ–°è®¾è®¡å­˜åœ¨çš„ç»„ä»¶ï¼Œå®ƒç”±ä¸€ä¸ª Java æ¥å£å’Œ XML æ–‡ä»¶ï¼ˆæˆ–æ³¨è§£ï¼‰æ„æˆï¼Œéœ€è¦ç»™å‡ºå¯¹åº”çš„ SQL å’Œæ˜ å°„è§„åˆ™ã€‚å®ƒè´Ÿè´£å‘é€ SQL å»æ‰§è¡Œï¼Œå¹¶è¿”å›ç»“æœã€‚</li>\n</ol>\n<h3 id=\"sqlsessionfactory\"><a class=\"anchor\" href=\"#sqlsessionfactory\">#</a> SqlSessionFactory</h3>\n<p>MyBatis æä¾›æ„é€ å™¨ SqlSessionFactoryBuilder ï¼Œé‡‡ç”¨çš„æ˜¯ Builder æ¨¡å¼ç”Ÿäº§ SqlSessionFactory ã€‚</p>\n<p>åœ¨ MyBatis ä¸­ï¼Œæ—¢å¯ä»¥é€šè¿‡è¯»å–é…ç½®çš„ XML æ–‡ä»¶çš„å½¢å¼ç”Ÿæˆ SqlSessionFactoryï¼Œä¹Ÿå¯ä»¥é€šè¿‡ Java ä»£ç çš„å½¢å¼å»ç”Ÿæˆ SqlSessionFactoryã€‚</p>\n<p>SqlSessionFactory æ˜¯ä¸€ä¸ªæ¥å£ï¼Œåœ¨ MyBatis ä¸­å®ƒå­˜åœ¨ä¸¤ä¸ªå®ç°ç±»ï¼šSqlSessionManager å’Œ DefaultSqlSessionFactoryã€‚ä¸€èˆ¬è€Œè¨€ï¼Œå…·ä½“æ˜¯ç”± DefaultSqlSessionFactory å»å®ç°çš„ï¼Œè€Œ SqlSessionManager ä½¿ç”¨åœ¨å¤šçº¿ç¨‹çš„ç¯å¢ƒä¸­ï¼Œå®ƒçš„å…·ä½“å®ç°ä¾é  DefaultSqlSessionFactory ã€‚</p>\n<p>æ¯ä¸ªåŸºäº MyBatis çš„åº”ç”¨éƒ½æ˜¯ä»¥ä¸€ä¸ª SqlSessionFactory çš„å®ä¾‹ä¸ºä¸­å¿ƒçš„ï¼Œè€Œ SqlSessionFactory å”¯ä¸€çš„ä½œç”¨å°±æ˜¯ç”Ÿäº§ MyBatis çš„æ ¸å¿ƒæ¥å£å¯¹è±¡ SqlSessionï¼Œæ‰€ä»¥å®ƒçš„è´£ä»»æ˜¯å”¯ä¸€çš„ã€‚</p>\n<h4 id=\"ä½¿ç”¨-xml-æ„å»º-sqlsessionfactoryæ¨è\"><a class=\"anchor\" href=\"#ä½¿ç”¨-xml-æ„å»º-sqlsessionfactoryæ¨è\">#</a> ä½¿ç”¨ XML æ„å»º SqlSessionFactoryï¼ˆæ¨èï¼‰</h4>\n<p>é…ç½®ç¤ºä¾‹ï¼ˆmybatis-config.xmlï¼‰ï¼š</p>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token prolog\">&lt;?xml version=\"1.0\" encoding=\"utf-8\"?></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token doctype\"><span class=\"token punctuation\">&lt;!</span><span class=\"token doctype-tag\">DOCTYPE</span> <span class=\"token name\">configuration</span> <span class=\"token name\">PUBLIC</span> <span class=\"token string\">\"-//mybatis.org//DTD Config 3.0//EN\"</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token string\">\"http://mybatis.org/dtd/mybatis-3-config.dtd\"</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>configuration</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>typeAliases</span><span class=\"token punctuation\">></span></span><span class=\"token comment\">&lt;!-- åˆ«å --></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>typeAliases</span> <span class=\"token attr-name\">alias</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>user<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>com.mybatis.po.User<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>typeAliases</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token comment\">&lt;!-- æ•°æ®åº“ç¯å¢ƒ --></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>environments</span> <span class=\"token attr-name\">default</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>development<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>environment</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>development<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>            <span class=\"token comment\">&lt;!-- ä½¿ç”¨ JDBC çš„äº‹åŠ¡ç®¡ç† --></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>transactionManager</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>JDBC<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dataSource</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>POOLED<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>                <span class=\"token comment\">&lt;!-- MySQL æ•°æ®åº“é©±åŠ¨ --></span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>driver<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>com.mysql.jdbc.Driver<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>                <span class=\"token comment\">&lt;!-- è¿æ¥æ•°æ®åº“çš„ URL --></span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>url<span class=\"token punctuation\">\"</span></span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>                    <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>jdbc:mysql://localhost:3306/mybatis?characterEncoding=utf8<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>username<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>root<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>password<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>1128<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dataSource</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>environment</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>environments</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>    <span class=\"token comment\">&lt;!-- å°† mapper æ–‡ä»¶åŠ å…¥åˆ°é…ç½®æ–‡ä»¶ä¸­ --></span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>mappers</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>mapper</span> <span class=\"token attr-name\">resource</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>com/mybatis/mapper/UserMapper.xml<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>mappers</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>configuration</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p>ç”Ÿæˆ SqlSessionFactory.class</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token class-name\">SqlSessionFactory</span> factory <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token class-name\">String</span> resource <span class=\"token operator\">=</span> <span class=\"token string\">\"mybatis-config.xml\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token class-name\">InputStream</span> is<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">try</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token class-name\">InputStream</span> is <span class=\"token operator\">=</span> <span class=\"token class-name\">Resources</span><span class=\"token punctuation\">.</span><span class=\"token function\">getResourceAsStream</span><span class=\"token punctuation\">(</span>resource<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    factory <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">SqlSessionFactoryBuilder</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">build</span><span class=\"token punctuation\">(</span>is<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">IOException</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    e<span class=\"token punctuation\">.</span><span class=\"token function\">printStackTrace</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h4 id=\"ä½¿ç”¨ä»£ç åˆ›å»º-sqlsessionfactoryä¸æ¨è\"><a class=\"anchor\" href=\"#ä½¿ç”¨ä»£ç åˆ›å»º-sqlsessionfactoryä¸æ¨è\">#</a> ä½¿ç”¨ä»£ç åˆ›å»º SqlSessionFactoryï¼ˆä¸æ¨èï¼‰</h4>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// æ•°æ®åº“è¿æ¥æ± ä¿¡æ¯</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token class-name\">PooledDataSource</span> dataSource <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">PooledDataSource</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>dataSource<span class=\"token punctuation\">.</span><span class=\"token function\">setDriver</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"com.mysql.jdbc.Driver\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>dataSource<span class=\"token punctuation\">.</span><span class=\"token function\">setUsername</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"root\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>dataSource<span class=\"token punctuation\">.</span>setPassword <span class=\"token punctuation\">(</span><span class=\"token string\">\"1128\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>dataSource<span class=\"token punctuation\">.</span><span class=\"token function\">setUrl</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"jdbc:mysql://localhost:3306/mybatis\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>dataSource<span class=\"token punctuation\">.</span><span class=\"token function\">setDefeultAutoCommit</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token comment\">// é‡‡ç”¨ MyBatis çš„ JDBC äº‹åŠ¡æ–¹å¼</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token class-name\">TransactionFactory</span> transactionFactory <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">JdbcTransactionFactory</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token class-name\">Environment</span> environment <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Environment</span> <span class=\"token punctuation\">(</span><span class=\"token string\">\"development\"</span><span class=\"token punctuation\">,</span> transactionFactory<span class=\"token punctuation\">,</span> dataSource<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token comment\">// åˆ›å»º Configuration å¯¹è±¡</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token class-name\">Configuration</span> configuration <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Configuration</span><span class=\"token punctuation\">(</span>environment<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token comment\">// æ³¨å†Œä¸€ä¸ª MyBatis ä¸Šä¸‹æ–‡åˆ«å</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>configuration<span class=\"token punctuation\">.</span><span class=\"token function\">getTypeAliasRegistry</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">registerAlias</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"role\"</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">Role</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token comment\">// åŠ å…¥ä¸€ä¸ªæ˜ å°„å™¨</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>configuration<span class=\"token punctuation\">.</span><span class=\"token function\">addMapper</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">RoleMapper</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token comment\">// ä½¿ç”¨ SqlSessionFactoryBuilder æ„å»º SqlSessionFactory</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token class-name\">SqlSessionFactory</span> <span class=\"token class-name\">SqlSessionFactory</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">SqlSessionFactoryBuilder</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">build</span><span class=\"token punctuation\">(</span>configuration<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token keyword\">return</span> <span class=\"token class-name\">SqlSessionFactory</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><h3 id=\"sqlsession\"><a class=\"anchor\" href=\"#sqlsession\">#</a> SqlSession</h3>\n<p>åœ¨ MyBatis ä¸­ï¼Œ <code>SqlSession</code>  æ˜¯å…¶æ ¸å¿ƒæ¥å£ã€‚åœ¨ MyBatis ä¸­æœ‰ä¸¤ä¸ªå®ç°ç±»ï¼ŒDefaultSqlSession å’Œ SqlSessionManagerã€‚DefaultSqlSession æ˜¯å•çº¿ç¨‹ä½¿ç”¨çš„ï¼Œè€Œ SqlSessionManager åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ä½¿ç”¨ã€‚SqlSession çš„ä½œç”¨ç±»ä¼¼äºä¸€ä¸ª JDBC ä¸­çš„ Connection å¯¹è±¡ï¼Œä»£è¡¨ç€ä¸€ä¸ªè¿æ¥èµ„æºçš„å¯ç”¨ã€‚</p>\n<p>SqlSession ä½œç”¨ï¼š</p>\n<ul>\n<li>è·å– Mapper æ¥å£ã€‚</li>\n<li>å‘é€ SQL ç»™æ•°æ®åº“ã€‚</li>\n<li>æ§åˆ¶æ•°æ®åº“äº‹åŠ¡ã€‚</li>\n</ul>\n<p>åˆ›å»º SqlSession.class</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token class-name\">SqlSession</span> sqlSession <span class=\"token operator\">=</span> <span class=\"token class-name\">SqlSessionFactory</span><span class=\"token punctuation\">.</span><span class=\"token function\">openSession</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><blockquote>\n<p>SqlSession åªæ˜¯ä¸€ä¸ªé—¨é¢æ¥å£ï¼Œå®ƒæœ‰å¾ˆå¤šæ–¹æ³•ï¼Œå¯ä»¥ç›´æ¥å‘é€ SQLï¼Œè€ŒçœŸæ­£å®æ–½è€…æ˜¯ Executor ã€‚</p>\n</blockquote>\n<h4 id=\"sqlsession-äº‹åŠ¡æ§åˆ¶\"><a class=\"anchor\" href=\"#sqlsession-äº‹åŠ¡æ§åˆ¶\">#</a> SqlSession äº‹åŠ¡æ§åˆ¶</h4>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// å®šä¹‰ SqlSession</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token class-name\">SqlSession</span> sqlSession <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">try</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token comment\">// æ‰“å¼€ SqlSession ä¼šè¯</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    sqlSession <span class=\"token operator\">=</span> <span class=\"token class-name\">SqlSessionFactory</span><span class=\"token punctuation\">.</span><span class=\"token function\">openSession</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token comment\">// some code...</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    sqlSession<span class=\"token punctuation\">.</span><span class=\"token function\">commit</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>    <span class=\"token comment\">// æäº¤äº‹åŠ¡</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">IOException</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    sqlSession<span class=\"token punctuation\">.</span><span class=\"token function\">rollback</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  <span class=\"token comment\">// å›æ»šäº‹åŠ¡</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">finally</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token comment\">// åœ¨ finally è¯­å¥ä¸­ç¡®ä¿èµ„æºè¢«é¡ºåˆ©å…³é—­</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>sqlSession <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        sqlSession<span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h3 id=\"mybatis-æ˜ å°„å™¨\"><a class=\"anchor\" href=\"#mybatis-æ˜ å°„å™¨\">#</a> MyBatis æ˜ å°„å™¨</h3>\n<p>æ˜ å°„å™¨æ˜¯ MyBatis ä¸­æœ€é‡è¦ã€æœ€å¤æ‚çš„ç»„ä»¶ï¼Œå®ƒç”±ä¸€ä¸ªæ¥å£å’Œå¯¹åº”çš„ XML æ–‡ä»¶ï¼ˆæˆ–æ³¨è§£ï¼‰ç»„æˆã€‚å®ƒå¯ä»¥é…ç½®ä»¥ä¸‹å†…å®¹ï¼š</p>\n<ul>\n<li>æè¿°æ˜ å°„è§„åˆ™ã€‚</li>\n<li>æä¾› SQL è¯­å¥ï¼Œå¹¶å¯ä»¥é…ç½® SQL å‚æ•°ç±»å‹ã€è¿”å›ç±»å‹ã€ç¼“å­˜åˆ·æ–°ç­‰ä¿¡æ¯ã€‚</li>\n<li>é…ç½®ç¼“å­˜ã€‚</li>\n<li>æä¾›åŠ¨æ€ SQLã€‚</li>\n</ul>\n<p>æ˜ å°„å™¨çš„ä¸»è¦ä½œç”¨å°±æ˜¯å°† SQL æŸ¥è¯¢åˆ°çš„ç»“æœæ˜ å°„ä¸ºä¸€ä¸ª POJOï¼Œæˆ–è€…å°† POJO çš„æ•°æ®æ’å…¥åˆ°æ•°æ®åº“ä¸­ï¼Œå¹¶å®šä¹‰ä¸€äº›å…³äºç¼“å­˜ç­‰çš„é‡è¦å†…å®¹ã€‚</p>\n<h4 id=\"ä½¿ç”¨-xml-å®ç°æ˜ å°„å™¨\"><a class=\"anchor\" href=\"#ä½¿ç”¨-xml-å®ç°æ˜ å°„å™¨\">#</a> ä½¿ç”¨ xml å®ç°æ˜ å°„å™¨</h4>\n<p>ç”¨ XML å®šä¹‰æ˜ å°„å™¨åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼šæ¥å£å’Œ XMLã€‚</p>\n<p>ç¼–å†™æ˜ å°„æ¥å£  <code>RoleMapper.java</code> ï¼š</p>\n<blockquote>\n<p>æˆ‘ä»¬åªéœ€è¦ç¼–å†™æ¥å£ç±»ï¼Œmybatis ä¼šåˆ©ç”¨åŠ¨æ€ä»£ç†å¸®æˆ‘ä»¬ç”Ÿæˆäº†å…¶å®ç°ç±»ã€‚</p>\n</blockquote>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc<span class=\"token punctuation\">.</span>mapper</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc<span class=\"token punctuation\">.</span>entity<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Role</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">RoleMapper</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Role</span> <span class=\"token function\">getRole</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Long</span> id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>ä½¿ç”¨ xml æ–¹å¼åˆ›å»ºæ˜ å°„å™¨  <code>RoleMapper.xml</code> ï¼š</p>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token prolog\">&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token doctype\"><span class=\"token punctuation\">&lt;!</span><span class=\"token doctype-tag\">DOCTYPE</span> <span class=\"token name\">mapper</span> <span class=\"token name\">PUBLIC</span> <span class=\"token string\">\"-//mybatis.org//DTD Mapper 3.0//EN\"</span> <span class=\"token string\">\"http://mybatis.org/dtd/mybatis-3-mapper.dtd\"</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\">&lt;!-- namespace å¯¹åº”æ¥å£çš„å…¨é™å®šå --></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>mapper</span> <span class=\"token attr-name\">namespace</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>com.mybatis.mapper.RoleMapper<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token comment\">&lt;!-- id å¯¹åº”æ¥å£å†…çš„æ–¹æ³•ï¼ŒparameterType å¯¹åº”å‚æ•°ç±»å‹ï¼ŒresultType å¯¹åº”è¿”å›å€¼ç±»å‹ --></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>select</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>getRole<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">parameterType</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>long<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">resultType</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>role<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        SELECT id,role_name as roleName,note FROM role WHERE id = #&#123;id&#125;</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>select</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>mapper</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p>åœ¨  <code>mybatis-config.xml</code>  ä¸­é…ç½®æ˜ å°„å…³ç³»ï¼š</p>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>mapper</span> <span class=\"token attr-name\">resource</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>com/xfc/mapper/RoleMapper.xml<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr></table></figure><h4 id=\"ä½¿ç”¨æ³¨è§£å®ç°æ˜ å°„å™¨\"><a class=\"anchor\" href=\"#ä½¿ç”¨æ³¨è§£å®ç°æ˜ å°„å™¨\">#</a> ä½¿ç”¨æ³¨è§£å®ç°æ˜ å°„å™¨</h4>\n<p>ä½¿ç”¨æ³¨è§£å®ç°æ˜ å°„å™¨è¾ƒä¸ºç®€å•ï¼Œå®ƒåªéœ€è¦ç¼–å†™æ˜ å°„æ¥å£  <code>RoleMapper.java</code>  å³å¯ï¼š</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc<span class=\"token punctuation\">.</span>mapper</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>apache<span class=\"token punctuation\">.</span>ibatis<span class=\"token punctuation\">.</span>annotations<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Select</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc<span class=\"token punctuation\">.</span>entity<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">User</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">UserMapper</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    </pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token annotation punctuation\">@Select</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"select id, user_name as userName, password from t_user where id= #&#123;id&#125;\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Role</span> <span class=\"token function\">getUser</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Long</span> id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    </pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>ä½†ä½¿ç”¨æ³¨è§£å®ç°æ˜ å°„å™¨å¤„ç†è¾ƒä¸ºå¤æ‚çš„ SQL æ—¶ï¼Œä»£ç ç›¸å¯¹å¤æ‚ï¼Œä¹Ÿéš¾ä»¥ä½¿ç”¨åŠ¨æ€ SQLï¼Œéš¾ä»¥ç»´æŠ¤ã€‚</p>\n<h3 id=\"sqlsessionå’Œmapperæ¥å£æ‰§è¡Œsql\"><a class=\"anchor\" href=\"#sqlsessionå’Œmapperæ¥å£æ‰§è¡Œsql\">#</a> SqlSession å’Œ Mapper æ¥å£æ‰§è¡Œ SQL</h3>\n<p>MyBatis æ‰§è¡Œ SQL çš„ä¸¤ç§æ–¹å¼ï¼šSqlSession å’Œ Mapper æ¥å£ã€‚</p>\n<h4 id=\"sqlsession-å‘é€-sql\"><a class=\"anchor\" href=\"#sqlsession-å‘é€-sql\">#</a> SqlSession å‘é€ SQL</h4>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token class-name\">Role</span> role <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Role</span><span class=\"token punctuation\">)</span>sqlSession<span class=\"token punctuation\">.</span><span class=\"token function\">select</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"com.xfc.mapper.RoleMapper.getRole\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1L</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\">// å½“ mybatis åªæœ‰ä¸€ä¸ª id ä¸º â€œgetRoleâ€ï¼Œå¯ä»¥ç®€å†™å¦‚ä¸‹ï¼ŒselectOne ç”¨äºæŸ¥è¯¢è¿”å›ä¸€æ¡æ•°æ®</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\">// Role role = (Role)sqlSession.selectOne(\"getRole\", 1L);</span></pre></td></tr></table></figure><h4 id=\"mapper-æ¥å£å‘é€-sql\"><a class=\"anchor\" href=\"#mapper-æ¥å£å‘é€-sql\">#</a> Mapper æ¥å£å‘é€ SQL</h4>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token class-name\">RoleMapper</span> roleMapper <span class=\"token operator\">=</span> sqlSession<span class=\"token punctuation\">.</span><span class=\"token function\">getMapper</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">RoleMapper</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token class-name\">Role</span> role <span class=\"token operator\">=</span> roleMapper<span class=\"token punctuation\">.</span><span class=\"token function\">getRole</span><span class=\"token punctuation\">(</span><span class=\"token number\">1L</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><blockquote>\n<p>æ¨èä½¿ç”¨ Mapper æ¥å£å‘é€ SQLï¼Œå®ƒå¯ä»¥æ¶ˆé™¤ SqlSession å¸¦æ¥çš„åŠŸèƒ½æ€§ä»£ç ï¼Œæé«˜å¯è¯»æ€§ã€‚</p>\n</blockquote>\n<h3 id=\"mybatis-æ ¸å¿ƒç»„ä»¶çš„ä½œç”¨åŸŸåŠå…¶ç”Ÿå‘½å‘¨æœŸ\"><a class=\"anchor\" href=\"#mybatis-æ ¸å¿ƒç»„ä»¶çš„ä½œç”¨åŸŸåŠå…¶ç”Ÿå‘½å‘¨æœŸ\">#</a> MyBatis æ ¸å¿ƒç»„ä»¶çš„ä½œç”¨åŸŸåŠå…¶ç”Ÿå‘½å‘¨æœŸ</h3>\n<ul>\n<li>\n<p>SqlSessionFactoryBuilder</p>\n<p>SqlSessionFactoryBuilder çš„ä½œç”¨åœ¨äºåˆ›å»º SqlSessionFactoryï¼Œåˆ›å»ºæˆåŠŸåï¼ŒSqlSessionFactoryBuilder å°±å¤±å»äº†ä½œç”¨ï¼Œæ‰€ä»¥å®ƒåªèƒ½å­˜åœ¨äºåˆ›å»º SqlSessionFactory çš„æ–¹æ³•ä¸­ï¼Œè€Œä¸è¦è®©å…¶é•¿æœŸå­˜åœ¨ã€‚å› æ­¤ SqlSessionFactoryBuilder å®ä¾‹çš„æœ€ä½³ä½œç”¨åŸŸæ˜¯æ–¹æ³•ä½œç”¨åŸŸï¼ˆä¹Ÿå°±æ˜¯å±€éƒ¨æ–¹æ³•å˜é‡ï¼‰ã€‚</p>\n</li>\n<li>\n<p>SqlSessionFactory</p>\n<p>SqlSessionFactory å¯ä»¥è¢«è®¤ä¸ºæ˜¯ä¸€ä¸ªæ•°æ®åº“è¿æ¥æ± ï¼Œå®ƒçš„ä½œç”¨æ˜¯åˆ›å»º SqlSession æ¥å£å¯¹è±¡ã€‚å› ä¸º MyBatis çš„æœ¬è´¨å°±æ˜¯ Java å¯¹æ•°æ®åº“çš„æ“ä½œï¼Œæ‰€ä»¥ SqlSessionFactory çš„ç”Ÿå‘½å‘¨æœŸå­˜åœ¨äºæ•´ä¸ª MyBatis çš„åº”ç”¨ä¹‹ä¸­ï¼Œæ‰€ä»¥ä¸€æ—¦åˆ›å»ºäº† SqlSessionFactoryï¼Œå°±è¦é•¿æœŸä¿å­˜å®ƒï¼Œç›´è‡³ä¸å†ä½¿ç”¨ MyBatis åº”ç”¨ï¼Œæ‰€ä»¥å¯ä»¥è®¤ä¸º SqlSessionFactory çš„ç”Ÿå‘½å‘¨æœŸå°±ç­‰åŒäº MyBatis çš„åº”ç”¨å‘¨æœŸã€‚</p>\n<p>ç”±äº SqlSessionFactory æ˜¯ä¸€ä¸ªå¯¹æ•°æ®åº“çš„è¿æ¥æ± ï¼Œæ‰€ä»¥å®ƒå æ®ç€æ•°æ®åº“çš„è¿æ¥èµ„æºã€‚å¦‚æœåˆ›å»ºå¤šä¸ª SqlSessionFactoryï¼Œé‚£ä¹ˆå°±å­˜åœ¨å¤šä¸ªæ•°æ®åº“è¿æ¥æ± ï¼Œè¿™æ ·ä¸åˆ©äºå¯¹æ•°æ®åº“èµ„æºçš„æ§åˆ¶ï¼Œä¹Ÿä¼šå¯¼è‡´æ•°æ®åº“è¿æ¥èµ„æºè¢«æ¶ˆè€—å…‰ï¼Œå‡ºç°ç³»ç»Ÿå®•æœºç­‰æƒ…å†µï¼Œæ‰€ä»¥å°½é‡é¿å…å‘ç”Ÿè¿™æ ·çš„æƒ…å†µã€‚å› æ­¤åœ¨ä¸€èˆ¬çš„åº”ç”¨ä¸­æˆ‘ä»¬å¾€å¾€å¸Œæœ› SqlSessionFactory ä½œä¸ºä¸€ä¸ªå•ä¾‹ï¼Œè®©å®ƒåœ¨åº”ç”¨ä¸­è¢«å…±äº«ã€‚æ‰€ä»¥è¯´ SqlSessionFactory çš„æœ€ä½³ä½œç”¨åŸŸæ˜¯åº”ç”¨ä½œç”¨åŸŸã€‚</p>\n</li>\n<li>\n<p>SqlSession</p>\n<p>SqlSession åº”è¯¥å­˜æ´»åœ¨ä¸€ä¸ªä¸šåŠ¡è¯·æ±‚ä¸­ï¼Œå¤„ç†å®Œæ•´ä¸ªè¯·æ±‚åï¼Œåº”è¯¥å…³é—­è¿™æ¡è¿æ¥ï¼Œè®©å®ƒå½’è¿˜ç»™ SqlSessionFactoryï¼Œå¦åˆ™æ•°æ®åº“èµ„æºå°±å¾ˆå¿«è¢«è€—è´¹ç²¾å…‰ï¼Œç³»ç»Ÿå°±ä¼šç˜«ç—ªï¼Œæ‰€ä»¥ç”¨ try...catch...finally... è¯­å¥æ¥ä¿è¯å…¶æ­£ç¡®å…³é—­ï¼Œæ‰€ä»¥ SqlSession çš„æœ€ä½³çš„ä½œç”¨åŸŸæ˜¯è¯·æ±‚æˆ–æ–¹æ³•ä½œç”¨åŸŸã€‚</p>\n</li>\n<li>\n<p>Mapper</p>\n<p>Mapper æ˜¯ä¸€ä¸ªæ¥å£ï¼Œå®ƒç”± SqlSession æ‰€åˆ›å»ºï¼Œæ‰€ä»¥å®ƒçš„æœ€å¤§ç”Ÿå‘½å‘¨æœŸè‡³å¤šå’Œ SqlSession ä¿æŒä¸€è‡´ï¼Œå°½ç®¡å®ƒå¾ˆå¥½ç”¨ï¼Œä½†æ˜¯ç”±äº SqlSession çš„å…³é—­ï¼Œå®ƒçš„æ•°æ®åº“è¿æ¥èµ„æºä¹Ÿä¼šæ¶ˆå¤±ï¼Œæ‰€ä»¥å®ƒçš„ç”Ÿå‘½å‘¨æœŸåº”è¯¥å°äºç­‰äº SqlSession çš„ç”Ÿå‘½å‘¨æœŸã€‚Mapper ä»£è¡¨çš„æ˜¯ä¸€ä¸ªè¯·æ±‚ä¸­çš„ä¸šåŠ¡å¤„ç†ï¼Œæ‰€ä»¥å®ƒåº”è¯¥åœ¨ä¸€ä¸ªè¯·æ±‚ä¸­ï¼Œä¸€æ—¦å¤„ç†å®Œäº†ç›¸å…³çš„ä¸šåŠ¡ï¼Œå°±åº”è¯¥åºŸå¼ƒå®ƒã€‚</p>\n</li>\n</ul>\n<h3 id=\"mybatis-ç¨‹åºç¤ºä¾‹\"><a class=\"anchor\" href=\"#mybatis-ç¨‹åºç¤ºä¾‹\">#</a> MyBatis ç¨‹åºç¤ºä¾‹</h3>\n<p><strong>å‡†å¤‡</strong></p>\n<ol>\n<li>\n<p>åˆ›å»ºæ•°æ®åº“  <code>mybatis</code>  ï¼Œåˆ›å»ºè¡¨  <code>user</code>  ï¼š</p>\n<figure class=\"highlight sql\"><figcaption data-lang=\"SQL\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">CREATE</span> <span class=\"token keyword\">TABLE</span> <span class=\"token punctuation\">`</span><span class=\"token keyword\">user</span><span class=\"token punctuation\">`</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token punctuation\">`</span>uid<span class=\"token punctuation\">`</span> <span class=\"token keyword\">tinyint</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span>  <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">AUTO_INCREMENT</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  <span class=\"token punctuation\">`</span>uname<span class=\"token punctuation\">`</span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">20</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token punctuation\">`</span>usex<span class=\"token punctuation\">`</span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token keyword\">PRIMARY</span> <span class=\"token keyword\">KEY</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">`</span>uid<span class=\"token punctuation\">`</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token punctuation\">)</span> <span class=\"token keyword\">ENGINE</span><span class=\"token operator\">=</span><span class=\"token keyword\">InnoDB</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token keyword\">CHARSET</span><span class=\"token operator\">=</span>utf8<span class=\"token punctuation\">;</span></pre></td></tr></table></figure></li>\n<li>\n<p>åˆ›å»º maven é¡¹ç›®å¹¶é…ç½®  <code> pom.xml</code>  ã€‚</p>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token prolog\">&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>project</span> <span class=\"token attr-name\">xmlns</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://maven.apache.org/POM/4.0.0<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>xsi</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.w3.org/2001/XMLSchema-instance<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\"><span class=\"token namespace\">xsi:</span>schemaLocation</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>modelVersion</span><span class=\"token punctuation\">></span></span>4.0.0<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>modelVersion</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>com.xfc<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>mybatis<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>version</span><span class=\"token punctuation\">></span></span>1.0-SNAPSHOT<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>version</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependencies</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token comment\">&lt;!-- https://mvnrepository.com/artifact/log4j/log4j --></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>log4j<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>log4j<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>version</span><span class=\"token punctuation\">></span></span>1.2.17<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>version</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        <span class=\"token comment\">&lt;!-- https://mvnrepository.com/artifact/org.slf4j/slf4j-api --></span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>org.slf4j<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>slf4j-api<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>version</span><span class=\"token punctuation\">></span></span>1.7.25<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>version</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>scope</span><span class=\"token punctuation\">></span></span>test<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>scope</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>        <span class=\"token comment\">&lt;!-- https://mvnrepository.com/artifact/mysql/mysql-connector-java --></span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>mysql<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>mysql-connector-java<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>version</span><span class=\"token punctuation\">></span></span>8.0.13<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>version</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>        <span class=\"token comment\">&lt;!-- https://mvnrepository.com/artifact/org.mybatis/mybatis --></span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>org.mybatis<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>mybatis<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>version</span><span class=\"token punctuation\">></span></span>3.5.5<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>version</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependencies</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>project</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure></li>\n<li>\n<p>é…ç½® JDK ç¯å¢ƒï¼ˆå‡å®šå·²é…ç½®å®Œæˆï¼‰ã€‚</p>\n</li>\n</ol>\n<p><strong>ä»£ç </strong></p>\n<p><code>MyUser.java</code></p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc<span class=\"token punctuation\">.</span>entity</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">MyUser</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Integer</span> uid<span class=\"token punctuation\">;</span> <span class=\"token comment\">// ä¸»é”®</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> uname<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> usex<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    </pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token comment\">// setter and getter</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token comment\">// ä¸ºäº†æ–¹ä¾¿æŸ¥çœ‹ç»“æœï¼Œé‡å†™äº† toString æ–¹æ³•</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token string\">\"User[uid=\"</span> <span class=\"token operator\">+</span> uid <span class=\"token operator\">+</span> <span class=\"token string\">\",uname=\"</span> <span class=\"token operator\">+</span> uname <span class=\"token operator\">+</span> <span class=\"token string\">\",usex=\"</span> <span class=\"token operator\">+</span> usex <span class=\"token operator\">+</span> <span class=\"token string\">\"]\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p><code>UserMapper.java</code></p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc<span class=\"token punctuation\">.</span>mapper</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc<span class=\"token punctuation\">.</span>entity<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">MyUser</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">List</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">UserMapper</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token class-name\">MyUser</span> <span class=\"token function\">selectUserById</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Integer</span> uid<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">MyUser</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">selectAllUser</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token keyword\">int</span> <span class=\"token function\">addUser</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">MyUser</span> myUser<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token keyword\">int</span> <span class=\"token function\">updateUser</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">MyUser</span> myUser<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token keyword\">int</span> <span class=\"token function\">deleteUser</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Integer</span> uid<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p><code>log4j.properties</code></p>\n<figure class=\"highlight properties\"><figcaption data-lang=\".properties\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># Global logging configuration</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token attr-name\">log4j.rootLogger</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">ERROR,stdout</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\"># MyBatis logging configuration...</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token attr-name\">log4j.logger.com.mybatis</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">DEBUG</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\"># Console output...</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token attr-name\">log4j.appender.stdout</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">org.apache.log4j.ConsoleAppender</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token attr-name\">log4j.appender.stdout.layout</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">org.apache.log4j.PatternLayout</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token attr-name\">log4j.appender.stdout.layout.ConversionPattern</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">%5p [%t] - %m%n</span></pre></td></tr></table></figure><p><code>mybatis-config.xml</code></p>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token prolog\">&lt;?xml version=\"1.0\" encoding=\"utf-8\"?></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token doctype\"><span class=\"token punctuation\">&lt;!</span><span class=\"token doctype-tag\">DOCTYPE</span> <span class=\"token name\">configuration</span> <span class=\"token name\">PUBLIC</span> <span class=\"token string\">\"-//mybatis.org//DTD Config 3.0//EN\"</span> <span class=\"token string\">\"http://mybatis.org/dtd/mybatis-3-config.dtd\"</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>configuration</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>settings</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>setting</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>logImpl<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>LOG4J<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>settings</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token comment\">&lt;!-- é…ç½® mybatis è¿è¡Œç¯å¢ƒ --></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>environments</span> <span class=\"token attr-name\">default</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>development<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>environment</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>development<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>            <span class=\"token comment\">&lt;!-- ä½¿ç”¨ JDBC çš„äº‹åŠ¡ç®¡ç† --></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>transactionManager</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>JDBC<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dataSource</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>POOLED<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>                <span class=\"token comment\">&lt;!-- MySQL æ•°æ®åº“é©±åŠ¨ --></span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>driver<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>com.mysql.cj.jdbc.Driver<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>                <span class=\"token comment\">&lt;!-- è¿æ¥æ•°æ®åº“çš„ URL --></span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>url<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>jdbc:mysql://localhost:3306/mybatis?serverTimezone=Asia/Shanghai<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>username<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>root<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>password<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>root<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dataSource</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>environment</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>environments</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    <span class=\"token comment\">&lt;!-- å°† mapper æ–‡ä»¶åŠ å…¥åˆ°é…ç½®æ–‡ä»¶ä¸­ --></span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>mappers</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>mapper</span> <span class=\"token attr-name\">resource</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>com/xfc/mapper/UserMapper.xml<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>mappers</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>configuration</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p><code>UserMapper.xml</code></p>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token prolog\">&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token doctype\"><span class=\"token punctuation\">&lt;!</span><span class=\"token doctype-tag\">DOCTYPE</span> <span class=\"token name\">mapper</span> <span class=\"token name\">PUBLIC</span> <span class=\"token string\">\"-//mybatis.org//DTD Mapper 3.0//EN\"</span> <span class=\"token string\">\"http://mybatis.org/dtd/mybatis-3-mapper.dtd\"</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>mapper</span> <span class=\"token attr-name\">namespace</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>com.xfc.mapper.UserMapper<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token comment\">&lt;!-- æ ¹æ® uid æŸ¥è¯¢ä¸€ä¸ªç”¨æˆ·ä¿¡æ¯ --></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>select</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>selectUserById<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">parameterType</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Integer<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">resultType</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>com.xfc.entity.MyUser<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        select * from user where uid = #&#123;uid&#125;</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>select</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token comment\">&lt;!-- æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·ä¿¡æ¯ --></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>select</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>selectAllUser<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">resultType</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>com.xfc.entity.MyUser<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        select * from user</pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>select</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token comment\">&lt;!-- æ·»åŠ ä¸€ä¸ªç”¨æˆ·ï¼Œ#&#123;uname&#125; ä¸º com.xfc.entity.MyUser çš„å±æ€§å€¼ --></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>insert</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>addUser<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">parameterType</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>com.xfc.entity.MyUser<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        insert into user (uname, usex) values(#&#123;uname&#125;, #&#123;usex&#125;)</pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>insert</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token comment\">&lt;!-- ä¿®æ”¹ä¸€ä¸ªç”¨æˆ· --></span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>update</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>updateUser<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">parameterType</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>com.xfc.entity.MyUser<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        update user set uname = #&#123;uname&#125;, usex = #&#123;usex&#125; where uid = #&#123;uid&#125;</pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>update</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token comment\">&lt;!-- åˆ é™¤ä¸€ä¸ªç”¨æˆ· --></span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>delete</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>deleteUser<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">parameterType</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Integer<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>        delete from user where uid = #&#123;uid&#125;</pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>delete</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>mapper</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p><code>MyBatisTest.java</code></p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc<span class=\"token punctuation\">.</span>test</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>io<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">IOException</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>io<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">InputStream</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">List</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc<span class=\"token punctuation\">.</span>entity<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">MyUser</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>apache<span class=\"token punctuation\">.</span>ibatis<span class=\"token punctuation\">.</span>io<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Resources</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>apache<span class=\"token punctuation\">.</span>ibatis<span class=\"token punctuation\">.</span>session<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">SqlSession</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>apache<span class=\"token punctuation\">.</span>ibatis<span class=\"token punctuation\">.</span>session<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">SqlSessionFactory</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>apache<span class=\"token punctuation\">.</span>ibatis<span class=\"token punctuation\">.</span>session<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">SqlSessionFactoryBuilder</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">MyBatisTest</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        <span class=\"token keyword\">try</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>            <span class=\"token comment\">// è¯»å–é…ç½®æ–‡ä»¶ mybatis-config.xml</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>            <span class=\"token class-name\">InputStream</span> config <span class=\"token operator\">=</span> <span class=\"token class-name\">Resources</span><span class=\"token punctuation\">.</span><span class=\"token function\">getResourceAsStream</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"mybatis-config.xml\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>            <span class=\"token comment\">// æ ¹æ®é…ç½®æ–‡ä»¶æ„å»º SqlSessionFactory</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>            <span class=\"token class-name\">SqlSessionFactory</span> ssf <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">SqlSessionFactoryBuilder</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">build</span><span class=\"token punctuation\">(</span>config<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>            <span class=\"token comment\">// é€šè¿‡ SqlSessionFactory åˆ›å»º SqlSession</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>            <span class=\"token class-name\">SqlSession</span> ss <span class=\"token operator\">=</span> ssf<span class=\"token punctuation\">.</span><span class=\"token function\">openSession</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>            <span class=\"token comment\">// SqlSession æ‰§è¡Œæ˜ å°„æ–‡ä»¶ä¸­å®šä¹‰çš„ SQLï¼Œå¹¶è¿”å›æ˜ å°„ç»“æœ</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>            <span class=\"token comment\">/*</pre></td></tr><tr><td data-num=\"24\"></td><td><pre>             * com.xfc.mapper.UserMapper.selectUserById ä¸º UserMapper.xml ä¸­çš„å‘½åç©ºé—´ + select çš„ id</pre></td></tr><tr><td data-num=\"25\"></td><td><pre>             */</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>            <span class=\"token comment\">// æŸ¥è¯¢ä¸€ä¸ªç”¨æˆ·</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>            <span class=\"token class-name\">MyUser</span> mu <span class=\"token operator\">=</span> ss<span class=\"token punctuation\">.</span><span class=\"token function\">selectOne</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"com.xfc.mapper.UserMapper.selectUserById\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>mu<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>            <span class=\"token comment\">// æ·»åŠ ä¸€ä¸ªç”¨æˆ·</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>            <span class=\"token class-name\">MyUser</span> addmu <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">MyUser</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>            addmu<span class=\"token punctuation\">.</span><span class=\"token function\">setUname</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"é™ˆæ’\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>            addmu<span class=\"token punctuation\">.</span><span class=\"token function\">setUsex</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ç”·\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>            ss<span class=\"token punctuation\">.</span><span class=\"token function\">insert</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"com.xfc.mapper.UserMapper.addUser\"</span><span class=\"token punctuation\">,</span> addmu<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>            <span class=\"token comment\">// ä¿®æ”¹ä¸€ä¸ªç”¨æˆ·</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>            <span class=\"token class-name\">MyUser</span> updatemu <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">MyUser</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>            updatemu<span class=\"token punctuation\">.</span><span class=\"token function\">setUid</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>            updatemu<span class=\"token punctuation\">.</span><span class=\"token function\">setUname</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"å¼ ä¸‰\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>            updatemu<span class=\"token punctuation\">.</span><span class=\"token function\">setUsex</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"å¥³\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>            ss<span class=\"token punctuation\">.</span><span class=\"token function\">update</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"com.xfc.mapper.UserMapper.updateUser\"</span><span class=\"token punctuation\">,</span> updatemu<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>            <span class=\"token comment\">// åˆ é™¤ä¸€ä¸ªç”¨æˆ·</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>            ss<span class=\"token punctuation\">.</span><span class=\"token function\">delete</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"com.xfc.mapper.UserMapper.deleteUser\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>            <span class=\"token comment\">// æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>            <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">MyUser</span><span class=\"token punctuation\">></span></span> listMu <span class=\"token operator\">=</span> ss<span class=\"token punctuation\">.</span><span class=\"token function\">selectList</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"com.xfc.mapper.UserMapper.selectAllUser\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>            <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">MyUser</span> myUser <span class=\"token operator\">:</span> listMu<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre>                <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>myUser<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre>            <span class=\"token comment\">// æäº¤äº‹åŠ¡</span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre>            ss<span class=\"token punctuation\">.</span><span class=\"token function\">commit</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre>            <span class=\"token comment\">// å…³é—­ SqlSession</span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre>            ss<span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"51\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">IOException</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"52\"></td><td><pre>            <span class=\"token comment\">// TODO Auto-generated catch block</span></pre></td></tr><tr><td data-num=\"53\"></td><td><pre>            e<span class=\"token punctuation\">.</span><span class=\"token function\">printStackTrace</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"54\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"55\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"56\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h3 id=\"é…ç½®æ–‡ä»¶è¯¦è§£\"><a class=\"anchor\" href=\"#é…ç½®æ–‡ä»¶è¯¦è§£\">#</a> é…ç½®æ–‡ä»¶è¯¦è§£</h3>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token prolog\">&lt;?xml version=\"1.0\" encoding=\"utf-8\"?></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token doctype\"><span class=\"token punctuation\">&lt;!</span><span class=\"token doctype-tag\">DOCTYPE</span> <span class=\"token name\">configuration</span> <span class=\"token name\">PUBLIC</span> <span class=\"token string\">\"-//mybatis.org//DTD Config 3.0//EN\"</span> <span class=\"token string\">\"http://mybatis.org/dtd/mybatis-3-config.dtd\"</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>configuration</span><span class=\"token punctuation\">></span></span><span class=\"token comment\">&lt;!-- é…ç½® --></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>properties</span> <span class=\"token punctuation\">/></span></span><span class=\"token comment\">&lt;!-- å±æ€§ --></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>settings</span> <span class=\"token punctuation\">/></span></span><span class=\"token comment\">&lt;!-- è®¾ç½® --></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>typeAliases</span> <span class=\"token punctuation\">/></span></span><span class=\"token comment\">&lt;!-- ç±»å‹å‘½å --></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>typeHandlers</span> <span class=\"token punctuation\">/></span></span><span class=\"token comment\">&lt;!-- ç±»å‹å¤„ç†å™¨ --></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>objectFactory</span> <span class=\"token punctuation\">/></span></span><span class=\"token comment\">&lt;!-- å¯¹è±¡å·¥å‚ --></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>plugins</span> <span class=\"token punctuation\">/></span></span><span class=\"token comment\">&lt;!-- æ’ä»¶ --></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>environments</span><span class=\"token punctuation\">></span></span><span class=\"token comment\">&lt;!-- é…ç½®ç¯å¢ƒ --></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>environment</span><span class=\"token punctuation\">></span></span><span class=\"token comment\">&lt;!-- ç¯å¢ƒå˜é‡ --></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>transactionManager</span> <span class=\"token punctuation\">/></span></span><span class=\"token comment\">&lt;!-- äº‹åŠ¡ç®¡ç†å™¨ --></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dataSource</span> <span class=\"token punctuation\">/></span></span><span class=\"token comment\">&lt;!-- æ•°æ®æº --></span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>environment</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>environments</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>databaseIdProvider</span> <span class=\"token punctuation\">/></span></span><span class=\"token comment\">&lt;!-- æ•°æ®åº“å‚å•†æ ‡è¯† --></span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>mappers</span> <span class=\"token punctuation\">/></span></span><span class=\"token comment\">&lt;!-- æ˜ å°„å™¨ --></span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>configuration</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><blockquote>\n<p>æ³¨ï¼šMyBatis é…ç½®é¡¹çš„é¡ºåºä¸èƒ½é¢ å€’ï¼Œå¦‚æœé¢ å€’äº†å®ƒä»¬çš„é¡ºåºï¼Œé‚£ä¹ˆåœ¨ MyBatis å¯åŠ¨é˜¶æ®µå°±ä¼šå‘ç”Ÿå¼‚å¸¸ï¼Œå¯¼è‡´ç¨‹åºæ— æ³•è¿è¡Œã€‚</p>\n</blockquote>\n<h3 id=\"mybatis-æ ¸å¿ƒé…ç½®æ–‡ä»¶-properties\"><a class=\"anchor\" href=\"#mybatis-æ ¸å¿ƒé…ç½®æ–‡ä»¶-properties\">#</a> MyBatis æ ¸å¿ƒé…ç½®æ–‡ä»¶ properties</h3>\n<p>properties å±æ€§å¯ä»¥ç»™ç³»ç»Ÿé…ç½®ä¸€äº›è¿è¡Œå‚æ•°ï¼Œå¯ä»¥æ”¾åœ¨ XML æ–‡ä»¶æˆ–è€… properties æ–‡ä»¶ä¸­ï¼Œè€Œä¸æ˜¯æ”¾åœ¨ Java ç¼–ç ä¸­ï¼Œè¿™æ ·çš„å¥½å¤„åœ¨äºæ–¹ä¾¿å‚æ•°ä¿®æ”¹ï¼Œè€Œä¸ä¼šå¼•èµ·ä»£ç çš„é‡æ–°ç¼–è¯‘ã€‚ä¸€èˆ¬è€Œè¨€ï¼ŒMyBatis æä¾›äº† 3 ç§æ–¹å¼è®©æˆ‘ä»¬ä½¿ç”¨ propertiesï¼Œå®ƒä»¬æ˜¯ï¼š</p>\n<ul>\n<li>property å­å…ƒç´ ã€‚</li>\n<li>properties æ–‡ä»¶ã€‚</li>\n<li>ç¨‹åºä»£ç ä¼ é€’ã€‚</li>\n</ul>\n<h4 id=\"property-å­å…ƒç´ \"><a class=\"anchor\" href=\"#property-å­å…ƒç´ \">#</a> property å­å…ƒç´ </h4>\n<p>å¦‚ä¸Šä¸€ç¤ºä¾‹ä¸­ï¼Œå¯ä»¥åœ¨  <code>mybatis-cofig.xml</code>  ä¸­ï¼Œä½¿ç”¨  <code>&lt;properties&gt;</code>  ä¸‹çš„  <code>&lt;property&gt;</code>  æ ‡ç­¾å®šä¹‰æ•°æ®åº“ç­‰å‚æ•°ã€‚</p>\n<h4 id=\"properties-æ–‡ä»¶\"><a class=\"anchor\" href=\"#properties-æ–‡ä»¶\">#</a> properties æ–‡ä»¶</h4>\n<p>ä¹Ÿå¯ä»¥é€šè¿‡  <code>[jdbc].properties</code>  æ–‡ä»¶è¿›è¡Œé…ç½®ã€‚</p>\n<figure class=\"highlight properties\"><figcaption data-lang=\".properties\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token attr-name\">database.driver</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">com.mysql.jdbc.Driver</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token attr-name\">database.url</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">jdbc:mysql://localhost:3306/mybatis</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token attr-name\">database.username</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">root</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token attr-name\">database.password</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">password</span></pre></td></tr></table></figure><p>ç„¶ååœ¨  <code>mybatis-config.xml</code>  ä¸­å¼•ç”¨è¯¥é…ç½®å³å¯ã€‚</p>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>properties</span> <span class=\"token attr-name\">resource</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>jdbc.properties<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr></table></figure><p>æ­¤å¤–ï¼Œä¹Ÿå¯ä»¥æŒ‰  <code>$&#123;database.username&#125;</code>  çš„æ–¹æ³•å¼•å…¥ properties æ–‡ä»¶çš„å±æ€§å‚æ•°åˆ° MyBatis é…ç½®æ–‡ä»¶ä¸­ã€‚</p>\n<h4 id=\"ä½¿ç”¨ç¨‹åºä¼ é€’æ–¹å¼ä¼ é€’å‚æ•°\"><a class=\"anchor\" href=\"#ä½¿ç”¨ç¨‹åºä¼ é€’æ–¹å¼ä¼ é€’å‚æ•°\">#</a> ä½¿ç”¨ç¨‹åºä¼ é€’æ–¹å¼ä¼ é€’å‚æ•°</h4>\n<p>åœ¨æŸäº›ä¸šåŠ¡åœºæ™¯ä¸‹ï¼Œæ•°æ®åº“å¯†ç éœ€è¦è¿›è¡ŒåŠ å¯†ï¼Œå¯¹äºè¿™ç§åœºæ™¯ï¼Œå¯ä»¥é€‰æ‹©ä½¿ç”¨ç¨‹åºä¼ é€’æ–¹å¼ä¼ é€’å‚æ•°ã€‚</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token class-name\">String</span> resource <span class=\"token operator\">=</span> <span class=\"token string\">\"mybatis-config.xml\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token class-name\">InputStream</span> inputStream<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token class-name\">Inputstream</span> in <span class=\"token operator\">=</span> <span class=\"token class-name\">Resources</span><span class=\"token punctuation\">.</span><span class=\"token function\">getResourceAsStream</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"jdbc.properties\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token class-name\">Properties</span> props <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Properties</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>props<span class=\"token punctuation\">.</span><span class=\"token function\">load</span><span class=\"token punctuation\">(</span>in<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token class-name\">String</span> username <span class=\"token operator\">=</span> props<span class=\"token punctuation\">.</span><span class=\"token function\">getProperty</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"database.username\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token class-name\">String</span> password <span class=\"token operator\">=</span> props<span class=\"token punctuation\">.</span><span class=\"token function\">getProperty</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"database.password\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token comment\">// è§£å¯†ç”¨æˆ·å’Œå¯†ç ï¼Œå¹¶åœ¨å±æ€§ä¸­é‡ç½®ï¼ˆå‡å®š CodeUtils ä¸ºè§£å¯†å·¥å…·ç±»ï¼‰</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>props<span class=\"token punctuation\">.</span><span class=\"token function\">put</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"database.username\"</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">CodeUtils</span><span class=\"token punctuation\">.</span><span class=\"token function\">decode</span><span class=\"token punctuation\">(</span>username<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>props<span class=\"token punctuation\">.</span>put <span class=\"token punctuation\">(</span><span class=\"token string\">\"database.password\"</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">CodeUtils</span><span class=\"token punctuation\">.</span><span class=\"token function\">decode</span><span class=\"token punctuation\">(</span>password<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> </pre></td></tr><tr><td data-num=\"13\"></td><td><pre>inputstream <span class=\"token operator\">=</span> <span class=\"token class-name\">Resources</span><span class=\"token punctuation\">.</span><span class=\"token function\">getResourceAsStream</span><span class=\"token punctuation\">(</span>resource<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token comment\">// ä½¿ç”¨ç¨‹åºä¼ é€’çš„æ–¹å¼è¦†ç›–åŸæœ‰çš„ properties å±æ€§å‚æ•°</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token class-name\">SqlSessionFactory</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">SqlSessionFactoryBuilder</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">build</span><span class=\"token punctuation\">(</span>inputstream<span class=\"token punctuation\">,</span> props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><h3 id=\"settings-å±æ€§é…ç½®\"><a class=\"anchor\" href=\"#settings-å±æ€§é…ç½®\">#</a> settings å±æ€§é…ç½®</h3>\n<p>settings é…ç½®é¡¹è¾ƒå¤šï¼Œå¯ä»¥åœ¨ä½¿ç”¨æ—¶å†æŸ¥é˜…æ–‡æ¡£ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªå…¨é‡é…ç½®æ ·ä¾‹ï¼š</p>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>settings</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>setting</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>cacheEnabled<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>true<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>setting</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>lazyLoadingEnabled<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>true<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>setting</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>multipleResultSetsEnabled<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>true<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>setting</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>useColumnLabel<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>true<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>setting</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>useGeneratedKeys<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>false<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>setting</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>autoMappingBehavior<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>PARTIAL<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>setting</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>autoMappingUnknownColumnBehavior<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>WARNING<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>setting</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>defaultExecutorType<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>SIMPLE<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>setting</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>defaultStatementTimeout<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>25<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>setting</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>defaultFetchSize<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>100<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>setting</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>safeRowBoundsEnabled<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>false<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>setting</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>mapUnderscoreToCamelCase<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>false<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>setting</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>localCacheScope<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>SESSION<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>setting</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>jdbcTypeForNull<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>OTHER<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>setting</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>lazyLoadTriggerMethods<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>equals,clone,hashCode,toString<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>settings</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><h3 id=\"typealiasesåˆ«åé…ç½®\"><a class=\"anchor\" href=\"#typealiasesåˆ«åé…ç½®\">#</a> typeAliasesï¼ˆåˆ«åï¼‰é…ç½®</h3>\n<p>åœ¨ MyBatis ä¸­å…è®¸å®šä¹‰ä¸€ä¸ªç®€å†™æ¥ä»£è¡¨è¿™ä¸ªç±»ï¼Œè¿™å°±æ˜¯åˆ«åï¼Œåˆ«ååˆ†ä¸ºç³»ç»Ÿå®šä¹‰åˆ«åå’Œè‡ªå®šä¹‰åˆ«åã€‚åˆ«åç”±ç±» TypeAliasRegistryï¼ˆorg.apache.ibatis.type.TypeAliasRegistryï¼‰å»å®šä¹‰ã€‚</p>\n<h4 id=\"ç³»ç»Ÿå®šä¹‰åˆ«å\"><a class=\"anchor\" href=\"#ç³»ç»Ÿå®šä¹‰åˆ«å\">#</a> ç³»ç»Ÿå®šä¹‰åˆ«å</h4>\n<table>\n<thead>\n<tr>\n<th>åˆ«å</th>\n<th>Java ç±»å‹</th>\n<th>æ˜¯å¦æ”¯æŒæ•°ç»„</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>_byte</td>\n<td>byte</td>\n<td>æ˜¯</td>\n</tr>\n<tr>\n<td>_long</td>\n<td>long</td>\n<td>æ˜¯</td>\n</tr>\n<tr>\n<td>_short</td>\n<td>short</td>\n<td>æ˜¯</td>\n</tr>\n<tr>\n<td>_int</td>\n<td>int</td>\n<td>æ˜¯</td>\n</tr>\n<tr>\n<td>_integer</td>\n<td>int</td>\n<td>æ˜¯</td>\n</tr>\n<tr>\n<td>_double</td>\n<td>double</td>\n<td>æ˜¯</td>\n</tr>\n<tr>\n<td>_float</td>\n<td>float</td>\n<td>æ˜¯</td>\n</tr>\n<tr>\n<td>_boolean</td>\n<td>boolean</td>\n<td>æ˜¯</td>\n</tr>\n<tr>\n<td>string</td>\n<td>String</td>\n<td>æ˜¯</td>\n</tr>\n<tr>\n<td>byte</td>\n<td>Byte</td>\n<td>æ˜¯</td>\n</tr>\n<tr>\n<td>long</td>\n<td>Long</td>\n<td>æ˜¯</td>\n</tr>\n<tr>\n<td>short</td>\n<td>Short</td>\n<td>æ˜¯</td>\n</tr>\n<tr>\n<td>int</td>\n<td>Integer</td>\n<td>æ˜¯</td>\n</tr>\n<tr>\n<td>integer</td>\n<td>Integer</td>\n<td>æ˜¯</td>\n</tr>\n<tr>\n<td>double</td>\n<td>Double</td>\n<td>æ˜¯</td>\n</tr>\n<tr>\n<td>float</td>\n<td>Float</td>\n<td>æ˜¯</td>\n</tr>\n<tr>\n<td>boolean</td>\n<td>Boolean</td>\n<td>æ˜¯</td>\n</tr>\n<tr>\n<td>date</td>\n<td>Date</td>\n<td>æ˜¯</td>\n</tr>\n<tr>\n<td>decimal</td>\n<td>BigDecimal</td>\n<td>æ˜¯</td>\n</tr>\n<tr>\n<td>bigdecimal</td>\n<td>BigDecimal</td>\n<td>æ˜¯</td>\n</tr>\n<tr>\n<td>object</td>\n<td>Object</td>\n<td>æ˜¯</td>\n</tr>\n<tr>\n<td>map</td>\n<td>Map</td>\n<td>å¦</td>\n</tr>\n<tr>\n<td>hashmap</td>\n<td>HashMap</td>\n<td>å¦</td>\n</tr>\n<tr>\n<td>list</td>\n<td>List</td>\n<td>å¦</td>\n</tr>\n<tr>\n<td>arraylist</td>\n<td>ArrayList</td>\n<td>å¦</td>\n</tr>\n<tr>\n<td>collection</td>\n<td>Collection</td>\n<td>å¦</td>\n</tr>\n<tr>\n<td>iterator</td>\n<td>Iterator</td>\n<td>å¦</td>\n</tr>\n<tr>\n<td>ResultSet</td>\n<td>ResultSet</td>\n<td>å¦</td>\n</tr>\n</tbody>\n</table>\n<p><strong>é€šè¿‡ä»£ç æ¥å®ç°æ³¨å†Œåˆ«å</strong></p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token class-name\">TypeAliasRegistry</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token function\">registerAlias</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"string\"</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token function\">registerAlias</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"byte\"</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">Byte</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token function\">registerAlias</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"long\"</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">Long</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token comment\">//...... çœç•¥éƒ¨åˆ†å†…å®¹</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token function\">registerAlias</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"byte[]\"</span><span class=\"token punctuation\">,</span><span class=\"token class-name\">Byte</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token function\">registerAlias</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"long[]\"</span><span class=\"token punctuation\">,</span><span class=\"token class-name\">Long</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token comment\">//...... çœç•¥éƒ¨åˆ†å†…å®¹</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token function\">registerAlias</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"map\"</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">Map</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token function\">registerAlias</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"hashmap\"</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">HashMap</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token function\">registerAlias</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"list\"</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">List</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token function\">registerAlias</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"arraylist\"</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">ArrayList</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token function\">registerAlias</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"collection\"</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">Collection</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token function\">registerAlias</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"iterator\"</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">Iterator</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token function\">registerAlias</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ResultSet\"</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">ResultSet</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>ä¸€èˆ¬æ˜¯é€šè¿‡ Configuration è·å– TypeAliasRegistry ç±»å¯¹è±¡ï¼Œè€Œäº‹å®ä¸Š Configuration å¯¹è±¡ä¹Ÿå¯¹ä¸€äº›å¸¸ç”¨çš„é…ç½®é¡¹é…ç½®äº†åˆ«åï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// äº‹åŠ¡æ–¹å¼åˆ«å</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>typeAliasRegistry<span class=\"token punctuation\">.</span><span class=\"token function\">registerAlias</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"JDBC\"</span><span class=\"token punctuation\">,</span><span class=\"token class-name\">JdbcTransactionFactory</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>typeAliasRegistry<span class=\"token punctuation\">.</span><span class=\"token function\">registerAlias</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"MANAGED\"</span><span class=\"token punctuation\">,</span><span class=\"token class-name\">ManagedTransactionFactory</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\">// æ•°æ®æºç±»å‹åˆ«å</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>typeAliasRegistry<span class=\"token punctuation\">.</span><span class=\"token function\">registerAlias</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"JNDI\"</span><span class=\"token punctuation\">,</span><span class=\"token class-name\">JndiDataSourceFactory</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>typeAliasRegistry<span class=\"token punctuation\">.</span><span class=\"token function\">registerAlias</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"POOLED\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token class-name\">PooledDataSourceFactory</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>typeAliasRegistry<span class=\"token punctuation\">.</span><span class=\"token function\">registerAlias</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"UNPOOLED\"</span><span class=\"token punctuation\">,</span><span class=\"token class-name\">UnpooledDataSourceFactory</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\">// ç¼“å­˜ç­–ç•¥åˆ«å</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>typeAliasRegistry<span class=\"token punctuation\">.</span><span class=\"token function\">registerAlias</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"PERPETUAL\"</span><span class=\"token punctuation\">,</span><span class=\"token class-name\">PerpetualCache</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>typeAliasRegistry<span class=\"token punctuation\">.</span><span class=\"token function\">registerAlias</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"FIFO\"</span><span class=\"token punctuation\">,</span><span class=\"token class-name\">FifoCache</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>typeAliasRegistry<span class=\"token punctuation\">.</span><span class=\"token function\">registerAlias</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"LRU\"</span><span class=\"token punctuation\">,</span><span class=\"token class-name\">LruCache</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> typeAliasRegistry<span class=\"token punctuation\">.</span><span class=\"token function\">registerAlias</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"SOFT\"</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">SoftCache</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> typeAliasRegistry<span class=\"token punctuation\">.</span><span class=\"token function\">registerAlias</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"WEAK\"</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">WeakCache</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token comment\">// æ•°æ®åº“æ ‡è¯†åˆ«å</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>typeAliasRegistry<span class=\"token punctuation\">.</span><span class=\"token function\">registerAlias</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"DB_VENDOR\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token class-name\">VendorDatabaseIdProvider</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token comment\">// è¯­è¨€é©±åŠ¨ç±»åˆ«å</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>typeAliasRegistry<span class=\"token punctuation\">.</span><span class=\"token function\">registerAlias</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"XML\"</span><span class=\"token punctuation\">,</span><span class=\"token class-name\">XMLLanguageDriver</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>typeAliasRegistry<span class=\"token punctuation\">.</span><span class=\"token function\">registerAlias</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"RAW\"</span><span class=\"token punctuation\">,</span><span class=\"token class-name\">RawLanguageDriver</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token comment\">// æ—¥å¿—ç±»åˆ«å</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>typeAliasRegistry<span class=\"token punctuation\">.</span><span class=\"token function\">registerAlias</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"SLF4J\"</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">Slf4jImpl</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>typeAliasRegistry<span class=\"token punctuation\">.</span><span class=\"token function\">registerAlias</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"COMMONS_LOGGTNG\"</span><span class=\"token punctuation\">,</span><span class=\"token class-name\">JakartmCommonsLogginglmpl</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>typeAliasRegistry<span class=\"token punctuation\">.</span><span class=\"token function\">registerAlias</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"LOG4J\"</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">Log4jImpl</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>typeAliasRegistry<span class=\"token punctuation\">.</span><span class=\"token function\">registerAlias</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"LOG4J2\"</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">Log4j2Impl</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>typeAliasRegistry<span class=\"token punctuation\">.</span><span class=\"token function\">registerAlias</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"JDK_LOGGING\"</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">Jdk14LoggingImpl</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>typeAliasRegistry<span class=\"token punctuation\">.</span><span class=\"token function\">registerAlias</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"STDOUT_LOGGING\"</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">StdOutImpl</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>typeAliasRegistry<span class=\"token punctuation\">.</span><span class=\"token function\">registerAlias</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"NO_LOGGING\"</span><span class=\"token punctuation\">,</span><span class=\"token class-name\">NoLoggingImpl</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre><span class=\"token comment\">// åŠ¨æ€ä»£ç†åˆ«å</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>typeAliasRegistry<span class=\"token punctuation\">.</span><span class=\"token function\">registerAlias</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"CGLIB\"</span><span class=\"token punctuation\">,</span><span class=\"token class-name\">CglibProxyFactory</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>typeAliasRegistry<span class=\"token punctuation\">.</span><span class=\"token function\">registerAlias</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"JAVASSIST\"</span><span class=\"token punctuation\">,</span><span class=\"token class-name\">JavassistProxyFactory</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><h4 id=\"è‡ªå®šä¹‰åˆ«å\"><a class=\"anchor\" href=\"#è‡ªå®šä¹‰åˆ«å\">#</a> è‡ªå®šä¹‰åˆ«å</h4>\n<p>æˆ‘ä»¬å¯ä»¥é€šè¿‡ TypeAliasRegistry ç±»çš„ registerAlias æ–¹æ³•æ³¨å†Œï¼Œä¹Ÿå¯ä»¥é‡‡ç”¨é…ç½®æ–‡ä»¶æˆ–è€…æ‰«ææ–¹å¼æ¥è‡ªå®šä¹‰åˆ«åã€‚</p>\n<p>ä½¿ç”¨é…ç½®æ–‡ä»¶å®šä¹‰åˆ«åï¼š</p>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>typeAliases</span><span class=\"token punctuation\">></span></span><span class=\"token comment\">&lt;!-- åˆ«å --></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>typeAlias</span> <span class=\"token attr-name\">alias</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>role<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>com.mybatis.po.Role<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>typeAlias</span> <span class=\"token attr-name\">alias</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>user<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>com.mybatis.po.User<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>typeAliases</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p>æ‰«ææ–¹å¼é…ç½®åˆ«åï¼š</p>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>typeAliases</span><span class=\"token punctuation\">></span></span><span class=\"token comment\">&lt;!-- åˆ«å --></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token comment\">&lt;!--  MyBatis å°†æ‰«æè¿™ä¸ªåŒ…é‡Œé¢çš„ç±»ï¼Œå°†å…¶ç¬¬ä¸€ä¸ªå­—æ¯å˜ä¸ºå°å†™ä½œä¸ºå…¶åˆ«å --></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>package</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>com.xfc.entity<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>typeAliases</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p>æ³¨è§£æ–¹å¼é…ç½®åˆ«åï¼š</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc<span class=\"token punctuation\">.</span>entity</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token annotation punctuation\">@Alias</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"user\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token class-name\">Class</span> <span class=\"token class-name\">User</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token comment\">//...... çœç•¥éƒ¨åˆ†å†…å®¹</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h3 id=\"typehandler-ç±»å‹è½¬æ¢å™¨\"><a class=\"anchor\" href=\"#typehandler-ç±»å‹è½¬æ¢å™¨\">#</a> TypeHandler ç±»å‹è½¬æ¢å™¨</h3>\n<p>åœ¨ typeHandler ä¸­ï¼Œåˆ†ä¸º jdbcType å’Œ javaTypeï¼Œå…¶ä¸­ jdbcType ç”¨äºå®šä¹‰æ•°æ®åº“ç±»å‹ï¼Œè€Œ javaType ç”¨äºå®šä¹‰ Java ç±»å‹ï¼Œé‚£ä¹ˆ typeHandler çš„ä½œç”¨å°±æ˜¯æ‰¿æ‹… jdbcType å’Œ javaType ä¹‹é—´çš„ç›¸äº’è½¬æ¢ã€‚</p>\n<p>åœ¨å¾ˆå¤šæƒ…å†µä¸‹æˆ‘ä»¬å¹¶ä¸éœ€è¦å»é…ç½® typeHandlerã€jdbcTypeã€javaTypeï¼Œå› ä¸º MyBatis ä¼šæ¢æµ‹åº”è¯¥ä½¿ç”¨ä»€ä¹ˆç±»å‹çš„ typeHandler è¿›è¡Œå¤„ç†ï¼Œè€Œå¯¹äºé‚£äº›éœ€è¦ä½¿ç”¨è‡ªå®šä¹‰æšä¸¾çš„åœºæ™¯ï¼Œæˆ–è€…æ•°æ®åº“ä½¿ç”¨ç‰¹æ®Šæ•°æ®ç±»å‹çš„åœºæ™¯ï¼Œå¯ä»¥ä½¿ç”¨è‡ªå®šä¹‰çš„ typeHandler å»å¤„ç†ç±»å‹ä¹‹é—´çš„è½¬æ¢é—®é¢˜ã€‚</p>\n<p>åœ¨ MyBatis ä¸­å­˜åœ¨ç³»ç»Ÿå®šä¹‰ typeHandler å’Œè‡ªå®šä¹‰ typeHandlerã€‚MyBatis ä¼šæ ¹æ® javaType å’Œæ•°æ®åº“çš„ jdbcType æ¥å†³å®šé‡‡ç”¨å“ªä¸ª typeHandler å¤„ç†è¿™äº›è½¬æ¢è§„åˆ™ã€‚</p>\n<h4 id=\"ç³»ç»Ÿå®šä¹‰çš„-typehandler\"><a class=\"anchor\" href=\"#ç³»ç»Ÿå®šä¹‰çš„-typehandler\">#</a> ç³»ç»Ÿå®šä¹‰çš„ TypeHandler</h4>\n<p>MyBatis å†…éƒ¨å®šä¹‰äº†è®¸å¤šæœ‰ç”¨çš„ typeHandler ï¼Œä½†åœ¨å¤§éƒ¨åˆ†çš„æƒ…å†µä¸‹æ— é¡»æ˜¾å¼åœ°å£°æ˜ jdbcType å’Œ javaTypeï¼Œæˆ–è€…ç”¨ typeHandler å»æŒ‡å®šå¯¹åº”çš„ typeHandler æ¥å®ç°æ•°æ®ç±»å‹è½¬æ¢ï¼Œå› ä¸º MyBatis ç³»ç»Ÿä¼šè‡ªå·±æ¢æµ‹ã€‚</p>\n<p>è¦å®ç° typeHandler å°±éœ€è¦å»å®ç°æ¥å£ typeHandlerï¼Œæˆ–è€…ç»§æ‰¿ BaseTypeHandler ã€‚</p>\n<h4 id=\"è‡ªå®šä¹‰-typehandler\"><a class=\"anchor\" href=\"#è‡ªå®šä¹‰-typehandler\">#</a> è‡ªå®šä¹‰ TypeHandler</h4>\n<p><strong>é…ç½® TypeHandler</strong></p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc<span class=\"token punctuation\">.</span>test</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>sql<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">CallableStatement</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>sql<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">PreparedStatement</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>sql<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">SQLException</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>sql<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">ResultSet</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>apache<span class=\"token punctuation\">.</span>ibatis<span class=\"token punctuation\">.</span>type<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">JdbcType</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>apache<span class=\"token punctuation\">.</span>ibatis<span class=\"token punctuation\">.</span>type<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">TypeHandler</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>apache<span class=\"token punctuation\">.</span>log4j<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Logger</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">MyTypeHandler</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">TypeHandler</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">></span></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token class-name\">Logger</span> logger <span class=\"token operator\">=</span> <span class=\"token class-name\">Logger</span><span class=\"token punctuation\">.</span><span class=\"token function\">getLogger</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">MyTypeHandler</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">setParameter</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">PreparedStatement</span> ps<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> i<span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span> parameter<span class=\"token punctuation\">,</span> <span class=\"token class-name\">JdbcType</span> jdbcType<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">SQLException</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        logger<span class=\"token punctuation\">.</span><span class=\"token function\">info</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"è®¾ç½® string å‚æ•°ã€\"</span> <span class=\"token operator\">+</span> parameter <span class=\"token operator\">+</span> <span class=\"token string\">\"ã€‘\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        ps<span class=\"token punctuation\">.</span><span class=\"token function\">setString</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">,</span> parameter<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    <span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">getResult</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">ResultSet</span> rs<span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span> columnName<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">SQLException</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>        <span class=\"token class-name\">String</span> result <span class=\"token operator\">=</span> rs<span class=\"token punctuation\">.</span><span class=\"token function\">getString</span><span class=\"token punctuation\">(</span>columnName<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>        logger<span class=\"token punctuation\">.</span><span class=\"token function\">info</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"è¯»å– string å‚æ•° 1 ã€\"</span> <span class=\"token operator\">+</span> result <span class=\"token operator\">+</span> <span class=\"token string\">\"ã€‘\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>        <span class=\"token keyword\">return</span> result<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>    <span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">getResult</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">ResultSet</span> rs<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> columnIndex<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">SQLException</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>        <span class=\"token class-name\">String</span> result <span class=\"token operator\">=</span> rs<span class=\"token punctuation\">.</span><span class=\"token function\">getString</span><span class=\"token punctuation\">(</span>columnIndex<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>        logger<span class=\"token punctuation\">.</span><span class=\"token function\">info</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"è¯»å–string å‚æ•° 2ã€\"</span> <span class=\"token operator\">+</span> result <span class=\"token operator\">+</span> <span class=\"token string\">\"ã€‘\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>        <span class=\"token keyword\">return</span> result<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>    <span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">getResult</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">CallableStatement</span> cs<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> columnIndex<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">SQLException</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>        <span class=\"token class-name\">String</span> result <span class=\"token operator\">=</span> cs<span class=\"token punctuation\">.</span><span class=\"token function\">getString</span><span class=\"token punctuation\">(</span>columnIndex<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>        logger<span class=\"token punctuation\">.</span><span class=\"token function\">info</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"è¯»å– string å‚æ•° 3 ã€\"</span> <span class=\"token operator\">+</span> result <span class=\"token operator\">+</span> <span class=\"token string\">\"ã€‘\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>        <span class=\"token keyword\">return</span> result<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p><strong>å¯ç”¨ TypeHandler</strong></p>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>typeHandlers</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>typeHandler</span> <span class=\"token attr-name\">jdbcType</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>VARCHAR<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">javaType</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>string<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">handler</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>com.xfc.test.MyTypeHandler<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>typeHandlers</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p>é…ç½®å®Œæˆåç³»ç»Ÿæ‰ä¼šè¯»å–è‡ªå®šä¹‰çš„ TypeHandler ï¼Œå½“ jdbcType å’Œ javaType èƒ½ä¸è‡ªå®šä¹‰ TypeHandler å¯¹åº”æ—¶ï¼Œå®ƒå°±ä¼šå¯åŠ¨è¯¥ TypeHandlerã€‚</p>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>select</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>findRoles2<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">parameterType</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>string<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">resultMap</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>roleMapper<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    select id, role_name, note from t_role where note like concat ('%', #&#123;note, typeHandler=com.mybatis.test.MyTypeHandler&#125;,'%')</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>select</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><blockquote>\n<p>è¦ä¹ˆæŒ‡å®šäº†ä¸è‡ªå®šä¹‰ typeHandler ä¸€è‡´çš„ jdbcType å’Œ javaTypeï¼Œè¦ä¹ˆç›´æ¥ä½¿ç”¨ typeHandler æŒ‡å®šå…·ä½“çš„å®ç°ç±»ã€‚</p>\n</blockquote>\n<p>TypeHandler ä¹Ÿå¯ä»¥é‡‡ç”¨åŒ…æ‰«æçš„å½¢å¼ï¼š</p>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>typeHandlertype</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>package</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>com.xfc.handler<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>typeHandlertype</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p>ä½†é‡‡ç”¨åŒ…æ‰«æçš„å½¢å¼æ—¶ï¼Œéœ€è¦åœ¨å¯¹åº”çš„ TypeHandler ä¸­æŒ‡å®š jdbcType ä¸ javaType çš„å¯¹åº”å…³ç³»ã€‚</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token annotation punctuation\">@MappedTypes</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token annotation punctuation\">@MappedjdbcTypes</span><span class=\"token punctuation\">(</span>jdbcType<span class=\"token punctuation\">.</span>VARCHAR<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">MyTypeHandler</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">TypeHandler</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token comment\">//...... çœç•¥éƒ¨åˆ†å†…å®¹</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h4 id=\"æšä¸¾-typehandler\"><a class=\"anchor\" href=\"#æšä¸¾-typehandler\">#</a> æšä¸¾ TypeHandler</h4>\n<p>åœ¨ç»å¤§å¤šæ•°æƒ…å†µä¸‹ï¼ŒtypeHandler å› ä¸ºæšä¸¾è€Œä½¿ç”¨ï¼ŒMyBatis å·²ç»å®šä¹‰äº†ä¸¤ä¸ªç±»ä½œä¸ºæšä¸¾ç±»å‹çš„æ”¯æŒï¼Œè¿™ä¸¤ä¸ªç±»åˆ†åˆ«æ˜¯ï¼š</p>\n<ul>\n<li>EnumOrdinalTypeHandlerã€‚</li>\n<li>EnumTypeHandlerã€‚</li>\n</ul>\n<h4 id=\"blobtypehandler-è¯»å–-blob-å­—æ®µ\"><a class=\"anchor\" href=\"#blobtypehandler-è¯»å–-blob-å­—æ®µ\">#</a> BlobTypeHandler è¯»å– Blob å­—æ®µ</h4>\n<h3 id=\"objectfactoryå¯¹è±¡å·¥å‚\"><a class=\"anchor\" href=\"#objectfactoryå¯¹è±¡å·¥å‚\">#</a> ObjectFactoryï¼ˆå¯¹è±¡å·¥å‚ï¼‰</h3>\n<p>å½“åˆ›å»ºç»“æœé›†æ—¶ï¼ŒMyBatis ä¼šä½¿ç”¨ä¸€ä¸ªå¯¹è±¡å·¥å‚æ¥å®Œæˆåˆ›å»ºè¿™ä¸ªç»“æœé›†å®ä¾‹ã€‚åœ¨é»˜è®¤çš„æƒ…å†µä¸‹ï¼ŒMyBatis ä¼šä½¿ç”¨å…¶å®šä¹‰çš„å¯¹è±¡å·¥å‚ â€”â€”DefaultObjectFactoryï¼ˆorg.apache.ibatis.reflection.factory.DefaultObjectFactoryï¼‰æ¥å®Œæˆå¯¹åº”çš„å·¥ä½œã€‚</p>\n<p>MyBatis å…è®¸æ³¨å†Œè‡ªå®šä¹‰çš„ ObjectFactoryã€‚å¦‚æœè‡ªå®šä¹‰ï¼Œåˆ™éœ€è¦å®ç°æ¥å£ org.apache.ibatis.reflection.factory.ObjectFactoryï¼Œå¹¶ç»™äºˆé…ç½®ã€‚</p>\n<p><strong>è‡ªå®šä¹‰å¯¹è±¡å·¥å‚</strong></p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>mybatis<span class=\"token punctuation\">.</span>test</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">List</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Properties</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>apache<span class=\"token punctuation\">.</span>ibatis<span class=\"token punctuation\">.</span>reflection<span class=\"token punctuation\">.</span>factory<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">DefaultObjectFactory</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>apache<span class=\"token punctuation\">.</span>log4j<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Logger</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">MyObjectFactory</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">DefaultObjectFactory</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    </pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">final</span> <span class=\"token keyword\">long</span> serialVersionUID <span class=\"token operator\">=</span> <span class=\"token operator\">-</span><span class=\"token number\">4293520460481008255L</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    </pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token class-name\">Logger</span> log <span class=\"token operator\">=</span> <span class=\"token class-name\">Logger</span><span class=\"token punctuation\">.</span><span class=\"token function\">getLogger</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">MyObjectFactory</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Object</span> temp <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    </pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">setProperties</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Properties</span> properties<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">setProperties</span><span class=\"token punctuation\">(</span>properties<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        log<span class=\"token punctuation\">.</span><span class=\"token function\">info</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"åˆå§‹åŒ–å‚æ•°ï¼šã€\"</span> <span class=\"token operator\">+</span> properties<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">\"ã€‘\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    </pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    <span class=\"token comment\">// æ–¹æ³• 2</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    <span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">T</span><span class=\"token punctuation\">></span></span> <span class=\"token class-name\">T</span> <span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Class</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">T</span><span class=\"token punctuation\">></span></span> type<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>        <span class=\"token class-name\">T</span> result <span class=\"token operator\">=</span> <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span>type<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>        log<span class=\"token punctuation\">.</span><span class=\"token function\">info</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"åˆ›å»ºå¯¹è±¡ï¼š\"</span> <span class=\"token operator\">+</span> result<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>        log<span class=\"token punctuation\">.</span><span class=\"token function\">info</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"æ˜¯å¦å’Œä¸Šæ¬¡åˆ›å»ºçš„æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼šã€\"</span> <span class=\"token operator\">+</span> <span class=\"token punctuation\">(</span>temp <span class=\"token operator\">==</span> result<span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">\"ã€‘\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>        <span class=\"token keyword\">return</span> result<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>    </pre></td></tr><tr><td data-num=\"30\"></td><td><pre>    <span class=\"token comment\">// æ–¹æ³• 1</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>    <span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">T</span><span class=\"token punctuation\">></span></span> <span class=\"token class-name\">T</span> <span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Class</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">T</span><span class=\"token punctuation\">></span></span> type<span class=\"token punctuation\">,</span> <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Class</span><span class=\"token punctuation\">&lt;</span><span class=\"token operator\">?</span><span class=\"token punctuation\">></span><span class=\"token punctuation\">></span></span> constructorArgTypes<span class=\"token punctuation\">,</span> <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Object</span><span class=\"token punctuation\">></span></span> constructorArgs<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>        <span class=\"token class-name\">T</span> result <span class=\"token operator\">=</span> <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span>type<span class=\"token punctuation\">,</span> constructorArgTypes<span class=\"token punctuation\">,</span> constructorArgs<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>        log<span class=\"token punctuation\">.</span><span class=\"token function\">info</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"åˆ›å»ºå¯¹è±¡ï¼š\"</span> <span class=\"token operator\">+</span> result<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>        temp <span class=\"token operator\">=</span> result<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>        <span class=\"token keyword\">return</span> result<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>    </pre></td></tr><tr><td data-num=\"39\"></td><td><pre>    <span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">T</span><span class=\"token punctuation\">></span></span> <span class=\"token keyword\">boolean</span> <span class=\"token function\">isCollection</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Class</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">T</span><span class=\"token punctuation\">></span></span> type<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">isCollection</span><span class=\"token punctuation\">(</span>type<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>objectFactory</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>com.xfc.factory.MyObjectFactory<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>prop1<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>value1<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>objectFactory</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p>æµ‹è¯•ï¼š</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc<span class=\"token punctuation\">.</span>test</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>io<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">IOException</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>io<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">InputStream</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>apache<span class=\"token punctuation\">.</span>ibatis<span class=\"token punctuation\">.</span>io<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Resources</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>apache<span class=\"token punctuation\">.</span>ibatis<span class=\"token punctuation\">.</span>session<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">SqlSession</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>apache<span class=\"token punctuation\">.</span>ibatis<span class=\"token punctuation\">.</span>session<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">SqlSessionFactory</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>apache<span class=\"token punctuation\">.</span>ibatis<span class=\"token punctuation\">.</span>session<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">SqlSessionFactoryBuilder</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>apache<span class=\"token punctuation\">.</span>log4j<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Logger</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc<span class=\"token punctuation\">.</span>mapper<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">UserMapper</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc<span class=\"token punctuation\">.</span>entity<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">User</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">MyBatisTest</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">IOException</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        <span class=\"token class-name\">Logger</span> log <span class=\"token operator\">=</span> <span class=\"token class-name\">Logger</span><span class=\"token punctuation\">.</span><span class=\"token function\">getLogger</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">MyBatisTest</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        <span class=\"token class-name\">InputStream</span> config <span class=\"token operator\">=</span> <span class=\"token class-name\">Resources</span><span class=\"token punctuation\">.</span><span class=\"token function\">getResourceAsStream</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"mybatis-config.xml\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        <span class=\"token class-name\">SqlSessionFactory</span> ssf <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">SqlSessionFactoryBuilder</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">build</span><span class=\"token punctuation\">(</span>config<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>        <span class=\"token class-name\">SqlSession</span> ss <span class=\"token operator\">=</span> ssf<span class=\"token punctuation\">.</span><span class=\"token function\">openSession</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>        <span class=\"token class-name\">UserMapper</span> userMapper <span class=\"token operator\">=</span> ss<span class=\"token punctuation\">.</span><span class=\"token function\">getMapper</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">UserMapper</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>        <span class=\"token class-name\">User</span> user <span class=\"token operator\">=</span> userMapper<span class=\"token punctuation\">.</span><span class=\"token function\">getUser</span><span class=\"token punctuation\">(</span><span class=\"token number\">1L</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>user<span class=\"token punctuation\">.</span><span class=\"token function\">getUserName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h3 id=\"å‚è€ƒ\"><a class=\"anchor\" href=\"#å‚è€ƒ\">#</a> å‚è€ƒ</h3>\n<ul>\n<li><span class=\"exturl\" data-url=\"aHR0cDovL2MuYmlhbmNoZW5nLm5ldC9teWJhdGlz\">http://c.biancheng.net/mybatis</span></li>\n</ul>\n",
            "tags": [
                "è®¡ç®—æœºç§‘å­¦",
                "JAVAå­¦ä¹ è·¯çº¿",
                "è¿›é˜¶ç¯‡",
                "java",
                "mybatis"
            ]
        },
        {
            "id": "https://www.chinmoku.cc/computer-science/java-learning-path/2-intermediate/spring-tutorial/",
            "url": "https://www.chinmoku.cc/computer-science/java-learning-path/2-intermediate/spring-tutorial/",
            "title": "Spring æ•™ç¨‹",
            "date_published": "2021-08-17T01:19:24.000Z",
            "content_html": "<div class=\"note info\">\n<p>Spring æ¡†æ¶æ˜¯ Java å¼€å‘å¿…å¤‡çš„åŸºç¡€æ¡†æ¶ï¼Œä¹Ÿæ˜¯æ¯ä¸ª Java å¼€å‘è€…å¿…é¡»æŒæ¡çš„ï¼ŒåŒæ—¶ï¼Œä¹Ÿæ˜¯é¢è¯•è¾ƒä¸ºèšé›†çš„çŸ¥è¯†åŒºåŸŸã€‚è¦åœ¨ Java é¢†åŸŸæ›´åŠ æ·±å…¥ï¼Œä¹Ÿå¿…é¡»æ‹¥æœ‰ Spring åŸºç¡€ï¼Œæ¯•ç«Ÿå¼€å‘ Springbootã€Springcloud ä¹Ÿéƒ½æ˜¯åŸºäº Spring è¿›è¡Œå®ç°çš„ã€‚</p>\n</div>\n<h3 id=\"æ¦‚è¿°\"><a class=\"anchor\" href=\"#æ¦‚è¿°\">#</a> æ¦‚è¿°</h3>\n<p>Spring æœ€è®¤åŒçš„æŠ€æœ¯æ˜¯æ§åˆ¶åè½¬çš„ ** ä¾èµ–æ³¨å…¥ï¼ˆDIï¼‰** æ¨¡å¼ã€‚æ§åˆ¶åè½¬ï¼ˆIoCï¼‰æ˜¯ä¸€ä¸ªé€šç”¨çš„æ¦‚å¿µï¼Œå®ƒå¯ä»¥ç”¨è®¸å¤šä¸åŒçš„æ–¹å¼å»è¡¨è¾¾ï¼Œä¾èµ–æ³¨å…¥ä»…ä»…æ˜¯æ§åˆ¶åè½¬çš„ä¸€ä¸ªå…·ä½“çš„ä¾‹å­ã€‚ä¾èµ–æ³¨å…¥å¯ä»¥ä»¥å‘æ„é€ å‡½æ•°ä¼ é€’å‚æ•°çš„æ–¹å¼å‘ç”Ÿï¼Œæˆ–è€…é€šè¿‡ä½¿ç”¨ setter æ–¹æ³• post-constructionã€‚</p>\n<p>Spring æ¡†æ¶çš„ä¸€ä¸ªå…³é”®ç»„ä»¶æ˜¯<ins>é¢å‘åˆ‡é¢çš„ç¨‹åºè®¾è®¡ï¼ˆAOPï¼‰æ¡†æ¶</ins>ã€‚ä¸€ä¸ªç¨‹åºä¸­è·¨è¶Šå¤šä¸ªç‚¹çš„åŠŸèƒ½è¢«ç§°ä¸º  <code>æ¨ªåˆ‡å…³æ³¨ç‚¹</code> ï¼Œè¿™äº›æ¨ªåˆ‡å…³æ³¨ç‚¹åœ¨æ¦‚å¿µä¸Šç‹¬ç«‹äºåº”ç”¨ç¨‹åºçš„ä¸šåŠ¡é€»è¾‘ã€‚åœ¨ OOP ä¸­æ¨¡å—åŒ–çš„å…³é”®å•å…ƒæ˜¯ç±»ï¼Œè€Œåœ¨ AOP ä¸­æ¨¡å—åŒ–çš„å…³é”®å•å…ƒæ˜¯åˆ‡é¢ã€‚AOP å¸®åŠ©ä½ å°†æ¨ªåˆ‡å…³æ³¨ç‚¹ä»å®ƒä»¬æ‰€å½±å“çš„å¯¹è±¡ä¸­åˆ†ç¦»å‡ºæ¥ï¼Œç„¶è€Œä¾èµ–æ³¨å…¥å¸®åŠ©ä½ å°†ä½ çš„åº”ç”¨ç¨‹åºå¯¹è±¡ä»å½¼æ­¤ä¸­åˆ†ç¦»å‡ºæ¥ã€‚Spring æ¡†æ¶çš„ AOP æ¨¡å—æä¾›äº†é¢å‘åˆ‡é¢çš„ç¨‹åºè®¾è®¡å®ç°ï¼Œå¯ä»¥å®šä¹‰è¯¸å¦‚æ–¹æ³•æ‹¦æˆªå™¨å’Œåˆ‡å…¥ç‚¹ç­‰ï¼Œä»è€Œä½¿å®ç°åŠŸèƒ½çš„ä»£ç å½»åº•çš„è§£è€¦å‡ºæ¥ã€‚</p>\n<h3 id=\"ä½“ç³»ç»“æ„\"><a class=\"anchor\" href=\"#ä½“ç³»ç»“æ„\">#</a> ä½“ç³»ç»“æ„</h3>\n<p><img data-src=\"https://img.xfc-exclave.com/2021/08/5f7fb3df63f58ad789d0e7a8ef1574e31629890494.png\" alt=\"Springæ¡†æ¶ç»“æ„\" /></p>\n<h4 id=\"æ ¸å¿ƒå®¹å™¨\"><a class=\"anchor\" href=\"#æ ¸å¿ƒå®¹å™¨\">#</a> æ ¸å¿ƒå®¹å™¨</h4>\n<p>æ ¸å¿ƒå®¹å™¨ç”±  <code>spring-core</code>  ï¼Œ <code>spring-beans</code>  ï¼Œ  <code>spring-context</code>  ï¼Œ  <code>spring-context-support</code>  å’Œ  <code>spring-expression</code>  ï¼ˆSpELï¼ŒSpring è¡¨è¾¾å¼è¯­è¨€ï¼ŒSpring Expression Languageï¼‰ç­‰æ¨¡å—ç»„æˆã€‚</p>\n<ul>\n<li><span class=\"pink\">spring-core</span> æ¨¡å—æä¾›äº†æ¡†æ¶çš„åŸºæœ¬ç»„æˆéƒ¨åˆ†ï¼ŒåŒ…æ‹¬ IoC å’Œä¾èµ–æ³¨å…¥åŠŸèƒ½ã€‚</li>\n<li><span class=\"pink\">spring-beans</span> æ¨¡å—æä¾› BeanFactoryï¼Œå·¥å‚æ¨¡å¼çš„å¾®å¦™å®ç°ï¼Œå®ƒç§»é™¤äº†ç¼–ç å¼å•ä¾‹çš„éœ€è¦ï¼Œå¹¶ä¸”å¯ä»¥æŠŠé…ç½®å’Œä¾èµ–ä»å®é™…ç¼–ç é€»è¾‘ä¸­è§£è€¦ã€‚</li>\n<li><span class=\"pink\">spring-context</span> æ¨¡å—å»ºç«‹åœ¨ç”± core å’Œ beans æ¨¡å—çš„åŸºç¡€ä¸Šå»ºç«‹èµ·æ¥çš„ï¼Œå®ƒä»¥ä¸€ç§ç±»ä¼¼äº JNDI æ³¨å†Œçš„æ–¹å¼è®¿é—®å¯¹è±¡ã€‚Context æ¨¡å—ç»§æ‰¿è‡ª Bean æ¨¡å—ï¼Œå¹¶ä¸”æ·»åŠ äº†å›½é™…åŒ–ï¼ˆæ¯”å¦‚ï¼Œä½¿ç”¨èµ„æºæŸï¼‰ã€äº‹ä»¶ä¼ æ’­ã€èµ„æºåŠ è½½å’Œé€æ˜åœ°åˆ›å»ºä¸Šä¸‹æ–‡ï¼ˆæ¯”å¦‚ï¼Œé€šè¿‡ Servelet å®¹å™¨ï¼‰ç­‰åŠŸèƒ½ã€‚Context æ¨¡å—ä¹Ÿæ”¯æŒ Java EE çš„åŠŸèƒ½ï¼Œæ¯”å¦‚ EJBã€JMX å’Œè¿œç¨‹è°ƒç”¨ç­‰ã€‚ <strong>ApplicationContext</strong> æ¥å£æ˜¯ Context æ¨¡å—çš„ç„¦ç‚¹ã€‚ <strong>spring-context-support</strong> æä¾›äº†å¯¹ç¬¬ä¸‰æ–¹åº“é›†æˆåˆ° Spring ä¸Šä¸‹æ–‡çš„æ”¯æŒï¼Œæ¯”å¦‚ç¼“å­˜ï¼ˆEhCache, Guava, JCacheï¼‰ã€é‚®ä»¶ï¼ˆJavaMailï¼‰ã€è°ƒåº¦ï¼ˆCommonJ, Quartzï¼‰ã€æ¨¡æ¿å¼•æ“ï¼ˆFreeMarker, JasperReports, Velocityï¼‰ç­‰ã€‚</li>\n<li><span class=\"pink\">spring-expression</span> æ¨¡å—æä¾›äº†å¼ºå¤§çš„è¡¨è¾¾å¼è¯­è¨€ï¼Œç”¨äºåœ¨è¿è¡Œæ—¶æŸ¥è¯¢å’Œæ“ä½œå¯¹è±¡å›¾ï¼Œå®ƒæ”¯æŒ set å’Œ get å±æ€§å€¼ã€å±æ€§èµ‹å€¼ã€æ–¹æ³•è°ƒç”¨ã€è®¿é—®æ•°ç»„é›†åˆåŠç´¢å¼•çš„å†…å®¹ã€é€»è¾‘ç®—æœ¯è¿ç®—ã€å‘½åå˜é‡ã€é€šè¿‡åå­—ä» Spring IoC å®¹å™¨æ£€ç´¢å¯¹è±¡ï¼Œè¿˜æ”¯æŒåˆ—è¡¨çš„æŠ•å½±ã€é€‰æ‹©ä»¥åŠèšåˆç­‰ã€‚</li>\n</ul>\n<h4 id=\"æ•°æ®è®¿é—®é›†æˆ\"><a class=\"anchor\" href=\"#æ•°æ®è®¿é—®é›†æˆ\">#</a> æ•°æ®è®¿é—® / é›†æˆ</h4>\n<p>æ•°æ®è®¿é—® / é›†æˆå±‚åŒ…æ‹¬ JDBCï¼ŒORMï¼ŒOXMï¼ŒJMS å’Œäº‹åŠ¡å¤„ç†æ¨¡å—ã€‚</p>\n<ul>\n<li><span class=\"pink\">JDBC</span> æ¨¡å—æä¾›äº† JDBC æŠ½è±¡å±‚ï¼Œå®ƒæ¶ˆé™¤äº†å†—é•¿çš„ JDBC ç¼–ç å’Œå¯¹æ•°æ®åº“ä¾›åº”å•†ç‰¹å®šé”™è¯¯ä»£ç çš„è§£æã€‚</li>\n<li><span class=\"pink\">ORM</span> æ¨¡å—æä¾›äº†å¯¹æµè¡Œçš„å¯¹è±¡å…³ç³»æ˜ å°„ API çš„é›†æˆï¼ŒåŒ…æ‹¬ JPAã€JDO å’Œ Hibernate ç­‰ã€‚é€šè¿‡æ­¤æ¨¡å—å¯ä»¥è®©è¿™äº› ORM æ¡†æ¶å’Œ spring çš„å…¶å®ƒåŠŸèƒ½æ•´åˆï¼Œæ¯”å¦‚å‰é¢æåŠçš„äº‹åŠ¡ç®¡ç†ã€‚</li>\n<li><span class=\"pink\">OXM</span> ï¼ˆObject XML Mappingï¼‰æ¨¡å—æä¾›äº†å¯¹ OXM å®ç°çš„æ”¯æŒï¼Œæ¯”å¦‚ JAXBã€Castorã€XML Beansã€JiBXã€XStream ç­‰ã€‚</li>\n<li><span class=\"pink\">JMS</span> ï¼ˆJava Message Serviceï¼‰æ¨¡å—åŒ…å«ç”Ÿäº§ï¼ˆproduceï¼‰å’Œæ¶ˆè´¹ï¼ˆconsumeï¼‰æ¶ˆæ¯çš„åŠŸèƒ½ã€‚ä» Spring 4.1 å¼€å§‹ï¼Œé›†æˆäº† spring-messaging æ¨¡å—ã€‚</li>\n<li><span class=\"pink\">äº‹åŠ¡æ¨¡å—</span>ä¸ºå®ç°ç‰¹æ®Šæ¥å£ç±»åŠæ‰€æœ‰çš„ POJO æ”¯æŒç¼–ç¨‹å¼å’Œå£°æ˜å¼äº‹åŠ¡ç®¡ç†ã€‚</li>\n</ul>\n<h4 id=\"web\"><a class=\"anchor\" href=\"#web\">#</a> Web</h4>\n<p>Web å±‚ç”± Webï¼ŒWeb-MVCï¼ŒWeb-Socket å’Œ Web-Portlet ç»„æˆã€‚</p>\n<ul>\n<li><span class=\"pink\">Web æ¨¡å—</span>æä¾›é¢å‘ web çš„åŸºæœ¬åŠŸèƒ½å’Œé¢å‘ web çš„åº”ç”¨ä¸Šä¸‹æ–‡ï¼Œæ¯”å¦‚å¤šéƒ¨åˆ†ï¼ˆmultipartï¼‰æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½ã€ä½¿ç”¨ Servlet ç›‘å¬å™¨åˆå§‹åŒ– IoC å®¹å™¨ç­‰ã€‚å®ƒè¿˜åŒ…æ‹¬ HTTP å®¢æˆ·ç«¯ä»¥åŠ Spring è¿œç¨‹è°ƒç”¨ä¸­ä¸ web ç›¸å…³çš„éƒ¨åˆ†ã€‚</li>\n<li><span class=\"pink\">Web-MVC æ¨¡å—</span>ä¸º web åº”ç”¨æä¾›äº†æ¨¡å‹è§†å›¾æ§åˆ¶ï¼ˆMVCï¼‰å’Œ REST Web æœåŠ¡çš„å®ç°ã€‚Spring çš„ MVC æ¡†æ¶å¯ä»¥ä½¿é¢†åŸŸæ¨¡å‹ä»£ç å’Œ web è¡¨å•å®Œå…¨åœ°åˆ†ç¦»ï¼Œä¸”å¯ä»¥ä¸ Spring æ¡†æ¶çš„å…¶å®ƒæ‰€æœ‰åŠŸèƒ½è¿›è¡Œé›†æˆã€‚</li>\n<li><span class=\"pink\">Web-Socket æ¨¡å—</span>ä¸º WebSocket-based æä¾›äº†æ”¯æŒï¼Œè€Œä¸”åœ¨ web åº”ç”¨ç¨‹åºä¸­æä¾›äº†å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯ä¹‹é—´é€šä¿¡çš„ä¸¤ç§æ–¹å¼ã€‚</li>\n<li><span class=\"pink\">Web-Portlet æ¨¡å—</span>æä¾›äº†ç”¨äº Portlet ç¯å¢ƒçš„ MVC å®ç°ï¼Œå¹¶åæ˜ äº† spring-webmvc æ¨¡å—çš„åŠŸèƒ½ã€‚</li>\n</ul>\n<h4 id=\"å…¶ä»–\"><a class=\"anchor\" href=\"#å…¶ä»–\">#</a> å…¶ä»–</h4>\n<ul>\n<li><span class=\"pink\">AOP æ¨¡å—</span>æä¾›äº†é¢å‘åˆ‡é¢çš„ç¼–ç¨‹å®ç°ï¼Œå…è®¸ä½ å®šä¹‰æ–¹æ³•æ‹¦æˆªå™¨å’Œåˆ‡å…¥ç‚¹å¯¹ä»£ç è¿›è¡Œå¹²å‡€åœ°è§£è€¦ï¼Œä»è€Œä½¿å®ç°åŠŸèƒ½çš„ä»£ç å½»åº•çš„è§£è€¦å‡ºæ¥ã€‚ä½¿ç”¨æºç çº§çš„å…ƒæ•°æ®ï¼Œå¯ä»¥ç”¨ç±»ä¼¼äº.Net å±æ€§çš„æ–¹å¼åˆå¹¶è¡Œä¸ºä¿¡æ¯åˆ°ä»£ç ä¸­ã€‚</li>\n<li><span class=\"pink\">Aspects æ¨¡å—</span>æä¾›äº†ä¸ AspectJ çš„é›†æˆï¼Œæ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§ä¸”æˆç†Ÿçš„é¢å‘åˆ‡é¢ç¼–ç¨‹ï¼ˆAOPï¼‰æ¡†æ¶ã€‚</li>\n<li><span class=\"pink\">Instrumentation æ¨¡å—</span>åœ¨ä¸€å®šçš„åº”ç”¨æœåŠ¡å™¨ä¸­æä¾›äº†ç±» instrumentation çš„æ”¯æŒå’Œç±»åŠ è½½å™¨çš„å®ç°ã€‚</li>\n<li><span class=\"pink\">Messaging æ¨¡å—</span>ä¸º STOMP æä¾›äº†æ”¯æŒä½œä¸ºåœ¨åº”ç”¨ç¨‹åºä¸­ WebSocket å­åè®®çš„ä½¿ç”¨ã€‚</li>\n<li><span class=\"pink\">æµ‹è¯•æ¨¡å—</span>æ”¯æŒå¯¹å…·æœ‰ JUnit æˆ– TestNG æ¡†æ¶çš„ Spring ç»„ä»¶çš„æµ‹è¯•ã€‚</li>\n</ul>\n<h3 id=\"hello-world\"><a class=\"anchor\" href=\"#hello-world\">#</a> Hello World</h3>\n<blockquote>\n<p>é…ç½®ç¯å¢ƒè¯´æ˜ï¼š</p>\n<p>æœ¬æ–‡ç›¸å…³ç¤ºä¾‹ç¯å¢ƒä¸ºï¼šJDK1.8ï¼ŒTomcatï¼ŒIDEAã€‚åç»­ç¤ºä¾‹å‡å‡å®šè¯¥ç¯å¢ƒå·²æˆåŠŸé…ç½®ã€‚</p>\n</blockquote>\n<ol>\n<li>\n<p>åˆ›å»ºé¡¹ç›®</p>\n<p><img data-src=\"https://img.xfc-exclave.com/2021/09/3342c6b4f077d45d359d172c2b9d4d2c1631602499.png\" alt=\"åˆ›å»ºmavené¡¹ç›®\" /></p>\n<p>ä¸‹ä¸€æ­¥ï¼Œè¾“å…¥é¡¹ç›®å  <code>spring-demo</code>  å¹¶å®Œæˆã€‚</p>\n</li>\n<li>\n<p>æ·»åŠ  Spring ä¾èµ–</p>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>org.springframework<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>spring-context<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>version</span><span class=\"token punctuation\">></span></span>5.3.4<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>version</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure></li>\n<li>\n<p>åœ¨ src ç›®å½•ä¸‹åˆ›å»ºåŒ…  <code>com.xfc</code>  åŠæ–‡ä»¶  <code>HelloWorld.java</code>  ã€  <code>MainApp.java</code>  ã€‚</p>\n<p><strong>HelloWorld.java</strong></p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">HelloWorld</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> message<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">setMessage</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> message<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>message <span class=\"token operator\">=</span> message<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">getMessage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Your Message : \"</span> <span class=\"token operator\">+</span> message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p><strong>MainApp.java</strong></p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>context<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">ApplicationContext</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>context<span class=\"token punctuation\">.</span>support<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">ClassPathXmlApplicationContext</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">MainApp</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token comment\">// åŠ è½½å¼•ç”¨ä¸Šä¸‹æ–‡ç¯å¢ƒ</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token class-name\">ApplicationContext</span> context <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ClassPathXmlApplicationContext</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Beans.xml\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token comment\">// è·å– bean å®ä¾‹</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token class-name\">HelloWorld</span> obj <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">HelloWorld</span><span class=\"token punctuation\">)</span> context<span class=\"token punctuation\">.</span><span class=\"token function\">getBean</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"helloWorld\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        obj<span class=\"token punctuation\">.</span><span class=\"token function\">getMessage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure></li>\n<li>\n<p>åˆ›å»º  <code>Beans.xml</code>  æ–‡ä»¶ã€‚</p>\n<p>åœ¨ main ç›®å½•ä¸‹åˆ›å»º resources åŒ…ï¼Œå¹¶æ–°å»º Beans.xml æ–‡ä»¶ã€‚</p>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token prolog\">&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>beans</span> <span class=\"token attr-name\">xmlns</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.springframework.org/schema/beans<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>xsi</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.w3.org/2001/XMLSchema-instance<span class=\"token punctuation\">\"</span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>       <span class=\"token attr-name\"><span class=\"token namespace\">xsi:</span>schemaLocation</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token comment\">&lt;!-- æ³¨å†Œ bean å¹¶è®¾ç½®å±æ€§å€¼ --></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>bean</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>helloWorld<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>com.xfc.HelloWorld<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>message<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Hello World!<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>bean</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>beans</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure></li>\n<li>\n<p>æµ‹è¯•</p>\n<p>è¿è¡Œ  <code>MainApp.java</code>  &gt;  <code>main</code>  æ–¹æ³•ï¼Œå¾—åˆ°å¦‚ä¸‹ç»“æœï¼š</p>\n<blockquote>\n<p>Your Message : Hello World!</p>\n</blockquote>\n</li>\n</ol>\n<h3 id=\"ioc-å®¹å™¨æ§åˆ¶åè½¬\"><a class=\"anchor\" href=\"#ioc-å®¹å™¨æ§åˆ¶åè½¬\">#</a> IoC å®¹å™¨ï¼ˆæ§åˆ¶åè½¬ï¼‰</h3>\n<p>Spring å®¹å™¨æ˜¯ Spring æ¡†æ¶çš„æ ¸å¿ƒã€‚å®¹å™¨å°†åˆ›å»ºå¯¹è±¡ï¼ŒæŠŠå®ƒä»¬è¿æ¥åœ¨ä¸€èµ·ï¼Œé…ç½®å®ƒä»¬ï¼Œå¹¶ç®¡ç†ä»–ä»¬çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸä»åˆ›å»ºåˆ°é”€æ¯ã€‚Spring å®¹å™¨ä½¿ç”¨ä¾èµ–æ³¨å…¥ï¼ˆDIï¼‰æ¥ç®¡ç†ç»„æˆä¸€ä¸ªåº”ç”¨ç¨‹åºçš„ç»„ä»¶ã€‚è¿™äº›å¯¹è±¡è¢«ç§°ä¸º Spring Beansï¼ŒSpring IoC å®¹å™¨åˆ©ç”¨ Java çš„ POJO ç±»å’Œé…ç½®å…ƒæ•°æ®æ¥ç”Ÿæˆå®Œå…¨é…ç½®å’Œå¯æ‰§è¡Œçš„ç³»ç»Ÿæˆ–åº”ç”¨ç¨‹åºã€‚</p>\n<p>IoC å®¹å™¨å…·æœ‰ä¾èµ–æ³¨å…¥åŠŸèƒ½çš„å®¹å™¨ï¼Œå®ƒå¯ä»¥åˆ›å»ºå¯¹è±¡ï¼ŒIoC å®¹å™¨è´Ÿè´£å®ä¾‹åŒ–ã€å®šä½ã€é…ç½®åº”ç”¨ç¨‹åºä¸­çš„å¯¹è±¡åŠå»ºç«‹è¿™äº›å¯¹è±¡é—´çš„ä¾èµ–ã€‚</p>\n<p>Spring æä¾›äº†  <code>BeanFactory</code>  å’Œ  <code>ApplicationContext </code>  è¿™ä¸¤ç§ä¸åŒç±»å‹çš„å®¹å™¨ã€‚</p>\n<p>ApplicationContext å®¹å™¨åŒ…æ‹¬ BeanFactory å®¹å™¨çš„æ‰€æœ‰åŠŸèƒ½ï¼Œæ‰€ä»¥é€šå¸¸å»ºè®®è¶…è¿‡ BeanFactoryã€‚BeanFactory ä»ç„¶å¯ä»¥ç”¨äºè½»é‡çº§çš„åº”ç”¨ç¨‹åºï¼Œå¦‚ç§»åŠ¨è®¾å¤‡æˆ–åŸºäº applet çš„åº”ç”¨ç¨‹åºï¼Œå…¶ä¸­å®ƒçš„æ•°æ®é‡å’Œé€Ÿåº¦æ˜¯æ˜¾è‘—ã€‚</p>\n<h4 id=\"beanfactory-å®¹å™¨\"><a class=\"anchor\" href=\"#beanfactory-å®¹å™¨\">#</a> BeanFactory å®¹å™¨</h4>\n<p>BeanFactory å®¹å™¨ä¸»è¦çš„åŠŸèƒ½æ˜¯ä¸ºä¾èµ–æ³¨å…¥ï¼ˆDIï¼‰æä¾›æ”¯æŒã€‚åœ¨ Spring ä¸­ï¼Œæœ‰å¤§é‡å¯¹ BeanFactory æ¥å£çš„å®ç°ã€‚å…¶ä¸­ï¼Œæœ€å¸¸è¢«ä½¿ç”¨çš„æ˜¯ <strong>XmlBeanFactory</strong> ç±»ã€‚è¿™ä¸ªå®¹å™¨ä»ä¸€ä¸ª XML æ–‡ä»¶ä¸­è¯»å–é…ç½®å…ƒæ•°æ®ï¼Œç”±è¿™äº›å…ƒæ•°æ®æ¥ç”Ÿæˆä¸€ä¸ªè¢«é…ç½®åŒ–çš„ç³»ç»Ÿæˆ–è€…åº”ç”¨ã€‚</p>\n<p>ä¿®æ”¹  <code>Hello World ç¤ºä¾‹</code>  ä¸­çš„  <code>MainApp</code>  ç±»ã€‚</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>beans<span class=\"token punctuation\">.</span>factory<span class=\"token punctuation\">.</span>xml<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">XmlBeanFactory</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>core<span class=\"token punctuation\">.</span>io<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">ClassPathResource</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">MainApp</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token class-name\">XmlBeanFactory</span> factory <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">XmlBeanFactory</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">ClassPathResource</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Beans.xml\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token class-name\">HelloWorld</span> obj <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">HelloWorld</span><span class=\"token punctuation\">)</span> factory<span class=\"token punctuation\">.</span><span class=\"token function\">getBean</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"helloWorld\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        obj<span class=\"token punctuation\">.</span><span class=\"token function\">getMessage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>è¿™é‡Œä½¿ç”¨äº†æ¡†æ¶æä¾›çš„ XmlBeanFactory () API ç”Ÿæˆå·¥å‚ bean ä»¥åŠåˆ©ç”¨ ClassPathResource () API å»åŠ è½½åœ¨è·¯å¾„ CLASSPATH ä¸‹å¯ç”¨çš„ bean é…ç½®æ–‡ä»¶ã€‚</p>\n<p><strong>æµ‹è¯•</strong></p>\n<p>è¿è¡Œ  <code>MainApp.java</code>  &gt;  <code>main</code>  æ–¹æ³•ï¼Œå¾—åˆ°å¦‚ä¸‹ç»“æœï¼š</p>\n<blockquote>\n<p>Your Message : Hello World!</p>\n</blockquote>\n<h4 id=\"applicationcontext-å®¹å™¨\"><a class=\"anchor\" href=\"#applicationcontext-å®¹å™¨\">#</a> ApplicationContext å®¹å™¨</h4>\n<p>ApplicationContext æ˜¯ BeanFactory çš„å­æ¥å£ï¼Œä¹Ÿè¢«æˆä¸º Spring ä¸Šä¸‹æ–‡ã€‚ å’Œ BeanFactory ç±»ä¼¼ï¼Œå®ƒå¯ä»¥åŠ è½½é…ç½®æ–‡ä»¶ä¸­å®šä¹‰çš„ beanï¼Œå°†æ‰€æœ‰çš„ bean é›†ä¸­åœ¨ä¸€èµ·ï¼Œå½“æœ‰è¯·æ±‚çš„æ—¶å€™åˆ†é… beanã€‚ ApplicationContext åŒ…å« BeanFactory æ‰€æœ‰çš„åŠŸèƒ½ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼Œç›¸å¯¹äº BeanFactoryï¼ŒApplicationContext ä¼šæ›´åŠ ä¼˜ç§€ã€‚</p>\n<p>æœ€å¸¸è¢«ä½¿ç”¨çš„ ApplicationContext æ¥å£å®ç°ï¼š</p>\n<ul>\n<li>\n<p>FileSystemXmlApplicationContext</p>\n<p>è¯¥å®¹å™¨ä» XML æ–‡ä»¶ä¸­åŠ è½½å·²è¢«å®šä¹‰çš„ beanã€‚åœ¨è¿™é‡Œï¼Œä½ éœ€è¦æä¾›ç»™æ„é€ å™¨ XML æ–‡ä»¶çš„å®Œæ•´è·¯å¾„ã€‚</p>\n<p>ç¤ºä¾‹ï¼š</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token class-name\">ApplicationContext</span> context <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">FileSystemXmlApplicationContext</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"E:\\project\\spring-demo\\src\\Beans.xml\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure></li>\n<li>\n<p>ClassPathXmlApplicationContext</p>\n<p>è¯¥å®¹å™¨ä» XML æ–‡ä»¶ä¸­åŠ è½½å·²è¢«å®šä¹‰çš„ beanã€‚åœ¨è¿™é‡Œï¼Œä½ ä¸éœ€è¦æä¾› XML æ–‡ä»¶çš„å®Œæ•´è·¯å¾„ï¼Œåªéœ€æ­£ç¡®é…ç½® CLASSPATH ç¯å¢ƒå˜é‡å³å¯ï¼Œå› ä¸ºï¼Œå®¹å™¨ä¼šä» CLASSPATH ä¸­æœç´¢ bean é…ç½®æ–‡ä»¶ã€‚</p>\n</li>\n<li>\n<p>WebXmlApplicationContext</p>\n<p>è¯¥å®¹å™¨ä¼šåœ¨ä¸€ä¸ª web åº”ç”¨ç¨‹åºçš„èŒƒå›´å†…åŠ è½½åœ¨ XML æ–‡ä»¶ä¸­å·²è¢«å®šä¹‰çš„ beanã€‚</p>\n</li>\n</ul>\n<h4 id=\"bean-å®šä¹‰\"><a class=\"anchor\" href=\"#bean-å®šä¹‰\">#</a> Bean å®šä¹‰</h4>\n<p>è¢«ç§°ä½œ bean çš„å¯¹è±¡æ˜¯æ„æˆåº”ç”¨ç¨‹åºçš„æ”¯æŸ±ä¹Ÿæ˜¯ç”± Spring IoC å®¹å™¨ç®¡ç†çš„ã€‚bean æ˜¯ä¸€ä¸ªè¢«å®ä¾‹åŒ–ï¼Œç»„è£…ï¼Œå¹¶é€šè¿‡ Spring IoC å®¹å™¨æ‰€ç®¡ç†çš„å¯¹è±¡ï¼Œè¿™äº› bean æ˜¯ç”±ç”¨å®¹å™¨æä¾›çš„é…ç½®å…ƒæ•°æ®åˆ›å»ºçš„ã€‚</p>\n<p><strong>Bean ä¸ Spring å®¹å™¨çš„å…³ç³»</strong></p>\n<p><img data-src=\"https://img.xfc-exclave.com/2021/09/c284c60bdeded685a40fe5ea11b0b1e61631606011.jpg\" alt=\"Beanä¸Springå®¹å™¨\" /></p>\n<p><strong>Spring é…ç½®å…ƒæ•°æ®</strong></p>\n<p>Spring IoC å®¹å™¨å®Œå…¨ç”±å®é™…ç¼–å†™çš„é…ç½®å…ƒæ•°æ®çš„æ ¼å¼è§£è€¦ã€‚ä»¥ä¸‹æ˜¯å°†é…ç½®å…ƒæ•°æ®æ³¨å†Œåˆ° Spring å®¹å™¨çš„ä¸‰ç§æ–¹å¼ï¼š</p>\n<ul>\n<li>åŸºäº XML çš„é…ç½®æ–‡ä»¶</li>\n<li>åŸºäºæ³¨è§£çš„é…ç½®</li>\n<li>åŸºäº Java çš„é…ç½®</li>\n</ul>\n<p>å¦å¤–ï¼Œåœ¨é…ç½® bean å®ä¾‹æ—¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥æŒ‡å®šå»¶è¿Ÿåˆå§‹åŒ–ï¼Œåˆå§‹åŒ–æ–¹æ³•å’Œé”€æ¯æ–¹æ³•ã€‚</p>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">&lt;!-- A bean definition with lazy init set on --></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>bean</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>...<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>...<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">lazy-init</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>true<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token comment\">&lt;!-- collaborators and configuration for this bean go here --></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>bean</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\">&lt;!-- A bean definition with initialization method --></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>bean</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>...<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>...<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">init-method</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>...<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token comment\">&lt;!-- collaborators and configuration for this bean go here --></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>bean</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\">&lt;!-- A bean definition with destruction method --></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>bean</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>...<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>...<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">destroy-method</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>...<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token comment\">&lt;!-- collaborators and configuration for this bean go here --></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>bean</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token comment\">&lt;!-- more bean definitions go here --></span></pre></td></tr></table></figure><h4 id=\"bean-ä½œç”¨åŸŸ\"><a class=\"anchor\" href=\"#bean-ä½œç”¨åŸŸ\">#</a> Bean ä½œç”¨åŸŸ</h4>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">ä½œç”¨åŸŸ</th>\n<th style=\"text-align:left\">æè¿°</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">singleton</td>\n<td style=\"text-align:left\">åœ¨ spring IoC å®¹å™¨ä»…å­˜åœ¨ä¸€ä¸ª Bean å®ä¾‹ï¼ŒBean ä»¥å•ä¾‹æ–¹å¼å­˜åœ¨ï¼Œé»˜è®¤å€¼</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">prototype</td>\n<td style=\"text-align:left\">æ¯æ¬¡ä»å®¹å™¨ä¸­è°ƒç”¨ Bean æ—¶ï¼Œéƒ½è¿”å›ä¸€ä¸ªæ–°çš„å®ä¾‹ï¼Œå³æ¯æ¬¡è°ƒç”¨ getBean () æ—¶ï¼Œç›¸å½“äºæ‰§è¡Œ newXxxBean ()</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">request</td>\n<td style=\"text-align:left\">æ¯æ¬¡ HTTP è¯·æ±‚éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ Beanï¼Œè¯¥ä½œç”¨åŸŸä»…é€‚ç”¨äº WebApplicationContext ç¯å¢ƒ</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">session</td>\n<td style=\"text-align:left\">åŒä¸€ä¸ª HTTP Session å…±äº«ä¸€ä¸ª Beanï¼Œä¸åŒ Session ä½¿ç”¨ä¸åŒçš„ Beanï¼Œä»…é€‚ç”¨äº WebApplicationContext ç¯å¢ƒ</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">global-session</td>\n<td style=\"text-align:left\">ä¸€èˆ¬ç”¨äº Portlet åº”ç”¨ç¯å¢ƒï¼Œè¯¥è¿ç”¨åŸŸä»…é€‚ç”¨äº WebApplicationContext ç¯å¢ƒ</td>\n</tr>\n</tbody>\n</table>\n<p><strong>singleton ä½œç”¨åŸŸ</strong></p>\n<p>singleton æ˜¯é»˜è®¤çš„ä½œç”¨åŸŸï¼Œå½“ä¸€ä¸ª bean çš„ä½œç”¨åŸŸä¸º Singletonï¼Œé‚£ä¹ˆ Spring IoC å®¹å™¨ä¸­åªä¼šå­˜åœ¨ä¸€ä¸ªå…±äº«çš„ bean å®ä¾‹ï¼Œå¹¶ä¸”æ‰€æœ‰å¯¹ bean çš„è¯·æ±‚ï¼Œåªè¦ id ä¸è¯¥ bean å®šä¹‰ç›¸åŒ¹é…ï¼Œåˆ™åªä¼šè¿”å› bean çš„åŒä¸€å®ä¾‹ã€‚</p>\n<p>Singleton æ˜¯å•ä¾‹ç±»å‹ï¼Œå°±æ˜¯åœ¨åˆ›å»ºèµ·å®¹å™¨æ—¶å°±åŒæ—¶è‡ªåŠ¨åˆ›å»ºäº†ä¸€ä¸ª bean çš„å¯¹è±¡ï¼Œä¸ç®¡ä½ æ˜¯å¦ä½¿ç”¨ï¼Œä»–éƒ½å­˜åœ¨äº†ï¼Œæ¯æ¬¡è·å–åˆ°çš„å¯¹è±¡éƒ½æ˜¯åŒä¸€ä¸ªå¯¹è±¡ã€‚</p>\n<p>é…ç½®ç¤ºä¾‹ï¼š</p>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">&lt;!-- A bean definition with singleton scope --></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>bean</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>...<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>...<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">scope</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>singleton<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token comment\">&lt;!-- collaborators and configuration for this bean go here --></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>bean</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p>ä»£ç ç¤ºä¾‹ï¼ˆç•¥ï¼‰</p>\n<h4 id=\"bean-ç”Ÿå‘½å‘¨æœŸ\"><a class=\"anchor\" href=\"#bean-ç”Ÿå‘½å‘¨æœŸ\">#</a> Bean ç”Ÿå‘½å‘¨æœŸ</h4>\n<p>å¯¹äº bean çš„ç”Ÿå‘½å‘¨æœŸï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡  <code>init-method</code>  å‚æ•°å’Œ  <code>destroy-method</code>  å‚æ•°è¿›è¡Œç›‘å¬ã€‚å¹¶åœ¨å¯¹åº”å®ä¾‹ä¸­å£°æ˜ç›¸åº”çš„æ–¹æ³•ã€‚</p>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>bean</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>helloWorld<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>com.xfc.HelloWorld<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">init-method</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>init<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">destroy-method</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>destroy<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>message<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Hello World!<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>bean</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// HelloWorld.java......</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">init</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    </pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">destroy</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    </pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>è€Œå¯¹äºå¤šä¸ª bean å®ä¾‹ï¼Œä¹Ÿå¯ä»¥è¿›è¡Œç»Ÿä¸€é…ç½®ï¼š</p>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>beans</span> <span class=\"token attr-name\">xmlns</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.springframework.org/schema/beans<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>xsi</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.w3.org/2001/XMLSchema-instance<span class=\"token punctuation\">\"</span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token attr-name\"><span class=\"token namespace\">xsi:</span>schemaLocation</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd<span class=\"token punctuation\">\"</span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token attr-name\">default-init-method</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>init<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">default-destroy-method</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>destroy<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>   <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>bean</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>...<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>...<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>       <span class=\"token comment\">&lt;!-- collaborators and configuration for this bean go here --></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>   <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>bean</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>beans</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><h4 id=\"bean-åç½®å¤„ç†å™¨\"><a class=\"anchor\" href=\"#bean-åç½®å¤„ç†å™¨\">#</a> Bean åç½®å¤„ç†å™¨</h4>\n<p>Bean åç½®å¤„ç†å™¨å…è®¸åœ¨è°ƒç”¨åˆå§‹åŒ–æ–¹æ³•å‰åå¯¹ Bean è¿›è¡Œé¢å¤–çš„å¤„ç†ã€‚</p>\n<p><strong>ä»£ç ç¤ºä¾‹ï¼š</strong></p>\n<p>æœ¬ç¤ºä¾‹éœ€è¦çš„æ–‡ä»¶ï¼šHelloWorld.javaã€InitHelloWorld.javaã€Beans.xmlã€MainApp.javaã€‚</p>\n<p>ä¿®æ”¹ HelloWorld.java</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">HelloWorld</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> message<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">setMessage</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> message<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>message <span class=\"token operator\">=</span> message<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">getMessage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Your Message : \"</span> <span class=\"token operator\">+</span> message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">init</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Bean is going through init.\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">destroy</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Bean will destroy now.\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>æ·»åŠ  InitHelloWorld.java</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>beans<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">BeansException</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>beans<span class=\"token punctuation\">.</span>factory<span class=\"token punctuation\">.</span>config<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">BeanPostProcessor</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">InitHelloWorld</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">BeanPostProcessor</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token comment\">// å‰ç½®å¤„ç†å™¨</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Object</span> <span class=\"token function\">postProcessBeforeInitialization</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Object</span> bean<span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span> beanName<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">BeansException</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"BeforeInitialization : \"</span> <span class=\"token operator\">+</span> beanName<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token keyword\">return</span> bean<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token comment\">// åç½®å¤„ç†å™¨</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Object</span> <span class=\"token function\">postProcessAfterInitialization</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Object</span> bean<span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span> beanName<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">BeansException</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"AfterInitialization : \"</span> <span class=\"token operator\">+</span> beanName<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        <span class=\"token keyword\">return</span> bean<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>ä¿®æ”¹ Beans.xml</p>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token prolog\">&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>beans</span> <span class=\"token attr-name\">xmlns</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.springframework.org/schema/beans<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>xsi</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.w3.org/2001/XMLSchema-instance<span class=\"token punctuation\">\"</span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>       <span class=\"token attr-name\"><span class=\"token namespace\">xsi:</span>schemaLocation</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token comment\">&lt;!-- æ³¨å†Œ bean--></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>bean</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>helloWorld<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>com.xfc.HelloWorld<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">init-method</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>init<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">destroy-method</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>destroy<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>message<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Hello World!<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>bean</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>bean</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>com.xfc.InitHelloWorld<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>beans</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p>ä¿®æ”¹ MainApp.java</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>context<span class=\"token punctuation\">.</span>support<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">AbstractApplicationContext</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>context<span class=\"token punctuation\">.</span>support<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">ClassPathXmlApplicationContext</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">MainApp</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token class-name\">AbstractApplicationContext</span> context <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ClassPathXmlApplicationContext</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Beans.xml\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token class-name\">HelloWorld</span> obj <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">HelloWorld</span><span class=\"token punctuation\">)</span> context<span class=\"token punctuation\">.</span><span class=\"token function\">getBean</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"helloWorld\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        obj<span class=\"token punctuation\">.</span><span class=\"token function\">getMessage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token comment\">// å…³é—­ hookï¼šç¡®ä¿æ­£å¸¸å…³é—­ä¸”è°ƒç”¨ destroy ()</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        context<span class=\"token punctuation\">.</span><span class=\"token function\">registerShutdownHook</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>é€šè¿‡ä¸Šè¿°ä»£ç ï¼Œæˆ‘ä»¬çŸ¥é“äº†å‰åç½®å¤„ç†å™¨çš„è°ƒç”¨æ–¹å¼ã€‚</p>\n<p>è¿è¡Œ  <code>MainApp.java</code>  å¾—åˆ°å¦‚ä¸‹ç»“æœï¼Œæˆ‘ä»¬å¯ä»¥è§‚å¯Ÿåˆ°å‰åç½®å¤„ç†å™¨çš„è°ƒç”¨æ—¶æœºï¼š</p>\n<blockquote>\n<p>BeforeInitialization : helloWorld<br />\nBean is going through init.<br />\nAfterInitialization : helloWorld<br />\nYour Message : Hello World!<br />\nBean will destroy now.</p>\n</blockquote>\n<h4 id=\"bean-å®šä¹‰ç»§æ‰¿\"><a class=\"anchor\" href=\"#bean-å®šä¹‰ç»§æ‰¿\">#</a> Bean å®šä¹‰ç»§æ‰¿</h4>\n<p>bean å®šä¹‰å¯ä»¥åŒ…å«å¾ˆå¤šçš„é…ç½®ä¿¡æ¯ï¼ŒåŒ…æ‹¬æ„é€ å‡½æ•°çš„å‚æ•°ï¼Œå±æ€§å€¼ï¼Œå®¹å™¨çš„å…·ä½“ä¿¡æ¯ä¾‹å¦‚åˆå§‹åŒ–æ–¹æ³•ï¼Œé™æ€å·¥å‚æ–¹æ³•åï¼Œç­‰ç­‰ã€‚</p>\n<p>Spring Bean å®šä¹‰çš„ç»§æ‰¿ä¸ Java ç±»çš„ç»§æ‰¿æ— å…³ï¼Œä½†æ˜¯ç»§æ‰¿çš„æ¦‚å¿µæ˜¯ä¸€æ ·çš„ã€‚å­ bean çš„å®šä¹‰ç»§æ‰¿çˆ¶å®šä¹‰çš„é…ç½®æ•°æ®ã€‚å­å®šä¹‰å¯ä»¥æ ¹æ®éœ€è¦é‡å†™ä¸€äº›å€¼ï¼Œæˆ–è€…æ·»åŠ å…¶ä»–å€¼ã€‚</p>\n<p><strong>ä»£ç ç¤ºä¾‹ï¼š</strong></p>\n<p>æœ¬ç¤ºä¾‹éœ€è¦çš„æ–‡ä»¶ï¼šHelloWorld.javaã€HelloChina.javaã€Beans.xmlã€MainApp.javaã€‚</p>\n<p>ä¿®æ”¹ HelloWorld.java</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">HelloWorld</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> message1<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> message2<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">setMessage1</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> message<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>message1 <span class=\"token operator\">=</span> message<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">setMessage2</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> message<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>message2 <span class=\"token operator\">=</span> message<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">getMessage1</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"World Message1 : \"</span> <span class=\"token operator\">+</span> message1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">getMessage2</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"World Message2 : \"</span> <span class=\"token operator\">+</span> message2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>æ·»åŠ  HelloChina.java</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">HelloChina</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> message1<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> message2<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> message3<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">setMessage1</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> message<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>message1 <span class=\"token operator\">=</span> message<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">setMessage2</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> message<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>message2 <span class=\"token operator\">=</span> message<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">setMessage3</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> message<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>message3 <span class=\"token operator\">=</span> message<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">getMessage1</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"China Message1 : \"</span> <span class=\"token operator\">+</span> message1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">getMessage2</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"China Message2 : \"</span> <span class=\"token operator\">+</span> message2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">getMessage3</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"China Message3 : \"</span> <span class=\"token operator\">+</span> message3<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>ä¿®æ”¹ Beans.xml</p>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token prolog\">&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>beans</span> <span class=\"token attr-name\">xmlns</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.springframework.org/schema/beans<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>xsi</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.w3.org/2001/XMLSchema-instance<span class=\"token punctuation\">\"</span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>       <span class=\"token attr-name\"><span class=\"token namespace\">xsi:</span>schemaLocation</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>bean</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>helloWorld<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>com.xfc.HelloWorld<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>message1<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Hello World!<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>message2<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Hello Second World!<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>bean</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>bean</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>helloChina<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>com.xfc.HelloChina<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">parent</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>helloWorld<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>message1<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Hello China!<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>message3<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>ä½ å¥½ï¼Œä¸­å›½ï¼<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>bean</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>beans</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p>ä¿®æ”¹ MainApp.java</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>context<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">ApplicationContext</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>context<span class=\"token punctuation\">.</span>support<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">ClassPathXmlApplicationContext</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">MainApp</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token class-name\">ApplicationContext</span> context <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ClassPathXmlApplicationContext</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Beans.xml\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token class-name\">HelloWorld</span> objA <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">HelloWorld</span><span class=\"token punctuation\">)</span> context<span class=\"token punctuation\">.</span><span class=\"token function\">getBean</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"helloWorld\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        objA<span class=\"token punctuation\">.</span><span class=\"token function\">getMessage1</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        objA<span class=\"token punctuation\">.</span><span class=\"token function\">getMessage2</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        <span class=\"token class-name\">HelloChina</span> objB <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">HelloChina</span><span class=\"token punctuation\">)</span> context<span class=\"token punctuation\">.</span><span class=\"token function\">getBean</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"helloChina\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        objB<span class=\"token punctuation\">.</span><span class=\"token function\">getMessage1</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        objB<span class=\"token punctuation\">.</span><span class=\"token function\">getMessage2</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        objB<span class=\"token punctuation\">.</span><span class=\"token function\">getMessage3</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>è¿è¡Œ  <code>MainApp.java</code>  å¾—åˆ°å¦‚ä¸‹ç»“æœï¼š</p>\n<blockquote>\n<p>World Message1 : Hello World!<br />\nWorld Message2 : Hello Second World!<br />\nChina Message1 : Hello China!<br />\nChina Message2 : Hello Second World!<br />\nChina Message3 : ä½ å¥½ï¼Œä¸­å›½ï¼</p>\n</blockquote>\n<p>æˆ‘ä»¬å¯ä»¥è§‚å¯Ÿåˆ°å­ bean ç»§æ‰¿äº†çˆ¶ bean ä¸­çš„ message2 çš„å±æ€§é…ç½®ï¼Œè€Œé‡å†™äº† message1 å’Œ message3 çš„å±æ€§é…ç½®ã€‚</p>\n<h3 id=\"ä¾èµ–æ³¨å…¥di\"><a class=\"anchor\" href=\"#ä¾èµ–æ³¨å…¥di\">#</a> ä¾èµ–æ³¨å…¥ï¼ˆDIï¼‰</h3>\n<p>Spring æ¡†æ¶çš„æ ¸å¿ƒåŠŸèƒ½ä¹‹ä¸€å°±æ˜¯é€šè¿‡ä¾èµ–æ³¨å…¥çš„æ–¹å¼æ¥ç®¡ç† Bean ä¹‹é—´çš„ä¾èµ–å…³ç³»ã€‚</p>\n<h4 id=\"åŸºäºæ„é€ å‡½æ•°çš„ä¾èµ–æ³¨å…¥\"><a class=\"anchor\" href=\"#åŸºäºæ„é€ å‡½æ•°çš„ä¾èµ–æ³¨å…¥\">#</a> åŸºäºæ„é€ å‡½æ•°çš„ä¾èµ–æ³¨å…¥</h4>\n<p>å½“å®¹å™¨è°ƒç”¨å¸¦æœ‰ä¸€ç»„å‚æ•°çš„ç±»æ„é€ å‡½æ•°æ—¶ï¼ŒåŸºäºæ„é€ å‡½æ•°çš„ DI å°±å®Œæˆäº†ï¼Œå…¶ä¸­æ¯ä¸ªå‚æ•°ä»£è¡¨ä¸€ä¸ªå¯¹å…¶ä»–ç±»çš„ä¾èµ–ã€‚</p>\n<p><strong>ä»£ç ç¤ºä¾‹ï¼š</strong></p>\n<p>æœ¬ç¤ºä¾‹éœ€è¦çš„æ–‡ä»¶ï¼šRole.javaã€User.javaã€Beans.xmlã€MainApp.javaã€‚</p>\n<p>åˆ›å»º Role.java</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Role</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">getUserRole</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Inside getUserRole.\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>åˆ›å»º User.java</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">User</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Role</span> role<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">User</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Role</span> role<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Inside Role constructor.\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>role <span class=\"token operator\">=</span> role<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">getUserRole</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        role<span class=\"token punctuation\">.</span><span class=\"token function\">getUserRole</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>ä¿®æ”¹ Beans.xml</p>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token prolog\">&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>beans</span> <span class=\"token attr-name\">xmlns</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.springframework.org/schema/beans<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>xsi</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.w3.org/2001/XMLSchema-instance<span class=\"token punctuation\">\"</span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>       <span class=\"token attr-name\"><span class=\"token namespace\">xsi:</span>schemaLocation</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token comment\">&lt;!-- Definition for User bean --></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>bean</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>user<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>com.xfc.User<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>constructor-arg</span> <span class=\"token attr-name\">ref</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>role<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>bean</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token comment\">&lt;!-- Definition for Role bean --></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>bean</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>role<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>com.xfc.Role<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>beans</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p>ä¿®æ”¹ MainApp.java</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>context<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">ApplicationContext</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>context<span class=\"token punctuation\">.</span>support<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">ClassPathXmlApplicationContext</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">MainApp</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token class-name\">ApplicationContext</span> context <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ClassPathXmlApplicationContext</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Beans.xml\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token class-name\">User</span> user <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">User</span><span class=\"token punctuation\">)</span> context<span class=\"token punctuation\">.</span><span class=\"token function\">getBean</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"user\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        user<span class=\"token punctuation\">.</span><span class=\"token function\">getUserRole</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>è¿è¡Œ  <code>MainApp.java</code>  å¾—åˆ°å¦‚ä¸‹ç»“æœï¼š</p>\n<blockquote>\n<p>Inside User constructor.<br />\nInside getUserRole.</p>\n</blockquote>\n<p>é€šè¿‡ä¸Šè¿°ä»£ç åŠè¿è¡Œç»“æœï¼Œæˆ‘ä»¬è§‚å¯Ÿåœ¨ Beans.xml ä¸­ï¼ŒUser å®ä¾‹é€šè¿‡  <code>&lt;constructor-arg ref=&quot;role&quot;/&gt;</code>  æ–¹å¼æ³¨å…¥äº†å…¶ä¾èµ–çš„ Role Bean å¯¹è±¡ã€‚å› æ­¤ï¼Œåœ¨ MainApp.java ä¸­è·å– User å®ä¾‹æ—¶ï¼Œå³é€šè¿‡ User ç±»çš„æ„é€ å‡½æ•°è·å–åˆ°å…¶ä¾èµ–çš„ Role å®ä¾‹ï¼Œç»§è€Œèƒ½å¤Ÿé€šè¿‡å…¶ä¾èµ–çš„å®ä¾‹æ‰§è¡Œ  <code>getUserRole()</code>  æ–¹æ³•ã€‚</p>\n<p>å½“æ„é€ å‡½æ•°å­˜åœ¨å¤šä¸ªå‚æ•°æ—¶ï¼Œä¸ºäº†é¿å…æ­§ä¹‰ï¼Œæ„é€ å‡½æ•°çš„å‚æ•°åœ¨ bean å®šä¹‰ä¸­çš„é¡ºåºä¹Ÿåº”å½“å°½é‡ä¸å‚æ•°ä½ç½®ä¿æŒä¸€è‡´ã€‚ä½†å¦‚æœå­˜åœ¨å¤šä¸ªç›¸åŒæ•°æ®ç±»å‹ã€ä¸åŒå‚æ•°é¡ºåºçš„æ„é€ å‡½æ•°æ—¶ï¼Œé»˜è®¤ä¼šè°ƒç”¨åŒ¹é…ç±»å‹ä¸­çš„ç¬¬ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œå¦‚æœå¤šä¸ªæ„é€ å‡½æ•°çš„æ•°æ®ç±»å‹ç›¸åŒè€Œé¡ºåºå’Œå‚æ•°åä¸åŒï¼Œåˆ™å¯ä»¥åœ¨ bean å®šä¹‰ä¸­æŒ‡å®š name æˆ– index å±æ€§æ¥æŒ‡å®šåŒ¹é…çš„æ„é€ å‡½æ•°ï¼ˆè¿™é‡Œçš„ name æŒ‡å‘å¯¹åº”å‚æ•°çš„ nameï¼‰ã€‚</p>\n<p>ç¤ºä¾‹ï¼š</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token class-name\">User</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Integer</span> i<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Role</span> role<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"æ„é€ å‡½æ•° 1\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>role <span class=\"token operator\">=</span> role<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>i <span class=\"token operator\">=</span> i<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token class-name\">User</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Role</span> role<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Integer</span> j<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"æ„é€ å‡½æ•° 2\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>role <span class=\"token operator\">=</span> role<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>j <span class=\"token operator\">=</span> j<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">&lt;!-- é€šè¿‡æ„é€ å‡½æ•° 2 æ³¨å…¥ï¼ˆä¸å‚æ•°é¡ºåºæ— å…³ï¼‰ --></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>bean</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>user<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>com.xfc.User<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token comment\">&lt;!--&lt;constructor-arg type=\"java.lang.Integer\" value=\"77\" index=\"1\"/>--></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>constructor-arg</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>java.lang.Integer<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>120<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>i<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>constructor-arg</span> <span class=\"token attr-name\">ref</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>role<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>bean</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><blockquote>\n<p>æ³¨ï¼šç¤ºä¾‹ä¸­çš„ type å±æ€§ç”¨äºæ˜¾å¼æŒ‡å®šæ„é€ å‡½æ•°çš„å‚æ•°ç±»å‹ã€‚</p>\n</blockquote>\n<h4 id=\"åŸºäºè®¾å€¼å‡½æ•°çš„ä¾èµ–æ³¨å…¥\"><a class=\"anchor\" href=\"#åŸºäºè®¾å€¼å‡½æ•°çš„ä¾èµ–æ³¨å…¥\">#</a> åŸºäºè®¾å€¼å‡½æ•°çš„ä¾èµ–æ³¨å…¥</h4>\n<p>å½“å®¹å™¨è°ƒç”¨ä¸€ä¸ªæ— å‚çš„æ„é€ å‡½æ•°æˆ–ä¸€ä¸ªæ— å‚çš„é™æ€ factory æ–¹æ³•æ¥åˆå§‹åŒ–ä½ çš„ bean åï¼Œé€šè¿‡å®¹å™¨åœ¨ä½ çš„ bean ä¸Šè°ƒç”¨è®¾å€¼å‡½æ•°ï¼ŒåŸºäºè®¾å€¼å‡½æ•°çš„ DI å°±å®Œæˆäº†ã€‚</p>\n<p><strong>ä»£ç ç¤ºä¾‹ï¼š</strong></p>\n<p>æœ¬ç¤ºä¾‹éœ€è¦çš„æ–‡ä»¶ï¼šRole.javaã€User.javaã€Beans.xmlã€MainApp.javaã€‚å…¶ä¸­ Role.javaã€MainApp.java æ–‡ä»¶ä¸ä¸Šä¸€ç¤ºä¾‹ä¸€è‡´ï¼Œæ­¤å¤„ä¸å†é‡è¿°ã€‚</p>\n<p>åˆ›å»º Role.java</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Role</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">getUserRole</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Inside getUserRole.\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>åˆ›å»º User.java</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">User</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Role</span> role<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token comment\">// a setter method to inject the dependency.</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">setRole</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Role</span> role<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Inside setRole.\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>role <span class=\"token operator\">=</span> role<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token comment\">// a getter method to return spellChecker</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Role</span> <span class=\"token function\">getRole</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token keyword\">return</span> role<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">getRoleDescription</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        role<span class=\"token punctuation\">.</span><span class=\"token function\">getRoleDescription</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>ä¿®æ”¹ Beans.xml</p>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token prolog\">&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>beans</span> <span class=\"token attr-name\">xmlns</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.springframework.org/schema/beans<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>xsi</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.w3.org/2001/XMLSchema-instance<span class=\"token punctuation\">\"</span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>       <span class=\"token attr-name\"><span class=\"token namespace\">xsi:</span>schemaLocation</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token comment\">&lt;!-- Definition for User bean --></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>bean</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>user<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>com.xfc.User<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>role<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">ref</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>role<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>bean</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token comment\">&lt;!-- Definition for Role bean --></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>bean</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>role<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>com.xfc.Role<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>beans</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p>è¿è¡Œ  <code>MainApp.java</code>  å¾—åˆ°å¦‚ä¸‹ç»“æœï¼š</p>\n<blockquote>\n<p>Inside setRole.<br />\nInside getRoleDescription.</p>\n</blockquote>\n<p>é€šè¿‡ä¸Šè¿°ä»£ç åŠè¿è¡Œç»“æœï¼Œæˆ‘ä»¬å®ç°äº†é€šè¿‡ setRole çš„æ–¹å¼å‘ User å®ä¾‹ä¸­æ³¨å…¥äº†å…¶ä¾èµ–çš„ Role å¯¹è±¡ã€‚</p>\n<p>æ„é€ å‡½æ•°ä¸è®¾å€¼æ³¨å…¥çš„å”¯ä¸€åŒºåˆ«ï¼Œåœ¨äºåŸºäºæ„é€ å‡½æ•°æ³¨å…¥ä¸­ä½¿ç”¨çš„æ˜¯  <code>&lt;constructor-arg&gt;</code>  ï¼Œè€Œåœ¨åŸºäºè®¾å€¼å‡½æ•°çš„æ³¨å…¥ä¸­ä½¿ç”¨çš„æ˜¯  <code>&lt;property&gt;</code>  ã€‚</p>\n<h4 id=\"æ³¨å…¥å†…éƒ¨-beans\"><a class=\"anchor\" href=\"#æ³¨å…¥å†…éƒ¨-beans\">#</a> æ³¨å…¥å†…éƒ¨ Beans</h4>\n<p>inner beans æ˜¯åœ¨å…¶ä»– bean çš„èŒƒå›´å†…å®šä¹‰çš„ beanã€‚</p>\n<p>ä¿®æ”¹  <code>åŸºäºè®¾å€¼å‡½æ•°çš„ä¾èµ–æ³¨å…¥</code>  æ¼”ç¤ºä»£ç ä¸­çš„  <code>Beans.xml</code>  æ–‡ä»¶ï¼š</p>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token prolog\">&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>beans</span> <span class=\"token attr-name\">xmlns</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.springframework.org/schema/beans<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>xsi</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.w3.org/2001/XMLSchema-instance<span class=\"token punctuation\">\"</span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>       <span class=\"token attr-name\"><span class=\"token namespace\">xsi:</span>schemaLocation</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token comment\">&lt;!-- Definition for User bean --></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>bean</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>user<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>com.xfc.User<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>role<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>bean</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>role<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>com.xfc.Role<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>bean</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>property</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>bean</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>beans</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p>åŒæ ·èƒ½å¤Ÿå®ç°å¯¹ä¾èµ–å¯¹è±¡çš„æ³¨å…¥ï¼Œè¿™é‡Œè¿™ç§æ–¹å¼è¢«ç§°ä¸ºå†…éƒ¨ bean æ³¨å…¥ã€‚</p>\n<h4 id=\"æ³¨å…¥é›†åˆ\"><a class=\"anchor\" href=\"#æ³¨å…¥é›†åˆ\">#</a> æ³¨å…¥é›†åˆ</h4>\n<p>Spring æä¾›äº†å››ç§ç±»å‹çš„é›†åˆçš„é…ç½®å…ƒç´ ï¼š</p>\n<table>\n<thead>\n<tr>\n<th>å…ƒç´ </th>\n<th>æè¿°</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>&lt;list&gt;</td>\n<td>å®ƒæœ‰åŠ©äºè¿çº¿ï¼Œå¦‚æ³¨å…¥ä¸€åˆ—å€¼ï¼Œå…è®¸é‡å¤ã€‚</td>\n</tr>\n<tr>\n<td>&lt;set&gt;</td>\n<td>å®ƒæœ‰åŠ©äºè¿çº¿ä¸€ç»„å€¼ï¼Œä½†ä¸èƒ½é‡å¤ã€‚</td>\n</tr>\n<tr>\n<td>&lt;map&gt;</td>\n<td>å®ƒå¯ä»¥ç”¨æ¥æ³¨å…¥åç§° - å€¼å¯¹çš„é›†åˆï¼Œå…¶ä¸­åç§°å’Œå€¼å¯ä»¥æ˜¯ä»»ä½•ç±»å‹ã€‚</td>\n</tr>\n<tr>\n<td>&lt;props&gt;</td>\n<td>å®ƒå¯ä»¥ç”¨æ¥æ³¨å…¥åç§° - å€¼å¯¹çš„é›†åˆï¼Œå…¶ä¸­åç§°å’Œå€¼éƒ½æ˜¯å­—ç¬¦ä¸²ç±»å‹ã€‚</td>\n</tr>\n</tbody>\n</table>\n<p>ç¤ºä¾‹ï¼š</p>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>addressList<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>list</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>value</span><span class=\"token punctuation\">></span></span>INDIA<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>value</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>value</span><span class=\"token punctuation\">></span></span>Pakistan<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>value</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>value</span><span class=\"token punctuation\">></span></span>USA<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>value</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>value</span><span class=\"token punctuation\">></span></span>USA<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>value</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>list</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>property</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>addressSet<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>set</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>value</span><span class=\"token punctuation\">></span></span>INDIA<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>value</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>value</span><span class=\"token punctuation\">></span></span>Pakistan<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>value</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>value</span><span class=\"token punctuation\">></span></span>USA<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>value</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>value</span><span class=\"token punctuation\">></span></span>USA<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>value</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>set</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>property</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>addressMap<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>map</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>entry</span> <span class=\"token attr-name\">key</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>1<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>INDIA<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>entry</span> <span class=\"token attr-name\">key</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>2<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Pakistan<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>entry</span> <span class=\"token attr-name\">key</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>3<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>USA<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>entry</span> <span class=\"token attr-name\">key</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>4<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>USA<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>map</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>property</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>addressProp<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>props</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>prop</span> <span class=\"token attr-name\">key</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>one<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>INDIA<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>prop</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>prop</span> <span class=\"token attr-name\">key</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>two<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>Pakistan<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>prop</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>prop</span> <span class=\"token attr-name\">key</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>three<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>USA<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>prop</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>prop</span> <span class=\"token attr-name\">key</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>four<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>USA<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>prop</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>props</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>property</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p>å¦‚ä½•æ³¨å…¥ null å’Œç©ºå­—ç¬¦ä¸²ï¼š</p>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>userName<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>obj<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>null</span><span class=\"token punctuation\">/></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>property</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><h3 id=\"beans-è‡ªåŠ¨è£…é…\"><a class=\"anchor\" href=\"#beans-è‡ªåŠ¨è£…é…\">#</a> Beans è‡ªåŠ¨è£…é…</h3>\n<p>Spring å®¹å™¨å¯ä»¥åœ¨ä¸ä½¿ç”¨  <code>&lt;constructor-arg&gt;</code>  å’Œ  <code>&lt;property&gt;</code>  å…ƒç´ çš„æƒ…å†µä¸‹ <strong>è‡ªåŠ¨è£…é…</strong> ç›¸äº’åä½œçš„ bean ä¹‹é—´çš„å…³ç³»ã€‚</p>\n<p>åŠ¨è£…é…æ¨¡å¼å¯ç”¨äºæŒ‡ç¤º Spring å®¹å™¨ä¸ºæ¥ä½¿ç”¨è‡ªåŠ¨è£…é…è¿›è¡Œä¾èµ–æ³¨å…¥ã€‚ä½ å¯ä»¥ä½¿ç”¨  <code>&lt;bean&gt;</code>  å…ƒç´ çš„ <strong>autowire</strong> å±æ€§ä¸ºä¸€ä¸ª bean å®šä¹‰æŒ‡å®šè‡ªåŠ¨è£…é…æ¨¡å¼ã€‚</p>\n<table>\n<thead>\n<tr>\n<th>æ¨¡å¼</th>\n<th>æè¿°</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>no</td>\n<td>è¿™æ˜¯é»˜è®¤çš„è®¾ç½®ï¼Œå®ƒæ„å‘³ç€æ²¡æœ‰è‡ªåŠ¨è£…é…ï¼Œä½ åº”è¯¥ä½¿ç”¨æ˜¾å¼çš„ bean å¼•ç”¨æ¥è¿çº¿ã€‚ä½ ä¸ç”¨ä¸ºäº†è¿çº¿åšç‰¹æ®Šçš„äº‹ã€‚åœ¨ä¾èµ–æ³¨å…¥ç« èŠ‚ä½ å·²ç»çœ‹åˆ°è¿™ä¸ªäº†ã€‚</td>\n</tr>\n<tr>\n<td>byName</td>\n<td>ç”±å±æ€§åè‡ªåŠ¨è£…é…ã€‚Spring å®¹å™¨çœ‹åˆ°åœ¨ XML é…ç½®æ–‡ä»¶ä¸­ bean çš„è‡ªåŠ¨è£…é…çš„å±æ€§è®¾ç½®ä¸º byNameã€‚ç„¶åå°è¯•åŒ¹é…ï¼Œå¹¶ä¸”å°†å®ƒçš„å±æ€§ä¸åœ¨é…ç½®æ–‡ä»¶ä¸­è¢«å®šä¹‰ä¸ºç›¸åŒåç§°çš„ beans çš„å±æ€§è¿›è¡Œè¿æ¥ã€‚</td>\n</tr>\n<tr>\n<td>byType</td>\n<td>ç”±å±æ€§æ•°æ®ç±»å‹è‡ªåŠ¨è£…é…ã€‚Spring å®¹å™¨çœ‹åˆ°åœ¨ XML é…ç½®æ–‡ä»¶ä¸­ bean çš„è‡ªåŠ¨è£…é…çš„å±æ€§è®¾ç½®ä¸º byTypeã€‚ç„¶åå¦‚æœå®ƒçš„<strong>ç±»å‹</strong>åŒ¹é…é…ç½®æ–‡ä»¶ä¸­çš„ä¸€ä¸ªç¡®åˆ‡çš„ bean åç§°ï¼Œå®ƒå°†å°è¯•åŒ¹é…å’Œè¿æ¥å±æ€§çš„ç±»å‹ã€‚å¦‚æœå­˜åœ¨ä¸æ­¢ä¸€ä¸ªè¿™æ ·çš„ beanï¼Œåˆ™ä¸€ä¸ªè‡´å‘½çš„å¼‚å¸¸å°†ä¼šè¢«æŠ›å‡ºã€‚</td>\n</tr>\n<tr>\n<td>constructor</td>\n<td>ç±»ä¼¼äº byTypeï¼Œä½†è¯¥ç±»å‹é€‚ç”¨äºæ„é€ å‡½æ•°å‚æ•°ç±»å‹ã€‚å¦‚æœåœ¨å®¹å™¨ä¸­æ²¡æœ‰ä¸€ä¸ªæ„é€ å‡½æ•°å‚æ•°ç±»å‹çš„ beanï¼Œåˆ™ä¸€ä¸ªè‡´å‘½é”™è¯¯å°†ä¼šå‘ç”Ÿã€‚</td>\n</tr>\n<tr>\n<td>autodetect</td>\n<td>Spring é¦–å…ˆå°è¯•é€šè¿‡ constructor ä½¿ç”¨è‡ªåŠ¨è£…é…æ¥è¿æ¥ï¼Œå¦‚æœå®ƒä¸æ‰§è¡Œï¼ŒSpring å°è¯•é€šè¿‡ byType æ¥è‡ªåŠ¨è£…é…ã€‚</td>\n</tr>\n</tbody>\n</table>\n<p><strong>è‡ªåŠ¨è£…é…çš„å±€é™æ€§</strong></p>\n<ul>\n<li><strong>é‡å†™ï¼š</strong> éœ€ç”¨  <code>&lt;constructor-arg&gt;</code>  å’Œ  <code>&lt;property&gt;</code>  é…ç½®æ¥å®šä¹‰ä¾èµ–ï¼Œæ„å‘³ç€æ€»è¦é‡å†™è‡ªåŠ¨è£…é…ã€‚</li>\n<li><strong>åŸºæœ¬æ•°æ®ç±»å‹ï¼š</strong> ä¸èƒ½è‡ªåŠ¨è£…é…ç®€å•çš„å±æ€§ï¼Œå¦‚åŸºæœ¬æ•°æ®ç±»å‹ï¼ŒString å­—ç¬¦ä¸²ï¼Œå’Œç±»ã€‚</li>\n<li><strong>æ¨¡ç³Šç‰¹æ€§ï¼š</strong> è‡ªåŠ¨è£…é…ä¸å¦‚æ˜¾å¼è£…é…ç²¾ç¡®ï¼Œå¦‚æœæœ‰å¯èƒ½ï¼Œå°½é‡ä½¿ç”¨æ˜¾å¼è£…é…ã€‚</li>\n</ul>\n<h4 id=\"è‡ªåŠ¨è£…é…-byname\"><a class=\"anchor\" href=\"#è‡ªåŠ¨è£…é…-byname\">#</a> è‡ªåŠ¨è£…é…  <code>byName</code></h4>\n<p>Spring DI é…ç½®ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æŒ‡å®š  <code>autowire</code>  å±æ€§ä¸º byName æ¥æŒ‡å®šè‡ªåŠ¨è£…é…ï¼Œè€Œä¸éœ€æ¯ä¸€æ¬¡éƒ½æ˜¾ç¤ºå£°æ˜å…¶ä¾èµ–çš„æ³¨å…¥å¯¹è±¡ã€‚æ­¤é€‰é¡¹å¯ç”¨åŸºäº bean åç§°çš„ä¾èµ–é¡¹æ³¨å…¥ã€‚åœ¨ Bean ä¸­è‡ªåŠ¨è£…é…å±æ€§æ—¶ï¼Œå±æ€§åç§°ç”¨äºåœ¨é…ç½®æ–‡ä»¶ä¸­æœç´¢åŒ¹é…çš„ Bean å®šä¹‰ã€‚å¦‚æœæ‰¾åˆ°è¿™æ ·çš„ beanï¼Œåˆ™å°†å…¶æ³¨å…¥å±æ€§ã€‚å¦‚æœæ‰¾ä¸åˆ°ï¼Œåˆ™ä¼šå¼•å‘é”™è¯¯ã€‚</p>\n<p><strong>ä»£ç ç¤ºä¾‹ï¼š</strong></p>\n<p>æœ¬ç¤ºä¾‹éœ€è¦çš„æ–‡ä»¶ï¼šRole.javaã€User.javaã€Beans.xmlã€MainApp.javaï¼Œå…¶ä¸­ Role.javaã€MainApp.java æ–‡ä»¶ä¸ä¸Šä¸€ç¤ºä¾‹ä¸€è‡´ï¼Œæ­¤å¤„ä¸å†é‡è¿°ã€‚</p>\n<p>ä¿®æ”¹ User.java</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">User</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Role</span> role<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> name<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">setRole</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Role</span> role<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Inside setRole.\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>role <span class=\"token operator\">=</span> role<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Role</span> <span class=\"token function\">getRole</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token keyword\">return</span> role<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        <span class=\"token keyword\">return</span> name<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">setName</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> name<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> name<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">getRoleDescription</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>        role<span class=\"token punctuation\">.</span><span class=\"token function\">getRoleDescription</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>ä¿®æ”¹  <code>Beans.xml</code></p>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token prolog\">&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>beans</span> <span class=\"token attr-name\">xmlns</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.springframework.org/schema/beans<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>xsi</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.w3.org/2001/XMLSchema-instance<span class=\"token punctuation\">\"</span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>       <span class=\"token attr-name\"><span class=\"token namespace\">xsi:</span>schemaLocation</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token comment\">&lt;!-- Definition for textEditor bean --></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>bean</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>user<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>com.xfc.User<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">autowire</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>byName<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>name<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Generic User<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>bean</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token comment\">&lt;!-- Definition for Role bean --></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>bean</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>role<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>com.xfc.Role<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>bean</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>beans</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p>è¿è¡Œ  <code>MainApp.java</code>  å¾—åˆ°å¦‚ä¸‹ç»“æœï¼š</p>\n<blockquote>\n<p>Inside setRole.<br />\nInside getRoleDescription.</p>\n</blockquote>\n<p>é€šè¿‡ä¸Šè¿°ä»£ç åŠè¿è¡Œç»“æœï¼Œæˆ‘ä»¬å‘ç°æ·»åŠ   <code>autowire=&quot;byName&quot;</code>  åï¼Œ  <code>User</code>  ä¾èµ–çš„  <code>Role</code>  å®ä¾‹åœ¨æœªç»è¿‡æ˜¾ç¤ºå£°æ˜çš„æƒ…å†µä¸‹ä»è¢«è‡ªåŠ¨æ³¨å…¥åˆ° Spring å®¹å™¨ä¸­ã€‚æ­¤æ—¶ï¼Œç¨‹åºåœ¨è£…é…  <code>User</code>  æ—¶ï¼Œæ£€æµ‹åˆ°  <code>private Role role;</code>  å±æ€§ï¼Œå¹¶è‡ªåŠ¨æ ¹æ®  <code>role</code>  åç§°æŸ¥æ‰¾é…ç½®æ–‡ä»¶ï¼Œå¹¶å®Œæˆè‡ªåŠ¨æ³¨å…¥ã€‚</p>\n<h4 id=\"è‡ªåŠ¨è£…é…-bytype\"><a class=\"anchor\" href=\"#è‡ªåŠ¨è£…é…-bytype\">#</a> è‡ªåŠ¨è£…é…  <code>byType</code></h4>\n<p>Spring å®¹å™¨ä¹Ÿå¯ä»¥æŒ‡å®š  <code>autowire</code>  å±æ€§ä¸º  <code>byType</code>  æ¥æŒ‡å®šè‡ªåŠ¨è£…é…ï¼Œè‹¥æŒ‡å®šçš„  <code>type</code>  ä¸é…ç½®æ–‡ä»¶ä¸­ beans åç§°ä¸­çš„ä¸€ä¸ªåŒ¹é…ï¼Œåˆ™å®ƒå°†å°è¯•åŒ¹é…å’Œè¿æ¥å®ƒçš„å±æ€§ã€‚æ­¤é€‰é¡¹æ”¯æŒåŸºäº bean ç±»å‹çš„ä¾èµ–é¡¹æ³¨å…¥ã€‚åœ¨  <code>Bean</code>  ä¸­è‡ªåŠ¨è£…é…å±æ€§æ—¶ï¼Œå±æ€§çš„ç±»ç±»å‹ç”¨äºåœ¨é…ç½®æ–‡ä»¶ä¸­æœç´¢åŒ¹é…çš„  <code>bean</code>  å®šä¹‰ã€‚å¦‚æœæ‰¾åˆ°è¿™æ ·çš„  <code>bean</code>  ï¼Œå°±åœ¨å±æ€§ä¸­æ³¨å…¥å®ƒã€‚å¦‚æœæ‰¾ä¸åˆ°ï¼Œåˆ™ä¼šå¼•å‘é”™è¯¯ã€‚</p>\n<p><strong>ä»£ç ç¤ºä¾‹ï¼š</strong></p>\n<p>æœ¬ç¤ºä¾‹éœ€è¦çš„æ–‡ä»¶ï¼šRole.javaã€User.javaã€Beans.xmlã€MainApp.javaï¼Œå…¶ä¸­ Role.javaã€User.javaã€MainApp.java æ–‡ä»¶ä¸ä¸Šä¸€ç¤ºä¾‹ä¸€è‡´ï¼Œæ­¤å¤„ä¸å†é‡è¿°ã€‚</p>\n<p>ä¿®æ”¹ Beans.xml</p>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token prolog\">&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>beans</span> <span class=\"token attr-name\">xmlns</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.springframework.org/schema/beans<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>xsi</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.w3.org/2001/XMLSchema-instance<span class=\"token punctuation\">\"</span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>       <span class=\"token attr-name\"><span class=\"token namespace\">xsi:</span>schemaLocation</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token comment\">&lt;!-- Definition for textEditor bean --></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>bean</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>user<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>com.xfc.User<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">autowire</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>byType<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>name<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Generic User<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>bean</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token comment\">&lt;!-- Definition for Role bean --></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>bean</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>role<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>com.xfc.Role<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>bean</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>beans</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p>è¿è¡Œ  <code>MainApp.java</code>  å¾—åˆ°å¦‚ä¸‹ç»“æœï¼š</p>\n<blockquote>\n<p>Inside setRole.<br />\nInside getRoleDescription.</p>\n</blockquote>\n<p>é€šè¿‡ä¸Šè¿°ä»£ç åŠè¿è¡Œç»“æœï¼Œæˆ‘ä»¬å‘ç°æ·»åŠ   <code>autowire=&quot;byType&quot;</code>  åï¼Œ  <code>User</code>  ä¾èµ–çš„  <code>Role</code>  å®ä¾‹åœ¨æœªç»è¿‡æ˜¾ç¤ºå£°æ˜çš„æƒ…å†µä¸‹ä»è¢«è‡ªåŠ¨æ³¨å…¥åˆ° Spring å®¹å™¨ä¸­ã€‚æ­¤æ—¶ï¼Œç¨‹åºåœ¨è£…é…  <code>User</code>  æ—¶ï¼Œæ£€æµ‹åˆ°  <code>private Role role;</code>  å±æ€§ï¼Œå¹¶è‡ªåŠ¨æ ¹æ®  <code>Role</code>  ç±»å‹æŸ¥æ‰¾é…ç½®æ–‡ä»¶ï¼Œå¹¶å®Œæˆè‡ªåŠ¨æ³¨å…¥ã€‚</p>\n<h4 id=\"ç”±æ„é€ å‡½æ•°è‡ªåŠ¨è£…é…\"><a class=\"anchor\" href=\"#ç”±æ„é€ å‡½æ•°è‡ªåŠ¨è£…é…\">#</a> ç”±æ„é€ å‡½æ•°è‡ªåŠ¨è£…é…</h4>\n<p>è¿™ç§æ¨¡å¼ä¸ <em>byType</em> éå¸¸ç›¸ä¼¼ï¼Œä½†å®ƒåº”ç”¨äºæ„é€ å™¨å‚æ•°ã€‚</p>\n<p><strong>ä»£ç ç¤ºä¾‹ï¼š</strong></p>\n<p>æœ¬ç¤ºä¾‹éœ€è¦çš„æ–‡ä»¶ï¼šRole.javaã€User.javaã€Beans.xmlã€MainApp.javaï¼Œå…¶ä¸­ Role.javaã€MainApp.java æ–‡ä»¶ä¸ä¸Šä¸€ç¤ºä¾‹ä¸€è‡´ï¼Œæ­¤å¤„ä¸å†é‡è¿°ã€‚</p>\n<p>ä¿®æ”¹ User.java</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">User</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Role</span> role<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> name<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">User</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Role</span> role<span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span> name<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>role <span class=\"token operator\">=</span> role<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> name<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">getRoleDescription</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Current User: \"</span> <span class=\"token operator\">+</span> name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        role<span class=\"token punctuation\">.</span><span class=\"token function\">getRoleDescription</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>ä¿®æ”¹ Beans.xml</p>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token prolog\">&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>beans</span> <span class=\"token attr-name\">xmlns</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.springframework.org/schema/beans<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>xsi</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.w3.org/2001/XMLSchema-instance<span class=\"token punctuation\">\"</span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>       <span class=\"token attr-name\"><span class=\"token namespace\">xsi:</span>schemaLocation</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token comment\">&lt;!-- Definition for User bean --></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>bean</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>user<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>com.xfc.User<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">autowire</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>constructor<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>constructor-arg</span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>xfc_exclave<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>bean</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token comment\">&lt;!-- Definition for Role bean --></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>bean</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>role<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>com.xfc.Role<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>bean</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>beans</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p>è¿è¡Œ  <code>MainApp.java</code>  å¾—åˆ°å¦‚ä¸‹ç»“æœï¼š</p>\n<blockquote>\n<p>Current User: xfc_exclave<br />\nInside getRoleDescription.</p>\n</blockquote>\n<p>é€šè¿‡ä¸Šè¿°ä»£ç åŠè¿è¡Œç»“æœï¼Œæˆ‘ä»¬å‘ç°æ·»åŠ   <code>autowire=&quot;constructor&quot;</code>  åï¼Œ  <code>User</code>  ä¾èµ–çš„  <code>Role</code>  å®ä¾‹åœ¨æœªç»è¿‡æ˜¾ç¤ºå£°æ˜çš„æƒ…å†µä¸‹ä»è¢«è‡ªåŠ¨æ³¨å…¥åˆ° Spring å®¹å™¨ä¸­ã€‚æ­¤æ—¶ï¼Œç¨‹åºåœ¨è£…é…  <code>User</code>  æ—¶ï¼Œé€šè¿‡æ„é€ å‡½æ•°æ£€æµ‹åˆ°  <code>Role role</code>  å‚æ•°ï¼Œå¹¶è‡ªåŠ¨æ ¹æ®è¯¥å‚æ•°å®Œæˆè‡ªåŠ¨æ³¨å…¥ã€‚</p>\n<h3 id=\"åŸºäºæ³¨è§£çš„é…ç½®\"><a class=\"anchor\" href=\"#åŸºäºæ³¨è§£çš„é…ç½®\">#</a> åŸºäºæ³¨è§£çš„é…ç½®</h3>\n<p>ä» Spring 2.5 å¼€å§‹å°±å¯ä»¥ä½¿ç”¨ <strong>æ³¨è§£</strong> æ¥é…ç½®ä¾èµ–æ³¨å…¥ï¼Œè€Œä¸æ˜¯é‡‡ç”¨ XML æ¥æè¿°ä¸€ä¸ª bean è¿çº¿ã€‚æ³¨è§£è¿çº¿åœ¨é»˜è®¤æƒ…å†µä¸‹åœ¨ Spring å®¹å™¨ä¸­ä¸æ‰“å¼€ã€‚å› æ­¤ï¼Œåœ¨å¯ä»¥ä½¿ç”¨åŸºäºæ³¨è§£çš„è¿çº¿ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ Spring é…ç½®æ–‡ä»¶ä¸­å¯ç”¨ã€‚</p>\n<p>å¦‚æœä½ æƒ³åœ¨ Spring åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨çš„ä»»ä½•æ³¨è§£ï¼Œå¯ä»¥è€ƒè™‘åˆ°ä¸‹é¢çš„é…ç½®æ–‡ä»¶ã€‚</p>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token prolog\">&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>beans</span> <span class=\"token attr-name\">xmlns</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.springframework.org/schema/beans<span class=\"token punctuation\">\"</span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>xsi</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.w3.org/2001/XMLSchema-instance<span class=\"token punctuation\">\"</span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>context</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.springframework.org/schema/context<span class=\"token punctuation\">\"</span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token attr-name\"><span class=\"token namespace\">xsi:</span>schemaLocation</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.springframework.org/schema/beans</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    http://www.springframework.org/schema/context</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    http://www.springframework.org/schema/context/spring-context-3.0.xsd<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>   <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">context:</span>annotation-config</span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>   <span class=\"token comment\">&lt;!-- bean definitions go here --></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>beans</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p><strong>ç›¸å…³æ³¨è§£</strong></p>\n<table>\n<thead>\n<tr>\n<th>åºå·</th>\n<th>æ³¨è§£ &amp; æè¿°</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>1</td>\n<td><strong>@Required</strong> åº”ç”¨äº bean å±æ€§çš„ setter æ–¹æ³•ã€‚</td>\n</tr>\n<tr>\n<td>2</td>\n<td><strong>@Autowired</strong> å¯åº”ç”¨äº bean å±æ€§çš„ setter æ–¹æ³•ï¼Œé setter æ–¹æ³•ï¼Œæ„é€ å‡½æ•°å’Œå±æ€§ã€‚</td>\n</tr>\n<tr>\n<td>3</td>\n<td><strong>@Qualifier</strong> é€šè¿‡æŒ‡å®šç¡®åˆ‡çš„å°†è¢«è¿çº¿çš„ beanï¼Œ@Autowired å’Œ @Qualifier æ³¨è§£å¯ä»¥ç”¨æ¥åˆ é™¤æ··ä¹±ã€‚</td>\n</tr>\n<tr>\n<td>4</td>\n<td><strong>JSR-250</strong> å…¶ä¸­åŒ…æ‹¬äº† @Resourceï¼Œ@PostConstruct å’Œ @PreDestroy æ³¨è§£ã€‚</td>\n</tr>\n</tbody>\n</table>\n<h4 id=\"required\"><a class=\"anchor\" href=\"#required\">#</a> @Required</h4>\n<p><strong>@Required</strong> æ³¨è§£åº”ç”¨äº bean å±æ€§çš„ setter æ–¹æ³•ï¼Œå®ƒè¡¨æ˜å—å½±å“çš„ bean å±æ€§åœ¨é…ç½®æ—¶å¿…é¡»æ”¾åœ¨ XML é…ç½®æ–‡ä»¶ä¸­ï¼Œå¦åˆ™å®¹å™¨å°±ä¼šæŠ›å‡ºä¸€ä¸ª BeanInitializationException å¼‚å¸¸ã€‚</p>\n<p><strong>ä»£ç ç¤ºä¾‹ï¼š</strong></p>\n<p>æœ¬ç¤ºä¾‹éœ€è¦çš„æ–‡ä»¶ï¼šProduct.javaã€Beans.xmlã€MainApp.javaã€‚</p>\n<p>æ–°å»º Product.java</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>beans<span class=\"token punctuation\">.</span>factory<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Required</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Product</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> name<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Integer</span> count<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token keyword\">return</span> name<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token annotation punctuation\">@Required</span><span class=\"token comment\">// æ–°ç‰ˆæœ¬æ˜¾ç¤ºæ­¤æ³¨è§£è¿‡æ—¶ï¼Œæš‚æ—¶å¿½ç•¥</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">setName</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> name<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> name<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Integer</span> <span class=\"token function\">getCount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        <span class=\"token keyword\">return</span> count<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    <span class=\"token annotation punctuation\">@Required</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">setCount</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Integer</span> count<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>count <span class=\"token operator\">=</span> count<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>ä¿®æ”¹ Beans.xml</p>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token prolog\">&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>beans</span> <span class=\"token attr-name\">xmlns</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.springframework.org/schema/beans<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>xsi</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.w3.org/2001/XMLSchema-instance<span class=\"token punctuation\">\"</span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>       <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>context</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.springframework.org/schema/context<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\"><span class=\"token namespace\">xsi:</span>schemaLocation</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.springframework.org/schema/beans</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    http://www.springframework.org/schema/context</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    http://www.springframework.org/schema/context/spring-context-3.0.xsd<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">context:</span>annotation-config</span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token comment\">&lt;!-- Definition for product bean --></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>bean</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>product<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>com.xfc.Product<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>name<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>toothbrush<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token comment\">&lt;!--&lt;property name=\"count\" value=\"4\"/>--></span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>bean</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>beans</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><blockquote>\n<p>æ³¨ï¼šæ–°ç‰ˆæœ¬ä½¿ç”¨ @Required å¹¶é…ç½®ä¸Šè¿°é…ç½®æ–‡ä»¶æ—¶ï¼Œä»£ç ç¼–è¾‘é˜¶æ®µå³ä¼šæç¤ºé”™è¯¯ã€‚</p>\n</blockquote>\n<p>ä¿®æ”¹ MainApp.java</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>context<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">ApplicationContext</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>context<span class=\"token punctuation\">.</span>support<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">ClassPathXmlApplicationContext</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">MainApp</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token class-name\">ApplicationContext</span> context <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ClassPathXmlApplicationContext</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Beans.xml\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token class-name\">Product</span> product <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Product</span><span class=\"token punctuation\">)</span> context<span class=\"token punctuation\">.</span><span class=\"token function\">getBean</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"product\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Name : \"</span> <span class=\"token operator\">+</span> product<span class=\"token punctuation\">.</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Count : \"</span> <span class=\"token operator\">+</span> product<span class=\"token punctuation\">.</span><span class=\"token function\">getCount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>è¿è¡Œ  <code>MainApp.java</code>  ï¼Œè‹¥ @Required æ³¨è§£æœªè¿‡æ—¶ï¼Œå°†æŠ›å‡º  <code>BeanInitializationException</code>  å¼‚å¸¸å¹¶è¾“å‡ºå¦‚ä¸‹ä¿¡æ¯ï¼š</p>\n<blockquote>\n<p>Property 'count' is required for bean 'product'</p>\n</blockquote>\n<p>è‹¥ @Required æ³¨è§£å·²è¿‡æ—¶ï¼Œå°†å¾—åˆ°å¦‚ä¸‹ç»“æœï¼š</p>\n<blockquote>\n<p>Name : toothbrush<br />\nCount : null</p>\n</blockquote>\n<p>é€šè¿‡ä¸Šè¿°ä»£ç åŠè¿è¡Œç»“æœï¼Œæˆ‘ä»¬å¾—å‡ºç»“è®ºï¼š <code>@Required</code>  æ³¨è§£ä½œç”¨äº bean å±æ€§çš„ setter æ–¹æ³•ï¼Œä¸”è¦æ±‚å…¶å¯¹åº”çš„å±æ€§å¿…é¡»è¢«æ³¨å…¥åˆ° bean å®ä¾‹ä¸­ã€‚ä½†å¯¹äºè¾ƒæ–°ç‰ˆæœ¬è€Œè¨€ï¼Œ  <code>@Required</code>  è¢«æ ‡è®°ä¸ºè¿‡æ—¶æ³¨è§£ä¸”ä¸ä¼šç”Ÿæ•ˆï¼Œæœªè¢«æ³¨å…¥çš„å±æ€§å°†ä¼šè¢«å¡«å……è¯¥ç±»å‹å¯¹åº”çš„é»˜è®¤å€¼ã€‚</p>\n<h4 id=\"autowired\"><a class=\"anchor\" href=\"#autowired\">#</a> @Autowired</h4>\n<p><strong>@Autowired</strong> æ³¨è§£å¯¹åœ¨å“ªé‡Œå’Œå¦‚ä½•å®Œæˆè‡ªåŠ¨è¿æ¥æä¾›äº†æ›´å¤šçš„ç»†å¾®çš„æ§åˆ¶ã€‚</p>\n<ul>\n<li>\n<p>Setter æ–¹æ³•ä¸­çš„ @Autowired</p>\n<p><strong>ä»£ç ç¤ºä¾‹ï¼š</strong></p>\n<p>æœ¬ç¤ºä¾‹éœ€è¦çš„æ–‡ä»¶ï¼šRole.javaã€User.javaã€Beans.xmlã€MainApp.javaã€‚</p>\n<p>Role.java</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Role</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> description<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">getDescription</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token keyword\">return</span> description<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">setDescription</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> description<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>description <span class=\"token operator\">=</span> description<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">getRoleDescription</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"role description: \"</span> <span class=\"token operator\">+</span> description<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>ä¿®æ”¹ User.java</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>beans<span class=\"token punctuation\">.</span>factory<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Autowired</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">User</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Role</span> role<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Role</span> <span class=\"token function\">getRole</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token keyword\">return</span> role<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token annotation punctuation\">@Autowired</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">setRole</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Role</span> role<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>role <span class=\"token operator\">=</span> role<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">getRoleDescription</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        role<span class=\"token punctuation\">.</span><span class=\"token function\">getRoleDescription</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>ä¿®æ”¹ Beans.xml</p>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token prolog\">&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>beans</span> <span class=\"token attr-name\">xmlns</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.springframework.org/schema/beans<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>xsi</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.w3.org/2001/XMLSchema-instance<span class=\"token punctuation\">\"</span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>       <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>context</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.springframework.org/schema/context<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\"><span class=\"token namespace\">xsi:</span>schemaLocation</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.springframework.org/schema/beans</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    http://www.springframework.org/schema/context</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    http://www.springframework.org/schema/context/spring-context-3.0.xsd<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">context:</span>annotation-config</span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token comment\">&lt;!-- Definition for user bean --></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>bean</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>user<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>com.xfc.User<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token comment\">&lt;!-- Definition for role bean --></span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>bean</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>role<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>com.xfc.Role<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>description<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>this role is for admin<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>bean</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>beans</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p>ä¿®æ”¹ MainApp.java</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>context<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">ApplicationContext</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>context<span class=\"token punctuation\">.</span>support<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">ClassPathXmlApplicationContext</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">MainApp</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token class-name\">ApplicationContext</span> context <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ClassPathXmlApplicationContext</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Beans.xml\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token class-name\">User</span> user <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">User</span><span class=\"token punctuation\">)</span> context<span class=\"token punctuation\">.</span><span class=\"token function\">getBean</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"user\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        user<span class=\"token punctuation\">.</span><span class=\"token function\">getRoleDescription</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>è¿è¡Œ  <code>MainApp.java</code>  å¾—åˆ°å¦‚ä¸‹ç»“æœï¼š</p>\n<blockquote>\n<p>role description: this role is for admin</p>\n</blockquote>\n<p><code>User</code>  æ‰€ä¾èµ–çš„  <code>Role</code>  å¯¹è±¡é€šè¿‡  <code>setRole()</code>  æ–¹æ³•ä¸Šçš„  <code>@Autowired</code>  æ³¨è§£è¢«è‡ªåŠ¨æ³¨å…¥åˆ°å…¶ role å±æ€§ä¸­ã€‚</p>\n</li>\n<li>\n<p>å±æ€§ä¸­çš„ @Autowired</p>\n<p>ä¿®æ”¹ä¸Šä¸€ç¤ºä¾‹ä»£ç ä¸­çš„ User.java</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>beans<span class=\"token punctuation\">.</span>factory<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Autowired</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">User</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token annotation punctuation\">@Autowired</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Role</span> role<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">getRoleDescription</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        role<span class=\"token punctuation\">.</span><span class=\"token function\">getRoleDescription</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>å†æ¬¡è¿è¡Œ  <code>MainApp.java</code>  ä»å¾—åˆ°ç›¸åŒè¿”å›ç»“æœã€‚æ­¤æ—¶ï¼Œ  <code>User</code>  æ‰€ä¾èµ–çš„  <code>Role</code>  å¯¹è±¡é€šè¿‡å…¶å¯¹åº”å±æ€§ä¸Šçš„  <code>@Autowired</code>  æ³¨è§£å®ç°äº†ä¾èµ–æ³¨å…¥ã€‚</p>\n</li>\n<li>\n<p>æ„é€ å‡½æ•°ä¸­çš„ @Autowired</p>\n<p>å†ä¸€æ¬¡ä¿®æ”¹ User.java æ–‡ä»¶ã€‚</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>beans<span class=\"token punctuation\">.</span>factory<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Autowired</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">User</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Role</span> role<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token annotation punctuation\">@Autowired</span><span class=\"token comment\">// å¯ä»¥çœç•¥</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">User</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Role</span> role<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>role <span class=\"token operator\">=</span> role<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">getRoleDescription</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        role<span class=\"token punctuation\">.</span><span class=\"token function\">getRoleDescription</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>ä»æ—§å¾—åˆ°ç›¸åŒç»“æœï¼Œæ­¤æ—¶  <code>User</code>  é€šè¿‡æ„é€ å‡½æ•°ä¸Šçš„ @Autowired æ³¨è§£å®ç°äº†ä¾èµ–æ³¨å…¥ã€‚</p>\n</li>\n<li>\n<p>@Autowired çš„ï¼ˆrequired=falseï¼‰é€‰é¡¹</p>\n<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œ@Autowired æ³¨é‡Šæ„å‘³ç€ä¾èµ–æ˜¯å¿…é¡»çš„ï¼Œå®ƒç±»ä¼¼äº @Required æ³¨é‡Šï¼Œå¯ä»¥é€šè¿‡ @Autowired çš„ <strong>ï¼ˆrequired=falseï¼‰</strong> é€‰é¡¹å…³é—­é»˜è®¤è¡Œä¸ºï¼ˆæ­¤é¡¹ä¸å†è¿›è¡Œä»£ç æ¼”ç¤ºï¼‰ã€‚</p>\n</li>\n</ul>\n<h4 id=\"qualifier\"><a class=\"anchor\" href=\"#qualifier\">#</a> @Qualifier</h4>\n<p>å½“éœ€è¦å‘ Spring å®¹å™¨ä¸­æ³¨å…¥å¤šä¸ªåŒç±»å‹ bean æ—¶ï¼Œå¯ä»¥é€šè¿‡ @Qualifier æŒ‡å®šå®ä¾‹å¯¹è±¡ä¸æ³¨å…¥é…ç½®ä¹‹é—´çš„è¿çº¿å…³ç³»ã€‚</p>\n<p><strong>ä»£ç ç¤ºä¾‹ï¼š</strong></p>\n<p>æœ¬ç¤ºä¾‹éœ€è¦çš„æ–‡ä»¶ï¼šRole.javaã€User.javaã€Beans.xmlã€MainApp.javaï¼Œå…¶ä¸­ Role.javaã€MainApp.java æ–‡ä»¶ä¸ä¸Šä¸€ç¤ºä¾‹ä¸€è‡´ï¼Œæ­¤å¤„ä¸å†é‡è¿°ã€‚</p>\n<p>ä¿®æ”¹ User.java</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>beans<span class=\"token punctuation\">.</span>factory<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Autowired</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>beans<span class=\"token punctuation\">.</span>factory<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Qualifier</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">User</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token annotation punctuation\">@Autowired</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token annotation punctuation\">@Qualifier</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"role1\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Role</span> admin<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token annotation punctuation\">@Autowired</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token annotation punctuation\">@Qualifier</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"role2\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Role</span> customer<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">getRoleDescription</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        admin<span class=\"token punctuation\">.</span><span class=\"token function\">getRoleDescription</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        customer<span class=\"token punctuation\">.</span><span class=\"token function\">getRoleDescription</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>ä¿®æ”¹ Beans.xml</p>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token prolog\">&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>beans</span> <span class=\"token attr-name\">xmlns</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.springframework.org/schema/beans<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>xsi</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.w3.org/2001/XMLSchema-instance<span class=\"token punctuation\">\"</span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>       <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>context</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.springframework.org/schema/context<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\"><span class=\"token namespace\">xsi:</span>schemaLocation</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.springframework.org/schema/beans</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    http://www.springframework.org/schema/context</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    http://www.springframework.org/schema/context/spring-context-3.0.xsd<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">context:</span>annotation-config</span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>bean</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>user<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>com.xfc.User<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>bean</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>role1<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>com.xfc.Role<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>description<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>this role is for admin<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>bean</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>bean</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>role2<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>com.xfc.Role<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>description<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>this role is for customer<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>bean</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>beans</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p>è¿è¡Œ  <code>MainApp.java</code>  å¾—åˆ°å¦‚ä¸‹ç»“æœï¼š</p>\n<blockquote>\n<p>role description: this role is for admin<br />\nrole description: this role is for customer</p>\n</blockquote>\n<h4 id=\"jsr-250-æ³¨é‡Š\"><a class=\"anchor\" href=\"#jsr-250-æ³¨é‡Š\">#</a> JSR-250 æ³¨é‡Š</h4>\n<p>Spring è¿˜ä½¿ç”¨åŸºäº JSR-250 æ³¨é‡Šï¼Œå®ƒåŒ…æ‹¬ @PostConstructï¼Œ @PreDestroy å’Œ @Resource æ³¨é‡Šã€‚</p>\n<p><strong>@PostConstruct</strong> å’Œ <strong>@PreDestroy</strong> æ³¨è§£åˆ†åˆ«å¯¹åº”é…ç½®æ–‡ä»¶ä¸­çš„  <code>init-method</code>  å’Œ  <code>destroy-method</code>  å‚æ•°ã€‚</p>\n<p>ä¿®æ”¹ä¸Šä¸€ç¤ºä¾‹ä»£ç ä¸­çš„ User.java</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>beans<span class=\"token punctuation\">.</span>factory<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Autowired</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>beans<span class=\"token punctuation\">.</span>factory<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Qualifier</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">javax<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">PostConstruct</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">javax<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">PreDestroy</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">User</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token annotation punctuation\">@Autowired</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token annotation punctuation\">@Qualifier</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"role1\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Role</span> admin<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token annotation punctuation\">@Autowired</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token annotation punctuation\">@Qualifier</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"role2\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Role</span> customer<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">getRoleDescription</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>        admin<span class=\"token punctuation\">.</span><span class=\"token function\">getRoleDescription</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>        customer<span class=\"token punctuation\">.</span><span class=\"token function\">getRoleDescription</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>    <span class=\"token annotation punctuation\">@PostConstruct</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">init</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"--------------- Bean init ----------------\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>    <span class=\"token annotation punctuation\">@PreDestroy</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">destroy</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"-------------- Bean destroy --------------\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>ä¿®æ”¹ MainApp.java</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>context<span class=\"token punctuation\">.</span>support<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">AbstractApplicationContext</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>context<span class=\"token punctuation\">.</span>support<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">ClassPathXmlApplicationContext</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">MainApp</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token class-name\">AbstractApplicationContext</span> context <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ClassPathXmlApplicationContext</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Beans.xml\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token class-name\">User</span> user <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">User</span><span class=\"token punctuation\">)</span> context<span class=\"token punctuation\">.</span><span class=\"token function\">getBean</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"user\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        user<span class=\"token punctuation\">.</span><span class=\"token function\">getRoleDescription</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        context<span class=\"token punctuation\">.</span><span class=\"token function\">registerShutdownHook</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>è¿è¡Œ  <code>MainApp.java</code>  å¾—åˆ°å¦‚ä¸‹ç»“æœï¼š</p>\n<blockquote>\n<p>--------------- Bean init ----------------<br />\nrole description: this role is for admin<br />\nrole description: this role is for customer<br />\n-------------- Bean destroy --------------</p>\n</blockquote>\n<p><strong>@Resource</strong> æ³¨è§£æŒ‡å®š name å±æ€§ï¼Œæ”¹å±æ€§ä¼šä»¥ä¸€ä¸ª bean åç§°çš„å½¢å¼è¢«æ³¨å…¥ï¼Œå®ƒéµå¾ª  <code>by-name</code>  è‡ªåŠ¨è¿æ¥è¯­ä¹‰ã€‚è¯¥æ³¨è§£ä½œç”¨äºå¯¹è±¡çš„å±æ€§æˆ– setter æ–¹æ³•ã€‚</p>\n<p>å†æ¬¡ä¿®æ”¹ User.java</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">javax<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Resource</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">User</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token annotation punctuation\">@Resource</span><span class=\"token punctuation\">(</span>name <span class=\"token operator\">=</span> <span class=\"token string\">\"role1\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Role</span> role<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">getRoleDescription</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        role<span class=\"token punctuation\">.</span><span class=\"token function\">getRoleDescription</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>æˆ–è€…ä¿®æ”¹ä¸ºï¼š</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">javax<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Resource</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">User</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Role</span> role<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token annotation punctuation\">@Resource</span><span class=\"token punctuation\">(</span>name <span class=\"token operator\">=</span> <span class=\"token string\">\"role1\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">setRole</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Role</span> role<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>role <span class=\"token operator\">=</span> role<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">getRoleDescription</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        role<span class=\"token punctuation\">.</span><span class=\"token function\">getRoleDescription</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>è¿è¡Œ  <code>MainApp.java</code>  å¾—åˆ°å¦‚ä¸‹ç»“æœï¼š</p>\n<blockquote>\n<p>role description: this role is for admin</p>\n</blockquote>\n<h4 id=\"åŸºäº-java-çš„é…ç½®\"><a class=\"anchor\" href=\"#åŸºäº-java-çš„é…ç½®\">#</a> åŸºäº Java çš„é…ç½®</h4>\n<p>æ­¤å‰å·²ç»å®Œæˆäº†åŸºäº  <code>xml</code>  çš„æ–¹å¼é…ç½® Spring bean ã€‚ä½† Spring ä¹Ÿæä¾›äº†åŸºäº java é…ç½® Spring bean çš„æ–¹æ³•ã€‚</p>\n<p><strong>@Configuration å’Œ @Bean æ³¨è§£</strong></p>\n<p>å¸¦æœ‰ <strong>@Configuration</strong> çš„æ³¨è§£ç±»è¡¨ç¤ºè¿™ä¸ªç±»å¯ä»¥ä½¿ç”¨ Spring IoC å®¹å™¨ä½œä¸º bean å®šä¹‰çš„æ¥æºã€‚<strong>@Bean</strong> æ³¨è§£å‘Šè¯‰ Springï¼Œä¸€ä¸ªå¸¦æœ‰ @Bean çš„æ³¨è§£æ–¹æ³•å°†è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œè¯¥å¯¹è±¡åº”è¯¥è¢«æ³¨å†Œä¸ºåœ¨ Spring åº”ç”¨ç¨‹åºä¸Šä¸‹æ–‡ä¸­çš„ beanã€‚</p>\n<p><strong>ä»£ç ç¤ºä¾‹ï¼š</strong></p>\n<p>æœ¬ç¤ºä¾‹éœ€è¦çš„æ–‡ä»¶ï¼šProduct.javaã€BeanConfig.javaã€Beans.xmlã€MainApp.javaï¼Œå…¶ä¸­ Beans.xml æ–‡ä»¶ä¸ä¸Šä¸€ç¤ºä¾‹ä¸€è‡´ï¼Œæ­¤å¤„ä¸å†é‡è¿°ã€‚</p>\n<p>ä¿®æ”¹ Product.java</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Product</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> name<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Integer</span> count<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Product</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> name<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Integer</span> count<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> name<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>count <span class=\"token operator\">=</span> count<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token keyword\">return</span> name<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Integer</span> <span class=\"token function\">getCount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        <span class=\"token keyword\">return</span> count<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>åˆ›å»º BeanConfig.java</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>context<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Bean</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>context<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Configuration</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token annotation punctuation\">@Configuration</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">BeanConfig</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token annotation punctuation\">@Bean</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Product</span> <span class=\"token function\">product</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Product</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"washing machine\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>ä¿®æ”¹ MainApp.java</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>context<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">ApplicationContext</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>context<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">AnnotationConfigApplicationContext</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">MainApp</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token class-name\">ApplicationContext</span> ctx <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">AnnotationConfigApplicationContext</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">BeanConfig</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token class-name\">Product</span> product <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Product</span><span class=\"token punctuation\">)</span> ctx<span class=\"token punctuation\">.</span><span class=\"token function\">getBean</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"product\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"product: \"</span> <span class=\"token operator\">+</span> product<span class=\"token punctuation\">.</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"count: \"</span> <span class=\"token operator\">+</span> product<span class=\"token punctuation\">.</span><span class=\"token function\">getCount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>è¿è¡Œ  <code>MainApp.java</code>  ï¼Œå¾—åˆ°å¦‚ä¸‹ç»“æœï¼š</p>\n<blockquote>\n<p>product: washing machine<br />\ncount: 3</p>\n</blockquote>\n<p>å¯¹äºä½¿ç”¨  <code>@Configuration</code>  ä¸­æ³¨å…¥å¤šä¸ªå®ä¾‹ï¼Œåªéœ€é…ç½®å¤šä¸ª  <code>@Bean</code>  å³å¯ã€‚</p>\n<p><strong>@Import æ³¨è§£</strong></p>\n<p><strong>@import</strong> æ³¨è§£å…è®¸ä»å¦ä¸€ä¸ªé…ç½®ç±»ä¸­åŠ è½½ @Bean å®šä¹‰ã€‚</p>\n<p>ç¤ºä¾‹ï¼š</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token annotation punctuation\">@Configuration</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">ConfigA</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>   <span class=\"token annotation punctuation\">@Bean</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>   <span class=\"token keyword\">public</span> <span class=\"token class-name\">A</span> <span class=\"token function\">a</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>      <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">A</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> </pre></td></tr><tr><td data-num=\"6\"></td><td><pre>   <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token annotation punctuation\">@Configuration</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token annotation punctuation\">@Import</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">ConfigA</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token comment\">// ä» ConfigA ä¸­åŠ è½½ Bean</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">ConfigB</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>   <span class=\"token annotation punctuation\">@Bean</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>   <span class=\"token keyword\">public</span> <span class=\"token class-name\">B</span> <span class=\"token function\">a</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>      <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">A</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> </pre></td></tr><tr><td data-num=\"7\"></td><td><pre>   <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p><strong>ç”Ÿå‘½å‘¨æœŸå›è°ƒ</strong></p>\n<p>ä¸ Spring åœ¨ xml ä¸­æŒ‡å®šåˆå§‹åŒ–å’Œé”€æ¯æ–¹æ³•ä¸€æ ·ï¼Œ@Bean æ³¨è§£ä¹Ÿæ”¯æŒæŒ‡å®šä»»æ„çš„åˆå§‹åŒ–å’Œé”€æ¯çš„å›è°ƒæ–¹æ³•ï¼Œå…¶è¯­æ³•å¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token annotation punctuation\">@Bean</span><span class=\"token punctuation\">(</span>initMethod <span class=\"token operator\">=</span> <span class=\"token string\">\"init\"</span><span class=\"token punctuation\">,</span> destroyMethod <span class=\"token operator\">=</span> <span class=\"token string\">\"destroy\"</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>æŒ‡å®š Bean çš„èŒƒå›´ï¼š</p>\n<p>@Bean é»˜è®¤èŒƒå›´æ˜¯å•å®ä¾‹ï¼Œä½†æˆ‘ä»¬å¯ä»¥é‡å†™å¸¦æœ‰ @Scope æ³¨è§£çš„è¯¥æ–¹æ³•ã€‚ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token annotation punctuation\">@Configuration</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">AppConfig</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>   <span class=\"token annotation punctuation\">@Bean</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>   <span class=\"token annotation punctuation\">@Scope</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"prototype\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>   <span class=\"token keyword\">public</span> <span class=\"token class-name\">Foo</span> <span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>      <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Foo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>   <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h4 id=\"äº‹ä»¶å¤„ç†\"><a class=\"anchor\" href=\"#äº‹ä»¶å¤„ç†\">#</a> äº‹ä»¶å¤„ç†</h4>\n<p>Spring çš„æ ¸å¿ƒæ˜¯ <strong>ApplicationContext</strong>ï¼Œå®ƒè´Ÿè´£ç®¡ç† beans çš„å®Œæ•´ç”Ÿå‘½å‘¨æœŸã€‚</p>\n<p>é€šè¿‡ ApplicationEvent ç±»å’Œ ApplicationListener æ¥å£æ¥æä¾›åœ¨ ApplicationContext ä¸­å¤„ç†äº‹ä»¶ã€‚å¦‚æœä¸€ä¸ª bean å®ç° ApplicationListenerï¼Œé‚£ä¹ˆæ¯æ¬¡ ApplicationEvent è¢«å‘å¸ƒåˆ° ApplicationContext ä¸Šï¼Œé‚£ä¸ª bean ä¼šè¢«é€šçŸ¥ã€‚</p>\n<p>Spring æä¾›äº†ä»¥ä¸‹çš„æ ‡å‡†äº‹ä»¶ï¼š</p>\n<table>\n<thead>\n<tr>\n<th>Spring å†…ç½®äº‹ä»¶</th>\n<th>æè¿°</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>ContextRefreshedEvent</td>\n<td>ApplicationContext è¢«åˆå§‹åŒ–æˆ–åˆ·æ–°æ—¶ï¼Œè¯¥äº‹ä»¶è¢«è§¦å‘ã€‚è¿™ä¹Ÿå¯ä»¥åœ¨ ConfigurableApplicationContext æ¥å£ä¸­ä½¿ç”¨ refresh () æ–¹æ³•æ¥è§¦å‘ã€‚</td>\n</tr>\n<tr>\n<td>ContextStartedEvent</td>\n<td>å½“ä½¿ç”¨ ConfigurableApplicationContext æ¥å£ä¸­çš„ start () æ–¹æ³•å¯åŠ¨ ApplicationContext æ—¶ï¼Œè¯¥äº‹ä»¶è¢«è§¦å‘ã€‚</td>\n</tr>\n<tr>\n<td>ContextStoppedEvent</td>\n<td>å½“ä½¿ç”¨ ConfigurableApplicationContext æ¥å£ä¸­çš„ stop () æ–¹æ³•åœæ­¢ ApplicationContext æ—¶ï¼Œè¯¥äº‹ä»¶è¢«è§¦å‘ã€‚</td>\n</tr>\n<tr>\n<td>ContextClosedEvent</td>\n<td>å½“ä½¿ç”¨ ConfigurableApplicationContext æ¥å£ä¸­çš„ close () æ–¹æ³•å…³é—­ ApplicationContext æ—¶ï¼Œè¯¥äº‹ä»¶è¢«è§¦å‘ã€‚ä¸€ä¸ªå·²å…³é—­çš„ä¸Šä¸‹æ–‡åˆ°è¾¾ç”Ÿå‘½å‘¨æœŸæœ«ç«¯ï¼›å®ƒä¸èƒ½è¢«åˆ·æ–°æˆ–é‡å¯ã€‚</td>\n</tr>\n<tr>\n<td>RequestHandledEvent</td>\n<td>æ˜¯ä¸€ä¸ª web-specific äº‹ä»¶ï¼Œå‘Šè¯‰æ‰€æœ‰ bean HTTP è¯·æ±‚å·²ç»è¢«æœåŠ¡ã€‚</td>\n</tr>\n</tbody>\n</table>\n<p>åœ¨è®¾è®¡åº”ç”¨ç¨‹åºæ—¶åº”å½“æ³¨æ„ï¼Œç”±äº Spring çš„äº‹ä»¶å¤„ç†æ˜¯å•çº¿ç¨‹çš„ï¼Œä¸€ä¸ªäº‹ä»¶è¢«å‘å¸ƒï¼Œç›´åˆ°æ‰€æœ‰çš„æ¥æ”¶è€…éƒ½å¤„ç†å®Œè¿™ä¸ªæ¶ˆæ¯ä¹‹å‰ï¼Œè¯¥è¿›ç¨‹ä¼šè¢«é˜»å¡ï¼Œæµç¨‹ä¸ä¼šç»§ç»­ã€‚</p>\n<p><strong>ç›‘å¬ä¸Šä¸‹æ–‡äº‹ä»¶</strong></p>\n<p>ä¸ºäº†ç›‘å¬ä¸Šä¸‹æ–‡äº‹ä»¶ï¼Œä¸€ä¸ª bean åº”è¯¥å®ç° ApplicationListener æ¥å£çš„ <strong>onApplicationEvent()</strong> æ–¹æ³•ã€‚</p>\n<p><strong>ä»£ç ç¤ºä¾‹ï¼š</strong></p>\n<p>æœ¬ç¤ºä¾‹éœ€è¦çš„æ–‡ä»¶ï¼šProduct.javaã€StartEventHandler.javaã€StopEventHandler.javaã€BeanConfig.javaã€MainApp.javaã€‚</p>\n<p>ä¿®æ”¹ Product.java</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Product</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> name<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Integer</span> count<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Product</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> name<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Integer</span> count<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> name<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>count <span class=\"token operator\">=</span> count<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token keyword\">return</span> name<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Integer</span> <span class=\"token function\">getCount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        <span class=\"token keyword\">return</span> count<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>æ–°å»º StartEventHandler.java</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>context<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">ApplicationListener</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>context<span class=\"token punctuation\">.</span>event<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">ContextStartedEvent</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">StartEventHandler</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">ApplicationListener</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">ContextStartedEvent</span><span class=\"token punctuation\">></span></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">onApplicationEvent</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">ContextStartedEvent</span> contextStartedEvent<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ContextStartedEvent Received\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>æ–°å»º StopEventHandler.java</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>context<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">ApplicationListener</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>context<span class=\"token punctuation\">.</span>event<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">ContextStoppedEvent</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">StopEventHandler</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">ApplicationListener</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">ContextStoppedEvent</span><span class=\"token punctuation\">></span></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">onApplicationEvent</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">ContextStoppedEvent</span> contextStoppedEvent<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ContextStoppedEvent Received\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>ä¿®æ”¹ BeanConfig.java</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>context<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Bean</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>context<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Configuration</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token annotation punctuation\">@Configuration</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">BeanConfig</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token annotation punctuation\">@Bean</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Product</span> <span class=\"token function\">product</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Product</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"washing machine\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token annotation punctuation\">@Bean</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">StartEventHandler</span> <span class=\"token function\">startEventHandler</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">StartEventHandler</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token annotation punctuation\">@Bean</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">StopEventHandler</span> <span class=\"token function\">stopEventHandler</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">StopEventHandler</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>ä¿®æ”¹ MainApp.java</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>context<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">ConfigurableApplicationContext</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>context<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">AnnotationConfigApplicationContext</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">MainApp</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token class-name\">ConfigurableApplicationContext</span> ctx <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">AnnotationConfigApplicationContext</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">BeanConfig</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        ctx<span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token class-name\">Product</span> product <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Product</span><span class=\"token punctuation\">)</span> ctx<span class=\"token punctuation\">.</span><span class=\"token function\">getBean</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"product\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Name : \"</span> <span class=\"token operator\">+</span> product<span class=\"token punctuation\">.</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Count : \"</span> <span class=\"token operator\">+</span> product<span class=\"token punctuation\">.</span><span class=\"token function\">getCount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        ctx<span class=\"token punctuation\">.</span><span class=\"token function\">stop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>å½“ç„¶ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ xml æ–¹å¼é…ç½®å¯¹åº”çš„ beanã€‚</p>\n<p>è¿è¡Œ  <code>MainApp.java</code>  ï¼Œå¾—åˆ°å¦‚ä¸‹ç»“æœï¼š</p>\n<blockquote>\n<p>ContextStartedEvent Received<br />\nName : washing machine<br />\nCount : 3<br />\nContextStoppedEvent Received</p>\n</blockquote>\n<h4 id=\"è‡ªå®šä¹‰äº‹ä»¶\"><a class=\"anchor\" href=\"#è‡ªå®šä¹‰äº‹ä»¶\">#</a> è‡ªå®šä¹‰äº‹ä»¶</h4>\n<p><strong>ä»£ç ç¤ºä¾‹ï¼š</strong></p>\n<p>æœ¬ç¤ºä¾‹éœ€è¦çš„æ–‡ä»¶ï¼šCustomEvent.javaã€CustomEventHandler.javaã€CustomEventPublisher.javaã€MainApp.javaã€‚</p>\n<p>æ–°å»º CustomEvent.java</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>context<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">ApplicationEvent</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">CustomEvent</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">ApplicationEvent</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">CustomEvent</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Object</span> source<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>source<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token string\">\"My Custom Event\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>æ–°å»º CustomEventHandler.java</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>context<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">ApplicationListener</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">CustomEventHandler</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">ApplicationListener</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">CustomEvent</span><span class=\"token punctuation\">></span></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">onApplicationEvent</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">CustomEvent</span> event<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>æ–°å»º CustomEventPublisher.java</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>beans<span class=\"token punctuation\">.</span>factory<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Autowired</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>context<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">ApplicationEventPublisher</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>context<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">ApplicationEventPublisherAware</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">CustomEventPublisher</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">ApplicationEventPublisherAware</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">ApplicationEventPublisher</span> publisher<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">setApplicationEventPublisher</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">ApplicationEventPublisher</span> publisher<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>publisher <span class=\"token operator\">=</span> publisher<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">publish</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        <span class=\"token class-name\">CustomEvent</span> ce <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">CustomEvent</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        publisher<span class=\"token punctuation\">.</span><span class=\"token function\">publishEvent</span><span class=\"token punctuation\">(</span>ce<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><blockquote>\n<p>æ³¨ï¼šCustomEventPublisher ä¹Ÿå¯ä»¥ç›´æ¥å®ç°  <code>Aware</code>  æ¥å£ï¼Œç„¶åé€šè¿‡æ„é€ å‡½æ•°æˆ–  <code>@Autowired</code>  æ³¨å…¥ ApplicationEventPublisher ä¾èµ–ã€‚</p>\n</blockquote>\n<p>ä¿®æ”¹ MainApp.java</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>context<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">ConfigurableApplicationContext</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>context<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">AnnotationConfigApplicationContext</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">MainApp</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token class-name\">ConfigurableApplicationContext</span> ctx <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">AnnotationConfigApplicationContext</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">BeanConfig</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token class-name\">CustomEventPublisher</span> cvp <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">CustomEventPublisher</span><span class=\"token punctuation\">)</span> ctx<span class=\"token punctuation\">.</span><span class=\"token function\">getBean</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"customEventPublisher\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        cvp<span class=\"token punctuation\">.</span><span class=\"token function\">publish</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>è¿è¡Œ  <code>MainApp.java</code>  ï¼Œå¾—åˆ°å¦‚ä¸‹ç»“æœï¼š</p>\n<blockquote>\n<p>My Custom Event</p>\n</blockquote>\n<h3 id=\"spring-æ¡†æ¶çš„-aop\"><a class=\"anchor\" href=\"#spring-æ¡†æ¶çš„-aop\">#</a> Spring æ¡†æ¶çš„ AOP</h3>\n<p>é¢å‘åˆ‡é¢çš„ç¼–ç¨‹éœ€è¦æŠŠç¨‹åºé€»è¾‘åˆ†è§£æˆä¸åŒçš„éƒ¨åˆ†ç§°ä¸ºæ‰€è°“çš„å…³æ³¨ç‚¹ã€‚è·¨ä¸€ä¸ªåº”ç”¨ç¨‹åºçš„å¤šä¸ªç‚¹çš„åŠŸèƒ½è¢«ç§°ä¸º <strong>æ¨ªåˆ‡å…³æ³¨ç‚¹</strong> ï¼Œè¿™äº›æ¨ªåˆ‡å…³æ³¨ç‚¹åœ¨æ¦‚å¿µä¸Šç‹¬ç«‹äºåº”ç”¨ç¨‹åºçš„ä¸šåŠ¡é€»è¾‘ã€‚</p>\n<p>Spring AOP æ¨¡å—æä¾›æ‹¦æˆªå™¨æ¥æ‹¦æˆªä¸€ä¸ªåº”ç”¨ç¨‹åºï¼Œä¾‹å¦‚ï¼Œå½“æ‰§è¡Œä¸€ä¸ªæ–¹æ³•æ—¶ï¼Œä½ å¯ä»¥åœ¨æ–¹æ³•æ‰§è¡Œä¹‹å‰æˆ–ä¹‹åæ·»åŠ é¢å¤–çš„åŠŸèƒ½ã€‚</p>\n<p><strong>AOP æœ¯è¯­</strong></p>\n<table>\n<thead>\n<tr>\n<th>æœ¯è¯­</th>\n<th>æè¿°</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Aspect</td>\n<td>ä¸€ä¸ªæ¨¡å—å…·æœ‰ä¸€ç»„æä¾›æ¨ªåˆ‡éœ€æ±‚çš„ APIsã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªæ—¥å¿—æ¨¡å—ä¸ºäº†è®°å½•æ—¥å¿—å°†è¢« AOP åˆ‡é¢è°ƒç”¨ã€‚åº”ç”¨ç¨‹åºå¯ä»¥æ‹¥æœ‰ä»»æ„æ•°é‡çš„åˆ‡é¢ï¼Œè¿™å–å†³äºéœ€æ±‚ã€‚</td>\n</tr>\n<tr>\n<td>Join point</td>\n<td>åœ¨ä½ çš„åº”ç”¨ç¨‹åºä¸­å®ƒä»£è¡¨ä¸€ä¸ªç‚¹ï¼Œä½ å¯ä»¥åœ¨æ’ä»¶ AOP åˆ‡é¢ã€‚ä½ ä¹Ÿèƒ½è¯´ï¼Œå®ƒæ˜¯åœ¨å®é™…çš„åº”ç”¨ç¨‹åºä¸­ï¼Œå…¶ä¸­ä¸€ä¸ªæ“ä½œå°†ä½¿ç”¨ Spring AOP æ¡†æ¶ã€‚</td>\n</tr>\n<tr>\n<td>Advice</td>\n<td>è¿™æ˜¯å®é™…è¡ŒåŠ¨ä¹‹å‰æˆ–ä¹‹åæ‰§è¡Œçš„æ–¹æ³•ã€‚è¿™æ˜¯åœ¨ç¨‹åºæ‰§è¡ŒæœŸé—´é€šè¿‡ Spring AOP æ¡†æ¶å®é™…è¢«è°ƒç”¨çš„ä»£ç ã€‚</td>\n</tr>\n<tr>\n<td>Pointcut</td>\n<td>è¿™æ˜¯ä¸€ç»„ä¸€ä¸ªæˆ–å¤šä¸ªè¿æ¥ç‚¹ï¼Œé€šçŸ¥åº”è¯¥è¢«æ‰§è¡Œã€‚ä½ å¯ä»¥ä½¿ç”¨è¡¨è¾¾å¼æˆ–æ¨¡å¼æŒ‡å®šåˆ‡å…¥ç‚¹æ­£å¦‚æˆ‘ä»¬å°†åœ¨ AOP çš„ä¾‹å­ä¸­çœ‹åˆ°çš„ã€‚</td>\n</tr>\n<tr>\n<td>Introduction</td>\n<td>å¼•ç”¨å…è®¸ä½ æ·»åŠ æ–°æ–¹æ³•æˆ–å±æ€§åˆ°ç°æœ‰çš„ç±»ä¸­ã€‚</td>\n</tr>\n<tr>\n<td>Target object</td>\n<td>è¢«ä¸€ä¸ªæˆ–è€…å¤šä¸ªæ–¹é¢æ‰€é€šçŸ¥çš„å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡æ°¸è¿œæ˜¯ä¸€ä¸ªè¢«ä»£ç†å¯¹è±¡ã€‚ä¹Ÿç§°ä¸ºè¢«é€šçŸ¥å¯¹è±¡ã€‚</td>\n</tr>\n<tr>\n<td>Weaving</td>\n<td>Weaving æŠŠåˆ‡é¢è¿æ¥åˆ°å…¶å®ƒçš„åº”ç”¨ç¨‹åºç±»å‹æˆ–è€…å¯¹è±¡ä¸Šï¼Œå¹¶åˆ›å»ºä¸€ä¸ªè¢«é€šçŸ¥çš„å¯¹è±¡ã€‚è¿™äº›å¯ä»¥åœ¨ç¼–è¯‘æ—¶ï¼Œç±»åŠ è½½æ—¶å’Œè¿è¡Œæ—¶å®Œæˆã€‚</td>\n</tr>\n</tbody>\n</table>\n<p><strong>é€šçŸ¥çš„ç±»å‹</strong></p>\n<ul>\n<li>å‰ç½®é€šçŸ¥ï¼šåœ¨ä¸€ä¸ªæ–¹æ³•æ‰§è¡Œä¹‹å‰ï¼Œæ‰§è¡Œé€šçŸ¥ã€‚</li>\n<li>åç½®é€šçŸ¥ï¼šåœ¨ä¸€ä¸ªæ–¹æ³•æ‰§è¡Œä¹‹åï¼Œä¸è€ƒè™‘å…¶ç»“æœï¼Œæ‰§è¡Œé€šçŸ¥ã€‚</li>\n<li>è¿”å›åé€šçŸ¥ï¼šåœ¨ä¸€ä¸ªæ–¹æ³•æ‰§è¡Œä¹‹åï¼Œåªæœ‰åœ¨æ–¹æ³•æˆåŠŸå®Œæˆæ—¶ï¼Œæ‰èƒ½æ‰§è¡Œé€šçŸ¥ã€‚</li>\n<li>æŠ›å‡ºå¼‚å¸¸åé€šçŸ¥ï¼šåœ¨ä¸€ä¸ªæ–¹æ³•æ‰§è¡Œä¹‹åï¼Œåªæœ‰åœ¨æ–¹æ³•é€€å‡ºæŠ›å‡ºå¼‚å¸¸æ—¶ï¼Œæ‰èƒ½æ‰§è¡Œé€šçŸ¥ã€‚</li>\n<li>ç¯ç»•é€šçŸ¥ï¼šåœ¨å»ºè®®æ–¹æ³•è°ƒç”¨ä¹‹å‰å’Œä¹‹åï¼Œæ‰§è¡Œé€šçŸ¥ã€‚</li>\n</ul>\n<p><strong>å®ç°è‡ªå®šä¹‰åˆ‡é¢</strong></p>\n<p>Spring æ”¯æŒ @AspectJ annotation style çš„æ–¹æ³•å’ŒåŸºäºæ¨¡å¼çš„æ–¹æ³•æ¥å®ç°è‡ªå®šä¹‰åˆ‡é¢ã€‚</p>\n<ul>\n<li>XML Schema based ä½¿ç”¨å¸¸è§„ç±»ä»¥åŠåŸºäºé…ç½®çš„ XML æ¥å®ç°ã€‚</li>\n<li>@AspectJ based å¼•ç”¨ä¸€ç§å£°æ˜åˆ‡é¢çš„é£æ ¼ä½œä¸ºå¸¦æœ‰ Java 5 æ³¨é‡Šçš„å¸¸è§„ Java ç±»æ³¨é‡Šã€‚</li>\n</ul>\n<h4 id=\"åŸºäº-aop-çš„-xmlæ¶æ„\"><a class=\"anchor\" href=\"#åŸºäº-aop-çš„-xmlæ¶æ„\">#</a> åŸºäº AOP çš„ XML æ¶æ„</h4>\n<p><strong>é…ç½®ç¤ºä¾‹ï¼š</strong></p>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">aop:</span>config</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>   <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">aop:</span>aspect</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>myAspect<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">ref</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>aBean<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">aop:</span>pointcut</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>businessService<span class=\"token punctuation\">\"</span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>         <span class=\"token attr-name\">expression</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>execution(* com.xfc.service.*.*(..))<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>      <span class=\"token comment\">&lt;!-- a before advice definition --></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">aop:</span>before</span> <span class=\"token attr-name\">pointcut-ref</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>businessService<span class=\"token punctuation\">\"</span></span> </pre></td></tr><tr><td data-num=\"7\"></td><td><pre>         <span class=\"token attr-name\">method</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>doRequiredTask<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>      <span class=\"token comment\">&lt;!-- an after advice definition --></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">aop:</span>after</span> <span class=\"token attr-name\">pointcut-ref</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>businessService<span class=\"token punctuation\">\"</span></span> </pre></td></tr><tr><td data-num=\"10\"></td><td><pre>         <span class=\"token attr-name\">method</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>doRequiredTask<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>      <span class=\"token comment\">&lt;!-- an after-returning advice definition --></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>      <span class=\"token comment\">&lt;!--The doRequiredTask method must have parameter named retVal --></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">aop:</span>after-returning</span> <span class=\"token attr-name\">pointcut-ref</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>businessService<span class=\"token punctuation\">\"</span></span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>         <span class=\"token attr-name\">returning</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>retVal<span class=\"token punctuation\">\"</span></span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>         <span class=\"token attr-name\">method</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>doRequiredTask<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>      <span class=\"token comment\">&lt;!-- an after-throwing advice definition --></span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>      <span class=\"token comment\">&lt;!--The doRequiredTask method must have parameter named ex --></span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">aop:</span>after-throwing</span> <span class=\"token attr-name\">pointcut-ref</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>businessService<span class=\"token punctuation\">\"</span></span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>         <span class=\"token attr-name\">throwing</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>ex<span class=\"token punctuation\">\"</span></span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>         <span class=\"token attr-name\">method</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>doRequiredTask<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>      <span class=\"token comment\">&lt;!-- an around advice definition --></span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">aop:</span>around</span> <span class=\"token attr-name\">pointcut-ref</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>businessService<span class=\"token punctuation\">\"</span></span> </pre></td></tr><tr><td data-num=\"23\"></td><td><pre>         <span class=\"token attr-name\">method</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>doRequiredTask<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>   ...</pre></td></tr><tr><td data-num=\"25\"></td><td><pre>   <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token namespace\">aop:</span>aspect</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token namespace\">aop:</span>config</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>bean</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>aBean<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>...<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>...</pre></td></tr><tr><td data-num=\"29\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>bean</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p><strong>ä»£ç ç¤ºä¾‹ï¼š</strong></p>\n<blockquote>\n<p>æ­¤å‰çš„ä»£ç ç¤ºä¾‹å·²æ¼”ç¤ºäº†è¾ƒå¤šå†…å®¹ï¼Œä¸ºäº†é¿å…æ··æ·†ï¼Œæˆ‘ä»¬å¯ä»¥é€‰æ‹©åˆ é™¤ä»¥å‰çš„æ–‡ä»¶æˆ–åˆ›å»ºä¸€ä¸ªæ–°çš„é¡¹ç›®åï¼Œå†ç»§ç»­åç»­ä»£ç æ¼”ç¤ºã€‚</p>\n</blockquote>\n<p>æœ¬ç¤ºä¾‹éœ€è¦çš„æ–‡ä»¶ï¼š<strong>aspectjrt.jar</strong>ã€<strong>aspectjweaver.jar</strong>ã€Logging.javaã€Book.javaã€Beans.xmlã€MainApp.javaã€‚</p>\n<p>ä¸‹è½½ <strong>aspectjrt.jar</strong>ã€<strong>aspectjweaver.jar</strong> å¹¶æ·»åŠ åˆ°é¡¹ç›® lib ä¸­ã€‚</p>\n<p>è¿™äº›æ–‡ä»¶ä½ å¯ä»¥å‰å¾€ <span class=\"exturl\" data-url=\"aHR0cHM6Ly9tdm5yZXBvc2l0b3J5LmNvbS8=\">https://mvnrepository.com/</span> æˆ–å…¶ä»–ç½‘ç«™ä¸‹è½½ã€‚</p>\n<p>æ–°å»º Logging.java</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Logging</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">beforeAdvice</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Going to setup book profile.\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">afterAdvice</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Book profile has been setup.\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">afterReturningAdvice</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Object</span> retVal<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Returning:\"</span> <span class=\"token operator\">+</span> retVal<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token class-name\">AfterThrowingAdvice</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">IllegalArgumentException</span> ex<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"There has been an exception: \"</span> <span class=\"token operator\">+</span> ex<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>æ–°å»º Book.java</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Book</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Integer</span> count<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> name<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Integer</span> <span class=\"token function\">getCount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Count : \"</span> <span class=\"token operator\">+</span> count <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token keyword\">return</span> count<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">setCount</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Integer</span> count<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>count <span class=\"token operator\">=</span> count<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Name : \"</span> <span class=\"token operator\">+</span> name <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        <span class=\"token keyword\">return</span> name<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">setName</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> name<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> name<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">printThrowException</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Exception raised\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>        <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">IllegalArgumentException</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>ä¿®æ”¹ Beans.xml</p>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token prolog\">&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>beans</span> <span class=\"token attr-name\">xmlns</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.springframework.org/schema/beans<span class=\"token punctuation\">\"</span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>       <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>xsi</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.w3.org/2001/XMLSchema-instance<span class=\"token punctuation\">\"</span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>       <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>aop</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.springframework.org/schema/aop<span class=\"token punctuation\">\"</span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>       <span class=\"token attr-name\"><span class=\"token namespace\">xsi:</span>schemaLocation</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.springframework.org/schema/beans</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    http://www.springframework.org/schema/aop</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    http://www.springframework.org/schema/aop/spring-aop-3.0.xsd <span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">aop:</span>config</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">aop:</span>aspect</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>log<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">ref</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>logging<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">aop:</span>pointcut</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>selectAll<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">expression</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>execution(* com.xfc.*.*(..))<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">aop:</span>before</span> <span class=\"token attr-name\">pointcut-ref</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>selectAll<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">method</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>beforeAdvice<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">aop:</span>after</span> <span class=\"token attr-name\">pointcut-ref</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>selectAll<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">method</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>afterAdvice<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">aop:</span>after-returning</span> <span class=\"token attr-name\">pointcut-ref</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>selectAll<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">returning</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>retVal<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">method</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>afterReturningAdvice<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">aop:</span>after-throwing</span> <span class=\"token attr-name\">pointcut-ref</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>selectAll<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">throwing</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>ex<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">method</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>AfterThrowingAdvice<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token namespace\">aop:</span>aspect</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token namespace\">aop:</span>config</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token comment\">&lt;!-- Definition for book bean --></span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>bean</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>book<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>com.xfc.Book<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>name<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Effective Java<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>count<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>11<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>bean</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>    <span class=\"token comment\">&lt;!-- Definition for logging aspect --></span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>bean</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>logging<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>com.xfc.Logging<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre></pre></td></tr><tr><td data-num=\"29\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>beans</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p>ä¿®æ”¹ MainApp.java</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>context<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">ApplicationContext</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>context<span class=\"token punctuation\">.</span>support<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">ClassPathXmlApplicationContext</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">MainApp</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token class-name\">ApplicationContext</span> context <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ClassPathXmlApplicationContext</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Beans.xml\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token class-name\">Book</span> book <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Book</span><span class=\"token punctuation\">)</span> context<span class=\"token punctuation\">.</span><span class=\"token function\">getBean</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"book\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        book<span class=\"token punctuation\">.</span><span class=\"token function\">getCount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        book<span class=\"token punctuation\">.</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        book<span class=\"token punctuation\">.</span><span class=\"token function\">printThrowException</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>è¿è¡Œ  <code>MainApp.java</code>  ï¼Œå¾—åˆ°å¦‚ä¸‹ç»“æœï¼š</p>\n<blockquote>\n<p>Going to setup book profile.<br />\nCount : 11<br />\nBook profile has been setup.<br />\nReturning:11<br />\nGoing to setup book profile.<br />\nName : Effective Java<br />\nBook profile has been setup.<br />\nReturning:Effective Java<br />\nGoing to setup book profile.<br />\nException raised<br />\nBook profile has been setup.<br />\nThere has been an exception: java.lang.IllegalArgumentException</p>\n<p>Exception in thread &quot;main&quot; java.lang.IllegalArgumentException<br />\nat com.xfc.Book.printThrowException(Book.java:27)<br />\n......</p>\n</blockquote>\n<h4 id=\"åŸºäº-aop-çš„-aspectj\"><a class=\"anchor\" href=\"#åŸºäº-aop-çš„-aspectj\">#</a> åŸºäº AOP çš„ @AspectJ</h4>\n<p>@AspectJ ä½œä¸ºé€šè¿‡ Java 5 æ³¨è§£æ³¨é‡Šçš„æ™®é€šçš„ Java ç±»ï¼Œå®ƒæŒ‡çš„æ˜¯å£°æ˜ aspects çš„ä¸€ç§é£æ ¼ã€‚é€šè¿‡é…ç½®  <code>&lt;aop:aspectj-autoproxy/&gt;</code>  åå¯ä»¥é…ç½®  <code>@AspectJ</code>  ã€‚</p>\n<p><strong>ä»£ç ç¤ºä¾‹ï¼š</strong></p>\n<p>æœ¬ç¤ºä¾‹éœ€è¦çš„æ–‡ä»¶ï¼šLogging.javaã€Book.javaã€Beans.xmlã€MainApp.javaï¼Œå…¶ä¸­ Book.javaã€MainApp.java æ–‡ä»¶ä¸ä¸Šä¸€ç¤ºä¾‹ä¸€è‡´ï¼Œæ­¤å¤„ä¸å†é‡è¿°ã€‚</p>\n<p>ä¿®æ”¹ Logging.java</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>aspectj<span class=\"token punctuation\">.</span>lang<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token operator\">*</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token annotation punctuation\">@Aspect</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Logging</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token annotation punctuation\">@Pointcut</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"execution(* com.xfc.*.*(..))\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token keyword\">void</span> <span class=\"token function\">selectAll</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token annotation punctuation\">@Before</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"selectAll()\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">beforeAdvice</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Going to setup book profile.\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token annotation punctuation\">@After</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"selectAll()\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">afterAdvice</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Book profile has been setup.\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    <span class=\"token annotation punctuation\">@AfterReturning</span><span class=\"token punctuation\">(</span>pointcut <span class=\"token operator\">=</span> <span class=\"token string\">\"selectAll()\"</span><span class=\"token punctuation\">,</span> returning <span class=\"token operator\">=</span> <span class=\"token string\">\"retVal\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">afterReturningAdvice</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Object</span> retVal<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Returning:\"</span> <span class=\"token operator\">+</span> retVal<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>    <span class=\"token annotation punctuation\">@AfterThrowing</span><span class=\"token punctuation\">(</span>pointcut <span class=\"token operator\">=</span> <span class=\"token string\">\"selectAll()\"</span><span class=\"token punctuation\">,</span> throwing <span class=\"token operator\">=</span> <span class=\"token string\">\"ex\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token class-name\">AfterThrowingAdvice</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">IllegalArgumentException</span> ex<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"There has been an exception: \"</span> <span class=\"token operator\">+</span> ex<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>ä¿®æ”¹ Beans.xml</p>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token prolog\">&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>beans</span> <span class=\"token attr-name\">xmlns</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.springframework.org/schema/beans<span class=\"token punctuation\">\"</span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>       <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>xsi</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.w3.org/2001/XMLSchema-instance<span class=\"token punctuation\">\"</span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>       <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>aop</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.springframework.org/schema/aop<span class=\"token punctuation\">\"</span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>       <span class=\"token attr-name\"><span class=\"token namespace\">xsi:</span>schemaLocation</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.springframework.org/schema/beans</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    http://www.springframework.org/schema/aop</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    http://www.springframework.org/schema/aop/spring-aop-3.0.xsd<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">aop:</span>aspectj-autoproxy</span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token comment\">&lt;!-- Definition for book bean --></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>bean</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>book<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>com.xfc.Book<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>name<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Effective Java<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>count<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>11<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>bean</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token comment\">&lt;!-- Definition for logging aspect --></span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>bean</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>logging<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>com.xfc.Logging<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>beans</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p>è¿è¡Œ  <code>MainApp.java</code>  ï¼Œå¾—åˆ°å¦‚ä¸‹ç»“æœï¼š</p>\n<blockquote>\n<p>Going to setup book profile.<br />\nCount : 11<br />\nBook profile has been setup.<br />\nReturning:11<br />\nGoing to setup book profile.<br />\nName : Effective Java<br />\nBook profile has been setup.<br />\nReturning:Effective Java<br />\nGoing to setup book profile.<br />\nException raised<br />\nBook profile has been setup.<br />\nThere has been an exception: java.lang.IllegalArgumentException</p>\n<p>Exception in thread &quot;main&quot; java.lang.IllegalArgumentException<br />\nat com.xfc.Book.printThrowException(Book.java:27)<br />\n......</p>\n</blockquote>\n<h3 id=\"spring-jdbc-æ¡†æ¶\"><a class=\"anchor\" href=\"#spring-jdbc-æ¡†æ¶\">#</a> Spring JDBC æ¡†æ¶</h3>\n<p>ä½¿ç”¨ Spring JDBC æ¡†æ¶è¿›è¡Œæ•°æ®åº“è¿æ¥ï¼Œå®ƒä¼šè´Ÿè´£æ‰€æœ‰çš„åº•å±‚ç»†èŠ‚ï¼Œä»å¼€å§‹æ‰“å¼€è¿æ¥ï¼Œå‡†å¤‡å’Œæ‰§è¡Œ SQL è¯­å¥ï¼Œå¤„ç†å¼‚å¸¸ï¼Œå¤„ç†äº‹åŠ¡ï¼Œåˆ°æœ€åå…³é—­è¿æ¥ã€‚</p>\n<p>Spring JDBC æä¾›äº†å‡ ç§æ–¹æ³•å’Œæ•°æ®åº“ä¸­ç›¸åº”çš„ä¸åŒçš„ç±»ä¸æ¥å£ï¼Œå¦‚ JdbcTemplateã€‚</p>\n<p><strong>JdbcTemplate ç±»</strong></p>\n<p>JdbcTemplate ç±»æ‰§è¡Œ SQL æŸ¥è¯¢ã€æ›´æ–°è¯­å¥å’Œå­˜å‚¨è¿‡ç¨‹è°ƒç”¨ï¼Œæ‰§è¡Œè¿­ä»£ç»“æœé›†å’Œæå–è¿”å›å‚æ•°å€¼ã€‚å®ƒä¹Ÿæ•è· JDBC å¼‚å¸¸å¹¶è½¬æ¢å®ƒä»¬åˆ°  <code>org.springframework.dao</code>  åŒ…ä¸­å®šä¹‰çš„é€šç”¨ç±»ã€æ›´å¤šçš„ä¿¡æ¯ã€å¼‚å¸¸å±‚æ¬¡ç»“æ„ã€‚JdbcTemplate ç±»çš„å®ä¾‹æ˜¯<em>çº¿ç¨‹å®‰å…¨</em>é…ç½®çš„ã€‚</p>\n<h4 id=\"jdbc-ç¤ºä¾‹\"><a class=\"anchor\" href=\"#jdbc-ç¤ºä¾‹\">#</a> JDBC ç¤ºä¾‹</h4>\n<blockquote>\n<p>æ³¨ï¼šä¸æ•°æ®åº“ç›¸å…³çš„ä»£ç ç‰‡æ®µæˆ–æ¼”ç¤ºï¼Œå‡ä¼˜å…ˆé€‰ç”¨ MySQL ä¸ºä¾‹ã€‚</p>\n</blockquote>\n<p>åˆ›å»ºæ•°æ®åº“  <code>spring-demo</code>  å¹¶åˆ›å»ºè¡¨  <code>book</code>  ã€‚</p>\n<figure class=\"highlight sql\"><figcaption data-lang=\"SQL\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">CREATE</span> <span class=\"token keyword\">TABLE</span> <span class=\"token punctuation\">`</span>book<span class=\"token punctuation\">`</span>  <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token punctuation\">`</span>id<span class=\"token punctuation\">`</span> <span class=\"token keyword\">int</span><span class=\"token punctuation\">(</span><span class=\"token number\">11</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">AUTO_INCREMENT</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  <span class=\"token punctuation\">`</span>name<span class=\"token punctuation\">`</span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">255</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token punctuation\">`</span>count<span class=\"token punctuation\">`</span> <span class=\"token keyword\">int</span><span class=\"token punctuation\">(</span><span class=\"token number\">11</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token keyword\">PRIMARY</span> <span class=\"token keyword\">KEY</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">`</span>id<span class=\"token punctuation\">`</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p><strong>ä»£ç ç¤ºä¾‹ï¼š</strong></p>\n<p>æœ¬ç¤ºä¾‹éœ€è¦çš„æ–‡ä»¶ï¼š<strong>mysql-connector-java.jar</strong>ã€Book.javaã€BookDao.javaã€BookJDBCTemplate.javaã€BookMapper.javaã€Beans.xmlã€MainApp.javaã€‚</p>\n<p>ä¿®æ”¹ Book.java</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Book</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Integer</span> id<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Integer</span> count<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> name<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Integer</span> <span class=\"token function\">getId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token keyword\">return</span> id<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">setId</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Integer</span> id<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>id <span class=\"token operator\">=</span> id<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Integer</span> <span class=\"token function\">getCount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        <span class=\"token keyword\">return</span> count<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">setCount</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Integer</span> count<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>count <span class=\"token operator\">=</span> count<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>        <span class=\"token keyword\">return</span> name<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">setName</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> name<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> name<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>æ·»åŠ  BookDao.java</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">List</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">javax<span class=\"token punctuation\">.</span>sql<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">DataSource</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">BookDao</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token keyword\">void</span> <span class=\"token function\">setDataSource</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">DataSource</span> dataSource<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token keyword\">void</span> <span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> name<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Integer</span> count<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token class-name\">Book</span> <span class=\"token function\">getBook</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Integer</span> id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Book</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">listBooks</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token keyword\">void</span> <span class=\"token function\">delete</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Integer</span> id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token keyword\">void</span> <span class=\"token function\">update</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Integer</span> id<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Integer</span> count<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>æ·»åŠ  BookJDBCTemplate.java</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>jdbc<span class=\"token punctuation\">.</span>core<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">JdbcTemplate</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">javax<span class=\"token punctuation\">.</span>sql<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">DataSource</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">List</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">BookJDBCTemplate</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">BookDao</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">DataSource</span> dataSource<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">JdbcTemplate</span> jdbcTemplateObject<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">setDataSource</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">DataSource</span> dataSource<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>dataSource <span class=\"token operator\">=</span> dataSource<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>jdbcTemplateObject <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">JdbcTemplate</span><span class=\"token punctuation\">(</span>dataSource<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> name<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Integer</span> count<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>        <span class=\"token class-name\">String</span> sql <span class=\"token operator\">=</span> <span class=\"token string\">\"insert into Book (name, count) values (?, ?)\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>        jdbcTemplateObject<span class=\"token punctuation\">.</span><span class=\"token function\">update</span><span class=\"token punctuation\">(</span>sql<span class=\"token punctuation\">,</span> name<span class=\"token punctuation\">,</span> count<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Created Record Name = \"</span> <span class=\"token operator\">+</span> name <span class=\"token operator\">+</span> <span class=\"token string\">\" Count = \"</span> <span class=\"token operator\">+</span> count<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>    <span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Book</span> <span class=\"token function\">getBook</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Integer</span> id<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>        <span class=\"token class-name\">String</span> sql <span class=\"token operator\">=</span> <span class=\"token string\">\"select * from Book where id = ?\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>        <span class=\"token class-name\">Book</span> book <span class=\"token operator\">=</span> jdbcTemplateObject<span class=\"token punctuation\">.</span><span class=\"token function\">queryForObject</span><span class=\"token punctuation\">(</span>sql<span class=\"token punctuation\">,</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Object</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">&#123;</span>id<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">BookMapper</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>        <span class=\"token keyword\">return</span> book<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>    <span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Book</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">listBooks</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>        <span class=\"token class-name\">String</span> sql <span class=\"token operator\">=</span> <span class=\"token string\">\"select * from Book\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>        <span class=\"token class-name\">List</span> <span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Book</span><span class=\"token punctuation\">></span></span> books <span class=\"token operator\">=</span> jdbcTemplateObject<span class=\"token punctuation\">.</span><span class=\"token function\">query</span><span class=\"token punctuation\">(</span>sql<span class=\"token punctuation\">,</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">BookMapper</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>        <span class=\"token keyword\">return</span> books<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>    <span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">delete</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Integer</span> id<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>        <span class=\"token class-name\">String</span> sql <span class=\"token operator\">=</span> <span class=\"token string\">\"delete from Book where id = ?\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>        jdbcTemplateObject<span class=\"token punctuation\">.</span><span class=\"token function\">update</span><span class=\"token punctuation\">(</span>sql<span class=\"token punctuation\">,</span> id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Deleted Record with ID = \"</span> <span class=\"token operator\">+</span> id <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre></pre></td></tr><tr><td data-num=\"48\"></td><td><pre>    <span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">update</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Integer</span> id<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Integer</span> count<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre>        <span class=\"token class-name\">String</span> sql <span class=\"token operator\">=</span> <span class=\"token string\">\"update Book set count = ? where id = ?\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"51\"></td><td><pre>        jdbcTemplateObject<span class=\"token punctuation\">.</span><span class=\"token function\">update</span><span class=\"token punctuation\">(</span>sql<span class=\"token punctuation\">,</span> count<span class=\"token punctuation\">,</span> id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"52\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Updated Record with ID = \"</span> <span class=\"token operator\">+</span> id <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"53\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"54\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>æ·»åŠ  BookMapper.java</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>jdbc<span class=\"token punctuation\">.</span>core<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">RowMapper</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>sql<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">ResultSet</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>sql<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">SQLException</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token comment\">/**</pre></td></tr><tr><td data-num=\"9\"></td><td><pre> * æ•°æ®æ˜ å°„é…ç½®</pre></td></tr><tr><td data-num=\"10\"></td><td><pre> */</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">BookMapper</span>  <span class=\"token keyword\">implements</span> <span class=\"token class-name\">RowMapper</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Book</span><span class=\"token punctuation\">></span></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Book</span> <span class=\"token function\">mapRow</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">ResultSet</span> rs<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> i<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">SQLException</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        <span class=\"token class-name\">Book</span> book <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Book</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        book<span class=\"token punctuation\">.</span><span class=\"token function\">setId</span><span class=\"token punctuation\">(</span>rs<span class=\"token punctuation\">.</span><span class=\"token function\">getInt</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"id\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        book<span class=\"token punctuation\">.</span><span class=\"token function\">setName</span><span class=\"token punctuation\">(</span>rs<span class=\"token punctuation\">.</span><span class=\"token function\">getString</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"name\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        book<span class=\"token punctuation\">.</span><span class=\"token function\">setCount</span><span class=\"token punctuation\">(</span>rs<span class=\"token punctuation\">.</span><span class=\"token function\">getInt</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"count\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        <span class=\"token keyword\">return</span> book<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>ä¿®æ”¹ Beans.xml</p>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token prolog\">&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>beans</span> <span class=\"token attr-name\">xmlns</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.springframework.org/schema/beans<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>xsi</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.w3.org/2001/XMLSchema-instance<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\"><span class=\"token namespace\">xsi:</span>schemaLocation</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd <span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token comment\">&lt;!-- Initialization for data source --></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>bean</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>dataSource<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>org.springframework.jdbc.datasource.DriverManagerDataSource<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>driverClassName<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>com.mysql.cj.jdbc.Driver<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>url<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>jdbc:mysql://localhost:3306/spring-demo?serverTimezone=Asia/Shanghai<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>username<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>root<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>password<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>root<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>bean</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token comment\">&lt;!-- Definition for bookJDBCTemplate bean --></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>bean</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>bookJDBCTemplate<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>com.xfc.BookJDBCTemplate<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>dataSource<span class=\"token punctuation\">\"</span></span>  <span class=\"token attr-name\">ref</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>dataSource<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>bean</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>beans</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p>ä¿®æ”¹ MainApp.java</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"><span>a</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>context<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">ApplicationContext</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>context<span class=\"token punctuation\">.</span>support<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">ClassPathXmlApplicationContext</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">List</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">MainApp</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token class-name\">ApplicationContext</span> context <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ClassPathXmlApplicationContext</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Beans.xml\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token class-name\">BookJDBCTemplate</span> bookJDBCTemplate <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">BookJDBCTemplate</span><span class=\"token punctuation\">)</span>context<span class=\"token punctuation\">.</span><span class=\"token function\">getBean</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"bookJDBCTemplate\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token comment\">// 1. æ·»åŠ æ•°æ®</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        bookJDBCTemplate<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"è„‚ç šæ–‹é‡è¯„çŸ³å¤´è®°\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">11</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        bookJDBCTemplate<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"æ³¥æ·–ä¹‹å­\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        bookJDBCTemplate<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ä¸­å›½æ–‡å­¦ä½œå“é€‰æ³¨\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">15</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        <span class=\"token comment\">// 2. æŸ¥è¯¢åˆ—è¡¨</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token comment\">//        List&lt;Book> books = bookJDBCTemplate.listBooks();</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token comment\">//        for (Book record : books) &#123;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token comment\">//            System.out.print(\"ID : \" + record.getId() );</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token comment\">//            System.out.print(\", Name : \" + record.getName() );</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token comment\">//            System.out.println(\", Count : \" + record.getCount());</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token comment\">//        &#125;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>        <span class=\"token comment\">// 3. ä¿®æ”¹æ•°æ®</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre><span class=\"token comment\">//        bookJDBCTemplate.update(2, 20);</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>        <span class=\"token comment\">// 4. æŸ¥è¯¢å•æ¡</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre><span class=\"token comment\">//        Book book = bookJDBCTemplate.getBook(2);</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre><span class=\"token comment\">//        System.out.println(\"ID : \" + book.getId() + \", Name : \" + book.getName() + \", Count : \" + book.getCount());</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>        <span class=\"token comment\">// 5. åˆ é™¤æ•°æ®</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre><span class=\"token comment\">//        bookJDBCTemplate.delete(1);</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre><span class=\"token comment\">//        bookJDBCTemplate.delete(2);</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre><span class=\"token comment\">//        bookJDBCTemplate.delete(3);</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>ä¾æ¬¡å–æ¶ˆ  <code>MainApp.java</code>  ä¸­å„éƒ¨åˆ†çš„æ³¨é‡Šå¹¶è¿è¡Œï¼Œå¹¶é…åˆè§‚å¯Ÿæ•°æ®åº“è¡¨ä¸­çš„æ•°æ®ã€‚</p>\n<p>å½“ç„¶ï¼Œæ­¤å¤„ JDBC ç¤ºä¾‹ç›¸å¯¹è¾ƒä¸ºç®€å•ï¼Œå¯¹äºè¾ƒä¸ºå¤æ‚çš„ä¸šåŠ¡ï¼Œå¯ä»¥æ ¹æ®éœ€æ±‚è¿›è¡Œç›¸åº”çš„æ‰©å±•ã€‚</p>\n<h4 id=\"sql-çš„å­˜å‚¨è¿‡ç¨‹\"><a class=\"anchor\" href=\"#sql-çš„å­˜å‚¨è¿‡ç¨‹\">#</a> SQL çš„å­˜å‚¨è¿‡ç¨‹</h4>\n<p><code>SimpleJdbcCall</code>  ç±»å¯ä»¥è¢«ç”¨äºè°ƒç”¨ä¸€ä¸ªåŒ…å« IN å’Œ OUT å‚æ•°çš„å­˜å‚¨è¿‡ç¨‹ã€‚</p>\n<p><span class=\"label danger\">â—ï¸TODO</span> æš‚æ— ç¤ºä¾‹ä»£ç </p>\n<h3 id=\"spring-äº‹åŠ¡ç®¡ç†\"><a class=\"anchor\" href=\"#spring-äº‹åŠ¡ç®¡ç†\">#</a> Spring äº‹åŠ¡ç®¡ç†</h3>\n<p><strong>äº‹åŠ¡ç®¡ç†</strong></p>\n<p>ä¸€ä¸ªæ•°æ®åº“äº‹åŠ¡æ˜¯ä¸€ä¸ªè¢«è§†ä¸ºå•ä¸€çš„å·¥ä½œå•å…ƒçš„æ“ä½œåºåˆ—ã€‚è¿™äº›æ“ä½œåº”è¯¥è¦ä¹ˆå®Œæ•´åœ°æ‰§è¡Œï¼Œè¦ä¹ˆå®Œå…¨ä¸æ‰§è¡Œã€‚äº‹åŠ¡ç®¡ç†æ˜¯ä¸€ä¸ªé‡è¦ç»„æˆéƒ¨åˆ†ï¼ŒRDBMS é¢å‘ä¼ä¸šåº”ç”¨ç¨‹åºï¼Œä»¥ç¡®ä¿æ•°æ®å®Œæ•´æ€§å’Œä¸€è‡´æ€§ã€‚äº‹åŠ¡çš„æ¦‚å¿µå¯ä»¥æè¿°ä¸ºå…·æœ‰ä»¥ä¸‹å››ä¸ªå…³é”®å±æ€§è¯´æˆæ˜¯ <strong>ACID</strong>ï¼š</p>\n<ul>\n<li><ins>åŸå­æ€§</ins>ï¼šäº‹åŠ¡åº”è¯¥å½“ä½œä¸€ä¸ªå•ç‹¬å•å…ƒçš„æ“ä½œï¼Œè¿™æ„å‘³ç€æ•´ä¸ªåºåˆ—æ“ä½œè¦ä¹ˆæ˜¯æˆåŠŸï¼Œè¦ä¹ˆæ˜¯å¤±è´¥çš„ã€‚</li>\n<li><ins>ä¸€è‡´æ€§</ins>ï¼šè¿™è¡¨ç¤ºæ•°æ®åº“çš„å¼•ç”¨å®Œæ•´æ€§çš„ä¸€è‡´æ€§ï¼Œè¡¨ä¸­å”¯ä¸€çš„ä¸»é”®ç­‰ã€‚</li>\n<li><ins>éš”ç¦»æ€§</ins>ï¼šå¯èƒ½åŒæ—¶å¤„ç†å¾ˆå¤šæœ‰ç›¸åŒçš„æ•°æ®é›†çš„äº‹åŠ¡ï¼Œæ¯ä¸ªäº‹åŠ¡åº”è¯¥ä¸å…¶ä»–äº‹åŠ¡éš”ç¦»ï¼Œä»¥é˜²æ­¢æ•°æ®æŸåã€‚</li>\n<li><ins>æŒä¹…æ€§</ins>ï¼šä¸€ä¸ªäº‹åŠ¡ä¸€æ—¦å®Œæˆå…¨éƒ¨æ“ä½œåï¼Œè¿™ä¸ªäº‹åŠ¡çš„ç»“æœå¿…é¡»æ˜¯æ°¸ä¹…æ€§çš„ï¼Œä¸èƒ½å› ç³»ç»Ÿæ•…éšœè€Œä»æ•°æ®åº“ä¸­åˆ é™¤ã€‚</li>\n</ul>\n<p>Spring æ¡†æ¶åœ¨ä¸åŒçš„åº•å±‚äº‹åŠ¡ç®¡ç† APIs çš„é¡¶éƒ¨æä¾›äº†ä¸€ä¸ªæŠ½è±¡å±‚ã€‚Spring çš„äº‹åŠ¡æ”¯æŒæ—¨åœ¨é€šè¿‡æ·»åŠ äº‹åŠ¡èƒ½åŠ›åˆ° POJOs æ¥æä¾›ç»™ EJB äº‹åŠ¡ä¸€ä¸ªé€‰æ‹©æ–¹æ¡ˆã€‚Spring æ”¯æŒç¼–ç¨‹å¼å’Œå£°æ˜å¼äº‹åŠ¡ç®¡ç†ã€‚EJBs éœ€è¦ä¸€ä¸ªåº”ç”¨ç¨‹åºæœåŠ¡å™¨ï¼Œä½† Spring äº‹åŠ¡ç®¡ç†å¯ä»¥åœ¨ä¸éœ€è¦åº”ç”¨ç¨‹åºæœåŠ¡å™¨çš„æƒ…å†µä¸‹å®ç°ã€‚</p>\n<p><strong>å±€éƒ¨äº‹ç‰© vs. å…¨å±€äº‹åŠ¡</strong></p>\n<p>å±€éƒ¨äº‹åŠ¡æ˜¯ç‰¹å®šäºä¸€ä¸ªå•ä¸€çš„äº‹åŠ¡èµ„æºï¼Œå¦‚ä¸€ä¸ª JDBC è¿æ¥ï¼Œè€Œå…¨å±€äº‹åŠ¡å¯ä»¥è·¨å¤šä¸ªäº‹åŠ¡èµ„æºäº‹åŠ¡ï¼Œå¦‚åœ¨ä¸€ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„äº‹åŠ¡ã€‚</p>\n<p>å±€éƒ¨äº‹åŠ¡ç®¡ç†åœ¨ä¸€ä¸ªé›†ä¸­çš„è®¡ç®—ç¯å¢ƒä¸­æ˜¯æœ‰ç”¨çš„ï¼Œè¯¥è®¡ç®—ç¯å¢ƒä¸­åº”ç”¨ç¨‹åºç»„ä»¶å’Œèµ„æºä½äºä¸€ä¸ªå•ä½ç‚¹ï¼Œè€Œäº‹åŠ¡ç®¡ç†åªæ¶‰åŠåˆ°ä¸€ä¸ªè¿è¡Œåœ¨ä¸€ä¸ªå•ä¸€æœºå™¨ä¸­çš„æœ¬åœ°æ•°æ®ç®¡ç†å™¨ã€‚å±€éƒ¨äº‹åŠ¡æ›´å®¹æ˜“å®ç°ã€‚</p>\n<p>å…¨å±€äº‹åŠ¡ç®¡ç†éœ€è¦åœ¨åˆ†å¸ƒå¼è®¡ç®—ç¯å¢ƒä¸­ï¼Œæ‰€æœ‰çš„èµ„æºéƒ½åˆ†å¸ƒåœ¨å¤šä¸ªç³»ç»Ÿä¸­ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹äº‹åŠ¡ç®¡ç†éœ€è¦åŒæ—¶åœ¨å±€éƒ¨å’Œå…¨å±€èŒƒå›´å†…è¿›è¡Œã€‚åˆ†å¸ƒå¼æˆ–å…¨å±€äº‹åŠ¡è·¨å¤šä¸ªç³»ç»Ÿæ‰§è¡Œï¼Œå®ƒçš„æ‰§è¡Œéœ€è¦å…¨å±€äº‹åŠ¡ç®¡ç†ç³»ç»Ÿå’Œæ‰€æœ‰ç›¸å…³ç³»ç»Ÿçš„å±€éƒ¨æ•°æ®ç®¡ç†äººå‘˜ä¹‹é—´çš„åè°ƒã€‚</p>\n<p><strong>ç¼–ç¨‹å¼ vs. å£°æ˜å¼</strong></p>\n<p>Spring æ”¯æŒä¸¤ç§ç±»å‹çš„äº‹åŠ¡ç®¡ç†:</p>\n<ul>\n<li>ç¼–ç¨‹å¼äº‹åŠ¡ç®¡ç†ï¼šè¿™æ„å‘³ç€ä½ åœ¨ç¼–ç¨‹çš„å¸®åŠ©ä¸‹æœ‰ç®¡ç†äº‹åŠ¡ã€‚è¿™ç»™äº†ä½ æå¤§çš„çµæ´»æ€§ï¼Œä½†å´å¾ˆéš¾ç»´æŠ¤ã€‚</li>\n<li>å£°æ˜å¼äº‹åŠ¡ç®¡ç† ï¼šè¿™æ„å‘³ç€ä½ ä»ä¸šåŠ¡ä»£ç ä¸­åˆ†ç¦»äº‹åŠ¡ç®¡ç†ã€‚ä½ ä»…ä»…ä½¿ç”¨æ³¨é‡Šæˆ– XML é…ç½®æ¥ç®¡ç†äº‹åŠ¡ã€‚</li>\n</ul>\n<p>å£°æ˜å¼äº‹åŠ¡ç®¡ç†æ¯”ç¼–ç¨‹å¼äº‹åŠ¡ç®¡ç†æ›´å¯å–ï¼Œå°½ç®¡å®ƒä¸å¦‚ç¼–ç¨‹å¼äº‹åŠ¡ç®¡ç†çµæ´»ï¼Œä½†å®ƒå…è®¸ä½ é€šè¿‡ä»£ç æ§åˆ¶äº‹åŠ¡ã€‚ä½†ä½œä¸ºä¸€ç§æ¨ªåˆ‡å…³æ³¨ç‚¹ï¼Œå£°æ˜å¼äº‹åŠ¡ç®¡ç†å¯ä»¥ä½¿ç”¨ AOP æ–¹æ³•è¿›è¡Œæ¨¡å—åŒ–ã€‚Spring æ”¯æŒä½¿ç”¨ Spring AOP æ¡†æ¶çš„å£°æ˜å¼äº‹åŠ¡ç®¡ç†ã€‚</p>\n<p><strong>Spring äº‹åŠ¡æŠ½è±¡</strong></p>\n<p><ins class=\"wavy\">Spring äº‹åŠ¡ç®¡ç†çš„äº”å¤§å±æ€§ï¼šéš”ç¦»çº§åˆ«ã€ä¼ æ’­è¡Œä¸ºã€æ˜¯å¦åªè¯»ã€äº‹åŠ¡è¶…æ—¶ã€å›æ»šè§„åˆ™ã€‚</ins></p>\n<p>Spring äº‹åŠ¡æŠ½è±¡çš„å…³é”®æ˜¯ç”±  <code>org.springframework.transaction.PlatformTransactionManager</code>  æ¥å£å®šä¹‰ã€‚</p>\n<p>äº‹åŠ¡éš”ç¦»çº§åˆ«å’Œä¼ æ’­ç±»å‹ï¼Œå‡åœ¨  <code>TransactionDefinition</code>  ä¸­å®šä¹‰äº†ç›¸å…³å¸¸é‡ã€‚</p>\n<p>äº‹åŠ¡éš”ç¦»çº§åˆ«ï¼š</p>\n<ol>\n<li>\n<p>ISOLATION_DEFAULT</p>\n<p>è¿™æ˜¯é»˜è®¤çš„éš”ç¦»çº§åˆ«ã€‚</p>\n</li>\n<li>\n<p>ISOLATION_READ_COMMITTED</p>\n<p>è¡¨æ˜èƒ½å¤Ÿé˜»æ­¢è¯¯è¯»ï¼›å¯ä»¥å‘ç”Ÿä¸å¯é‡å¤è¯»å’Œè™šè¯»ã€‚</p>\n</li>\n<li>\n<p>ISOLATION_READ_UNCOMMITTED</p>\n<p>è¡¨æ˜å¯ä»¥å‘ç”Ÿè¯¯è¯»ã€ä¸å¯é‡å¤è¯»å’Œè™šè¯»ã€‚</p>\n</li>\n<li>\n<p>ISOLATION_REPEATABLE_READ</p>\n<p>è¡¨æ˜èƒ½å¤Ÿé˜»æ­¢è¯¯è¯»å’Œä¸å¯é‡å¤è¯»ï¼›å¯ä»¥å‘ç”Ÿè™šè¯»ã€‚</p>\n</li>\n<li>\n<p>ISOLATION_SERIALIZABLE</p>\n<p>è¡¨æ˜èƒ½å¤Ÿé˜»æ­¢è¯¯è¯»ã€ä¸å¯é‡å¤è¯»å’Œè™šè¯»ã€‚</p>\n</li>\n</ol>\n<p>äº‹åŠ¡ä¼ æ’­ç±»å‹ï¼š</p>\n<ol>\n<li>\n<p>PROPAGATION_MANDATORY</p>\n<p>æ”¯æŒå½“å‰äº‹åŠ¡ï¼›å¦‚æœä¸å­˜åœ¨å½“å‰äº‹åŠ¡ï¼Œåˆ™æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ã€‚</p>\n</li>\n<li>\n<p>PROPAGATION_NESTED</p>\n<p>å¦‚æœå­˜åœ¨å½“å‰äº‹åŠ¡ï¼Œåˆ™åœ¨ä¸€ä¸ªåµŒå¥—çš„äº‹åŠ¡ä¸­æ‰§è¡Œã€‚</p>\n</li>\n<li>\n<p>PROPAGATION_NEVER</p>\n<p>ä¸æ”¯æŒå½“å‰äº‹åŠ¡ï¼›å¦‚æœå­˜åœ¨å½“å‰äº‹åŠ¡ï¼Œåˆ™æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ã€‚</p>\n</li>\n<li>\n<p>PROPAGATION_NOT_SUPPORTED</p>\n<p>ä¸æ”¯æŒå½“å‰äº‹åŠ¡ï¼›è€Œæ€»æ˜¯æ‰§è¡Œéäº‹åŠ¡æ€§ã€‚</p>\n</li>\n<li>\n<p>PROPAGATION_REQUIRED</p>\n<p>æ”¯æŒå½“å‰äº‹åŠ¡ï¼›å¦‚æœä¸å­˜åœ¨äº‹åŠ¡ï¼Œåˆ™åˆ›å»ºä¸€ä¸ªæ–°çš„äº‹åŠ¡ã€‚</p>\n</li>\n<li>\n<p>PROPAGATION_REQUIRES_NEW</p>\n<p>åˆ›å»ºä¸€ä¸ªæ–°äº‹åŠ¡ï¼Œå¦‚æœå­˜åœ¨ä¸€ä¸ªäº‹åŠ¡ï¼Œåˆ™æŠŠå½“å‰äº‹åŠ¡æŒ‚èµ·ã€‚</p>\n</li>\n<li>\n<p>PROPAGATION_SUPPORTS</p>\n<p>æ”¯æŒå½“å‰äº‹åŠ¡ï¼›å¦‚æœä¸å­˜åœ¨ï¼Œåˆ™æ‰§è¡Œéäº‹åŠ¡æ€§ã€‚</p>\n</li>\n<li>\n<p>TIMEOUT_DEFAULT</p>\n<p>ä½¿ç”¨é»˜è®¤è¶…æ—¶çš„åº•å±‚äº‹åŠ¡ç³»ç»Ÿï¼Œæˆ–è€…å¦‚æœä¸æ”¯æŒè¶…æ—¶åˆ™æ²¡æœ‰ã€‚</p>\n</li>\n</ol>\n<h4 id=\"ç¼–ç¨‹å¼äº‹åŠ¡ç®¡ç†\"><a class=\"anchor\" href=\"#ç¼–ç¨‹å¼äº‹åŠ¡ç®¡ç†\">#</a> ç¼–ç¨‹å¼äº‹åŠ¡ç®¡ç†</h4>\n<p>Spring æä¾›ä¸¤ç§æ–¹å¼çš„ç¼–ç¨‹å¼äº‹åŠ¡ç®¡ç†ï¼Œåˆ†åˆ«æ˜¯ï¼šä½¿ç”¨ TransactionTemplate å’Œç›´æ¥ä½¿ç”¨ PlatformTransactionManagerã€‚</p>\n<p>ä¿æŒä¸Šä¸€ç¤ºä¾‹çš„æ•°æ®åº“  <code>spring-demo</code>  è¡¨  <code>book</code>  å¹¶æ·»åŠ æ–°è¡¨  <code>edition</code>  ã€‚</p>\n<figure class=\"highlight sql\"><figcaption data-lang=\"SQL\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">CREATE</span> <span class=\"token keyword\">TABLE</span> <span class=\"token punctuation\">`</span>edition<span class=\"token punctuation\">`</span>  <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token punctuation\">`</span>bid<span class=\"token punctuation\">`</span> <span class=\"token keyword\">int</span><span class=\"token punctuation\">(</span><span class=\"token number\">11</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  <span class=\"token punctuation\">`</span>edition<span class=\"token punctuation\">`</span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">255</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token punctuation\">`</span>press<span class=\"token punctuation\">`</span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">255</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p><strong>ä»£ç ç¤ºä¾‹ï¼š</strong></p>\n<p>æœ¬ç¤ºä¾‹éœ€è¦çš„æ–‡ä»¶ï¼š BookEdition.javaã€BookDao.javaã€BookEditionMapper.javaã€BookJDBCTemplate.javaã€Beans.xmlã€MainApp.javaã€‚</p>\n<p>æ–°å»º BookEdition.java</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">BookEdition</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Integer</span> id<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Integer</span> count<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> name<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Integer</span> bid<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> edition<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> press<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token comment\">// setter and getter...</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>ä¿®æ”¹ BookDao.java</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>transaction<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">PlatformTransactionManager</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">List</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">javax<span class=\"token punctuation\">.</span>sql<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">DataSource</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">BookDao</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token keyword\">void</span> <span class=\"token function\">setDataSource</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">DataSource</span> dataSource<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token keyword\">void</span> <span class=\"token function\">setTransactionManager</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">PlatformTransactionManager</span> transactionManager<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token keyword\">void</span> <span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> name<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Integer</span> count<span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span> edition<span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span> press<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">BookEdition</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">listBooks</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>æ–°å»º BookEditionMapper.java</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>jdbc<span class=\"token punctuation\">.</span>core<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">RowMapper</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>sql<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">ResultSet</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>sql<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">SQLException</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">BookEditionMapper</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">RowMapper</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">BookEdition</span><span class=\"token punctuation\">></span></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">BookEdition</span> <span class=\"token function\">mapRow</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">ResultSet</span> rs<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> rowNum<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">SQLException</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token class-name\">BookEdition</span> bookEdition <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">BookEdition</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        bookEdition<span class=\"token punctuation\">.</span><span class=\"token function\">setId</span><span class=\"token punctuation\">(</span>rs<span class=\"token punctuation\">.</span><span class=\"token function\">getInt</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"id\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        bookEdition<span class=\"token punctuation\">.</span><span class=\"token function\">setCount</span><span class=\"token punctuation\">(</span>rs<span class=\"token punctuation\">.</span><span class=\"token function\">getInt</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"count\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        bookEdition<span class=\"token punctuation\">.</span><span class=\"token function\">setName</span><span class=\"token punctuation\">(</span>rs<span class=\"token punctuation\">.</span><span class=\"token function\">getString</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"name\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        bookEdition<span class=\"token punctuation\">.</span><span class=\"token function\">setBid</span><span class=\"token punctuation\">(</span>rs<span class=\"token punctuation\">.</span><span class=\"token function\">getInt</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"bid\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        bookEdition<span class=\"token punctuation\">.</span><span class=\"token function\">setEdition</span><span class=\"token punctuation\">(</span>rs<span class=\"token punctuation\">.</span><span class=\"token function\">getString</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"edition\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        bookEdition<span class=\"token punctuation\">.</span><span class=\"token function\">setPress</span><span class=\"token punctuation\">(</span>rs<span class=\"token punctuation\">.</span><span class=\"token function\">getString</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"press\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        <span class=\"token keyword\">return</span> bookEdition<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>ä¿®æ”¹ BookJDBCTemplate.java</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">List</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">javax<span class=\"token punctuation\">.</span>sql<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">DataSource</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>dao<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">DataAccessException</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>jdbc<span class=\"token punctuation\">.</span>core<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">JdbcTemplate</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>transaction<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">PlatformTransactionManager</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>transaction<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">TransactionDefinition</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>transaction<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">TransactionStatus</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>transaction<span class=\"token punctuation\">.</span>support<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">DefaultTransactionDefinition</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">BookJDBCTemplate</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">BookDao</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">DataSource</span> dataSource<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">JdbcTemplate</span> jdbcTemplateObject<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">PlatformTransactionManager</span> transactionManager<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">setDataSource</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">DataSource</span> dataSource<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>dataSource <span class=\"token operator\">=</span> dataSource<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>jdbcTemplateObject <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">JdbcTemplate</span><span class=\"token punctuation\">(</span>dataSource<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>    <span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">setTransactionManager</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">PlatformTransactionManager</span> transactionManager<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>transactionManager <span class=\"token operator\">=</span> transactionManager<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>    <span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> name<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Integer</span> count<span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span> edition<span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span> press<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>        <span class=\"token class-name\">TransactionDefinition</span> def <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">DefaultTransactionDefinition</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>        <span class=\"token comment\">// è®°å½•äº‹åŠ¡çŠ¶æ€</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>        <span class=\"token class-name\">TransactionStatus</span> status <span class=\"token operator\">=</span> transactionManager<span class=\"token punctuation\">.</span><span class=\"token function\">getTransaction</span><span class=\"token punctuation\">(</span>def<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>        <span class=\"token keyword\">try</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>            <span class=\"token comment\">// ä¿å­˜ Book</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>            <span class=\"token class-name\">String</span> sql1 <span class=\"token operator\">=</span> <span class=\"token string\">\"insert into Book (name, count) values (?, ?)\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>            jdbcTemplateObject<span class=\"token punctuation\">.</span><span class=\"token function\">update</span><span class=\"token punctuation\">(</span>sql1<span class=\"token punctuation\">,</span> name<span class=\"token punctuation\">,</span> count<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>            <span class=\"token comment\">// è·å– Book è¡¨ä¸­æœ€æ–°çš„ ID</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>            <span class=\"token class-name\">String</span> sql2 <span class=\"token operator\">=</span> <span class=\"token string\">\"select max(id) from Book\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>            <span class=\"token keyword\">int</span> bid <span class=\"token operator\">=</span> jdbcTemplateObject<span class=\"token punctuation\">.</span><span class=\"token function\">queryForObject</span><span class=\"token punctuation\">(</span>sql2<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Integer</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>            <span class=\"token comment\">// ä¿å­˜ Edition</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>            <span class=\"token class-name\">String</span> sql3 <span class=\"token operator\">=</span> <span class=\"token string\">\"insert into Edition(bid, edition, press) values (?, ?, ?)\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>            jdbcTemplateObject<span class=\"token punctuation\">.</span><span class=\"token function\">update</span><span class=\"token punctuation\">(</span>sql3<span class=\"token punctuation\">,</span> bid<span class=\"token punctuation\">,</span> edition<span class=\"token punctuation\">,</span> press<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre>            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Created Name = \"</span> <span class=\"token operator\">+</span> name <span class=\"token operator\">+</span> <span class=\"token string\">\", Count = \"</span> <span class=\"token operator\">+</span> count <span class=\"token operator\">+</span> <span class=\"token string\">\", Edition = \"</span> <span class=\"token operator\">+</span> edition <span class=\"token operator\">+</span> <span class=\"token string\">\", Press = \"</span> <span class=\"token operator\">+</span> press<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre>            <span class=\"token comment\">// ä¸ºäº†æ–¹ä¾¿æµ‹è¯•ï¼Œå¯ä»¥åœ¨æäº¤ä¹‹å‰ç¼–å†™å¯é¢„æœŸçš„å¼‚å¸¸ä»£ç ï¼Œä¾‹å¦‚ï¼š</span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre>            <span class=\"token comment\">// System.out.println(1 / 0);</span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre>            <span class=\"token comment\">// å¹¶åœ¨ catch å—ä¸­æ•è· ArithmeticException</span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre>            <span class=\"token comment\">// æäº¤äº‹åŠ¡çŠ¶æ€</span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre>            transactionManager<span class=\"token punctuation\">.</span><span class=\"token function\">commit</span><span class=\"token punctuation\">(</span>status<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"51\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">DataAccessException</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"52\"></td><td><pre>            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Error in creating record, rolling back\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"53\"></td><td><pre>            transactionManager<span class=\"token punctuation\">.</span><span class=\"token function\">rollback</span><span class=\"token punctuation\">(</span>status<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"54\"></td><td><pre>            <span class=\"token keyword\">throw</span> e<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"55\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"56\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"57\"></td><td><pre></pre></td></tr><tr><td data-num=\"58\"></td><td><pre>    <span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"59\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">BookEdition</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">listBooks</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"60\"></td><td><pre>        <span class=\"token class-name\">String</span> sql <span class=\"token operator\">=</span> <span class=\"token string\">\"select * from Book, Edition where Book.id = Edition.bid\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"61\"></td><td><pre>        <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">BookEdition</span><span class=\"token punctuation\">></span></span> bookEdition <span class=\"token operator\">=</span> jdbcTemplateObject<span class=\"token punctuation\">.</span><span class=\"token function\">query</span><span class=\"token punctuation\">(</span>sql<span class=\"token punctuation\">,</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">BookEditionMapper</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"62\"></td><td><pre>        <span class=\"token keyword\">return</span> bookEdition<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"63\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"64\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>ä¿®æ”¹ Beans.xml</p>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token prolog\">&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>beans</span> <span class=\"token attr-name\">xmlns</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.springframework.org/schema/beans<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>xsi</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.w3.org/2001/XMLSchema-instance<span class=\"token punctuation\">\"</span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>       <span class=\"token attr-name\"><span class=\"token namespace\">xsi:</span>schemaLocation</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd <span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token comment\">&lt;!-- Initialization for data source --></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>bean</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>dataSource<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>org.springframework.jdbc.datasource.DriverManagerDataSource<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>driverClassName<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>com.mysql.cj.jdbc.Driver<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>url<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>jdbc:mysql://localhost:3306/spring-demo?serverTimezone=Asia/Shanghai<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>username<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>root<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>password<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>root<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>bean</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token comment\">&lt;!-- Initialization for TransactionManager --></span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>bean</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>transactionManager<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>org.springframework.jdbc.datasource.DataSourceTransactionManager<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>dataSource<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">ref</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>dataSource<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>bean</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token comment\">&lt;!-- Definition for bookJDBCTemplate bean --></span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>bean</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>bookJDBCTemplate<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>com.xfc.BookJDBCTemplate<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>dataSource<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">ref</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>dataSource<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>transactionManager<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">ref</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>transactionManager<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>bean</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre></pre></td></tr><tr><td data-num=\"24\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>beans</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p>ä¿®æ”¹ MainApp.java</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>context<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">ApplicationContext</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>context<span class=\"token punctuation\">.</span>support<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">ClassPathXmlApplicationContext</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">List</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">MainApp</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token class-name\">ApplicationContext</span> context <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ClassPathXmlApplicationContext</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Beans.xml\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token class-name\">BookJDBCTemplate</span> bookJDBCTemplate <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">BookJDBCTemplate</span><span class=\"token punctuation\">)</span> context<span class=\"token punctuation\">.</span><span class=\"token function\">getBean</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"bookJDBCTemplate\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        bookJDBCTemplate<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"è„‚ç šæ–‹é‡è¯„çŸ³å¤´è®°\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">11</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"2017å¹´10æœˆç¬¬1ç‰ˆ\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"å¤©æ´¥å¤ç±å‡ºç‰ˆç¤¾\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        bookJDBCTemplate<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"æ³¥æ·–ä¹‹å­\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"2018.2\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"å¹¿è¥¿äººæ°‘å‡ºç‰ˆç¤¾\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        bookJDBCTemplate<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ä¸­å›½æ–‡å­¦ä½œå“é€‰æ³¨\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">15</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"2017å¹´6æœˆåŒ—äº¬ç¬¬1ç‰ˆ\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"ä¸­åä¹¦å±€\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">BookEdition</span><span class=\"token punctuation\">></span></span> bookEdition <span class=\"token operator\">=</span> bookJDBCTemplate<span class=\"token punctuation\">.</span><span class=\"token function\">listBooks</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">BookEdition</span> <span class=\"token keyword\">record</span> <span class=\"token operator\">:</span> bookEdition<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ID : \"</span> <span class=\"token operator\">+</span> <span class=\"token keyword\">record</span><span class=\"token punctuation\">.</span><span class=\"token function\">getId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">\", Name : \"</span> <span class=\"token operator\">+</span> <span class=\"token keyword\">record</span><span class=\"token punctuation\">.</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">\", Edition : \"</span> <span class=\"token operator\">+</span> <span class=\"token keyword\">record</span><span class=\"token punctuation\">.</span><span class=\"token function\">getEdition</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">\", Press : \"</span> <span class=\"token operator\">+</span> <span class=\"token keyword\">record</span><span class=\"token punctuation\">.</span><span class=\"token function\">getPress</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">\", Count : \"</span> <span class=\"token operator\">+</span> <span class=\"token keyword\">record</span><span class=\"token punctuation\">.</span><span class=\"token function\">getCount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>åœ¨  <code>BookJDBCTemplate.create()</code>  æ–¹æ³•ä½“ä¸­è¿›è¡Œå¼‚å¸¸å›æ»šæµ‹è¯•ï¼Œè§£é™¤  <code>System.out.println(1 / 0);</code>  ä»£ç æ³¨é‡Šï¼ŒæŠ›å‡ºå¹¶æ•è· ArithmeticException å¼‚å¸¸ã€‚è¿è¡Œ  <code>MainApp.java</code>  å¾—åˆ°å¦‚ä¸‹ç»“æœï¼š</p>\n<blockquote>\n<p>Created Name = è„‚ç šæ–‹é‡è¯„çŸ³å¤´è®°ï¼ŒCount = 11, Edition = 2017 å¹´ 10 æœˆç¬¬ 1 ç‰ˆï¼ŒPress = å¤©æ´¥å¤ç±å‡ºç‰ˆç¤¾<br />\n Error in creating record, rolling back<br />\nException in thread &quot;main&quot; java.lang.ArithmeticException: / by zero<br />\nat com.xfc.BookJDBCTemplate.create(BookJDBCTemplate.java:46)<br />\nat com.xfc.MainApp.main(MainApp.java:13)</p>\n</blockquote>\n<p>æˆ‘ä»¬å³å¯è§‚å¯Ÿåˆ°äº‹åŠ¡å®ç°å›æ»šã€‚</p>\n<p>æ¢å¤ä»£ç ï¼Œå†æ¬¡è¿è¡Œ  <code>MainApp.java</code>  å¾—åˆ°å¦‚ä¸‹ç»“æœï¼š</p>\n<blockquote>\n<p>Created Name = è„‚ç šæ–‹é‡è¯„çŸ³å¤´è®°ï¼ŒCount = 11, Edition = 2017 å¹´ 10 æœˆç¬¬ 1 ç‰ˆï¼ŒPress = å¤©æ´¥å¤ç±å‡ºç‰ˆç¤¾<br />\n Created Name = æ³¥æ·–ä¹‹å­ï¼ŒCount = 2, Edition = 2018.2, Press = å¹¿è¥¿äººæ°‘å‡ºç‰ˆç¤¾<br />\n Created Name = ä¸­å›½æ–‡å­¦ä½œå“é€‰æ³¨ï¼ŒCount = 15, Edition = 2017 å¹´ 6 æœˆåŒ—äº¬ç¬¬ 1 ç‰ˆï¼ŒPress = ä¸­åä¹¦å±€<br />\n ID : 1, Name : è„‚ç šæ–‹é‡è¯„çŸ³å¤´è®°ï¼ŒEdition : 2017 å¹´ 10 æœˆç¬¬ 1 ç‰ˆï¼ŒPress : å¤©æ´¥å¤ç±å‡ºç‰ˆç¤¾ï¼ŒCount : 11<br />\nID : 2, Name : æ³¥æ·–ä¹‹å­ï¼ŒEdition : 2018.2, Press : å¹¿è¥¿äººæ°‘å‡ºç‰ˆç¤¾ï¼ŒCount : 2<br />\nID : 3, Name : ä¸­å›½æ–‡å­¦ä½œå“é€‰æ³¨ï¼ŒEdition : 2017 å¹´ 6 æœˆåŒ—äº¬ç¬¬ 1 ç‰ˆï¼ŒPress : ä¸­åä¹¦å±€ï¼ŒCount : 15</p>\n</blockquote>\n<h4 id=\"å£°æ˜å¼äº‹åŠ¡ç®¡ç†\"><a class=\"anchor\" href=\"#å£°æ˜å¼äº‹åŠ¡ç®¡ç†\">#</a> å£°æ˜å¼äº‹åŠ¡ç®¡ç†</h4>\n<p>å£°æ˜å¼äº‹åŠ¡ç®¡ç†æ–¹æ³•å…è®¸ä½ åœ¨é…ç½®çš„å¸®åŠ©ä¸‹è€Œä¸æ˜¯æºä»£ç ç¡¬ç¼–ç¨‹æ¥ç®¡ç†äº‹åŠ¡ã€‚è¿™æ„å‘³ç€ä½ å¯ä»¥å°†äº‹åŠ¡ç®¡ç†ä»äº‹åŠ¡ä»£ç ä¸­éš”ç¦»å‡ºæ¥ã€‚ä½ å¯ä»¥åªä½¿ç”¨æ³¨è§£æˆ–åŸºäºé…ç½®çš„ XML æ¥ç®¡ç†äº‹åŠ¡ï¼Œbean é…ç½®ä¼šæŒ‡å®šäº‹åŠ¡å‹æ–¹æ³•ã€‚</p>\n<p><strong>ä»£ç ç¤ºä¾‹ï¼š</strong></p>\n<p>æœ¬ç¤ºä¾‹éœ€è¦çš„æ–‡ä»¶ï¼šBookEdition.javaã€BookDao.javaã€BookEditionMapper.javaã€BookJDBCTemplate.javaã€Beans.xmlã€MainApp.javaï¼Œå…¶ä¸­ BookEdition.javaã€BookEditionMapper.java æ–‡ä»¶ä¸ä¸Šä¸€ç¤ºä¾‹ä¸€è‡´ï¼Œæ­¤å¤„ä¸å†é‡è¿°ã€‚</p>\n<p>ä¿®æ”¹ BookDao.java</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">javax<span class=\"token punctuation\">.</span>sql<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">DataSource</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">List</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">BookDao</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token keyword\">void</span> <span class=\"token function\">setDataSource</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">DataSource</span> dataSource<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token keyword\">void</span> <span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> name<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Integer</span> count<span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span> edition<span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span> press<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">BookEdition</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">listBooks</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>ä¿®æ”¹ BookJDBCTemplate.java</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>dao<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">DataAccessException</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>jdbc<span class=\"token punctuation\">.</span>core<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">JdbcTemplate</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">javax<span class=\"token punctuation\">.</span>sql<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">DataSource</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">List</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">BookJDBCTemplate</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">BookDao</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">JdbcTemplate</span> jdbcTemplateObject<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">setDataSource</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">DataSource</span> dataSource<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>jdbcTemplateObject <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">JdbcTemplate</span><span class=\"token punctuation\">(</span>dataSource<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> name<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Integer</span> count<span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span> edition<span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span> press<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>        <span class=\"token keyword\">try</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>            <span class=\"token comment\">// ä¿å­˜ Book</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>            <span class=\"token class-name\">String</span> sql1 <span class=\"token operator\">=</span> <span class=\"token string\">\"insert into Book (name, count) values (?, ?)\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>            jdbcTemplateObject<span class=\"token punctuation\">.</span><span class=\"token function\">update</span><span class=\"token punctuation\">(</span>sql1<span class=\"token punctuation\">,</span> name<span class=\"token punctuation\">,</span> count<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>            <span class=\"token comment\">// è·å– Book è¡¨ä¸­æœ€æ–°çš„ ID</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>            <span class=\"token class-name\">String</span> sql2 <span class=\"token operator\">=</span> <span class=\"token string\">\"select max(id) from Book\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>            <span class=\"token keyword\">int</span> bid <span class=\"token operator\">=</span> jdbcTemplateObject<span class=\"token punctuation\">.</span><span class=\"token function\">queryForObject</span><span class=\"token punctuation\">(</span>sql2<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Integer</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>            <span class=\"token comment\">// ä¿å­˜ Edition</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>            <span class=\"token class-name\">String</span> sql3 <span class=\"token operator\">=</span> <span class=\"token string\">\"insert into Edition(bid, edition, press) values (?, ?, ?)\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>            jdbcTemplateObject<span class=\"token punctuation\">.</span><span class=\"token function\">update</span><span class=\"token punctuation\">(</span>sql3<span class=\"token punctuation\">,</span> bid<span class=\"token punctuation\">,</span> edition<span class=\"token punctuation\">,</span> press<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Created Name = \"</span> <span class=\"token operator\">+</span> name <span class=\"token operator\">+</span> <span class=\"token string\">\", Count = \"</span> <span class=\"token operator\">+</span> count <span class=\"token operator\">+</span> <span class=\"token string\">\", Edition = \"</span> <span class=\"token operator\">+</span> edition <span class=\"token operator\">+</span> <span class=\"token string\">\", Press = \"</span> <span class=\"token operator\">+</span> press<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>            <span class=\"token comment\">// æµ‹è¯•å¼‚å¸¸</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>            <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">RuntimeException</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"simulate Error condition\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">DataAccessException</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Error in creating record, rolling back\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>            <span class=\"token keyword\">throw</span> e<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>    <span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">BookEdition</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">listBooks</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>        <span class=\"token class-name\">String</span> sql <span class=\"token operator\">=</span> <span class=\"token string\">\"select * from Book, Edition where Book.id = Edition.bid\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>        <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">BookEdition</span><span class=\"token punctuation\">></span></span> bookEdition <span class=\"token operator\">=</span> jdbcTemplateObject<span class=\"token punctuation\">.</span><span class=\"token function\">query</span><span class=\"token punctuation\">(</span>sql<span class=\"token punctuation\">,</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">BookEditionMapper</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>        <span class=\"token keyword\">return</span> bookEdition<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>ä¿®æ”¹ Beans.xml</p>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token prolog\">&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>beans</span> <span class=\"token attr-name\">xmlns</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.springframework.org/schema/beans<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>xsi</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.w3.org/2001/XMLSchema-instance<span class=\"token punctuation\">\"</span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>       <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>tx</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.springframework.org/schema/tx<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>aop</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.springframework.org/schema/aop<span class=\"token punctuation\">\"</span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>       <span class=\"token attr-name\"><span class=\"token namespace\">xsi:</span>schemaLocation</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>   http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.0.xsd</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>   http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.0.xsd<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token comment\">&lt;!-- Initialization for data source --></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>bean</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>dataSource<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>org.springframework.jdbc.datasource.DriverManagerDataSource<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>driverClassName<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>com.mysql.cj.jdbc.Driver<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>url<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>jdbc:mysql://localhost:3306/spring-demo?serverTimezone=Asia/Shanghai<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>username<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>root<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>password<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>root<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>bean</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">tx:</span>advice</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>txAdvice<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">transaction-manager</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>transactionManager<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">tx:</span>attributes</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">tx:</span>method</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>create<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token namespace\">tx:</span>attributes</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token namespace\">tx:</span>advice</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">aop:</span>config</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">aop:</span>pointcut</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>createOperation<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">expression</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>execution(* com.xfc.BookJDBCTemplate.create(..))<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">aop:</span>advisor</span> <span class=\"token attr-name\">advice-ref</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>txAdvice<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">pointcut-ref</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>createOperation<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token namespace\">aop:</span>config</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>    <span class=\"token comment\">&lt;!-- Initialization for TransactionManager --></span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>bean</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>transactionManager<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>org.springframework.jdbc.datasource.DataSourceTransactionManager<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>dataSource<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">ref</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>dataSource<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>bean</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>    <span class=\"token comment\">&lt;!-- Definition for bookJDBCTemplate bean --></span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>bean</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>bookJDBCTemplate<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>com.xfc.BookJDBCTemplate<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>dataSource<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">ref</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>dataSource<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>bean</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre></pre></td></tr><tr><td data-num=\"37\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>beans</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p>ä¿®æ”¹ MainApp.java</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>context<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">ApplicationContext</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>context<span class=\"token punctuation\">.</span>support<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">ClassPathXmlApplicationContext</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">List</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">MainApp</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token class-name\">ApplicationContext</span> context <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ClassPathXmlApplicationContext</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Beans.xml\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token class-name\">BookDao</span> bookJDBCTemplate <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">BookDao</span><span class=\"token punctuation\">)</span> context<span class=\"token punctuation\">.</span><span class=\"token function\">getBean</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"bookJDBCTemplate\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        bookJDBCTemplate<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"è„‚ç šæ–‹é‡è¯„çŸ³å¤´è®°\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">11</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"2017å¹´10æœˆç¬¬1ç‰ˆ\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"å¤©æ´¥å¤ç±å‡ºç‰ˆç¤¾\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        bookJDBCTemplate<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"æ³¥æ·–ä¹‹å­\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"2018.2\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"å¹¿è¥¿äººæ°‘å‡ºç‰ˆç¤¾\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        bookJDBCTemplate<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ä¸­å›½æ–‡å­¦ä½œå“é€‰æ³¨\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">15</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"2017å¹´6æœˆåŒ—äº¬ç¬¬1ç‰ˆ\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"ä¸­åä¹¦å±€\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">BookEdition</span><span class=\"token punctuation\">></span></span> bookEdition <span class=\"token operator\">=</span> bookJDBCTemplate<span class=\"token punctuation\">.</span><span class=\"token function\">listBooks</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">BookEdition</span> <span class=\"token keyword\">record</span> <span class=\"token operator\">:</span> bookEdition<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ID : \"</span> <span class=\"token operator\">+</span> <span class=\"token keyword\">record</span><span class=\"token punctuation\">.</span><span class=\"token function\">getId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">\", Name : \"</span> <span class=\"token operator\">+</span> <span class=\"token keyword\">record</span><span class=\"token punctuation\">.</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">\", Edition : \"</span> <span class=\"token operator\">+</span> <span class=\"token keyword\">record</span><span class=\"token punctuation\">.</span><span class=\"token function\">getEdition</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">\", Press : \"</span> <span class=\"token operator\">+</span> <span class=\"token keyword\">record</span><span class=\"token punctuation\">.</span><span class=\"token function\">getPress</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">\", Count : \"</span> <span class=\"token operator\">+</span> <span class=\"token keyword\">record</span><span class=\"token punctuation\">.</span><span class=\"token function\">getCount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><blockquote>\n<p>ä¸ºäº†ä¾¿äºè§‚å¯Ÿæ•ˆæœï¼Œæ¨èå…ˆæ¸…é™¤æ•°æ®åº“æ—§æœ‰æ•°æ®ã€‚</p>\n</blockquote>\n<p>è¿è¡Œ  <code>MainApp.java</code>  å¾—åˆ°å¦‚ä¸‹ç»“æœï¼š</p>\n<blockquote>\n<p>Created Name = è„‚ç šæ–‹é‡è¯„çŸ³å¤´è®°ï¼ŒCount = 11, Edition = 2017 å¹´ 10 æœˆç¬¬ 1 ç‰ˆï¼ŒPress = å¤©æ´¥å¤ç±å‡ºç‰ˆç¤¾<br />\n Exception in thread &quot;main&quot; java.lang.RuntimeException: simulate Error condition</p>\n</blockquote>\n<p>è§‚å¯Ÿæ•°æ®åº“ï¼Œå¾—çŸ¥å½“æ‰§è¡Œå¼‚å¸¸æ—¶ï¼Œé”™è¯¯æ•°æ®å¹¶æœªè¢«æ·»åŠ åˆ°æ•°æ®åº“ï¼Œå®ç°äº†äº‹åŠ¡å›æ»šã€‚</p>\n<p>å»é™¤  <code>BookJDBCTemplate.create()</code>  æ–¹æ³•ä½“ä¸­çš„å¼‚å¸¸ä»£ç ç‰‡æ®µï¼Œå†æ¬¡è¿è¡Œå¾—åˆ°å¦‚ä¸‹ç»“æœï¼š</p>\n<blockquote>\n<p>Created Name = è„‚ç šæ–‹é‡è¯„çŸ³å¤´è®°ï¼ŒCount = 11, Edition = 2017 å¹´ 10 æœˆç¬¬ 1 ç‰ˆï¼ŒPress = å¤©æ´¥å¤ç±å‡ºç‰ˆç¤¾<br />\n Created Name = æ³¥æ·–ä¹‹å­ï¼ŒCount = 2, Edition = 2018.2, Press = å¹¿è¥¿äººæ°‘å‡ºç‰ˆç¤¾<br />\n Created Name = ä¸­å›½æ–‡å­¦ä½œå“é€‰æ³¨ï¼ŒCount = 15, Edition = 2017 å¹´ 6 æœˆåŒ—äº¬ç¬¬ 1 ç‰ˆï¼ŒPress = ä¸­åä¹¦å±€<br />\n ID : 1, Name : è„‚ç šæ–‹é‡è¯„çŸ³å¤´è®°ï¼ŒEdition : 2017 å¹´ 10 æœˆç¬¬ 1 ç‰ˆï¼ŒPress : å¤©æ´¥å¤ç±å‡ºç‰ˆç¤¾ï¼ŒCount : 11<br />\nID : 2, Name : æ³¥æ·–ä¹‹å­ï¼ŒEdition : 2018.2, Press : å¹¿è¥¿äººæ°‘å‡ºç‰ˆç¤¾ï¼ŒCount : 2<br />\nID : 3, Name : ä¸­å›½æ–‡å­¦ä½œå“é€‰æ³¨ï¼ŒEdition : 2017 å¹´ 6 æœˆåŒ—äº¬ç¬¬ 1 ç‰ˆï¼ŒPress : ä¸­åä¹¦å±€ï¼ŒCount : 15</p>\n</blockquote>\n<h3 id=\"spring-web-mvc-æ¡†æ¶\"><a class=\"anchor\" href=\"#spring-web-mvc-æ¡†æ¶\">#</a> Spring Web MVC æ¡†æ¶</h3>\n<blockquote>\n<p>æ³¨ï¼šæ­¤éƒ¨åˆ†å†…å®¹æ—¥å¸¸å¼€å‘ä¸­åº”ç”¨è¾ƒå¤šï¼Œéƒ¨åˆ†å¸¸è§„çš„å†…å®¹ä¸ä½œè¯¦ç»†è¯´æ˜ã€‚</p>\n</blockquote>\n<p>Spring web MVC æ¡†æ¶æä¾›äº†  <code>æ¨¡å‹-è§†å›¾-æ§åˆ¶</code>  çš„ä½“ç³»ç»“æ„å’Œå¯ä»¥ç”¨æ¥å¼€å‘çµæ´»ã€æ¾æ•£è€¦åˆçš„ web åº”ç”¨ç¨‹åºçš„ç»„ä»¶ã€‚MVC æ¨¡å¼å¯¼è‡´äº†åº”ç”¨ç¨‹åºçš„ä¸åŒæ–¹é¢ï¼ˆè¾“å…¥é€»è¾‘ã€ä¸šåŠ¡é€»è¾‘å’Œ UI é€»è¾‘ï¼‰çš„åˆ†ç¦»ï¼ŒåŒæ—¶æä¾›äº†åœ¨è¿™äº›å…ƒç´ ä¹‹é—´çš„æ¾æ•£è€¦åˆã€‚</p>\n<ul>\n<li><strong>æ¨¡å‹</strong> å°è£…äº†åº”ç”¨ç¨‹åºæ•°æ®ï¼Œå¹¶ä¸”é€šå¸¸å®ƒä»¬ç”± POJO ç»„æˆã€‚</li>\n<li><strong>è§†å›¾</strong> ä¸»è¦ç”¨äºå‘ˆç°æ¨¡å‹æ•°æ®ï¼Œå¹¶ä¸”é€šå¸¸å®ƒç”Ÿæˆå®¢æˆ·ç«¯çš„æµè§ˆå™¨å¯ä»¥è§£é‡Šçš„ HTML è¾“å‡ºã€‚</li>\n<li><strong>æ§åˆ¶å™¨</strong> ä¸»è¦ç”¨äºå¤„ç†ç”¨æˆ·è¯·æ±‚ï¼Œå¹¶ä¸”æ„å»ºåˆé€‚çš„æ¨¡å‹å¹¶å°†å…¶ä¼ é€’åˆ°è§†å›¾å‘ˆç°ã€‚</li>\n</ul>\n<p><strong>DispatcherServlet</strong></p>\n<p>Spring Web æ¨¡å‹ - è§†å›¾ - æ§åˆ¶ï¼ˆMVCï¼‰æ¡†æ¶æ˜¯å›´ç»•  <code>DispatcherServlet</code>  è®¾è®¡çš„ï¼ŒDispatcherServlet ç”¨æ¥å¤„ç†æ‰€æœ‰çš„ HTTP è¯·æ±‚å’Œå“åº”ã€‚</p>\n<p>DispatcherServlet å·¥ä½œæµç¨‹å›¾ï¼š</p>\n<p><img data-src=\"https://img.xfc-exclave.com/2021/10/9912aa04c831878f6be303df9eb3c64c1633529103.png\" alt=\"dispatcherservlet\" /></p>\n<h4 id=\"hello-world-ä¾‹å­\"><a class=\"anchor\" href=\"#hello-world-ä¾‹å­\">#</a> Hello World ä¾‹å­</h4>\n<p><strong>å‡†å¤‡</strong></p>\n<p>åˆ›å»ºæ–°çš„åŠ¨æ€ web é¡¹ç›®ï¼šFile --&gt; New --&gt; Project --&gt; Java Enterprise --&gt; å‹¾é€‰ Web Applicationã€‚</p>\n<p>åœ¨ WEB-INF ç›®å½•ä¸‹åˆ›å»º jspã€lib æ–‡ä»¶å¤¹ã€‚å°†æ­¤æ­¤å‰ç”¨åˆ°çš„ spring ç›¸å…³çš„ jar å¯¼å…¥åˆ° lib ç›®å½•ï¼Œå¹¶æ·»åŠ åˆ° libaraies ã€‚</p>\n<p>åœ¨ WEB-INF æ–‡ä»¶å¤¹ä¸‹åˆ›å»º hello-servlet.xmlï¼ˆæ–‡ä»¶åéµå¾ª  <code>[servlet-name]-servlet.xml</code>  ï¼‰ã€‚</p>\n<p>åœ¨ src ç›®å½•ä¸‹åˆ›å»ºåŒ… com.xfcï¼Œå¹¶åœ¨åŒ…è·¯å¾„ä¸‹åˆ›å»º HelloController.javaã€‚</p>\n<p>é…ç½® web å®¹å™¨ï¼Œä»¥ä¸‹ç¤ºä¾‹ä½¿ç”¨ tomcat ä½œä¸º web å®¹å™¨ã€‚</p>\n<p><strong>ä»£ç ç¤ºä¾‹ï¼š</strong></p>\n<p>hello-servlet.xml</p>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>beans</span> <span class=\"token attr-name\">xmlns</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.springframework.org/schema/beans<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>context</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.springframework.org/schema/context<span class=\"token punctuation\">\"</span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>       <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>xsi</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.w3.org/2001/XMLSchema-instance<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\"><span class=\"token namespace\">xsi:</span>schemaLocation</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>   http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">context:</span>component-scan</span> <span class=\"token attr-name\">base-package</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>com.xfc<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>bean</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>org.springframework.web.servlet.view.InternalResourceViewResolver<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>prefix<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/WEB-INF/jsp/<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>suffix<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>.jsp<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>bean</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>beans</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p>web.xml</p>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>web-app</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>WebApp_ID<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">version</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>2.4<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">xmlns</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://java.sun.com/xml/ns/j2ee<span class=\"token punctuation\">\"</span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>         <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>xsi</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.w3.org/2001/XMLSchema-instance<span class=\"token punctuation\">\"</span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>         <span class=\"token attr-name\"><span class=\"token namespace\">xsi:</span>schemaLocation</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>display-name</span><span class=\"token punctuation\">></span></span>spring-mvc<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>display-name</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>servlet</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>servlet-name</span><span class=\"token punctuation\">></span></span>hello<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>servlet-name</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>servlet-class</span><span class=\"token punctuation\">></span></span>org.springframework.web.servlet.DispatcherServlet<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>servlet-class</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>load-on-startup</span><span class=\"token punctuation\">></span></span>1<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>load-on-startup</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>servlet</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>servlet-mapping</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>servlet-name</span><span class=\"token punctuation\">></span></span>hello<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>servlet-name</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>url-pattern</span><span class=\"token punctuation\">></span></span>/<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>url-pattern</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>servlet-mapping</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>web-app</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p>index.jsp</p>\n<figure class=\"highlight html\"><figcaption data-lang=\"HTML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>&lt;%@ page contentType=\"text/html; charset=UTF-8\" %></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>head</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>title</span><span class=\"token punctuation\">></span></span>Hello World<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>title</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>head</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h2</span><span class=\"token punctuation\">></span></span>$&#123;message&#125;<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h2</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>html</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p>HelloController.java</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>stereotype<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Controller</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>web<span class=\"token punctuation\">.</span>bind<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">RequestMapping</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>web<span class=\"token punctuation\">.</span>bind<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">RequestMethod</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>ui<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">ModelMap</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token annotation punctuation\">@Controller</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token annotation punctuation\">@RequestMapping</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/hello\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">HelloController</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token annotation punctuation\">@RequestMapping</span><span class=\"token punctuation\">(</span>method <span class=\"token operator\">=</span> <span class=\"token class-name\">RequestMethod</span><span class=\"token punctuation\">.</span>GET<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">printHello</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">ModelMap</span> model<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        model<span class=\"token punctuation\">.</span><span class=\"token function\">addAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"message\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Hello Spring MVC Framework!\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token string\">\"index\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>å¯åŠ¨é¡¹ç›®å¹¶åœ¨æµè§ˆå™¨è®¿é—®  <code>http://localhost:8080/hello</code>  ï¼š</p>\n<p><img data-src=\"https://img.xfc-exclave.com/2021/10/6a9f692d0369304731cf0eca011ff3131633529112.png\" alt=\"shituxiaoguo\" /></p>\n<h4 id=\"spring-mvc-è¡¨å•å¤„ç†ä¾‹å­\"><a class=\"anchor\" href=\"#spring-mvc-è¡¨å•å¤„ç†ä¾‹å­\">#</a> Spring MVC è¡¨å•å¤„ç†ä¾‹å­</h4>\n<p><strong>ä»£ç ç¤ºä¾‹ï¼š</strong></p>\n<p>åŸºäºä¸Šä¸€ç¤ºä¾‹ã€‚</p>\n<p>æ–°å»º Book.java</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Book</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Integer</span> id<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> name<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Integer</span> count<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    </pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token comment\">// setter and getter...</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>æ–°å»º BookController.java</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>stereotype<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Controller</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>ui<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">ModelMap</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>web<span class=\"token punctuation\">.</span>bind<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">ModelAttribute</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>web<span class=\"token punctuation\">.</span>bind<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">RequestMapping</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>web<span class=\"token punctuation\">.</span>bind<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">RequestMethod</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>web<span class=\"token punctuation\">.</span>servlet<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">ModelAndView</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token annotation punctuation\">@Controller</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">BookController</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token annotation punctuation\">@RequestMapping</span><span class=\"token punctuation\">(</span>value <span class=\"token operator\">=</span> <span class=\"token string\">\"/book\"</span><span class=\"token punctuation\">,</span> method <span class=\"token operator\">=</span> <span class=\"token class-name\">RequestMethod</span><span class=\"token punctuation\">.</span>GET<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">ModelAndView</span> <span class=\"token function\">student</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ModelAndView</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"book\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"command\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Book</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token annotation punctuation\">@RequestMapping</span><span class=\"token punctuation\">(</span>value <span class=\"token operator\">=</span> <span class=\"token string\">\"/addBook\"</span><span class=\"token punctuation\">,</span> method <span class=\"token operator\">=</span> <span class=\"token class-name\">RequestMethod</span><span class=\"token punctuation\">.</span>POST<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">addStudent</span><span class=\"token punctuation\">(</span><span class=\"token annotation punctuation\">@ModelAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"SpringWeb\"</span><span class=\"token punctuation\">)</span> <span class=\"token class-name\">Book</span> book<span class=\"token punctuation\">,</span> <span class=\"token class-name\">ModelMap</span> model<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>        model<span class=\"token punctuation\">.</span><span class=\"token function\">addAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"name\"</span><span class=\"token punctuation\">,</span> book<span class=\"token punctuation\">.</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>        model<span class=\"token punctuation\">.</span><span class=\"token function\">addAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"count\"</span><span class=\"token punctuation\">,</span> book<span class=\"token punctuation\">.</span><span class=\"token function\">getCount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>        model<span class=\"token punctuation\">.</span><span class=\"token function\">addAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"id\"</span><span class=\"token punctuation\">,</span> book<span class=\"token punctuation\">.</span><span class=\"token function\">getId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token string\">\"result\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>æ–°å»º book.jsp</p>\n<figure class=\"highlight html\"><figcaption data-lang=\"HTML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>&lt;%@taglib uri=\"http://www.springframework.org/tags/form\" prefix=\"form\" %></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>head</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>title</span><span class=\"token punctuation\">></span></span>Spring MVC Form Handling<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>title</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>head</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h2</span><span class=\"token punctuation\">></span></span>Student Information<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h2</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">form:</span>form</span> <span class=\"token attr-name\">method</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>POST<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">action</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/addBook<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>table</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>tr</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>td</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">form:</span>label</span> <span class=\"token attr-name\">path</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>name<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>Name<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token namespace\">form:</span>label</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>td</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>td</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">form:</span>input</span> <span class=\"token attr-name\">path</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>name<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>td</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>tr</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>tr</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>td</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">form:</span>label</span> <span class=\"token attr-name\">path</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>count<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>Count<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token namespace\">form:</span>label</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>td</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>td</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">form:</span>input</span> <span class=\"token attr-name\">path</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>count<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>td</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>tr</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>tr</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>td</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">form:</span>label</span> <span class=\"token attr-name\">path</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>id<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>id<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token namespace\">form:</span>label</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>td</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>td</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">form:</span>input</span> <span class=\"token attr-name\">path</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>id<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>td</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>tr</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>tr</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>td</span> <span class=\"token attr-name\">colspan</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>2<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>submit<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Submit<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>td</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>tr</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>table</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token namespace\">form:</span>form</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>html</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p>æ–°å»º result.jsp</p>\n<figure class=\"highlight html\"><figcaption data-lang=\"HTML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>&lt;%@taglib uri=\"http://www.springframework.org/tags/form\" prefix=\"form\" %></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>head</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>title</span><span class=\"token punctuation\">></span></span>Spring MVC Form Handling<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>title</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>head</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h2</span><span class=\"token punctuation\">></span></span>Submitted Book Information<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h2</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>table</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>tr</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>td</span><span class=\"token punctuation\">></span></span>Name<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>td</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>td</span><span class=\"token punctuation\">></span></span>$&#123;name&#125;<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>td</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>tr</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>tr</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>td</span><span class=\"token punctuation\">></span></span>Count<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>td</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>td</span><span class=\"token punctuation\">></span></span>$&#123;count&#125;<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>td</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>tr</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>tr</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>td</span><span class=\"token punctuation\">></span></span>ID<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>td</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>td</span><span class=\"token punctuation\">></span></span>$&#123;id&#125;<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>td</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>tr</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>table</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>html</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p>å¯åŠ¨é¡¹ç›®å¹¶åœ¨æµè§ˆå™¨è®¿é—® <span class=\"exturl\" data-url=\"aHR0cDovL2xvY2FsaG9zdDo4MDgwL2Jvb2s=\">http://localhost:8080/book</span></p>\n<p><img data-src=\"https://img.xfc-exclave.com/2021/10/b708c5dfd6fbf947ae8869e8c861d0ea1633529119.png\" alt=\"bookformweb\" /></p>\n<p>å¡«å†™è¡¨å•å submit ï¼š</p>\n<p><img data-src=\"https://img.xfc-exclave.com/2021/10/40adf36f19f3a77fb302b54b067af4561633529124.png\" alt=\"booksubmitresult\" /></p>\n<h4 id=\"spring-é¡µé¢é‡å®šå‘ä¾‹å­\"><a class=\"anchor\" href=\"#spring-é¡µé¢é‡å®šå‘ä¾‹å­\">#</a> Spring é¡µé¢é‡å®šå‘ä¾‹å­</h4>\n<p><strong>ä»£ç ç¤ºä¾‹ï¼š</strong></p>\n<p>åŸºäºä¸Šä¸€ç¤ºä¾‹ã€‚</p>\n<p>æ–°å»º WebController.java</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>stereotype<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Controller</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>web<span class=\"token punctuation\">.</span>bind<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">RequestMapping</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>web<span class=\"token punctuation\">.</span>bind<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">RequestMethod</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token annotation punctuation\">@Controller</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">WebController</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token annotation punctuation\">@RequestMapping</span><span class=\"token punctuation\">(</span>value <span class=\"token operator\">=</span> <span class=\"token string\">\"/index\"</span><span class=\"token punctuation\">,</span> method <span class=\"token operator\">=</span> <span class=\"token class-name\">RequestMethod</span><span class=\"token punctuation\">.</span>GET<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">index</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token string\">\"index\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token annotation punctuation\">@RequestMapping</span><span class=\"token punctuation\">(</span>value <span class=\"token operator\">=</span> <span class=\"token string\">\"/redirect\"</span><span class=\"token punctuation\">,</span> method <span class=\"token operator\">=</span> <span class=\"token class-name\">RequestMethod</span><span class=\"token punctuation\">.</span>GET<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">redirect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token string\">\"redirect:finalPage\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token annotation punctuation\">@RequestMapping</span><span class=\"token punctuation\">(</span>value <span class=\"token operator\">=</span> <span class=\"token string\">\"/finalPage\"</span><span class=\"token punctuation\">,</span> method <span class=\"token operator\">=</span> <span class=\"token class-name\">RequestMethod</span><span class=\"token punctuation\">.</span>GET<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">finalPage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token string\">\"final\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>ä¿®æ”¹ index.jsp</p>\n<figure class=\"highlight html\"><figcaption data-lang=\"HTML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>&lt;%@taglib uri=\"http://www.springframework.org/tags/form\" prefix=\"form\" %></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>head</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>title</span><span class=\"token punctuation\">></span></span>Spring Page Redirection<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>title</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>head</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h2</span><span class=\"token punctuation\">></span></span>Spring Page Redirection<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h2</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span>Click below button to redirect the result to new page<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">form:</span>form</span> <span class=\"token attr-name\">method</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>GET<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">action</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/redirect<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>table</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>tr</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>td</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>submit<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Redirect Page<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>td</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>tr</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>table</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token namespace\">form:</span>form</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>html</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p>æ–°å»º final.jsp</p>\n<figure class=\"highlight html\"><figcaption data-lang=\"HTML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>&lt;%@taglib uri=\"http://www.springframework.org/tags/form\" prefix=\"form\" %></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>head</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>title</span><span class=\"token punctuation\">></span></span>Spring Page Redirection<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>title</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>head</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h2</span><span class=\"token punctuation\">></span></span>Redirected Page<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h2</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>html</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p>å¯åŠ¨é¡¹ç›®å¹¶åœ¨æµè§ˆå™¨è®¿é—® <span class=\"exturl\" data-url=\"aHR0cDovL2xvY2FsaG9zdDo4MDgwL2luZGV4\">http://localhost:8080/index</span></p>\n<p><img data-src=\"https://img.xfc-exclave.com/2021/10/9e062b7779bb3b9163b14653d807eb931633529130.png\" alt=\"redirect_index\" /></p>\n<p>ç‚¹å‡» Redirect Page æŒ‰é’®ï¼š</p>\n<p><img data-src=\"https://img.xfc-exclave.com/2021/10/39fd7896da49a5bf1608a4d7851cb8f81633529134.png\" alt=\"redirect_final\" /></p>\n<h4 id=\"spring-é™æ€é¡µé¢ä¾‹å­\"><a class=\"anchor\" href=\"#spring-é™æ€é¡µé¢ä¾‹å­\">#</a> Spring é™æ€é¡µé¢ä¾‹å­</h4>\n<p><strong>ä»£ç ç¤ºä¾‹ï¼š</strong></p>\n<p>åŸºäºä¸Šä¸€ç¤ºä¾‹ã€‚</p>\n<p>ä¿®æ”¹ WebController.java</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>stereotype<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Controller</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>web<span class=\"token punctuation\">.</span>bind<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">RequestMapping</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>web<span class=\"token punctuation\">.</span>bind<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">RequestMethod</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token annotation punctuation\">@Controller</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">WebController</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token annotation punctuation\">@RequestMapping</span><span class=\"token punctuation\">(</span>value <span class=\"token operator\">=</span> <span class=\"token string\">\"/index\"</span><span class=\"token punctuation\">,</span> method <span class=\"token operator\">=</span> <span class=\"token class-name\">RequestMethod</span><span class=\"token punctuation\">.</span>GET<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">index</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token string\">\"index\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token annotation punctuation\">@RequestMapping</span><span class=\"token punctuation\">(</span>value <span class=\"token operator\">=</span> <span class=\"token string\">\"/staticPage\"</span><span class=\"token punctuation\">,</span> method <span class=\"token operator\">=</span> <span class=\"token class-name\">RequestMethod</span><span class=\"token punctuation\">.</span>GET<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">redirect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token string\">\"redirect:/pages/final.html\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>ä¿®æ”¹ hello-servlet.xml</p>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token prolog\">&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>beans</span> <span class=\"token attr-name\">xmlns</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.springframework.org/schema/beans<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>xsi</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.w3.org/2001/XMLSchema-instance<span class=\"token punctuation\">\"</span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>       <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>context</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.springframework.org/schema/context<span class=\"token punctuation\">\"</span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>       <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>mvc</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.springframework.org/schema/mvc<span class=\"token punctuation\">\"</span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>       <span class=\"token attr-name\"><span class=\"token namespace\">xsi:</span>schemaLocation</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>       http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>       http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">context:</span>component-scan</span> <span class=\"token attr-name\">base-package</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>com.xfc<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>bean</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>org.springframework.web.servlet.view.InternalResourceViewResolver<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>prefix<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/WEB-INF/jsp/<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>suffix<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>.jsp<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>bean</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    </pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token comment\">&lt;!-- æ˜ å°„é™æ€æ–‡ä»¶ --></span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">mvc:</span>resources</span> <span class=\"token attr-name\">mapping</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/pages/**<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">location</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/WEB-INF/pages/<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">mvc:</span>annotation-driven</span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>beans</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p>åœ¨ WEB-INF ä¸‹åˆ›å»º pages/final.html æ–‡ä»¶ã€‚</p>\n<figure class=\"highlight html\"><figcaption data-lang=\"HTML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>head</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>title</span><span class=\"token punctuation\">></span></span>Spring Static Page<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>title</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>head</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h2</span><span class=\"token punctuation\">></span></span>A simple HTML page<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h2</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>html</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p>ä¿®æ”¹ index.jsp</p>\n<figure class=\"highlight html\"><figcaption data-lang=\"HTML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>&lt;%@taglib uri=\"http://www.springframework.org/tags/form\" prefix=\"form\"%></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>head</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>title</span><span class=\"token punctuation\">></span></span>Spring Landing Page<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>title</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>head</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h2</span><span class=\"token punctuation\">></span></span>Spring Landing Pag<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h2</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span>Click below button to get a simple HTML page<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">form:</span>form</span> <span class=\"token attr-name\">method</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>GET<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">action</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/staticPage<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>table</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>tr</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>td</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>submit<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Get HTML Page<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>td</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>tr</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>table</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token namespace\">form:</span>form</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>html</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p>å¯åŠ¨é¡¹ç›®å¹¶åœ¨æµè§ˆå™¨è®¿é—® <span class=\"exturl\" data-url=\"aHR0cDovL2xvY2FsaG9zdDo4MDgwL2luZGV4\">http://localhost:8080/index</span></p>\n<p><img data-src=\"https://img.xfc-exclave.com/2021/10/7ce682e04a66f3f399e255208fddd2c01633529155.png\" alt=\"static_index\" /></p>\n<p>ç‚¹å‡» Get HTML Page æŒ‰é’®ï¼š</p>\n<p><img data-src=\"https://img.xfc-exclave.com/2021/10/0fcc791bfad4da499c0352ebd5ddb5991633529160.png\" alt=\"static_final\" /></p>\n<h4 id=\"spring-å¼‚å¸¸å¤„ç†ä¾‹å­\"><a class=\"anchor\" href=\"#spring-å¼‚å¸¸å¤„ç†ä¾‹å­\">#</a> Spring å¼‚å¸¸å¤„ç†ä¾‹å­</h4>\n<p><strong>ä»£ç ç¤ºä¾‹ï¼š</strong></p>\n<p>åŸºäºä¸Šä¸€ç¤ºä¾‹ã€‚</p>\n<p>åˆ›å»º error.jsp</p>\n<figure class=\"highlight html\"><figcaption data-lang=\"HTML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>head</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>title</span><span class=\"token punctuation\">></span></span>Spring Error Page<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>title</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>head</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span>An error occured, please contact webmaster.<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>html</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p>åˆ›å»º ExceptionPage.jsp</p>\n<figure class=\"highlight html\"><figcaption data-lang=\"HTML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>&lt;%@taglib uri=\"http://www.springframework.org/tags/form\" prefix=\"form\" %></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>head</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>title</span><span class=\"token punctuation\">></span></span>Spring MVC Exception Handling<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>title</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>head</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h2</span><span class=\"token punctuation\">></span></span>Spring MVC Exception Handling<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h2</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h3</span><span class=\"token punctuation\">></span></span>$&#123;exception.exceptionMsg&#125;<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h3</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>html</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p>åˆ›å»º SpringException.java</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">SpringException</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">RuntimeException</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> exceptionMsg<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">SpringException</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> exceptionMsg<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>exceptionMsg <span class=\"token operator\">=</span> exceptionMsg<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">getExceptionMsg</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>exceptionMsg<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">setExceptionMsg</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> exceptionMsg<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>exceptionMsg <span class=\"token operator\">=</span> exceptionMsg<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>ä¿®æ”¹ hello-servlet.xml</p>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token prolog\">&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>beans</span> <span class=\"token attr-name\">xmlns</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.springframework.org/schema/beans<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>xsi</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.w3.org/2001/XMLSchema-instance<span class=\"token punctuation\">\"</span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>       <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>context</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.springframework.org/schema/context<span class=\"token punctuation\">\"</span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>       <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>mvc</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.springframework.org/schema/mvc<span class=\"token punctuation\">\"</span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>       <span class=\"token attr-name\"><span class=\"token namespace\">xsi:</span>schemaLocation</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>       http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>       http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">context:</span>component-scan</span> <span class=\"token attr-name\">base-package</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>com.xfc<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>bean</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>org.springframework.web.servlet.view.InternalResourceViewResolver<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>prefix<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/WEB-INF/jsp/<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>suffix<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>.jsp<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>bean</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token comment\">&lt;!-- æ˜ å°„é™æ€æ–‡ä»¶ --></span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">mvc:</span>resources</span> <span class=\"token attr-name\">mapping</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/pages/**<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">location</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/WEB-INF/pages/<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">mvc:</span>annotation-driven</span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token comment\">&lt;!-- å¼‚å¸¸å¤„ç† --></span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>bean</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>org.springframework.web.servlet.handler.SimpleMappingExceptionResolver<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>exceptionMappings<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>props</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>prop</span> <span class=\"token attr-name\">key</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>com.xfc.SpringException<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>ExceptionPage<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>prop</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>props</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>property</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>defaultErrorView<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>error<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>bean</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>beans</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p>ä¿®æ”¹ BookController.java</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>stereotype<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Controller</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>ui<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">ModelMap</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>web<span class=\"token punctuation\">.</span>bind<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">ExceptionHandler</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>web<span class=\"token punctuation\">.</span>bind<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">ModelAttribute</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>web<span class=\"token punctuation\">.</span>bind<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">RequestMapping</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>web<span class=\"token punctuation\">.</span>bind<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">RequestMethod</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>web<span class=\"token punctuation\">.</span>servlet<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">ModelAndView</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token annotation punctuation\">@Controller</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">BookController</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token annotation punctuation\">@RequestMapping</span><span class=\"token punctuation\">(</span>value <span class=\"token operator\">=</span> <span class=\"token string\">\"/book\"</span><span class=\"token punctuation\">,</span> method <span class=\"token operator\">=</span> <span class=\"token class-name\">RequestMethod</span><span class=\"token punctuation\">.</span>GET<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">ModelAndView</span> <span class=\"token function\">student</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ModelAndView</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"book\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"command\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Book</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token annotation punctuation\">@RequestMapping</span><span class=\"token punctuation\">(</span>value <span class=\"token operator\">=</span> <span class=\"token string\">\"/addBook\"</span><span class=\"token punctuation\">,</span> method <span class=\"token operator\">=</span> <span class=\"token class-name\">RequestMethod</span><span class=\"token punctuation\">.</span>POST<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token annotation punctuation\">@ExceptionHandler</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span><span class=\"token class-name\">SpringException</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">addStudent</span><span class=\"token punctuation\">(</span><span class=\"token annotation punctuation\">@ModelAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"SpringWeb\"</span><span class=\"token punctuation\">)</span> <span class=\"token class-name\">Book</span> book<span class=\"token punctuation\">,</span> <span class=\"token class-name\">ModelMap</span> model<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>book<span class=\"token punctuation\">.</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">length</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;</span> <span class=\"token number\">20</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>            <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">SpringException</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Given name is too short\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>            model<span class=\"token punctuation\">.</span><span class=\"token function\">addAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"name\"</span><span class=\"token punctuation\">,</span> book<span class=\"token punctuation\">.</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>book<span class=\"token punctuation\">.</span><span class=\"token function\">getCount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;</span> <span class=\"token number\">10</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>            <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">SpringException</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Given count is too low\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>            model<span class=\"token punctuation\">.</span><span class=\"token function\">addAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"count\"</span><span class=\"token punctuation\">,</span> book<span class=\"token punctuation\">.</span><span class=\"token function\">getCount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>        model<span class=\"token punctuation\">.</span><span class=\"token function\">addAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"id\"</span><span class=\"token punctuation\">,</span> book<span class=\"token punctuation\">.</span><span class=\"token function\">getId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token string\">\"result\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>å¯åŠ¨é¡¹ç›®å¹¶åœ¨æµè§ˆå™¨è®¿é—® <span class=\"exturl\" data-url=\"aHR0cDovL2xvY2FsaG9zdDo4MDgwL2Jvb2s=\">http://localhost:8080/book</span></p>\n<p><img data-src=\"https://img.xfc-exclave.com/2021/10/c68fd4a5d45a78f129c2a1f89f7de8d51633529168.png\" alt=\"biaodance\" /></p>\n<p>å¡«å†™è¡¨å•å¹¶ Submitï¼š</p>\n<p><img data-src=\"https://img.xfc-exclave.com/2021/10/db9b3eef24fef4ad2be597e830b631071633529171.png\" alt=\"exception_page\" /></p>\n<h4 id=\"spring-ä½¿ç”¨-log4j-è®°å½•æ—¥å¿—\"><a class=\"anchor\" href=\"#spring-ä½¿ç”¨-log4j-è®°å½•æ—¥å¿—\">#</a> Spring ä½¿ç”¨ Log4J è®°å½•æ—¥å¿—</h4>\n<p><span class=\"label danger\">â—ï¸TODO</span> å¾…å®Œå–„</p>\n<h3 id=\"å‚è€ƒ\"><a class=\"anchor\" href=\"#å‚è€ƒ\">#</a> å‚è€ƒ</h3>\n<ul>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cudzNjc2Nob29sLmNuL3drc3ByaW5n\">https://www.w3cschool.cn/wkspring</span></li>\n</ul>\n",
            "tags": [
                "è®¡ç®—æœºç§‘å­¦",
                "JAVAå­¦ä¹ è·¯çº¿",
                "è¿›é˜¶ç¯‡",
                "java",
                "Spring"
            ]
        },
        {
            "id": "https://www.chinmoku.cc/computer-science/java-learning-path/5-framework/docker-tutorial/",
            "url": "https://www.chinmoku.cc/computer-science/java-learning-path/5-framework/docker-tutorial/",
            "title": "ç»™ï¼Œä½ è¦çš„ Docker è¯¦ç»†æ•™ç¨‹",
            "date_published": "2021-08-10T13:40:36.000Z",
            "content_html": "<div class=\"note info\">\n<p>Docker æ˜¯ä¸€ä¸ªç”¨äºå¼€å‘ã€å‘å¸ƒå’Œè¿è¡Œåº”ç”¨ç¨‹åºçš„å¼€æ”¾å¹³å°ï¼Œå®ƒèƒ½å¤Ÿä½¿æ‚¨å°†å¼•ç”¨ç¨‹åºä¸åŸºç¡€è®¾æ–½åˆ†ç¦»å¼€æ¥ï¼Œä»¥å®ç°å¿«é€Ÿäº¤ä»˜ã€‚ä½¿ç”¨ Dockerï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ä¸ç®¡ç†æ‚¨çš„åº”ç”¨ç¨‹åºç›¸åŒçš„æ–¹å¼ç®¡ç†æ‚¨çš„åŸºç¡€è®¾æ–½ã€‚é€šè¿‡åˆ©ç”¨ Docker å¿«é€Ÿå‘å¸ƒã€æµ‹è¯•åŠéƒ¨ç½²ä»£ç çš„æ–¹æ³•ï¼Œæ‚¨å¯ä»¥æ˜¾è‘—åœ°å‡å°‘ç¼–å†™ä»£ç å’Œåœ¨ç”Ÿäº§ç¯å¢ƒä¸­è¿è¡Œä»£ç ä¹‹é—´çš„å»¶è¿Ÿã€‚</p>\n</div>\n<h3 id=\"docker-æ¦‚è¿°\"><a class=\"anchor\" href=\"#docker-æ¦‚è¿°\">#</a> Docker æ¦‚è¿°</h3>\n<h4 id=\"docker-å¹³å°\"><a class=\"anchor\" href=\"#docker-å¹³å°\">#</a> Docker å¹³å°</h4>\n<p>Docker æä¾›äº†åœ¨ä¸€ä¸ªè¢«ç§°ä¹‹ä¸º  <code>å®¹å™¨</code>  çš„æ¾æ•£éš”ç¦»çš„ç¯å¢ƒä¸­è¿›è¡Œæ‰“åŒ…å’Œè¿è¡Œç¨‹åºçš„èƒ½åŠ›ã€‚è¿™ç§éš”ç¦»æ€§å’Œå®‰å…¨æ€§ä½¿æ‚¨èƒ½å¤Ÿåœ¨åŒä¸€å°ç»™å®šçš„ä¸»æœºä¸ŠåŒæ—¶è¿è¡Œå¤šä¸ªå®¹å™¨ã€‚æ‰€æœ‰çš„å®¹å™¨éƒ½æ˜¯è½»é‡çº§çš„ï¼Œå¹¶ä¸”åŒ…å«äº†åº”ç”¨ç¨‹åºè¿è¡Œæ‰€éœ€è¦çš„ä¸€åˆ‡ï¼Œå› æ­¤æ‚¨ä¸éœ€è¦å†ä¾èµ–äºå½“å‰ä¸»æœºæ‰€å®‰è£…çš„å†…å®¹ã€‚</p>\n<h4 id=\"docker-å¯ä»¥åšä»€ä¹ˆ\"><a class=\"anchor\" href=\"#docker-å¯ä»¥åšä»€ä¹ˆ\">#</a> Docker å¯ä»¥åšä»€ä¹ˆ</h4>\n<ol>\n<li>\n<p>å¿«é€Ÿã€ä¸€è‡´çš„äº¤ä»˜åº”ç”¨ç¨‹åºã€‚</p>\n<p>Docker é€‚åˆæŒç»­é›†æˆå’ŒæŒç»­äº¤ä»˜ï¼ˆCI/CDï¼‰å·¥ä½œæµã€‚</p>\n<p><img data-src=\"https://img.xfc-exclave.com/2021/08/34056f83461b2667fefe304d915170211628335468.png\" alt=\"DevOpsèƒ½åŠ›ç¯\" /></p>\n<blockquote>\n<p>å…³äº  <code>CI/CD</code>  ï¼š<span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cucmVkaGF0LmNvbS96aC90b3BpY3MvZGV2b3BzL3doYXQtaXMtY2ktY2Q=\">https://www.redhat.com/zh/topics/devops/what-is-ci-cd</span></p>\n<p>å…³äº  <code>DevOps</code>  ï¼š<span class=\"exturl\" data-url=\"aHR0cHM6Ly9iYWlrZS5iYWlkdS5jb20vaXRlbS9kZXZvcHMvMjYxMzAyOQ==\">https://baike.baidu.com/item/devops/2613029</span></p>\n</blockquote>\n</li>\n<li>\n<p>å“åº”å¼éƒ¨ç½²å’Œæ‰©å±•ã€‚</p>\n<p>Docker åŸºäºå®¹å™¨çš„å¹³å°å…è®¸é«˜åº¦å¯ç§»æ¤çš„å·¥ä½œè´Ÿè½½ã€‚Docker å®¹å™¨å¯ä»¥åœ¨å¼€å‘äººå‘˜çš„æœ¬åœ°ç¬”è®°æœ¬ç”µè„‘ã€æ•°æ®ä¸­å¿ƒçš„ç‰©ç†æˆ–è™šæ‹Ÿæœºã€äº‘æä¾›å•†æˆ–æ··åˆç¯å¢ƒä¸­è¿è¡Œã€‚</p>\n<p>Docker çš„å¯ç§»æ¤æ€§å’Œè½»é‡çº§ç‰¹æ€§è¿˜ä½¿åŠ¨æ€ç®¡ç†å·¥ä½œè´Ÿè½½ã€æ ¹æ®ä¸šåŠ¡éœ€æ±‚å‡ ä¹å®æ—¶åœ°æ‰©å±•æˆ–æ‹†é™¤åº”ç”¨ç¨‹åºå’ŒæœåŠ¡å˜å¾—å®¹æ˜“ã€‚</p>\n</li>\n<li>\n<p>åœ¨ç›¸åŒçš„ç¡¬ä»¶ç¯å¢ƒä¸Šè¿è¡Œæ›´å¤šå·¥ä½œè´Ÿè½½ã€‚</p>\n<p>Docker éå¸¸é€‚åˆé«˜å¯†åº¦ç¯å¢ƒä»¥åŠéœ€è¦ä»¥æ›´å°‘èµ„æºå®Œæˆæ›´å¤šä»»åŠ¡çš„ä¸­å°å‹éƒ¨ç½²ã€‚</p>\n</li>\n</ol>\n<blockquote>\n<p>Docker ç†å¿µæ˜¯å°†åº”ç”¨åŠä¾èµ–åŒ…æ‰“åŒ…åˆ°ä¸€ä¸ªå¯ç§»æ¤çš„å®¹å™¨ä¸­ï¼Œå¯å‘å¸ƒåˆ°ä»»æ„ Linux å‘è¡Œç‰ˆ Docker å¼•æ“ä¸Šã€‚ä½¿ç”¨æ²™ç®±æœºåˆ¶è¿è¡Œç¨‹åºï¼Œç¨‹åºä¹‹é—´ç›¸äº’éš”ç¦»ã€‚</p>\n</blockquote>\n<h4 id=\"docker-ä½“ç³»ç»“æ„\"><a class=\"anchor\" href=\"#docker-ä½“ç³»ç»“æ„\">#</a> Docker ä½“ç³»ç»“æ„</h4>\n<p>Docker ä½¿ç”¨  <code>å®¢æˆ·ç«¯ - æœåŠ¡å™¨</code>  çš„æ¶æ„æ¨¡å¼ï¼Œ Docker å®¢æˆ·ç«¯ä¸ Docker å®ˆæŠ¤è¿›ç¨‹è¿›è¡Œå¯¹è¯ï¼Œåè€…è´Ÿè´£æ„å»ºã€è¿è¡Œå’Œåˆ†å‘ Docker å®¹å™¨çš„ç¹é‡å·¥ä½œã€‚å®ƒä»¬æ—¢å¯ä»¥åœ¨åŒä¸€ç³»ç»Ÿä¸Šè¿è¡Œï¼Œä¹Ÿå¯ä»¥è¿œç¨‹å»ºç«‹è¿æ¥ã€‚å®¢æˆ·ç«¯å’Œå®ˆæŠ¤è¿›ç¨‹ä¹‹é—´ä½¿ç”¨  <code>REST API</code>  ã€ UNIX å¥—æ¥å­—æˆ–ç½‘ç»œæ¥å£è¿›è¡Œé€šä¿¡ã€‚ Docker ä½“ç³»ç»“æ„å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>\n<p><img data-src=\"https://img.xfc-exclave.com/2021/08/b595b80b1dc39db2af4ffd6f0e8e8f551628335478.svg+xml\" alt=\"Dockerä½“ç³»ç»“æ„ç¤ºæ„å›¾\" /></p>\n<h5 id=\"docker-å®ˆæŠ¤è¿›ç¨‹\"><a class=\"anchor\" href=\"#docker-å®ˆæŠ¤è¿›ç¨‹\">#</a> Docker å®ˆæŠ¤è¿›ç¨‹</h5>\n<p>Docker å®ˆæŠ¤è¿›ç¨‹ï¼ˆ  <code>dockerd</code>  ï¼‰ä¾¦å¬ Docker API çš„è¯·æ±‚å¹¶ç®¡ç† Docker å¯¹è±¡ï¼Œå¦‚é•œåƒã€å®¹å™¨ã€ç½‘ç»œå’Œå·ã€‚å®ˆæŠ¤è¿›ç¨‹è¿˜å¯ä»¥ä¸å…¶ä»–å®ˆæŠ¤è¿›ç¨‹è¿›è¡Œé€šä¿¡ä»¥ç®¡ç† Docker æœåŠ¡ã€‚</p>\n<h5 id=\"docker-å®¢æˆ·ç«¯\"><a class=\"anchor\" href=\"#docker-å®¢æˆ·ç«¯\">#</a> Docker å®¢æˆ·ç«¯</h5>\n<p>Docker å®¢æˆ·ç«¯ (  <code>docker</code>  ) æ˜¯è®¸å¤š Docker ç”¨æˆ·ä¸ Docker è¿›è¡Œäº¤äº’çš„ä¸»è¦æ–¹å¼ã€‚å½“ç”¨æˆ·å‘èµ·  <code>docker run</code>  ç­‰å‘½ä»¤æ—¶ï¼Œå®¢æˆ·ç«¯ä¼šä½¿ç”¨  <code>Docker API</code>  å°†è¿™äº›å‘½ä»¤å‘é€åˆ° dockerd å¹¶æ‰§è¡Œã€‚ä¸€ä¸ª Docker å®¢æˆ·ç«¯å¯ä»¥ä¸å¤šä¸ª dockerd è¿›è¡Œé€šä¿¡ã€‚</p>\n<h5 id=\"docker-æ³¨å†Œè¡¨\"><a class=\"anchor\" href=\"#docker-æ³¨å†Œè¡¨\">#</a> Docker æ³¨å†Œè¡¨</h5>\n<p>Docker Hub æ˜¯ Docker é•œåƒçš„å…¬å…±æ³¨å†Œä¸­å¿ƒï¼Œ Docker é»˜è®¤é…ç½®æ˜¯ä» Docker Hub ä¸ŠæŸ¥æ‰¾é•œåƒï¼Œæ‚¨ä¹Ÿå¯ä»¥æ ¹æ®éœ€è¦é…ç½®è‡ªå·±çš„ç§æœ‰æ³¨å†Œè¡¨ã€‚</p>\n<p>å½“ä½¿ç”¨  <code>docker pull</code>  æˆ–  <code>docker run</code>  å‘½ä»¤æ—¶ï¼Œæ‚¨æ‰€éœ€è¦çš„é•œåƒå°†ä»é…ç½®çš„æ³¨å†Œè¡¨ä¸­æå–ã€‚å½“ä½¿ç”¨  <code>dcoker push</code>  å‘½ä»¤æ—¶ï¼Œæ‚¨çš„é•œåƒä¼šè¢«æ¨é€åˆ°æ‚¨é…ç½®çš„æ³¨å†Œè¡¨ä¸­ã€‚</p>\n<blockquote>\n<p>Docker æ³¨å†Œè¡¨å·¥ä½œåŸç†ä¸ Git ç›¸ä¼¼ã€‚</p>\n</blockquote>\n<h5 id=\"docker-å¯¹è±¡\"><a class=\"anchor\" href=\"#docker-å¯¹è±¡\">#</a> Docker å¯¹è±¡</h5>\n<ol>\n<li>\n<p>é•œåƒï¼ˆ <code>Image</code> ï¼‰</p>\n<p>é•œåƒæ˜¯ç”¨äºåˆ›å»º Docker å®¹å™¨æŒ‡ä»¤çš„ <strong>åªè¯»æ¨¡æ¿</strong> ã€‚é€šå¸¸ï¼Œä¸€ä¸ªé•œåƒä¼šåŸºäºå¦ä¸€ä¸ªé•œåƒï¼Œä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥æ„å»ºä¸€ä¸ªåŸºäº ubuntu é•œåƒçš„é•œåƒï¼Œå¹¶å®‰è£… Apache Web æœåŠ¡å™¨å’Œæ‚¨çš„å¼•ç”¨ç¨‹åºï¼Œä»¥åŠæ‚¨çš„åº”ç”¨ç¨‹åºæ‰€éœ€è¦çš„ç›¸å…³ç¯å¢ƒå’Œé…ç½®è¯¦ç»†ä¿¡æ¯ã€‚</p>\n<p>åœ¨æ„å»ºè‡ªå·±çš„é•œåƒæ—¶ï¼Œæ‚¨éœ€è¦ä½¿ç”¨ç®€å•çš„è¯­æ³•åˆ›å»ºä¸€ä¸ª  <code>Dockerfile</code>  ï¼Œç”¨äºå®šä¹‰åˆ›å»ºå’Œè¿è¡Œé•œåƒæ‰€éœ€è¦çš„æ­¥éª¤ã€‚Dockerfile ä¸­çš„æ¯æ¡æŒ‡ä»¤éƒ½ä¼šåœ¨é•œåƒä¸­åˆ›å»ºä¸€ä¸ªå±‚ï¼ˆ <code>layer</code> ï¼‰ã€‚å½“å¯¹é•œåƒè¿›è¡Œé‡å»ºæ—¶ï¼Œåªä¼šé‡å»ºè¢«æ›´æ”¹çš„å±‚ï¼Œè€Œéæ‰€æœ‰ã€‚è¿™ç§è™šæ‹ŸåŒ–æŠ€æœ¯åŠå…¶æ¨¡å¼ï¼Œä½¿å¾—é•œåƒè½»é‡è€Œå°å·§ä¸”æ˜“äºéƒ¨ç½²ã€‚</p>\n</li>\n<li>\n<p>å®¹å™¨ï¼ˆ <code>Container</code> ï¼‰</p>\n<p>å®¹å™¨æ˜¯é•œåƒçš„å¯è¿è¡Œå®ä¾‹ã€‚æ‚¨å¯ä»¥ä½¿ç”¨ Docker API æˆ–  <code>CLI</code>  è¿›è¡Œåˆ›å»ºã€å¯åŠ¨ã€åœæ­¢ã€ç§»åŠ¨æˆ–åˆ é™¤å®¹å™¨ã€‚ä¹Ÿå¯ä»¥å°†å®¹å™¨è¿æ¥åˆ°ä¸€ä¸ªæˆ–å¤šä¸ªç½‘ç»œï¼Œä»¥ä¸ºå…¶é™„åŠ å­˜å‚¨ï¼Œç”šè‡³å¯ä»¥æ ¹æ®å½“å‰çš„çŠ¶æ€åˆ›å»ºæ–°çš„é•œåƒã€‚</p>\n<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œä¸€ä¸ªå®¹å™¨ä¸å…¶ä»–å®¹å™¨ï¼ŒåŠå…¶è‡ªèº«æ‰€åœ¨çš„ä¸»æœºæ˜¯ç›¸å¯¹éš”ç¦»çš„ã€‚</p>\n<p>å‘½ä»¤ç¤ºä¾‹ï¼šdocker run</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"><span>å‘½ä»¤è¡Œæç¤ºç¬¦</span></figcaption><table><tr><td data-num=\"1\"></td><td data-command=\"\"></td><td><pre><span class=\"token comment\"># ä½¿ç”¨ docker è¿è¡Œä¸€ä¸ª ubuntu å®¹å™¨ï¼Œä»¥äº¤äº’çš„æ–¹å¼æ·»åŠ åˆ°æœ¬åœ°å‘½ä»¤è¡Œä¼šè¯ï¼Œå¹¶è¿è¡Œ /bin/bash</span></pre></td></tr><tr><td data-num=\"2\"></td><td data-command=\"[root@xxx ~] $\"></td><td><pre>docker run -i -t ubuntu /bin/bash</pre></td></tr></table></figure><p>è¿è¡Œè¯¥å‘½ä»¤æ—¶ï¼Œå°†å‘ç”Ÿä»¥ä¸‹æƒ…å†µï¼š</p>\n<ol>\n<li>\n<p>å¦‚æœå½“å‰ä¸»æœºæœ¬åœ°æ²¡æœ‰è¯¥é•œåƒï¼Œ Docker ä¼šä»é…ç½®çš„æ³¨å†Œè¡¨ä¸­è¿›è¡Œæå–ï¼Œè¿™ä¸€æ­¥éª¤ç­‰åŒäº  <code>docker pull ubuntu</code>  ã€‚</p>\n</li>\n<li>\n<p>Docker ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å®¹å™¨ï¼Œè¿™ä¸€æ­¥éª¤ç­‰åŒäº  <code>docker container create</code>  ã€‚</p>\n</li>\n<li>\n<p>Docker ä¸ºå®¹å™¨åˆ†é…ä¸€ä¸ªè¯»å†™æ–‡ä»¶ç³»ç»Ÿï¼Œä½œä¸ºå®ƒçš„æœ€åä¸€å±‚ã€‚è¿™å…è®¸æ­£åœ¨è¿è¡Œçš„å®¹å™¨åœ¨å…¶æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿä¸­åˆ›å»ºæˆ–ä¿®æ”¹æ–‡ä»¶å’Œç›®å½•ã€‚</p>\n</li>\n<li>\n<p>Docker åˆ›å»ºä¸€ä¸ªç½‘ç»œæ¥å£æ¥å°†å®¹å™¨è¿æ¥åˆ°é»˜è®¤ç½‘ç»œï¼Œå…¶ä¸­åŒ…æ‹¬ä¸ºå®¹å™¨åˆ†é… IP åœ°å€ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå®¹å™¨å¯ä»¥ä½¿ç”¨ä¸»æœºçš„ç½‘ç»œè¿æ¥è¿æ¥åˆ°å¤–éƒ¨ç½‘ç»œã€‚</p>\n</li>\n<li>\n<p>Docker å¯åŠ¨å®¹å™¨å¹¶æ‰§è¡Œ  <code>/bin/bash</code>  ã€‚ç”±äºå®¹å™¨ä»¥äº¤äº’æ–¹å¼è¿è¡Œå¹¶é™„åŠ åˆ°æ‚¨çš„ç»ˆç«¯ï¼ˆç”±äº  <code>-i</code>  å’Œ  <code>-t</code>  æ ‡å¿—ï¼‰ï¼Œæ‚¨å¯ä»¥åœ¨è¾“å‡ºè®°å½•åˆ°ç»ˆç«¯æ—¶ä½¿ç”¨é”®ç›˜æä¾›è¾“å…¥ã€‚</p>\n<blockquote>\n<p>docker ä¸­å¿…é¡»ä¿æŒè‡³å°‘ä¸€ä¸ªè¿›ç¨‹è¿è¡Œï¼Œå¦åˆ™å®¹å™¨ä¼šè‡ªåŠ¨é€€å‡ºã€‚è¿™é‡Œåœ¨å¯åŠ¨æ—¶æŒ‡å®šå¯åŠ¨äº†  <code>/bin/bash</code>  è¿›ç¨‹ã€‚</p>\n</blockquote>\n</li>\n<li>\n<p>å½“è¾“å…¥  <code>exit</code>  ä»¥ç»ˆæ­¢  <code>/bin/bash</code>  å‘½ä»¤æ—¶ï¼Œå®¹å™¨ä¼šåœæ­¢ï¼Œä½†ä¸ä¼šè¢«ç§»é™¤ã€‚æ‚¨å¯ä»¥é‡æ–°å¯åŠ¨æˆ–åˆ é™¤å®ƒã€‚</p>\n</li>\n</ol>\n</li>\n<li>\n<p>ä»“åº“ï¼ˆ <code>Repository</code> ï¼‰</p>\n<p>Docker ä»“åº“ä¸ä»£ç ä»“åº“ç±»ä¼¼ï¼Œæ‰€ä¸åŒçš„æ˜¯å®ƒç”¨äºé›†ä¸­å­˜æ”¾é•œåƒã€‚Docker ä»“åº“å­˜æ”¾äº Docker æ³¨å†Œè¡¨ä¸­ï¼Œé€šå¸¸æƒ…å†µä¸‹ï¼Œæ³¨å†Œè¡¨ä¸­ä¼šæœ‰å¤šä¸ªä»“åº“ï¼Œè€Œä»“åº“ä¸­åˆ™å­˜æ”¾ä¸€ç±»é•œåƒï¼Œæ¯ä¸ªé•œåƒåˆ©ç”¨ tag è¿›è¡ŒåŒºåˆ†ï¼Œæ¯”å¦‚ Ubuntu ä»“åº“ä¸­å­˜æ”¾æœ‰å¤šä¸ªç‰ˆæœ¬çš„ Ubuntu é•œåƒã€‚</p>\n</li>\n</ol>\n<h4 id=\"åº•å±‚æŠ€æœ¯æ”¯æŒ\"><a class=\"anchor\" href=\"#åº•å±‚æŠ€æœ¯æ”¯æŒ\">#</a> åº•å±‚æŠ€æœ¯æ”¯æŒ</h4>\n<p>Docker æ˜¯ä½¿ç”¨  <code>Golang</code>  ç¼–å†™çš„ï¼Œå¹¶åˆ©ç”¨ Liunx å†…æ ¸çš„å‡ ä¸ªç‰¹å¾æ¥æä¾›å…¶åŠŸèƒ½ï¼Œ Docker ä½¿ç”¨ä¸€ç§è¢«ç§°ä¸º  <code>namespaces</code>  çš„æŠ€æœ¯æ¥æä¾›éš”ç¦»çš„å·¥ä½œç©ºé—´ï¼Œè¿™ç§å·¥ä½œç©ºé—´å³è¢«ç§°ä¸ºå®¹å™¨ã€‚å½“è¿è¡Œä¸€ä¸ªå®¹å™¨æ—¶ï¼Œ Docker ä¼šä¸ºè¯¥å®¹å™¨åˆ›å»ºä¸€ç»„å‘½åç©ºé—´ã€‚</p>\n<p>è¿™äº›å‘½åç©ºé—´æä¾›äº†ä¸€å±‚éš”ç¦»ã€‚å®¹å™¨çš„æ¯ä¸ªæ–¹é¢éƒ½åœ¨å•ç‹¬çš„å‘½åç©ºé—´ä¸­è¿è¡Œï¼Œå¹¶ä¸”å…¶è®¿é—®æƒé™ä»…é™äºè¯¥å‘½åç©ºé—´ã€‚</p>\n<h3 id=\"docker-å®‰è£…\"><a class=\"anchor\" href=\"#docker-å®‰è£…\">#</a> Docker å®‰è£…</h3>\n<blockquote>\n<p>è­¦å‘Šï¼šåˆ‡å‹¿åœ¨æ²¡æœ‰é…ç½® Docker YUM æºçš„æƒ…å†µä¸‹ç›´æ¥ä½¿ç”¨ yum å‘½ä»¤å®‰è£… Docker ã€‚</p>\n</blockquote>\n<h4 id=\"ç³»ç»Ÿè¦æ±‚\"><a class=\"anchor\" href=\"#ç³»ç»Ÿè¦æ±‚\">#</a> ç³»ç»Ÿè¦æ±‚</h4>\n<p>Docker æ”¯æŒ 64 ä½ç‰ˆæœ¬ CentOS 7/8ï¼Œå¹¶ä¸”è¦æ±‚å†…æ ¸ç‰ˆæœ¬ä¸ä½äº 3.10ã€‚ CentOS 7 æ»¡è¶³æœ€ä½å†…æ ¸çš„è¦æ±‚ï¼Œä½†ç”±äºå†…æ ¸ç‰ˆæœ¬æ¯”è¾ƒä½ï¼Œéƒ¨åˆ†åŠŸèƒ½ï¼ˆå¦‚  <code>overlay2</code>  å­˜å‚¨å±‚é©±åŠ¨ï¼‰æ— æ³•ä½¿ç”¨ï¼Œå¹¶ä¸”éƒ¨åˆ†åŠŸèƒ½å¯èƒ½ä¸å¤ªç¨³å®šã€‚</p>\n<blockquote>\n<p>æŸ¥çœ‹ CentOS ç‰ˆæœ¬ï¼š  <code>cat /etc/redhat-release</code>  æˆ–  <code>cat /etc/os-release</code></p>\n</blockquote>\n<h4 id=\"å¸è½½æ—§ç‰ˆæœ¬\"><a class=\"anchor\" href=\"#å¸è½½æ—§ç‰ˆæœ¬\">#</a> å¸è½½æ—§ç‰ˆæœ¬</h4>\n<p>æ—§ç‰ˆæœ¬çš„ Docker ç§°ä¸º docker æˆ–è€…  <code>docker-engine</code> ï¼Œå¦‚æœå®‰è£…äº†è¿™äº›ï¼Œè¯·å¸è½½å®ƒä»¬ä»¥åŠç›¸å…³çš„ä¾èµ–é¡¹ï¼š</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"><span>å‘½ä»¤è¡Œæç¤ºç¬¦</span></figcaption><table><tr><td data-num=\"1\"></td><td data-command=\"[root@xxx ~] $\"></td><td><pre><span class=\"token function\">sudo</span> yum remove docker <span class=\"token punctuation\">\\</span></pre></td></tr><tr><td data-num=\"2\"></td><td data-command=\"\"></td><td><pre>            docker-client <span class=\"token punctuation\">\\</span></pre></td></tr><tr><td data-num=\"3\"></td><td data-command=\"\"></td><td><pre>            docker-client-latest <span class=\"token punctuation\">\\</span></pre></td></tr><tr><td data-num=\"4\"></td><td data-command=\"\"></td><td><pre>            docker-common <span class=\"token punctuation\">\\</span></pre></td></tr><tr><td data-num=\"5\"></td><td data-command=\"\"></td><td><pre>            docker-latest <span class=\"token punctuation\">\\</span></pre></td></tr><tr><td data-num=\"6\"></td><td data-command=\"\"></td><td><pre>            docker-latest-logrotate <span class=\"token punctuation\">\\</span></pre></td></tr><tr><td data-num=\"7\"></td><td data-command=\"\"></td><td><pre>            docker-logrotate <span class=\"token punctuation\">\\</span></pre></td></tr><tr><td data-num=\"8\"></td><td data-command=\"\"></td><td><pre>            docker-engine</pre></td></tr></table></figure><h4 id=\"ä½¿ç”¨-yum-å®‰è£…\"><a class=\"anchor\" href=\"#ä½¿ç”¨-yum-å®‰è£…\">#</a> ä½¿ç”¨ yum å®‰è£…</h4>\n<p>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£…ä¾èµ–åŒ…ï¼š</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"><span>å‘½ä»¤è¡Œæç¤ºç¬¦</span></figcaption><table><tr><td data-num=\"1\"></td><td data-command=\"[root@xxx ~] $\"></td><td><pre><span class=\"token function\">sudo</span> yum <span class=\"token function\">install</span> -y yum-utils</pre></td></tr></table></figure><p>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤è®¾ç½®  <code>yum</code>  è½¯ä»¶æºï¼š</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"><span>å‘½ä»¤è¡Œæç¤ºç¬¦</span></figcaption><table><tr><td data-num=\"1\"></td><td data-command=\"\"></td><td><pre><span class=\"token comment\"># é˜¿é‡Œé•œåƒæºï¼ˆå›½å†…æ¨èï¼‰</span></pre></td></tr><tr><td data-num=\"2\"></td><td data-command=\"[root@xxx ~] $\"></td><td><pre><span class=\"token function\">sudo</span> yum-config-manager --add-repo https://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo</pre></td></tr><tr><td data-num=\"3\"></td><td data-command=\"\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td data-command=\"\"></td><td><pre><span class=\"token comment\"># Docker å®˜æ–¹é•œåƒæº</span></pre></td></tr><tr><td data-num=\"5\"></td><td data-command=\"\"></td><td><pre><span class=\"token comment\"># sudo yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo</span></pre></td></tr><tr><td data-num=\"6\"></td><td data-command=\"\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td data-command=\"\"></td><td><pre><span class=\"token comment\"># æµ‹è¯•ç‰ˆæœ¬ Docker</span></pre></td></tr><tr><td data-num=\"8\"></td><td data-command=\"\"></td><td><pre><span class=\"token comment\"># sudo yum-config-manager --enable docker-ce-test</span></pre></td></tr></table></figure><h4 id=\"å®‰è£…-docker\"><a class=\"anchor\" href=\"#å®‰è£…-docker\">#</a> å®‰è£… Docker</h4>\n<p>æ›´æ–°  <code>yum</code>  è½¯ä»¶æºç¼“å­˜ï¼Œå¹¶å®‰è£…  <code>docker-ce</code>  ã€‚</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"><span>å‘½ä»¤è¡Œæç¤ºç¬¦</span></figcaption><table><tr><td data-num=\"1\"></td><td data-command=\"\"></td><td><pre><span class=\"token comment\"># æ›´æ–° yum è½¯ä»¶åŒ…ç´¢å¼•</span></pre></td></tr><tr><td data-num=\"2\"></td><td data-command=\"[root@xxx ~] $\"></td><td><pre>yum makecache fast</pre></td></tr><tr><td data-num=\"3\"></td><td data-command=\"\"></td><td><pre><span class=\"token comment\"># docker-ce æŒ‡çš„æ˜¯ç¤¾åŒºç‰ˆ</span></pre></td></tr><tr><td data-num=\"4\"></td><td data-command=\"[root@xxx ~] $\"></td><td><pre><span class=\"token function\">sudo</span> yum <span class=\"token function\">install</span> docker-ce docker-ce-cli containerd.io</pre></td></tr></table></figure><blockquote>\n<p>æ³¨ï¼šä½¿ç”¨é˜¿é‡Œäº‘æœåŠ¡å™¨çš„åœ¨è¿™é‡Œå¯èƒ½ä¼šæœ‰äº›å‘ã€‚</p>\n</blockquote>\n<h4 id=\"å¯åŠ¨-docker\"><a class=\"anchor\" href=\"#å¯åŠ¨-docker\">#</a> å¯åŠ¨ Docker</h4>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"><span>å‘½ä»¤è¡Œæç¤ºç¬¦</span></figcaption><table><tr><td data-num=\"1\"></td><td data-command=\"\"></td><td><pre><span class=\"token comment\"># è®¾ç½® docker å¼€æœºå¯åŠ¨</span></pre></td></tr><tr><td data-num=\"2\"></td><td data-command=\"[root@xxx ~] $\"></td><td><pre><span class=\"token function\">sudo</span> systemctl <span class=\"token builtin class-name\">enable</span> docker</pre></td></tr><tr><td data-num=\"3\"></td><td data-command=\"[root@xxx ~] $\"></td><td><pre><span class=\"token function\">sudo</span> systemctl <span class=\"token builtin class-name\">enable</span> containerd</pre></td></tr><tr><td data-num=\"4\"></td><td data-command=\"\"></td><td><pre><span class=\"token comment\"># å¯åŠ¨ docker</span></pre></td></tr><tr><td data-num=\"5\"></td><td data-command=\"[root@xxx ~] $\"></td><td><pre><span class=\"token function\">sudo</span> systemctl start docker</pre></td></tr></table></figure><p>å¦‚éœ€ç¦ç”¨å¼€æœºå¯åŠ¨</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"><span>å‘½ä»¤è¡Œæç¤ºç¬¦</span></figcaption><table><tr><td data-num=\"1\"></td><td data-command=\"[root@xxx ~] $\"></td><td><pre><span class=\"token function\">sudo</span> systemctl disable docker</pre></td></tr><tr><td data-num=\"2\"></td><td data-command=\"[root@xxx ~] $\"></td><td><pre><span class=\"token function\">sudo</span> systemctl disable containerd</pre></td></tr></table></figure><h4 id=\"å»ºç«‹-docker-ç”¨æˆ·ç»„\"><a class=\"anchor\" href=\"#å»ºç«‹-docker-ç”¨æˆ·ç»„\">#</a> å»ºç«‹ Docker ç”¨æˆ·ç»„</h4>\n<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œ  <code>docker</code>  å‘½ä»¤ä¼šä½¿ç”¨  <code>Unix</code>  å¥—æ¥å­—ä¸ Docker å¼•æ“é€šè®¯ã€‚è€Œåªæœ‰  <code>root</code>  ç”¨æˆ·å’Œ  <code>docker</code>  ç»„çš„ç”¨æˆ·æ‰å¯ä»¥è®¿é—® Docker å¼•æ“çš„ Unix socket ã€‚å‡ºäºå®‰å…¨è€ƒè™‘ï¼Œä¸€èˆ¬ Linux ç³»ç»Ÿä¸Šä¸ä¼šç›´æ¥ä½¿ç”¨  <code>root</code>  ç”¨æˆ·ã€‚å› æ­¤ï¼Œæ›´å¥½åœ°åšæ³•æ˜¯å°†éœ€è¦ä½¿ç”¨  <code>docker</code>  çš„ç”¨æˆ·åŠ å…¥  <code>docker</code>  ç”¨æˆ·ç»„ã€‚</p>\n<p>å»ºç«‹  <code>docker</code>  ç»„ï¼š</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"><span>å‘½ä»¤è¡Œæç¤ºç¬¦</span></figcaption><table><tr><td data-num=\"1\"></td><td data-command=\"[root@xxx ~] $\"></td><td><pre><span class=\"token function\">sudo</span> <span class=\"token function\">groupadd</span> docker</pre></td></tr></table></figure><p>å°†å½“å‰ç”¨æˆ·åŠ å…¥  <code>docker</code>  ç»„ï¼š</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"><span>å‘½ä»¤è¡Œæç¤ºç¬¦</span></figcaption><table><tr><td data-num=\"1\"></td><td data-command=\"[root@xxx ~] $\"></td><td><pre><span class=\"token function\">sudo</span> <span class=\"token function\">usermod</span> -aG docker <span class=\"token environment constant\">$USER</span></pre></td></tr></table></figure><h4 id=\"æµ‹è¯•-docker-å®‰è£…\"><a class=\"anchor\" href=\"#æµ‹è¯•-docker-å®‰è£…\">#</a> æµ‹è¯• Docker å®‰è£…</h4>\n<ol>\n<li>\n<p>å¯åŠ¨æœåŠ¡</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"><span>å‘½ä»¤è¡Œæç¤ºç¬¦</span></figcaption><table><tr><td data-num=\"1\"></td><td data-command=\"[root@xxx ~] $\"></td><td><pre><span class=\"token function\">service</span> docker start</pre></td></tr></table></figure></li>\n<li>\n<p>æŸ¥çœ‹ docker ç‰ˆæœ¬</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"><span>å‘½ä»¤è¡Œæç¤ºç¬¦</span></figcaption><table><tr><td data-num=\"1\"></td><td data-command=\"[root@xxx ~] $\"></td><td><pre>docker version</pre></td></tr></table></figure></li>\n<li>\n<p>æ‹‰å–æµ‹è¯•é•œåƒ</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"><span>å‘½ä»¤è¡Œæç¤ºç¬¦</span></figcaption><table><tr><td data-num=\"1\"></td><td data-command=\"[root@xxx ~] $\"></td><td><pre>docker run --rm hello-world <span class=\"token comment\"># --rm å¯åŠ¨æˆåŠŸåå°±åˆ æ‰</span></pre></td></tr><tr><td data-num=\"2\"></td><td data-command=\"\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td data-command=\"\"></td><td><pre>Unable to <span class=\"token function\">find</span> image <span class=\"token string\">'hello-world:latest'</span> locally</pre></td></tr><tr><td data-num=\"4\"></td><td data-command=\"\"></td><td><pre>latest: Pulling from library/hello-world</pre></td></tr><tr><td data-num=\"5\"></td><td data-command=\"\"></td><td><pre>b8dfde127a29: Pull complete </pre></td></tr><tr><td data-num=\"6\"></td><td data-command=\"\"></td><td><pre>Digest: sha256:df5f5184104426b65967e016ff2ac0bfcd44ad7899ca3bbcf8e44e4461491a9e</pre></td></tr><tr><td data-num=\"7\"></td><td data-command=\"\"></td><td><pre>Status: Downloaded newer image <span class=\"token keyword\">for</span> hello-world:latest</pre></td></tr><tr><td data-num=\"8\"></td><td data-command=\"\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td data-command=\"\"></td><td><pre>Hello from Docker<span class=\"token operator\">!</span></pre></td></tr><tr><td data-num=\"10\"></td><td data-command=\"\"></td><td><pre>This message shows that your installation appears to be working correctly.</pre></td></tr><tr><td data-num=\"11\"></td><td data-command=\"\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td data-command=\"\"></td><td><pre>To generate this message, Docker took the following steps:</pre></td></tr><tr><td data-num=\"13\"></td><td data-command=\"\"></td><td><pre> <span class=\"token number\">1</span>. The Docker client contacted the Docker daemon.</pre></td></tr><tr><td data-num=\"14\"></td><td data-command=\"\"></td><td><pre> <span class=\"token number\">2</span>. The Docker daemon pulled the <span class=\"token string\">\"hello-world\"</span> image from the Docker Hub.</pre></td></tr><tr><td data-num=\"15\"></td><td data-command=\"\"></td><td><pre>    <span class=\"token punctuation\">(</span>amd64<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"16\"></td><td data-command=\"\"></td><td><pre> <span class=\"token number\">3</span>. The Docker daemon created a new container from that image <span class=\"token function\">which</span> runs the</pre></td></tr><tr><td data-num=\"17\"></td><td data-command=\"\"></td><td><pre>    executable that produces the output you are currently reading.</pre></td></tr><tr><td data-num=\"18\"></td><td data-command=\"\"></td><td><pre> <span class=\"token number\">4</span>. The Docker daemon streamed that output to the Docker client, <span class=\"token function\">which</span> sent it</pre></td></tr><tr><td data-num=\"19\"></td><td data-command=\"\"></td><td><pre>    to your terminal.</pre></td></tr><tr><td data-num=\"20\"></td><td data-command=\"\"></td><td><pre></pre></td></tr><tr><td data-num=\"21\"></td><td data-command=\"\"></td><td><pre>To try something <span class=\"token function\">more</span> ambitious, you can run an Ubuntu container with:</pre></td></tr><tr><td data-num=\"22\"></td><td data-command=\"\"></td><td><pre> $ docker run -it ubuntu <span class=\"token function\">bash</span></pre></td></tr><tr><td data-num=\"23\"></td><td data-command=\"\"></td><td><pre></pre></td></tr><tr><td data-num=\"24\"></td><td data-command=\"\"></td><td><pre>Share images, automate workflows, and <span class=\"token function\">more</span> with a <span class=\"token function\">free</span> Docker ID:</pre></td></tr><tr><td data-num=\"25\"></td><td data-command=\"\"></td><td><pre> https://hub.docker.com/</pre></td></tr><tr><td data-num=\"26\"></td><td data-command=\"\"></td><td><pre></pre></td></tr><tr><td data-num=\"27\"></td><td data-command=\"\"></td><td><pre>For <span class=\"token function\">more</span> examples and ideas, visit:</pre></td></tr><tr><td data-num=\"28\"></td><td data-command=\"\"></td><td><pre> https://docs.docker.com/get-started/</pre></td></tr></table></figure><p>å¦‚æœæ­£å¸¸è¾“å‡ºå¦‚ä¸Šä¿¡æ¯ï¼Œåˆ™è¡¨ç¤º docker å·²å®‰è£…æˆåŠŸã€‚</p>\n<blockquote>\n<p>ä½¿ç”¨ docker å‘½ä»¤è·å–é•œåƒæ—¶ï¼Œé»˜è®¤ä¼šå…ˆä»æœ¬åœ°è¿›è¡ŒæŸ¥æ‰¾ï¼Œå¦‚æœæœ¬åœ°ä¸å­˜åœ¨ï¼Œåˆ™ä¼šä»é…ç½®çš„é•œåƒæºä¸­ä¸‹è½½ã€‚</p>\n</blockquote>\n</li>\n<li>\n<p>æŸ¥çœ‹æœ¬åœ°é•œåƒ</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"><span>å‘½ä»¤è¡Œæç¤ºç¬¦</span></figcaption><table><tr><td data-num=\"1\"></td><td data-command=\"[root@xxx ~] $\"></td><td><pre>docker images</pre></td></tr><tr><td data-num=\"2\"></td><td data-command=\"\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td data-command=\"\"></td><td><pre>REPOSITORY    TAG       IMAGE ID       CREATED        SIZE</pre></td></tr><tr><td data-num=\"4\"></td><td data-command=\"\"></td><td><pre>hello-world   latest    d1165f221234   <span class=\"token number\">5</span> months ago   <span class=\"token number\">13</span>.3kB</pre></td></tr></table></figure></li>\n</ol>\n<h4 id=\"é…ç½®é•œåƒåŠ é€Ÿ\"><a class=\"anchor\" href=\"#é…ç½®é•œåƒåŠ é€Ÿ\">#</a> é…ç½®é•œåƒåŠ é€Ÿ</h4>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"><span>å‘½ä»¤è¡Œæç¤ºç¬¦</span></figcaption><table><tr><td data-num=\"1\"></td><td data-command=\"\"></td><td><pre><span class=\"token comment\"># åˆ›å»ºå¹¶æ‰“å¼€ daemon.json æ–‡ä»¶</span></pre></td></tr><tr><td data-num=\"2\"></td><td data-command=\"[root@xxx ~] $\"></td><td><pre><span class=\"token function\">vi</span> /etc/docker/daemon.json</pre></td></tr><tr><td data-num=\"3\"></td><td data-command=\"\"></td><td><pre><span class=\"token comment\"># å†™å…¥å†…å®¹</span></pre></td></tr><tr><td data-num=\"4\"></td><td data-command=\"\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td data-command=\"\"></td><td><pre>  <span class=\"token string\">\"registry-mirrors\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"æ‚¨çš„é•œåƒåœ°å€\"</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"6\"></td><td data-command=\"\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"7\"></td><td data-command=\"\"></td><td><pre><span class=\"token comment\"># ä¿å­˜é€€å‡º</span></pre></td></tr><tr><td data-num=\"8\"></td><td data-command=\"\"></td><td><pre><span class=\"token comment\"># é‡å¯</span></pre></td></tr><tr><td data-num=\"9\"></td><td data-command=\"[root@xxx ~] $\"></td><td><pre><span class=\"token function\">sudo</span> systemctl daemon-reload</pre></td></tr><tr><td data-num=\"10\"></td><td data-command=\"\"></td><td><pre><span class=\"token comment\"># é‡å¯ docker</span></pre></td></tr><tr><td data-num=\"11\"></td><td data-command=\"[root@xxx ~] $\"></td><td><pre><span class=\"token function\">sudo</span> systemctl restart docker</pre></td></tr></table></figure><p>å¦‚ä½•è·å–è‡ªå·±çš„é•œåƒåœ°å€ï¼Ÿ</p>\n<ol>\n<li>é˜¿é‡Œäº‘\n<ul>\n<li>ç™»å½•é˜¿é‡Œäº‘æ§åˆ¶å°ã€‚</li>\n<li>æœç´¢å¹¶è¿›å…¥  <code>å®¹å™¨é•œåƒæœåŠ¡</code>  ã€‚</li>\n<li>æ‰¾åˆ°  <code>é•œåƒå·¥å…·</code>  /  <code>é•œåƒåŠ é€Ÿå™¨</code>  å³å¯è·å–åˆ°å”¯ä¸€çš„é•œåƒåœ°å€ã€‚</li>\n</ul>\n</li>\n<li>åä¸ºäº‘\n<ul>\n<li>ç™»å½•åä¸ºäº‘æ§åˆ¶å°ã€‚</li>\n<li>æœç´¢å¹¶è¿›å…¥  <code>å®¹å™¨é•œåƒæœåŠ¡</code>  ã€‚</li>\n<li>æ‰¾åˆ°  <code>é•œåƒèµ„æº</code>  /  <code>é•œåƒä¸­å¿ƒ</code>  å¹¶æ·»åŠ   <code>é•œåƒåŠ é€Ÿå™¨</code>  å³å¯è·å–åˆ°å”¯ä¸€çš„é•œåƒåœ°å€ã€‚</li>\n</ul>\n</li>\n</ol>\n<blockquote>\n<p>è·å–å…¶ä½™æœåŠ¡å™¨å•†æä¾›çš„é•œåƒåŠ é€Ÿå™¨æ–¹å¼å‡ç›¸ä¼¼ã€‚</p>\n</blockquote>\n<h3 id=\"å¸è½½-docker\"><a class=\"anchor\" href=\"#å¸è½½-docker\">#</a> å¸è½½ Docker</h3>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"><span>å‘½ä»¤è¡Œæç¤ºç¬¦</span></figcaption><table><tr><td data-num=\"1\"></td><td data-command=\"\"></td><td><pre><span class=\"token comment\"># å¸è½½ä¾èµ–</span></pre></td></tr><tr><td data-num=\"2\"></td><td data-command=\"[root@xxx ~] $\"></td><td><pre><span class=\"token function\">sudo</span> yum remove docker-ce docker-ce-cli containerd.io</pre></td></tr><tr><td data-num=\"3\"></td><td data-command=\"\"></td><td><pre><span class=\"token comment\"># åˆ é™¤ç›®å½•</span></pre></td></tr><tr><td data-num=\"4\"></td><td data-command=\"[root@xxx ~] $\"></td><td><pre><span class=\"token function\">sudo</span> <span class=\"token function\">rm</span> -rf /var/lib/docker</pre></td></tr><tr><td data-num=\"5\"></td><td data-command=\"[root@xxx ~] $\"></td><td><pre><span class=\"token function\">sudo</span> <span class=\"token function\">rm</span> -rf /var/lib/containerd</pre></td></tr></table></figure><h3 id=\"docker-å¯åŠ¨æµç¨‹åŠåŸç†\"><a class=\"anchor\" href=\"#docker-å¯åŠ¨æµç¨‹åŠåŸç†\">#</a> Docker å¯åŠ¨æµç¨‹åŠåŸç†</h3>\n<h4 id=\"docker-å¯åŠ¨æµç¨‹\"><a class=\"anchor\" href=\"#docker-å¯åŠ¨æµç¨‹\">#</a> Docker å¯åŠ¨æµç¨‹</h4>\n<p><img data-src=\"https://img.xfc-exclave.com/2021/08/8a14ba52293bd7cdbf600968ea481e551628602757.png\" alt=\"Dockerå¯åŠ¨æµç¨‹å›¾\" /></p>\n<h4 id=\"docker-vs-è™šæ‹Ÿæœº\"><a class=\"anchor\" href=\"#docker-vs-è™šæ‹Ÿæœº\">#</a> Docker VS è™šæ‹Ÿæœº</h4>\n<p>Docker æœ‰ç€æ¯”è™šæ‹Ÿæœºæ›´å°‘çš„æŠ½è±¡å±‚ï¼Œä¸” Docker å®¹å™¨åœ¨ Linux æœ¬æœºä¸Šè¿è¡Œï¼Œå®ƒä¸å…¶ä»–å®¹å™¨å…±äº«ä¸»æœºçš„å†…æ ¸ï¼Œå› æ­¤åœ¨æ–°å»ºä¸€ä¸ªå®¹å™¨æ—¶ï¼Œ Docker å¹¶ä¸éœ€è¦åƒè™šæ‹Ÿæœºä¸€æ ·é‡æ–°åŠ è½½ä¸€ä¸ªæ“ä½œç³»ç»Ÿçš„å†…æ ¸ï¼Œé¿å…äº†å¾ˆå¤šå¼•å¯¼æ“ä½œã€‚</p>\n<p>è€Œè™šæ‹Ÿæœºï¼ˆVMï¼‰åˆ™æ˜¯è¿è¡Œä¸€ä¸ªå®Œæ•´çš„ â€œGuest æ“ä½œç³»ç»Ÿâ€ï¼Œé€šè¿‡è™šæ‹Ÿæœºç›‘æ§ç¨‹åºå¯¹ä¸»æœºèµ„æºè¿›è¡Œè™šæ‹Ÿè®¿é—®ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œè™šæ‹Ÿæœºé™¤äº†åº”ç”¨ç¨‹åºé€»è¾‘æ‰€æ¶ˆè€—çš„å¼€é”€ä¹‹å¤–ï¼Œè¿˜ä¼šäº§ç”Ÿå¾ˆå¤šå¼€é”€ã€‚</p>\n<p><img data-src=\"https://img.xfc-exclave.com/2021/08/e781c900e152e279625ea9056b299f661628512294.png\" alt=\"Docker VS è™šæ‹Ÿæœº\" /></p>\n<h3 id=\"docker-å¸¸ç”¨å‘½ä»¤\"><a class=\"anchor\" href=\"#docker-å¸¸ç”¨å‘½ä»¤\">#</a> Docker å¸¸ç”¨å‘½ä»¤</h3>\n<h4 id=\"å¸®åŠ©å‘½ä»¤\"><a class=\"anchor\" href=\"#å¸®åŠ©å‘½ä»¤\">#</a> å¸®åŠ©å‘½ä»¤</h4>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"><span>å‘½ä»¤è¡Œæç¤ºç¬¦</span></figcaption><table><tr><td data-num=\"1\"></td><td data-command=\"\"></td><td><pre><span class=\"token comment\"># æ˜¾ç¤º docker ç‰ˆæœ¬ä¿¡æ¯</span></pre></td></tr><tr><td data-num=\"2\"></td><td data-command=\"[root@xxx ~] $\"></td><td><pre>$ docker version</pre></td></tr><tr><td data-num=\"3\"></td><td data-command=\"\"></td><td><pre><span class=\"token comment\"># æ˜¾ç¤º docker è¯¦ç»†ä¿¡æ¯</span></pre></td></tr><tr><td data-num=\"4\"></td><td data-command=\"[root@xxx ~] $\"></td><td><pre>$ docker info</pre></td></tr><tr><td data-num=\"5\"></td><td data-command=\"\"></td><td><pre><span class=\"token comment\"># æŸ¥çœ‹ docker çŠ¶æ€</span></pre></td></tr><tr><td data-num=\"6\"></td><td data-command=\"[root@xxx ~] $\"></td><td><pre>$ docker stats</pre></td></tr><tr><td data-num=\"7\"></td><td data-command=\"\"></td><td><pre><span class=\"token comment\"># å¸®åŠ©å‘½ä»¤</span></pre></td></tr><tr><td data-num=\"8\"></td><td data-command=\"[root@xxx ~] $\"></td><td><pre>$ docker xxx --help</pre></td></tr></table></figure><p><img data-src=\"https://img.xfc-exclave.com/2021/08/681651c6f99d3f25184a775dc8ee56bb1628602735.jpeg\" alt=\"Dockerå‘½ä»¤å›¾è¡¨\" /></p>\n<blockquote>\n<p>Docker å‘½ä»¤è¡Œå‚è€ƒæ–‡æ¡£ï¼š<span class=\"exturl\" data-url=\"aHR0cHM6Ly9kb2NzLmRvY2tlci5jb20vcmVmZXJlbmNl\">https://docs.docker.com/reference</span></p>\n</blockquote>\n<h4 id=\"é•œåƒå‘½ä»¤\"><a class=\"anchor\" href=\"#é•œåƒå‘½ä»¤\">#</a> é•œåƒå‘½ä»¤</h4>\n<ol>\n<li>\n<p>docker images</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"><span>å‘½ä»¤è¡Œæç¤ºç¬¦</span></figcaption><table><tr><td data-num=\"1\"></td><td data-command=\"[root@xxx ~] $\"></td><td><pre>docker images <span class=\"token comment\"># æŸ¥çœ‹é•œåƒ</span></pre></td></tr><tr><td data-num=\"2\"></td><td data-command=\"\"></td><td><pre>REPOSITORY    TAG       IMAGE ID       CREATED        SIZE</pre></td></tr><tr><td data-num=\"3\"></td><td data-command=\"\"></td><td><pre>hello-world   latest    d1165f221234   <span class=\"token number\">5</span> months ago   <span class=\"token number\">13</span>.3kB</pre></td></tr><tr><td data-num=\"4\"></td><td data-command=\"\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td data-command=\"\"></td><td><pre><span class=\"token comment\"># REPOSITORY: é•œåƒçš„ä»“åº“æº</span></pre></td></tr><tr><td data-num=\"6\"></td><td data-command=\"\"></td><td><pre><span class=\"token comment\"># TAG: é•œåƒçš„æ ‡ç­¾</span></pre></td></tr><tr><td data-num=\"7\"></td><td data-command=\"\"></td><td><pre><span class=\"token comment\"># IMAGE ID: é•œåƒ ID</span></pre></td></tr><tr><td data-num=\"8\"></td><td data-command=\"\"></td><td><pre><span class=\"token comment\"># CREATED: åˆ›å»ºæ—¶é—´</span></pre></td></tr><tr><td data-num=\"9\"></td><td data-command=\"\"></td><td><pre><span class=\"token comment\"># SIZE: é•œåƒå¤§å°</span></pre></td></tr><tr><td data-num=\"10\"></td><td data-command=\"\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td data-command=\"[root@xxx ~] $\"></td><td><pre>docker images -a <span class=\"token comment\"># -all åˆ—å‡ºæ‰€æœ‰é•œåƒ</span></pre></td></tr><tr><td data-num=\"12\"></td><td data-command=\"[root@xxx ~] $\"></td><td><pre>docker images -q <span class=\"token comment\"># -quiet ä»…åˆ—å‡ºé•œåƒçš„ ID</span></pre></td></tr><tr><td data-num=\"13\"></td><td data-command=\"[root@xxx ~] $\"></td><td><pre>docker images -aq <span class=\"token comment\"># ç»„åˆä½¿ç”¨</span></pre></td></tr></table></figure></li>\n<li>\n<p>docker search</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"><span>å‘½ä»¤è¡Œæç¤ºç¬¦</span></figcaption><table><tr><td data-num=\"1\"></td><td data-command=\"[root@xxx ~] $\"></td><td><pre>docker search mysql <span class=\"token comment\"># æœç´¢ mysql é•œåƒ</span></pre></td></tr><tr><td data-num=\"2\"></td><td data-command=\"[root@xxx ~] $\"></td><td><pre>docker search mysql --filter<span class=\"token operator\">=</span>STARS<span class=\"token operator\">=</span><span class=\"token number\">3000</span> <span class=\"token comment\"># è¿‡æ»¤ï¼šè¿‡æ»¤ STARS å¤§äº 3000 çš„ mysql é•œåƒ</span></pre></td></tr></table></figure></li>\n<li>\n<p>docker pull</p>\n<blockquote>\n<p>docker é•œåƒæ—¢å¯ä½¿ç”¨å‘½ä»¤æ‹‰å–ï¼Œä¹Ÿå¯ä»¥å‰å¾€ <span class=\"exturl\" data-url=\"aHR0cHM6Ly9odWIuZG9ja2VyLmNvbS8=\">Docker Hub</span> è¿›è¡Œä¸‹è½½ã€‚</p>\n</blockquote>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"><span>å‘½ä»¤è¡Œæç¤ºç¬¦</span></figcaption><table><tr><td data-num=\"1\"></td><td data-command=\"[root@xxx ~] $\"></td><td><pre>docker pull mysql <span class=\"token comment\"># æ‹‰å– mysql é•œåƒ</span></pre></td></tr><tr><td data-num=\"2\"></td><td data-command=\"\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td data-command=\"\"></td><td><pre>Using default tag: latest <span class=\"token comment\"># ä¸æŒ‡å®š tag æ—¶é»˜è®¤ä¸‹è½½æœ€æ–°ç‰ˆæœ¬</span></pre></td></tr><tr><td data-num=\"4\"></td><td data-command=\"\"></td><td><pre>latest: Pulling from library/mysql</pre></td></tr><tr><td data-num=\"5\"></td><td data-command=\"\"></td><td><pre>45b42c59be33: Pull complete <span class=\"token comment\"># åˆ†å±‚ä¸‹è½½ï¼ˆåˆ†å±‚ä¸‹è½½ä¼šå¤ç”¨å·²ä¸‹è½½çš„ layerï¼Œå³å·²å­˜åœ¨çš„ layer ä¸ä¼šé‡å¤ä¸‹è½½ï¼‰</span></pre></td></tr><tr><td data-num=\"6\"></td><td data-command=\"\"></td><td><pre>b4f790bd91da: Pull complete </pre></td></tr><tr><td data-num=\"7\"></td><td data-command=\"\"></td><td><pre>325ae51788e9: Pull complete </pre></td></tr><tr><td data-num=\"8\"></td><td data-command=\"\"></td><td><pre>adcb9439d751: Pull complete </pre></td></tr><tr><td data-num=\"9\"></td><td data-command=\"\"></td><td><pre>174c7fe16c78: Pull complete </pre></td></tr><tr><td data-num=\"10\"></td><td data-command=\"\"></td><td><pre>698058ef136c: Pull complete </pre></td></tr><tr><td data-num=\"11\"></td><td data-command=\"\"></td><td><pre>4690143a669e: Pull complete </pre></td></tr><tr><td data-num=\"12\"></td><td data-command=\"\"></td><td><pre>f7599a246fd6: Pull complete </pre></td></tr><tr><td data-num=\"13\"></td><td data-command=\"\"></td><td><pre>35a55bf0c196: Pull complete </pre></td></tr><tr><td data-num=\"14\"></td><td data-command=\"\"></td><td><pre>790ac54f4c47: Pull complete </pre></td></tr><tr><td data-num=\"15\"></td><td data-command=\"\"></td><td><pre>b0ddd5d1b543: Pull complete </pre></td></tr><tr><td data-num=\"16\"></td><td data-command=\"\"></td><td><pre>1aefd67cb33d: Pull complete </pre></td></tr><tr><td data-num=\"17\"></td><td data-command=\"\"></td><td><pre>Digest: sha256:03306a1f248727ec979f61424c5fb5150e2c5fd2436f2561c5259b1258d6063c <span class=\"token comment\"># ç­¾åï¼Œç”¨äºé˜²ä¼ª</span></pre></td></tr><tr><td data-num=\"18\"></td><td data-command=\"\"></td><td><pre>Status: Downloaded newer image <span class=\"token keyword\">for</span> mysql:latest</pre></td></tr><tr><td data-num=\"19\"></td><td data-command=\"\"></td><td><pre>docker.io/library/mysql:latest <span class=\"token comment\"># çœŸå®åœ°å€</span></pre></td></tr><tr><td data-num=\"20\"></td><td data-command=\"\"></td><td><pre><span class=\"token comment\"># docker pull mysql</span></pre></td></tr><tr><td data-num=\"21\"></td><td data-command=\"\"></td><td><pre><span class=\"token comment\"># ç­‰ä»·äº</span></pre></td></tr><tr><td data-num=\"22\"></td><td data-command=\"\"></td><td><pre><span class=\"token comment\"># docker pull docker.io/library/mysql:latest</span></pre></td></tr><tr><td data-num=\"23\"></td><td data-command=\"\"></td><td><pre></pre></td></tr><tr><td data-num=\"24\"></td><td data-command=\"[root@xxx ~] $\"></td><td><pre>docker pull mysql:5.7 <span class=\"token comment\"># æŒ‡å®šç‰ˆæœ¬æ‹‰å–é•œåƒ</span></pre></td></tr></table></figure></li>\n<li>\n<p>docker rmi</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"><span>å‘½ä»¤è¡Œæç¤ºç¬¦</span></figcaption><table><tr><td data-num=\"1\"></td><td data-command=\"[root@xxx ~] $\"></td><td><pre>docker rmi -f d1165f221234 <span class=\"token comment\"># docker remove image: åˆ é™¤æŒ‡å®šçš„é•œåƒ</span></pre></td></tr><tr><td data-num=\"2\"></td><td data-command=\"[root@xxx ~] $\"></td><td><pre>docker rmi -f d1165f221234 8457e9155715 <span class=\"token comment\"># åˆ é™¤å¤šä¸ªé•œåƒ</span></pre></td></tr><tr><td data-num=\"3\"></td><td data-command=\"[root@xxx ~] $\"></td><td><pre>docker rmi -f <span class=\"token variable\"><span class=\"token variable\">$(</span>docker images -aq<span class=\"token variable\">)</span></span> <span class=\"token comment\"># åˆ é™¤æ‰€æœ‰ï¼ˆé€’å½’åˆ é™¤ï¼‰</span></pre></td></tr></table></figure></li>\n</ol>\n<h4 id=\"å®¹å™¨å‘½ä»¤\"><a class=\"anchor\" href=\"#å®¹å™¨å‘½ä»¤\">#</a> å®¹å™¨å‘½ä»¤</h4>\n<p>æ‹‰å–ä¸€ä¸ªæµ‹è¯•é•œåƒã€‚</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"><span>å‘½ä»¤è¡Œæç¤ºç¬¦</span></figcaption><table><tr><td data-num=\"1\"></td><td data-command=\"[root@xxx ~] $\"></td><td><pre>docker pull centos</pre></td></tr></table></figure><ol>\n<li>\n<p>åˆ›å»ºå¹¶å¯åŠ¨å®¹å™¨</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"><span>å‘½ä»¤è¡Œæç¤ºç¬¦</span></figcaption><table><tr><td data-num=\"1\"></td><td data-command=\"[root@xxx ~] $\"></td><td><pre>docker run <span class=\"token punctuation\">[</span>å¯é€‰å‚æ•°<span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span>image<span class=\"token punctuation\">]</span> <span class=\"token comment\"># æ–°å»ºå¹¶å¯åŠ¨å®¹å™¨</span></pre></td></tr><tr><td data-num=\"2\"></td><td data-command=\"[root@xxx ~] $\"></td><td><pre>docker run -it centos /bin/bash <span class=\"token comment\"># å¯åŠ¨å¹¶ä»¥äº¤äº’çš„æ–¹å¼è¿›å…¥å®¹å™¨</span></pre></td></tr><tr><td data-num=\"3\"></td><td data-command=\"\"></td><td><pre><span class=\"token comment\"># åå°ä»¥ç«¯å£ 80 å¯åŠ¨ centosï¼Œå¹¶å‘½åä¸º centos01ï¼Œå¹¶æ˜ å°„åˆ°å¤–éƒ¨ç«¯å£ 3344</span></pre></td></tr><tr><td data-num=\"4\"></td><td data-command=\"[root@xxx ~] $\"></td><td><pre>docker run -d --name centos01 -p <span class=\"token number\">3344</span>:80</pre></td></tr><tr><td data-num=\"5\"></td><td data-command=\"\"></td><td><pre><span class=\"token comment\"># è¿›å…¥å®¹å™¨</span></pre></td></tr><tr><td data-num=\"6\"></td><td data-command=\"[root@xxx ~] $\"></td><td><pre>docker run -it centos /bin/bash</pre></td></tr><tr><td data-num=\"7\"></td><td data-command=\"[root@01939a1ac7cd /] $\"></td><td><pre><span class=\"token punctuation\">[</span>root@01939a1ac7cd /<span class=\"token punctuation\">]</span><span class=\"token comment\"># ls</span></pre></td></tr><tr><td data-num=\"8\"></td><td data-command=\"\"></td><td><pre>bin  dev  etc  home  lib  lib64  lost+found  media  mnt  opt  proc  root  run  sbin  srv  sys  tmp  usr  var</pre></td></tr></table></figure></li>\n<li>\n<p>é€€å‡ºå®¹å™¨</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"><span>å‘½ä»¤è¡Œæç¤ºç¬¦</span></figcaption><table><tr><td data-num=\"1\"></td><td data-command=\"[root@xxx ~] $\"></td><td><pre><span class=\"token builtin class-name\">exit</span> <span class=\"token comment\"># é€€å‡ºå®¹å™¨ï¼ˆåœæ­¢å¹¶é€€å‡ºï¼‰</span></pre></td></tr><tr><td data-num=\"2\"></td><td data-command=\"\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td data-command=\"\"></td><td><pre><span class=\"token comment\"># ctrl + P + Q é€€å‡ºå®¹å™¨ï¼ˆé€€å‡ºä½†å®¹å™¨ä¸åœæ­¢ï¼‰</span></pre></td></tr><tr><td data-num=\"4\"></td><td data-command=\"[root@xxx ~] $\"></td><td><pre>docker run -it centos /bin/bash</pre></td></tr><tr><td data-num=\"5\"></td><td data-command=\"[root@286b1fb8e21d /]# [root@xxxxxxxx /]#\"></td><td><pre>docker <span class=\"token function\">ps</span></pre></td></tr><tr><td data-num=\"6\"></td><td data-command=\"\"></td><td><pre>CONTAINER ID   IMAGE     COMMAND       CREATED              STATUS</pre></td></tr><tr><td data-num=\"7\"></td><td data-command=\"\"></td><td><pre>286b1fb8e21d   centos    <span class=\"token string\">\"/bin/bash\"</span>   About a minute ago   Up About a minute</pre></td></tr></table></figure></li>\n<li>\n<p>æŸ¥çœ‹è¿è¡Œçš„å®¹å™¨</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"><span>å‘½ä»¤è¡Œæç¤ºç¬¦</span></figcaption><table><tr><td data-num=\"1\"></td><td data-command=\"[root@xxx ~] $\"></td><td><pre>docker <span class=\"token function\">ps</span> <span class=\"token comment\"># æŸ¥çœ‹æ­£åœ¨è¿è¡Œçš„å®¹å™¨</span></pre></td></tr><tr><td data-num=\"2\"></td><td data-command=\"[root@xxx ~] $\"></td><td><pre>docker <span class=\"token function\">ps</span> -a <span class=\"token comment\"># æŸ¥çœ‹æ‰€æœ‰è¿è¡Œçš„å®¹å™¨ï¼ˆåŒ…æ‹¬æ›¾ç»è¿è¡Œè¿‡çš„ï¼‰</span></pre></td></tr><tr><td data-num=\"3\"></td><td data-command=\"[root@xxx ~] $\"></td><td><pre>docker <span class=\"token function\">ps</span> -n<span class=\"token operator\">=</span><span class=\"token number\">2</span> <span class=\"token comment\"># æ˜¾ç¤ºè¿è¡Œè¿‡çš„ 2 ä¸ªå®¹å™¨</span></pre></td></tr><tr><td data-num=\"4\"></td><td data-command=\"[root@xxx ~] $\"></td><td><pre>docker <span class=\"token function\">ps</span> -aq <span class=\"token comment\"># æ˜¾ç¤ºå½“å‰æ­£åœ¨è¿è¡Œçš„å®¹å™¨ ID</span></pre></td></tr></table></figure></li>\n<li>\n<p>åˆ é™¤å®¹å™¨</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"><span>å‘½ä»¤è¡Œæç¤ºç¬¦</span></figcaption><table><tr><td data-num=\"1\"></td><td data-command=\"[root@xxx ~] $\"></td><td><pre>docker <span class=\"token function\">rm</span> <span class=\"token punctuation\">[</span>å®¹å™¨ID<span class=\"token punctuation\">]</span> <span class=\"token comment\"># ç§»é™¤æŒ‡å®šçš„å®¹å™¨ï¼ˆä¸èƒ½ç§»é™¤æ­£åœ¨è¿è¡Œçš„å®¹å™¨ï¼‰</span></pre></td></tr><tr><td data-num=\"2\"></td><td data-command=\"[root@xxx ~] $\"></td><td><pre>docker <span class=\"token function\">rm</span> -f <span class=\"token variable\"><span class=\"token variable\">$(</span>docker <span class=\"token function\">ps</span> -aq<span class=\"token variable\">)</span></span> <span class=\"token comment\"># ç§»é™¤æ‰€æœ‰çš„å®¹å™¨ï¼ˆ-f å¯åˆ é™¤æ­£åœ¨è¿è¡Œçš„å®¹å™¨ï¼‰</span></pre></td></tr><tr><td data-num=\"3\"></td><td data-command=\"[root@xxx ~] $\"></td><td><pre>docker <span class=\"token function\">ps</span> -a -q<span class=\"token operator\">|</span><span class=\"token function\">xargs</span> docker <span class=\"token function\">rm</span> <span class=\"token comment\"># ç§»é™¤æ‰€æœ‰çš„å®¹å™¨</span></pre></td></tr></table></figure></li>\n<li>\n<p>å¯åŠ¨å’Œåœæ­¢å®¹å™¨</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"><span>å‘½ä»¤è¡Œæç¤ºç¬¦</span></figcaption><table><tr><td data-num=\"1\"></td><td data-command=\"[root@xxx ~] $\"></td><td><pre>docker start <span class=\"token punctuation\">[</span>å®¹å™¨ID<span class=\"token punctuation\">]</span> <span class=\"token comment\"># å¯åŠ¨å®¹å™¨</span></pre></td></tr><tr><td data-num=\"2\"></td><td data-command=\"[root@xxx ~] $\"></td><td><pre>docker restart <span class=\"token punctuation\">[</span>å®¹å™¨ID<span class=\"token punctuation\">]</span> <span class=\"token comment\"># é‡å¯å®¹å™¨</span></pre></td></tr><tr><td data-num=\"3\"></td><td data-command=\"[root@xxx ~] $\"></td><td><pre>docker stop <span class=\"token punctuation\">[</span>å®¹å™¨ID<span class=\"token punctuation\">]</span> <span class=\"token comment\"># åœæ­¢å®¹å™¨</span></pre></td></tr><tr><td data-num=\"4\"></td><td data-command=\"[root@xxx ~] $\"></td><td><pre>docker <span class=\"token function\">kill</span> <span class=\"token punctuation\">[</span>å®¹å™¨ID<span class=\"token punctuation\">]</span> <span class=\"token comment\"># å¼ºåˆ¶åœæ­¢å®¹å™¨</span></pre></td></tr></table></figure></li>\n<li>\n<p>åå°å¯åŠ¨</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"><span>å‘½ä»¤è¡Œæç¤ºç¬¦</span></figcaption><table><tr><td data-num=\"1\"></td><td data-command=\"[root@xxx ~] $\"></td><td><pre>docker run -d centos <span class=\"token comment\"># åå°å¯åŠ¨ centos</span></pre></td></tr><tr><td data-num=\"2\"></td><td data-command=\"\"></td><td><pre><span class=\"token comment\"># æ³¨ï¼šdocker å¿…é¡»ä¿è¯è‡³å°‘ä¸€ä¸ªè¿è¡Œçš„è¿›ç¨‹ï¼Œå¦åˆ™ä¼šè‡ªåŠ¨åœæ­¢</span></pre></td></tr></table></figure></li>\n<li>\n<p>æŸ¥çœ‹æ—¥å¿—</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"><span>å‘½ä»¤è¡Œæç¤ºç¬¦</span></figcaption><table><tr><td data-num=\"1\"></td><td data-command=\"[root@xxx ~] $\"></td><td><pre>docker logs -tf --tail <span class=\"token number\">10</span> 8b1c31f83ff8 <span class=\"token comment\"># æŸ¥çœ‹ 10 æ¡æ—¥å¿—</span></pre></td></tr><tr><td data-num=\"2\"></td><td data-command=\"\"></td><td><pre><span class=\"token comment\"># -tf æ˜¾ç¤ºæ—¶é—´æˆ³ï¼ˆæ ¼å¼åŒ–æ˜¾ç¤ºï¼‰</span></pre></td></tr></table></figure></li>\n<li>\n<p>æŸ¥çœ‹å®¹å™¨å†…éƒ¨çš„è¿›ç¨‹</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"><span>å‘½ä»¤è¡Œæç¤ºç¬¦</span></figcaption><table><tr><td data-num=\"1\"></td><td data-command=\"[root@xxx ~] $\"></td><td><pre>docker <span class=\"token function\">top</span> 8b1c31f83ff8 <span class=\"token comment\"># æŸ¥çœ‹æŒ‡å®šå®¹å™¨å†…éƒ¨è¿è¡Œçš„è¿›ç¨‹</span></pre></td></tr></table></figure></li>\n<li>\n<p>æŸ¥çœ‹é•œåƒçš„å…ƒæ•°æ®</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"><span>å‘½ä»¤è¡Œæç¤ºç¬¦</span></figcaption><table><tr><td data-num=\"1\"></td><td data-command=\"[root@xxx ~] $\"></td><td><pre>docker inspect 8b1c31f83ff8 <span class=\"token comment\"># æŸ¥çœ‹æŒ‡å®šå®¹å™¨çš„æ‰€æœ‰ä¿¡æ¯</span></pre></td></tr></table></figure></li>\n<li>\n<p>è¿›å…¥å½“å‰æ­£åœ¨è¿è¡Œçš„å®¹å™¨</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"><span>å‘½ä»¤è¡Œæç¤ºç¬¦</span></figcaption><table><tr><td data-num=\"1\"></td><td data-command=\"[root@xxx ~] $\"></td><td><pre>docker <span class=\"token builtin class-name\">exec</span> -it 8b1c31f83ff8 /bin/bash <span class=\"token comment\"># è¿›å…¥æŒ‡å®šçš„å®¹å™¨å¹¶å¯åŠ¨å‘½ä»¤è¡Œï¼ˆè¿›å…¥åå¼€å¯ä¸€ä¸ªæ–°çš„ç»ˆç«¯ï¼‰</span></pre></td></tr><tr><td data-num=\"2\"></td><td data-command=\"[root@xxx ~] $\"></td><td><pre>docker attach 8b1c31f83ff8 <span class=\"token comment\"># è¿›å…¥æŒ‡å®šå®¹å™¨ï¼ˆä¸ä¼šå¯åŠ¨æ–°çš„è¿›ç¨‹ï¼‰</span></pre></td></tr></table></figure></li>\n<li>\n<p>ä»å®¹å™¨å†…æ‹·è´æ–‡ä»¶åˆ°ä¸»æœº</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"><span>å‘½ä»¤è¡Œæç¤ºç¬¦</span></figcaption><table><tr><td data-num=\"1\"></td><td data-command=\"[root@xxx ~] $\"></td><td><pre>docker <span class=\"token function\">cp</span> <span class=\"token punctuation\">[</span>å®¹å™¨ID<span class=\"token punctuation\">]</span>:<span class=\"token punctuation\">[</span>è·¯å¾„<span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span>è·¯å¾„<span class=\"token punctuation\">]</span> <span class=\"token comment\"># å°†å®¹å™¨å†…æŒ‡å®šè·¯å¾„çš„æ–‡ä»¶æ‹·è´åˆ°ä¸»æœº</span></pre></td></tr><tr><td data-num=\"2\"></td><td data-command=\"[root@xxx ~] $\"></td><td><pre>docker <span class=\"token function\">cp</span> 8b1c31f83ff8:/home/test.java /home <span class=\"token comment\"># å°†å®¹å™¨å†…çš„ /home/test.java æ–‡ä»¶æ‹·è´åˆ°ä¸»æœº /home ç›®å½•ä¸‹</span></pre></td></tr></table></figure></li>\n</ol>\n<h4 id=\"å¯è§†åŒ–å·¥å…·-portainer\"><a class=\"anchor\" href=\"#å¯è§†åŒ–å·¥å…·-portainer\">#</a> å¯è§†åŒ–å·¥å…· Portainer</h4>\n<blockquote>\n<p>Portainer å®˜æ–¹ç½‘ç«™ï¼š<span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cucG9ydGFpbmVyLmlv\">https://www.portainer.io</span></p>\n</blockquote>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"><span>å‘½ä»¤è¡Œæç¤ºç¬¦</span></figcaption><table><tr><td data-num=\"1\"></td><td data-command=\"[root@xxx ~] $\"></td><td><pre>docker run -d -p <span class=\"token number\">8088</span>:9000 -v /root/portainer:/data -v /var/run/docker.sock:/var/run/docker.sock --name dev-portainer portainer/portainer</pre></td></tr><tr><td data-num=\"2\"></td><td data-command=\"\"></td><td><pre><span class=\"token comment\"># æŸ¥çœ‹æ˜¯å¦å¯åŠ¨æˆåŠŸ</span></pre></td></tr><tr><td data-num=\"3\"></td><td data-command=\"[root@xxx ~] $\"></td><td><pre><span class=\"token function\">curl</span> localhost:8088</pre></td></tr></table></figure><p>æ­¤æ—¶ä»å¤–éƒ¨æµè§ˆå™¨è®¿é—®è¯¥ä¸»æœºçš„å¯¹åº”ç«¯å£ï¼Œå¯ä»¥çœ‹åˆ°å¦‚ä¸‹ç•Œé¢ï¼š</p>\n<p><img data-src=\"https://img.xfc-exclave.com/2021/08/a8ad2462956f5a99deeb70cfca98e0ff1628602584.png\" alt=\"Portaineråˆå§‹é¡µé¢\" /></p>\n<p>å®Œå–„ä¿¡æ¯ååˆ›å»ºç”¨æˆ·åå³å¯ç™»å½•ã€‚</p>\n<blockquote>\n<p>æ³¨ï¼šå¦‚æœæ˜¯äº‘æœåŠ¡å™¨ï¼Œéœ€è¦ç¡®è®¤åœ¨å®‰å…¨ç»„è§„åˆ™ä¸­æ˜¯å¦å¼€æ”¾å¯¹åº”çš„ç«¯å£ã€‚è¿™é‡Œä¸æ¨èä½¿ç”¨å¯è§†åŒ–å·¥å…·ï¼Œå¦‚æœ‰å…´è¶£ï¼Œç™»å½•æˆåŠŸåè‡ªè¡Œæ¢ç´¢ã€‚</p>\n</blockquote>\n<h3 id=\"docker-é•œåƒè¯¦è§£\"><a class=\"anchor\" href=\"#docker-é•œåƒè¯¦è§£\">#</a> Docker é•œåƒè¯¦è§£</h3>\n<h4 id=\"é•œåƒå’Œå®¹å™¨\"><a class=\"anchor\" href=\"#é•œåƒå’Œå®¹å™¨\">#</a> é•œåƒå’Œå®¹å™¨</h4>\n<p>é•œåƒç”±å¤šä¸ªå±‚ç»„æˆï¼Œæ¯å±‚å åŠ ä¹‹åï¼Œä»å¤–éƒ¨çœ‹æ¥å°±å¦‚ä¸€ä¸ªç‹¬ç«‹çš„å¯¹è±¡ã€‚é•œåƒå†…éƒ¨æ˜¯ä¸€ä¸ªç²¾ç®€çš„æ“ä½œç³»ç»Ÿï¼ˆOSï¼‰ï¼ŒåŒæ—¶è¿˜åŒ…å«åº”ç”¨è¿è¡Œæ‰€å¿…é¡»çš„æ–‡ä»¶å’Œä¾èµ–åŒ…ã€‚å› ä¸ºå®¹å™¨çš„è®¾è®¡åˆè¡·å°±æ˜¯å¿«é€Ÿå’Œå°å·§ï¼Œæ‰€ä»¥é•œåƒé€šå¸¸éƒ½æ¯”è¾ƒå°ã€‚</p>\n<p>é•œåƒå°±åƒåœæ­¢è¿è¡Œçš„å®¹å™¨ï¼ˆç±»ï¼‰ï¼Œä½†å®é™…ä¸Šï¼Œå®ƒå¯ä»¥åœæ­¢æŸä¸ªå®¹å™¨çš„è¿è¡Œï¼Œå¹¶ä»ä¸­åˆ›å»ºæ–°çš„é•œåƒã€‚åœ¨è¯¥å‰æä¸‹ï¼Œé•œåƒå¯ä»¥ç†è§£ä¸ºä¸€ç§æ„å»ºæ—¶ï¼ˆbuild-timeï¼‰ç»“æ„ï¼Œè€Œå®¹å™¨å¯ä»¥ç†è§£ä¸ºä¸€ç§è¿è¡Œæ—¶ï¼ˆrun-timeï¼‰ç»“æ„ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p>\n<p><img data-src=\"https://img.xfc-exclave.com/2021/08/ae6291c5590378207dc3680076fc89f61628601022.gif\" alt=\"é•œåƒå’Œå®¹å™¨é—´çš„å…³ç³»\" /></p>\n<p>æˆ‘ä»¬é€šå¸¸ä½¿ç”¨  <code>docker container run</code>  å’Œ  <code>docker service create</code>  å‘½ä»¤ä»æŸä¸ªé•œåƒå¯åŠ¨ä¸€ä¸ªæˆ–å¤šä¸ªå®¹å™¨ï¼Œä¸€æ—¦å®¹å™¨ä»é•œåƒå¯åŠ¨åï¼ŒäºŒè€…ä¹‹é—´å°±å˜æˆäº†äº’ç›¸ä¾èµ–çš„å…³ç³»ï¼Œå¹¶ä¸”åœ¨é•œåƒä¸Šå¯åŠ¨çš„å®¹å™¨å…¨éƒ¨åœæ­¢ä¹‹å‰ï¼Œé•œåƒæ˜¯æ— æ³•è¢«åˆ é™¤çš„ã€‚å°è¯•åˆ é™¤é•œåƒè€Œä¸åœæ­¢æˆ–é”€æ¯ä½¿ç”¨å®ƒçš„å®¹å™¨ï¼Œä¼šå¯¼è‡´å‡ºé”™ã€‚</p>\n<h4 id=\"docker-é•œåƒåŠ è½½åŸç†\"><a class=\"anchor\" href=\"#docker-é•œåƒåŠ è½½åŸç†\">#</a> Docker é•œåƒåŠ è½½åŸç†</h4>\n<h5 id=\"unionfsè”åˆæ–‡ä»¶ç³»ç»Ÿ\"><a class=\"anchor\" href=\"#unionfsè”åˆæ–‡ä»¶ç³»ç»Ÿ\">#</a> UnionFSï¼ˆè”åˆæ–‡ä»¶ç³»ç»Ÿï¼‰</h5>\n<p>UnionFSï¼ˆè”åˆæ–‡ä»¶ç³»ç»Ÿï¼‰ï¼š UnionFS æ˜¯ä¸€ç§åˆ†å±‚ã€è½»é‡çº§å¹¶ä¸”é«˜æ€§èƒ½çš„æ–‡ä»¶ç³»ç»Ÿï¼Œå®ƒæ”¯æŒå¯¹æ–‡ä»¶ç³»ç»Ÿçš„ä¿®æ”¹ä½œä¸ºä¸€æ¬¡æäº¤æ¥ä¸€å±‚å±‚çš„å åŠ ï¼ŒåŒæ—¶å¯ä»¥å°†ä¸åŒç›®å½•æŒ‚è½½åˆ°åŒä¸€ä¸ªè™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿä¸‹ï¼ˆunite several directories into a single virtual filesystemï¼‰ã€‚ UnionFS æ˜¯ Docker é•œåƒçš„åŸºç¡€ã€‚é•œåƒå¯ä»¥é€šè¿‡åˆ†å±‚æ¥è¿›è¡Œç»§æ‰¿ï¼ŒåŸºäºåŸºç¡€é•œåƒï¼ˆæ²¡æœ‰çˆ¶é•œåƒï¼‰ï¼Œå¯ä»¥åˆ¶ä½œå„ç§å…·ä½“çš„åº”ç”¨é•œåƒã€‚<br />\n<strong>ç‰¹æ€§ï¼š</strong> ä¸€æ¬¡åŒæ—¶åŠ è½½å¤šä¸ªæ–‡ä»¶ç³»ç»Ÿï¼Œä½†ä»å¤–é¢çœ‹èµ·æ¥ï¼Œåªèƒ½çœ‹åˆ°ä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿï¼Œè”åˆåŠ è½½ä¼šæŠŠå„å±‚æ–‡ä»¶ç³»ç»Ÿå åŠ èµ·æ¥ï¼Œè¿™æ ·æœ€ç»ˆçš„æ–‡ä»¶ç³»ç»Ÿä¼šåŒ…å«æ‰€æœ‰åº•å±‚çš„æ–‡ä»¶å’Œç›®å½•ã€‚</p>\n<h5 id=\"docker-é•œåƒåŠ è½½åŸç†-2\"><a class=\"anchor\" href=\"#docker-é•œåƒåŠ è½½åŸç†-2\">#</a> Docker é•œåƒåŠ è½½åŸç†</h5>\n<p>Docker çš„é•œåƒå®é™…ä¸Šæ˜¯ç”±ä¸€å±‚ä¸€å±‚çš„æ–‡ä»¶ç³»ç»Ÿç»„æˆçš„ï¼Œè¿™ç§å±‚çº§çš„æ–‡ä»¶ç³»ç»Ÿï¼ˆUFSï¼‰ä¸»è¦åŒ…å«  <code>bootleader</code>  å’Œ  <code>kernel</code>  ï¼Œ bootleader ä¸»è¦æ˜¯å¼•å¯¼åŠ è½½ kernel ï¼Œ Linux åˆšå¯åŠ¨ä¼šåŠ è½½ bootfs æ–‡ä»¶ç³»ç»Ÿï¼Œåœ¨ Docker é•œåƒçš„æœ€åº•å±‚æ˜¯ bootfs ã€‚è¿™ä¸€å±‚ä¸æˆ‘ä»¬å…¸å‹çš„ Linux/Unix ç³»ç»Ÿæ˜¯ä¸€æ ·çš„ï¼ŒåŒ…å« boot åŠ è½½å™¨å’Œå†…æ ¸ã€‚å½“ boot åŠ è½½å®Œæˆä¹‹åï¼Œæ•´ä¸ªå†…æ ¸å°±éƒ½åœ¨å†…å­˜ä¸­äº†ï¼Œæ­¤æ—¶å†…å­˜çš„ä½¿ç”¨æƒå·²ç”± bootfs è½¬äº¤ç»™å†…æ ¸ï¼Œæ­¤æ—¶ç³»ç»Ÿä¹Ÿä¼šå¸è½½ bootfs ã€‚</p>\n<p>rooftsï¼ˆroot file systemï¼‰å°±æ˜¯å„ç§ä¸åŒçš„æ“ä½œç³»ç»Ÿå‘è¡Œç‰ˆï¼Œæ¯”å¦‚ Ubuntu ã€ Centos ç­‰ã€‚</p>\n<p>å¯¹äºä¸ªç²¾ç®€çš„ OS ï¼Œ rootfs å¯ä»¥å¾ˆå°ï¼Œåªéœ€è¦åŒ…åˆæœ€åŸºæœ¬çš„å‘½ä»¤ï¼Œå·¥å…·å’Œç¨‹åºåº“å°±å¯ä»¥äº†ï¼Œå› ä¸ºåº•å±‚ç›´æ¥ç”¨å®¿ä¸»æœºçš„å†…æ ¸ï¼Œè‡ªå·±åªéœ€è¦æä¾› rootfs å°±å¯ä»¥äº†ã€‚</p>\n<p>ç”±æ­¤å¯è§å¯¹äºä¸åŒçš„ Linux å‘è¡Œç‰ˆï¼Œ boots åŸºæœ¬æ˜¯ä¸€è‡´çš„ï¼Œ rootfs ä¼šæœ‰å·®åˆ¥ï¼Œå› æ­¤ä¸åŒçš„å‘è¡Œç‰ˆå¯ä»¥å…¬ç”¨ bootfs ã€‚</p>\n<h5 id=\"é•œåƒçš„åˆ†å±‚ç»“æ„\"><a class=\"anchor\" href=\"#é•œåƒçš„åˆ†å±‚ç»“æ„\">#</a> é•œåƒçš„åˆ†å±‚ç»“æ„</h5>\n<p>Docker æ”¯æŒé€šè¿‡æ‰©å±•ç°æœ‰é•œåƒï¼Œåˆ›å»ºæ–°çš„é•œåƒã€‚</p>\n<p><img data-src=\"https://img.xfc-exclave.com/2021/08/c4c69be4310118b7eda353256d3c5a221628601033.jpeg\" alt=\"å±‚çº§æ–‡ä»¶ç³»ç»Ÿå›¾ç¤º\" /></p>\n<p>äº‹å®ä¸Šï¼Œæ‰€æœ‰çš„ Docker é•œåƒéƒ½èµ·å§‹äºä¸€ä¸ªåŸºç¡€çš„é•œåƒå±‚ï¼Œå½“è¿›è¡Œä¿®æ”¹æˆ–å¢åŠ æ–°çš„å†…å®¹æ—¶ï¼Œå°±ä¼šåœ¨å½“å‰é•œåƒå±‚ä¹‹ä¸Šåˆ›å»ºæ–°çš„é•œåƒå±‚ã€‚</p>\n<p>Docker é•œåƒé‡‡ç”¨è¿™ç§åˆ†å±‚ç»“æ„çš„å¥½å¤„åœ¨äºå…±äº«èµ„æºï¼Œå¤šä¸ªé•œåƒéƒ½ä»ç›¸åŒçš„åŸºç¡€å±‚é•œåƒåˆ›å»ºè€Œæ¥ï¼Œ Docker ä¸»æœºåˆ™åªéœ€è¦åœ¨ç£ç›˜ä¸Šä¿å­˜ä¸€ä»½åŸºç¡€å±‚é•œåƒï¼ŒåŒæ—¶å†…å­˜ä¸­ä¹ŸåªåŠ è½½ä¸€ä»½åŸºç¡€å±‚é•œåƒï¼Œå°±å¯ä»¥ä¸ºæ‰€æœ‰å®¹å™¨æä¾›æœåŠ¡äº†ã€‚</p>\n<blockquote>\n<p>Docker é€šè¿‡å­˜å‚¨å¼•æ“ï¼ˆæ–°ç‰ˆæœ¬é‡‡ç”¨å¿«ç…§æœºåˆ¶ï¼‰çš„æ–¹å¼æ¥å®ç°é•œåƒå±‚å †æ ˆï¼Œå¹¶ä¿è¯å¤šé•œåƒå±‚å¯¹å¤–å±•ç¤ºä¸ºç»Ÿä¸€çš„æ–‡ä»¶ç³»ç»Ÿã€‚</p>\n</blockquote>\n<p>Docker çš„é•œåƒéƒ½æ˜¯åªè¯»çš„ï¼Œè€Œå®¹å™¨å±‚åˆ™æ˜¯å¯å†™çš„ã€‚å½“å®¹å™¨å¯åŠ¨æ—¶ï¼Œä¸€ä¸ªæ–°çš„å¯å†™å±‚è¢«åŠ è½½åˆ°é•œåƒçš„é¡¶éƒ¨ï¼Œå®ƒè¢«ç§°ä¸ºå®¹å™¨å±‚ï¼Œåœ¨å®¹å™¨å±‚ä¹‹ä¸‹ï¼Œéƒ½æ˜¯å«é•œåƒå±‚ã€‚</p>\n<p>å½“æˆ‘ä»¬å¯¹å®¹å™¨è¿›è¡Œæ·»åŠ ã€åˆ é™¤æˆ–ä¿®æ”¹ç­‰æ“ä½œæ—¶ï¼Œå…¶å®æ‰€ä½œç”¨çš„æ˜¯é€šè¿‡  <code>run</code>  å‘½ä»¤å¯åŠ¨åç”Ÿæˆçš„ä¸€ä¸ªæ–°çš„å®¹å™¨å±‚ã€‚</p>\n<h5 id=\"æäº¤é•œåƒ\"><a class=\"anchor\" href=\"#æäº¤é•œåƒ\">#</a> æäº¤é•œåƒ</h5>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"><span>å‘½ä»¤è¡Œæç¤ºç¬¦</span></figcaption><table><tr><td data-num=\"1\"></td><td data-command=\"\"></td><td><pre><span class=\"token comment\"># å°†ä¸€ä¸ªå®¹å™¨æäº¤ä¸ºæ–°çš„é•œåƒ</span></pre></td></tr><tr><td data-num=\"2\"></td><td data-command=\"[root@xxx ~] $\"></td><td><pre>docker commit -m <span class=\"token string\">'é•œåƒæè¿°'</span> -a <span class=\"token string\">'ä½œè€…'</span> <span class=\"token punctuation\">[</span>å®¹å™¨ID<span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span>é•œåƒå<span class=\"token punctuation\">]</span></pre></td></tr></table></figure><blockquote>\n<p>docker åŸç†ä¸ git ç›¸ä¼¼ï¼Œä¹Ÿå¯ä»¥ç®€å•ç†è§£ä¸ºï¼šåŸé•œåƒ + è‡ªå·±çš„æ–‡ä»¶ = æ–°çš„é•œåƒ</p>\n</blockquote>\n<h3 id=\"å®¹å™¨æ•°æ®å·\"><a class=\"anchor\" href=\"#å®¹å™¨æ•°æ®å·\">#</a> å®¹å™¨æ•°æ®å·</h3>\n<p><code>æ•°æ®å·</code>  æ˜¯ä¸€ä¸ªå¯ä¾›ä¸€ä¸ªæˆ–å¤šä¸ªå®¹å™¨ä½¿ç”¨çš„ç‰¹æ®Šç›®å½•ï¼Œå®ƒç»•è¿‡ UFSï¼Œå¯ä»¥æä¾›å¾ˆå¤šæœ‰ç”¨çš„ç‰¹æ€§ï¼š</p>\n<ul>\n<li>æ•°æ®å·å¯ä»¥åœ¨å®¹å™¨ä¹‹é—´å…±äº«å’Œé‡ç”¨ã€‚</li>\n<li>å¯¹æ•°æ®å·çš„ä¿®æ”¹ä¼šç«‹é©¬ç”Ÿæ•ˆã€‚</li>\n<li>å¯¹æ•°æ®å·çš„æ›´æ–°ï¼Œä¸ä¼šå½±å“é•œåƒã€‚</li>\n<li>æ•°æ®å·é»˜è®¤ä¼šä¸€ç›´å­˜åœ¨ï¼Œå³ä½¿å®¹å™¨è¢«åˆ é™¤ã€‚</li>\n</ul>\n<p>å®¹å™¨ç›®å½•çš„æŒ‚è½½ï¼š</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"><span>å‘½ä»¤è¡Œæç¤ºç¬¦</span></figcaption><table><tr><td data-num=\"1\"></td><td data-command=\"[root@xxx ~] $\"></td><td><pre>docker run -it -v <span class=\"token punctuation\">[</span>å®¿ä¸»æœºç›®å½•<span class=\"token punctuation\">]</span>:<span class=\"token punctuation\">[</span>å®¹å™¨ç›®å½•<span class=\"token punctuation\">]</span> <span class=\"token comment\"># ä½¿ç”¨ -v å‚æ•°å®ç°æŒ‚è½½</span></pre></td></tr><tr><td data-num=\"2\"></td><td data-command=\"[root@xxx ~] $\"></td><td><pre>docker run -it -v /home/ceshi:/home centos /bin/bash <span class=\"token comment\"># å°†ä¸»æœºçš„ /home/ceshi ç›®å½•ä¸å®¹å™¨å†…çš„ç›®å½• /home è¿›è¡ŒæŒ‚è½½ï¼ŒæŒ‚è½½æˆåŠŸåï¼Œä¸¤ä¸ªç›®å½•ä¹‹é—´ä¼šè‡ªåŠ¨è¿›è¡ŒåŒå‘åŒæ­¥ã€‚</span></pre></td></tr><tr><td data-num=\"3\"></td><td data-command=\"\"></td><td><pre><span class=\"token comment\"># æŒ‡å®šå¤šä¸ª -v [å®¿ä¸»æœºç›®å½•]:[å®¹å™¨ç›®å½•]ï¼Œå³å¯æŒ‚è½½å¤šä¸ªç›®å½•ã€‚</span></pre></td></tr></table></figure><blockquote>\n<p>æ•°æ®å·çš„ä½¿ç”¨ï¼Œç±»ä¼¼äº Linux ä¸‹å¯¹ç›®å½•æˆ–æ–‡ä»¶è¿›è¡Œ mount ï¼Œé•œåƒä¸­çš„è¢«æŒ‡å®šä¸ºæŒ‚è½½ç‚¹çš„ç›®å½•ä¸­çš„æ–‡ä»¶ä¼šå¤åˆ¶åˆ°æ•°æ®å·ä¸­ï¼ˆä»…æ•°æ®å·ä¸ºç©ºæ—¶ä¼šå¤åˆ¶ï¼‰ã€‚</p>\n</blockquote>\n<h4 id=\"å…·åæŒ‚è½½ä¸åŒ¿åæŒ‚è½½\"><a class=\"anchor\" href=\"#å…·åæŒ‚è½½ä¸åŒ¿åæŒ‚è½½\">#</a> å…·åæŒ‚è½½ä¸åŒ¿åæŒ‚è½½</h4>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"><span>å‘½ä»¤è¡Œæç¤ºç¬¦</span></figcaption><table><tr><td data-num=\"1\"></td><td data-command=\"\"></td><td><pre><span class=\"token comment\"># åŒ¿åæŒ‚è½½ï¼Œå³æ²¡æœ‰æŒ‡å®šå®¹å™¨å†…æŒ‚è½½ç›®å½•å¯¹åº”çš„å¤–éƒ¨è·¯å¾„å’Œåå­—</span></pre></td></tr><tr><td data-num=\"2\"></td><td data-command=\"[root@xxx ~] $\"></td><td><pre>docker run -d -P --name nginx01 -v /etc/nginx nginx <span class=\"token comment\"># ä½¿ç”¨éšæœºç«¯å£å¯åŠ¨ nginxï¼Œå¹¶å°†ç›®å½• /etc/nginx åŒ¿åæŒ‚è½½ã€‚</span></pre></td></tr><tr><td data-num=\"3\"></td><td data-command=\"\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td data-command=\"[root@xxx ~] $\"></td><td><pre>docker volume <span class=\"token function\">ls</span> <span class=\"token comment\"># æŸ¥çœ‹æ‰€æœ‰æ•°æ®å·ä¿¡æ¯</span></pre></td></tr><tr><td data-num=\"5\"></td><td data-command=\"\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td data-command=\"\"></td><td><pre><span class=\"token comment\"># å…·åæŒ‚è½½ï¼Œå³æ²¡æœ‰æŒ‡å®šå®¹å™¨å†…æŒ‚è½½ç›®å½•å¯¹åº”çš„å¤–éƒ¨è·¯å¾„ï¼Œä½†æŒ‡å®šäº†æ•°æ®å·åå­—</span></pre></td></tr><tr><td data-num=\"7\"></td><td data-command=\"[root@xxx ~] $\"></td><td><pre>docker run -d -P --name nginx02 -v nginx-test:/etc/nginx nginx</pre></td></tr><tr><td data-num=\"8\"></td><td data-command=\"\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td data-command=\"\"></td><td><pre><span class=\"token comment\"># ä½¿ç”¨ docker inspect æŸ¥çœ‹å®¹å™¨è¯¦æƒ…ï¼Œå¯ä»¥çœ‹åˆ°å·æŒ‚è½½è·¯å¾„ä¿¡æ¯ã€‚</span></pre></td></tr></table></figure><p>å…·åå’ŒåŒ¿åæŒ‚è½½ä¼šå°†æ•°æ®å·æŒ‚è½½åˆ°  <code>/var/lib/docker/volumes/xxx/_data</code>  ç›®å½•ä¸­ã€‚</p>\n<blockquote>\n<p>åŒ¿åæŒ‚è½½ä¸æ˜“è¯†åˆ«ï¼Œä¸å»ºè®®ä½¿ç”¨ã€‚</p>\n</blockquote>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"><span>å‘½ä»¤è¡Œæç¤ºç¬¦</span></figcaption><table><tr><td data-num=\"1\"></td><td data-command=\"[root@xxx ~] $\"></td><td><pre>docker run -d -P --name nginx01 -v /etc/nginx:ro nginx <span class=\"token comment\"># ro -> åªè¯»ï¼Œåªèƒ½é€šè¿‡ä¹¦ä¸»æœºæ“ä½œ</span></pre></td></tr><tr><td data-num=\"2\"></td><td data-command=\"[root@xxx ~] $\"></td><td><pre>docker run -d -P --name nginx01 -v /etc/nginx:rw nginx <span class=\"token comment\"># rw -> è¯»å†™ï¼Œé»˜è®¤å€¼ã€‚</span></pre></td></tr></table></figure><h4 id=\"æ•°æ®å·å®¹å™¨\"><a class=\"anchor\" href=\"#æ•°æ®å·å®¹å™¨\">#</a> æ•°æ®å·å®¹å™¨</h4>\n<p>å¤šä¸ªå®¹å™¨ä¹‹é—´ä¹Ÿå¯ä»¥é€šè¿‡  <code>--volunes-from</code>  æŒ‚è½½å®ç°å®¹å™¨é—´æ•°æ®å…±äº«ã€‚</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"><span>å‘½ä»¤è¡Œæç¤ºç¬¦</span></figcaption><table><tr><td data-num=\"1\"></td><td data-command=\"[root@xxx ~] $\"></td><td><pre>docker run -it --name docker02 --volunes-from docker01 exclave/centos</pre></td></tr><tr><td data-num=\"2\"></td><td data-command=\"\"></td><td><pre><span class=\"token comment\"># å¯åŠ¨é•œåƒ exclave/centos å¹¶å‘½åä¸º docker02ï¼Œä¸”æŒ‚è½½åˆ° docker01</span></pre></td></tr></table></figure><blockquote>\n<p>å®¹å™¨ä¹‹é—´é…ç½®ä¿¡æ¯çš„ä¼ é€’ï¼Œæ•°æ®å·å®¹å™¨çš„ç”Ÿå‘½å‘¨æœŸä¸€ç›´æŒç»­åˆ°æ²¡æœ‰å®¹å™¨ä½¿ç”¨ä½ç½®ã€‚</p>\n<p>ä½†å¦‚æœå®¹å™¨æŒ‚è½½åˆ°äº†æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿï¼Œç§»é™¤æ‰€æœ‰å®¹å™¨ï¼Œæœ¬åœ°ä¿¡æ¯ä¹Ÿä¸ä¼šä¸¢å¤±ã€‚</p>\n</blockquote>\n<h3 id=\"dockerfile\"><a class=\"anchor\" href=\"#dockerfile\">#</a> DockerFile</h3>\n<h4 id=\"dockerfile-æ„å»ºç¤ºä¾‹\"><a class=\"anchor\" href=\"#dockerfile-æ„å»ºç¤ºä¾‹\">#</a> DockerFile æ„å»ºç¤ºä¾‹</h4>\n<p><code>Dockerfile</code>  æ˜¯ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ï¼Œå…¶å†…åŒ…å«äº†ä¸€æ¡æ¡çš„æŒ‡ä»¤ï¼ˆInstructionï¼‰ï¼Œæ¯ä¸€æ¡æŒ‡ä»¤æ„å»ºä¸€å±‚ï¼Œå› æ­¤æ¯ä¸€æ¡æŒ‡ä»¤çš„å†…å®¹ï¼Œå°±æ˜¯æè¿°è¯¥å±‚åº”å½“å¦‚ä½•æ„å»ºã€‚</p>\n<p>æ·»åŠ æ•°æ®å·é™¤äº†ç›´æ¥é€šè¿‡å‘½ä»¤è¿›è¡ŒæŒ‚è½½å¤–ï¼Œè¿˜å¯ä»¥é€šè¿‡ dockerFile è¿›è¡Œæ·»åŠ ï¼Œæ“ä½œæ–¹å¼å¦‚ä¸‹ï¼š</p>\n<ol>\n<li>\n<p>åˆ›å»ºä¸€ä¸ª dockerfile æ–‡ä»¶ï¼ˆåå­—å¯ä»¥éšæ„ï¼‰ï¼Œå¹¶åœ¨è¯¥æ–‡ä»¶ä¸­å†™å…¥è„šæœ¬ã€‚</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>FROM centos</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>VOLUME <span class=\"token punctuation\">[</span><span class=\"token string\">\"volume01\"</span>, <span class=\"token string\">\"volume02\"</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>CMD <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"--------------success--------------\"</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>CMD /bin/bash</pre></td></tr></table></figure><blockquote>\n<p>FROM: ç”¨äºæŒ‡å®šåŸºç¡€é•œåƒï¼Œå®šåˆ¶çš„é•œåƒéƒ½æ˜¯åŸºäº FROM çš„é•œåƒã€‚</p>\n</blockquote>\n</li>\n<li>\n<p>æ„å»ºé•œåƒ</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"><span>å‘½ä»¤è¡Œæç¤ºç¬¦</span></figcaption><table><tr><td data-num=\"1\"></td><td data-command=\"\"></td><td><pre><span class=\"token comment\"># docker build -f [è„šæœ¬è·¯å¾„]:[é•œåƒæ ‡ç­¾] .</span></pre></td></tr><tr><td data-num=\"2\"></td><td data-command=\"[root@xxx ~] $\"></td><td><pre>docker build -f dockerfile:v3 <span class=\"token builtin class-name\">.</span></pre></td></tr></table></figure><blockquote>\n<p>æ³¨æ„ï¼šå‘½ä»¤ç»“å°¾æœ‰ä¸€ä¸ª  <code>.</code>  ï¼Œä»£è¡¨ç€æœ¬æ¬¡æ‰§è¡Œçš„ä¸Šä¸‹æ–‡è·¯å¾„ã€‚</p>\n</blockquote>\n</li>\n<li>\n<p>å¯åŠ¨æ„å»ºæˆåŠŸåçš„é•œåƒ</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"><span>å‘½ä»¤è¡Œæç¤ºç¬¦</span></figcaption><table><tr><td data-num=\"1\"></td><td data-command=\"[root@xxx ~] $\"></td><td><pre>docker run -it <span class=\"token punctuation\">[</span>é•œåƒID<span class=\"token punctuation\">]</span> /bin/bash</pre></td></tr></table></figure><p>å¯åŠ¨æˆåŠŸåï¼Œæ ¹ç›®å½•ä¸‹ä¼šç”Ÿæˆè„šæœ¬ä¸­æŒ‡å®šçš„æŒ‚è½½ç›®å½•ï¼ˆåŒ¿åæŒ‚è½½ï¼‰ã€‚</p>\n</li>\n</ol>\n<h4 id=\"dockerfile-æ„å»ºè¯´æ˜\"><a class=\"anchor\" href=\"#dockerfile-æ„å»ºè¯´æ˜\">#</a> DockerFile æ„å»ºè¯´æ˜</h4>\n<ul>\n<li>æ¯ä¸ªä¿ç•™å…³é”®å­—éƒ½å¿…é¡»æ˜¯å¤§å†™ã€‚</li>\n<li>æ‰§è¡Œé¡ºåºä»ä¸Šè‡³ä¸‹ã€‚</li>\n<li><code>#</code>  è¡¨ç¤ºæ³¨è§£ã€‚</li>\n<li>æ¯ä¸€ä¸ªæŒ‡ä»¤éƒ½ä¼šåˆ›å»ºæäº¤ä¸€ä¸ªæ–°çš„é•œåƒå±‚ã€‚</li>\n</ul>\n<h4 id=\"dockerfile-æŒ‡ä»¤\"><a class=\"anchor\" href=\"#dockerfile-æŒ‡ä»¤\">#</a> DockerFile æŒ‡ä»¤</h4>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>FROM      <span class=\"token comment\"># åŸºç¡€é•œåƒ</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>MAINTAINER  <span class=\"token comment\"># é•œåƒä½œè€…ï¼šå§“å + é‚®ç®±</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>RUN       <span class=\"token comment\"># é•œåƒæ„å»ºæ—¶éœ€è¦è¿è¡Œçš„å‘½ä»¤</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>ADD       <span class=\"token comment\"># æ­¥éª¤</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>WORKDIR    <span class=\"token comment\"># é•œåƒçš„å·¥ä½œç›®å½•</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>VOLUME     <span class=\"token comment\"># æŒ‚è½½ç›®å½•</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>EXPOSE     <span class=\"token comment\"># æŒ‡å®šæš´éœ²çš„ç«¯å£</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>CMD       <span class=\"token comment\"># æŒ‡å®šå®¹å™¨å¯åŠ¨æ—¶è¦è¿è¡Œçš„å‘½ä»¤ï¼ˆåªæœ‰æœ€åä¸€ä¸ªä¼šç”Ÿæ•ˆï¼Œå¯è¢«æ›¿ä»£ï¼‰</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>ENTRYPOINT  <span class=\"token comment\"># ä¸ CMD ç›¸ä¼¼ï¼Œä½†å¯ä»¥è¿½åŠ å‘½ä»¤</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>ONBUILD    <span class=\"token comment\"># ï¼ˆè§¦å‘æŒ‡ä»¤ï¼‰</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>COPY      <span class=\"token comment\"># ç±»ä¼¼ ADDï¼Œå°†æ–‡ä»¶æ‹·è´åˆ°é•œåƒä¸­</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>ENV       <span class=\"token comment\"># æ„å»ºæ—¶è®¾ç½®ç¯å¢ƒå˜é‡</span></pre></td></tr></table></figure><blockquote>\n<p>docker history [é•œåƒ ID] å¯ä»¥æŸ¥çœ‹é•œåƒçš„æ„å»ºè¿‡ç¨‹ã€‚</p>\n<p>DockerFile çš„å®˜æ–¹å‘½åæ–‡ä»¶ä¸º  <code>Dockerfile</code>  ï¼Œç¼–è¯‘æ—¶ä¸æŒ‡å®š  <code>-f</code>  å‚æ•°åˆ™ä¼šè‡ªåŠ¨è¯»å–è¯¥æ–‡ä»¶ã€‚</p>\n</blockquote>\n<h4 id=\"dockerfile-æ­¥éª¤æ€»ç»“\"><a class=\"anchor\" href=\"#dockerfile-æ­¥éª¤æ€»ç»“\">#</a> DockerFile æ­¥éª¤æ€»ç»“</h4>\n<ol>\n<li>ç¼–å†™ä¸€ä¸ª dockerfile æ–‡ä»¶ã€‚</li>\n<li>docker build æ„å»ºç§°ä¸ºä¸€ä¸ªé•œåƒã€‚</li>\n<li>docker run è¿è¡Œé•œåƒã€‚</li>\n<li>docker push å‘å¸ƒé•œåƒï¼ˆDockerHubã€é˜¿é‡Œäº‘é•œåƒä»“åº“ï¼‰</li>\n</ol>\n<h4 id=\"åˆ¶ä½œ-tomcat-é•œåƒ\"><a class=\"anchor\" href=\"#åˆ¶ä½œ-tomcat-é•œåƒ\">#</a> åˆ¶ä½œ Tomcat é•œåƒ</h4>\n<ol>\n<li>\n<p>å‡†å¤‡ç›®å½•åŠé•œåƒæ–‡ä»¶ã€‚</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"><span>å‘½ä»¤è¡Œæç¤ºç¬¦</span></figcaption><table><tr><td data-num=\"1\"></td><td data-command=\"[root@xxx ~] $\"></td><td><pre><span class=\"token builtin class-name\">cd</span> /usr</pre></td></tr><tr><td data-num=\"2\"></td><td data-command=\"[root@xxx usr] $\"></td><td><pre><span class=\"token function\">mkdir</span> soft</pre></td></tr><tr><td data-num=\"3\"></td><td data-command=\"[root@xxx usr] $\"></td><td><pre><span class=\"token builtin class-name\">cd</span> soft</pre></td></tr><tr><td data-num=\"4\"></td><td data-command=\"[root@xxx soft] $\"></td><td><pre><span class=\"token function\">wget</span> https://mirrors.cnnic.cn/apache/tomcat/tomcat-9/v9.0.52/src/apache-tomcat-9.0.52-src.tar.gz</pre></td></tr><tr><td data-num=\"5\"></td><td data-command=\"[root@xxx soft] $\"></td><td><pre><span class=\"token function\">wget</span> https://download.oracle.com/otn/java/jdk/8u301-b09/d3c52aa6bfa54d3ca74e617f18309292/jdk-8u301-linux-x64.tar.gz</pre></td></tr></table></figure></li>\n<li>\n<p>åˆ›å»ºå¹¶ç¼–è¾‘  <code>Dockerfile</code>  æ–‡ä»¶ã€‚</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"><span>å‘½ä»¤è¡Œæç¤ºç¬¦</span></figcaption><table><tr><td data-num=\"1\"></td><td data-command=\"[root@xxx soft] $\"></td><td><pre><span class=\"token function\">vim</span> Dockerfile</pre></td></tr></table></figure><p>å†™å…¥å¦‚ä¸‹å†…å®¹ï¼ˆå¯æ ¹æ®å®é™…æƒ…å†µè°ƒæ•´ï¼‰ï¼š</p>\n<figure class=\"highlight dockerfile\"><figcaption data-lang=\"Docker\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token instruction\"><span class=\"token keyword\">FROM</span> centos</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token instruction\"><span class=\"token keyword\">MAINTAINER</span> Chinmoku&lt;xfc_exclave@163.com></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token instruction\"><span class=\"token keyword\">ADD</span> jdk-8u301-linux-x64.tar.gz /usr/soft/</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token instruction\"><span class=\"token keyword\">ADD</span> apache-tomcat-9.0.52-src.tar.gz /usr/soft/</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token instruction\"><span class=\"token keyword\">RUN</span> yum -y install vim</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token instruction\"><span class=\"token keyword\">ENV</span> MYPATH /usr/soft</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token instruction\"><span class=\"token keyword\">WORKDIR</span> <span class=\"token variable\">$MYPATH</span></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token instruction\"><span class=\"token keyword\">ENV</span> JAVA_HOME /usr/soft/jdk1.8.0_301</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token instruction\"><span class=\"token keyword\">ENV</span> CLASSPATH <span class=\"token variable\">$JAVA_HOME</span>/lib/dt.jar:<span class=\"token variable\">$JAVA_HOME</span>/lib/tools.jar</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token instruction\"><span class=\"token keyword\">ENV</span> CATALINA_HOME /usr/soft/apache-tomcat-9.0.52-src</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token instruction\"><span class=\"token keyword\">ENV</span> CATALINA_BASH /usr/soft/apache-tomcat-9.0.52-src</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token instruction\"><span class=\"token keyword\">ENV</span> PATH <span class=\"token variable\">$PATH</span>:<span class=\"token variable\">$JAVA_HOME</span>/bin;<span class=\"token variable\">$CATALINA_HOME</span>/lib;<span class=\"token variable\">$CATALINA_BASH</span>/bin</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token instruction\"><span class=\"token keyword\">EXPOSE</span> 8080</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token instruction\"><span class=\"token keyword\">CMD</span> mkdir /usr/soft/apache-tomcat-9.0.52-src/logs &amp;&amp; chmod -R 777 /usr/soft/apache-tomcat-9.0.52-src/bin/*.sh &amp;&amp; /usr/soft/apache-tomcat-9.0.52-src/bin/startup.sh &amp;&amp; tail -F /usr/soft/apache-tomcat-9.0.52-src/bin/logs/catalina.out</span></pre></td></tr></table></figure></li>\n<li>\n<p>æ„å»ºé•œåƒã€‚</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"><span>å‘½ä»¤è¡Œæç¤ºç¬¦</span></figcaption><table><tr><td data-num=\"1\"></td><td data-command=\"[root@xxx soft] $\"></td><td><pre>docker build -t mytomcat <span class=\"token builtin class-name\">.</span></pre></td></tr><tr><td data-num=\"2\"></td><td data-command=\"[root@xxx soft] $\"></td><td><pre>docker images</pre></td></tr><tr><td data-num=\"3\"></td><td data-command=\"\"></td><td><pre>REPOSITORY   TAG       IMAGE ID       CREATED         SIZE</pre></td></tr><tr><td data-num=\"4\"></td><td data-command=\"\"></td><td><pre>mytomcat     latest    93a17796c1b6   <span class=\"token number\">2</span> minutes ago   309MB</pre></td></tr><tr><td data-num=\"5\"></td><td data-command=\"\"></td><td><pre>centos       latest    300e315adb2f   <span class=\"token number\">8</span> months ago    209MB</pre></td></tr></table></figure></li>\n<li>\n<p>å¯åŠ¨å®¹å™¨ã€‚</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"><span>å‘½ä»¤è¡Œæç¤ºç¬¦</span></figcaption><table><tr><td data-num=\"1\"></td><td data-command=\"[root@xxx soft] $\"></td><td><pre>docker run -d -p <span class=\"token number\">9090</span>:8080 --name ChinmokuTomcat -v /home/Chinmoku/build/tomcat/test/:/usr/local/apache-tomcat-9.0.52-src/webapps/test -v /home/Chinmoku/build/tomcat/tomcatlogs/:/usr/local/apache-tomcat-9.0.52-src/logs mytomcat</pre></td></tr><tr><td data-num=\"2\"></td><td data-command=\"\"></td><td><pre>d7cd19e650dd71c21d293199578acd80407d04c27ff132648cddc57ff2327d99</pre></td></tr><tr><td data-num=\"3\"></td><td data-command=\"\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td data-command=\"[root@xxx soft] $\"></td><td><pre>docker <span class=\"token function\">ps</span> <span class=\"token comment\"># æŸ¥çœ‹å®¹å™¨æ˜¯å¦å­˜åœ¨è¯¥å®¹å™¨</span></pre></td></tr></table></figure><p>å¦‚æœå®¹å™¨åˆ—è¡¨ä¸­ä¸å­˜åœ¨ï¼Œåˆ™é€šè¿‡æŸ¥çœ‹å®¹å™¨æ—¥å¿—è¿›è¡Œé—®é¢˜æ’æŸ¥ï¼š</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"><span>å‘½ä»¤è¡Œæç¤ºç¬¦</span></figcaption><table><tr><td data-num=\"1\"></td><td data-command=\"[root@xxx soft] $\"></td><td><pre>docker <span class=\"token function\">ps</span> -a <span class=\"token comment\"># æŸ¥çœ‹å®¹å™¨å†å²è®°å½•</span></pre></td></tr><tr><td data-num=\"2\"></td><td data-command=\"[root@xxx soft] $\"></td><td><pre>docker logs -tf --tail <span class=\"token number\">20</span> d7cd19e650dd7 <span class=\"token comment\"># æŸ¥çœ‹ 20 æ¡æ—¥å¿—ä¿¡æ¯</span></pre></td></tr></table></figure><p>é€šè¿‡æ—¥å¿—ä¿¡æ¯ï¼Œåˆ†æå®¹å™¨å¯åŠ¨å¤±è´¥æˆ–è‡ªåŠ¨åœæ­¢çš„åŸå› ï¼ˆä¸€èˆ¬æ˜¯ Dockerfile æ–‡ä»¶ç¼–å†™é”™è¯¯æˆ–æ–‡ä»¶æƒé™ç­‰é—®é¢˜å¼•èµ·çš„ï¼‰ï¼Œåœ¨æ’æŸ¥é—®é¢˜çš„è¿‡ç¨‹ä¸­ï¼Œæ‚¨ä¹Ÿè®¸ä¼šåå¤ç”¨åˆ°ä»¥ä¸‹å‘½ä»¤ï¼š</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"><span>å‘½ä»¤è¡Œæç¤ºç¬¦</span></figcaption><table><tr><td data-num=\"1\"></td><td data-command=\"[root@xxx soft] $\"></td><td><pre>docker <span class=\"token function\">ps</span> -a</pre></td></tr><tr><td data-num=\"2\"></td><td data-command=\"[root@xxx soft] $\"></td><td><pre>docker logs -tf --tail <span class=\"token number\">20</span> xxx <span class=\"token comment\"># æŸ¥çœ‹æ—¥å¿—</span></pre></td></tr><tr><td data-num=\"3\"></td><td data-command=\"[root@xxx soft] $\"></td><td><pre>docker <span class=\"token function\">rm</span> xxx</pre></td></tr><tr><td data-num=\"4\"></td><td data-command=\"[root@xxx soft] $\"></td><td><pre>docker rmi -f <span class=\"token variable\"><span class=\"token variable\">$(</span>docker images -aq<span class=\"token variable\">)</span></span> <span class=\"token comment\"># ç§»é™¤æ‰€æœ‰é•œåƒ</span></pre></td></tr><tr><td data-num=\"5\"></td><td data-command=\"[root@xxx soft] $\"></td><td><pre>docker inspect xxx</pre></td></tr></table></figure></li>\n<li>\n<p>å¯åŠ¨æˆåŠŸåï¼Œè¿›å…¥å®¹å™¨ã€‚</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"><span>å‘½ä»¤è¡Œæç¤ºç¬¦</span></figcaption><table><tr><td data-num=\"1\"></td><td data-command=\"[root@xxx soft] $\"></td><td><pre>docker <span class=\"token builtin class-name\">exec</span> -it d7cd19e650dd7 /bin/bash</pre></td></tr></table></figure><blockquote>\n<p>ç”±äºå½“å‰å®¹å™¨å·²å­˜åœ¨å…¶ä»–æ´»è·ƒè¿›ç¨‹ï¼Œè¿™é‡Œä½¿ç”¨  <code>CTRL + P + Q</code>  æˆ–  <code>exit</code>  å‡å¯é€€å‡ºå®¹å™¨ã€‚</p>\n<p>å¦å¤–ï¼Œåœ¨äº‘æœåŠ¡å™¨ç¯å¢ƒä¸‹ï¼Œå¤–éƒ¨ç½‘ç»œè®¿é—®æ—¶ï¼Œéœ€è¦æ³¨æ„é…ç½®å®‰å…¨ç»„è§„åˆ™ã€‚</p>\n</blockquote>\n</li>\n<li>\n<p>éƒ¨ç½²æµ‹è¯•æ–‡ä»¶ã€‚</p>\n<p>åœ¨  <code>/webapps/test</code>  çš„æŒ‚è½½ç›®å½•ä¸‹åˆ›å»ºæµ‹è¯•æ–‡ä»¶ï¼š</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"><span>å‘½ä»¤è¡Œæç¤ºç¬¦</span></figcaption><table><tr><td data-num=\"1\"></td><td data-command=\"[root@xxx soft] $\"></td><td><pre><span class=\"token builtin class-name\">cd</span> /home/Chinmoku/build/tomcat/test</pre></td></tr><tr><td data-num=\"2\"></td><td data-command=\"[root@xxx test] $\"></td><td><pre><span class=\"token function\">mkdir</span> WEB-INF</pre></td></tr><tr><td data-num=\"3\"></td><td data-command=\"[root@xxx test] $\"></td><td><pre><span class=\"token builtin class-name\">cd</span> WEB-INF</pre></td></tr></table></figure><p>åˆ›å»ºå¹¶ç¼–è¾‘  <code>web.xml</code>  æ–‡ä»¶ï¼š</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"><span>å‘½ä»¤è¡Œæç¤ºç¬¦</span></figcaption><table><tr><td data-num=\"1\"></td><td data-command=\"[root@xxx WEB-INF] $\"></td><td><pre><span class=\"token function\">vim</span> web.xml</pre></td></tr></table></figure><p>å†™å…¥å¦‚ä¸‹å†…å®¹ï¼š</p>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token prolog\">&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>web-app</span> <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>xsi</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.w3.org/2001/XMLSchema-instance<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">xmlns</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://java.sun.com/xml/ns/javaee<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>web</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\"><span class=\"token namespace\">xsi:</span>schemaLocation</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>WebApp_ID<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">version</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>2.5<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>display-name</span><span class=\"token punctuation\">></span></span>docker-tomcat<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>display-name</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>welcome-file-list</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>welcome-file</span><span class=\"token punctuation\">></span></span>index.html<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>welcome-file</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>welcome-file-list</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>web-app</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p>åˆ›å»ºå¹¶ç¼–è¾‘  <code>index.html</code>  æ–‡ä»¶ï¼š</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"><span>å‘½ä»¤è¡Œæç¤ºç¬¦</span></figcaption><table><tr><td data-num=\"1\"></td><td data-command=\"[root@xxx WEB-INF] $\"></td><td><pre><span class=\"token function\">vim</span> index.html</pre></td></tr></table></figure><p>å†™å…¥å¦‚ä¸‹å†…å®¹ï¼š</p>\n<figure class=\"highlight html\"><figcaption data-lang=\"HTML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token doctype\"><span class=\"token punctuation\">&lt;!</span><span class=\"token doctype-tag\">DOCTYPE</span> <span class=\"token name\">html</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>head</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">charset</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>UTF-8<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>title</span><span class=\"token punctuation\">></span></span>docker:::tomcat<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>title</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>head</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h3</span> <span class=\"token special-attr\"><span class=\"token attr-name\">style</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token value css language-css\"><span class=\"token property\">color</span><span class=\"token punctuation\">:</span> red<span class=\"token punctuation\">;</span></span><span class=\"token punctuation\">\"</span></span></span><span class=\"token punctuation\">></span></span>Docker built tomcat successful!<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h3</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>html</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure></li>\n<li>\n<p>å¤–éƒ¨æµè§ˆå™¨è®¿é—®ã€‚</p>\n</li>\n</ol>\n<h4 id=\"é•œåƒå‘å¸ƒ\"><a class=\"anchor\" href=\"#é•œåƒå‘å¸ƒ\">#</a> é•œåƒå‘å¸ƒ</h4>\n<details><summary>å‘å¸ƒåˆ° Docker Hub</summary><div>\n<ol>\n<li>\n<p>Docker Hub æ³¨å†Œè´¦å·ã€‚</p>\n</li>\n<li>\n<p>ç™»å½•ã€‚</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"><span>å‘½ä»¤è¡Œæç¤ºç¬¦</span></figcaption><table><tr><td data-num=\"1\"></td><td data-command=\"[root@xxx ~] $\"></td><td><pre>docker login -u <span class=\"token punctuation\">[</span>ç”¨æˆ·å<span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"2\"></td><td data-command=\"\"></td><td><pre>Password: ******</pre></td></tr></table></figure></li>\n<li>\n<p>æäº¤ã€‚</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"><span>å‘½ä»¤è¡Œæç¤ºç¬¦</span></figcaption><table><tr><td data-num=\"1\"></td><td data-command=\"[root@xxx ~] $\"></td><td><pre>docker push <span class=\"token punctuation\">[</span>ä»“åº“å<span class=\"token punctuation\">]</span>/<span class=\"token punctuation\">[</span>é•œåƒå<span class=\"token punctuation\">]</span>:<span class=\"token punctuation\">[</span>ç‰ˆæœ¬æ ‡ç­¾<span class=\"token punctuation\">]</span></pre></td></tr></table></figure></li>\n</ol>\n</div></details>\n<details><summary>å‘å¸ƒåˆ°é˜¿é‡Œäº‘</summary><div>\n<p>å‚è€ƒé˜¿é‡Œäº‘æ–‡æ¡£ï¼š<span class=\"exturl\" data-url=\"aHR0cHM6Ly9oZWxwLmFsaXl1bi5jb20vZG9jdW1lbnRfZGV0YWlsLzE0MzMzNi5odG1s\">https://help.aliyun.com/document_detail/143336.html</span></p>\n</div></details>\n<h3 id=\"docker-æµç¨‹æ€»ç»“\"><a class=\"anchor\" href=\"#docker-æµç¨‹æ€»ç»“\">#</a> Docker æµç¨‹æ€»ç»“</h3>\n<p><img data-src=\"https://img.xfc-exclave.com/2021/08/fe3d92358148e397a84020f11c15d5011628612250.png\" alt=\"Dockeræµç¨‹å›¾\" /></p>\n<h3 id=\"docker-ç½‘ç»œ\"><a class=\"anchor\" href=\"#docker-ç½‘ç»œ\">#</a> Docker ç½‘ç»œ</h3>\n<p>å®¹å™¨ä¸­å¯ä»¥è¿è¡Œä¸€äº›ç½‘ç»œåº”ç”¨ï¼Œè¦è®©å¤–éƒ¨ä¹Ÿå¯ä»¥è®¿é—®è¿™äº›åº”ç”¨ï¼Œå¯ä»¥é€šè¿‡  <code>-P</code>  æˆ–  <code>-p</code>  å‚æ•°æ¥æŒ‡å®šç«¯å£æ˜ å°„ã€‚</p>\n<p>å½“ä½¿ç”¨  <code>-P</code>  æ ‡è®°æ—¶ï¼ŒDocker ä¼šéšæœºæ˜ å°„ä¸€ä¸ªç«¯å£åˆ°å†…éƒ¨å®¹å™¨å¼€æ”¾çš„ç½‘ç»œç«¯å£ã€‚</p>\n<p><code>-p</code>  åˆ™å¯ä»¥æŒ‡å®šè¦æ˜ å°„çš„ç«¯å£ï¼Œå¹¶ä¸”ï¼Œåœ¨ä¸€ä¸ªæŒ‡å®šç«¯å£ä¸Šåªå¯ä»¥ç»‘å®šä¸€ä¸ªå®¹å™¨ã€‚</p>\n<h4 id=\"docker0\"><a class=\"anchor\" href=\"#docker0\">#</a> Docker0</h4>\n<p>å®¿ä¸»æœºæ¯å¯åŠ¨ä¸€ä¸ª Docker å®¹å™¨ï¼Œå°±ä¼šç»™å®¹å™¨åˆ†é…ä¸€ä¸ª IP ã€‚å®¿ä¸»æœºåªè¦å®‰è£…äº† docker ï¼Œå°±ä¼šå®‰è£…ä¸€ä¸ª docker0 ç½‘å¡è¿›è¡Œæ¡¥æ¥ï¼Œè¿™ç§æŠ€æœ¯è¢«ç§°ä¸º  <code>evth-pair</code>  æŠ€æœ¯ã€‚</p>\n<blockquote>\n<p>veth-pair æ˜¯æˆå¯¹å‡ºç°çš„è™šæ‹Ÿè®¾å¤‡æ¥å£ï¼Œå®ƒä»¬ä¸€ç«¯è¿ç€åè®®æ ˆï¼Œä¸€ç«¯å½¼æ­¤ç›¸è¿ï¼Œæ­£å› ä¸ºæœ‰è¿™ä¸ªç‰¹æ€§ï¼Œå®ƒå¸¸å¸¸å……å½“ç€ä¸€ä¸ªæ¡¥æ¢ï¼Œè¿æ¥ç€å„ç§è™šæ‹Ÿç½‘ç»œè®¾å¤‡ï¼Œä»¥æ­¤æ„å»ºå¤æ‚çš„è™šæ‹Ÿç½‘ç»œç»“æ„ã€‚</p>\n</blockquote>\n<h5 id=\"docker-çš„ç½‘ç»œæ¨¡å¼\"><a class=\"anchor\" href=\"#docker-çš„ç½‘ç»œæ¨¡å¼\">#</a> Docker çš„ç½‘ç»œæ¨¡å¼</h5>\n<p>æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼Œå¯æŸ¥çœ‹å½“å‰ä¸»æœº docker ç¯å¢ƒçš„ç½‘ç»œæ¨¡å¼ä¿¡æ¯ï¼š</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"><span>å‘½ä»¤è¡Œæç¤ºç¬¦</span></figcaption><table><tr><td data-num=\"1\"></td><td data-command=\"[root@xxx ~] $\"></td><td><pre>docker network <span class=\"token function\">ls</span></pre></td></tr><tr><td data-num=\"2\"></td><td data-command=\"\"></td><td><pre>NETWORK ID     NAME      DRIVER    SCOPE</pre></td></tr><tr><td data-num=\"3\"></td><td data-command=\"\"></td><td><pre>0b517709dd56   bridge    bridge    <span class=\"token builtin class-name\">local</span></pre></td></tr><tr><td data-num=\"4\"></td><td data-command=\"\"></td><td><pre>e49e96b5ebf4   <span class=\"token function\">host</span>      <span class=\"token function\">host</span>      <span class=\"token builtin class-name\">local</span></pre></td></tr><tr><td data-num=\"5\"></td><td data-command=\"\"></td><td><pre>963d10eff9fe   none      null      <span class=\"token builtin class-name\">local</span></pre></td></tr></table></figure><blockquote>\n<p>Docker ç½‘æ¡¥æ˜¯å®¿ä¸»æœºè™šæ‹Ÿå‡ºæ¥çš„ï¼Œå¹¶ä¸æ˜¯çœŸå®å­˜åœ¨çš„ç½‘ç»œè®¾å¤‡ï¼Œå¤–éƒ¨ç½‘ç»œæ˜¯æ— æ³•å¯»å€åˆ°çš„ï¼Œè¿™ä¹Ÿæ„å‘³ç€å¤–éƒ¨ç½‘ç»œæ— æ³•é€šè¿‡ç›´æ¥ Container-IP è®¿é—®åˆ°å®¹å™¨ã€‚å¦‚æœå®¹å™¨å¸Œæœ›å¤–éƒ¨è®¿é—®èƒ½å¤Ÿè®¿é—®åˆ°ï¼Œå¯ä»¥é€šè¿‡æ˜ å°„å®¹å™¨ç«¯å£åˆ°å®¿ä¸»ä¸»æœºï¼ˆç«¯å£æ˜ å°„ï¼‰ï¼Œå³ docker run åˆ›å»ºå®¹å™¨æ—¶å€™é€šè¿‡ -p æˆ– -P å‚æ•°æ¥å¯ç”¨ï¼Œè®¿é—®å®¹å™¨çš„æ—¶å€™å°±é€šè¿‡ [å®¿ä¸»æœº IP]:[å®¹å™¨ç«¯å£] è®¿é—®å®¹å™¨ã€‚</p>\n</blockquote>\n<ol>\n<li>\n<p>host æ¨¡å¼</p>\n<p>é…ç½®æ–¹å¼ï¼š  <code>-network=host</code></p>\n<p>å¦‚æœå¯åŠ¨å®¹å™¨çš„æ—¶å€™ä½¿ç”¨ host æ¨¡å¼ï¼Œé‚£ä¹ˆè¿™ä¸ªå®¹å™¨å°†ä¸ä¼šè·å¾—ä¸€ä¸ªç‹¬ç«‹çš„ Network Namespace ï¼Œè€Œæ˜¯å’Œå®¿ä¸»æœºå…±ç”¨ä¸€ä¸ª Network Namespace ã€‚å®¹å™¨å°†ä¸ä¼šè™šæ‹Ÿå‡ºè‡ªå·±çš„ç½‘å¡ï¼Œé…ç½®è‡ªå·±çš„ IP ç­‰ï¼Œè€Œæ˜¯ä½¿ç”¨å®¿ä¸»æœºçš„ IP å’Œç«¯å£ã€‚ä½†æ˜¯ï¼Œå®¹å™¨çš„å…¶ä»–æ–¹é¢ï¼Œå¦‚æ–‡ä»¶ç³»ç»Ÿã€è¿›ç¨‹åˆ—è¡¨ç­‰è¿˜æ˜¯å’Œå®¿ä¸»æœºéš”ç¦»çš„ã€‚</p>\n<p>host æ¨¡å¼æœ€å¤§çš„ä¼˜åŠ¿åœ¨äºç½‘ç»œæ€§èƒ½æ¯”è¾ƒå¥½ï¼Œä½†æ˜¯ docker host ä¸Šå·²ç»ä½¿ç”¨çš„ç«¯å£å°±ä¸èƒ½å†ç”¨äº†ï¼Œå› æ­¤ç½‘ç»œçš„éš”ç¦»æ€§ä¸å¥½ã€‚</p>\n</li>\n<li>\n<p>container æ¨¡å¼</p>\n<p>é…ç½®æ–¹å¼ï¼š  <code>â€“net=container:[NAME/ID]</code></p>\n<p>è¿™ä¸ªæ¨¡å¼æŒ‡å®šæ–°åˆ›å»ºçš„å®¹å™¨å’Œå·²ç»å­˜åœ¨çš„ä¸€ä¸ªå®¹å™¨å…±äº«ä¸€ä¸ª Network Namespace ï¼Œè€Œä¸æ˜¯å’Œå®¿ä¸»æœºå…±äº«ã€‚æ–°åˆ›å»ºçš„å®¹å™¨ä¸ä¼šåˆ›å»ºè‡ªå·±çš„ç½‘å¡ï¼Œé…ç½®è‡ªå·±çš„ IPï¼Œè€Œæ˜¯å’Œä¸€ä¸ªæŒ‡å®šçš„å®¹å™¨å…±äº« IPã€ç«¯å£èŒƒå›´ç­‰ã€‚</p>\n</li>\n<li>\n<p>none æ¨¡å¼</p>\n<p>é…ç½®æ–¹å¼ï¼š  <code>â€“net=none</code></p>\n<p>ä½¿ç”¨ none æ¨¡å¼æ—¶ï¼Œ Docker å®¹å™¨æ‹¥æœ‰è‡ªå·±çš„ Network Namespace ï¼Œä½†æ˜¯ï¼Œå¹¶ä¸ä¸º Docker å®¹å™¨è¿›è¡Œä»»ä½•ç½‘ç»œé…ç½®ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™ä¸ª Docker å®¹å™¨æ²¡æœ‰ç½‘å¡ã€IPã€è·¯ç”±ç­‰ä¿¡æ¯ã€‚éœ€è¦æˆ‘ä»¬è‡ªå·±ä¸º Docker å®¹å™¨æ·»åŠ ç½‘å¡ã€é…ç½® IP ç­‰ã€‚</p>\n<p>è¿™ç§ç±»å‹çš„ç½‘ç»œæ²¡æœ‰åŠæ³•è”ç½‘ï¼Œå°é—­çš„ç½‘ç»œèƒ½å¾ˆå¥½çš„ä¿è¯å®¹å™¨çš„å®‰å…¨æ€§ã€‚</p>\n</li>\n<li>\n<p>bridge æ¨¡å¼</p>\n<p>é…ç½®æ–¹å¼ï¼š  <code>  â€“net=bridge</code>  ï¼ˆdocker é»˜è®¤ï¼‰</p>\n<p>å½“ Docker è¿›ç¨‹å¯åŠ¨æ—¶ï¼Œä¼šåœ¨ä¸»æœºä¸Šåˆ›å»ºä¸€ä¸ªåä¸º docker0 çš„è™šæ‹Ÿç½‘æ¡¥ï¼Œæ­¤ä¸»æœºä¸Šå¯åŠ¨çš„ Docker å®¹å™¨ä¼šè¿æ¥åˆ°è¿™ä¸ªè™šæ‹Ÿç½‘æ¡¥ä¸Šã€‚è™šæ‹Ÿç½‘æ¡¥çš„å·¥ä½œæ–¹å¼å’Œç‰©ç†äº¤æ¢æœºç±»ä¼¼ï¼Œè¿™æ ·ä¸»æœºä¸Šçš„æ‰€æœ‰å®¹å™¨å°±é€šè¿‡äº¤æ¢æœºè¿åœ¨äº†ä¸€ä¸ªäºŒå±‚ç½‘ç»œä¸­ã€‚</p>\n<p>ä» docker0 å­ç½‘ä¸­åˆ†é…ä¸€ä¸ª IP ç»™å®¹å™¨ä½¿ç”¨ï¼Œå¹¶è®¾ç½® docker0 çš„ IP åœ°å€ä¸ºå®¹å™¨çš„é»˜è®¤ç½‘å…³ã€‚åœ¨ä¸»æœºä¸Šåˆ›å»ºä¸€å¯¹è™šæ‹Ÿç½‘å¡ veth-pair è®¾å¤‡ï¼ŒDocker å°† veth-pair è®¾å¤‡çš„ä¸€ç«¯æ”¾åœ¨æ–°åˆ›å»ºçš„å®¹å™¨ä¸­ï¼Œå¹¶å‘½åä¸º eth0 ï¼ˆå®¹å™¨çš„ç½‘å¡ï¼‰ï¼Œå¦ä¸€ç«¯æ”¾åœ¨ä¸»æœºä¸­ï¼Œä»¥ vethxxx è¿™æ ·ç±»ä¼¼çš„åå­—å‘½åï¼Œå¹¶å°†è¿™ä¸ªç½‘ç»œè®¾å¤‡åŠ å…¥åˆ° docker0 ç½‘æ¡¥ä¸­ã€‚å¯ä»¥é€šè¿‡  <code>brctl show</code>  å‘½ä»¤æŸ¥çœ‹ã€‚</p>\n<blockquote>\n<p>ä½¿ç”¨  <code>brctl show</code>  å‘½ä»¤éœ€è¦å…ˆå®‰è£…å·¥å…·åŒ…ï¼š  <code>sudo yum install -y bridge-utils</code>  ã€‚</p>\n</blockquote>\n<p>bridge æ¨¡å¼æ˜¯ docker çš„é»˜è®¤ç½‘ç»œæ¨¡å¼ï¼Œä¸å†™  <code>--net</code>  å‚æ•°ï¼Œå°±æ˜¯ bridge æ¨¡å¼ã€‚ä½¿ç”¨  <code>docker run -p</code>  æ—¶ï¼Œ docker å®é™…æ˜¯åœ¨ iptables åšäº† DNAT è§„åˆ™ï¼Œå®ç°ç«¯å£è½¬å‘åŠŸèƒ½ã€‚å¯ä»¥ä½¿ç”¨  <code>iptables -t nat -vnL</code>  æŸ¥çœ‹ã€‚</p>\n<p><img data-src=\"https://img.xfc-exclave.com/2021/08/bdbc4f6e310e8f0dc45dd214999934311629190192.png\" alt=\"Dockerç½‘ç»œæ¡¥æ¥\" /></p>\n</li>\n</ol>\n<h4 id=\"å®¹å™¨äº’è”-link\"><a class=\"anchor\" href=\"#å®¹å™¨äº’è”-link\">#</a> å®¹å™¨äº’è”ï¼š--link</h4>\n<p>åœ¨ä¸åŒçš„ docker å®¹å™¨ä¹‹é—´ï¼Œé€šè¿‡å¦‚ä¸‹æ–¹å¼ä½¿ç”¨  <code>ping</code>  å‘½ä»¤ï¼š</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"><span>å‘½ä»¤è¡Œæç¤ºç¬¦</span></figcaption><table><tr><td data-num=\"1\"></td><td data-command=\"[root@xxx ~] $\"></td><td><pre>docker <span class=\"token builtin class-name\">exec</span> -it tomcat02 <span class=\"token function\">ping</span> tomcat01 <span class=\"token comment\"># default</span></pre></td></tr><tr><td data-num=\"2\"></td><td data-command=\"\"></td><td><pre><span class=\"token comment\"># å‡å®š tomcat01 å’Œ tomcat02 åœ¨å¯åŠ¨æ—¶å‡æœªæŒ‡å®š --link å‚æ•°</span></pre></td></tr></table></figure><p>è¿™æ—¶ï¼Œä¸¤ä¸ªå®¹å™¨ä¹‹é—´æ˜¯æ— æ³• ping é€šçš„ã€‚</p>\n<p>ä½†å½“å®¹å™¨å¯åŠ¨æ—¶ï¼Œå¯ä»¥æŒ‡å®š  <code>--link</code>  å‚æ•°ï¼Œå³å¯å®ç°ä¸åŒå®¹å™¨ä¹‹é—´é€šè¿‡å®¹å™¨åè¿›è¡Œäº’è”ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"><span>å‘½ä»¤è¡Œæç¤ºç¬¦</span></figcaption><table><tr><td data-num=\"1\"></td><td data-command=\"\"></td><td><pre><span class=\"token comment\"># è¿è¡Œä¸€ä¸ª tomcat03 å®¹å™¨å¹¶è¿æ¥åˆ° tomcat02</span></pre></td></tr><tr><td data-num=\"2\"></td><td data-command=\"[root@xxx ~] $\"></td><td><pre>docker run -d -P --name tomcat03 --link tomcat02 tomcat</pre></td></tr><tr><td data-num=\"3\"></td><td data-command=\"\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td data-command=\"\"></td><td><pre><span class=\"token comment\"># å†æ¬¡æ‰§è¡Œ ping å‘½ä»¤</span></pre></td></tr><tr><td data-num=\"5\"></td><td data-command=\"[root@xxx ~] $\"></td><td><pre>docker <span class=\"token builtin class-name\">exec</span> -it tomcat03 <span class=\"token function\">ping</span> tomcat02 <span class=\"token comment\"># success</span></pre></td></tr><tr><td data-num=\"6\"></td><td data-command=\"[root@xxx ~] $\"></td><td><pre>docker <span class=\"token builtin class-name\">exec</span> -it tomcat02 <span class=\"token function\">ping</span> tomcat03 <span class=\"token comment\"># default</span></pre></td></tr></table></figure><p>é€šè¿‡ç¤ºä¾‹ï¼Œå¯ä»¥çœ‹å‡ºä½¿ç”¨  <code>--link</code>  å‚æ•°å¯ä»¥<strong>å•å‘</strong>æ‰“é€šå®¹å™¨ä¹‹é—´çš„ç½‘ç»œã€‚</p>\n<p>å®é™…ä¸Šï¼Œ  <code>--link</code>  å‚æ•°çš„æœ¬è´¨å°±æ˜¯åœ¨  <code>/etc/hosts</code>  æ–‡ä»¶ä¸­æ·»åŠ æ˜ å°„ã€‚</p>\n<blockquote>\n<p>ç°åœ¨ docker å·²ç»ä¸å†æ¨èä½¿ç”¨ --link æ¥è¿›è¡Œå®¹å™¨ä¹‹é—´çš„äº’è”ï¼Œè€Œæ˜¯æ¨èä½¿ç”¨è‡ªå®šä¹‰ç½‘ç»œã€‚</p>\n</blockquote>\n<h4 id=\"å®¹å™¨äº’è”è‡ªå®šä¹‰ç½‘ç»œ\"><a class=\"anchor\" href=\"#å®¹å™¨äº’è”è‡ªå®šä¹‰ç½‘ç»œ\">#</a> å®¹å™¨äº’è”ï¼šè‡ªå®šä¹‰ç½‘ç»œ</h4>\n<p>é€šè¿‡  <code>docker network create</code>  å‘½ä»¤å³å¯åˆ›å»ºè‡ªå®šä¹‰ç½‘ç»œã€‚</p>\n<p>å½“ä½¿ç”¨  <code>docker run</code>  å‘½ä»¤å¯åŠ¨å®¹å™¨æ—¶ï¼Œå…¶å®è¯¥å‘½ä»¤é»˜è®¤æŒ‡å®šäº†  <code>--network bridge</code>  å‚æ•°ï¼Œè¯¥å‚æ•°å³è¡¨ç¤ºæ‰€å¯åŠ¨çš„å®¹å™¨å°†ä½¿ç”¨åä¸º  <code>bridge</code>  çš„ç½‘ç»œï¼Œ  <code>bridge</code>  æ˜¯ docker0 é»˜è®¤çš„ç½‘ç»œåç§°ï¼Œå› æ­¤ï¼Œåœ¨åˆ›å»ºè‡ªå®šä¹‰ç½‘ç»œçš„åç§°åº”å½“é¿å¼€è¿™ä¸ªåå­—ã€‚</p>\n<p>åœ¨åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰ç½‘ç»œæ—¶ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ subnet å­ç½‘æ˜¯å¿…é¡»é…ç½®ï¼Œå¹¶åŠ ä¸Šæ©ç ï¼› driver é»˜è®¤å³ä¸º bridge æ¨¡å¼ï¼Œå€¼ä¸å€¼å®šéƒ½è¡Œã€‚ gateway æ˜¯é…ç½®ç½‘å…³ï¼Œå¿…å¡«ã€‚ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"><span>å‘½ä»¤è¡Œæç¤ºç¬¦</span></figcaption><table><tr><td data-num=\"1\"></td><td data-command=\"[root@xxx ~] $\"></td><td><pre>docker network create --driver bridge --subnet <span class=\"token number\">192.168</span>.0.0/16 --gateway <span class=\"token number\">192.168</span>.0.1 mynet</pre></td></tr></table></figure><p>åœ¨è¿™æ¡å‘½ä»¤ä¸­ï¼Œæˆ‘ä»¬æŒ‡å®šäº†ç½‘æ®µä¸º 192.168.0.0 ï¼Œæ©ç ä¸º 16 ä½ï¼ˆå³æ‹¥æœ‰ 255*255 ä¸ªå¯ç”¨ IPï¼Œ24 ä½åˆ™åªæœ‰ 255 ä¸ªå¯ç”¨ IPï¼‰ï¼ŒæŒ‡å®šçš„ç½‘å…³ä¸º 192.168.0.1 ï¼Œè‡ªå®šä¹‰çš„ç½‘ç»œåç§°ä¸º mynet ã€‚</p>\n<p>æŸ¥çœ‹è‡ªå®šä¹‰ç½‘ç»œåˆ›å»ºæ˜¯å¦æˆåŠŸï¼š</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"><span>å‘½ä»¤è¡Œæç¤ºç¬¦</span></figcaption><table><tr><td data-num=\"1\"></td><td data-command=\"[root@xxx ~] $\"></td><td><pre>docker network <span class=\"token function\">ls</span></pre></td></tr><tr><td data-num=\"2\"></td><td data-command=\"\"></td><td><pre>NETWORK ID     NAME      DRIVER    SCOPE</pre></td></tr><tr><td data-num=\"3\"></td><td data-command=\"\"></td><td><pre>0b517709dd56   bridge    bridge    <span class=\"token builtin class-name\">local</span></pre></td></tr><tr><td data-num=\"4\"></td><td data-command=\"\"></td><td><pre>e49e96b5ebf4   <span class=\"token function\">host</span>      <span class=\"token function\">host</span>      <span class=\"token builtin class-name\">local</span></pre></td></tr><tr><td data-num=\"5\"></td><td data-command=\"\"></td><td><pre>0df835de9886   mynet     bridge    <span class=\"token builtin class-name\">local</span></pre></td></tr><tr><td data-num=\"6\"></td><td data-command=\"\"></td><td><pre>963d10eff9fe   none      null      <span class=\"token builtin class-name\">local</span></pre></td></tr><tr><td data-num=\"7\"></td><td data-command=\"\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td data-command=\"[root@xxx ~] $\"></td><td><pre>docker network inspect mynet <span class=\"token comment\"># æŸ¥çœ‹è‡ªå®šä¹‰ç½‘ç»œä¿¡æ¯</span></pre></td></tr></table></figure><p>ä½¿ç”¨è‡ªå®šä¹‰ç½‘ç»œåˆ›å»ºå®¹å™¨ï¼š</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"><span>å‘½ä»¤è¡Œæç¤ºç¬¦</span></figcaption><table><tr><td data-num=\"1\"></td><td data-command=\"[root@xxx ~] $\"></td><td><pre>docker run -d -P --name tomcat-net-01 --net mynet tomcat</pre></td></tr><tr><td data-num=\"2\"></td><td data-command=\"[root@xxx ~] $\"></td><td><pre>docker run -d -P --name tomcat-net-02 --net mynet tomcat</pre></td></tr><tr><td data-num=\"3\"></td><td data-command=\"[root@xxx ~] $\"></td><td><pre>docker <span class=\"token builtin class-name\">exec</span> tomcat-net-02 <span class=\"token function\">ping</span> tomcat-net-01 <span class=\"token comment\"># success</span></pre></td></tr><tr><td data-num=\"4\"></td><td data-command=\"[root@xxx ~] $\"></td><td><pre>docker <span class=\"token builtin class-name\">exec</span> tomcat-net-01 <span class=\"token function\">ping</span> tomcat-net-02 <span class=\"token comment\"># success</span></pre></td></tr></table></figure><p><strong>ç½‘ç»œè¿é€š</strong></p>\n<p>é€šè¿‡ä¸Šé¢çš„æ“ä½œï¼ŒåŸºäºè‡ªå®šä¹‰ç½‘ç»œåˆ›å»ºçš„å®¹å™¨ä¹‹é—´ï¼Œå·²ç»å®ç°ç½‘ç»œäº’è”ï¼Œä½†è‡ªå®šä¹‰ç½‘ç»œä¸ docker0 é»˜è®¤ç½‘ç»œä¹‹é—´ä»æ—§æ— æ³•è”é€šï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å¦‚ä¸‹æ–¹å¼ï¼Œå°† docker0 é»˜è®¤çš„ç½‘ç»œæ·»åŠ åˆ°è‡ªå®šä¹‰çš„ç½‘ç»œä¸­ã€‚</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"><span>å‘½ä»¤è¡Œæç¤ºç¬¦</span></figcaption><table><tr><td data-num=\"1\"></td><td data-command=\"[root@xxx ~] $\"></td><td><pre>docker run -d -P --name tomcat-01 tomcat <span class=\"token comment\"># -network bridge</span></pre></td></tr><tr><td data-num=\"2\"></td><td data-command=\"[root@xxx ~] $\"></td><td><pre>docker <span class=\"token builtin class-name\">exec</span> tomcat-01 <span class=\"token function\">ping</span> tomcat-net-01 <span class=\"token comment\"># fault</span></pre></td></tr><tr><td data-num=\"3\"></td><td data-command=\"[root@xxx ~] $\"></td><td><pre>docker network connect tomcat01 mynet <span class=\"token comment\"># connect tomcat01 to mynet</span></pre></td></tr><tr><td data-num=\"4\"></td><td data-command=\"[root@xxx ~] $\"></td><td><pre>docker <span class=\"token builtin class-name\">exec</span> tomcat-01 <span class=\"token function\">ping</span> tomcat-net-01 <span class=\"token comment\"># success</span></pre></td></tr></table></figure><h4 id=\"redis-é›†ç¾¤éƒ¨ç½²\"><a class=\"anchor\" href=\"#redis-é›†ç¾¤éƒ¨ç½²\">#</a> Redis é›†ç¾¤éƒ¨ç½²</h4>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>docker search redis</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>docker pull redis</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token function\">mkdir</span> redis-cluster-d</pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token builtin class-name\">cd</span> redis-cluster-d</pre></td></tr></table></figure><p><span class=\"label danger\">â—ï¸TODO</span> å¾…å®Œå–„</p>\n<h4 id=\"springboot-å¾®æœåŠ¡æ‰“åŒ…-docker\"><a class=\"anchor\" href=\"#springboot-å¾®æœåŠ¡æ‰“åŒ…-docker\">#</a> Springboot å¾®æœåŠ¡æ‰“åŒ… Docker</h4>\n<p><span class=\"label danger\">â—ï¸TODO</span> å¾…å®Œå–„</p>\n<h3 id=\"å‚è€ƒ\"><a class=\"anchor\" href=\"#å‚è€ƒ\">#</a> å‚è€ƒ</h3>\n<ul>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kb2NzLmRvY2tlci5jb20=\">https://docs.docker.com</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuYmlsaWJpbGkuY29tL3ZpZGVvL0JWMW9nNHkxcTdNNA==\">https://www.bilibili.com/video/BV1og4y1q7M4</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly95ZWFzeS5naXRib29rLmlvL2RvY2tlcl9wcmFjdGljZS9pbnN0YWxsL2NlbnRvcw==\">https://yeasy.gitbook.io/docker_practice/install/centos</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuamlhbnNodS5jb20vcC8yMmE3MDMyYmI3YmQ=\">https://www.jianshu.com/p/22a7032bb7bd</span></li>\n</ul>\n",
            "tags": [
                "è®¡ç®—æœºç§‘å­¦",
                "JAVAå­¦ä¹ è·¯çº¿",
                "æ¶æ„ç¯‡",
                "Linux",
                "Docker"
            ]
        },
        {
            "id": "https://www.chinmoku.cc/computer-science/others/blog-without-server/",
            "url": "https://www.chinmoku.cc/computer-science/others/blog-without-server/",
            "title": "Hexo - æŠ€æœ¯å°ç™½æ­å»ºä¸ªäººåšå®¢",
            "date_published": "2021-08-04T14:01:24.000Z",
            "content_html": "<p>æ³¨ï¼šæœ¬æ–‡å’ŒæŠ€æœ¯èƒ½åŠ›æ— å…³ï¼Œçº¯ç²¹å‚»ç“œå¼æ“ä½œã€‚</p>\n<h3 id=\"æ•ˆæœé¢„è§ˆ\"><a class=\"anchor\" href=\"#æ•ˆæœé¢„è§ˆ\">#</a> æ•ˆæœé¢„è§ˆ</h3>\n<p><img data-src=\"https://img.xfc-exclave.com/2021/08/62fc03675523a44c16a9d1ce64363d881628085451.png\" alt=\"åšå®¢é¦–é¡µæ•ˆæœé¢„è§ˆ\" /></p>\n<p>è¿™é‡Œå°±ç›´æ¥æ”¾æˆ‘è‡ªå·±çš„åšå®¢æ•ˆæœäº†ï¼Œåªæˆªäº†ä¸ªé¦–é¡µçš„å›¾ï¼Œå½“ç„¶ï¼Œæ‚¨ä¹Ÿå¯ä»¥åœ¨æˆ‘çš„åšå®¢ä¸­è‡ªè¡Œè®¿é—®è¯•è¯•ï¼Œæ¬¢è¿æ¥è®¿ã€‚</p>\n<p>æˆ‘çš„åšå®¢åœ°å€ï¼š</p>\n<ol>\n<li><a href=\"https://www.chinmoku.cc\">https://www.chinmoku.cc</a></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly94ZmMtZXhjbGF2ZS5naXRodWIuaW8=\">https://xfc-exclave.github.io</span></li>\n</ol>\n<p>å½“ç„¶ï¼Œé€šè¿‡æœ¬æ–‡ï¼Œä½ æœ€ç»ˆæ­å»ºå‡ºæ¥çš„åšå®¢æœªå¿…å’Œæˆ‘ä¸€æ¨¡ä¸€æ ·ï¼Œæ¯•ç«Ÿå„äººå®¡ç¾å’Œå–œå¥½æœ‰æ‰€ä¸åŒã€‚</p>\n<h3 id=\"è¿›ä¸é€€\"><a class=\"anchor\" href=\"#è¿›ä¸é€€\">#</a> è¿›ä¸é€€</h3>\n<p>åœ¨æ­£å¼å®‰è£…åšå®¢ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆåšå¦‚ä¸‹å‡è®¾ï¼š</p>\n<ol>\n<li>\n<p>æ‚¨ä¸å¸Œæœ›æ”¯ä»˜ä»»ä½•è´¹ç”¨è´­ä¹°ä¸€ç³»åˆ—äº§å“ï¼Œå¦‚æœåŠ¡å™¨ã€æ•°æ®åº“ã€åŸŸåã€SSL è¯ä¹¦ã€å¯¹è±¡å­˜å‚¨ç­‰ã€‚</p>\n</li>\n<li>\n<p>æ‚¨æ‰‹ä¸Šå¹¶æœªæ‹¥æœ‰ä»»ä½•ä¸€å°æœåŠ¡å™¨ç¯å¢ƒ â€”â€” æ— è®º windows è¿˜æ˜¯  <code>linux</code>  æ“ä½œç³»ç»Ÿã€‚</p>\n</li>\n<li>\n<p>æ‚¨å¸Œæœ›æ‚¨çš„åšå®¢èŠ±æ ·å¤šã€é€‚åº”æ€§å¼ºã€‚</p>\n</li>\n<li>\n<p>æ‚¨ä¸å¸Œæœ›éš”ä¸‰å·®äº”è¢«é»‘å®¢éªšæ‰°ã€‚</p>\n</li>\n<li>\n<p>æ‚¨ç”šè‡³ä¸å…·å¤‡ä»»ä½•æŠ€æœ¯çŸ¥è¯†ï¼Œå¦‚æœæ‚¨å±äºè¿™ç§æƒ…å†µï¼Œåæ–‡å‡ºç°ä»»ä½•  <code>æŠ€æœ¯å°ç™½</code>  ï¼ˆä¸­æ€§è¯ï¼‰çš„å…³é”®è¯æ—¶ï¼Œéƒ½è¯·åŠ¡å¿…å¤šåŠ ç•™æ„ã€‚</p>\n<blockquote>\n<p>æ³¨ï¼šæœ¬æ–‡å°†  <code>æŠ€æœ¯å°ç™½</code>  å®šä¹‰ä¸ºè¾ƒæç«¯çš„æƒ…å†µï¼Œå¦‚éè®¡ç®—æœºç›¸å…³ä¸“ä¸šå­¦ç”Ÿã€æ–‡å‘˜ã€æ•™å¸ˆã€ç¿»è¯‘ã€å…¬åŠ¡å‘˜ã€æ‘„å½±å¸ˆã€è¯—äººã€ä½œå®¶ç­‰ã€‚æœ¬æ–‡è€ƒè™‘åˆ°æŠ€æœ¯å°ç™½ï¼Œæ˜¯ç”±äºæˆ‘ä¸ªäººèº«è¾¹æœ‰ä¸å°‘ä»äº‹å„è¡Œå„ä¸šçš„æœ‹å‹ï¼Œä»–ä»¬ä¹‹ä¸­æœ‰ä¸å°‘äººä¹Ÿæœ‰æ­å»ºåšå®¢çš„éœ€è¦ã€‚</p>\n<p>ä¹Ÿæ˜¯ä¸ºäº†ç…§é¡¾åˆ°æŠ€æœ¯å°ç™½ï¼Œæœ¬æ–‡ä¼šå°½å¯èƒ½è®²å¾—è¯¦ç»†äº›ï¼Œæœ‰äº›åœ°æ–¹éš¾å…å•°å—¦ï¼Œè¯·è§è°…ã€‚</p>\n<p>å¦å¤–ï¼ŒæŠ€æœ¯å°ç™½ä»¬ï¼Œä½ ä»¬ä¸éœ€è¦åœ¨æ„å’Œçº ç»“é‚£äº›çœ‹ä¸æ‡‚çš„åè¯ï¼Œä¸¥æ ¼è·Ÿç€æœ¬æ–‡çš„æ­¥éª¤èµ°å°±è¡Œäº†ã€‚å¦‚æœå®åœ¨èµ°ä¸é€šï¼Œä½ ä¹Ÿå¯ä»¥å°è¯•è”ç³»æˆ‘ã€‚</p>\n</blockquote>\n</li>\n</ol>\n<p>åŠé€€åˆ†ç•Œçº¿ï¼š</p>\n<hr />\n<p>åœ¨ä¸Šé¢çš„å‡è®¾ä¸­ï¼Œæˆ‘å·²ç»å†³å®šå°½é‡ä¿æŒæœ€çœŸè¯šçš„æ€åº¦æ¥å†™è¿™ç¯‡  <code>æ•™ç¨‹æ–‡</code>  äº†ï¼Œå¦‚æœä»æ—§è§‰å¾—å›°éš¾é‡é‡ã€ä¸æ•¢è¿ˆè¿›çš„è¯ï¼Œé‚£å°±æ­¤åˆ«è¿‡äº†ã€‚</p>\n<p>å¦å¤–ï¼Œæ­å»ºè¿™ä¸ªåšå®¢ä½ å¯èƒ½ 1h å°±èƒ½æå®šï¼Œä¹Ÿå¯èƒ½è¦è€—è´¹ä½ æ•´æ•´ä¸€å¤©ï¼Œè¯·åšå¥½å¿ƒç†å‡†å¤‡ã€‚</p>\n<p>é‚£ä¸‹é¢ï¼Œæˆ‘ä»¬å°±æ­£å¼å¼€å§‹å•¦ï¼</p>\n<h3 id=\"å‰ç½®ç¯å¢ƒ\"><a class=\"anchor\" href=\"#å‰ç½®ç¯å¢ƒ\">#</a> å‰ç½®ç¯å¢ƒ</h3>\n<p>æ‚¨éœ€è¦å…·å¤‡å¦‚ä¸‹ç¯å¢ƒï¼š</p>\n<blockquote>\n<p>å¦‚æ‚¨å·²æ»¡è¶³ç›¸åº”çš„ç¯å¢ƒï¼Œè¯·è‡ªè¡Œè·³è¿‡å¯¹åº”å®‰è£…å°èŠ‚éƒ¨åˆ†ã€‚æŠ€æœ¯å°ç™½çš„è¯å°±ä¸ç”¨æ£€éªŒäº†ï¼Œå› ä¸ºæ‚¨è‚¯å®šä¸€ä¸ªéƒ½æ²¡æœ‰å®‰è£…è¿‡ï¼</p>\n</blockquote>\n<ol>\n<li>\n<p>å®‰è£…  <code>Git</code></p>\n<p>æ£€éªŒæ–¹æ³•ï¼š å‘½ä»¤è¡Œæ‰§è¡Œ  <code>git --version</code>  ï¼Œå‡ºç°å¯¹åº”ç‰ˆæœ¬å·ï¼Œå³æ‚¨å·²å®‰è£…è¯¥ç¯å¢ƒã€‚</p>\n</li>\n<li>\n<p>å®‰è£…  <code>Node.js</code></p>\n<p>æ£€éªŒæ–¹æ³•ï¼š å‘½ä»¤è¡Œæ‰§è¡Œ  <code>node -v</code>  ï¼Œå‡ºç°å¯¹åº”ç‰ˆæœ¬å·ï¼Œå³æ‚¨å·²å®‰è£…è¯¥ç¯å¢ƒã€‚</p>\n</li>\n<li>\n<p>å®‰è£…  <code>npm</code></p>\n<p>æ£€éªŒæ–¹æ³•ï¼š å‘½ä»¤è¡Œæ‰§è¡Œ  <code>npm -v</code>  ï¼Œå‡ºç°å¯¹åº”ç‰ˆæœ¬å·ï¼Œå³æ‚¨å·²å®‰è£…è¯¥ç¯å¢ƒã€‚</p>\n</li>\n</ol>\n<h4 id=\"git-å®‰è£…\"><a class=\"anchor\" href=\"#git-å®‰è£…\">#</a> Git å®‰è£…</h4>\n<h4 id=\"node-å®‰è£…\"><a class=\"anchor\" href=\"#node-å®‰è£…\">#</a> Node å®‰è£…</h4>\n<h4 id=\"npm-å®‰è£…\"><a class=\"anchor\" href=\"#npm-å®‰è£…\">#</a> npm å®‰è£…</h4>\n<h3 id=\"æ­£å¼æ­å»º\"><a class=\"anchor\" href=\"#æ­£å¼æ­å»º\">#</a> æ­£å¼æ­å»º</h3>\n<ol>\n<li>\n<p>åˆ›å»ºæ–‡ä»¶å¤¹</p>\n<p>æ­£å¼æ­å»ºåšå®¢çš„ç¬¬ä¸€æ­¥ï¼Œæ˜¯åˆ›å»ºä¸€ä¸ªä¸“ç”¨äºå­˜æ”¾åšå®¢é¡¹ç›®åŠå…¶ç›¸å…³å†…å®¹çš„æ–‡ä»¶å¤¹ï¼Œå¦‚æœæ˜¯æŠ€æœ¯å°ç™½ï¼Œè¯·å°½å¯èƒ½ä¸æˆ‘ä¿æŒä¸€è‡´ã€‚</p>\n<p><img data-src=\"https://img.xfc-exclave.com/2021/08/ce0d8728e298eaa9f4743a37cd33fb7a1628085462.png\" alt=\"åˆ›å»ºåšå®¢å®‰è£…æ–‡ä»¶å¤¹\" /></p>\n<p>è¿›å…¥  <code>/myblog/hexo</code>  ç›®å½•å¹¶åœ¨åœ°å€æ ä¸­è¾“å…¥  <code>cmd</code>  ï¼Œç„¶åæŒ‰ä¸‹å›è½¦è¿›å…¥å°é»‘æ¡†ã€‚</p>\n<p><img data-src=\"https://img.xfc-exclave.com/2021/08/2d6037a13a68e662a0f30f6200a676471628085471.png\" alt=\"å¿«æ·è¿›å…¥å‘½ä»¤è¡Œ\" /></p>\n</li>\n<li>\n<p>å®‰è£…  <code>hexo</code>  åŸºç¡€æ¡†æ¶</p>\n<p>è¾“å…¥æˆ–å¤åˆ¶å¦‚ä¸‹å‘½ä»¤å¹¶ç²˜è´´åˆ°å¼¹å‡ºçš„å°é»‘æ¡†ä¸­æ‰§è¡Œï¼š</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">npm</span> <span class=\"token function\">install</span> -g hexo</pre></td></tr></table></figure><blockquote>\n<p>æç¤ºï¼šåœ¨å°é»‘æ¡†ä¸­é¼ æ ‡å³é”®ç‚¹å‡»ï¼Œå³å¯å¿«é€Ÿç²˜è´´ã€‚</p>\n<p>å°é»‘æ¡†å¦‚æœåœæ»ä¸åŠ¨ï¼Œå¯ä»¥å°è¯•åœ¨å°é»‘çª—å£å†…å•å‡»é¼ æ ‡å³é”®ï¼Œè¿™æ˜¯ä¸€ä¸ªå°å‘ã€‚</p>\n</blockquote>\n</li>\n<li>\n<p>åˆå§‹åŒ–  <code>hexo</code>  æ¡†æ¶</p>\n<p>è¾“å…¥æˆ–å¤åˆ¶å¦‚ä¸‹å‘½ä»¤å¹¶ç²˜è´´åˆ°å¼¹å‡ºçš„å°é»‘æ¡†ä¸­æ‰§è¡Œï¼š</p>\n<p><img data-src=\"https://img.xfc-exclave.com/2021/08/83a1aabb0261c220258b592f18d6be4d1628085500.png\" alt=\"Hexoåˆå§‹åŒ–å‘½ä»¤æˆªå›¾\" /></p>\n</li>\n<li>\n<p>ç›®å½•ç»“æ„</p>\n<p>åˆå§‹åŒ–å®Œæˆåï¼Œå³å¯åœ¨  <code>E:\\myblog\\hexo</code>  æ–‡ä»¶å¤¹å†…çœ‹åˆ°å¦‚ä¸‹ç›®å½•ç»“æ„ï¼š</p>\n<p><img data-src=\"https://img.xfc-exclave.com/2021/08/0b4ee0093b32f24d17aabe4de06fd1ac1628085507.png\" alt=\"Hexoç›®å½•ç»“æ„\" /></p>\n<p>è¿™é‡Œçš„ç›®å½•ç»“æ„éœ€è¦ç¨å¾®æ³¨æ„ä¸‹ï¼Œåç»­é…ç½®æ—¶ä¼šç”¨åˆ°ï¼š</p>\n<ul>\n<li>scaffoldsï¼šä¸»è¦å­˜æ”¾ hexo çš„ä¸€äº›å†…ç½®é¡µé¢ã€‚</li>\n<li>sourceï¼šä¸»è¦å­˜æ”¾ç”¨æˆ·çš„åšå®¢æ–‡ç« ã€‚</li>\n<li>themesï¼šä¸»è¦å­˜æ”¾ä¸ªæ€§åŒ–ä¸»é¢˜ã€‚</li>\n<li><code>_config.yml</code>  ï¼šè¿™æ˜¯ hexo çš„ä¸»é…ç½®æ–‡ä»¶ï¼Œåœ¨åç»­é…ç½®æ—¶ä¼šç»å¸¸ç”¨åˆ°å®ƒã€‚</li>\n</ul>\n</li>\n<li>\n<p>å¯åŠ¨åšå®¢</p>\n<p>åœ¨  <code>/myblog/hexo</code>  ç›®å½•çš„åœ°å€æ ä¸­è¾“å…¥  <code>cmd</code>  ï¼Œç„¶åæŒ‰ä¸‹å›è½¦è¿›å…¥å°é»‘æ¡†ï¼Œå†æ¬¡è¿›å…¥å‘½ä»¤è¡Œã€‚</p>\n<p><img data-src=\"https://img.xfc-exclave.com/2021/08/fb79589cf9bca9faf390dd7ead8cd7131628085515.png\" alt=\"å¿«æ·è¿›å…¥å‘½ä»¤è¡Œ\" /></p>\n<p>åœ¨å‘½ä»¤è¡Œä¸­ä¾æ¬¡è¾“å…¥å¦‚ä¸‹å‘½ä»¤ï¼Œå¹¶å›è½¦æ‰§è¡Œï¼š</p>\n<p>å®‰è£…æ‰€éœ€è¦çš„ä¾èµ–ï¼š</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">npm</span> <span class=\"token function\">install</span></pre></td></tr></table></figure><p>ç¼–è¯‘ç”Ÿæˆé™æ€é¡µé¢ï¼š</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>hexo g</pre></td></tr></table></figure><p>å¯åŠ¨æœ¬åœ°æœåŠ¡ï¼š</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>hexo s</pre></td></tr></table></figure><p><img data-src=\"https://img.xfc-exclave.com/2021/08/2c792aa755696067ec4584ef20a9451a1628085521.png\" alt=\"Hexoå¯åŠ¨å‘½ä»¤æˆªå›¾\" /></p>\n<p>æ³¨ï¼šä¸Šå›¾å¤šäº†ä¸€æ¡  <code>hexo d</code>  å‘½ä»¤ï¼Œå½“å‰æš‚æ—¶ç”¨ä¸åˆ°ï¼Œåç»­æ‰ä¼šä½¿ç”¨ã€‚</p>\n<p>æœ€ç»ˆå‡ºç°  <code>Hexo is running at http://localhost:4000 . Press Ctrl+C to stop.</code>  æ—¶ï¼Œå³è¡¨ç¤ºå¯åŠ¨æˆåŠŸï¼Œæ­¤æ—¶æŒ‰  <code>Ctrl+C</code>  æˆ–ç‚¹å‡»å…³é—­ï¼Œåšå®¢éƒ½å°†å…³é—­ã€‚</p>\n</li>\n<li>\n<p>è®¿é—®åšå®¢</p>\n<p>æ­¤æ—¶åœ¨æµè§ˆå™¨è¾“å…¥åœ°å€ <span class=\"exturl\" data-url=\"aHR0cDovL2xvY2FsaG9zdDo0MDAw\">http://localhost:4000</span> è¿›è¡Œè®¿é—®ï¼Œæ‚¨å°†çœ‹åˆ°å¦‚ä¸‹ç•Œé¢ï¼š</p>\n<p><img data-src=\"https://img.xfc-exclave.com/2021/08/0e5eb6c38e29a84cc3f0306a8ed7287d1628085540.png\" alt=\"Hexoé»˜è®¤ä¸»é¢˜æˆªå›¾\" /></p>\n</li>\n</ol>\n<p>åˆ°è¿™é‡Œæˆ‘ä»¬çš„åšå®¢å°±å·²ç»æ­å»ºæˆåŠŸï¼Œæ€»ç®—æœ‰ä¸€ä¸ªèƒ½å¤Ÿçœ‹å¾—è§çš„åšå®¢é¡µé¢äº†ï¼</p>\n<p>ä½†è¿™è¿˜ä¸å¤Ÿï¼Œæˆ‘ä»¬è¿˜é¢ä¸´ç€å¦‚ä¸‹è¯¸å¤šé—®é¢˜ï¼š</p>\n<ol>\n<li>é»˜è®¤çš„åšå®¢é¡µé¢æ»¡è¶³ä¸äº†è‡ªå·±çš„å®¡ç¾éœ€è¦ã€‚</li>\n<li>æˆ‘è‡ªå·±æ˜¯èƒ½è®¿é—®åˆ°ï¼Œä½†åœ°å€å‘ç»™æœ‹å‹ï¼Œæœ‹å‹å´è®¿é—®ä¸åˆ°ã€‚</li>\n<li>æŠŠå°é»‘æ¡†ä¸€å…³æ‰ï¼Œåšå®¢å°±è®¿é—®ä¸åˆ°äº†ã€‚</li>\n<li>æ²¡æœ‰æ‰¾åˆ°å†™æ–‡ç« çš„åœ°æ–¹ã€‚</li>\n<li>è¿˜æœ‰äº›åˆ«äººåšå®¢éƒ½æœ‰çš„æ›´åŠ é«˜çº§çš„åŠŸèƒ½ï¼Œæ¯”å¦‚æœç´¢ã€è¯„è®ºç­‰ã€‚</li>\n</ol>\n<p>å¯¹äºè¿™äº›é—®é¢˜ï¼Œæˆ‘ä»¬åœ¨åç»­éƒ¨åˆ†å°†é™†ç»­è¿›è¡Œè§£å†³ã€‚</p>\n<h3 id=\"ä¸»é¢˜é…ç½®\"><a class=\"anchor\" href=\"#ä¸»é¢˜é…ç½®\">#</a> ä¸»é¢˜é…ç½®</h3>\n<p>åšå®¢æ­å»ºæˆåŠŸåï¼Œé»˜è®¤çš„åšå®¢é¡µé¢æ•ˆæœä¸ç¬¦åˆè‡ªå·±çš„ä¸ªæ€§è¦æ±‚ï¼Œæƒ³è¦è®©è‡ªå·±çš„åšå®¢æ›´åŠ ç¾è§‚ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬å°±éœ€è¦å¯¹åšå®¢çš„ä¸»é¢˜è¿›è¡Œé…ç½®ã€‚</p>\n<p><code>hexo</code>  çš„ä¸»é¢˜åº“æœ‰ä¸‰ç™¾å¤šä¸ªä¸»é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥é€‰æ‹©è‡ªå·±å–œæ¬¢çš„ä¸»é¢˜ä¸‹è½½é…ç½®ã€‚</p>\n<h4 id=\"ä¸»é¢˜ä¸‹è½½\"><a class=\"anchor\" href=\"#ä¸»é¢˜ä¸‹è½½\">#</a> ä¸»é¢˜ä¸‹è½½</h4>\n<p>ä¸»é¢˜åº“åœ°å€ï¼š<span class=\"exturl\" data-url=\"aHR0cHM6Ly9oZXhvLmlvL3RoZW1lcw==\">https://hexo.io/themes</span></p>\n<p><img data-src=\"https://img.xfc-exclave.com/2021/08/5a7e4cc8c6d70cf6baa4d35f43dfdc1c1628085550.png\" alt=\"Hexoä¸»é¢˜åº“\" /></p>\n<p>è¿™é‡Œçš„ä¸»é¢˜ç®€ç›´ä¸è¦å¤ªå¤šï¼Œæ–‡è‰ºã€éªšæ°”ã€äºŒæ¬¡å…ƒï¼ŒåŸºæœ¬èƒ½æ»¡è¶³å„ç§ä¸åŒå±‚æ¬¡ä¸åŒç§ç±»çš„å®¡ç¾éœ€è¦ã€‚</p>\n<p>è¿™é‡Œä½œä¸ºæ•™ç¨‹æ¼”ç¤ºï¼Œæˆ‘é€‰æ‹©ä½¿ç”¨ä¸€ä¸ªæ¯”è¾ƒæ¼‚äº®çš„äºŒæ¬¡å…ƒä¸»é¢˜  <code>hexo-theme-shoka</code>  ä½œä¸ºæ¼”ç¤ºï¼Œæ‚¨å¯ä»¥æ ¹æ®è‡ªå·±å–œå¥½è¿›è¡Œä¸‹è½½ã€‚</p>\n<blockquote>\n<p>å…³äºå½“å‰æ¼”ç¤ºä¸»é¢˜çš„æ•ˆæœï¼Œä½ å¯ä»¥å°†æœ¬æ–‡å¾€ä¸‹ç¿»ä¸€ç¿»ï¼Œæœ‰ä¸»é¢˜é…ç½®æˆåŠŸåçš„é¦–é¡µæˆªå›¾ã€‚</p>\n</blockquote>\n<p>æ‰¾åˆ°æ‚¨å–œæ¬¢çš„ä¸»é¢˜ï¼Œè¿›å…¥å…¶å¯¹åº”çš„ github ä¸‹è½½é¡µï¼ŒæŒ‰ç…§ä¸‹å›¾çš„æ–¹å¼æ‰¾åˆ°åœ°å€å¹¶å¤åˆ¶ã€‚</p>\n<p><img data-src=\"https://img.xfc-exclave.com/2021/08/3ef0bbe92ee4ca1beb0d9f57a59987f21628085565.png\" alt=\"Hexoä¸»é¢˜åœ°å€ä¸‹è½½ç¤ºä¾‹\" /></p>\n<p>è¿›å…¥æ‚¨çš„åšå®¢ç›®å½•ä¸­çš„ä¸»é¢˜æ–‡ä»¶å¤¹ï¼Œå¦‚  <code>E:\\myblog\\hexo\\themes</code>  ï¼Œå¦‚å‰æ–‡çš„æ–¹å¼è¿›å…¥å°é»‘æ¡†ï¼Œå¤§æ¦‚æ“ä½œæ­¥éª¤å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>\n<p><img data-src=\"https://img.xfc-exclave.com/2021/08/614b1b93c20078742e08c59da681fa201628085571.png\" alt=\"Hexoä¸»é¢˜ä¸‹è½½å›¾ç¤º\" /></p>\n<p>åˆ°è¿™é‡Œï¼Œä¸»é¢˜å°±å·²ç»ä¸‹è½½å¥½äº†ã€‚å½“ç„¶ï¼Œåœ¨ä¸Šå›¾ä¸­å¦‚æœä½ å…‹éš†å¤±è´¥äº†ï¼Œä½ ä¹Ÿå¯ä»¥é€‰æ‹©ç›´æ¥  <code>Download ZIP</code>  ï¼Œç„¶åè§£å‹åˆ°å›¾ä¸­çš„ç›®å½•ä½ç½®ã€‚</p>\n<p>å°†ä¸‹è½½å¥½çš„ä¸»é¢˜æ–‡ä»¶å¤¹  <code>hexo-theme-shoka</code>  é‡å‘½åä¸º  <code>shoka</code>  ã€‚</p>\n<blockquote>\n<p>æ³¨æ„ï¼šä¸‹è½½ä¸»é¢˜åï¼Œå¯¹äºä¸åŒä¸»é¢˜ï¼Œå¯èƒ½å„è‡ªéƒ½ä¼šæœ‰ä¸€äº›é’ˆå¯¹æ€§çš„æ“ä½œæˆ–é…ç½®ï¼Œä½†å¦‚éœ€è¦ç‰¹åˆ«çš„é…ç½®ï¼Œåœ¨  <code>github</code>  å¯¹åº”çš„ä¸‹è½½é¡µéƒ½ä¼šæœ‰ç›¸åº”çš„è¯´æ˜ã€‚å¦å¤–ï¼Œæœ‰è®¸å¤šä¸»é¢˜éƒ½æ˜¯éœ€è¦å®‰è£…ä¸€äº›æ’ä»¶ï¼Œæ‰èƒ½å®ç°åšå®¢çš„æŸäº›åŠŸèƒ½å’Œæ•ˆæœçš„ã€‚</p>\n</blockquote>\n<h4 id=\"ä¸»é¢˜æ’ä»¶å®‰è£…\"><a class=\"anchor\" href=\"#ä¸»é¢˜æ’ä»¶å®‰è£…\">#</a> ä¸»é¢˜æ’ä»¶å®‰è£…</h4>\n<p>ä¸åŒä¸»é¢˜å¯èƒ½éœ€è¦å®‰è£…çš„æ’ä»¶ä¸åŒï¼Œä¹Ÿå¯èƒ½æœ‰çš„ä¸»é¢˜ä¸éœ€è¦å®‰è£…ä»»ä½•æ’ä»¶ï¼Œè¿™ä¸ªéœ€è¦ä»¥ä¸»é¢˜ä¸‹è½½é¡µçš„è¯´æ˜ä¸ºå‡†ã€‚å¯¹äºå½“å‰æ¼”ç¤ºçš„ä¸»é¢˜  <code>hexo-theme-shoka</code>  è€Œè¨€ï¼Œå®ƒéœ€è¦å®‰è£…å¦‚ä¸‹æ’ä»¶ï¼ˆè¿™åœ¨ github éƒ½æœ‰è¯´æ˜ï¼‰ï¼š</p>\n<ul>\n<li>hexo-renderer-multi-markdown-it</li>\n<li>hexo-autoprefixer</li>\n<li>hexo-algoliasearch</li>\n<li>hexo-symbols-count-time</li>\n<li>hexo-feed</li>\n</ul>\n<p>é‚£ä¹ˆï¼Œåˆ°äº†è¿™é‡Œï¼Œæˆ‘ä»¬å°±æ¥å®‰è£…è¿™ä¸ªä¸»é¢˜æ‰€éœ€è¦çš„æ‰€æœ‰æ’ä»¶ã€‚</p>\n<p>é¦–å…ˆï¼Œè¿›å…¥  <code>E:\\myblog\\hexo</code>  ç›®å½•ï¼Œå¹¶ä»è¯¥ç›®å½•è¾“å…¥  <code>cmd</code>  è¿›å…¥å‘½ä»¤è¡Œï¼ˆå‰æ–‡å·²ç»é‡å¤å¤šæ¬¡ï¼Œç›¸ä¿¡æ‚¨å·²ç»çŸ¥é“å¦‚ä½•è¿›å…¥å‘½ä»¤è¡Œäº†ï¼Œåé¢å°±ä¸å†é‡å¤æˆªå›¾äº†ï¼‰ã€‚</p>\n<p>åœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥  <code>npm install + æ’ä»¶åç§°</code>  ï¼Œç„¶åå›è½¦æ‰§è¡Œã€‚</p>\n<p>å‘½ä»¤ç¤ºä¾‹ï¼š</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">npm</span> <span class=\"token function\">install</span> hexo-renderer-multi-markdown-it</pre></td></tr></table></figure><p>æŒ‰ç…§è¿™æ ·çš„æ–¹å¼ï¼Œä¾æ¬¡æ‹¼æ¥  <code>npm install + æ’ä»¶åç§°</code>  å‘½ä»¤å¹¶æ‰§è¡Œï¼Œå®‰è£…å®Œè¯¥ä¸»é¢˜æ‰€éœ€è¦çš„æ‰€æœ‰æ’ä»¶å³å¯ã€‚</p>\n<h4 id=\"ä¸»é¢˜å¯ç”¨\"><a class=\"anchor\" href=\"#ä¸»é¢˜å¯ç”¨\">#</a> ä¸»é¢˜å¯ç”¨</h4>\n<p>ä¸»é¢˜åŠå…¶æ‰€éœ€è¦çš„æ’ä»¶éƒ½å®‰è£…å¥½äº†ï¼Œä½†æ­¤æ—¶å¹¶æœªå¯ç”¨è¯¥ä¸»é¢˜ã€‚è¦å¯ç”¨è¯¥ä¸»é¢˜ï¼Œæ‚¨éœ€è¦æ‰¾åˆ°  <code>E:\\myblog\\hexo\\_config.yml</code>  æ–‡ä»¶å¹¶æ‰“å¼€ã€‚</p>\n<p>åœ¨è¯¥æ–‡ä»¶ä¸­æ‚¨å¯ä»¥æ‰¾åˆ°å¦‚ä¸‹è¿™æ ·ä¸€è¡Œä»£ç ï¼š</p>\n<figure class=\"highlight yml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">theme</span><span class=\"token punctuation\">:</span> landscape</pre></td></tr></table></figure><p>è¿™è¡Œä»£ç è¡¨ç¤ºå½“å‰é…ç½®çš„ä¸»é¢˜ä¸º  <code>landscape</code>  ï¼Œè€Œåœ¨æˆ‘ä»¬çš„ä¸»é¢˜ç›®å½•  <code>E:\\myblog\\hexo\\theme</code>  é‡Œï¼Œæ­£å¥½å¯ä»¥çœ‹åˆ°ä¸€ä¸ªåä¸º  <code>landscape</code>  çš„æ–‡ä»¶å¤¹ï¼Œå› æ­¤æˆ‘ä»¬è¦æ›´æ¢ä¸»é¢˜ï¼Œå°±åªéœ€è¦å°†è¿™é‡Œçš„é…ç½®ä¿®æ”¹ä¸ºæˆ‘ä»¬ä¸‹è½½å¥½çš„ä¸»é¢˜æ–‡ä»¶å¤¹åç§°å³å¯ï¼Œå³å°†è¿™è¡Œä»£ç æ”¹æˆä¸‹é¢è¿™æ ·æ—¢å¯ï¼š</p>\n<figure class=\"highlight yml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">theme</span><span class=\"token punctuation\">:</span> shoka</pre></td></tr></table></figure><p>è¿™æ ·å°±å·²ç»æŒ‡å®šå¥½äº†æˆ‘ä»¬éœ€è¦ç¼–è¯‘çš„ä¸»é¢˜ï¼Œæ¥ä¸‹æ¥å°±éœ€è¦é‡æ–°å¯åŠ¨åšå®¢ã€‚å¦‚æœå…ˆå‰å¯åŠ¨è¿˜æ²¡å…³é—­ï¼Œéœ€è¦å…ˆå…³é—­åæ‰èƒ½é‡å¯ï¼ˆæ€»ä¹‹ï¼Œå…³é—­æ‰€æœ‰å°é»‘æ¡†å°±æ˜¯äº†ï¼‰ã€‚</p>\n<p>å…³äºå¯åŠ¨å¦‚ä½•åšå®¢ï¼Œåœ¨ä¸Šæ–‡  <code>æ­£å¼æ­å»º -&gt; å¯åŠ¨åšå®¢</code>  å°èŠ‚ä¸­å…¶å®å·²ç»æè¿‡ä¸€éäº†ï¼Œè¿™é‡Œå†æ¥ä¸€æ¬¡ï¼Œå¯åŠ¨å’Œç¼–è¯‘åšå®¢æ‚¨è¿˜ä¼šç»å¸¸ç”¨åˆ°ï¼Œè‡ªç„¶æ˜¯è¶Šç†Ÿæ‚‰è¶Šå¥½äº†ã€‚</p>\n<p>è¿›å…¥  <code>E:\\myblog\\hexo</code>  ç›®å½•ï¼Œå¹¶ä»è¯¥ç›®å½•è¾“å…¥  <code>cmd</code>  è¿›å…¥å‘½ä»¤è¡Œã€‚</p>\n<p>æ‰§è¡Œå‘½ä»¤ç¼–è¯‘åšå®¢ï¼š</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>hexo g</pre></td></tr></table></figure><blockquote>\n<p>åœ¨æ‰§è¡Œ  <code>hexo g</code>  å‘½ä»¤çš„è¿‡ç¨‹ä¸­ï¼Œä¹Ÿè®¸ä¼šå‡ºç°ä¸€äº›é—®é¢˜ï¼Œæ¯”å¦‚æˆ‘ä»¬å½“å‰æ¼”ç¤ºçš„ä¸»é¢˜åœ¨æ‰§è¡Œæ—¶ï¼Œå°±æŠ›å‡ºå¼‚å¸¸ï¼Œè¿™æ˜¯ä¸å¯é¢„æœŸçš„ï¼Œå‡ºç°å¼‚å¸¸æ—¶ï¼Œå¯ä»¥æ ¹æ®è¯¥å¼‚å¸¸åœ¨ç½‘ä¸Šæœç´¢ç­”æ¡ˆï¼Œè‚¯å®šæœ‰å…¶ä»–äººä¹Ÿé‡åˆ°è¿‡å¹¶ä¸”è¿˜é¡ºåˆ©è§£å†³äº†ã€‚ï¼ˆä¸åŒä¸»é¢˜ç¼–è¯‘æ—¶å¯èƒ½å‡ºç°çš„å¼‚å¸¸ä¸ä¸€å®šä¸€æ ·ï¼Œæ‰€ä»¥æ²¡æœ‰ç»Ÿä¸€çš„è§£å†³æ–¹æ³•ï¼‰</p>\n</blockquote>\n<p>æˆ‘è¿™é‡Œåœ¨ç¼–è¯‘  <code>hexo-theme-shoka</code>  ä¸»é¢˜æ—¶ï¼Œå‡ºç°äº†å¦‚ä¸‹å¼‚å¸¸ï¼š</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>Function yaml.safeLoad is removed <span class=\"token keyword\">in</span> js-yaml <span class=\"token number\">4</span>. Use yaml.load instead, <span class=\"token function\">which</span> is now safe by default</pre></td></tr></table></figure><p>è¿™æ˜¯å› ä¸º  <code>yaml.safeLoad</code>  æ–¹æ³•å·²ç»è¢«å¼ƒç”¨ï¼Œéœ€è¦ç”¨  <code>yaml.load</code>  æ¥ä»£æ›¿ã€‚</p>\n<p>ç”±æ­¤ï¼Œæˆ‘ä»¬çš„è§£å†³æ–¹æ³•å°±æ˜¯ï¼šæ‰¾åˆ°  <code>E:\\myblog\\hexo\\themes\\shoka\\scripts\\generaters\\config.js</code>  å¹¶ç”¨è®°äº‹æœ¬æ‰“å¼€è¿›è¡Œç¼–è¾‘ã€‚æ‰¾åˆ°  <code>yaml.safeLoad</code>  å¹¶ä¿®æ”¹ä¸º  <code>yaml.load</code>  ï¼ˆå¤§æ¦‚åœ¨ 41 è¡Œå·¦å³ï¼‰ï¼Œä¿å­˜å…³é—­ï¼Œç„¶åé‡æ–°æ‰§è¡Œ  <code>hexo g</code>  å‘½ä»¤è¿›è¡Œç¼–è¯‘ã€‚</p>\n<p>ç¼–è¯‘æˆåŠŸåï¼Œå†æ‰§è¡Œå¯åŠ¨åšå®¢æœåŠ¡çš„å‘½ä»¤ï¼š</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>hexo s</pre></td></tr></table></figure><p>è¯¥å‘½ä»¤æ‰§è¡ŒæˆåŠŸåï¼Œæˆ‘ä»¬é‡æ–°è®¿é—® <span class=\"exturl\" data-url=\"aHR0cDovL2xvY2FsaG9zdDo0MDAw\">http://localhost:4000</span> ï¼Œæˆ‘ä»¬å°±èƒ½çœ‹åˆ°æˆ‘ä»¬åˆšæ‰å¯ç”¨çš„æ–°çš„ä¸»é¢˜é¡µé¢äº†ï¼Œè¿™é‡Œæˆªä¸ªæ–°é²œçš„å›¾ï¼š</p>\n<p><img data-src=\"https://img.xfc-exclave.com/2021/08/23642d74fd22191aa9b63c34ac0da88f1628085577.png\" alt=\"ä¸»é¢˜é…ç½®æˆåŠŸ-é¢„è§ˆ\" /></p>\n<p>æ˜¯ä¸æ˜¯ä¸€ç¬é—´é¢œå€¼è¹­è¹­è¹­åœ°å¾€ä¸Šæ¶¨ï¼Œè€å¤«çš„å°‘å¥³å¿ƒä¸€ç¬é—´åˆè‹é†’äº†ï¼</p>\n<p>å½“ç„¶ï¼Œè¿™æ‰æ˜¯æœ€ç®€å•çš„ä¸€é”®åŒ–é…ç½®ï¼Œä¸åŒä¸»é¢˜æ›´è¯¦ç»†çš„é…ç½®æ–¹æ³•ï¼Œåœ¨å®ƒä»¬å„è‡ªçš„ github ä¸‹è½½é¡µéƒ½ä¼šè¿›è¡Œè¯´æ˜çš„ã€‚</p>\n<p>éœ€è¦  <code>hexo-theme-shoka</code>  ä¸»é¢˜çš„è¯¦ç»†é…ç½®ï¼Œè¯·å‰å¾€ï¼š<span class=\"exturl\" data-url=\"aHR0cHM6Ly9zaG9rYS5sb3N0eXUubWUvY29tcHV0ZXItc2NpZW5jZS9ub3RlL3RoZW1lLXNob2thLWRvYw==\">https://shoka.lostyu.me/computer-science/note/theme-shoka-doc</span></p>\n<p>è¿™é‡Œä»…ä»…ä½œä¸ºæ¼”ç¤ºï¼Œæ›´åŠ è¯¦ç»†çš„é…ç½®å› äººè€Œå¼‚ï¼Œè¿™é‡Œå°±ä¸å†æ‰©å±•äº†ï¼Œè‡ªè¡Œæ‘¸ç´¢ã€‚</p>\n<blockquote>\n<p>æŠ€æœ¯å°ç™½ä»¬è‡ªè¡Œæ‘¸ç´¢ä¹Ÿè®¸ä¼šç¢°è§ä¸€äº›å›°éš¾ï¼Œè€Œä¸”è‡ªè¡Œæ‘¸ç´¢ä¹Ÿå¾ˆè´¹æ—¶ï¼Œä¸è¿‡åˆ°äº†è¿™ä¸€æ­¥ï¼Œå°±ç®—ä¸è¿›è¡Œé¢å¤–çš„ä¸ªæ€§åŒ–é…ç½®ï¼Œä¿åº•é…ç½®å·²ç»æ˜¯ OK çš„äº†ï¼Œå› ä¸ºä¸åŒä¸»é¢˜ä¸ä¸€æ ·ï¼Œæ— æ³•åœ¨è¿™é‡Œä¸€ä¸€è¯´æ˜ï¼Œæ‰€ä»¥æŠ€æœ¯å°ç™½ä»¬åªèƒ½å…ˆå§”å±ˆä¸€ä¸‹äº†ï¼Œå½“ç„¶ï¼Œèº«è¾¹æœ‰æ‡‚ç‚¹ç›¸å…³æŠ€æœ¯çš„ï¼Œå¯ä»¥è¯·ä»–ä»¬å¸®å¸®å¿™ã€‚</p>\n</blockquote>\n<h4 id=\"èµ„æºæ¨è\"><a class=\"anchor\" href=\"#èµ„æºæ¨è\">#</a> èµ„æºæ¨è</h4>\n<p>ç›¸ä¿¡æ‚¨åœ¨é…ç½®åšå®¢ä¸»é¢˜çš„æ—¶å€™ï¼Œå¾ˆæœ‰å¯èƒ½éœ€è¦ä¸€äº›é«˜è´¨é‡çš„å£çº¸ä½œä¸ºç½‘ç«™æµ·æŠ¥ï¼Œæˆ‘åœ¨è¿™é‡Œä¹Ÿæ”¶è—äº†ä¸€æ‰¹é«˜è´¨é‡çš„å£çº¸ç½‘ç«™ã€‚</p>\n<p>æ¬¢è¿è®¿é—®ï¼š <span class=\"exturl\" data-url=\"aHR0cHM6Ly94ZmMtZXhjbGF2ZS5naXRodWIuaW8vMjAyMS8wOC8wMy9yZXNvdXJjZS93YWxscGFwZXJfc2l0ZQ==\">é«˜æ¸…å£çº¸ç½‘ç«™æ¨è</span></p>\n<h3 id=\"æ’ä»¶é…ç½®\"><a class=\"anchor\" href=\"#æ’ä»¶é…ç½®\">#</a> æ’ä»¶é…ç½®</h3>\n<h3 id=\"çº¿ä¸Šç¯å¢ƒ\"><a class=\"anchor\" href=\"#çº¿ä¸Šç¯å¢ƒ\">#</a> çº¿ä¸Šç¯å¢ƒ</h3>\n<h3 id=\"å†™ä½œä¸å‘å¸ƒ\"><a class=\"anchor\" href=\"#å†™ä½œä¸å‘å¸ƒ\">#</a> å†™ä½œä¸å‘å¸ƒ</h3>\n<h3 id=\"ç»“è¯­\"><a class=\"anchor\" href=\"#ç»“è¯­\">#</a> ç»“è¯­</h3>\n<p>è‡³æ­¤ï¼Œä¸€ä¸ªç²¾ç¾çš„ä¸ªäººåšå®¢å°±æ­å»ºå¥½äº†ï¼Œæ‚¨çš„ä»»ä½•æ‰ä¼šéƒ½å°†ä¸ä¼šè¢«è¾œè´Ÿï¼Œæ‚¨å¯ä»¥åœ¨è‡ªå·±çš„å°å°å¤©åœ°é‡Œè®°å½•ä¸‹æ‚¨çš„å­¦ä¹ å·¥ä½œå¿ƒå¾—ã€ç”Ÿæ´»æƒ…æ„Ÿç»å†ã€æ–‡å­—æˆ–å›¾åƒä½œå“ï¼Œä¹ƒè‡³äºé€šè¿‡ç›¸äº’ã€Œå‹é“¾ã€è®¤è¯†æ›´å¤šæœ‰è¶£çš„äººï¼Œç›¸ä¿¡å®ƒä¸€å®šä¼šç»™æ‚¨çš„ç”Ÿæ´»å¸¦æ¥ç²¾å½©ã€‚</p>\n<p>å¦‚æœåˆ›å»ºæˆåŠŸåæƒ³è¦æ·»åŠ äº›ã€Œå‹é“¾ã€ï¼Œä¸å¦¨è€ƒè™‘æŠŠæˆ‘çš„å°ç«™åŠ ä¸Šï¼Œæˆ‘çš„å°ç«™ä¿¡æ¯å¦‚ä¸‹ï¼š</p>\n<blockquote>\n<p>ç½‘ç«™åç§°ï¼šè§å±±äº‘æœ¨</p>\n<p>ç½‘ç«™åœ°å€ï¼š<span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cueGZjLWV4Y2xhdmUuY29t\">https://www.xfc-exclave.com</span></p>\n<p>LOGO åœ°å€ï¼š<span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cueGZjLWV4Y2xhdmUuY29tL2F2YXRhcg==\">https://www.xfc-exclave.com/avatar</span></p>\n<p>ä»‹ç»ï¼šçº¢å°˜ä¸‰åé‡Œï¼Œè¿œä¸è§ä½ ï¼Œä½ ä¸è§å±±</p>\n</blockquote>\n<p>è‡´è°¢ï¼</p>\n",
            "tags": [
                "å»ºç«™å‘¨è¾¹çŸ¥è¯†",
                "å»ºç«™",
                "åšå®¢"
            ]
        },
        {
            "id": "https://www.chinmoku.cc/computer-science/java-learning-path/3-advanced/elasticsearch-tutorial/",
            "url": "https://www.chinmoku.cc/computer-science/java-learning-path/3-advanced/elasticsearch-tutorial/",
            "title": "Elasticsearch æ•™ç¨‹",
            "date_published": "2021-08-04T04:44:27.000Z",
            "content_html": "<div class=\"note info\">\n<p>Elasticsearch æ˜¯ä¸€ä¸ªåŸºäº  <code>Lucene</code>  çš„æœç´¢æœåŠ¡å™¨ã€‚å®ƒæä¾›äº†ä¸€ä¸ªåˆ†å¸ƒå¼å¤šç”¨æˆ·èƒ½åŠ›çš„å…¨æ–‡æœç´¢å¼•æ“ï¼ŒåŸºäº RESTful web æ¥å£ã€‚Elasticsearch æ˜¯ç”¨ Java è¯­è¨€å¼€å‘çš„ï¼Œå¹¶ä½œä¸º Apache è®¸å¯æ¡æ¬¾ä¸‹çš„å¼€æ”¾æºç å‘å¸ƒï¼Œæ˜¯ä¸€ç§æµè¡Œçš„ä¼ä¸šçº§æœç´¢å¼•æ“ã€‚Elasticsearch ç”¨äºäº‘è®¡ç®—ä¸­ï¼Œèƒ½å¤Ÿè¾¾åˆ°å®æ—¶æœç´¢ï¼Œç¨³å®šï¼Œå¯é ï¼Œå¿«é€Ÿï¼Œå®‰è£…ä½¿ç”¨æ–¹ä¾¿ã€‚å®˜æ–¹å®¢æˆ·ç«¯åœ¨ Javaã€.NETï¼ˆC#ï¼‰ã€PHPã€Pythonã€Apache Groovyã€Ruby å’Œè®¸å¤šå…¶ä»–è¯­è¨€ä¸­éƒ½æ˜¯å¯ç”¨çš„ã€‚æ ¹æ® DB-Engines çš„æ’åæ˜¾ç¤ºï¼ŒElasticsearch æ˜¯æœ€å—æ¬¢è¿çš„ä¼ä¸šæœç´¢å¼•æ“ï¼Œå…¶æ¬¡æ˜¯ Apache Solrï¼Œä¹Ÿæ˜¯åŸºäº Luceneã€‚</p>\n<p>quote from <span class=\"exturl\" data-url=\"aHR0cHM6Ly9iYWlrZS5iYWlkdS5jb20vaXRlbS9lbGFzdGljc2VhcmNo\">ç™¾åº¦ç™¾ç§‘_ElasticSearch</span></p>\n</div>\n<h3 id=\"ç®€ä»‹\"><a class=\"anchor\" href=\"#ç®€ä»‹\">#</a> ç®€ä»‹</h3>\n<p>æ¦‚å¿µç®€ä»‹ï¼š</p>\n<ul>\n<li><code>ELK</code>  ã€  <code>Elastic Static</code>  ã€  <code>ELK Stack</code>  ï¼Ÿ</li>\n</ul>\n<p>å¯ä»¥ç›´æ¥çœ‹ <span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuZWxhc3RpYy5jby9jbi93aGF0LWlzL2Vsay1zdGFjaw==\">å®˜ç½‘ä»‹ç»</span> ï¼ˆè€—æ—¶ 2 åˆ†é’Ÿï¼‰ï¼Œæ—¢å½¢è±¡ï¼Œåˆæœ‰è¶£å‘³ã€‚</p>\n<p>å¯ä»¥æ€»ç»“ä¸ºï¼š  <code>ELK Stack</code>  =  <code>ElasticSearch</code>  +  <code>Logstash</code>  +  <code>Kibana</code>  +  <code>Beats</code>  ã€‚</p>\n<ul>\n<li>\n<p>Elastic Stack çš„ç»„æˆ</p>\n<p><img data-src=\"https://www.elastic.co/guide/en/beats/libbeat/current/images/beats-platform.png\" alt=\"ELKStackComponents\" /></p>\n</li>\n</ul>\n<h4 id=\"elasticsearch\"><a class=\"anchor\" href=\"#elasticsearch\">#</a> ElasticSearch</h4>\n<p>Elasticsearch åŸºäº javaï¼Œæ˜¯ä¸ªå¼€æºåˆ†å¸ƒå¼æœç´¢å¼•æ“ï¼Œå®ƒçš„ç‰¹ç‚¹æœ‰ï¼šåˆ†å¸ƒå¼ï¼Œé›¶é…ç½®ï¼Œè‡ªåŠ¨å‘ç°ï¼Œç´¢å¼•è‡ªåŠ¨åˆ†ç‰‡ï¼Œç´¢å¼•å‰¯æœ¬æœºåˆ¶ï¼Œrestful é£æ ¼æ¥å£ï¼Œå¤šæ•°æ®æºï¼Œè‡ªåŠ¨æœç´¢è´Ÿè½½ç­‰ã€‚</p>\n<p><img data-src=\"https://img.xfc-exclave.com/2021/08/03/869da061ab1d536d4692dde49e0e813c1627921578.jpg\" alt=\"elasticsearchå®˜ç½‘å›¾æ ‡\" /></p>\n<p>ElasticSearch æ˜¯ Elastic Stack çš„æ ¸å¿ƒï¼ŒåŒæ—¶ Elasticsearch æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼ã€RESTful é£æ ¼çš„æœç´¢å’Œæ•°æ®åˆ†æå¼•æ“ï¼Œèƒ½å¤Ÿè§£å†³ä¸æ–­æ¶Œç°å‡ºçš„å„ç§ç”¨ä¾‹ã€‚ä½œä¸º Elastic Stack çš„æ ¸å¿ƒï¼Œå®ƒé›†ä¸­å­˜å‚¨æ‚¨çš„æ•°æ®ï¼Œå¸®åŠ©æ‚¨å‘ç°æ„æ–™ä¹‹ä¸­ä»¥åŠæ„æ–™ä¹‹å¤–çš„æƒ…å†µã€‚</p>\n<h4 id=\"logstash\"><a class=\"anchor\" href=\"#logstash\">#</a> Logstash</h4>\n<p>Logstash åŸºäº javaï¼Œæ˜¯ä¸€ä¸ªå¼€æºçš„ç”¨äºæ”¶é›†ï¼Œåˆ†æå’Œå­˜å‚¨æ—¥å¿—çš„å·¥å…·ã€‚</p>\n<h4 id=\"kibana\"><a class=\"anchor\" href=\"#kibana\">#</a> Kibana</h4>\n<p>Kibana åŸºäº nodejsï¼Œä¹Ÿæ˜¯ä¸€ä¸ªå¼€æºå’Œå…è´¹çš„å·¥å…·ï¼ŒKibana å¯ä»¥ä¸º Logstash å’Œ ElasticSearch æä¾›çš„æ—¥å¿—åˆ†æå‹å¥½çš„ Web ç•Œé¢ï¼Œå¯ä»¥æ±‡æ€»ã€åˆ†æå’Œæœç´¢é‡è¦æ•°æ®æ—¥å¿—ã€‚</p>\n<h4 id=\"beats\"><a class=\"anchor\" href=\"#beats\">#</a> Beats</h4>\n<p>Beats æ˜¯ elastic å…¬å¸å¼€æºçš„ä¸€æ¬¾é‡‡é›†ç³»ç»Ÿç›‘æ§æ•°æ®çš„ä»£ç†ï¼Œæ˜¯åœ¨è¢«ç›‘æ§æœåŠ¡å™¨ä¸Šä»¥å®¢æˆ·ç«¯å½¢å¼è¿è¡Œçš„æ•°æ®æ”¶é›†å™¨çš„ç»Ÿç§°ï¼Œå¯ä»¥ç›´æ¥æŠŠæ•°æ®å‘é€ç»™ Elasticsearch æˆ–è€…é€šè¿‡ Logstash å‘é€ç»™ Elasticsearch ï¼Œç„¶åè¿›è¡Œåç»­çš„æ•°æ®åˆ†ææ´»åŠ¨ã€‚ Beats ç”±å¦‚ä¸‹ç»„æˆï¼š</p>\n<ul>\n<li>Packetbeatï¼šæ˜¯ä¸€ä¸ªç½‘ç»œæ•°æ®åŒ…åˆ†æå™¨ï¼Œç”¨äºç›‘æ§ã€æ”¶é›†ç½‘ç»œæµé‡ä¿¡æ¯ï¼ŒPacketbeat å—…æ¢æœåŠ¡å™¨ä¹‹é—´çš„æµé‡ï¼Œè§£æåº”ç”¨å±‚åè®®ï¼Œå¹¶å…³è”åˆ°æ¶ˆæ¯çš„å¤„ç†ï¼Œå…¶æ”¯ æŒ ICMP (v4 and v6)ã€DNSã€HTTPã€Mysqlã€PostgreSQLã€Redisã€MongoDBã€Memcache ç­‰åè®®ï¼›</li>\n<li>Filebeatï¼šç”¨äºç›‘æ§ã€æ”¶é›†æœåŠ¡å™¨æ—¥å¿—æ–‡ä»¶ï¼Œå…¶å·²å–ä»£ logstash forwarderï¼›</li>\n<li>Metricbeatï¼šå¯å®šæœŸè·å–å¤–éƒ¨ç³»ç»Ÿçš„ç›‘æ§æŒ‡æ ‡ä¿¡æ¯ï¼Œå…¶å¯ä»¥ç›‘æ§ã€æ”¶é›† Apacheã€HAProxyã€MongoDB MySQLã€Nginxã€PostgreSQLã€Redisã€Systemã€Zookeeper ç­‰æœåŠ¡ï¼›</li>\n</ul>\n<blockquote>\n<p>Beats å’Œ Logstash å…¶å®éƒ½å¯ä»¥è¿›è¡Œæ•°æ®çš„é‡‡é›†ï¼Œä½†æ˜¯ç›®å‰ä¸»æµçš„æ˜¯ä½¿ç”¨ Beats è¿›è¡Œæ•°æ®é‡‡é›†ï¼Œç„¶åä½¿ç”¨ Logstash è¿›è¡Œæ•°æ®çš„åˆ†å‰²å¤„ç†ç­‰ï¼Œæ—©æœŸæ²¡æœ‰ Beats çš„æ—¶å€™ï¼Œä½¿ç”¨çš„å°±æ˜¯ Logstash è¿›è¡Œæ•°æ®çš„é‡‡é›†ã€‚</p>\n</blockquote>\n<h3 id=\"å®‰è£…ä¸è¿è¡Œ\"><a class=\"anchor\" href=\"#å®‰è£…ä¸è¿è¡Œ\">#</a> å®‰è£…ä¸è¿è¡Œ</h3>\n<blockquote>\n<p>æœ¬æ–‡ä»¥ window å®‰è£…ç¯å¢ƒä¸ºä¾‹ï¼Œlinux ç¯å¢ƒå®‰è£…è¯·å¦è¡Œæ¢ç´¢ã€‚éœ€é…ç½® java 1.8+ ç¯å¢ƒã€‚</p>\n</blockquote>\n<h4 id=\"elasticsearch-ä¸‹è½½å®‰è£…\"><a class=\"anchor\" href=\"#elasticsearch-ä¸‹è½½å®‰è£…\">#</a> ElasticSearch ä¸‹è½½å®‰è£…</h4>\n<ol>\n<li>\n<p>æ ¹æ®ç¯å¢ƒé€‰æ‹©ä¸‹è½½å®‰è£…åŒ…ã€‚</p>\n<p>ä¸‹è½½åœ°å€ï¼š <span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuZWxhc3RpYy5jby9jbi9kb3dubG9hZHMvZWxhc3RpY3NlYXJjaA==\">https://www.elastic.co/cn/downloads/elasticsearch</span></p>\n</li>\n<li>\n<p>è§£å‹ã€‚</p>\n<p><img data-src=\"https://img.xfc-exclave.com/2021/08/02/9fe70889177651c41d2a824f40a5568c1627905563.png\" alt=\"image-20210802195912694\" /></p>\n<p>ç›®å½•ç»“æ„è¯´æ˜ï¼š</p>\n<ul>\n<li>bin --- ç”¨äºå­˜æ”¾ ES å¯åŠ¨ç­‰è„šæœ¬æ–‡ä»¶ã€‚</li>\n<li>config --- ES ç›¸å…³é…ç½®æ–‡ä»¶ã€‚</li>\n<li>data --- å­˜æ”¾ ES å½“å‰èŠ‚ç‚¹çš„åˆ†ç‰‡æ•°æ®ï¼Œå¯ä»¥ç›´æ¥æ‹·è´åˆ°å…¶ä»–èŠ‚ç‚¹è¿›è¡Œä½¿ç”¨ã€‚ï¼ˆä¸Šå›¾æš‚æœªè¿è¡Œï¼Œåˆ™ä¸å­˜åœ¨è¯¥æ–‡ä»¶å¤¹ï¼‰</li>\n<li>log --- ES è¿è¡Œæ—¥å¿—ã€‚</li>\n<li>plugins --- å­˜æ”¾å¸¸ç”¨çš„æ’ä»¶ï¼Œå¦‚éœ€æ·»åŠ é¢å¤–çš„æ’ä»¶ï¼Œä¹Ÿå¯ä»¥æ”¾åœ¨è¿™ä¸ªç›®å½•ä¸‹ã€‚</li>\n</ul>\n</li>\n<li>\n<p>å¯åŠ¨åŠè®¿é—®ã€‚</p>\n<p>åŒå‡»æ‰§è¡Œ  <code>~\\elasticsearch-7.13.4\\bin\\elasticsearch.bat</code>  æ–‡ä»¶ã€‚</p>\n<p><img data-src=\"https://img.xfc-exclave.com/2021/08/02/2bf7776f8ac7c65780db9af81cae23a71627905915.png\" alt=\"ESå¯åŠ¨æˆåŠŸæˆªå›¾\" /></p>\n<p>æ­¤å¤„å¯åŠ¨æˆåŠŸï¼Œå¹¶æç¤º  <code>Active license is now [BASIC]; Security is disabled</code>  ï¼Œè¿™é‡Œæ˜¯æŒ‡å½“å‰ ES é›†ç¾¤ç¯å¢ƒæœªå¼€å¯ Security ï¼Œå³æ²¡æœ‰è®¾ç½®è´¦å·å¯†ç ç™»å½• elasticsearch æœåŠ¡ã€‚ï¼ˆæ­¤å¤„å¯ä»¥å…ˆå¿½ç•¥ï¼‰</p>\n<p>ES ä¼šé»˜è®¤å¯åŠ¨ä¸¤ä¸ªç«¯å£ï¼š</p>\n<ul>\n<li>\n<p>9200ï¼šhttp åè®®ç«¯å£ï¼Œç”¨äºé›†ç¾¤ä¹‹é—´çš„é€šä¿¡ã€‚</p>\n</li>\n<li>\n<p>9300ï¼štcp é€šä¿¡ç«¯å£ã€‚</p>\n</li>\n</ul>\n<p>æµè§ˆå™¨è®¿é—® <span class=\"exturl\" data-url=\"aHR0cDovLzEyNy4wLjAuMTo5MjAw\">http://127.0.0.1:9200</span> å¾—åˆ°ç±»ä¼¼å¦‚ä¸‹ä¿¡æ¯ï¼šï¼ˆåŒæ—¶ä¼šåœ¨ ES è§£å‹ç›®å½•ä¸‹ç”Ÿæˆ data æ–‡ä»¶å¤¹ï¼‰</p>\n<figure class=\"highlight json\"><figcaption data-lang=\"JSON\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token property\">\"name\"</span> <span class=\"token operator\">:</span> <span class=\"token string\">\"DESKTOP-6F723A6\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token property\">\"cluster_name\"</span> <span class=\"token operator\">:</span> <span class=\"token string\">\"elasticsearch\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token property\">\"cluster_uuid\"</span> <span class=\"token operator\">:</span> <span class=\"token string\">\"aNleIQnmT_eexKfsuqJ9Og\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token property\">\"version\"</span> <span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token property\">\"number\"</span> <span class=\"token operator\">:</span> <span class=\"token string\">\"7.13.4\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token property\">\"build_flavor\"</span> <span class=\"token operator\">:</span> <span class=\"token string\">\"default\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token property\">\"build_type\"</span> <span class=\"token operator\">:</span> <span class=\"token string\">\"zip\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token property\">\"build_hash\"</span> <span class=\"token operator\">:</span> <span class=\"token string\">\"c5f60e894ca0c61cdbae4f5a686d9f08bcefc942\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token property\">\"build_date\"</span> <span class=\"token operator\">:</span> <span class=\"token string\">\"2021-07-14T18:33:36.673943207Z\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token property\">\"build_snapshot\"</span> <span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token property\">\"lucene_version\"</span> <span class=\"token operator\">:</span> <span class=\"token string\">\"8.8.2\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token property\">\"minimum_wire_compatibility_version\"</span> <span class=\"token operator\">:</span> <span class=\"token string\">\"6.8.0\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token property\">\"minimum_index_compatibility_version\"</span> <span class=\"token operator\">:</span> <span class=\"token string\">\"6.0.0-beta1\"</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token property\">\"tagline\"</span> <span class=\"token operator\">:</span> <span class=\"token string\">\"You Know, for Search\"</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure></li>\n<li>\n<p>å¯èƒ½å‡ºç°çš„é—®é¢˜ã€‚</p>\n<p>kibana è®¿é—®æ—¶æŠ¥é”™ï¼š</p>\n<blockquote>\n<p>high disk watermark [90%] exceeded on...</p>\n</blockquote>\n<p>ç£ç›˜ç©ºé—´è¾¾åˆ° 90% æ—¶ï¼Œes ä¼šå°†èŠ‚ç‚¹ä¸Šé¢çš„ç´¢å¼•æ ‡ä¸ºåªè¯»ï¼Œå¯¼è‡´ä¸èƒ½å†™å…¥æ•°æ®ã€‚</p>\n<p>è§£å†³æ–¹æ³•ï¼š</p>\n<ol>\n<li>\n<p>è°ƒæ•´ç£ç›˜ç©ºé—´æ¯”ä¾‹ï¼ˆä½¿ç”¨ç™¾åˆ†æ¯”æˆ– gbï¼‰</p>\n<p>config/elasticsearch.yml</p>\n<figure class=\"highlight yml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">cluster.routing.allocation.disk.watermark.low</span><span class=\"token punctuation\">:</span> 30g</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token key atrule\">cluster.routing.allocation.disk.watermark.high</span><span class=\"token punctuation\">:</span> 20gb</pre></td></tr></table></figure></li>\n<li>\n<p>å…³é—­é˜€å€¼è®¾ç½®</p>\n<p>config/elasticsearch.yml</p>\n<figure class=\"highlight yml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">cluster.routing.allocation.disk.threshold_enabled</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">false</span></pre></td></tr></table></figure></li>\n</ol>\n</li>\n</ol>\n<h4 id=\"elasticsearch-head\"><a class=\"anchor\" href=\"#elasticsearch-head\">#</a> Elasticsearch-head</h4>\n<p><code>elasticsearch-head</code>  æ˜¯ä¸€ä¸ªç”¨äºæµè§ˆ ElasticSearch é›†ç¾¤å¹¶ä¸å…¶è¿›è¡Œäº¤äº’çš„ Web é¡¹ç›®ã€‚</p>\n<ol>\n<li>\n<p>ä¸‹è½½ã€‚</p>\n<p>ä¸‹è½½åœ°å€ï¼š<span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL21vYnovZWxhc3RpY3NlYXJjaC1oZWFk\">https://github.com/mobz/elasticsearch-head</span></p>\n</li>\n<li>\n<p>å¯åŠ¨ã€‚</p>\n<p>åˆ†åˆ«æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š</p>\n<pre><code>npm insatall\nnpm run start\n</code></pre>\n</li>\n<li>\n<p>è®¿é—®ã€‚</p>\n<p>æ³¨ï¼šéœ€è¦å…ˆåœ¨ Elasticsearch æœåŠ¡ä¸­é…ç½®è·¨åŸŸç­–ç•¥ï¼Œå¦åˆ™ä¼šå› ä¸ºè·¨åŸŸè€Œè¿æ¥ä¸ä¸Šã€‚æ‰“å¼€  <code>~\\elasticsearch-7.13.4\\config\\elasticsearch.yml</code>  å¹¶æ·»åŠ å¦‚ä¸‹é…ç½®åé‡å¯å³å¯ï¼š</p>\n<figure class=\"highlight yml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">http.cors.enabled</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token key atrule\">http.cors.allow-origin</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"*\"</span></pre></td></tr></table></figure><p>åœ¨æµè§ˆå™¨ä¸­è®¿é—®ï¼š<span class=\"exturl\" data-url=\"aHR0cDovLzEyNy4wLjAuMTo5MTAw\">http://127.0.0.1:9100</span> å¹¶è¿æ¥ï¼Œè¿æ¥æˆåŠŸåè§†å›¾å¦‚ä¸‹ï¼š</p>\n<p><img data-src=\"https://img.xfc-exclave.com/2021/08/03/9d6a0e064ce82a54c39b651df60e63d31627921269.png\" alt=\"Elasticsearch-headè¿æ¥æˆåŠŸæˆªå›¾\" /></p>\n<p>æ³¨ï¼šä»¥ä¸Šæˆªå›¾æ˜¾ç¤ºäº†éƒ¨åˆ†æ•°æ®ï¼Œæ˜¯  <code>kibana</code>  è¿æ¥æ—¶è‡ªåŠ¨ç”Ÿæˆçš„ï¼Œå¦‚è¿˜æœªè¿æ¥åˆ™æŸ¥è¯¢ä¸ºç©ºã€‚</p>\n</li>\n<li>\n<p>å¥åº·å€¼è¯´æ˜ã€‚</p>\n<ul>\n<li>ç»¿è‰²ï¼šæœ€å¥åº·çš„çŠ¶æ€ï¼Œä»£è¡¨æ‰€æœ‰çš„åˆ†ç‰‡åŒ…æ‹¬å¤‡ä»½éƒ½å¯ç”¨ã€‚</li>\n<li>é»„è‰²ï¼šåŸºæœ¬çš„åˆ†ç‰‡å¯ç”¨ï¼Œä½†æ˜¯å¤‡ä»½ä¸å¯ç”¨ï¼ˆä¹Ÿå¯èƒ½æ˜¯æ²¡æœ‰å¤‡ä»½ï¼‰ã€‚</li>\n<li>çº¢è‰²ï¼šéƒ¨åˆ†çš„åˆ†ç‰‡å¯ç”¨ï¼Œè¡¨æ˜åˆ†ç‰‡æœ‰ä¸€éƒ¨åˆ†æŸåã€‚æ­¤æ—¶æ‰§è¡ŒæŸ¥è¯¢éƒ¨åˆ†æ•°æ®ä»ç„¶å¯ä»¥æŸ¥åˆ°ï¼Œé‡åˆ°è¿™ç§æƒ…å†µï¼Œè¿˜æ˜¯èµ¶å¿«è§£å†³æ¯”è¾ƒå¥½ã€‚</li>\n<li>ç°è‰²ï¼šæœªè¿æ¥åˆ°æœåŠ¡ã€‚</li>\n</ul>\n</li>\n</ol>\n<h4 id=\"kibana-ä¸‹è½½å®‰è£…\"><a class=\"anchor\" href=\"#kibana-ä¸‹è½½å®‰è£…\">#</a> Kibana ä¸‹è½½å®‰è£…</h4>\n<p>Kibana æ˜¯ä¸€ä¸ªå…è´¹ä¸”å¼€æ”¾çš„ç”¨æˆ·ç•Œé¢ï¼Œèƒ½å¤Ÿè®©æ‚¨å¯¹ Elasticsearch æ•°æ®è¿›è¡Œå¯è§†åŒ–ï¼Œå¹¶è®©æ‚¨åœ¨ Elastic Stack ä¸­è¿›è¡Œå¯¼èˆªã€‚æ‚¨å¯ä»¥è¿›è¡Œå„ç§æ“ä½œï¼Œä»è·Ÿè¸ªæŸ¥è¯¢è´Ÿè½½ï¼Œåˆ°ç†è§£è¯·æ±‚å¦‚ä½•æµç»æ‚¨çš„æ•´ä¸ªåº”ç”¨ï¼Œéƒ½èƒ½è½»æ¾å®Œæˆã€‚</p>\n<blockquote>\n<p>æ³¨æ„ï¼šå°½é‡ä¿æŒ kibana ç‰ˆæœ¬ä¸ elasticsearch ç‰ˆæœ¬ä¸€ç›´ã€‚</p>\n</blockquote>\n<ol>\n<li>\n<p>æ ¹æ®ç¯å¢ƒé€‰æ‹©ä¸‹è½½å®‰è£…åŒ…ã€‚</p>\n<p>ä¸‹è½½åœ°å€ï¼š <span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuZWxhc3RpYy5jby9jbi9kb3dubG9hZHMva2liYW5h\">https://www.elastic.co/cn/downloads/kibana</span></p>\n</li>\n<li>\n<p>é…ç½®ã€‚</p>\n<p>æ‰“å¼€å¹¶ç¼–è¾‘  <code>~\\kibana-7.13.4\\config\\kibana.yml</code>  æ–‡ä»¶ï¼š</p>\n<figure class=\"highlight yml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">server.host</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"127.0.0.1\"</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token key atrule\">elasticsearch.hosts</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"http://127.0.0.1:9200\"</span><span class=\"token punctuation\">]</span></pre></td></tr></table></figure><p><img data-src=\"https://img.xfc-exclave.com/2021/08/02/0c66082debf06d1c4c37dd08f69dd1a01627906644.png\" alt=\"kibanaä¿®æ”¹é…ç½®ç¤ºä¾‹\" /></p>\n</li>\n<li>\n<p>å¯åŠ¨åŠè®¿é—®ã€‚</p>\n<p>åŒå‡»æ‰§è¡Œ  <code>~\\kibana-7.13.4\\bin\\kibana.bat</code>  æ–‡ä»¶ï¼ˆéœ€è¦å…ˆå¯åŠ¨ elasticsearchï¼‰ã€‚</p>\n<p>å‡ºç°  <code>http server running at http://127.0.0.1:5601</code>  å³è¡¨ç¤ºå¯åŠ¨æˆåŠŸã€‚</p>\n<p><img data-src=\"https://img.xfc-exclave.com/2021/08/02/06947ba1f8889d8082edf7b1e85f83f01627906845.png\" alt=\"kibanaå¯åŠ¨æˆåŠŸæˆªå›¾\" /></p>\n<p>åœ¨æµè§ˆå™¨ä¸­è®¿é—®ï¼š<span class=\"exturl\" data-url=\"aHR0cDovLzEyNy4wLjAuMTo1NjAx\">http://127.0.0.1:5601</span> è§†å›¾å¦‚ä¸‹ï¼š</p>\n<p><img data-src=\"https://img.xfc-exclave.com/2021/08/02/c46c6c979d5bdd3126f8f9efa3eaf7991627907052.jpg\" alt=\"Kibanaè§†å›¾ç•Œé¢\" /></p>\n</li>\n<li>\n<p>å¯èƒ½å‡ºç°çš„é—®é¢˜ã€‚</p>\n<p>å¯åŠ¨è­¦å‘Šï¼š</p>\n<blockquote>\n<p>Session cookies will be transmitted over insecure connections. This is not recommended.</p>\n<p>Generating a random key for xpack.security.encryptionKey. To prevent sessions from being invalidated on restart, please set xpack.security.encryptionKey in kibana.yml</p>\n</blockquote>\n<p>å¯å°è¯•åœ¨æ–‡ä»¶ä¸­æ·»åŠ å¦‚ä¸‹é…ç½®ä¿¡æ¯ï¼š</p>\n<figure class=\"highlight yml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">xpack.encryptedSavedObjects.encryptionKey</span><span class=\"token punctuation\">:</span> encryptedSavedObjects12345678909876543210</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token key atrule\">xpack.security.encryptionKey</span><span class=\"token punctuation\">:</span> encryptionKeysecurity12345678909876543210</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token key atrule\">xpack.reporting.encryptionKey</span><span class=\"token punctuation\">:</span> encryptionKeyreporting12345678909876543210</pre></td></tr></table></figure></li>\n</ol>\n<p>æ³¨ï¼šES å›¾å½¢åŒ–æ’ä»¶é™¤äº† kibana å¤–ï¼Œè¿˜æœ‰  <code>ElasticSearch Head</code>  ã€  <code>elasticsearch-sql</code>  ç­‰ï¼Œä½†è§†å›¾é£æ ¼æœ‰ç‚¹è€ã€‚elasticsearchã€logstashã€kibana åˆç§°  <code>ELK</code>  ã€‚</p>\n<h4 id=\"logstash-ä¸‹è½½å®‰è£…\"><a class=\"anchor\" href=\"#logstash-ä¸‹è½½å®‰è£…\">#</a> Logstash ä¸‹è½½å®‰è£…</h4>\n<blockquote>\n<p>æ³¨æ„ï¼šå°½é‡ä¿æŒ logstash ç‰ˆæœ¬ä¸ elasticsearch ç‰ˆæœ¬ä¸€ç›´ã€‚</p>\n</blockquote>\n<ol>\n<li>\n<p>æ ¹æ®ç¯å¢ƒé€‰æ‹©ä¸‹è½½å®‰è£…åŒ…ã€‚</p>\n<p>ä¸‹è½½åœ°å€ï¼š <span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuZWxhc3RpYy5jby9jbi9kb3dubG9hZHMvbG9nc3Rhc2g=\">https://www.elastic.co/cn/downloads/logstash</span></p>\n</li>\n<li>\n<p>é…ç½®å¯åŠ¨ã€‚</p>\n<p>åœ¨  <code>logstash-7.13.4\\bin</code>  ç›®å½•ä¸‹æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š</p>\n<blockquote>\n<p>logstash -e &quot;input { stdin {} } output { stdout {} }&quot;</p>\n</blockquote>\n<p>å½“å‡ºç°  <code>Piplines running...</code>   æ—¶ï¼Œè¾“å…¥ä»»æ„å­—ç¬¦ä¸²è¿›è¡Œæµ‹è¯•ï¼Œå¦‚ä¸‹å›¾ï¼š</p>\n<p><img data-src=\"https://img.xfc-exclave.com/2021/08/02/44098fd1f0b61645509fd9ee65bb78231627908323.png\" alt=\"Logstashå¯åŠ¨æµ‹è¯•ç¤ºä¾‹\" /></p>\n</li>\n</ol>\n<h3 id=\"es-ç›¸å…³æ¦‚å¿µ\"><a class=\"anchor\" href=\"#es-ç›¸å…³æ¦‚å¿µ\">#</a> ES ç›¸å…³æ¦‚å¿µ</h3>\n<blockquote>\n<p>Elasticsearch æ˜¯é¢å‘æ–‡æ¡£ï¼ˆdocument orientedï¼‰çš„ï¼Œè¿™æ„å‘³ç€å®ƒå¯ä»¥å­˜å‚¨æ•´ä¸ªå¯¹è±¡æˆ–æ–‡æ¡£ï¼ˆdocumentï¼‰ã€‚ç„¶è€Œå®ƒä¸ä»…ä»…æ˜¯å­˜å‚¨ï¼Œè¿˜ä¼šç´¢å¼•ï¼ˆindexï¼‰æ¯ä¸ªæ–‡æ¡£çš„å†…å®¹ä½¿ä¹‹å¯ä»¥è¢«æœç´¢ã€‚åœ¨ Elasticsearch ä¸­ï¼Œä½ å¯ä»¥å¯¹æ–‡æ¡£ï¼ˆè€Œéæˆè¡Œæˆåˆ—çš„æ•°æ®ï¼‰è¿›è¡Œç´¢å¼•ã€æœç´¢ã€æ’åºã€è¿‡æ»¤ã€‚</p>\n</blockquote>\n<p>Elasticsearch ä¸ä¼ ç»Ÿå…³ç³»å‹æ•°æ®åº“å…³ç³»æ˜ å°„å¦‚ä¸‹ï¼š</p>\n<table>\n<thead>\n<tr>\n<th>Relational DB</th>\n<th>Elasticsearch</th>\n<th>æè¿°</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Databases</td>\n<td>Indices</td>\n<td></td>\n</tr>\n<tr>\n<td>Tables</td>\n<td>Types</td>\n<td></td>\n</tr>\n<tr>\n<td>Rows</td>\n<td>Documents</td>\n<td></td>\n</tr>\n<tr>\n<td>Columns</td>\n<td>Fields</td>\n<td></td>\n</tr>\n</tbody>\n</table>\n<h4 id=\"æ ¸å¿ƒæ¦‚å¿µ\"><a class=\"anchor\" href=\"#æ ¸å¿ƒæ¦‚å¿µ\">#</a> æ ¸å¿ƒæ¦‚å¿µ</h4>\n<ul>\n<li>\n<p>_indexï¼ˆç´¢å¼•ï¼‰</p>\n<p>ä¸€ä¸ªç´¢å¼•å°±æ˜¯ä¸€ä¸ªæ‹¥æœ‰å‡ åˆ†ç›¸ä¼¼ç‰¹å¾çš„æ–‡æ¡£çš„é›†åˆã€‚æ¯”å¦‚è¯´ï¼Œä½ å¯ä»¥æœ‰ä¸€ä¸ªå®¢æˆ·æ•°æ®çš„ç´¢å¼•ï¼Œå¦ä¸€ä¸ªäº§å“ç›®å½•çš„ç´¢å¼•ï¼Œè¿˜æœ‰ä¸€ä¸ªè®¢å•æ•°æ®çš„ç´¢å¼•ã€‚ä¸€ä¸ªç´¢å¼•ç”±ä¸€ä¸ªåå­—æ¥æ ‡è¯†ï¼ˆå¿…é¡»å…¨éƒ¨æ˜¯å°å†™å­—æ¯çš„ï¼‰ï¼Œå¹¶ä¸”å½“æˆ‘ä»¬è¦å¯¹å¯¹åº”äºè¿™ä¸ªç´¢å¼•ä¸­çš„æ–‡æ¡£è¿›è¡Œç´¢å¼•ã€æœç´¢ã€æ›´æ–°å’Œåˆ é™¤çš„æ—¶å€™ï¼Œéƒ½è¦ä½¿ç”¨åˆ°è¿™ä¸ªåå­—ã€‚åœ¨ä¸€ä¸ªé›†ç¾¤ä¸­ï¼Œå¯ä»¥å®šä¹‰ä»»æ„å¤šçš„ç´¢å¼•ã€‚ï¼ˆå¯ç±»æ¯” mysql ä¸­çš„æ•°æ®åº“è¿›è¡Œç†è§£ï¼‰</p>\n</li>\n<li>\n<p>_typeï¼ˆç±»å‹ï¼‰</p>\n<p>åœ¨ä¸€ä¸ªç´¢å¼•ä¸­ï¼Œä½ å¯ä»¥å®šä¹‰ä¸€ç§æˆ–å¤šç§ç±»å‹ã€‚ä¸€ä¸ªç±»å‹æ˜¯ä½ çš„ç´¢å¼•çš„ä¸€ä¸ªé€»è¾‘ä¸Šçš„åˆ†ç±» / åˆ†åŒºï¼Œå…¶è¯­ä¹‰å®Œå…¨ç”±ä½ æ¥å®šã€‚é€šå¸¸ï¼Œä¼šä¸ºå…·æœ‰ä¸€ç»„å…±åŒå­—æ®µçš„æ–‡æ¡£å®šä¹‰ä¸€ä¸ªç±»å‹ã€‚æ¯”å¦‚è¯´ï¼Œæˆ‘ä»¬å‡è®¾ä½ è¿è¥ä¸€ä¸ªåšå®¢å¹³å°å¹¶ä¸”å°†ä½ æ‰€æœ‰çš„æ•°æ®å­˜å‚¨åˆ°ä¸€ä¸ªç´¢å¼•ä¸­ã€‚åœ¨è¿™ä¸ªç´¢å¼•ä¸­ï¼Œä½ å¯ä»¥ä¸ºç”¨æˆ·æ•°æ®å®šä¹‰ä¸€ä¸ªç±»å‹ï¼Œä¸ºåšå®¢æ•°æ®å®šä¹‰å¦ä¸€ä¸ªç±»å‹ï¼Œå½“ç„¶ï¼Œä¹Ÿå¯ä»¥ä¸ºè¯„è®ºæ•°æ®å®šä¹‰å¦ä¸€ä¸ªç±»å‹ã€‚ï¼ˆå¯ç±»æ¯” mysql ä¸­çš„è¡¨è¿›è¡Œç†è§£ï¼‰</p>\n</li>\n<li>\n<p>fieldï¼ˆå­—æ®µï¼‰</p>\n<p>ç›¸å½“äºæ˜¯æ•°æ®è¡¨çš„å­—æ®µï¼Œå¯¹æ–‡æ¡£æ•°æ®æ ¹æ®ä¸åŒå±æ€§è¿›è¡Œçš„åˆ†ç±»æ ‡è¯† ã€‚</p>\n</li>\n<li>\n<p>mappingï¼ˆæ˜ å°„ï¼‰</p>\n<p>mapping æ˜¯å¤„ç†æ•°æ®çš„æ–¹å¼å’Œè§„åˆ™æ–¹é¢åšä¸€äº›é™åˆ¶ï¼Œå¦‚æŸä¸ªå­—æ®µçš„æ•°æ®ç±»å‹ã€é»˜è®¤å€¼ã€åˆ†æå™¨ã€æ˜¯å¦è¢«ç´¢å¼•ç­‰ç­‰ï¼Œè¿™äº›éƒ½æ˜¯æ˜ å°„é‡Œé¢å¯ä»¥è®¾ç½®çš„ï¼Œå…¶å®ƒå°±æ˜¯å¤„ç† es é‡Œé¢æ•°æ®çš„ä¸€äº›ä½¿ç”¨è§„åˆ™è®¾ç½®ä¹Ÿå«åšæ˜ å°„ï¼ŒæŒ‰ç€æœ€ä¼˜è§„åˆ™å¤„ç†æ•°æ®å¯¹æ€§èƒ½æé«˜å¾ˆå¤§ï¼Œå› æ­¤æ‰éœ€è¦å»ºç«‹æ˜ å°„ï¼Œå¹¶ä¸”éœ€è¦æ€è€ƒå¦‚ä½•å»ºç«‹æ˜ å°„æ‰èƒ½å¯¹æ€§èƒ½æ›´å¥½ã€‚ï¼ˆç›¸å½“äº mysql ä¸­çš„åˆ›å»ºè¡¨çš„è¿‡ç¨‹ï¼Œè®¾ç½®ä¸»é”®å¤–é”®ç­‰ç­‰ï¼‰</p>\n</li>\n<li>\n<p>documentï¼ˆæ–‡æ¡£ï¼‰</p>\n<p>ä¸€ä¸ªæ–‡æ¡£æ˜¯ä¸€ä¸ªå¯è¢«ç´¢å¼•çš„åŸºç¡€ä¿¡æ¯å•å…ƒã€‚æ¯”å¦‚ï¼Œä½ å¯ä»¥æ‹¥æœ‰æŸä¸€ä¸ªå®¢æˆ·çš„æ–‡æ¡£ï¼ŒæŸä¸€ä¸ªäº§å“çš„ä¸€ä¸ªæ–‡æ¡£ï¼Œå½“ç„¶ï¼Œä¹Ÿå¯ä»¥æ‹¥æœ‰æŸä¸ªè®¢å•çš„ä¸€ä¸ªæ–‡æ¡£ã€‚æ–‡æ¡£ä»¥ JSONï¼ˆJavascript Object Notationï¼‰æ ¼å¼æ¥è¡¨ç¤ºï¼Œè€Œ JSON æ˜¯ä¸€ä¸ªåˆ°å¤„å­˜åœ¨çš„äº’è”ç½‘æ•°æ®äº¤äº’æ ¼å¼ã€‚åœ¨ä¸€ä¸ª index/type é‡Œé¢ï¼Œä½ å¯ä»¥å­˜å‚¨ä»»æ„å¤šçš„æ–‡æ¡£ã€‚æ³¨æ„ï¼Œå°½ç®¡ä¸€ä¸ªæ–‡æ¡£ï¼Œç‰©ç†ä¸Šå­˜åœ¨äºä¸€ä¸ªç´¢å¼•ä¹‹ä¸­ï¼Œæ–‡æ¡£å¿…é¡»è¢«ç´¢å¼• / èµ‹äºˆä¸€ä¸ªç´¢å¼•çš„ typeã€‚ï¼ˆ æ’å…¥ç´¢å¼•åº“ä»¥æ–‡æ¡£ä¸ºå•ä½ï¼Œç±»æ¯”ä¸æ•°æ®åº“ä¸­çš„ä¸€è¡Œæ•°æ®ï¼‰</p>\n</li>\n<li>\n<p>clusterï¼ˆé›†ç¾¤ï¼‰</p>\n<p>ä¸€ä¸ªé›†ç¾¤å°±æ˜¯ç”±ä¸€ä¸ªæˆ–å¤šä¸ªèŠ‚ç‚¹ç»„ç»‡åœ¨ä¸€èµ·ï¼Œå®ƒä»¬å…±åŒæŒæœ‰æ•´ä¸ªçš„æ•°æ®ï¼Œå¹¶ä¸€èµ·æä¾›ç´¢å¼•å’Œæœç´¢åŠŸèƒ½ã€‚ä¸€ä¸ªé›†ç¾¤ç”± ä¸€ä¸ªå”¯ä¸€çš„åå­—æ ‡è¯†ï¼Œè¿™ä¸ªåå­—é»˜è®¤å°±æ˜¯ elasticsearchã€‚è¿™ä¸ªåå­—æ˜¯é‡è¦çš„ï¼Œå› ä¸ºä¸€ä¸ªèŠ‚ç‚¹åªèƒ½é€šè¿‡æŒ‡å®šæŸä¸ªé›†ç¾¤çš„åå­—ï¼Œæ¥åŠ å…¥è¿™ä¸ªé›†ç¾¤ã€‚</p>\n</li>\n<li>\n<p>nodeï¼ˆèŠ‚ç‚¹ï¼‰</p>\n<p>ä¸€ä¸ªèŠ‚ç‚¹æ˜¯é›†ç¾¤ä¸­çš„ä¸€ä¸ªæœåŠ¡å™¨ï¼Œä½œä¸ºé›†ç¾¤çš„ä¸€éƒ¨åˆ†ï¼Œå®ƒå­˜å‚¨æ•°æ®ï¼Œå‚ä¸é›†ç¾¤çš„ç´¢å¼•å’Œæœç´¢åŠŸèƒ½ã€‚å’Œé›†ç¾¤ç±»ä¼¼ï¼Œä¸€ ä¸ªèŠ‚ç‚¹ä¹Ÿæ˜¯ç”±ä¸€ä¸ªåå­—æ¥æ ‡è¯†çš„ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œè¿™ä¸ªåå­—æ˜¯ä¸€ä¸ªéšæœºçš„æ¼«å¨æ¼«ç”»è§’è‰²çš„åå­—ï¼Œè¿™ä¸ªåå­—ä¼šåœ¨å¯åŠ¨çš„ æ—¶å€™èµ‹äºˆèŠ‚ç‚¹ã€‚è¿™ä¸ªåå­—å¯¹äºç®¡ç†å·¥ä½œæ¥è¯´æŒºé‡è¦çš„ï¼Œå› ä¸ºåœ¨è¿™ä¸ªç®¡ç†è¿‡ç¨‹ä¸­ï¼Œä½ ä¼šå»ç¡®å®šç½‘ç»œä¸­çš„å“ªäº›æœåŠ¡å™¨å¯¹ åº”äº Elasticsearch é›†ç¾¤ä¸­çš„å“ªäº›èŠ‚ç‚¹ã€‚</p>\n<p>ä¸€ä¸ªèŠ‚ç‚¹å¯ä»¥é€šè¿‡é…ç½®é›†ç¾¤åç§°çš„æ–¹å¼æ¥åŠ å…¥ä¸€ä¸ªæŒ‡å®šçš„é›†ç¾¤ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½ä¼šè¢«å®‰æ’åŠ å…¥åˆ°ä¸€ä¸ªå« åš elasticsearch çš„é›†ç¾¤ä¸­ï¼Œè¿™æ„å‘³ç€ï¼Œå¦‚æœä½ åœ¨ä½ çš„ç½‘ç»œä¸­å¯åŠ¨äº†è‹¥å¹²ä¸ªèŠ‚ç‚¹ï¼Œå¹¶å‡å®šå®ƒä»¬èƒ½å¤Ÿç›¸äº’å‘ç°å½¼æ­¤ï¼Œå®ƒä»¬å°†ä¼šè‡ªåŠ¨åœ°å½¢æˆå¹¶åŠ å…¥åˆ°ä¸€ä¸ªå«åš elasticsearch çš„é›†ç¾¤ä¸­ã€‚</p>\n<p>åœ¨ä¸€ä¸ªé›†ç¾¤é‡Œï¼Œåªè¦ä½ æƒ³ï¼Œå¯ä»¥æ‹¥æœ‰ä»»æ„å¤šä¸ªèŠ‚ç‚¹ã€‚è€Œä¸”ï¼Œå¦‚æœå½“å‰ä½ çš„ç½‘ç»œä¸­æ²¡æœ‰è¿è¡Œä»»ä½• Elasticsearch èŠ‚ç‚¹ï¼Œ è¿™æ—¶å¯åŠ¨ä¸€ä¸ªèŠ‚ç‚¹ï¼Œä¼šé»˜è®¤åˆ›å»ºå¹¶åŠ å…¥ä¸€ä¸ªå«åš elasticsearch çš„é›†ç¾¤ã€‚</p>\n</li>\n<li>\n<p>shards &amp; replicas</p>\n<p>ä¸€ä¸ªç´¢å¼•å¯ä»¥å­˜å‚¨è¶…å‡ºå•ä¸ªç»“ç‚¹ç¡¬ä»¶é™åˆ¶çš„å¤§é‡æ•°æ®ã€‚æ¯”å¦‚ï¼Œä¸€ä¸ªå…·æœ‰ 10 äº¿æ–‡æ¡£çš„ç´¢å¼•å æ® 1TB çš„ç£ç›˜ç©ºé—´ï¼Œè€Œä»»ä¸€èŠ‚ç‚¹éƒ½æ²¡æœ‰è¿™æ ·å¤§çš„ç£ç›˜ç©ºé—´ï¼›æˆ–è€…å•ä¸ªèŠ‚ç‚¹å¤„ç†æœç´¢è¯·æ±‚ï¼Œå“åº”å¤ªæ…¢ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒElasticsearch æä¾›äº†å°†ç´¢å¼•åˆ’åˆ†æˆå¤šä»½çš„èƒ½åŠ›ï¼Œè¿™äº›ä»½å°±å«åšåˆ†ç‰‡ã€‚å½“ä½ åˆ›å»ºä¸€ä¸ªç´¢å¼•çš„æ—¶å€™ï¼Œä½ å¯ä»¥æŒ‡å®šä½ æƒ³è¦çš„åˆ†ç‰‡çš„æ•°é‡ã€‚æ¯ä¸ªåˆ†ç‰‡æœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªåŠŸèƒ½å®Œå–„å¹¶ä¸”ç‹¬ç«‹çš„ â€œç´¢å¼•â€ï¼Œè¿™ä¸ª â€œç´¢å¼•â€ å¯ä»¥è¢«æ”¾ç½®åˆ°é›†ç¾¤ä¸­çš„ä»»ä½•èŠ‚ç‚¹ä¸Šã€‚åˆ†ç‰‡å¾ˆé‡è¦ï¼Œä¸»è¦æœ‰ä¸¤æ–¹é¢çš„åŸå› ï¼š</p>\n<ol>\n<li>å…è®¸ä½ æ°´å¹³åˆ†å‰² / æ‰©å±•ä½ çš„å†…å®¹å®¹é‡ã€‚</li>\n<li>å…è®¸ä½ åœ¨åˆ†ç‰‡ï¼ˆæ½œåœ¨åœ°ï¼Œä½äºå¤šä¸ªèŠ‚ç‚¹ä¸Šï¼‰ä¹‹ä¸Šè¿›è¡Œåˆ†å¸ƒå¼çš„ã€å¹¶è¡Œçš„æ“ä½œï¼Œè¿›è€Œæé«˜æ€§èƒ½ / ååé‡ã€‚</li>\n</ol>\n<p>è‡³äºä¸€ä¸ªåˆ†ç‰‡æ€æ ·åˆ†å¸ƒï¼Œå®ƒçš„æ–‡æ¡£æ€æ ·èšåˆå›æœç´¢è¯·æ±‚ï¼Œæ˜¯å®Œå…¨ç”± Elasticsearch ç®¡ç†çš„ï¼Œå¯¹äºä½œä¸ºç”¨æˆ·çš„ä½ æ¥è¯´ï¼Œè¿™äº›éƒ½æ˜¯é€æ˜çš„ã€‚</p>\n<p>åœ¨ä¸€ä¸ªç½‘ç»œ / äº‘çš„ç¯å¢ƒé‡Œï¼Œå¤±è´¥éšæ—¶éƒ½å¯èƒ½å‘ç”Ÿï¼Œåœ¨æŸä¸ªåˆ†ç‰‡ / èŠ‚ç‚¹ä¸çŸ¥æ€ä¹ˆçš„å°±å¤„äºç¦»çº¿çŠ¶æ€ï¼Œæˆ–è€…ç”±äºä»»ä½•åŸå› æ¶ˆå¤±äº†ï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œæœ‰ä¸€ä¸ªæ•…éšœè½¬ç§»æœºåˆ¶æ˜¯éå¸¸æœ‰ç”¨å¹¶ä¸”æ˜¯å¼ºçƒˆæ¨èçš„ã€‚ä¸ºæ­¤ç›®çš„ï¼ŒElasticsearch å…è®¸ä½ åˆ›å»ºåˆ†ç‰‡çš„ä¸€ä»½æˆ–å¤šä»½æ‹·è´ï¼Œè¿™äº›æ‹·è´å«åšå¤åˆ¶åˆ†ç‰‡ï¼Œæˆ–è€…ç›´æ¥å«å¤åˆ¶ã€‚</p>\n<p>å¤åˆ¶ä¹‹æ‰€ä»¥é‡è¦ï¼Œæœ‰ä¸¤ä¸ªä¸»è¦åŸå› ï¼š åœ¨åˆ†ç‰‡ / èŠ‚ç‚¹å¤±è´¥çš„æƒ…å†µä¸‹ï¼Œæä¾›äº†é«˜å¯ç”¨æ€§ã€‚å› ä¸ºè¿™ä¸ªåŸå› ï¼Œæ³¨æ„åˆ°å¤åˆ¶åˆ†ç‰‡ä»ä¸ä¸åŸ / ä¸»è¦ï¼ˆoriginal/primaryï¼‰åˆ†ç‰‡ç½®äºåŒä¸€èŠ‚ç‚¹ä¸Šæ˜¯éå¸¸é‡è¦çš„ã€‚æ‰©å±•ä½ çš„æœç´¢é‡ / ååé‡ï¼Œå› ä¸ºæœç´¢å¯ä»¥åœ¨æ‰€æœ‰çš„å¤åˆ¶ä¸Šå¹¶è¡Œè¿è¡Œã€‚æ€»ä¹‹ï¼Œæ¯ä¸ªç´¢å¼•å¯ä»¥è¢«åˆ†æˆå¤šä¸ªåˆ†ç‰‡ã€‚ä¸€ä¸ªç´¢å¼•ä¹Ÿå¯ä»¥è¢«å¤åˆ¶ 0 æ¬¡ï¼ˆæ„æ€æ˜¯æ²¡æœ‰å¤åˆ¶ï¼‰æˆ–å¤šæ¬¡ã€‚ä¸€æ—¦å¤åˆ¶äº†ï¼Œæ¯ä¸ªç´¢å¼•å°±æœ‰äº†ä¸»åˆ†ç‰‡ï¼ˆä½œä¸ºå¤åˆ¶æºçš„åŸæ¥çš„åˆ†ç‰‡ï¼‰å’Œå¤åˆ¶åˆ†ç‰‡ï¼ˆä¸»åˆ†ç‰‡çš„æ‹·è´ï¼‰ä¹‹åˆ«ã€‚åˆ†ç‰‡å’Œå¤åˆ¶çš„æ•°é‡å¯ä»¥åœ¨ç´¢å¼•åˆ›å»ºçš„æ—¶å€™æŒ‡å®šã€‚åœ¨ç´¢å¼•åˆ›å»ºä¹‹åï¼Œä½ å¯ä»¥åœ¨ä»»ä½•æ—¶å€™åŠ¨æ€åœ°æ”¹å˜å¤åˆ¶çš„æ•°é‡ï¼Œä½†æ˜¯ä½ äº‹åä¸èƒ½æ”¹å˜åˆ†ç‰‡çš„æ•°é‡ã€‚</p>\n<p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒElasticsearch ä¸­çš„æ¯ä¸ªç´¢å¼•è¢«åˆ†ç‰‡ 5 ä¸ªä¸»åˆ†ç‰‡å’Œ 1 ä¸ªå¤åˆ¶ï¼Œè¿™æ„å‘³ç€ï¼Œå¦‚æœä½ çš„é›†ç¾¤ä¸­è‡³å°‘æœ‰ä¸¤ä¸ªèŠ‚ç‚¹ï¼Œä½ çš„ç´¢å¼•å°†ä¼šæœ‰ 5 ä¸ªä¸»åˆ†ç‰‡å’Œå¦å¤– 5 ä¸ªå¤åˆ¶åˆ†ç‰‡ï¼ˆ1 ä¸ªå®Œå…¨æ‹·è´ï¼‰ï¼Œè¿™æ ·çš„è¯æ¯ä¸ªç´¢å¼•æ€»å…±å°±æœ‰ 10 ä¸ªåˆ†ç‰‡ã€‚</p>\n</li>\n</ul>\n<h3 id=\"restful-api\"><a class=\"anchor\" href=\"#restful-api\">#</a> RESTful API</h3>\n<p>åœ¨ Lucene ä¸­ï¼Œåˆ›å»ºç´¢å¼•æ˜¯éœ€è¦å®šä¹‰å­—æ®µåç§°ä»¥åŠå­—æ®µç±»å‹çš„ï¼Œåœ¨ Elasticsearch ä¸­æä¾›äº†éç»“æ„åŒ–çš„ç´¢å¼•ï¼Œå°±æ˜¯ä¸éœ€è¦åˆ›å»ºç´¢å¼•ç»“æ„ï¼Œå³å¯å†™å…¥æ•°æ®åˆ°ç´¢å¼•ä¸­ï¼Œå®é™…ä¸Šåœ¨ Elasticsearch åº•å±‚ä¼šè¿›è¡Œç»“æ„åŒ–æ“ä½œï¼Œæ­¤æ“ä½œå¯¹ç”¨æˆ·æ˜¯é€æ˜çš„ã€‚</p>\n<blockquote>\n<p>æ¨èä½¿ç”¨ Postman ä½œä¸ºæ¥å£è°ƒç”¨å·¥å…·ã€‚åœ¨è°ƒç”¨ä¸‹é¢çš„æ¥å£å‰ï¼Œè¯·å…ˆè‡ªè¡Œæ·»åŠ ä¸€äº›æµ‹è¯•æ•°æ®ã€‚</p>\n</blockquote>\n<ol>\n<li>\n<p>åˆ›å»ºç´¢å¼•</p>\n<figure class=\"highlight json\"><figcaption data-lang=\"JSON\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// PUT http://127.0.0.1:9200/test_indexï¼ˆå‘½åéšæ„ï¼‰</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>\t<span class=\"token property\">\"settings\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>\t\t<span class=\"token property\">\"index\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>\t\t\t<span class=\"token property\">\"number_of_shards\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"2\"</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// åˆ†ç‰‡æ•°</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>\t\t\t<span class=\"token property\">\"number_of_replicas\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"0\"</span> <span class=\"token comment\">// å‰¯æœ¬æ•°</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>\t\t<span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>\t<span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure></li>\n<li>\n<p>åˆ é™¤ç´¢å¼•</p>\n<figure class=\"highlight json\"><figcaption data-lang=\"JSON\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// DELETE http://127.0.0.1:9200/test_index</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>\t<span class=\"token property\">\"acknowledged\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>æ³¨ï¼šåˆ é™¤æ“ä½œä¸ä¼šç«‹å³è¢«åˆ é™¤ï¼Œè€Œæ˜¯è¢«æ ‡è®°ä¸ºåˆ é™¤ã€‚</p>\n</li>\n<li>\n<p>æ’å…¥æ•°æ®</p>\n<figure class=\"highlight json\"><figcaption data-lang=\"JSON\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// POST http://127.0.0.1:9200/test_index/user/1001</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre> <span class=\"token property\">\"id\"</span><span class=\"token operator\">:</span> <span class=\"token number\">1001</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"å¼ ä¸‰\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token property\">\"age\"</span><span class=\"token operator\">:</span> <span class=\"token number\">22</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token property\">\"sex\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"ç”·\"</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>å“åº”ä¿¡æ¯å¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight json\"><figcaption data-lang=\"JSON\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// response info:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token property\">\"_index\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"test_index\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token property\">\"_type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"user\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token property\">\"_id\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"1001\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token property\">\"_version\"</span><span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token property\">\"result\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"created\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token property\">\"_shards\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token property\">\"total\"</span><span class=\"token operator\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token property\">\"successful\"</span><span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token property\">\"failed\"</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token property\">\"_seq_no\"</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token property\">\"_primary_term\"</span><span class=\"token operator\">:</span> <span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>åœ¨  <code>elasticsearch-head</code>  å¯æŸ¥çœ‹åˆ°å¦‚ä¸‹ä¿¡æ¯ï¼š</p>\n<p><img data-src=\"https://img.xfc-exclave.com/2021/08/02/92b84a62def5cdf4c178ae4c4352750f1627913704.png\" alt=\"elasticsearch-headæŸ¥è¯¢åˆ°ç´¢å¼•è¯¦æƒ…\" /></p>\n<p>åœ¨æ’å…¥æ•°æ®æ—¶ï¼Œå¦‚æœä¸å† URI ä¸­æŒ‡å®š ID ï¼ŒES ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªå”¯ä¸€çš„ ID æ ‡è¯†ã€‚</p>\n</li>\n<li>\n<p>æ›´æ–°æ•°æ®</p>\n<p>åœ¨ Elasticsearch ä¸­ï¼Œæ–‡æ¡£æ•°æ®æ˜¯ä¸èƒ½ä¿®æ”¹çš„ï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡è¦†ç›–çš„æ–¹å¼è¿›è¡Œæ›´æ–°ã€‚</p>\n<figure class=\"highlight json\"><figcaption data-lang=\"JSON\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// PUT http://127.0.0.1:9200/test_index/user/1001</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token property\">\"id\"</span><span class=\"token operator\">:</span> <span class=\"token number\">1001</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"å¼ çŠ\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token property\">\"age\"</span><span class=\"token operator\">:</span> <span class=\"token number\">20</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token property\">\"sex\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"å¥³\"</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>é€šè¿‡è¿™ç§æ–¹å¼æ›´æ–°æ•°æ®ï¼Œé»˜è®¤æ˜¯å…¨é‡æ›´æ–°ï¼Œå³ç§»é™¤æ—§æœ‰æ•°æ®ï¼Œæ‰€æœ‰æ•°æ®éƒ½ä»¥æ–°çš„è¯·æ±‚æ•°æ®ä¸ºå‡†ï¼Œæœªä¼ å…¥å­—æ®µåˆ™ä¸ºç©ºã€‚</p>\n<p>å±€éƒ¨æ›´æ–°æ–¹å¼å¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight json\"><figcaption data-lang=\"JSON\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// POST http://127.0.0.1:9200/test_index/user/1001/_update</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token property\">\"doc\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"å¼ çŠ\"</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>æ³¨ï¼šå±€éƒ¨å‚æ•°éœ€è¦ç”¨  <code>doc</code>  è¿›è¡ŒåŒ…è£…ã€‚</p>\n</li>\n<li>\n<p>æœç´¢æ•°æ®</p>\n<ul>\n<li>\n<p>æŸ¥è¯¢å•æ¡æ•°æ®ï¼š</p>\n<p>GET <span class=\"exturl\" data-url=\"aHR0cDovLzEyNy4wLjAuMTo5MjAwL3Rlc3RfaW5kZXgvdXNlci8xMDAx\">http://127.0.0.1:9200/test_index/user/1001</span></p>\n<figure class=\"highlight json\"><figcaption data-lang=\"JSON\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token property\">\"_index\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"test_index\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token property\">\"_type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"user\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token property\">\"_id\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"1001\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token property\">\"_version\"</span><span class=\"token operator\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token property\">\"_seq_no\"</span><span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token property\">\"_primary_term\"</span><span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token property\">\"found\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token property\">\"_source\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token property\">\"id\"</span><span class=\"token operator\">:</span> <span class=\"token number\">1001</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"å¼ çŠ\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token property\">\"age\"</span><span class=\"token operator\">:</span> <span class=\"token number\">20</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token property\">\"sex\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"å¥³\"</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure></li>\n<li>\n<p>æŸ¥è¯¢å…¨éƒ¨æ•°æ®ï¼šï¼ˆé»˜è®¤è¿”å› 10 æ¡ï¼‰</p>\n<p>GET <span class=\"exturl\" data-url=\"aHR0cDovLzEyNy4wLjAuMTo5MjAwL3Rlc3RfaW5kZXgvdXNlci9fc2VhcmNo\">http://127.0.0.1:9200/test_index/user/_search</span></p>\n</li>\n<li>\n<p>å…³é”®å­—æœç´¢æ•°æ®</p>\n<p>GET <span class=\"exturl\" data-url=\"aHR0cDovLzEyNy4wLjAuMTo5MjAwL3Rlc3RfaW5kZXgvdXNlci9fc2VhcmNoP3E9YWdlOjIw\">http://127.0.0.1:9200/test_index/user/_search?q=age:20</span></p>\n</li>\n</ul>\n</li>\n<li>\n<p>DSL æœç´¢</p>\n<figure class=\"highlight json\"><figcaption data-lang=\"JSON\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// POST http://127.0.0.1:9200/test_index/user/_search</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token property\">\"query\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token property\">\"match\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>            <span class=\"token property\">\"age\"</span><span class=\"token operator\">:</span> <span class=\"token number\">20</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>è¿‡æ»¤æŸ¥è¯¢ï¼šï¼ˆè¿‡æ»¤å°äº 20 å²çš„å¥³æ€§ï¼‰</p>\n<figure class=\"highlight json\"><figcaption data-lang=\"JSON\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// POST http://127.0.0.1:9200/test_index/user/_search</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token property\">\"query\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token property\">\"bool\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>            <span class=\"token property\">\"filter\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>                <span class=\"token property\">\"range\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>                    <span class=\"token property\">\"age\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>                        <span class=\"token property\">\"lt\"</span><span class=\"token operator\">:</span> <span class=\"token number\">20</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>                    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>                <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>            <span class=\"token property\">\"must\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>                <span class=\"token property\">\"match\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>                    <span class=\"token property\">\"sex\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"å¥³\"</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>                <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>å…¨æ–‡æœç´¢ï¼š</p>\n<figure class=\"highlight json\"><figcaption data-lang=\"JSON\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// POST http://127.0.0.1:9200/test_index/user/_search</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token property\">\"query\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token property\">\"match\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>            <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"å¼ ä¸‰ å¼ çŠ\"</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure></li>\n<li>\n<p>é«˜äº®æ˜¾ç¤º</p>\n<figure class=\"highlight json\"><figcaption data-lang=\"JSON\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// POST http://127.0.0.1:9200/test_index/user/_search</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token property\">\"query\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token property\">\"match\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>            <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"å¼ ä¸‰ å¼ çŠ\"</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token property\">\"highlight\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token property\">\"fields\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>            <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure></li>\n<li>\n<p>èšåˆ</p>\n<figure class=\"highlight json\"><figcaption data-lang=\"JSON\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// POST http://127.0.0.1:9200/test_index/user/_search</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token property\">\"aggs\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token property\">\"all_interests\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>            <span class=\"token property\">\"terms\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>                <span class=\"token property\">\"field\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"age\"</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure></li>\n<li>\n<p>åˆ¤æ–­æ•°æ®æ˜¯å¦å­˜åœ¨</p>\n<p>HEAD <span class=\"exturl\" data-url=\"aHR0cDovLzEyNy4wLjAuMTo5MjAwL3Rlc3RfaW5kZXgvdXNlci8xMDAx\">http://127.0.0.1:9200/test_index/user/1001</span></p>\n<p>å­˜åœ¨åˆ™è¿”å› 200ï¼Œä¸å­˜åœ¨åˆ™è¿”å› 404ã€‚</p>\n</li>\n<li>\n<p>æ‰¹é‡æŸ¥è¯¢</p>\n<figure class=\"highlight json\"><figcaption data-lang=\"JSON\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// POST http://127.0.0.1:9200/test_index/user/_mget</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token property\">\"ids\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"1001\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"abcd\"</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>å¦‚å¯¹åº” ID ä¸å­˜åœ¨ï¼ŒæŸ¥è¯¢ç»“æœä¸ä¼šå— 404 å½±å“ã€‚</p>\n</li>\n<li>\n<p>åˆ†è¯æŸ¥è¯¢</p>\n<figure class=\"highlight json\"><figcaption data-lang=\"JSON\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// POST http://127.0.0.1:9200/test_index/user/_analyze</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token property\">\"analyzer\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"ik_max_word\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token property\">\"text\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"IKä¸­æ–‡åˆ†è¯å™¨\"</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>åˆ†è¯å™¨åç»­æœ‰å•ç‹¬è®²è§£ã€‚</p>\n</li>\n</ol>\n<p>é€šè¿‡ä¸Šè¿° RESTful API ç¤ºä¾‹ï¼Œæˆ‘ä»¬å·²ç»åŸºæœ¬ç†Ÿæ‚‰äº†å¦‚ä½•é€šè¿‡æ¥å£å¯¹ ES æ•°æ®è¿›è¡Œæ“ä½œã€‚æ›´å¤šçš„æ“ä½œæ²¡æœ‰å¼ºè¡Œè®°ä½çš„å¿…è¦ï¼Œä¹Ÿå¹¶ä¸æ˜¯æœ¬æ–‡çš„é‡ç‚¹ï¼Œè¿™é‡Œä¹Ÿå°±ä¸èµ˜è¿°äº†ï¼Œéœ€è¦ç”¨åˆ°æ—¶ï¼Œå†æœç´¢ç›¸å…³æ–¹æ³•å³å¯ã€‚æœ¬æ–‡çœç•¥éƒ¨åˆ†ä¸»è¦åŒ…æ‹¬å¦‚ä¸‹å†…å®¹ï¼š</p>\n<ul>\n<li>\n<p>æ‰¹é‡æŸ¥è¯¢</p>\n</li>\n<li>\n<p>_bulk æ“ä½œ</p>\n</li>\n<li>\n<p>åˆ†é¡µ</p>\n</li>\n<li>\n<p>æ˜ å°„ï¼šç±»å‹è‡ªåŠ¨åŒ¹é…</p>\n</li>\n<li>\n<p>ç»“æ„åŒ–æŸ¥è¯¢ï¼š</p>\n<ul>\n<li>term / terms</li>\n<li>range</li>\n<li>exists</li>\n<li>matchï¼šæ ‡å‡†æŸ¥è¯¢</li>\n<li>boolï¼š must / must_not / should</li>\n</ul>\n</li>\n<li>\n<p>è¿‡æ»¤æŸ¥è¯¢</p>\n<p>æŸ¥è¯¢å’Œè¿‡æ»¤çš„å¯¹æ¯”ã€‚</p>\n<p>åšç²¾ç¡®åŒ¹é…æœç´¢æ—¶ï¼Œæœ€å¥½ç”¨è¿‡æ»¤è¯­å¥ï¼Œå› ä¸ºè¿‡æ»¤è¯­å¥å¯ä»¥ç¼“å­˜æ•°æ®ã€‚</p>\n</li>\n</ul>\n<h3 id=\"ä¸­æ–‡åˆ†è¯å™¨\"><a class=\"anchor\" href=\"#ä¸­æ–‡åˆ†è¯å™¨\">#</a> ä¸­æ–‡åˆ†è¯å™¨</h3>\n<p>elasticsearch é»˜è®¤ä½¿ç”¨æ ‡å‡†åˆ†è¯å™¨ï¼Œå¯¹äºä¸­æ–‡çš„æ”¯æŒå¹¶ä¸å‹å¥½ï¼Œå¯ä»¥é€‰æ‹©å®‰è£…  <code>IK</code>  æˆ–  <code>smartcn</code>  ç­‰ä¸­æ–‡åˆ†è¯å™¨ï¼ˆè¿™é‡Œä»¥ IK ä¸ºä¾‹ï¼‰ã€‚</p>\n<h4 id=\"ä¸‹è½½å®‰è£…\"><a class=\"anchor\" href=\"#ä¸‹è½½å®‰è£…\">#</a> ä¸‹è½½å®‰è£…</h4>\n<ol>\n<li>\n<p>ä¸‹è½½åœ°å€ï¼š<span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL21lZGNsL2VsYXN0aWNzZWFyY2gtYW5hbHlzaXMtaWsvcmVsZWFzZXM=\">https://github.com/medcl/elasticsearch-analysis-ik/releases</span></p>\n<p>éœ€æ³¨æ„é€‰æ‹©ä¸ elasticsearch ç›¸åŒ¹é…çš„åˆ†è¯å™¨ç‰ˆæœ¬ã€‚</p>\n</li>\n<li>\n<p>è§£å‹ï¼Œå°†è§£å‹åçš„ elasticsearch æ–‡ä»¶å¤¹æ‹·è´åˆ° elasticsearch-5.6.8\\plugins ä¸‹ï¼Œå¹¶é‡å‘½åæ–‡ä»¶å¤¹ä¸º analysis-ik ï¼ˆå…¶ä»–åå­—ä¹Ÿå¯ä»¥ï¼Œç›®çš„æ˜¯ä¸è¦é‡åï¼‰</p>\n</li>\n<li>\n<p>é‡æ–°å¯åŠ¨ ElasticSearchï¼Œå³å¯åŠ è½½ IK åˆ†è¯å™¨ã€‚</p>\n<p>å¦‚è‹¥å¯åŠ¨æŠ¥é”™ï¼Œå¯é€šè¿‡  <code>~\\elasticsearch-7.6.2\\logs\\elasticsearch.log</code>  æ–‡ä»¶è¿›è¡Œæ’æŸ¥ã€‚</p>\n</li>\n</ol>\n<h4 id=\"åˆ†è¯æµ‹è¯•\"><a class=\"anchor\" href=\"#åˆ†è¯æµ‹è¯•\">#</a> åˆ†è¯æµ‹è¯•</h4>\n<p>å¯åŠ¨  <code>elasticsearch.bat</code>  ï¼Œä½¿ç”¨  <code>Postman</code>  è¿›è¡Œå¦‚ä¸‹æµ‹è¯•ï¼š</p>\n<p><img data-src=\"https://img.xfc-exclave.com/2021/08/03/d990eb191c77f8d70be66d51b9f51f3f1627921629.jpg\" alt=\"IKåˆ†è¯å™¨æµ‹è¯•\" /></p>\n<p>æµ‹è¯•ç»“æœï¼š</p>\n<figure class=\"highlight json\"><figcaption data-lang=\"JSON\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token property\">\"tokens\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        <span class=\"token punctuation\">&#123;</span><span class=\"token property\">\"token\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"es\"</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"start_offset\"</span><span class=\"token operator\">:</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"end_offset\"</span><span class=\"token operator\">:</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"ENGLISH\"</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"position\"</span><span class=\"token operator\">:</span><span class=\"token number\">0</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token punctuation\">&#123;</span><span class=\"token property\">\"token\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"ä¸­æ–‡\"</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"start_offset\"</span><span class=\"token operator\">:</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"end_offset\"</span><span class=\"token operator\">:</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"CN_WORD\"</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"position\"</span><span class=\"token operator\">:</span><span class=\"token number\">1</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token punctuation\">&#123;</span><span class=\"token property\">\"token\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"åˆ†è¯å™¨\"</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"start_offset\"</span><span class=\"token operator\">:</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"end_offset\"</span><span class=\"token operator\">:</span><span class=\"token number\">7</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"CN_WORD\"</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"position\"</span><span class=\"token operator\">:</span><span class=\"token number\">2</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token punctuation\">&#123;</span><span class=\"token property\">\"token\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"åˆ†è¯\"</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"start_offset\"</span><span class=\"token operator\">:</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"end_offset\"</span><span class=\"token operator\">:</span><span class=\"token number\">6</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"CN_WORD\"</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"position\"</span><span class=\"token operator\">:</span><span class=\"token number\">3</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token punctuation\">&#123;</span><span class=\"token property\">\"token\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"å™¨\"</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"start_offset\"</span><span class=\"token operator\">:</span><span class=\"token number\">6</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"end_offset\"</span><span class=\"token operator\">:</span><span class=\"token number\">7</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"CN_CHAR\"</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"position\"</span><span class=\"token operator\">:</span><span class=\"token number\">4</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token punctuation\">&#123;</span><span class=\"token property\">\"token\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"æµ‹è¯•\"</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"start_offset\"</span><span class=\"token operator\">:</span><span class=\"token number\">7</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"end_offset\"</span><span class=\"token operator\">:</span><span class=\"token number\">9</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"CN_WORD\"</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"position\"</span><span class=\"token operator\">:</span><span class=\"token number\">5</span><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h3 id=\"å…¨æ–‡æœç´¢\"><a class=\"anchor\" href=\"#å…¨æ–‡æœç´¢\">#</a> å…¨æ–‡æœç´¢</h3>\n<p>å…¨æ–‡æœç´¢åŒ…æ‹¬ä¸¤ä¸ªæœ€é‡è¦çš„æ–¹é¢ï¼š</p>\n<ol>\n<li>\n<p>ç›¸å…³æ€§ï¼ˆRelevanceï¼‰</p>\n<p>å®ƒæ˜¯è¯„ä»·æŸ¥è¯¢ä¸å…¶ç»“æœé—´çš„ç›¸å…³ç¨‹åº¦ï¼Œå¹¶æ ¹æ®è¿™ç§ç›¸å…³ç¨‹åº¦å¯¹ç»“æœè¿›è¡Œæ’åçš„ä¸€ç§èƒ½åŠ›ï¼Œè¿™ç§è®¡ç®—æ–¹å¼å¯ä»¥æ˜¯ TF/IDF æ–¹æ³•ã€åœ°ç†ä½ç½®ä¸´è¿‘ã€æ¨¡ç³Šç›¸ä¼¼ï¼Œæˆ–å…¶ä»–æŸäº›ç®—æ³•ã€‚</p>\n</li>\n<li>\n<p>åˆ†è¯ï¼ˆAnalysisï¼‰</p>\n<p>å®ƒæ˜¯å°†æ–‡æœ¬å—è½¬æ¢ä¸ºæœ‰åŒºåˆ«çš„ã€è§„èŒƒåŒ–çš„ token çš„ä¸€ä¸ªè¿‡ç¨‹ï¼Œç›®çš„æ˜¯ä¸ºäº†åˆ›å»ºå€’æ’ç´¢å¼•ä»¥åŠæŸ¥è¯¢å€’æ’ç´¢å¼•ã€‚</p>\n</li>\n</ol>\n<p>ä½¿ç”¨ IK åˆ†è¯å™¨åˆ›å»ºç´¢å¼•ç¤ºä¾‹ï¼š</p>\n<figure class=\"highlight json\"><figcaption data-lang=\"JSON\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token property\">\"settings\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        <span class=\"token property\">\"number_of_shards\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"6\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token property\">\"number_of_replicas\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"1\"</span><span class=\"token punctuation\">,</span>  </pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token comment\">// å…¨ç´¢å¼•æŒ‡å®šåˆ†è¯å™¨  </span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token property\">\"analysis\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span>   </pre></td></tr><tr><td data-num=\"7\"></td><td><pre>            <span class=\"token property\">\"analyzer\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>                <span class=\"token property\">\"ik\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>                    <span class=\"token property\">\"tokenizer\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"ik_max_word\"</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>                <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token property\">\"mappings\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        <span class=\"token property\">\"novel\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>            <span class=\"token property\">\"properties\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>                <span class=\"token property\">\"id\"</span><span class=\"token operator\">:</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>                    <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"long\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>                    <span class=\"token property\">\"store\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>                <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>                <span class=\"token property\">\"title\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>                    <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"text\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>                    <span class=\"token property\">\"store\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>                    <span class=\"token property\">\"analyzer\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"ik_smart\"</span><span class=\"token comment\">// æŒ‡å®šå­—æ®µåˆ†è¯å™¨</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>                <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>                <span class=\"token property\">\"content\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>                    <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"text\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>                    <span class=\"token property\">\"store\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>                <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>                <span class=\"token property\">\"description\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>                    <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"text\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>                    <span class=\"token property\">\"store\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>                <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><ul>\n<li>ik_max_word ï¼šä¼šå°†æ–‡æœ¬åšæœ€ç»†ç²’åº¦çš„æ‹†åˆ†ï¼Œä¼šç©·å°½å„ç§å¯èƒ½çš„ç»„åˆã€‚</li>\n<li>ik_smart ï¼šä¼šåšæœ€ç²—ç²’åº¦çš„æ‹†åˆ†ï¼Œæ¯”å¦‚ä¼šå°† â€œä¸­åäººæ°‘å…±å’Œå›½å›½æ­Œâ€ æ‹†åˆ†ä¸º â€œä¸­åäººæ°‘å…±å’Œå›½ï¼Œå›½æ­Œâ€ã€‚</li>\n</ul>\n<h4 id=\"å•è¯æŸ¥è¯¢\"><a class=\"anchor\" href=\"#å•è¯æŸ¥è¯¢\">#</a> å•è¯æŸ¥è¯¢</h4>\n<figure class=\"highlight json\"><figcaption data-lang=\"JSON\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// POST http://127.0.0.1:9200/novel/archive/_search</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token property\">\"query\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token property\">\"match\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>            <span class=\"token property\">\"title\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"ä¸­å›½\"</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token property\">\"highlight\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token property\">\"fields\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>            <span class=\"token property\">\"title\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h4 id=\"å¤šè¯æŸ¥è¯¢\"><a class=\"anchor\" href=\"#å¤šè¯æŸ¥è¯¢\">#</a> å¤šè¯æŸ¥è¯¢</h4>\n<figure class=\"highlight json\"><figcaption data-lang=\"JSON\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// POST http://127.0.0.1:9200/novel/archive/_search</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token property\">\"query\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token property\">\"match\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>            <span class=\"token property\">\"title\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>                <span class=\"token property\">\"query\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"ä¸­å›½ ç–«æƒ…\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>                <span class=\"token comment\">// åŒ¹é…åº¦éœ€è¦æ ¹æ®å®é™…ä½¿ç”¨è¿›è¡Œè°ƒæ•´</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>                <span class=\"token comment\">// \"minimun_should_match\": \"80%\", // åŒ¹é…åº¦ï¼Œæ¯”ä¾‹è¶Šå¤§ï¼ŒåŒ¹é…è¶Šä¸¥æ ¼</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>                <span class=\"token property\">\"opeartor\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"and\"</span> <span class=\"token comment\">// é»˜è®¤ä¸º or</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token property\">\"highlight\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token property\">\"fields\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>            <span class=\"token property\">\"title\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h4 id=\"ç»„åˆæŸ¥è¯¢\"><a class=\"anchor\" href=\"#ç»„åˆæŸ¥è¯¢\">#</a> ç»„åˆæŸ¥è¯¢</h4>\n<p>æœ‰ç‚¹ç»•ï¼Œæ ¹æ®ä½¿ç”¨åœºæ™¯å†è¿›è¡Œè¯¦ç»†çš„ç ”ç©¶å³å¯ï¼Œæ­¤å¤„ç•¥å»ã€‚</p>\n<p>ä½†æ­¤å¤„æœ‰ä¸ª <strong>æƒé‡</strong> çš„æ¦‚å¿µï¼Œéœ€è¦ç¨åŠ ç•™æ„ã€‚</p>\n<h3 id=\"elasticsearch-é›†ç¾¤\"><a class=\"anchor\" href=\"#elasticsearch-é›†ç¾¤\">#</a> Elasticsearch é›†ç¾¤</h3>\n<h4 id=\"é›†ç¾¤èŠ‚ç‚¹\"><a class=\"anchor\" href=\"#é›†ç¾¤èŠ‚ç‚¹\">#</a> é›†ç¾¤èŠ‚ç‚¹</h4>\n<p>Elasticsearch çš„é›†ç¾¤æ˜¯ç”±å¤šä¸ªèŠ‚ç‚¹ç»„æˆçš„ï¼Œé€šè¿‡  <code>cluster.name</code>  è®¾ç½®é›†ç¾¤åç§°ï¼Œå¹¶ä¸”å‹‡äºåŒºåˆ†å…¶ä»–çš„é›†ç¾¤ï¼Œæ¯ä¸ªèŠ‚ç‚¹é€šè¿‡  <code>node.name</code>  æŒ‡å®šèŠ‚ç‚¹çš„åç§°ã€‚</p>\n<p>åœ¨ Elasticsearch ä¸­ï¼ŒèŠ‚ç‚¹çš„ç±»å‹ä¸»è¦æœ‰ 4 ç§ï¼š</p>\n<ul>\n<li>master èŠ‚ç‚¹\n<ul>\n<li>é…ç½®æ–‡ä»¶ä¸­  <code>node.master</code>  å±æ€§ä¸º true ï¼ˆé»˜è®¤ä¸º trueï¼‰ï¼Œå°±æœ‰èµ„æ ¼è¢«é€‰ä¸º master èŠ‚ç‚¹ã€‚</li>\n<li>master èŠ‚ç‚¹ç”¨äºæ§åˆ¶æ•´ä¸ªé›†ç¾¤çš„æ“ä½œã€‚æ¯”å¦‚åˆ›å»ºæˆ–åˆ é™¤ç´¢å¼•ï¼Œç®¡ç†å…¶ä»–é master èŠ‚ç‚¹ç­‰ã€‚</li>\n</ul>\n</li>\n<li>data èŠ‚ç‚¹\n<ul>\n<li>é…ç½®æ–‡ä»¶ä¸­  <code>node.data</code>  å±æ€§ä¸º true ï¼ˆé»˜è®¤ä¸º trueï¼‰ï¼Œå°±æœ‰èµ„æ ¼è¢«è®¾ç½®æˆ data èŠ‚ç‚¹ã€‚</li>\n<li>data èŠ‚ç‚¹ä¸»è¦ç”¨äºæ‰§è¡Œæ•°æ®ç›¸å…³çš„æ“ä½œã€‚æ¯”å¦‚æ–‡æ¡£çš„ CRUD ã€‚</li>\n</ul>\n</li>\n<li>å®¢æˆ·ç«¯èŠ‚ç‚¹\n<ul>\n<li>é…ç½®æ–‡ä»¶ä¸­  <code>node.master</code>  å±æ€§å’Œ  <code>node.data</code>  å±æ€§å‡ä¸º false ã€‚</li>\n<li>è¯¥èŠ‚ç‚¹ä¸èƒ½ä½œä¸º master  èŠ‚ç‚¹ï¼Œä¹Ÿä¸èƒ½ä½œä¸º data èŠ‚ç‚¹ã€‚</li>\n<li>å¯ä»¥ä½œä¸ºå®¢æˆ·ç«¯èŠ‚ç‚¹ï¼Œç”¨äºå“åº”ç”¨æˆ·çš„è¯·æ±‚ï¼ŒæŠŠè¯·æ±‚è½¬å‘åˆ°å…¶ä»–èŠ‚ç‚¹ã€‚</li>\n</ul>\n</li>\n<li>éƒ¨è½èŠ‚ç‚¹\n<ul>\n<li>å½“ä¸€ä¸ªèŠ‚ç‚¹é…ç½®  <code>tribe.*</code>  çš„æ—¶å€™ï¼Œå®ƒæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å®¢æˆ·ç«¯ï¼Œå®ƒå¯ä»¥è¿æ¥å¤šä¸ªé›†ç¾¤ï¼Œåœ¨æ‰€æœ‰è¿æ¥çš„é›†ç¾¤ä¸Šæ‰§è¡Œæœç´¢å’Œå…¶ä»–æ“ä½œã€‚</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"é›†ç¾¤æ­å»º\"><a class=\"anchor\" href=\"#é›†ç¾¤æ­å»º\">#</a> é›†ç¾¤æ­å»º</h4>\n<h3 id=\"java-å®¢æˆ·ç«¯\"><a class=\"anchor\" href=\"#java-å®¢æˆ·ç«¯\">#</a> Java å®¢æˆ·ç«¯</h3>\n<p>åœ¨ Elasticsearch ä¸­ï¼Œä¸º java æä¾›äº†ä¸¤ç§å®¢æˆ·ç«¯ï¼Œä¸€ç§æ—¶ REST é£æ ¼çš„å®¢æˆ·ç«¯ï¼Œå¦ä¸€ç§æ˜¯ Java API çš„å®¢æˆ·ç«¯ã€‚</p>\n<p><strong>å‡†å¤‡å·¥ä½œï¼š</strong></p>\n<ol>\n<li>åˆ›å»ºæµ‹è¯•é¡¹ç›®</li>\n<li>æ·»åŠ  pom ä¾èµ–</li>\n</ol>\n<h4 id=\"rest-å®¢æˆ·ç«¯\"><a class=\"anchor\" href=\"#rest-å®¢æˆ·ç«¯\">#</a> REST å®¢æˆ·ç«¯</h4>\n<p>Elasticsearch åˆæä¾›äº†ä¸¤ç§ REST å®¢æˆ·ç«¯ï¼Œä¸€ç§æ—¶ä½çº§å®¢æˆ·ç«¯ï¼Œä¸€ç§æ—¶é«˜çº§å®¢æˆ·ç«¯ã€‚</p>\n<ul>\n<li>\n<p>Java Low Level REST Client</p>\n<p>å®˜æ–¹æä¾›çš„ä½çº§å®¢æˆ·ç«¯ã€‚è¯¥å®¢æˆ·ç«¯é€šè¿‡ http æ¥è¿æ¥ Elasticsearch é›†ç¾¤ã€‚ç”¨æˆ·åœ¨ä½¿ç”¨è¯¥å®¢æˆ·ç«¯æ—¶éœ€è¦å°†è¯·æ±‚æ•°æ®æ‰‹åŠ¨æ‹¼æ¥é™ˆ Elasticsearch æ‰€éœ€ JSON æ ¼å¼è¿›è¡Œå‘é€ï¼Œæ”¶åˆ°å“åº”æ—¶åŒæ ·ä¹Ÿéœ€è¦å°†è¿”å›çš„ JSON æ•°æ®æ‰‹åŠ¨å°è£…æˆå¯¹è±¡ã€‚è™½ç„¶éº»çƒ¦ï¼Œä¸è¿‡è¯¥å®¢æˆ·ç«¯å…¼å®¹æ‰€æœ‰çš„ Elasticsearch ç‰ˆæœ¬ã€‚</p>\n</li>\n<li>\n<p>Java High Level REST Client</p>\n<p>å®˜æ–¹æä¾›çš„é«˜çº§å®¢æˆ·ç«¯ã€‚è¯¥å®¢æˆ·ç«¯åŸºäºä½çº§å®¢æˆ·ç«¯å®ç°ï¼Œå®ƒæä¾›äº†å¾ˆå¤šè¾©è§£çš„ API æ¥è§£å†³ä½çº§å®¢æˆ·ç«¯éœ€è¦æ‰‹åŠ¨è½¬æ¢æ•°æ®æ ¼å¼çš„é—®é¢˜ã€‚</p>\n</li>\n</ul>\n<h4 id=\"ä½çº§å®¢æˆ·ç«¯\"><a class=\"anchor\" href=\"#ä½çº§å®¢æˆ·ç«¯\">#</a> ä½çº§å®¢æˆ·ç«¯</h4>\n<h4 id=\"é«˜çº§å®¢æˆ·ç«¯\"><a class=\"anchor\" href=\"#é«˜çº§å®¢æˆ·ç«¯\">#</a> é«˜çº§å®¢æˆ·ç«¯</h4>\n<h3 id=\"å‚è€ƒ\"><a class=\"anchor\" href=\"#å‚è€ƒ\">#</a> å‚è€ƒ</h3>\n<ul>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuYmlsaWJpbGkuY29tL3ZpZGVvL0JWMWlKNDExYzdBeg==\">https://www.bilibili.com/video/BV1iJ411c7Az</span></li>\n</ul>\n",
            "tags": [
                "è®¡ç®—æœºç§‘å­¦",
                "JAVAå­¦ä¹ è·¯çº¿",
                "æ‰©å±•ç¯‡",
                "java",
                "ELK",
                "æœç´¢"
            ]
        },
        {
            "id": "https://www.chinmoku.cc/computer-science/resource/wallpaper_site/",
            "url": "https://www.chinmoku.cc/computer-science/resource/wallpaper_site/",
            "title": "é«˜æ¸…å£çº¸ç½‘ç«™æ¨è",
            "date_published": "2021-08-03T13:38:41.000Z",
            "content_html": "<h3 id=\"å‰è¨€\"><a class=\"anchor\" href=\"#å‰è¨€\">#</a> å‰è¨€</h3>\n<p>å› ä¸ºåœ¨å†™åšå®¢å’Œæ–‡ç« çš„è¿‡ç¨‹ä¸­ï¼Œç»å¸¸ä½¿ç”¨å›¾ç‰‡ä½œä¸ºå°é¢ï¼Œæ‰€ä»¥å°±ä¸“é—¨æ”¶é›†æ•´ç†äº†ä¸€äº›æ¯”è¾ƒä¼˜è´¨çš„å›¾ç‰‡èµ„æºç½‘ç«™ã€‚</p>\n<h3 id=\"é«˜æ¸…å£çº¸ç½‘ç«™\"><a class=\"anchor\" href=\"#é«˜æ¸…å£çº¸ç½‘ç«™\">#</a> é«˜æ¸…å£çº¸ç½‘ç«™</h3>\n<h4 id=\"æç®€å£çº¸æ¨è\"><a class=\"anchor\" href=\"#æç®€å£çº¸æ¨è\">#</a> æç®€å£çº¸ï¼ˆæ¨èï¼‰</h4>\n<p>ç½‘å€ï¼š<span class=\"exturl\" data-url=\"aHR0cHM6Ly9iei56enptaC5jbi9pbmRleA==\">https://bz.zzzmh.cn/index</span></p>\n<p>ç‰¹ç‚¹ï¼šç«™ç‚¹å¾ˆç®€å•ï¼Œå¤šæ˜¯äºŒæ¬¡å…ƒå£çº¸ï¼Œä¸éœ€è¦ç™»å½•å³å¯ä¸‹è½½ï¼Œåˆ†è¾¨ç‡åŸºæœ¬æ˜¯ 2K å¾€ä¸Šï¼Œè€Œä¸”ç½‘ç«™å’Œå›¾ç‰‡éƒ½å¾ˆå¹²å‡€ã€‚</p>\n<p>ç¼ºç‚¹ï¼šç§ç±»ç›¸å¯¹è¾ƒå°‘ã€‚</p>\n<p><img data-src=\"https://img.xfc-exclave.com/2021/08/03/bc464392aaba04fa9a34bab85577a6f81627991797.png\" alt=\"ç½‘ç«™æˆªå›¾ï¼šæç®€å£çº¸\" /></p>\n<h4 id=\"wallpapercave\"><a class=\"anchor\" href=\"#wallpapercave\">#</a> WallpaperCave</h4>\n<p>ç½‘å€ï¼š<span class=\"exturl\" data-url=\"aHR0cHM6Ly93YWxscGFwZXJjYXZlLmNvbQ==\">https://wallpapercave.com</span></p>\n<p>ç‰¹ç‚¹ï¼šå›¾ç‰‡ç§ç±»ç›¸å½“å¤šï¼Œå„ç§å„æ ·çš„åˆ†è¾¨ç‡éƒ½æœ‰ã€‚</p>\n<p>ç¼ºç‚¹ï¼š-</p>\n<p><img data-src=\"https://img.xfc-exclave.com/2021/08/03/a18ac86c6fc14d5cd706f948818f49721627992962.png\" alt=\"ç½‘ç«™æˆªå›¾ï¼šWallpaperCave\" /></p>\n<h4 id=\"cgwallpapers\"><a class=\"anchor\" href=\"#cgwallpapers\">#</a> CGWALLPAPERS</h4>\n<p>ç½‘å€ï¼š<span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuY2d3YWxscGFwZXJzLmNvbQ==\">https://www.cgwallpapers.com</span></p>\n<p>ç‰¹ç‚¹ï¼šæ¸¸æˆå£çº¸å±…å¤šã€‚</p>\n<p>ç¼ºç‚¹ï¼šç½‘ç«™å†…å¤šæ˜¯å¸¦æ°´å°çš„ç¼©ç•¥å›¾ï¼Œè·å–åŸå›¾éœ€è¦è·³è½¬æ¥æºç½‘ç«™ï¼ˆåŸºæœ¬ä¸Šæ˜¯æ¸¸æˆç½‘ç«™ï¼‰ï¼Œæ¢ç´¢æˆæœ¬ç›¸å¯¹è¾ƒå¤§ã€‚</p>\n<p><img data-src=\"https://img.xfc-exclave.com/2021/08/03/f92590a441d032c296353a471f26e1181627993984.png\" alt=\"ç½‘ç«™æˆªå›¾ï¼šCGWALLPAPERS\" /></p>\n<h4 id=\"h128å£çº¸\"><a class=\"anchor\" href=\"#h128å£çº¸\">#</a> H128 å£çº¸</h4>\n<p>ç½‘å€ï¼š<span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuaDEyOC5jb20=\">https://www.h128.com</span></p>\n<p>ç‰¹ç‚¹ï¼šç€‘å¸ƒæµæ˜¾ç¤ºã€‚</p>\n<p>ç¼ºç‚¹ï¼šéƒ¨åˆ†å›¾ç‰‡è¶£å‘³æœ‰ç‚¹ä½ï¼ˆå›½å†…ç°çŠ¶ï¼Œä½†é‡åœ¨ç­›é€‰ï¼‰ï¼Œå¦å¤–ï¼Œéœ€è¦æ³¨å†Œè´¦å·æ‰èƒ½ä¸‹è½½ã€‚</p>\n<p><img data-src=\"https://img.xfc-exclave.com/2021/08/03/3790f0f9475081426a95212b4ede478f1627997715.png\" alt=\"ç½‘ç«™æˆªå›¾ï¼šH128å£çº¸\" /></p>\n<h4 id=\"magdeleine\"><a class=\"anchor\" href=\"#magdeleine\">#</a> Magdeleine</h4>\n<p>ç½‘å€ï¼š<span class=\"exturl\" data-url=\"aHR0cHM6Ly9tYWdkZWxlaW5lLmNvL2Jyb3dzZQ==\">https://magdeleine.co/browse</span></p>\n<p>ç‰¹ç‚¹ï¼šå¤šæ˜¯æ–‡è‰ºåå‘çš„å›¾ç‰‡ï¼Œå³æ»¤é•œçš„æ„Ÿè§‰æ¯”è¾ƒé‡ã€‚</p>\n<p>ç¼ºç‚¹ï¼šå¤šæ˜¯æ–‡è‰ºåå‘çš„å›¾ç‰‡ï¼Œå³æ»¤é•œçš„æ„Ÿè§‰æ¯”è¾ƒé‡ã€‚</p>\n<p><img data-src=\"https://img.xfc-exclave.com/2021/08/03/f5f84bdec85fbcaf4b53b19e3a52023b1627997727.png\" alt=\"ç½‘ç«™æˆªå›¾ï¼šMagdeleine\" /></p>\n<h4 id=\"unsplash\"><a class=\"anchor\" href=\"#unsplash\">#</a> Unsplash</h4>\n<p>ç½‘å€ï¼š<span class=\"exturl\" data-url=\"aHR0cHM6Ly91bnNwbGFzaC5jb20=\">https://unsplash.com</span></p>\n<p>ç‰¹ç‚¹ï¼šå¤šæ¬§ç¾é£çš„å›¾ç‰‡ã€‚</p>\n<p>ç¼ºç‚¹ï¼š-</p>\n<p><img data-src=\"https://img.xfc-exclave.com/2021/08/03/a3fffaf39d9df99f8b7274ee7c9f3d6d1627997732.png\" alt=\"ç½‘ç«™æˆªå›¾ï¼šUnsplash\" /></p>\n<h4 id=\"wallroom\"><a class=\"anchor\" href=\"#wallroom\">#</a> Wallroom</h4>\n<p>ç½‘å€ï¼š<span class=\"exturl\" data-url=\"aHR0cHM6Ly93YWxscm9vbS5pbw==\">https://wallroom.io</span></p>\n<p>ç‰¹ç‚¹ï¼š-</p>\n<p>ç¼ºç‚¹ï¼š-</p>\n<p><img data-src=\"https://img.xfc-exclave.com/2021/08/03/98dd0b40044bee252c0a66d2f9a6903d1627997756.png\" alt=\"ç½‘ç«™æˆªå›¾ï¼šWallroom\" /></p>\n<h4 id=\"wallheaven\"><a class=\"anchor\" href=\"#wallheaven\">#</a> wallheaven</h4>\n<p>ç‰¹ç‚¹ï¼š-</p>\n<p>ç¼ºç‚¹ï¼š-</p>\n<p><img data-src=\"https://img.xfc-exclave.com/2021/08/03/91adcc416791b1234d9adbcc879f62181627997773.png\" alt=\"ç½‘ç«™æˆªå›¾ï¼šWallheaven\" /></p>\n<h4 id=\"å½¼å²¸å›¾ç½‘\"><a class=\"anchor\" href=\"#å½¼å²¸å›¾ç½‘\">#</a> å½¼å²¸å›¾ç½‘</h4>\n<p>ç‰¹ç‚¹ï¼š-</p>\n<p>ç¼ºç‚¹ï¼šéœ€è¦ç™»å½•ï¼Œæ¯å¤©ä»…ä¾›ä¸€å¼ å£çº¸ä¸‹è½½ï¼ˆç½‘ç«™å…¬å‘Šå·²è¯´æ˜ï¼‰ã€‚</p>\n<p><img data-src=\"https://img.xfc-exclave.com/2021/08/03/9a19ee6b7a2018b94583da1185583b011627997792.png\" alt=\"ç½‘ç«™æˆªå›¾ï¼šå½¼å²¸å›¾ç½‘\" /></p>\n<h4 id=\"netnr\"><a class=\"anchor\" href=\"#netnr\">#</a> Netnr</h4>\n<p>ç½‘å€ï¼š<span class=\"exturl\" data-url=\"aHR0cHM6Ly9zcy5uZXRuci5jb20vd2FsbHBhcGVy\">https://ss.netnr.com/wallpaper</span></p>\n<p>ç‰¹ç‚¹ï¼šå…¶å®æ˜¯ä¸€ä¸ªå·¥å…·é›†ç½‘ç«™ï¼Œé¡µé¢å¹²å‡€ã€‚</p>\n<p>ç¼ºç‚¹ï¼šç´¢å¼•ç¨æœ‰ç‚¹ä¸æ–¹ä¾¿ã€‚</p>\n<p><img data-src=\"https://img.xfc-exclave.com/2021/08/03/53efa1817a6b15ed4ab47013b90497ef1627997820.png\" alt=\"ç½‘ç«™æˆªå›¾ï¼šNetnr\" /></p>\n<h4 id=\"åƒå¶ç½‘\"><a class=\"anchor\" href=\"#åƒå¶ç½‘\">#</a> åƒå¶ç½‘</h4>\n<p>ç½‘å€ï¼š<span class=\"exturl\" data-url=\"aHR0cDovL3FpYW55ZTg4LmNvbQ==\">http://qianye88.com</span></p>\n<p>ç‰¹ç‚¹ï¼š-</p>\n<p>ç¼ºç‚¹ï¼šéœ€è¦ç™»å½•ï¼Œé https åè®®ã€‚</p>\n<p><img data-src=\"https://img.xfc-exclave.com/2021/08/03/aa0723ff48c533f858765cbdeaa462c31627997835.png\" alt=\"ç½‘ç«™æˆªå›¾ï¼šåƒå¶ç½‘\" /></p>\n",
            "tags": [
                "èµ„æºæ”¶é›†",
                "èµ„æº",
                "æ¨è"
            ]
        },
        {
            "id": "https://www.chinmoku.cc/language/japanese/standard-japanese/standard-japanese-01/",
            "url": "https://www.chinmoku.cc/language/japanese/standard-japanese/standard-japanese-01/",
            "title": "æ¨™æº–æ—¥æœ¬èªã®å…¥é–€ï¼ˆä¸€ï¼‰",
            "date_published": "2021-08-01T16:00:00.000Z",
            "content_html": "<div class=\"note info\">\n<p>æœ¬æ–‡ä»‹ç»äº†æ—¥è¯­å­¦ä¹ çš„åŸºç¡€å…¥é—¨ï¼ŒåŒ…æ‹¬äº”åéŸ³å›¾å’Œä¸€äº›åŸºç¡€æ€§å¯¹è¯æ–‡ç« ã€‚é€šè¿‡æœ¬æ–‡ï¼Œèƒ½å¤Ÿå¯¹æ—¥è¯­çš„å‘éŸ³æœ‰æ‰€äº†è§£ï¼Œèƒ½å¤Ÿç†Ÿç»ƒåœ°ä½¿ç”¨æ—¥è¯­å¸¸ç”¨è¯­ã€‚</p>\n<p>æœ¬æ–‡ä¸»è¦å†…å®¹å‚è€ƒè‡ªã€Šä¸­æ—¥äº¤æµæ ‡å‡†æ—¥æœ¬è¯­åˆçº§ã€‹ã€‚</p>\n</div>\n<h3 id=\"æ¨™æº–æ—¥æœ¬èª-å‘éŸ³åŸºç¡€\"><a class=\"anchor\" href=\"#æ¨™æº–æ—¥æœ¬èª-å‘éŸ³åŸºç¡€\">#</a> æ¨™æº–æ—¥æœ¬èª - å‘éŸ³åŸºç¡€</h3>\n<h4 id=\"äº”åéŸ³å›¾\"><a class=\"anchor\" href=\"#äº”åéŸ³å›¾\">#</a> äº”åéŸ³å›¾</h4>\n<p>å‡ååˆ—è¡¨</p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th>ã‚æ®µ</th>\n<th>ã„æ®µ</th>\n<th>ã†æ®µ</th>\n<th>ãˆæ®µ</th>\n<th>ãŠæ®µ</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>ã‚è¡Œï¼ˆaï¼‰</strong></td>\n<td>ã‚ï¼ˆã‚¢ï¼‰</td>\n<td>ã„ï¼ˆã‚¤ï¼‰</td>\n<td>ã†ï¼ˆã‚¦ï¼‰</td>\n<td>ãˆï¼ˆã‚¨ï¼‰</td>\n<td>ãŠï¼ˆã‚ªï¼‰</td>\n</tr>\n<tr>\n<td><strong>ã‹è¡Œï¼ˆkaï¼‰</strong></td>\n<td>ã‹ï¼ˆã‚«ï¼‰</td>\n<td><strong>ãï¼ˆã‚­ï¼‰</strong></td>\n<td>ãï¼ˆã‚¯ï¼‰</td>\n<td>ã‘ï¼ˆã‚±ï¼‰</td>\n<td>ã“ï¼ˆã‚³ï¼‰</td>\n</tr>\n<tr>\n<td><strong>ã•è¡Œï¼ˆsaï¼‰</strong></td>\n<td>ã•ï¼ˆã‚µï¼‰</td>\n<td><strong>ã—ï¼ˆã‚·ï¼‰</strong></td>\n<td>ã™ï¼ˆã‚¹ï¼‰</td>\n<td>ã›ï¼ˆã‚»ï¼‰</td>\n<td>ãï¼ˆã‚½ï¼‰</td>\n</tr>\n<tr>\n<td><strong>ãŸè¡Œï¼ˆtaï¼‰</strong></td>\n<td>ãŸï¼ˆã‚¿ï¼‰</td>\n<td><strong>ã¡ï¼ˆãƒï¼‰</strong></td>\n<td>ã¤ï¼ˆãƒ„ï¼‰</td>\n<td>ã¦ï¼ˆãƒ†ï¼‰</td>\n<td>ã¨ï¼ˆãƒˆï¼‰</td>\n</tr>\n<tr>\n<td><strong>ãªè¡Œï¼ˆnaï¼‰</strong></td>\n<td>ãªï¼ˆãƒŠï¼‰</td>\n<td><strong>ã«ï¼ˆãƒ‹ï¼‰</strong></td>\n<td>ã¬ï¼ˆãƒŒï¼‰</td>\n<td>ã­ï¼ˆãƒï¼‰</td>\n<td>ã®ï¼ˆãƒï¼‰</td>\n</tr>\n<tr>\n<td><strong>ã¯è¡Œï¼ˆhaï¼‰</strong></td>\n<td>ã¯ï¼ˆãƒï¼‰</td>\n<td><strong>ã²ï¼ˆãƒ’ï¼‰</strong></td>\n<td>ãµï¼ˆãƒ•ï¼‰</td>\n<td>ã¸ï¼ˆãƒ˜ï¼‰</td>\n<td>ã»ï¼ˆãƒ›ï¼‰</td>\n</tr>\n<tr>\n<td><strong>ã¾è¡Œï¼ˆmaï¼‰</strong></td>\n<td>ã¾ï¼ˆãƒï¼‰</td>\n<td>ã¿ï¼ˆãƒŸï¼‰</td>\n<td>ã‚€ï¼ˆãƒ ï¼‰</td>\n<td>ã‚ï¼ˆãƒ¡ï¼‰</td>\n<td>ã‚‚ï¼ˆãƒ¢ï¼‰</td>\n</tr>\n<tr>\n<td><strong>ã‚„è¡Œï¼ˆyaï¼‰</strong></td>\n<td>ã‚„ï¼ˆãƒ¤ï¼‰</td>\n<td></td>\n<td>ã‚†ï¼ˆãƒ¦ï¼‰</td>\n<td></td>\n<td>ã‚ˆï¼ˆãƒ¨ï¼‰</td>\n</tr>\n<tr>\n<td><strong>ã‚‰è¡Œï¼ˆraï¼‰</strong></td>\n<td>ã‚‰ï¼ˆãƒ©ï¼‰</td>\n<td>ã‚Šï¼ˆãƒªï¼‰</td>\n<td>ã‚‹ï¼ˆãƒ«ï¼‰</td>\n<td>ã‚Œï¼ˆãƒ¬ï¼‰</td>\n<td>ã‚ï¼ˆãƒ­ï¼‰</td>\n</tr>\n<tr>\n<td><strong>ã‚è¡Œï¼ˆwaï¼‰</strong></td>\n<td>ã‚ï¼ˆãƒ¯ï¼‰</td>\n<td></td>\n<td></td>\n<td></td>\n<td>ã‚’ï¼ˆãƒ²ï¼‰</td>\n</tr>\n</tbody>\n</table>\n<p>æµŠéŸ³è¡¨</p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th>ã‚æ®µ</th>\n<th>ã„æ®µ</th>\n<th>ã†æ®µ</th>\n<th>ãˆæ®µ</th>\n<th>ãŠæ®µ</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>ãŒè¡Œï¼ˆgaï¼‰</strong></td>\n<td>ãŒï¼ˆã‚¬ï¼‰</td>\n<td><strong>ãï¼ˆã‚®ï¼‰</strong></td>\n<td>ãï¼ˆã‚°ï¼‰</td>\n<td>ã’ï¼ˆã‚²ï¼‰</td>\n<td>ã”ï¼ˆã‚´ï¼‰</td>\n</tr>\n<tr>\n<td><strong>ã–è¡Œï¼ˆzaï¼‰</strong></td>\n<td>ã–ï¼ˆã‚¶ï¼‰</td>\n<td><strong>ã˜ï¼ˆã‚¸ï¼‰</strong></td>\n<td>ãšï¼ˆã‚ºï¼‰</td>\n<td>ãœï¼ˆã‚¼ï¼‰</td>\n<td>ãï¼ˆã‚¾ï¼‰</td>\n</tr>\n<tr>\n<td><strong>ã è¡Œï¼ˆdaï¼‰</strong></td>\n<td>ã ï¼ˆãƒ€ï¼‰</td>\n<td>ã¢ï¼ˆãƒ‚ï¼‰</td>\n<td>ã¥ï¼ˆãƒ…ï¼‰</td>\n<td>ã§ï¼ˆãƒ‡ï¼‰</td>\n<td>ã©ï¼ˆãƒ‰ï¼‰</td>\n</tr>\n<tr>\n<td><strong>ã°è¡Œï¼ˆbaï¼‰</strong></td>\n<td>ã°ï¼ˆãƒï¼‰</td>\n<td><strong>ã³ï¼ˆãƒ“ï¼‰</strong></td>\n<td>ã¶ï¼ˆãƒ–ï¼‰</td>\n<td>ã¹ï¼ˆãƒ™ï¼‰</td>\n<td>ã¼ï¼ˆãƒœï¼‰</td>\n</tr>\n</tbody>\n</table>\n<p>åŠæµŠéŸ³è¡¨</p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th>ã‚æ®µ</th>\n<th>ã„æ®µ</th>\n<th>ã†æ®µ</th>\n<th>ãˆæ®µ</th>\n<th>ãŠæ®µ</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>ã±è¡Œï¼ˆpaï¼‰</strong></td>\n<td>ã±ï¼ˆãƒ‘ï¼‰</td>\n<td><strong>ã´ï¼ˆãƒ”ï¼‰</strong></td>\n<td>ã·ï¼ˆãƒ—ï¼‰</td>\n<td>ãºï¼ˆãƒšï¼‰</td>\n<td>ã½ï¼ˆãƒï¼‰</td>\n</tr>\n</tbody>\n</table>\n<p>æ‹—éŸ³è¡¨</p>\n<blockquote>\n<p>ä»¥ä¸Šè¡¨ä¸­ã„æ®µä¸‹æ‰€æœ‰åŠ ç²—éŸ³èŠ‚åŠ ä¸Š  <code>ã‚ƒï¼ˆãƒ£ï¼‰</code>  ã€  <code>ã‚…ï¼ˆãƒ¥ï¼‰</code>  ã€  <code>ã‚‡ï¼ˆãƒ§ï¼‰</code>  å³æ„æˆæ‹—éŸ³ï¼Œä¾‹å¦‚ï¼š  <code>ã³ã‚ƒ</code>  ã€‚</p>\n</blockquote>\n<h4 id=\"é•¿éŸ³-ä¿ƒéŸ³å’Œæ‹¨éŸ³\"><a class=\"anchor\" href=\"#é•¿éŸ³-ä¿ƒéŸ³å’Œæ‹¨éŸ³\">#</a> é•¿éŸ³ã€ä¿ƒéŸ³å’Œæ‹¨éŸ³</h4>\n<p>é•¿éŸ³è§„åˆ™ï¼š</p>\n<ul>\n<li>\n<p>ã‚æ®µ + ã‚</p>\n<p>å¦‚ï¼šãŠã‹ã‚ã•ã‚“ï¼ˆå¦ˆå¦ˆï¼‰ã€‚</p>\n</li>\n<li>\n<p>ã„æ®µ + ã„</p>\n<p>å¦‚ï¼šãŠã«ã„ã•ã‚“ï¼ˆå“¥å“¥ï¼‰ã€‚</p>\n</li>\n<li>\n<p>ã†æ®µ + ã†</p>\n<p>å¦‚ï¼šã€é€šå‹¤ãƒã‚¹ã€‘ã¤ã†ãã‚“ãƒã‚¹ï¼ˆå…¬å…±æ±½è½¦ï¼‰ã€‚</p>\n</li>\n<li>\n<p>ãˆæ®µ + ã„ã€ä¸ªåˆ« + ãˆ</p>\n<p>å¦‚ï¼šã€å…ˆç”Ÿã€‘ã›ã‚“ã›ã„ï¼ˆè€å¸ˆï¼‰ã€ã€ãŠå§‰ã•ã‚“ã€‘ãŠã­ãˆã•ã‚“ï¼ˆå§å§ï¼‰ã€‚</p>\n</li>\n<li>\n<p>ãŠæ®µ + ã†ã€å°‘æ•° + ãŠ</p>\n<p>å¦‚ï¼šã€ãŠçˆ¶ã•ã‚“ã€‘ãŠã¨ã†ã•ã‚“ï¼ˆçˆ¶äº²ï¼‰ã€ã€é ã„ã€‘ã¨ãŠã„ï¼ˆè¿œï¼Œé¥è¿œï¼‰ã€‚</p>\n</li>\n</ul>\n<p>ä¿ƒéŸ³ï¼š</p>\n<blockquote>\n<p>ä¿ƒéŸ³ï¼ˆå°ã£ï¼‰å°†åé¢çš„å­éŸ³é‡å†™ä¸¤ä¸ªæ¥è¡¨ç¤ºï¼Œâ€œã£â€ åªæ˜¯å‡ºç°åœ¨ã‹è¡Œï¼Œã•è¡Œï¼ŒãŸè¡Œï¼Œã±è¡Œå‰é¢çš„ä¸€ä¸ªç‰¹æ®ŠéŸ³ï¼Œâ€œã£â€ æ˜¯å°çš„ â€œã¤â€ã€‚</p>\n</blockquote>\n<p>æ‹¨éŸ³ï¼š</p>\n<p>ã‚“ / ãƒ³å«åšæ‹¨éŸ³ã€‚å¦‚ï¼šã€æ–°èã€‘ã—ã‚“ã¶ã‚“ï¼ˆæŠ¥çº¸ï¼‰ã€‚</p>\n<h4 id=\"å£°è°ƒ\"><a class=\"anchor\" href=\"#å£°è°ƒ\">#</a> å£°è°ƒ</h4>\n<p>è§„å¾‹ï¼š</p>\n<ul>\n<li>æ—¥è¯­å•è¯ä¸­ä¸ä¼šå‡ºç°ã€Œé«˜ - ä½ - é«˜ã€çš„å£°è°ƒæ–¹å¼ã€‚</li>\n<li>æ—¥è¯­å•è¯ç¬¬ä¸€ä¸ªéŸ³èŠ‚å’Œç¬¬äºŒä¸ªéŸ³èŠ‚çš„å£°è°ƒä¸€å®šæ˜¯ä¸åŒçš„ã€‚</li>\n</ul>\n<p>éŸ³è°ƒå£°å‹ï¼š</p>\n<ul>\n<li>\n<p>0 å‹ï¼š</p>\n<p>å•è¯ä¸­éŸ³èŠ‚ä¸éŸ³èŠ‚ä¹‹é—´ä¸ä¼šå‡ºç°é™è°ƒã€‚</p>\n<p>ã€åº­ã€‘ã«ã‚ï¼ˆé™¢å­ï¼Œåº­é™¢ï¼Œåº­å›­ï¼‰ã€‚</p>\n<p>ã€å£ã€‘ã‹ã¹ï¼ˆå¢™å£ï¼‰ã€‚</p>\n<p>ã€å›½ã€‘ãã«ï¼ˆå›½å®¶ï¼‰ã€‚</p>\n<p>ã€æ¤…å­ã€‘ã„ã™ï¼ˆæ¤…å­ï¼‰ã€‚</p>\n</li>\n<li>\n<p>1 å‹ï¼š</p>\n<p>å•è¯ä¸­çš„é™è°ƒå‡ºç°åœ¨ç¬¬ä¸€ä¸ªéŸ³èŠ‚ä¹‹åã€‚</p>\n<p>ã€çŒ«ã€‘ã­ã“ï¼ˆçŒ«ï¼‰ã€‚</p>\n<p>ã€æ¯ã€‘ã¯ã¯ï¼ˆæ¯äº²ï¼‰ã€‚</p>\n<p>ã€å‚˜ã€‘ã‹ã•ï¼ˆä¼ï¼‰ã€‚</p>\n<p>ã€å¤–ã€‘ãã¨ï¼ˆå¤–é¢ï¼‰ã€‚</p>\n</li>\n<li>\n<p>2 å‹ï¼š</p>\n<p>å•è¯ä¸­çš„é™è°ƒå‡ºç°åœ¨ç¬¬äºŒä¸ªéŸ³èŠ‚ä¹‹åã€‚</p>\n<p>ã€èŠ±å±‹ã€‘ã¯ãªã‚„ï¼ˆèŠ±åº—ï¼‰ã€‚</p>\n<p>ã„ã¾ã™ï¼ˆæœ‰ï¼Œåœ¨ï¼‰ã€‚</p>\n<p>ã€è•éº¦å±‹ã€‘ãã°ã‚„ï¼ˆèéº¦é¢é“ºï¼‰ã€‚</p>\n</li>\n<li>\n<p>3 å‹ï¼š</p>\n<p>å•è¯ä¸­çš„é™è°ƒå‡ºç°åœ¨ç¬¬ä¸‰ä¸ªéŸ³èŠ‚ä¹‹åã€‚</p>\n<p>ã€é£Ÿã¹ã¾ã™ã€‘ãŸã¹ã¾ã™ï¼ˆåƒï¼‰ã€‚</p>\n<p>ã€èãã¾ã™ã€‘ããã¾ã™ï¼ˆé—»ï¼Œå¬è¯´ï¼‰ã€‚</p>\n<p>ã€èª­ã¿ã¾ã™ã€‘ã‚ˆã¿ã¾ã™ï¼ˆçœ‹ï¼Œé˜…è¯»ï¼‰ã€‚</p>\n</li>\n</ul>\n<h3 id=\"è¯¾ç›®\"><a class=\"anchor\" href=\"#è¯¾ç›®\">#</a> è¯¾ç›®</h3>\n<h4 id=\"ç¬¬ä¸€è¯¾æã•ã‚“ã¯-ä¸­å›½äººã§ã™\"><a class=\"anchor\" href=\"#ç¬¬ä¸€è¯¾æã•ã‚“ã¯-ä¸­å›½äººã§ã™\">#</a> ç¬¬ä¸€è¯¾ï¼šæã•ã‚“ã¯ã€€ä¸­å›½äººã§ã™</h4>\n<h5 id=\"å•è¯\"><a class=\"anchor\" href=\"#å•è¯\">#</a> å•è¯</h5>\n<table>\n<thead>\n<tr>\n<th>å•è¯</th>\n<th>å‡å</th>\n<th>å£°è°ƒ</th>\n<th>è¯ä¹‰</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>ä¸­å›½äºº</td>\n<td>ã¡ã‚…ã†ã”ãã˜ã‚“</td>\n<td>4</td>\n<td>ä¸­å›½äºº</td>\n</tr>\n<tr>\n<td>æ—¥æœ¬äºº</td>\n<td>ã«ã»ã‚“ã˜ã‚“</td>\n<td>4</td>\n<td>æ—¥æœ¬äºº</td>\n</tr>\n<tr>\n<td>éŸ“å›½äºº</td>\n<td>ã‹ã‚“ã“ãã˜ã‚“</td>\n<td>4</td>\n<td>éŸ©å›½äºº</td>\n</tr>\n<tr>\n<td>ã‚¢ãƒ¡ãƒªã‚«äºº</td>\n<td>ã‚ã‚ã‚Šã‹ã˜ã‚“</td>\n<td>4</td>\n<td>ç¾å›½äºº</td>\n</tr>\n<tr>\n<td>ãƒ•ãƒ©ãƒ³ã‚¹äºº</td>\n<td>ãµã‚‰ã‚“ã™ã˜ã‚“</td>\n<td>4</td>\n<td>æ³•å›½äºº</td>\n</tr>\n<tr>\n<td>å­¦ç”Ÿ</td>\n<td>ãŒãã›ã„</td>\n<td>0</td>\n<td>å­¦ç”Ÿ</td>\n</tr>\n<tr>\n<td>ç•™å­¦ç”Ÿ</td>\n<td>ã‚Šã‚…ã†ãŒãã›ã„</td>\n<td>3</td>\n<td>ç•™å­¦ç”Ÿ</td>\n</tr>\n<tr>\n<td>æ•™æˆ</td>\n<td>ãã‚‡ã†ã˜ã‚…</td>\n<td>0</td>\n<td>æ•™æˆ</td>\n</tr>\n<tr>\n<td>ç¤¾å“¡</td>\n<td>ã—ã‚ƒã„ã‚“</td>\n<td>1</td>\n<td>èŒå‘˜</td>\n</tr>\n<tr>\n<td>ä¼šç¤¾å“¡</td>\n<td>ã‹ã„ã—ã‚ƒã„ã‚“</td>\n<td>3</td>\n<td>å…¬å¸èŒå‘˜</td>\n</tr>\n<tr>\n<td>åº—å“¡</td>\n<td>ã¦ã‚“ã„ã‚“</td>\n<td>0</td>\n<td>åº—å‘˜</td>\n</tr>\n<tr>\n<td>ç ”ä¿®ç”Ÿ</td>\n<td>ã‘ã‚“ã—ã‚…ã†ã›ã„</td>\n<td>3</td>\n<td>è¿›ä¿®ç”Ÿ</td>\n</tr>\n<tr>\n<td>ä¼æ¥­</td>\n<td>ããã‚‡ã†</td>\n<td>1</td>\n<td>ä¼ä¸š</td>\n</tr>\n<tr>\n<td>å¤§å­¦</td>\n<td>ã ã„ãŒã</td>\n<td>0</td>\n<td>å¤§å­¦</td>\n</tr>\n<tr>\n<td>çˆ¶</td>\n<td>ã¡ã¡</td>\n<td>1ã€2</td>\n<td>çˆ¶äº²</td>\n</tr>\n<tr>\n<td>èª²é•·</td>\n<td>ã‹ã¡ã‚‡ã†</td>\n<td>0</td>\n<td>ç§‘é•¿</td>\n</tr>\n<tr>\n<td>ç¤¾é•·</td>\n<td>ã—ã‚ƒã¡ã‚‡ã†</td>\n<td>0</td>\n<td>æ€»ç»ç†</td>\n</tr>\n<tr>\n<td>å‡ºè¿ãˆ</td>\n<td>ã§ã‚€ã‹ãˆ</td>\n<td>0</td>\n<td>è¿æ¥</td>\n</tr>\n<tr>\n<td>ã‚ã®äºº</td>\n<td>ã‚ã®ã²ã¨</td>\n<td>2</td>\n<td>é‚£ä¸ªäºº</td>\n</tr>\n<tr>\n<td>ç§</td>\n<td>ã‚ãŸã—</td>\n<td>0</td>\n<td>æˆ‘</td>\n</tr>\n<tr>\n<td>ã‚ãªãŸ</td>\n<td>ã‚ãªãŸ</td>\n<td>2</td>\n<td>ä½ </td>\n</tr>\n<tr>\n<td>ã©ã†ã‚‚</td>\n<td>ã©ã†ã‚‚</td>\n<td>1</td>\n<td>éå¸¸ï¼Œå¾ˆ</td>\n</tr>\n<tr>\n<td>ã¯ã„</td>\n<td>ã¯ã„</td>\n<td>1</td>\n<td>æ˜¯ï¼ˆåº”ç­”ï¼‰ï¼›æ˜¯çš„</td>\n</tr>\n<tr>\n<td>ã„ã„ãˆ</td>\n<td>ã„ã„ãˆ</td>\n<td>3</td>\n<td>ä¸ï¼Œä¸æ˜¯</td>\n</tr>\n<tr>\n<td>ã‚ã£</td>\n<td>ã‚ã£</td>\n<td></td>\n<td>å“ï¼Œå“å‘€</td>\n</tr>\n<tr>\n<td>æ</td>\n<td>ã‚Š</td>\n<td></td>\n<td>æ</td>\n</tr>\n<tr>\n<td>ç‹</td>\n<td>ãŠã†</td>\n<td>1</td>\n<td>ç‹</td>\n</tr>\n<tr>\n<td>å¼µ</td>\n<td>ã¡ã‚‡ã†</td>\n<td>1</td>\n<td>å¼ </td>\n</tr>\n<tr>\n<td>æ£®</td>\n<td>ã‚‚ã‚Š</td>\n<td>0</td>\n<td>æ£®</td>\n</tr>\n<tr>\n<td>æ—</td>\n<td>ã¯ã‚„ã—</td>\n<td>0</td>\n<td>æ—</td>\n</tr>\n<tr>\n<td>å°é‡</td>\n<td>ãŠã®</td>\n<td>0</td>\n<td>å°é‡</td>\n</tr>\n<tr>\n<td>å‰ç”°</td>\n<td>ã‚ˆã—ã </td>\n<td>0</td>\n<td>å‰ç”°</td>\n</tr>\n<tr>\n<td>ç”°ä¸­</td>\n<td>ãŸãªã‹</td>\n<td>0</td>\n<td>ç”°ä¸­</td>\n</tr>\n<tr>\n<td>ä¸­æ‘</td>\n<td>ãªã‹ã‚€ã‚‰</td>\n<td>0</td>\n<td>ä¸­æ‘</td>\n</tr>\n<tr>\n<td>å¤ªéƒ</td>\n<td>ãŸã‚ã†</td>\n<td>1</td>\n<td>å¤ªéƒ</td>\n</tr>\n<tr>\n<td>é‡‘</td>\n<td>ã‚­ãƒ </td>\n<td>1</td>\n<td>é‡‘</td>\n</tr>\n<tr>\n<td>ãƒ‡ãƒ¥ãƒãƒ³</td>\n<td>ã¢ã‚…ã½ã‚“</td>\n<td>1</td>\n<td>è¿ªè“¬</td>\n</tr>\n<tr>\n<td>ã‚¹ãƒŸã‚¹</td>\n<td></td>\n<td>1</td>\n<td>å²å¯†æ–¯</td>\n</tr>\n<tr>\n<td>ã‚¸ãƒ§ãƒ³ã‚½ãƒ³</td>\n<td></td>\n<td>1</td>\n<td>çº¦ç¿°é€Š</td>\n</tr>\n<tr>\n<td>ä¸­å›½</td>\n<td>ã¡ã‚…ã†ã”ã</td>\n<td>1</td>\n<td>ä¸­å›½</td>\n</tr>\n<tr>\n<td>ä¸œäº¬å¤§å­¦</td>\n<td>ã¨ã†ãã‚‡ã†ã ã„ãŒã</td>\n<td>5</td>\n<td>ä¸œäº¬å¤§å­¦</td>\n</tr>\n<tr>\n<td>åŒ—äº¬å¤§å­¦</td>\n<td>ãƒšã‚­ãƒ³ã ã„ãŒã</td>\n<td>4</td>\n<td>åŒ—äº¬å¤§å­¦</td>\n</tr>\n<tr>\n<td>JC ä¼ç”»</td>\n<td>ã‚¸ã‚§ãƒ¼ã‚·ãƒ¼ãã‹ã</td>\n<td>5</td>\n<td>JC ç­–åˆ’å…¬å¸</td>\n</tr>\n<tr>\n<td>åŒ—äº¬æ—…è¡Œç¤¾</td>\n<td>ãƒšã‚­ãƒ³ã‚Šã‚‡ã“ã†ã—ã‚ƒ</td>\n<td>5</td>\n<td>åŒ—äº¬æ—…è¡Œç¤¾</td>\n</tr>\n<tr>\n<td>æ—¥ä¸­å•†äº‹</td>\n<td>ã«ã£ã¡ã‚…ã†ã—ã‚‡ã†ã˜</td>\n<td>5</td>\n<td>æ—¥ä¸­å•†ç¤¾</td>\n</tr>\n<tr>\n<td>ã“ã‚“ã«ã¡ã¯</td>\n<td>ã“ã‚“ã«ã¡ã¯</td>\n<td>5</td>\n<td>ä½ å¥½</td>\n</tr>\n<tr>\n<td>ã™ã¿ã¾ã›ã‚“</td>\n<td>ã™ã¿ã¾ã›ã‚“</td>\n<td>4</td>\n<td>å¯¹ä¸èµ·</td>\n</tr>\n<tr>\n<td>ã©ã†ã</td>\n<td>ã©ã†ã</td>\n<td>1</td>\n<td>è¯·</td>\n</tr>\n<tr>\n<td>ã¯ã˜ã‚ã¾ã—ã¦</td>\n<td>ã¯ã˜ã‚ã¾ã—ã¦</td>\n<td>4</td>\n<td>åˆæ¬¡è§é¢</td>\n</tr>\n<tr>\n<td>ã‚ˆã‚ã—ããŠé¡˜ã„ã—ã¾ã™</td>\n<td>ã‚ˆã‚ã—ããŠã­ãŒã„ã—ã¾ã™</td>\n<td>-</td>\n<td>è¯·å¤šå…³ç…§</td>\n</tr>\n<tr>\n<td>ã“ã¡ã‚‰ã“ã</td>\n<td>ã“ã¡ã‚‰ã“ã</td>\n<td>4</td>\n<td>æˆ‘æ‰è¦ï¼ˆè¯·æ‚¨ï½ï¼‰</td>\n</tr>\n<tr>\n<td>ãã†ã§ã™</td>\n<td>ãã†ã§ã™</td>\n<td>1</td>\n<td>æ˜¯ï¼ˆè¿™æ ·ï¼‰</td>\n</tr>\n<tr>\n<td>ã¡ãŒã„ã¾ã™</td>\n<td>ã¡ãŒã„ã¾ã™</td>\n<td>4</td>\n<td>ä¸æ˜¯</td>\n</tr>\n<tr>\n<td>åˆ†ã‹ã‚Šã¾ã›ã‚“</td>\n<td>ã‚ã‹ã‚Šã¾ã›ã‚“</td>\n<td>5</td>\n<td>ä¸çŸ¥é“</td>\n</tr>\n</tbody>\n</table>\n<h5 id=\"è¯¾æ–‡\"><a class=\"anchor\" href=\"#è¯¾æ–‡\">#</a> è¯¾æ–‡</h5>\n<ol>\n<li>\n<p>è¯¾æ–‡ä¸€</p>\n<p>æã•ã‚“ã¯ã€€ä¸­å›½äººã§ã™ã€‚</p>\n<p>æ£®ã•ã‚“ã¯ã€€å­¦ç”Ÿã§ã¯ã€€ã‚ã‚Šã¾ã›ã‚“ã€‚</p>\n<p>æ—ã•ã‚“ã¯ã€€æ—¥æœ¬äººã§ã™ã‹ã€‚</p>\n<p>æã•ã‚“ã¯ã€€ï¼ªï¼£ä¼ç”»ã®ç¤¾å“¡ã§ã™ã€‚</p>\n</li>\n<li>\n<p>è¯¾æ–‡äºŒ</p>\n<p>ç”²ï¼šã‚ãŸã—ã¯ã€€æã§ã™ã€‚ã€€å°é‡ã•ã‚“ã§ã™ã‹ã€‚<br />\nä¹™ï¼šã¯ã„ã€ãã†ã§ã™ã€‚å°é‡ã§ã™ã€‚<br />\nç”²ï¼šæ£®ã•ã‚“ã¯ã€å­¦ç”Ÿã§ã™ã‹ã€‚<br />\nä¹™ï¼šã„ã„ãˆã€ã€€å­¦ç”Ÿã§ã¯ã€€ã‚ã‚Šã¾ã›ã‚“ã€‚ã€€ä¼šç¤¾å“¡ã§ã™ã€‚<br />\nç”²ï¼šå‰ç”°ã•ã‚“ã§ã™ã‹ã€‚<br />\nä¹™ï¼šã„ã„ãˆã€ã¡ãŒã„ã¾ã™ã€‚æ£®ã§ã™ã€‚<br />\nç”²ï¼šæã•ã‚“ã¯ã€€ï¼ªï¼£ä¼ç”»ã®ã€€ç¤¾å“¡ã§ã™ã‹ã€‚<br />\nä¹™ï¼šã¯ã„ã€ãã†ã§ã™ã€‚</p>\n</li>\n<li>\n<p>è¯¾æ–‡ä¸‰</p>\n<p>å‡ºè¿ãˆ</p>\n<p>æï¼šï¼ªï¼£ä¼ç”»ã®å°é‡ã•ã‚“ã§ã™ã‹ã€‚</p>\n<p>å°é‡ï¼šã¯ã„ã€å°é‡ã§ã™ï¼Œ<ruby>æç§€éº—<rp> (</rp><rt>ã‚Šã—ã‚…ã‚Œã„</rt><rp>)</rp></ruby> ã•ã‚“ã§ã™ã‹ã€‚</p>\n<p>æï¼šã¯ã„ã€æç§€éº—ã§ã™ï¼Œã¯ã˜ã‚ã¾ã—ã¦ã€‚ã©ã†ãã€€ã‚ˆã‚ã—ãã€€ãŠé¡˜ã„ã—ã¾ã™ã€‚</p>\n<p>å°é‡ï¼šã¯ã˜ã‚ã¾ã—ã¦ï¼Œå°é‡<ruby>ç·‘<rp> (</rp><rt>ã¿ã©ã‚Š</rt><rp>)</rp></ruby> ã§ã™ã€‚</p>\n<p>æ£®ï¼šæã•ã‚“ï¼Œã“ã‚“ã«ã¡ã¯ã€‚</p>\n<p>æï¼šå‰ç”°ã•ã‚“ã§ã™ã‹ã€‚</p>\n<p>æ£®ï¼šã„ã„ãˆï¼Œã‚ãŸã—ã¯å‰ç”°ã˜ã‚ƒã€€ã‚ã‚Šã¾ã›ã‚“ã€‚æ£®ã§ã™ã€‚</p>\n<p>æï¼šã‚ã£ï¼Œæ£®ã•ã‚“ã§ã™ã‹ã€‚ã©ã†ã‚‚ã€€ã™ã¿ã¾ã›ã‚“ã€‚</p>\n<p>æ£®ï¼šã„ã„ãˆï¼Œã©ã†ãã€€ã‚ˆã‚ã—ãã€‚</p>\n<p>æï¼šæç§€éº—ã§ã™ã€‚ã“ã¡ã‚‰ã“ãï¼Œã‚ˆã‚ã—ããŠé¡˜ã„ã—ã¾ã™ã€‚</p>\n</li>\n</ol>\n<h5 id=\"è¯­æ³•\"><a class=\"anchor\" href=\"#è¯­æ³•\">#</a> è¯­æ³•</h5>\n<ol>\n<li>\n<p>åã¯ã€€åã§ã™ã€‚</p>\n<p>ç›¸å½“äºæ±‰è¯­ä¸­çš„ â€œâ€¦â€¦ è€…ï¼Œâ€¦â€¦ ä¹Ÿâ€ã€‚åŠ©è¯ â€œã¯â€ ç”¨äºæç¤ºä¸»é¢˜ï¼Œè¯»ä½œ â€œã‚â€ã€‚</p>\n</li>\n<li>\n<p>åã¯ã€€åã§ã¯ã€€ã‚ã‚Šã¾ã›ã‚“ã€‚</p>\n<p>ç›¸å½“äºæ±‰è¯­ä¸­çš„ â€œâ€¦â€¦ è€…ï¼Œéâ€¦â€¦ ä¹Ÿã€‚â€ï¼Œâ€œã§ã¯ã€€ã‚ã‚Šã¾ã›ã‚“â€ ä¸­çš„ â€œã§ã¯â€ åœ¨å£è¯­ä¸­æœ‰æ—¶ä¼šå‘æˆ â€œã˜ã‚ƒâ€ã€‚</p>\n<p>æ£®ã•ã‚“ã¯ã€€å­¦ç”Ÿã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</p>\n<p>ã‚ãŸã—ã¯ã€€ç”°ä¸­ã˜ã‚ƒã‚ã‚Šã¾ã›ã‚“ã€‚</p>\n</li>\n<li>\n<p>åã¯ã€€åã§ã™ã‹ã€‚</p>\n<p>ç›¸å½“äºæ±‰è¯­ä¸­çš„ â€œâ€¦â€¦ è€…ï¼Œâ€¦â€¦ è€¶ï¼Ÿâ€ï¼ŒåŠ©è¯ â€œã‹â€ ç”¨åœ¨å¥å°¾è¡¨ç¤ºç–‘é—®ï¼Œä½†ä¸ä½¿ç”¨é—®å·ã€‚å›ç­”æ—¶å¯ä»¥ç”¨ â€œã¯ã„â€ è¡¨ç¤ºè‚¯å®šï¼Œç”¨ â€œã„ã„ãˆâ€ è¡¨ç¤ºå¦å®šã€‚</p>\n<p>ã‚ãªãŸã¯ã€€å°é‡ã•ã‚“ã§ã™ã‹ã€‚ï¼ˆæ‚¨æ˜¯â€¦â€¦ï¼‰</p>\n<p>ã¯ã„ã€å°é‡ã§ã™ã€‚</p>\n<p>ã‚­ãƒ ã•ã‚“ã¯ã€€ä¸­å›½äººã§ã™ã‹ã€‚ï¼ˆé‡‘â€¦â€¦ï¼‰</p>\n<p>ã„ã„ãˆã€ä¸­å›½äººã§ã¯ã€€ã‚ã‚Šã¾ã›ã‚“ã€‚</p>\n</li>\n<li>\n<p>åã®å</p>\n<p>ç›¸å½“äºæ±‰è¯­ä¸­ â€œçš„â€ çš„æ„æ€ã€‚ç»„è¯ â€œã®â€ è¿æ¥åè¯ä¸åè¯ï¼Œè¡¨ç¤ºå‰é¢çš„åè¯æ˜¯åé¢åè¯ä»å±çš„æœºæ„ã€å›½å®¶æˆ–å±æ€§ã€‚</p>\n<p>æã•ã‚“ã¯ã€€ï¼ªï¼£ä¼ç”»ã®ã€€ç¤¾å“¡ã§ã™ã€‚</p>\n<p>åŒ—äº¬æ—…è¡Œç¤¾ã¯ã€€ä¸­å›½ã®ã€€ä¼æ¥­ã§ã™ã€‚</p>\n<p>ãƒ‡ãƒ¥ãƒœãƒ³ã•ã‚“ã¯ã€€å¤§å­¦ã®ã€€å…ˆç”Ÿã§ã™ã€‚ï¼ˆè¿ªè“¬â€¦â€¦ï¼‰</p>\n<p>æ³¨æ„ï¼šåœ¨æ—¥è¯­ä¸­ï¼Œä¸è®ºåè¯ä¹‹é—´çš„æ˜¯ä»€ä¹ˆå…³ç³»ï¼Œä¸€èˆ¬åŠ ï¼ˆã®ï¼‰ï¼Œå¦‚ â€œï¼ˆæˆ‘çš„çˆ¶äº²ï¼‰ã‚ãŸã—ã®çˆ¶â€ã€‚æ±‰è¯­ä¸­è¯´ â€œæˆ‘çˆ¶äº²â€ï¼Œè€Œæ—¥è¯­ä¸­ä¸è¯´ â€œ~ ã‚ãŸã—ã€€çˆ¶â€ã€‚</p>\n</li>\n</ol>\n<p><strong>è¡¥å……ï¼š</strong></p>\n<ol>\n<li>\n<p>äººç§°</p>\n<ul>\n<li>\n<p><code>ã‚ãŸã—</code>  ã€  <code>ã‚ãªãŸ</code>  ã€  <code>ã‚ã®äºº</code></p>\n<p>ã‚ãªãŸï¼šä½ ï¼Œè¾ƒä¸ºéšæ„ï¼Œå¸¸åœ¨ä¸çŸ¥é“å¯¹æ–¹åå­—çš„æƒ…å†µä¸‹ä½¿ç”¨ã€‚</p>\n</li>\n<li>\n<p><code>ï½ã•ã‚“</code></p>\n<p>ç§°å‘¼åˆ«äººæ—¶ï¼Œä¸åˆ†ç”·å¥³ï¼Œéƒ½åœ¨å…¶å§“åé¢åŠ ä¸Š â€œã•ã‚“â€ã€‚</p>\n<p>å¦å¤–ï¼Œå¯¹äºä¸è‡ªå·±å¹´é¾„ç›¸å½“ï¼Œæˆ–æ¯”è‡ªå·±å¹´è½»çš„ç”·æ€§ï¼Œæœ‰æ—¶ä¹Ÿç”¨ â€œå›â€ ç§°å‘¼ã€‚</p>\n<p>æ£®å›ã¯ã€€ï¼ªï¼£ä¼ç”»ã®ç¤¾å“¡ã§ã™ã€‚</p>\n</li>\n</ul>\n</li>\n<li>\n<p>çœç•¥</p>\n<p>ï¼ˆã‚ãªãŸã¯ï¼‰å°é‡ã•ã‚“ã§ã™ã‹ã€‚</p>\n</li>\n<li>\n<p>æƒŠå¹  <code>ã‚ã£</code></p>\n<p><code>ã‚ã£</code>  æ˜¯åƒæƒŠæˆ–æœ‰æ‰€æ„Ÿè§¦æ—¶å‘å‡ºçš„å£°éŸ³ï¼Œä»¥åŠåœ¨ç´§æ€¥æƒ…å†µä¸‹æƒ…ä¸è‡ªç¦å‘å‡ºçš„å£°éŸ³ã€‚</p>\n<p>ã‚ã£ï¼æ£®ã•ã‚“ï¼</p>\n<p>ã‚ã£ã€ã™ã¿ã¾ã›ã‚“ã€‚</p>\n</li>\n<li>\n<p>å¯’æš„è¯­</p>\n<p>ã©ã†ãã€€ã‚ˆã‚ã—ãã€€ãŠé¡˜ã„ã—ã¾ã™ã€‚</p>\n<p>è‡ªæˆ‘ä»‹ç»æ—¶ä½¿ç”¨ï¼Œç›¸å½“äº â€œè¯·å¤šå¤šå…³ç…§â€ã€‚</p>\n<p>ã¯ã˜ã‚ã¾ã—ã¦ã€æã§ã™ã€‚ã©ã†ãã€€ã‚ˆã‚ã—ãã€€ãŠé¡˜ã„ã—ã¾ã™ã€‚</p>\n<p>ã“ã¡ã‚‰ã“ãã€ã©ã†ãã€€ã‚ˆã‚ã—ãã€€ãŠé¡˜ã„ã—ã¾ã™ã€‚ï¼ˆæˆ‘æ‰è¦è¯·ä½ å¤šå¤šå…³ç…§ï¼‰</p>\n</li>\n</ol>\n<h4 id=\"ç¬¬äºŒè¯¾ã“ã‚Œã¯-æœ¬ã§ã™\"><a class=\"anchor\" href=\"#ç¬¬äºŒè¯¾ã“ã‚Œã¯-æœ¬ã§ã™\">#</a> ç¬¬äºŒè¯¾ï¼šã“ã‚Œã¯ã€€æœ¬ã§ã™</h4>\n<h5 id=\"å•è¯-2\"><a class=\"anchor\" href=\"#å•è¯-2\">#</a> å•è¯</h5>\n<table>\n<thead>\n<tr>\n<th>å•è¯</th>\n<th>å‡å</th>\n<th>å£°è°ƒ</th>\n<th>è¯ä¹‰</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>æœ¬</td>\n<td>ã»ã‚“</td>\n<td>1</td>\n<td>ä¹¦</td>\n</tr>\n<tr>\n<td>ã‹ã°ã‚“</td>\n<td>ã‹ã°ã‚“</td>\n<td>0</td>\n<td>åŒ…ï¼Œå…¬æ–‡åŒ…</td>\n</tr>\n<tr>\n<td>ãƒãƒ¼ãƒˆ</td>\n<td>ã®ãƒ¼ã¨</td>\n<td>1</td>\n<td>ç¬”è®°æœ¬</td>\n</tr>\n<tr>\n<td>é‰›ç­†</td>\n<td>ãˆã‚“ã´ã¤</td>\n<td>0</td>\n<td>é“…ç¬”</td>\n</tr>\n<tr>\n<td>å‚˜</td>\n<td>ã‹ã•</td>\n<td>1</td>\n<td>ä¼</td>\n</tr>\n<tr>\n<td>é´</td>\n<td>ãã¤</td>\n<td>2</td>\n<td>é‹</td>\n</tr>\n<tr>\n<td>æ–°è</td>\n<td>ã—ã‚“ã¶ã‚“</td>\n<td>0</td>\n<td>æŠ¥çº¸</td>\n</tr>\n<tr>\n<td>é›‘èªŒ</td>\n<td>ã–ã£ã—</td>\n<td>0</td>\n<td>æ‚å¿—</td>\n</tr>\n<tr>\n<td>è¾æ›¸</td>\n<td>ã˜ã—ã‚‡</td>\n<td>1</td>\n<td>è¯å…¸</td>\n</tr>\n<tr>\n<td>ã‚«ãƒ¡ãƒ©</td>\n<td>ã‹ã‚ã‚‰</td>\n<td>1</td>\n<td>ç…§ç›¸æœº</td>\n</tr>\n<tr>\n<td>ãƒ†ãƒ¬ãƒ“</td>\n<td>ã¦ã‚Œã³</td>\n<td>1</td>\n<td>ç”µè§†æœº</td>\n</tr>\n<tr>\n<td>ãƒ‘ã‚½ã‚³ãƒ³</td>\n<td>ã±ãã“ã‚“</td>\n<td>0</td>\n<td>ä¸ªäººç”µè„‘</td>\n</tr>\n<tr>\n<td>ãƒ©ã‚¸ã‚ª</td>\n<td>ã‚‰ã˜ãŠ</td>\n<td>1</td>\n<td>æ”¶éŸ³æœº</td>\n</tr>\n<tr>\n<td>é›»è©±</td>\n<td>ã§ã‚“ã‚</td>\n<td>0</td>\n<td>ç”µè¯</td>\n</tr>\n<tr>\n<td>æœº</td>\n<td>ã¤ããˆ</td>\n<td>0</td>\n<td>æ¡Œå­ï¼Œä¹¦æ¡Œ</td>\n</tr>\n<tr>\n<td>æ¤…å­</td>\n<td>ã„ã™</td>\n<td>0</td>\n<td>æ¤…å­</td>\n</tr>\n<tr>\n<td>éµ</td>\n<td>ã‹ã</td>\n<td>2</td>\n<td>é’¥åŒ™</td>\n</tr>\n<tr>\n<td>æ™‚è¨ˆ</td>\n<td>ã¨ã‘ã„</td>\n<td>0</td>\n<td>é’Ÿï¼Œè¡¨</td>\n</tr>\n<tr>\n<td>æ‰‹å¸³</td>\n<td>ã¦ã¡ã‚‡ã†</td>\n<td>0</td>\n<td>è®°äº‹æœ¬</td>\n</tr>\n<tr>\n<td>å†™çœŸ</td>\n<td>ã—ã‚ƒã—ã‚“</td>\n<td>0</td>\n<td>ç…§ç‰‡</td>\n</tr>\n<tr>\n<td>è»Š</td>\n<td>ãã‚‹ã¾</td>\n<td>0</td>\n<td>è½¦</td>\n</tr>\n<tr>\n<td>è‡ªè»¢è»Š</td>\n<td>ã˜ã¦ã‚“ã—ã‚ƒ</td>\n<td>0</td>\n<td>è‡ªè¡Œè½¦</td>\n</tr>\n<tr>\n<td>ãŠåœŸç”£</td>\n<td>ãŠã¿ã‚„ã’</td>\n<td>0</td>\n<td>ç¤¼ç‰©</td>\n</tr>\n<tr>\n<td>åç”£å“</td>\n<td>ã‚ã„ã•ã‚“ã²ã‚“</td>\n<td>0</td>\n<td>ç‰¹äº§</td>\n</tr>\n<tr>\n<td>ã‚·ãƒ«ã‚¯</td>\n<td>ã—ã‚‹ã</td>\n<td>1</td>\n<td>ä¸ç»¸</td>\n</tr>\n<tr>\n<td>ãƒãƒ³ã‚«ãƒ</td>\n<td>ã¯ã‚“ã‹ã¡</td>\n<td>0</td>\n<td>æ‰‹ç»¢</td>\n</tr>\n<tr>\n<td>ä¼šç¤¾</td>\n<td>ã‹ã„ã—ã‚ƒ</td>\n<td>0</td>\n<td>å…¬å¸</td>\n</tr>\n<tr>\n<td>æ–¹</td>\n<td>ã‹ãŸ</td>\n<td>2</td>\n<td>ï¼ˆæ•¬ç§°ï¼‰ä½ï¼Œäºº</td>\n</tr>\n<tr>\n<td>äºº</td>\n<td>ã²ã¨</td>\n<td>0</td>\n<td>äºº</td>\n</tr>\n<tr>\n<td>å®¶æ—</td>\n<td>ã‹ãã</td>\n<td>1</td>\n<td>å®¶äººï¼Œå®¶å±</td>\n</tr>\n<tr>\n<td>æ¯</td>\n<td>ã¯ã¯</td>\n<td>1</td>\n<td>ï¼ˆæˆ‘ï¼‰æ¯äº²</td>\n</tr>\n<tr>\n<td>ãŠæ¯ã•ã‚“</td>\n<td>ãŠã‹ã‚ã•ã‚“</td>\n<td>2</td>\n<td>æ¯äº²</td>\n</tr>\n<tr>\n<td>æ—¥æœ¬èª</td>\n<td>ã«ã»ã‚“ã”</td>\n<td>0</td>\n<td>æ—¥è¯­</td>\n</tr>\n<tr>\n<td>ä¸­å›½èª</td>\n<td>ã¡ã‚…ã†ã”ãã”</td>\n<td>0</td>\n<td>æ±‰è¯­ï¼Œä¸­æ–‡</td>\n</tr>\n<tr>\n<td>ã“ã‚Œ</td>\n<td>ã“ã‚Œ</td>\n<td>0</td>\n<td>è¿™ï¼Œè¿™ä¸ª</td>\n</tr>\n<tr>\n<td>ãã‚Œ</td>\n<td>ãã‚Œ</td>\n<td>0</td>\n<td>é‚£ï¼Œé‚£ä¸ª</td>\n</tr>\n<tr>\n<td>ã‚ã‚Œ</td>\n<td>ã‚ã‚Œ</td>\n<td>0</td>\n<td>é‚£ï¼Œé‚£ä¸ª</td>\n</tr>\n<tr>\n<td>ã©ã‚Œ</td>\n<td>ã©ã‚Œ</td>\n<td>1</td>\n<td>å“ªä¸ª</td>\n</tr>\n<tr>\n<td>ä½•</td>\n<td>ãªã‚“</td>\n<td>1</td>\n<td>ä»€ä¹ˆ</td>\n</tr>\n<tr>\n<td>èª°</td>\n<td>ã ã‚Œ</td>\n<td>1</td>\n<td>è°</td>\n</tr>\n<tr>\n<td>ã©ãªãŸ</td>\n<td>ã©ãªãŸ</td>\n<td>1</td>\n<td>å“ªä½</td>\n</tr>\n<tr>\n<td>ã“ã®</td>\n<td>ã“ã®</td>\n<td>0</td>\n<td>è¿™ï¼Œè¿™ä¸ªï¼ˆè¿ä½“ï¼‰</td>\n</tr>\n<tr>\n<td>ãã®</td>\n<td>ãã®</td>\n<td>0</td>\n<td>é‚£ï¼Œé‚£ä¸ªï¼ˆè¿ä½“ï¼‰</td>\n</tr>\n<tr>\n<td>ã‚ã®</td>\n<td>ã‚ã®</td>\n<td>0</td>\n<td>é‚£ï¼Œé‚£ä¸ªï¼ˆè¿ä½“ï¼‰</td>\n</tr>\n<tr>\n<td>ã©ã®</td>\n<td>ã©ã®</td>\n<td>1</td>\n<td>å“ªä¸ª</td>\n</tr>\n<tr>\n<td>ãˆã£</td>\n<td>ãˆã£</td>\n<td></td>\n<td>å•Š</td>\n</tr>\n<tr>\n<td>ã‚ã‚</td>\n<td>ã‚ã‚</td>\n<td>1</td>\n<td>å“‡</td>\n</tr>\n<tr>\n<td>ãˆãˆ</td>\n<td>ãˆãˆ</td>\n<td>1</td>\n<td>ï¼ˆåº”ç­”ï¼‰å—¯ï¼Œæ˜¯</td>\n</tr>\n<tr>\n<td>é•·å³¶</td>\n<td>ãªãŒã—ã¾</td>\n<td>0</td>\n<td>é•¿å²›</td>\n</tr>\n<tr>\n<td>æ—¥æœ¬</td>\n<td>ã«ã»ã‚“</td>\n<td>2</td>\n<td>æ—¥æœ¬</td>\n</tr>\n<tr>\n<td>ã‚¹ãƒ¯ãƒˆã‚¦</td>\n<td>ã™ã‚ã¨ã†</td>\n<td>2</td>\n<td>æ±•å¤´</td>\n</tr>\n<tr>\n<td>ãƒ­ãƒ³ãƒ‰ãƒ³</td>\n<td>ã‚ã‚“ã©ã‚“</td>\n<td>1</td>\n<td>ä¼¦æ•¦</td>\n</tr>\n<tr>\n<td>ãŠã„ãã¤</td>\n<td>ãŠã„ãã¤</td>\n<td>0</td>\n<td>å¤šå¤§</td>\n</tr>\n<tr>\n<td>ä½•æ­³</td>\n<td>ãªã‚“ã•ã„ã€~ ã•ã„</td>\n<td>1</td>\n<td>å¤šå¤§ï¼Œ~ å²</td>\n</tr>\n</tbody>\n</table>\n<h5 id=\"è¯¾æ–‡-2\"><a class=\"anchor\" href=\"#è¯¾æ–‡-2\">#</a> è¯¾æ–‡</h5>\n<ol>\n<li>\n<p>è¯¾æ–‡ä¸€</p>\n<p>ã“ã‚Œã¯ã€€æœ¬ã§ã™ã€‚</p>\n<p>ãã‚Œã¯ã€€ä½•ã§ã™ã‹ã€‚</p>\n<p>ã‚ã‚Œã¯ã€€ã ã‚Œã®å‚˜ã§ã™ã‹ã€‚</p>\n<p>ã“ã®ã‚«ãƒ¡ãƒ©ã¯ã€€ã‚¹ãƒŸã‚¹ã•ã‚“ã®ã§ã™ã€‚</p>\n</li>\n<li>\n<p>è¯¾æ–‡äºŒ</p>\n<p>ç”²ï¼šã“ã‚Œã¯ã€€ãƒ†ãƒ¬ãƒ“ã§ã™ã‹ã€‚</p>\n<p>ä¹™ï¼šã„ã„ãˆã€ãã‚Œã¯ã€€ãƒ†ãƒ¬ãƒ“ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ã€€ãƒ‘ã‚½ã‚³ãƒ³ã§ã™ã€‚</p>\n<p>ç”²ï¼šãã‚Œã¯ã€€ä½•ã§ã™ã‹ã€‚</p>\n<p>ä¹™ï¼šã“ã‚Œã¯ã€€æ—¥æœ¬èªã®æœ¬ã§ã™ã€‚</p>\n<p>ç”²ï¼šæ£®ã•ã‚“ã®ã‹ã°ã‚“ã¯ã€€ã©ã‚Œã§ã™ã‹ã€‚</p>\n<p>ä¹™ï¼šã‚ã®ã‹ã°ã‚“ã§ã™ã€‚</p>\n<p>ç”²ï¼šãã®ãƒãƒ¼ãƒˆã¯ã€€èª°ã®ã§ã™ã‹ã€‚</p>\n<p>ä¹™ï¼šã‚ãŸã—ã®ã§ã™ã€‚</p>\n</li>\n<li>\n<p>è¯¾æ–‡ä¸‰</p>\n<p>å®¶æ—ã®å†™çœŸ</p>\n<p>å°é‡ï¼šæã•ã‚“ã€ãã‚Œã¯ã€€ä½•ã§ã™ã‹ã€‚</p>\n<p>æï¼šã“ã‚Œã§ã™ã‹ã€‚å®¶æ—ã®å†™çœŸã§ã™ã€‚</p>\n<p>å°é‡ï¼šã“ã®æ–¹ã¯ã€€ã©ãªãŸãªã§ã™ã‹ã€‚</p>\n<p>æï¼šç§ã®æ¯ã§ã™ã€‚</p>\n<p>å°é‡ï¼šãŠæ¯ã•ã‚“ã¯ã€€ãŠã„ãã¤ã§ã™ã‹ã€‚</p>\n<p>æï¼š53 æ­³ã§ã™ã€‚</p>\n<p>æï¼šå°é‡ã•ã‚“ã€ã“ã‚Œã€€ã©ã†ãã€‚</p>\n<p>å°é‡ï¼šãˆã£ã€ä½•ã§ã™ã‹ã€‚</p>\n<p>æï¼šãŠåœŸç”£ã§ã™ã€‚</p>\n<p>å°é‡ï¼šã‚ã‚ã€ã‚·ãƒ«ã‚¯ã®ãƒãƒ³ã‚«ãƒã§ã™ã‹ã€‚</p>\n<p>æï¼šãˆãˆã€‚ã‚¹ãƒ¯ãƒˆã‚¦ã®ãƒãƒ³ã‚«ãƒã§ã™ã€‚ä¸­å›½ã®åç”£å“ã§ã™ã€‚</p>\n<p>å°é‡ï¼šã©ã†ãã€€ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ã€‚</p>\n</li>\n</ol>\n<h5 id=\"è¯­æ³•-2\"><a class=\"anchor\" href=\"#è¯­æ³•-2\">#</a> è¯­æ³•</h5>\n<ol>\n<li>\n<p>ã“ã‚Œï¼ãã‚Œï¼ã‚ã‚Œã€€ã¯ã€€åã§ã™ã€‚</p>\n<p>ã“ã‚Œï¼šç¦»è¯´è¯äººæœ€è¿‘ã€‚</p>\n<p>ãã‚Œï¼šç¦»å¬è¯äººæœ€è¿‘ã€‚</p>\n<p>ã‚ã‚Œï¼šç¦»è¯´è¯äººå’Œå¬è¯äººéƒ½è¾ƒè¿œã€‚</p>\n</li>\n<li>\n<p>èª°ã§ã™ã‹ã€ä½•ã§ã™ã‹ã€‚</p>\n<p>èª°ã§ã™ã‹ï¼šæŒ‡äººã€‚â€œã ã‚Œâ€ è¾ƒç¤¼è²Œçš„è¯´æ³•æ˜¯ â€œã©ãªãŸâ€ã€‚</p>\n<p>ä½•ã§ã™ã‹ï¼šæŒ‡ç‰©ã€‚</p>\n</li>\n<li>\n<p>ã“ã®ï¼ãã®ï¼ã‚ã®ã€€åã§ã™ã€‚</p>\n<p>ä¸è¡¨ç¤ºä½ç½®å…³ç³»æ—¶ï¼Œä¸ã“ã‚Œã€ãã‚Œã€ã‚ã‚Œç›¸åŒã€‚</p>\n</li>\n<li>\n<p>ã©ã‚Œï¼ã©ã®ã€€åã€‚</p>\n<p>ç–‘é—®ï¼Œå“ªä¸€ä¸ªï¼Œç”¨äºä¸‰ä¸ªåŠä¸‰ä¸ªä»¥ä¸Šçš„äº‹ç‰©ã€‚</p>\n</li>\n</ol>\n<h5 id=\"è¡¥å……\"><a class=\"anchor\" href=\"#è¡¥å……\">#</a> è¡¥å……</h5>\n<ol>\n<li>\n<p><code>æ–¹</code>  ï¼ˆã‹ãŸï¼‰ã€‚</p>\n<p>ã“ã®æ–¹ã€ãã®æ–¹ã€ã‚ã®æ–¹ï¼šè¾ƒä¸ºç¤¼è²Œï¼Œç›¸å½“äºä¸­æ–‡ â€œè¿™ä¸€ä½ï¼Œé‚£ä¸€ä½â€ã€‚</p>\n<p>ã“ã®äººã€ãã®äººã€ã‚ã®äººï¼šè¾ƒä¸ºéšæ„ï¼Œç›¸å½“äºä¸­æ–‡ â€œè¿™ä¸ªäººï¼Œé‚£ä¸ªäººâ€ã€‚</p>\n</li>\n<li>\n<p>è¯¢é—®å¹´é¾„</p>\n<p><code>ãŠã„ãã¤</code>  ï¼šè¾ƒä¸ºç¤¼è²Œã€‚</p>\n<p><code>ä½•æ­³</code>  ï¼šè¾ƒä¸ºéšæ„ã€‚</p>\n</li>\n<li>\n<p>ã©ã†ãï¼ˆè¯·ï¼‰ã€‚</p>\n</li>\n<li>\n<p>ã¯ã„ã€ã„ã„ãˆã€‚</p>\n</li>\n<li>\n<p>å¤–æ¥èª</p>\n<p>ä»å¤–è¯­å¼•è¿›çš„æ­¤è¢«ç§°ä¸º â€œå¤–æ¥èªï¼ˆå¤–æ¥è¯ï¼‰â€ï¼Œç”¨ç‰‡å‡åä¹¦å†™ã€‚</p>\n</li>\n</ol>\n<h4 id=\"ç¬¬ä¸‰è¯¾ã“ã“ã¯-ãƒ‡ãƒ‘ãƒ¼ãƒˆã§ã™\"><a class=\"anchor\" href=\"#ç¬¬ä¸‰è¯¾ã“ã“ã¯-ãƒ‡ãƒ‘ãƒ¼ãƒˆã§ã™\">#</a> ç¬¬ä¸‰è¯¾ï¼šã“ã“ã¯ã€€ãƒ‡ãƒ‘ãƒ¼ãƒˆã§ã™</h4>\n<h5 id=\"å•è¯-3\"><a class=\"anchor\" href=\"#å•è¯-3\">#</a> å•è¯</h5>\n<table>\n<thead>\n<tr>\n<th>å•è¯</th>\n<th>å‡å</th>\n<th>å£°è°ƒ</th>\n<th>è¯ä¹‰</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>ãƒ‡ãƒ‘ãƒ¼ãƒˆ</td>\n<td>ã§ã±ãƒ¼ã¨</td>\n<td>2</td>\n<td>ç™¾è´§å•†åº—</td>\n</tr>\n<tr>\n<td>é£Ÿå ‚</td>\n<td>ã—ã‚‡ãã©ã†</td>\n<td>0</td>\n<td>é£Ÿå ‚</td>\n</tr>\n<tr>\n<td>éƒµä¾¿å±€</td>\n<td>ã‚†ã†ã³ã‚“ãã‚‡ã</td>\n<td>3</td>\n<td>é‚®å±€</td>\n</tr>\n<tr>\n<td>éŠ€è¡Œ</td>\n<td>ãã‚“ã“ã†</td>\n<td>0</td>\n<td>é“¶è¡Œ</td>\n</tr>\n<tr>\n<td>å›³æ›¸é¤¨</td>\n<td>ã¨ã—ã‚‡ã‹ã‚“</td>\n<td>2</td>\n<td>å›¾ä¹¦é¦†</td>\n</tr>\n<tr>\n<td>ãƒãƒ³ã‚·ãƒ§ãƒ³</td>\n<td>ã¾ã‚“ã—ã‚‡ã‚“</td>\n<td>1</td>\n<td>ï¼ˆé«˜çº§ï¼‰å…¬å¯“</td>\n</tr>\n<tr>\n<td>ãƒ›ãƒ†ãƒ«</td>\n<td>ã»ã¦ã‚‹</td>\n<td>1</td>\n<td>å®¾é¦†</td>\n</tr>\n<tr>\n<td>ã‚³ãƒ³ãƒ“ãƒ‹</td>\n<td>ã“ã‚“ã³ã«</td>\n<td>0</td>\n<td>ä¾¿åˆ©åº—</td>\n</tr>\n<tr>\n<td>å–«èŒ¶åº—</td>\n<td>ãã£ã•ã¦ã‚“</td>\n<td>0</td>\n<td>å’–å•¡é¦†</td>\n</tr>\n<tr>\n<td>ç—…é™¢</td>\n<td>ã³ã‚‡ã†ã„ã‚“</td>\n<td>0</td>\n<td>åŒ»é™¢</td>\n</tr>\n<tr>\n<td>æœ¬å±‹</td>\n<td>ã»ã‚“ã‚„</td>\n<td>1</td>\n<td>ä¹¦åº—</td>\n</tr>\n<tr>\n<td>ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³</td>\n<td>ã‚Œã™ã¨ã‚‰ã‚“</td>\n<td>1</td>\n<td>é¤é¦†ï¼Œè¥¿é¤æ¥¼</td>\n</tr>\n<tr>\n<td>ãƒ“ãƒ«</td>\n<td>ã³ã‚‹</td>\n<td>1</td>\n<td>å¤§æ¥¼ï¼Œå¤§å¦</td>\n</tr>\n<tr>\n<td>å»ºç‰©</td>\n<td>ãŸã¦ã‚‚ã®</td>\n<td>2</td>\n<td>å¤§æ¥¼ï¼Œå»ºç­‘ç‰©</td>\n</tr>\n<tr>\n<td>å£²ã‚Šå ´</td>\n<td>ã†ã‚Šã°</td>\n<td>0</td>\n<td>æŸœå°ï¼Œå‡ºæ‰‹å¤„</td>\n</tr>\n<tr>\n<td>ãƒˆã‚¤ãƒ¬</td>\n<td>ã¨ã„ã‚Œ</td>\n<td>1</td>\n<td>å•æ‰€</td>\n</tr>\n<tr>\n<td>å…¥ã‚Šå£</td>\n<td>ã„ã‚Šãã¡</td>\n<td>0</td>\n<td>å…¥å£</td>\n</tr>\n<tr>\n<td>äº‹å‹™æ‰€</td>\n<td>ã˜ã‚€ã—ã‚‡</td>\n<td>2</td>\n<td>äº‹åŠ¡æ‰€</td>\n</tr>\n<tr>\n<td>å—ä»˜</td>\n<td>ã†ã‘ã¤ã‘</td>\n<td>0</td>\n<td>æ¥å¾…å¤„</td>\n</tr>\n<tr>\n<td>ãƒãƒ¼ã‚²ãƒ³ä¼šå ´</td>\n<td>ã°ãƒ¼ã’ã‚“ã‹ã„ã˜ã‚‡ã†</td>\n<td>5</td>\n<td>é™ä»·å¤„ç†å¤§å–åœº</td>\n</tr>\n<tr>\n<td>ã‚¨ã‚¹ã‚«ãƒ¬ãƒ¼ã‚¿ãƒ¼</td>\n<td>ãˆã™ã‹ã‚Œãƒ¼ãŸãƒ¼</td>\n<td>4</td>\n<td>è‡ªåŠ¨æ‰¶æ¢¯</td>\n</tr>\n<tr>\n<td>æœ</td>\n<td>ãµã</td>\n<td>2</td>\n<td>è¡£æœ</td>\n</tr>\n<tr>\n<td>ã‚³ãƒ¼ãƒˆ</td>\n<td>ã“ãƒ¼ã¨</td>\n<td>1</td>\n<td>é£è¡£ï¼Œå¤§è¡£</td>\n</tr>\n<tr>\n<td>ãƒ‡ã‚¸ã‚«ãƒ¡</td>\n<td>ã§ã˜ã‹ã‚</td>\n<td>0</td>\n<td>æ•°ç ç›¸æœº</td>\n</tr>\n<tr>\n<td>å›½</td>\n<td>ãã«</td>\n<td>0</td>\n<td>å›½å®¶</td>\n</tr>\n<tr>\n<td>åœ°å›³</td>\n<td>ã¡ãš</td>\n<td>1</td>\n<td>åœ°å›¾</td>\n</tr>\n<tr>\n<td>éš£</td>\n<td>ã¨ãªã‚Š</td>\n<td>0</td>\n<td>æ—è¾¹</td>\n</tr>\n<tr>\n<td>å‘¨è¾º</td>\n<td>ã—ã‚…ã†ã¸ã‚“</td>\n<td>0</td>\n<td>é™„è¿‘ï¼Œå‘¨è¾¹</td>\n</tr>\n<tr>\n<td>ä»Šæ—¥</td>\n<td>ãã‚‡ã†</td>\n<td>1</td>\n<td>ä»Šå¤©</td>\n</tr>\n<tr>\n<td>æ°´æ›œæ—¥</td>\n<td>ã™ã„ã‚ˆã†ã³</td>\n<td>3</td>\n<td>æ˜ŸæœŸä¸‰</td>\n</tr>\n<tr>\n<td>æœ¨æ›œæ—¥</td>\n<td>ã‚‚ãã‚ˆã†ã³</td>\n<td>3</td>\n<td>æ˜ŸæœŸå››</td>\n</tr>\n<tr>\n<td>ã“ã“</td>\n<td>ã“ã“</td>\n<td>0</td>\n<td>è¿™é‡Œ</td>\n</tr>\n<tr>\n<td>ãã“</td>\n<td>ãã“</td>\n<td>0</td>\n<td>é‚£é‡Œ</td>\n</tr>\n<tr>\n<td>ã‚ãã“</td>\n<td>ã‚ãã“</td>\n<td>0</td>\n<td>å“ªé‡Œ</td>\n</tr>\n<tr>\n<td>ã“ã¡ã‚‰</td>\n<td>ã“ã¡ã‚‰</td>\n<td>0</td>\n<td>è¿™è¾¹</td>\n</tr>\n<tr>\n<td>ãã¡ã‚‰</td>\n<td>ãã¡ã‚‰</td>\n<td>0</td>\n<td>é‚£è¾¹</td>\n</tr>\n<tr>\n<td>ã‚ã¡ã‚‰</td>\n<td>ã‚ã¡ã‚‰</td>\n<td>0</td>\n<td>é‚£è¾¹</td>\n</tr>\n<tr>\n<td>ã©ã“</td>\n<td>ã©ã“</td>\n<td>1</td>\n<td>å“ªé‡Œ</td>\n</tr>\n<tr>\n<td>ã©ã¡ã‚‰</td>\n<td>ã©ã¡ã‚‰</td>\n<td>1</td>\n<td>å“ªè¾¹</td>\n</tr>\n<tr>\n<td>ã‚ã®ã†</td>\n<td>ã‚ã®ã†</td>\n<td>0</td>\n<td>è¯·é—®</td>\n</tr>\n<tr>\n<td>ä¸Šæµ·</td>\n<td>ã—ã‚ƒã‚“ã¯ã„</td>\n<td>1</td>\n<td>ä¸Šæµ·</td>\n</tr>\n<tr>\n<td>æ±äº¬</td>\n<td>ã¨ã†ãã‚‡ã†</td>\n<td>0</td>\n<td>ä¸œäº¬</td>\n</tr>\n</tbody>\n</table>\n<h5 id=\"è¯¾æ–‡-3\"><a class=\"anchor\" href=\"#è¯¾æ–‡-3\">#</a> è¯¾æ–‡</h5>\n<ol>\n<li>\n<p>è¯¾æ–‡ä¸€</p>\n<p>ã“ã“ã¯ã€€ãƒ‡ãƒ‘ãƒ¼ãƒˆã§ã™ã€‚</p>\n<p>é£Ÿå ‚ã¯ã€€ã§ãƒãƒ¼ãƒˆã® 7<ruby> éš<rp> (</rp><rt>ã‹ã„</rt><rp>)</rp></ruby> ã§ã™ã‹ã€‚</p>\n<p>ã‚ãã“ã‚‚ã€€ï¼ªï¼£ä¼ç”»ã®ãƒ“ãƒ«ã§ã™ã€‚</p>\n<p>ã‹ã°ã‚“å£²ã‚Šå ´ã¯ã€€1 éšã§ã™ã‹ã€2 éšã§ã™ã‹ã€‚</p>\n</li>\n<li>\n<p>è¯¾æ–‡äºŒ</p>\n<p>ãƒˆã‚¤ãƒ¬ã¯ã€€ã©ã“ã§ã™ã‹ã€‚</p>\n<p>ã‚ã¡ã‚‰ã§ã™ã€‚</p>\n<p>ã“ã“ã¯ã€€éƒµä¾¿å±€ã§ã™ã‹ã€éŠ€è¡Œã§ã™ã‹ã€‚</p>\n<p>éŠ€è¡Œã§ã™ã€‚</p>\n<p>ã“ã‚Œã¯ã€€ã„ãã‚‰ã§ã™ã‹ã€‚</p>\n<p>ãã‚Œã¯ã€€5800<ruby> å††<rp> (</rp><rt>ãˆã‚“</rt><rp>)</rp></ruby> ã§ã™ã€‚</p>\n<p>ã‚ã‚Œã¯ï¼Ÿ</p>\n<p>ã‚ã‚Œã‚‚ã€€5800 å††ã§ã™ã€‚</p>\n</li>\n<li>\n<p>è¯¾æ–‡ä¸‰</p>\n<p>ã“ã“ã¯ã€€ã‚³ãƒ³ãƒ“ãƒ‹ã§ã™ã€‚éš£ã¯ã€€å–«èŒ¶åº—ã§ã™ã€‚</p>\n<p>ã‚ã®å»ºç‰©ã¯ã€€ãƒ›ãƒ†ãƒ«ã§ã™ã‹ã€ãƒãƒ³ã‚·ãƒ§ãƒ³ã§ã™ã‹ã€‚</p>\n<p>ã‚ã®å»ºç‰©ã¯ã€€ä½•ã§ã™ã‹ã€‚</p>\n<p>ã‚ãã“ã‚‚ã€€ãƒãƒ³ã‚·ãƒ§ãƒ³ã§ã™ã€‚</p>\n<p>ãƒãƒ³ã‚·ãƒ§ãƒ³ã®éš£ã¯ï¼Ÿ</p>\n<p>ãƒãƒ³ã‚·ãƒ§ãƒ³ã®éš£ã¯ã€€ç—…é™¢ã§ã™ã€‚</p>\n<p>ã‚ã®ã†ã€æ±äº¬ã®åœ°å›³ã¯ã€€ã©ã“ã§ã™ã‹ã€‚</p>\n<p>åœ°å›³ã§ã™ã‹ã€‚ãã¡ã‚‰ã§ã™ã€‚</p>\n<p>ã„ãã‚‰ã§ã™ã‹ã€‚</p>\n<p>äº”ç™¾å††ã§ã™ã€‚</p>\n</li>\n</ol>\n<h5 id=\"è¯­æ³•-3\"><a class=\"anchor\" href=\"#è¯­æ³•-3\">#</a> è¯­æ³•</h5>\n<ol>\n<li>\n<p><code>ã“ã“</code>  ï¼  <code>ãã“</code>  ï¼  <code>ã‚ãã‚Œ</code>  ï¼ˆã“ã¡ã‚‰ï¼ãã¡ã‚‰ï¼ã‚ã¡ã‚‰ï¼‰ã€‚</p>\n<p>è¡¨ç¤ºåœºæ‰€æ—¶ï¼Œç”¨ã“ã“ï¼ãã“ï¼ã‚ãã‚Œã€‚æ‰€è¡¨ç¤ºçš„ä½ç½®å…³ç³»ä¸ã“ã‚Œï¼ãã‚Œï¼ã‚ã‚Œç›¸åŒã€‚</p>\n<p>ã“ã“ã¯ã€€ãƒ‡ãƒ‘ãƒ¼ãƒˆã§ã™ã€‚</p>\n<p>ãã“ã¯ã€€å›³æ›¸é¤¨ã§ã™ã€‚</p>\n<p>ã‚ãã“ã¯ã€€å…¥ã‚Šå£ã§ã™ã€‚</p>\n</li>\n<li>\n<p>åã¯ã€€åï¼ˆåœºæ‰€ï¼‰ã§ã™ã€‚</p>\n<p>è¡¨ç¤ºæŸä¸ªä¸œè¥¿åœ¨æŸä¸ªåœ°æ–¹ã€‚</p>\n<p>é£Ÿå ‚ã¯ã€€ãƒ‡ãƒ‘ãƒ¼ãƒˆã® 7 éšã§ã™ã€‚</p>\n<p>ãƒˆã‚¤ãƒ¬ã¯ã€€ã“ã“ã§ã™ã€‚</p>\n<p>å°é‡ã•ã‚“ã¯ã€€äº‹å‹™æ‰€ã®ï¼’éšã§ã™ã€‚</p>\n<p>ãŠæ‰‹æ´—ã„ã¯ã€€ã‚¹ãƒ¼ãƒ‘ãƒ¼ã®ï¼”éšã§ã™ã€‚</p>\n</li>\n<li>\n<p>ã¯ã€€ã©ã“ã§ã™ã‹ã€‚</p>\n<p>ã—ã¿ã¾ã›ã‚“ã€ABC å¤§å­¦ã¯ã€€ã©ã“ã§ã™ã‹ã€‚</p>\n</li>\n<li>\n<p>åã‚‚ã€€åã§ã™ã€‚</p>\n<p>åŠ©è¯  <code>ã‚‚</code>  åŸºæœ¬ç›¸å½“äºæ±‰è¯­çš„ â€œä¹Ÿâ€ã€‚</p>\n<p>ç§ã¯ã€€åŒ—äº¬å¤§å­¦ã®å­¦ç”Ÿã§ã™ã€‚</p>\n<p>ã‚ãªãŸã‚‚ã€€åŒ—äº¬å¤§å­¦ã®å­¦ç”Ÿã§ã™ã‹ã€‚ï¼ˆæ‚¨ä¹Ÿæ˜¯åŒ—äº¬å¤§å­¦çš„å­¦ç”Ÿå—ï¼Ÿï¼‰</p>\n</li>\n<li>\n<p>åã¯ã€€åã§ã™ã‹ã€åã§ã™ã‹ã€‚</p>\n<p>ç­”æ¡ˆæœ‰å¤šç§ï¼Œè€Œè¯¢é—®å…¶ä¸­ä¸€ç§æ—¶ï¼Œå¯ä»¥é‡å¤ä½¿ç”¨è°“è¯­  <code>ï½ã§ã™ã‹</code>  ã€‚</p>\n<p>æ—ã•ã‚“ã¯ã€€æ—¥æœ¬äººã§ã™ã‹ã€ä¸­å›½äººã§ã™ã‹ã€éŸ“å›½äººã§ã™ã‹ã€‚</p>\n</li>\n<li>\n<p>åã¯ã€€ã„ãã‚‰ã§ã™ã‹ã€‚</p>\n<p>â€¦â€¦ å¤šå°‘é’±ï¼Ÿ</p>\n<p>ã“ã‚Œã¯ã€€ã„ãã‚‰ã§ã™ã‹ã€‚</p>\n<p>ã“ã®ã‚«ãƒ¡ãƒ©ã¯ã€€ã„ãã‚‰ã§ã™ã‹ã€‚</p>\n</li>\n</ol>\n<h5 id=\"è¡¥å……-2\"><a class=\"anchor\" href=\"#è¡¥å……-2\">#</a> è¡¥å……</h5>\n<ol>\n<li>\n<p>1 éšï¼ˆã„ã£ã‹ã„ï¼‰</p>\n</li>\n<li>\n<p>çœç•¥</p>\n<p>ã“ã‚Œã¯ã€€ã„ãã‚‰ã§ã™ã‹ã€‚ãã‚Œã¯ï¼Ÿã‚ã‚Œã¯ï¼Ÿï¼ˆè¿™ä¸ªå¤šå°‘é’±ï¼Œé‚£ä¸ªå‘¢ï¼Ÿé‚£ä¸ªå‘¢ï¼Ÿï¼‰</p>\n</li>\n<li>\n<p>ç¤¼è²Œ</p>\n<p>ã©ã¡ã‚‰ã•ã¾ã§ã™ã‹ã€‚ï¼ˆæ‚¨æ˜¯å“ªä¸€ä½ï¼Ÿï¼ˆæ‰“ç”µè¯æ—¶ï¼‰ï¼‰</p>\n</li>\n</ol>\n<h4 id=\"ç¬¬å››è¯¾éƒ¨å±‹ã«-æœºã¨-ã„ã™ãŒ-ã‚ã‚Šã¾ã™\"><a class=\"anchor\" href=\"#ç¬¬å››è¯¾éƒ¨å±‹ã«-æœºã¨-ã„ã™ãŒ-ã‚ã‚Šã¾ã™\">#</a> ç¬¬å››è¯¾ï¼šéƒ¨å±‹ã«ã€€æœºã¨ã€€ã„ã™ãŒã€€ã‚ã‚Šã¾ã™</h4>\n<h5 id=\"å•è¯-4\"><a class=\"anchor\" href=\"#å•è¯-4\">#</a> å•è¯</h5>\n<table>\n<thead>\n<tr>\n<th>å•è¯</th>\n<th>å‡å</th>\n<th>å£°è°ƒ</th>\n<th>è¯ä¹‰</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>éƒ¨å±‹</td>\n<td>ã¸ã‚„</td>\n<td>ï¼’</td>\n<td>æˆ¿é—´ï¼Œå±‹å­</td>\n</tr>\n<tr>\n<td>åº­</td>\n<td>ã«ã‚</td>\n<td>ï¼</td>\n<td>é™¢å­</td>\n</tr>\n<tr>\n<td>å®¶</td>\n<td>ã„ãˆ</td>\n<td>2</td>\n<td>å®¶</td>\n</tr>\n<tr>\n<td>å±…é–“</td>\n<td>ã„ã¾</td>\n<td>2</td>\n<td>èµ·å±…å®¤</td>\n</tr>\n<tr>\n<td>å†·è”µåº«</td>\n<td>ã‚Œã„ãã†ã“</td>\n<td>3</td>\n<td>å†°ç®±</td>\n</tr>\n<tr>\n<td>å£</td>\n<td>ã‹ã¹</td>\n<td>0</td>\n<td>å¢™å£</td>\n</tr>\n<tr>\n<td>ã‚¹ã‚¤ãƒƒãƒ</td>\n<td>ã™ã„ã£ã¡</td>\n<td>2</td>\n<td>å¼€å…³</td>\n</tr>\n<tr>\n<td>æœ¬æ£š</td>\n<td>ã»ã‚“ã ãª</td>\n<td>1</td>\n<td>ä¹¦æ¶</td>\n</tr>\n<tr>\n<td>ãƒ™ãƒƒãƒ‰</td>\n<td>ã¹ã£ã©</td>\n<td>1</td>\n<td>åºŠ</td>\n</tr>\n<tr>\n<td>çŒ«</td>\n<td>ã­ã“</td>\n<td>1</td>\n<td>çŒ«</td>\n</tr>\n<tr>\n<td>çŠ¬</td>\n<td>ã„ã¬</td>\n<td>2</td>\n<td>ç‹—</td>\n</tr>\n<tr>\n<td>ç®±</td>\n<td>ã¯ã“</td>\n<td>0</td>\n<td>ç›’å­ï¼Œç®±å­</td>\n</tr>\n<tr>\n<td>çœ¼é¡</td>\n<td>ã‚ãŒã­</td>\n<td>1</td>\n<td>çœ¼é•œ</td>\n</tr>\n<tr>\n<td>ãƒ“ãƒ‡ã‚ª</td>\n<td>ã³ã§ãŠ</td>\n<td>1</td>\n<td>å½•åƒæœº</td>\n</tr>\n<tr>\n<td>ã‚µãƒƒã‚«ãƒ¼ãƒœãƒ¼ãƒ«</td>\n<td>ã•ã£ã‹ãƒ¼ã¼ãƒ¼ã‚‹</td>\n<td>5</td>\n<td>è¶³çƒ</td>\n</tr>\n<tr>\n<td>ãƒ“ãƒ¼ãƒ«</td>\n<td>ã³ãƒ¼ã‚‹</td>\n<td>1</td>\n<td>å•¤é…’</td>\n</tr>\n<tr>\n<td>ã‚¦ã‚¤ã‚¹ã‚­ãƒ¼</td>\n<td>ã†ã„ã™ããƒ¼</td>\n<td>3</td>\n<td>å¨å£«å¿Œ</td>\n</tr>\n<tr>\n<td>å­ä¾›</td>\n<td>ã“ã©ã‚‚</td>\n<td>0</td>\n<td>å­©å­ï¼Œå°å­©</td>\n</tr>\n<tr>\n<td>å…„å¼Ÿ</td>\n<td>ãã‚‡ã†ã ã„</td>\n<td>1</td>\n<td>å…„å¼Ÿå§å¦¹</td>\n</tr>\n<tr>\n<td>ä¸¡è¦ª</td>\n<td>ã‚Šã‚‡ã†ã—ã‚“</td>\n<td>1</td>\n<td>çˆ¶æ¯ï¼ŒåŒäº²</td>\n</tr>\n<tr>\n<td>å¦¹</td>\n<td>ã„ã‚‚ã†ã¨</td>\n<td>4</td>\n<td>å¦¹å¦¹</td>\n</tr>\n<tr>\n<td>ç”·</td>\n<td>ãŠã¨ã“</td>\n<td>3</td>\n<td>ç”·</td>\n</tr>\n<tr>\n<td>å¥³</td>\n<td>ãŠã‚“ãª</td>\n<td>3</td>\n<td>å¥³</td>\n</tr>\n<tr>\n<td>ç”Ÿå¾’</td>\n<td>ã›ã„ã¨</td>\n<td>1</td>\n<td>å­¦ç”Ÿ</td>\n</tr>\n<tr>\n<td>ä¸Š</td>\n<td>ã†ãˆ</td>\n<td>0</td>\n<td>ä¸Šé¢</td>\n</tr>\n<tr>\n<td>å¤–</td>\n<td>ãã¨</td>\n<td>1</td>\n<td>å¤–é¢</td>\n</tr>\n<tr>\n<td>ä¸­</td>\n<td>ãªã‹</td>\n<td>1</td>\n<td>é‡Œé¢ï¼Œå†…éƒ¨ï¼Œä¸­é—´</td>\n</tr>\n<tr>\n<td>ä¸‹</td>\n<td>ã—ãŸ</td>\n<td>0</td>\n<td>ä¸‹é¢</td>\n</tr>\n<tr>\n<td>å‰</td>\n<td>ã¾ãˆ</td>\n<td>1</td>\n<td>å‰ï¼Œå‰é¢</td>\n</tr>\n<tr>\n<td>å¾Œã‚</td>\n<td>ã†ã—ã‚</td>\n<td>0</td>\n<td>åï¼Œåé¢</td>\n</tr>\n<tr>\n<td>è¿‘ã</td>\n<td>ã¡ã‹ã</td>\n<td>1</td>\n<td>é™„è¿‘</td>\n</tr>\n<tr>\n<td>å ´æ‰€</td>\n<td>ã°ã—ã‚‡</td>\n<td>0</td>\n<td>æ‰€åœ¨åœ°ï¼Œåœ°æ–¹ï¼Œåœºæ‰€</td>\n</tr>\n<tr>\n<td>æ•™å®¤</td>\n<td>ãã‚‡ã†ã—ã¤</td>\n<td>0</td>\n<td>æ•™å¸ˆ</td>\n</tr>\n<tr>\n<td>ä¼šè­°å®¤</td>\n<td>ã‹ã„ãã—ã¤</td>\n<td>3</td>\n<td>ä¼šè®®å®¤</td>\n</tr>\n<tr>\n<td>å›³æ›¸å®¤</td>\n<td>ã¨ã—ã‚‡ã—ã¤</td>\n<td>2</td>\n<td>å›¾ä¹¦å®¤</td>\n</tr>\n<tr>\n<td>å…¬åœ’</td>\n<td>ã“ã†ãˆã‚“</td>\n<td>0</td>\n<td>å…¬å›­</td>\n</tr>\n<tr>\n<td>èŠ±å±‹</td>\n<td>ã¯ãªã‚„</td>\n<td>2</td>\n<td>èŠ±åº—</td>\n</tr>\n<tr>\n<td>å£²åº—</td>\n<td>ã°ã„ã¦ã‚“</td>\n<td>0</td>\n<td>å°å–éƒ¨</td>\n</tr>\n<tr>\n<td>é§…</td>\n<td>ãˆã</td>\n<td>1</td>\n<td>è½¦ç«™</td>\n</tr>\n<tr>\n<td>åœ°ä¸‹é‰„</td>\n<td>ã¡ã‹ã¦ã¤</td>\n<td>0</td>\n<td>åœ°é“</td>\n</tr>\n<tr>\n<td>æœ¨</td>\n<td>ã</td>\n<td>1</td>\n<td>æ ‘</td>\n</tr>\n<tr>\n<td>ä¸€äººæš®ã‚‰ã—</td>\n<td>ã²ã¨ã‚Šãã‚‰ã—</td>\n<td>4</td>\n<td>å•èº«ç”Ÿæ´»</td>\n</tr>\n<tr>\n<td>ã‚ã‚Šã¾ã™</td>\n<td>ã‚ã‚Šã¾ã™</td>\n<td>3</td>\n<td>æœ‰ï¼Œåœ¨ï¼ˆéæ„å¿—è€…ï¼‰</td>\n</tr>\n<tr>\n<td>ã„ã¾ã™</td>\n<td>ã„ã¾ã™</td>\n<td>2</td>\n<td>æœ‰ï¼Œåœ¨ï¼ˆå…·æ„å¿—è€…ï¼‰</td>\n</tr>\n<tr>\n<td>ãˆãˆã¨</td>\n<td>ãˆãˆã¨</td>\n<td>0</td>\n<td>å•Šï¼Œå—¯</td>\n</tr>\n<tr>\n<td>æ¨ªæµœ</td>\n<td>ã‚ˆã“ã¯ã¾</td>\n<td>0</td>\n<td>æ¨ªæ»¨</td>\n</tr>\n<tr>\n<td>åå¤å±‹</td>\n<td>ãªã”ã‚„</td>\n<td>1</td>\n<td>åå¤å±‹</td>\n</tr>\n<tr>\n<td>å¤§é˜ª</td>\n<td>ãŠãŠã•ã‹</td>\n<td>0</td>\n<td>å¤§é˜ª</td>\n</tr>\n</tbody>\n</table>\n<h5 id=\"è¯¾æ–‡-4\"><a class=\"anchor\" href=\"#è¯¾æ–‡-4\">#</a> è¯¾æ–‡</h5>\n<ol>\n<li>\n<p>è¯¾æ–‡ä¸€</p>\n<p><ruby>éƒ¨å±‹<rp> (</rp><rt>ã¸ã‚„</rt><rp>)</rp></ruby> ã«ã€€<ruby>æœº<rp> (</rp><rt>ã¤ããˆ</rt><rp>)</rp></ruby> ã¨ã„ã™ãŒã‚ã‚Šã¾ã™ã€‚</p>\n<p>æœºã®<ruby>ä¸Š<rp> (</rp><rt>ã†ãˆ</rt><rp>)</rp></ruby> ã«ã€€<ruby>çŒ«<rp> (</rp><rt>ã­ã“</rt><rp>)</rp></ruby> ãŒã„ã¾ã™ã€‚</p>\n<p><ruby>å£²åº—<rp> (</rp><rt>ã°ã„ã¦ã‚“</rt><rp>)</rp></ruby> ã¯ã€€é§…ã®å¤–ã«ã‚ã‚Šã¾ã™ã€‚</p>\n<p>å‰ç”°ã•ã‚“ã¯ã€€<ruby>åº­<rp> (</rp><rt>ã«ã‚</rt><rp>)</rp></ruby> ã«ã„ã¾ã™ã€‚</p>\n</li>\n<li>\n<p>è¯¾æ–‡äºŒ</p>\n<p>ãã®ã€€ã¯ã“ã®ã€€ä¸­ã«ã€€ä½•ãŒã€€ã‚ã‚Šã¾ã™ã‹ã€‚</p>\n<p>æ™‚è¨ˆã¨ã€€çœ¼é¡ãŒã€€ã„ã¾ã™ã‹ã€‚</p>\n<p>éƒ¨å±‹ã«ã€€èª°ãŒã„ã¾ã™ã‹ã€‚</p>\n<p>èª°ã‚‚ã€€ã„ã¾ã›ã‚“ã€‚</p>\n<p>å°é‡ã•ã‚“ã®ã€€å®¶ã¯ã€€ã©ã“ã«ã€€ã‚ã‚Šã¾ã›ã‚“ã€‚</p>\n<p>æ¨ªæµœã«ã€€ã‚ã‚Šã¾ã™ã€‚</p>\n<p>ã‚ãã“ã«ã€€çŠ¬ãŒã€€ã„ã¾ã™ã¬ã€‚</p>\n<p>ãˆãˆã€ç§ã®ã€€ã„ã¬ã§ã™ã€‚</p>\n</li>\n<li>\n<p>è¯¾æ–‡ä¸‰</p>\n<p>æï¼šå°é‡ã•ã‚“ã€ä¼šç¤¾ã¯ã€€ã©ã“ã«ã‚ã‚Šã¾ã™ã‹ã€‚</p>\n<p>å°é‡ï¼šãˆãˆã¨ã€ã“ã“ã§ã™ã€‚</p>\n<p>æï¼šè¿‘ãã«ã€€é§…ãŒã‚ã‚Šã¾ã™ã‹ã€‚</p>\n<p>å°é‡ï¼šãˆãˆã€‚ï¼ªï¼²ã¨åœ°ä¸‹é‰„ã®é§…ãŒã‚ã‚Šã¾ã™ã€‚ï¼ªï¼²ã®é§…ã¯ã€€ã“ã“ã§ã™ã€‚</p>\n<p>æï¼šåœ°ä¸‹é‰„ã®é§…ã¯ã€€ã“ã“ã§ã™ã­ã€‚</p>\n<p>å°é‡ï¼šãˆãˆã€ãã†ã§ã™ã€‚ï¼ªï¼²ã®é§…ã®éš£ã«ã€€åœ°ä¸‹é‰„ã®é§…ãŒã€€ã‚ã‚Šã¾ã™ã€‚</p>\n</li>\n<li>\n<p>è¯¾æ–‡å››</p>\n<p>æï¼šå°é‡ã•ã‚“ã®å®¶ã¯ã€€ã©ã¡ã‚‰ã§ã™ã‹ã€‚</p>\n<p>å°é‡ï¼šç§ã®å®¶ã¯ã€€æ¨ªæµœã§ã™ã€‚</p>\n<p>æï¼šã”å®¶æ—ã‚‚ã€€æ¨ªæµœã§ã™ã‹ã€‚</p>\n<p>å°é‡ï¼šã„ã„ãˆã€ç§ã¯ã€€ä¸€äººæš®ã‚‰ã—ã§ã™ã€‚</p>\n<p>æï¼šã”ä¸¡è¦ªã¯ã€€ã©ã¡ã‚‰ã§ã™ã‹ã€‚</p>\n<p>å°é‡ï¼šä¸¡è¦ªã¯ã€€åå¤å±‹ã«ã„ã¾ã™ã€‚</p>\n<p>æï¼šã”å…„å¼Ÿã¯ï¼Ÿ</p>\n<p>å°é‡ï¼šå¤§é˜ªã«ã€€å¦¹ãŒã„ã¾ã™ã€‚</p>\n</li>\n</ol>\n<h5 id=\"è¯­æ³•-4\"><a class=\"anchor\" href=\"#è¯­æ³•-4\">#</a> è¯­æ³•</h5>\n<ol>\n<li>\n<p>ã‚ã‚Šã¾ã™ã€€ã„ã¾ã™</p>\n<ul>\n<li>\n<p><code>ã‚ã‚Šã¾ã™</code>  ç”¨äºèŠ±ã€è‰æ¡Œå­ç­‰ä¸å…·æœ‰æ„å¿—çš„äº‹ç‰©ã€‚</p>\n<p>åã€Œå ´æ‰€ã€ã«ã€€åã€Œç‰©ã€ãŒã€€ã‚ã‚Šã¾ã™ã€‚ï¼ˆæŸåœ°æœ‰æŸç‰©ï¼‰</p>\n<p>éƒ¨å±‹ã«ã€€æœºãŒã€€ã‚ã‚Šã¾ã™ã€‚</p>\n<p>ã“ã“ã¯ã€€æœ¬ãŒã€€ã‚ã‚Šã¾ã™ã€‚</p>\n<p>åº­ã«ã€€ä½•ãŒã€€ã‚ã‚Šã¾ã™ã‹ã€‚</p>\n</li>\n<li>\n<p><code>ã„ã¾ã™</code>  ç”¨äºå…·æœ‰æ„å¿—çš„äººã€åŠ¨ç‰©ã€æ˜†è™«ç­‰ã€‚</p>\n<p>åã€Œå ´æ‰€ã€ã«ã€€åã€Œäººã€ãŒã€€ã„ã¾ã™ã€‚</p>\n<p>éƒ¨å±‹ã«ã€€çŒ«ãŒã„ã¾ã™ã€‚</p>\n<p>ã‚ãã“ã«ã€€èª°ã‹ã„ã¾ã™ã‹ã€‚</p>\n</li>\n<li>\n<p>æœ¬ã¯ã€€ã“ã“ã«ã€€ã‚ã‚Šã¾ã™ã€‚</p>\n<p>åã€Œç‰©ã€ã¯ã€€åã€Œå ´æ‰€ã€ã«ã€€ã‚ã‚Šã¾ã™ã€‚</p>\n</li>\n<li>\n<p>çŒ«ã¯ã€€éƒ¨å±‹ã«ã€€ã„ã¾ã™ã€‚</p>\n<p>åã€Œäººã€ã¯ã€€åã€Œå ´æ‰€ã€ã«ã€€ã„ã¾ã™ã€‚</p>\n</li>\n</ul>\n</li>\n<li>\n<p>åã€€ã¨ã€€å</p>\n<p>ç»„è¯  <code>ã¨</code>  åŠ åœ¨ä¸¤ä¸ªåè¯ä¹‹é—´è¡¨ç¤ºå¹¶åˆ—ï¼Œç›¸å½“äºæ±‰è¯­ä¸­çš„ â€œå’Œâ€ã€‚</p>\n</li>\n<li>\n<p>ä¸Šï¼ä¸‹ï¼å‰ï¼å¾Œã‚ï¼éš£ï¼ä¸­ï¼å¤–</p>\n<p>åè¯ï¼‹ã®ï¼‹æ–¹ä½ï¼Œè¡¨ç¤ºå…·ä½“ä½ç½®ã€‚</p>\n<p>å¤§å­¸ã¯ã€€éƒµä¾¿å±€ã®å‰ã«ã‚ã‚Šã¾ã™ã€‚</p>\n</li>\n<li>\n<p>ã­</p>\n<p>å½“è¯´è¯äººå°±æŸäº‹å¾æ±‚å¬è¯äººåŒæ„æ—¶ï¼Œå¥å°¾ç”¨åŠ¨è¯  <code>ã‚Œ</code>  ï¼Œè¯»å‡è°ƒï¼ˆå¥³ç”Ÿç”¨å¾—è¾ƒå¤šï¼‰ï¼Œæ²¡æœ‰å®é™…çš„æ„æ€ã€‚</p>\n</li>\n<li>\n<p>ç–‘é—®è¯ + ã‚‚ + åŠ¨è¯ï¼ˆè¡¨ç¤ºå¦å®šï¼‰</p>\n<p>ã„ã¾ã™ã€€ãƒ¼ã€€ã„ã¾ã›ã‚“</p>\n<p>ã‚ã‚Šã¾ã™ã€€ãƒ¼ã€€ã‚ã‚Šã¾ã›ã‚“</p>\n<p>æœºã®ã«ã€€ä½•ã‚‚ã‚ã‚Šã¾ã›ã‚“ã€‚ï¼ˆæ¡Œå­ä¸Šä»€ä¹ˆä¹Ÿæ²¡æœ‰ï¼‰</p>\n</li>\n</ol>\n<h5 id=\"è¡¥å……-3\"><a class=\"anchor\" href=\"#è¡¥å……-3\">#</a> è¡¥å……</h5>\n<ol>\n<li>\n<p>ã”å®¶æ—ã€ã”å…„å¼Ÿã€ã”ä¸¡è¦ª</p>\n<p>æ­¤å¤„çš„  <code>ã”</code>  åŠ åœ¨ç§°å‘¼å¯¹æ–¹äº²äººä¹‹å‰ï¼Œè¡¨ç¤ºå°Šæ•¬ã€‚</p>\n</li>\n<li>\n<p>å…„å¼Ÿ</p>\n<p>æ—¥æ–‡ä¸­çš„  <code>å…„å¼Ÿ</code>  æ—¢å¯ä»¥è¡¨ç¤ºç”·æ€§ä¸ç”·æ€§ä¹‹é—´ï¼Œä¹Ÿå¯ä»¥è¡¨ç¤ºå…„å¦¹æˆ–å§Šå¦¹ä¹‹é—´ã€‚</p>\n</li>\n<li>\n<p>ä¸€äººæš®ã‚‰ã—</p>\n<p>ç‹¬è‡ªå±…ä½ï¼Œä¸€ä¸ªäººç”Ÿæ´»ã€‚</p>\n</li>\n</ol>\n<h3 id=\"å‚è€ƒ\"><a class=\"anchor\" href=\"#å‚è€ƒ\">#</a> å‚è€ƒ</h3>\n<ul>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuYmlsaWJpbGkuY29tL3ZpZGVvL0JWMUJwNHkxRDc0Nw==\">https://www.bilibili.com/video/BV1Bp4y1D747</span></li>\n<li>ã€Šä¸­æ—¥äº¤æµæ ‡å‡†æ—¥æœ¬è¯­åˆçº§ã€‹ï¼š <span class=\"exturl\" data-url=\"aHR0cDovL3Byb2R1Y3QuZGFuZ2RhbmcuY29tLzIzNTMyOTUxLmh0bWw=\">è´­ä¹°é“¾æ¥</span></li>\n</ul>\n",
            "tags": [
                "è¯­è¨€å­¦ä¹ ",
                "æ—¥è¯­",
                "æ¨™æº–æ—¥æœ¬èªå…¥é–€",
                "æ—¥æœ¬èª"
            ]
        },
        {
            "id": "https://www.chinmoku.cc/computer-science/java-learning-path/6-extension/quartz-tutorial/",
            "url": "https://www.chinmoku.cc/computer-science/java-learning-path/6-extension/quartz-tutorial/",
            "title": "Quartz å¿«é€Ÿå…¥é—¨åŠå¸¸è§„ä½¿ç”¨",
            "date_published": "2020-12-21T06:21:49.000Z",
            "content_html": "<h3 id=\"quartz-ç®€ä»‹\"><a class=\"anchor\" href=\"#quartz-ç®€ä»‹\">#</a> Quartz ç®€ä»‹</h3>\n<p>Quartz æ˜¯ä¸€ä¸ªå®Œå…¨ç”± Java ç¼–å†™çš„å¼€æºä½œä¸šè°ƒåº¦æ¡†æ¶ï¼Œä¸ºåœ¨ Java åº”ç”¨ç¨‹åºä¸­è¿›è¡Œä½œä¸šè°ƒåº¦æä¾›äº†ç®€å•å´å¼ºå¤§çš„æœºåˆ¶ã€‚</p>\n<p>Quartz å¯ä»¥ä¸ J2EE ä¸ J2SE åº”ç”¨ç¨‹åºç›¸ç»“åˆä¹Ÿå¯ä»¥å•ç‹¬ä½¿ç”¨ã€‚</p>\n<p>Quartz å…è®¸ç¨‹åºå¼€å‘äººå‘˜æ ¹æ®æ—¶é—´çš„é—´éš”æ¥è°ƒåº¦ä½œä¸šã€‚</p>\n<p>Quartz å®ç°äº†ä½œä¸šå’Œè§¦å‘å™¨çš„å¤šå¯¹å¤šçš„å…³ç³»ï¼Œè¿˜èƒ½æŠŠå¤šä¸ªä½œä¸šä¸ä¸åŒçš„è§¦å‘å™¨å…³è”ã€‚</p>\n<h3 id=\"æ ¸å¿ƒæ¦‚å¿µ\"><a class=\"anchor\" href=\"#æ ¸å¿ƒæ¦‚å¿µ\">#</a> æ ¸å¿ƒæ¦‚å¿µ</h3>\n<ul>\n<li>\n<p><strong>Job</strong> è¡¨ç¤ºä¸€ä¸ªå·¥ä½œï¼Œè¦æ‰§è¡Œçš„å…·ä½“å†…å®¹ã€‚æ­¤æ¥å£ä¸­åªæœ‰ä¸€ä¸ªæ–¹æ³•ã€‚æ¯ä¸€ä¸ª job ç±»éƒ½å¿…é¡»å®ç°è¯¥æ¥å£ã€‚</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// com.quartz.job</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">void</span> <span class=\"token function\">execute</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">JobExecutionContext</span> context<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure></li>\n<li>\n<p><strong>JobDetail</strong> è¡¨ç¤ºä¸€ä¸ªå…·ä½“çš„å¯æ‰§è¡Œçš„è°ƒåº¦ç¨‹åºï¼ŒJob æ˜¯è¿™ä¸ªå¯æ‰§è¡Œç¨‹è°ƒåº¦ç¨‹åºæ‰€è¦æ‰§è¡Œçš„å†…å®¹ï¼Œå¦å¤– JobDetail è¿˜åŒ…å«äº†è¿™ä¸ªä»»åŠ¡è°ƒåº¦çš„æ–¹æ¡ˆå’Œç­–ç•¥ã€‚</p>\n</li>\n<li>\n<p><strong>Trigger</strong> è§¦å‘å™¨ï¼Œä»£è¡¨ä¸€ä¸ªè°ƒåº¦å‚æ•°çš„é…ç½®ï¼Œå®ƒä¸»è¦åŒ…å«ä¸¤ç§è§¦å‘å™¨ï¼š  <code>SimpleTrigger</code>  ã€  <code>CronTrigger</code>  ã€‚</p>\n</li>\n<li>\n<p><strong>Scheduler</strong> ä»£è¡¨ä¸€ä¸ªè°ƒåº¦å®¹å™¨ï¼Œä¸€ä¸ªè°ƒåº¦å®¹å™¨ä¸­å¯ä»¥æ³¨å†Œå¤šä¸ª JobDetail å’Œ Triggerã€‚å½“ Trigger ä¸ JobDetail ç»„åˆï¼Œå°±å¯ä»¥è¢« Scheduler å®¹å™¨è°ƒåº¦äº†ã€‚</p>\n</li>\n</ul>\n<h3 id=\"è®¾è®¡æ¨¡å¼\"><a class=\"anchor\" href=\"#è®¾è®¡æ¨¡å¼\">#</a> è®¾è®¡æ¨¡å¼</h3>\n<ul>\n<li>Builder æ¨¡å¼</li>\n<li>Factory æ¨¡å¼</li>\n<li>ç»„ä»¶æ¨¡å¼</li>\n<li>é“¾å¼ç¼–ç¨‹</li>\n</ul>\n<h3 id=\"ä½“ç³»ç»“æ„\"><a class=\"anchor\" href=\"#ä½“ç³»ç»“æ„\">#</a> ä½“ç³»ç»“æ„</h3>\n<p><img data-src=\"https://img.xfc-exclave.com/2021/08/03/2dc42a40d6ada35c0cf808fc47e733ec1627952186.png\" alt=\"Quartzä½“ç³»ç»“æ„å›¾\" /></p>\n<h3 id=\"å¸¸ç”¨api\"><a class=\"anchor\" href=\"#å¸¸ç”¨api\">#</a> å¸¸ç”¨ API</h3>\n<ul>\n<li>\n<p>Scheduler æ˜¯ç”¨äºä¸è°ƒåº¦ç¨‹åºäº¤äº’çš„ä¸»ç¨‹åºæ¥å£ã€‚</p>\n<p>Scheduler è°ƒåº¦ç¨‹åº - ä»»åŠ¡æ‰§è¡Œè®¡åˆ’è¡¨ï¼Œåªæœ‰å®‰æ’è¿›æ‰§è¡Œè®¡åˆ’çš„ä»»åŠ¡ Jobï¼ˆé€šè¿‡ scheduler.schedulejob æ–¹æ³•å®‰æ’è¿›æ‰§è¡Œè®¡åˆ’ï¼‰ï¼Œå½“å®ƒé¢„å…ˆå®šä¹‰çš„æ‰§è¡Œæ—¶é—´åˆ°äº†ï¼ˆä»»åŠ¡è§¦å‘ triggerï¼‰ï¼Œè¯¥ä»»åŠ¡æ‰ä¼šæ‰§è¡Œã€‚</p>\n</li>\n<li>\n<p>Job æ˜¯æˆ‘ä»¬é¢„å…ˆå®šä¹‰å¸Œæœ›åœ¨æœªæ¥æ—¶é—´èƒ½è¢«è°ƒåº¦ç¨‹åºæ‰§è¡Œçš„ä»»åŠ¡ç±»ã€‚</p>\n</li>\n<li>\n<p>JobDetail ä½¿ç”¨ JobDetail æ¥å®šä¹‰ä»»åŠ¡çš„å®ä¾‹ï¼Œ JobDetail å®ä¾‹æ˜¯é€šè¿‡ JobBuilder ç±»åˆ›å»ºçš„ã€‚</p>\n</li>\n<li>\n<p>JobDataMap å¯ä»¥åŒ…å«ä¸é™é‡çš„ï¼ˆåºåˆ—åŒ–çš„ï¼‰æ•°æ®å¯¹è±¡ï¼Œåœ¨ job å®ä¾‹æ‰§è¡Œçš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å…¶ä¸­çš„æ•°æ®ï¼› JobDataMap æ˜¯ Java Map æ¥å£çš„ä¸€ä¸ªå®ç°ï¼Œå¹¶ä¸”é¢å¤–å¢åŠ äº†ä¸€äº›ä¾¿äºå­˜å–åŸºæœ¬ç±»å‹çš„æ•°æ®çš„æ–¹æ³•ã€‚</p>\n</li>\n<li>\n<p>Trigger è§¦å‘å™¨ï¼ŒTrigger å¯¹è±¡æ˜¯ç”¨æ¥è§¦å‘æ‰§è¡Œ Job çš„ã€‚å½“è°ƒåº¦ä¸€ä¸ª job æ—¶ï¼Œæˆ‘ä»¬å®ä¾‹ä¸€ä¸ªè§¦å‘å™¨ï¼Œç„¶åè°ƒåº¦å®ƒçš„å±æ€§æ¥æ»¡è¶³ job æ‰§è¡Œçš„æ¡ä»¶ã€‚å®ƒè¡¨æ˜ä»»åŠ¡åœ¨ä»€ä¹ˆæ—¶å€™æ‰§è¡Œã€‚</p>\n</li>\n<li>\n<p>JobBuilder ç”¨äºå£°æ˜ä¸€ä¸ªä»»åŠ¡å®ä¾‹ï¼Œä¹Ÿå¯ä»¥ç”¨äºå®šä¹‰ä¸€ä¸ªè¯¥ä»»åŠ¡çš„è¯¦æƒ…ï¼Œæ¯”å¦‚ä»»åŠ¡åã€ç»„åç­‰ï¼Œè¿™ä¸ªå£°æ˜çš„å®ä¾‹å°†ä¼šä½œä¸ºä¸€ä¸ªä¸–çºªæ‰§è¡Œçš„ä»»åŠ¡ã€‚</p>\n</li>\n<li>\n<p>TriggerBuilder è§¦å‘å™¨åˆ›å»ºå™¨ï¼Œç”¨äºåˆ›å»ºè§¦å‘å™¨ trigger å®ä¾‹ã€‚</p>\n</li>\n<li>\n<p>JobListener ã€ TriggerListener ã€ SchedulerListener ç›‘å¬å™¨ï¼Œç”¨äºå¯¹ç»„ä»¶çš„ç›‘å¬ã€‚</p>\n</li>\n</ul>\n<h3 id=\"ä½¿ç”¨å®ä¾‹\"><a class=\"anchor\" href=\"#ä½¿ç”¨å®ä¾‹\">#</a> ä½¿ç”¨å®ä¾‹</h3>\n<h4 id=\"å‡†å¤‡å·¥ä½œ\"><a class=\"anchor\" href=\"#å‡†å¤‡å·¥ä½œ\">#</a> å‡†å¤‡å·¥ä½œ</h4>\n<p>åˆ›å»ºæµ‹è¯•é¡¹ç›®  <code>quartz-demo</code>  ï¼ˆæ­¤å¤„ç¤ºä¾‹ä½¿ç”¨ springboot è¿›è¡Œæ¼”ç¤ºï¼‰ã€‚</p>\n<h4 id=\"å®Œæ•´ä¾èµ–\"><a class=\"anchor\" href=\"#å®Œæ•´ä¾èµ–\">#</a> å®Œæ•´ä¾èµ–</h4>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token prolog\">&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>project</span> <span class=\"token attr-name\">xmlns</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://maven.apache.org/POM/4.0.0<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>xsi</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.w3.org/2001/XMLSchema-instance<span class=\"token punctuation\">\"</span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>         <span class=\"token attr-name\"><span class=\"token namespace\">xsi:</span>schemaLocation</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>modelVersion</span><span class=\"token punctuation\">></span></span>4.0.0<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>modelVersion</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>parent</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>org.springframework.boot<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>spring-boot-starter-parent<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>version</span><span class=\"token punctuation\">></span></span>2.3.3.RELEASE<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>version</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>relativePath</span><span class=\"token punctuation\">/></span></span> <span class=\"token comment\">&lt;!-- lookup parent from repository --></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>parent</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>com.xfc<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>quartz-demo<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>version</span><span class=\"token punctuation\">></span></span>0.0.1-SNAPSHOT<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>version</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>name</span><span class=\"token punctuation\">></span></span>quartz-demo<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>name</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>description</span><span class=\"token punctuation\">></span></span>Demo project for Spring Boot<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>description</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>properties</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>java.version</span><span class=\"token punctuation\">></span></span>1.8<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>java.version</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>properties</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependencies</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>org.springframework.boot<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>spring-boot-starter<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>org.quartz-scheduler<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>quartz<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>org.springframework.boot<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>spring-boot-starter-test<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>scope</span><span class=\"token punctuation\">></span></span>test<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>scope</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>exclusions</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>exclusion</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>                    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>org.junit.vintage<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>                    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>junit-vintage-engine<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>exclusion</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>exclusions</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependencies</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre></pre></td></tr><tr><td data-num=\"45\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>build</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>plugins</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>plugin</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre>                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>org.springframework.boot<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre>                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>spring-boot-maven-plugin<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>plugin</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"51\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>plugins</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"52\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>build</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"53\"></td><td><pre></pre></td></tr><tr><td data-num=\"54\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>project</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><h4 id=\"ä»»åŠ¡è°ƒåº¦å®ä¾‹\"><a class=\"anchor\" href=\"#ä»»åŠ¡è°ƒåº¦å®ä¾‹\">#</a> ä»»åŠ¡è°ƒåº¦å®ä¾‹</h4>\n<p>åˆ›å»ºä»»åŠ¡ç±»  <code>HelloJob.java</code></p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc<span class=\"token punctuation\">.</span>quartz<span class=\"token punctuation\">.</span>job</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>quartz<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Job</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>quartz<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">JobExecutionContext</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>quartz<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">JobKey</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>text<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">SimpleDateFormat</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Date</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">HelloJob</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">Job</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">execute</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">JobExecutionContext</span> context<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token class-name\">Date</span> date <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        <span class=\"token class-name\">SimpleDateFormat</span> sdf <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">SimpleDateFormat</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"yyyy-MM-dd hh:mm:ss\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        <span class=\"token class-name\">String</span> dateStr <span class=\"token operator\">=</span> sdf<span class=\"token punctuation\">.</span><span class=\"token function\">format</span><span class=\"token punctuation\">(</span>date<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Hello World, Current Time Is : \"</span> <span class=\"token operator\">+</span> dateStr<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"-----------------------job info-----------------------\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        <span class=\"token class-name\">JobKey</span> jobKey <span class=\"token operator\">=</span> context<span class=\"token punctuation\">.</span><span class=\"token function\">getJobDetail</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getKey</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"jobKey.getName() = \"</span> <span class=\"token operator\">+</span> jobKey<span class=\"token punctuation\">.</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"jobKey.getGroup() = \"</span> <span class=\"token operator\">+</span> jobKey<span class=\"token punctuation\">.</span><span class=\"token function\">getGroup</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ä»»åŠ¡ç±»åç§° = \"</span> <span class=\"token operator\">+</span> context<span class=\"token punctuation\">.</span><span class=\"token function\">getJobDetail</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getJobClass</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>åˆ›å»ºæµ‹è¯•ç±»  <code>SchedulerTest.java</code></p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc<span class=\"token punctuation\">.</span>quartz<span class=\"token punctuation\">.</span>test</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc<span class=\"token punctuation\">.</span>quartz<span class=\"token punctuation\">.</span>job<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">HelloJob</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>quartz<span class=\"token punctuation\">.</span></span><span class=\"token operator\">*</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>quartz<span class=\"token punctuation\">.</span>impl<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">StdSchedulerFactory</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">SchedulerTest</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">SchedulerException</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token comment\">// 1. åˆ›å»ºè°ƒåº¦å™¨ï¼ˆSchedulerï¼‰ä»å·¥å‚ä¸­è·å–è°ƒåº¦å®ä¾‹ï¼ˆé»˜è®¤ï¼šå®ä¾‹åŒ– new StdSchedulerFactory ();ï¼‰</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token class-name\">Scheduler</span> scheduler <span class=\"token operator\">=</span> <span class=\"token class-name\">StdSchedulerFactory</span><span class=\"token punctuation\">.</span><span class=\"token function\">getDefaultScheduler</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token comment\">// 2. åˆ›å»ºä»»åŠ¡å®ä¾‹ï¼ˆJobDetailï¼‰</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token class-name\">JobDetail</span> jobDetail <span class=\"token operator\">=</span> <span class=\"token class-name\">JobBuilder</span><span class=\"token punctuation\">.</span><span class=\"token function\">newJob</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">HelloJob</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token comment\">// åŠ è½½ä»»åŠ¡ç±»</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>                <span class=\"token punctuation\">.</span><span class=\"token function\">withIdentity</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"job1\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"group1\"</span><span class=\"token punctuation\">)</span><span class=\"token comment\">// ä»»åŠ¡åç§°ï¼Œä»»åŠ¡ç»„å</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>                <span class=\"token punctuation\">.</span><span class=\"token function\">build</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        <span class=\"token comment\">// 3. åˆ›å»ºè§¦å‘å™¨ï¼ˆTrigger)</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        <span class=\"token class-name\">Trigger</span> trigger <span class=\"token operator\">=</span> <span class=\"token class-name\">TriggerBuilder</span><span class=\"token punctuation\">.</span><span class=\"token function\">newTrigger</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>                <span class=\"token punctuation\">.</span><span class=\"token function\">withIdentity</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"trigger1\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"group1\"</span><span class=\"token punctuation\">)</span><span class=\"token comment\">// è§¦å‘å™¨åç§°ï¼Œè§¦å‘å™¨ç»„å</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>                <span class=\"token punctuation\">.</span><span class=\"token function\">withSchedule</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">SimpleScheduleBuilder</span><span class=\"token punctuation\">.</span><span class=\"token function\">simpleSchedule</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">withIntervalInSeconds</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">withRepeatCount</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token comment\">// æ¯ 3 ç§’è°ƒç”¨ 1 æ¬¡ï¼Œå…± 5 æ¬¡</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>                <span class=\"token punctuation\">.</span><span class=\"token function\">build</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>        <span class=\"token comment\">// 4. è°ƒåº¦å™¨å…³è”ä»»åŠ¡å’Œè§¦å‘å™¨</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>        scheduler<span class=\"token punctuation\">.</span><span class=\"token function\">scheduleJob</span><span class=\"token punctuation\">(</span>jobDetail<span class=\"token punctuation\">,</span> trigger<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>        <span class=\"token comment\">// 5. å¯åŠ¨è°ƒåº¦å™¨</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>        scheduler<span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>è¿è¡Œ main æ–¹æ³•å¾—åˆ°å¦‚ä¸‹ç»“æœï¼š</p>\n<blockquote>\n<p>Hello World, Current Time Is : 2020-08-31 03:07:51</p>\n<p>Hello World, Current Time Is : 2020-08-31 03:07:54</p>\n<p>Hello World, Current Time Is : 2020-08-31 03:07:57</p>\n<p>Hello World, Current Time Is : 2020-08-31 03:08:00</p>\n<p>Hello World, Current Time Is : 2020-08-31 03:08:03</p>\n<p>Hello World, Current Time Is : 2020-08-31 03:08:06</p>\n</blockquote>\n<h4 id=\"job-jobdetail\"><a class=\"anchor\" href=\"#job-jobdetail\">#</a> Job &amp; JobDetail</h4>\n<ul>\n<li>Job å·¥ä½œä»»åŠ¡è°ƒåº¦çš„æ¥å£ï¼Œä»»åŠ¡ç±»éœ€è¦å®ç°è¯¥æ¥å£ï¼Œè¯¥æ¥å£ä¸­å®šä¹‰  <code>execute</code>  æ–¹æ³•ï¼Œç±»ä¼¼ JDK æä¾›çš„ TimeTask çš„ run æ–¹æ³•ã€‚</li>\n<li>Job å®ä¾‹åœ¨ Quartz ä¸­çš„ç”Ÿå‘½å‘¨æœŸï¼šæ¯æ¬¡è°ƒåº¦æ‰§è¡Œ Job æ—¶ï¼Œå®ƒåœ¨è°ƒåº¦ excute æ–¹æ³•å‰ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ Job å®ä¾‹ï¼Œå½“è°ƒåº¦å®Œæˆåï¼Œå…³è”çš„ Job å®ä¾‹ä¼šè¢«é‡Šæ”¾ï¼Œé‡Šæ”¾çš„å®ä¾‹ä¼šè¢«åƒåœ¾å›æ”¶æœºåˆ¶å›æ”¶ã€‚</li>\n<li>JobDetail ä¸º Job å®ä¾‹æä¾›äº†è®¸å¤šè®¾ç½®å±æ€§ï¼Œä»¥åŠ JobDetailMap çš„æˆå‘˜å˜é‡å±æ€§ï¼Œå®ƒç”¨æ¥å‚¨å­˜ç‰¹å®šçš„ job å®ä¾‹çš„çŠ¶æ€ä¿¡æ¯ï¼Œè°ƒåº¦å™¨éœ€è¦å€ŸåŠ© JobDetail å¯¹è±¡æ¥æ·»åŠ  job å®ä¾‹ã€‚</li>\n<li>jobDetail é‡è¦å±æ€§ï¼šnameã€groupã€jobClassã€jobDataMapã€‚</li>\n</ul>\n<h4 id=\"jobexcutioncontext\"><a class=\"anchor\" href=\"#jobexcutioncontext\">#</a> JobExcutionContext</h4>\n<ul>\n<li>å½“ Scheduler è°ƒç”¨ä¸€ä¸ª job ï¼Œå°±ä¼šå°† JobExcutionContext ä¼ é€’ç»™ Job çš„ excute () æ–¹æ³•ã€‚</li>\n<li>Job èƒ½é€šè¿‡ JobExcutionContext å¯¹è±¡è®¿é—®åˆ° Quartz è¿è¡Œæ—¶å€™çš„ç¯å¢ƒä»¥åŠ job æœ¬èº«çš„æ˜ç»†æ•°æ®ã€‚</li>\n</ul>\n<h4 id=\"jobdatamap\"><a class=\"anchor\" href=\"#jobdatamap\">#</a> JobDataMap</h4>\n<ol>\n<li>\n<p>ä½¿ç”¨ Map è·å–</p>\n<ul>\n<li>\n<p>JobDataMap å¯ä»¥ç”¨æ¥è£…è½½ä»»ä½•å¯åºåˆ—åŒ–çš„æ•°æ®å¯¹è±¡ï¼Œå½“ job å®ä¾‹å¯¹è±¡è¢«æ‰§è¡Œæ—¶è¿™äº›å‚æ•°å¯¹è±¡ä¼šä¼ é€’ç»™å®ƒã€‚</p>\n</li>\n<li>\n<p>JobDataMap å®ç°äº† JDK çš„ Map æ¥å£ï¼Œå¹¶ä¸”æ·»åŠ äº†éå¸¸æ–¹ä¾¿çš„æ–¹æ³•ç”¨æ¥å­˜å‚¨åŸºæœ¬æ•°æ®ç±»å‹ã€‚</p>\n<blockquote>\n<p>é€šè¿‡  <code>TriggerBuilder.newTrigger().usingJobData(&quot;key&quot;, &quot;value&quot;)</code>  åŠ  <code>JobBuilder.newJob(HelloJob.class).usingJobData(&quot;key&quot;, &quot;value&quot;)</code>  æ–¹å¼å¯ä»¥æ”¾å…¥è‡ªå®šä¹‰å‚æ•°å€¼ã€‚</p>\n<p>é€šè¿‡  <code>JobExecutionContext.getJobDetail().getJobDataMap()</code>  æ–¹æ³•å¯ä»¥è·å–åˆ° JobDetail ä¸­çš„ JobDataMap ä¿¡æ¯ã€‚</p>\n<p>åŒæ ·åœ°ï¼Œä¹Ÿå¯ä»¥é€šè¿‡  <code>JobExecutionContext.getTrigger().getJobDataMap()</code>  æ–¹æ³•è·å–åˆ° Trigger ä¸­çš„å‚æ•°å€¼ä¿¡æ¯ã€‚</p>\n</blockquote>\n</li>\n</ul>\n</li>\n<li>\n<p>Job å®ç°ç±»ä¸­æ·»åŠ  setter æ–¹æ³•å¯¹åº” JobDataMap çš„é”®å€¼ï¼ŒQuartz æ¡†æ¶é»˜è®¤çš„ JobFactory å®ç°ç±»åœ¨åˆå§‹åŒ– job å®ä¾‹å¯¹è±¡æ—¶ä¼šè‡ªåŠ¨åœ°è°ƒç”¨è¿™äº› setter æ–¹æ³•ã€‚</p>\n<blockquote>\n<p>æ³¨ï¼šå¦‚æœé‡åˆ°åŒåçš„ key å€¼ï¼ŒåŒåçš„å†…å®¹ä¼šè¢«åèµ‹å€¼è€…è¦†ç›–ã€‚</p>\n</blockquote>\n</li>\n</ol>\n<h4 id=\"æœ‰çŠ¶æ€çš„-job-å’Œæ— çŠ¶æ€çš„-job\"><a class=\"anchor\" href=\"#æœ‰çŠ¶æ€çš„-job-å’Œæ— çŠ¶æ€çš„-job\">#</a> æœ‰çŠ¶æ€çš„ Job å’Œæ— çŠ¶æ€çš„ Job</h4>\n<p>æœ‰çŠ¶æ€çš„ Job å¯ä»¥ç†è§£ä¸ºå¤šæ¬¡ Job è°ƒç”¨æœŸé—´å¯ä»¥æŒæœ‰ä¸€äº›çŠ¶æ€ä¿¡æ¯ï¼Œè¿™äº›çŠ¶æ€ä¿¡æ¯å­˜å‚¨åœ¨ JobDataMap ä¸­ï¼Œè€Œé»˜è®¤çš„æ— çŠ¶æ€ Job æ¯ä¸€æ¬¡è°ƒç”¨æ—¶éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ JobDataMap ã€‚</p>\n<p>ä¿®æ”¹ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc<span class=\"token punctuation\">.</span>quartz<span class=\"token punctuation\">.</span>job</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>quartz<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Job</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>quartz<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">JobExecutionContext</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>quartz<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">JobKey</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>quartz<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">PersistJobDataAfterExecution</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>text<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">SimpleDateFormat</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Date</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token annotation punctuation\">@PersistJobDataAfterExecution</span><span class=\"token comment\">// æœ‰çŠ¶æ€ jobï¼Œå¤šæ¬¡è°ƒç”¨ job æ—¶ï¼Œä¼šå¯¹ job è¿›è¡ŒæŒä¹…åŒ–ï¼Œå³åœ¨ä»¥ä¸‹ç¤ºä¾‹ä¸­ï¼Œå¸¦æœ‰æ­¤æ³¨è§£æ—¶ï¼Œkey1 å€¼åœ¨ä»»åŠ¡æ¯æ¬¡æ‰§è¡Œæ—¶éƒ½ä¼šæ›´æ–°</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">HelloJob</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">Job</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> key1<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> key2<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token comment\">// Quartz æ¡†æ¶ä½¿ç”¨ usingJobData () æ”¾ç½®å‚æ•°æ—¶ï¼Œä¼šé»˜è®¤è°ƒç”¨å¯¹åº”åŒåçš„ setter æ–¹æ³•</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">setKey1</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> key1<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>key1 <span class=\"token operator\">=</span> key1<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">setKey2</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> key2<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>key2 <span class=\"token operator\">=</span> key2<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>    <span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">execute</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">JobExecutionContext</span> context<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>        <span class=\"token class-name\">Date</span> date <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>        <span class=\"token class-name\">SimpleDateFormat</span> sdf <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">SimpleDateFormat</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"yyyy-MM-dd hh:mm:ss\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>        <span class=\"token class-name\">String</span> dateStr <span class=\"token operator\">=</span> sdf<span class=\"token punctuation\">.</span><span class=\"token function\">format</span><span class=\"token punctuation\">(</span>date<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Hello World, Current Time Is : \"</span> <span class=\"token operator\">+</span> dateStr<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"-----------------------job info-----------------------\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>        <span class=\"token class-name\">JobKey</span> jobKey <span class=\"token operator\">=</span> context<span class=\"token punctuation\">.</span><span class=\"token function\">getJobDetail</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getKey</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"jobKey.getName() = \"</span> <span class=\"token operator\">+</span> jobKey<span class=\"token punctuation\">.</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"jobKey.getGroup() = \"</span> <span class=\"token operator\">+</span> jobKey<span class=\"token punctuation\">.</span><span class=\"token function\">getGroup</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ä»»åŠ¡ç±»åç§° = \"</span> <span class=\"token operator\">+</span> context<span class=\"token punctuation\">.</span><span class=\"token function\">getJobDetail</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getJobClass</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"key1 = \"</span> <span class=\"token operator\">+</span> key1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"key2 = \"</span> <span class=\"token operator\">+</span> key2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>        <span class=\"token comment\">// ä¿®æ”¹å€¼å¹¶å­˜å‚¨åˆ° JobDataMap ä¸­</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>        context<span class=\"token punctuation\">.</span><span class=\"token function\">getJobDetail</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getJobDataMap</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">put</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"key1\"</span><span class=\"token punctuation\">,</span> key1 <span class=\"token operator\">+</span> <span class=\"token string\">\"_append_str\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc<span class=\"token punctuation\">.</span>quartz<span class=\"token punctuation\">.</span>test</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xfc<span class=\"token punctuation\">.</span>quartz<span class=\"token punctuation\">.</span>job<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">HelloJob</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>quartz<span class=\"token punctuation\">.</span></span><span class=\"token operator\">*</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>quartz<span class=\"token punctuation\">.</span>impl<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">StdSchedulerFactory</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">SchedulerTest</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">SchedulerException</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token comment\">// 1. åˆ›å»ºè°ƒåº¦å™¨ï¼ˆSchedulerï¼‰ä»å·¥å‚ä¸­è·å–è°ƒåº¦å®ä¾‹ï¼ˆé»˜è®¤ï¼šå®ä¾‹åŒ– new StdSchedulerFactory ();ï¼‰</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token class-name\">Scheduler</span> scheduler <span class=\"token operator\">=</span> <span class=\"token class-name\">StdSchedulerFactory</span><span class=\"token punctuation\">.</span><span class=\"token function\">getDefaultScheduler</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token comment\">// 2. åˆ›å»ºä»»åŠ¡å®ä¾‹ï¼ˆJobDetailï¼‰</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token class-name\">JobDetail</span> jobDetail <span class=\"token operator\">=</span> <span class=\"token class-name\">JobBuilder</span><span class=\"token punctuation\">.</span><span class=\"token function\">newJob</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">HelloJob</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token comment\">// åŠ è½½ä»»åŠ¡ç±»</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>                <span class=\"token punctuation\">.</span><span class=\"token function\">withIdentity</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"job1\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"group1\"</span><span class=\"token punctuation\">)</span><span class=\"token comment\">// ä»»åŠ¡åç§°ï¼Œä»»åŠ¡ç»„å</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>                <span class=\"token punctuation\">.</span><span class=\"token function\">usingJobData</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"key1\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"value1\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>                <span class=\"token punctuation\">.</span><span class=\"token function\">build</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        <span class=\"token comment\">// 3. åˆ›å»ºè§¦å‘å™¨ï¼ˆTrigger)</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>        <span class=\"token class-name\">Trigger</span> trigger <span class=\"token operator\">=</span> <span class=\"token class-name\">TriggerBuilder</span><span class=\"token punctuation\">.</span><span class=\"token function\">newTrigger</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>                <span class=\"token punctuation\">.</span><span class=\"token function\">withIdentity</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"trigger1\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"group1\"</span><span class=\"token punctuation\">)</span><span class=\"token comment\">// è§¦å‘å™¨åç§°ï¼Œè§¦å‘å™¨ç»„å</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>                <span class=\"token punctuation\">.</span><span class=\"token function\">withSchedule</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">SimpleScheduleBuilder</span><span class=\"token punctuation\">.</span><span class=\"token function\">simpleSchedule</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">withIntervalInSeconds</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">withRepeatCount</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token comment\">// æ¯ 3 ç§’è°ƒç”¨ 1 æ¬¡ï¼Œå…± 5 æ¬¡</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>                <span class=\"token punctuation\">.</span><span class=\"token function\">usingJobData</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"key2\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"value2\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>                <span class=\"token punctuation\">.</span><span class=\"token function\">build</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>        <span class=\"token comment\">// 4. è°ƒåº¦å™¨å…³è”ä»»åŠ¡å’Œè§¦å‘å™¨</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>        scheduler<span class=\"token punctuation\">.</span><span class=\"token function\">scheduleJob</span><span class=\"token punctuation\">(</span>jobDetail<span class=\"token punctuation\">,</span> trigger<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>        <span class=\"token comment\">// 5. å¯åŠ¨è°ƒåº¦å™¨</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>        scheduler<span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h4 id=\"trigger\"><a class=\"anchor\" href=\"#trigger\">#</a> Trigger</h4>\n<p>Quartz æœ‰ä¸€äº›ä¸åŒçš„è§¦å‘å™¨ï¼Œå¸¸ç”¨æœ‰ä¸¤ç§ï¼š  <code>SimpleTrigger</code>  ã€  <code>CronTrigger</code>  ã€‚</p>\n<ul>\n<li>jobKey è¡¨ç¤º job å®ä¾‹çš„æ ‡è¯†ï¼Œè§¦å‘å™¨è¢«è§¦å‘æ—¶ï¼Œå…¶æŒ‡å®šçš„ job å®ä¾‹ä¼šè¢«æ‰§è¡Œã€‚</li>\n<li>startTime è¡¨ç¤ºè§¦å‘å™¨çš„æ—¶é—´è¡¨ï¼Œç¬¬ä¸€æ¬¡å¼€å§‹è¢«è§¦å‘çš„æ—¶é—´ï¼Œå…¶æ•°æ®ç±»å‹æ˜¯ java.util.Date ã€‚</li>\n<li>endTime è¡¨ç¤ºè§¦å‘å™¨ç»ˆæ­¢è¢«è§¦å‘çš„æ—¶é—´ï¼Œå…¶æ•°æ®ç±»å‹æ˜¯ java.util.Date ã€‚</li>\n</ul>\n<blockquote>\n<p>è·å– jobKey ï¼Œ startTime ï¼Œ endTime</p>\n<p>context.getTrigger().getJobKey().getName();</p>\n<p>context.getTrigger().getStartTime();</p>\n<p>context.getTrigger().getEndTime();</p>\n</blockquote>\n<h4 id=\"simpletrigger\"><a class=\"anchor\" href=\"#simpletrigger\">#</a> SimpleTrigger</h4>\n<p><code>SimpleTrigger</code>  è§¦å‘å™¨å¯¹äºè®¾ç½®å’Œä½¿ç”¨æ˜¯æœ€ä¸ºç®€å•çš„ä¸€ç§ QuartzTrigger ã€‚</p>\n<p>å®ƒæ˜¯ä¸ºé‚£ç§éœ€è¦åœ¨ç‰¹å®šæ—¥æœŸæˆ–æ—¶é—´å¯åŠ¨ï¼Œä¸”ä»¥ä¸€ä¸ªå¯èƒ½çš„æ—¶é—´é—´éš”é‡å¤æ‰§è¡Œå¤šæ¬¡çš„ job è€Œè®¾è®¡çš„ã€‚</p>\n<p>æ³¨æ„ï¼š</p>\n<ul>\n<li>SimpleTrigger çš„å±æ€§æœ‰ï¼šå¼€å§‹æ—¶é—´ã€ç»“æŸæ—¶é—´ã€é‡å¤æ¬¡æ•°å’Œé‡å¤çš„æ—¶é—´é—´éš”ã€‚</li>\n<li>é‡å¤æ¬¡æ•°å±æ€§çš„å€¼å¯ä»¥ä¸º 0ã€æ­£æ•´æ•°æˆ–å¸¸é‡  <code>SimpleTrigger.REPEAT_INDEFINITELY</code>  ã€‚</li>\n<li>é‡å¤çš„æ—¶é—´é—´éš”å±æ€§å€¼å¿…é¡»å¤§äº 0 æˆ–é•¿æ•´å‹çš„æ­£æ•´æ•°ï¼Œä»¥æ¯«ç§’ä½œä¸ºæ—¶é—´å•ä½ï¼Œå½“é‡å¤çš„æ—¶é—´é—´éš”ä¸º 0 æ—¶ï¼Œæ„å‘³ç€ä¸ Trigger åŒæ—¶è§¦å‘æ‰§è¡Œã€‚</li>\n<li>å¦‚æœæœ‰æŒ‡å®šçš„ç»“æŸæ—¶é—´å±æ€§å€¼ï¼Œåˆ™ç»“æŸæ—¶é—´å±æ€§ä¼˜å…ˆäºé‡å¤æ¬¡æ•°å±æ€§ã€‚</li>\n</ul>\n<h4 id=\"crontrigger\"><a class=\"anchor\" href=\"#crontrigger\">#</a> CronTrigger</h4>\n<p>å¦‚æœéœ€è¦åƒæ—¥å†ä¸€æ ·æŒ‰æ—¥ç¨‹æ¥è§¦å‘ä»»åŠ¡ï¼Œè€Œéåƒ SimpleTrigger é—´éš”ç‰¹å®šæ—¶é—´è§¦å‘ï¼ŒCronTrigger ä¼šæ˜¯æ›´ä¼˜é€‰æ‹©ï¼Œå› ä¸ºå®ƒæ˜¯åŸºäºæ—¥å†çš„ä½œä¸šä»»åŠ¡è°ƒåº¦å™¨ã€‚</p>\n<ul>\n<li>\n<p>Cron Expressionï¼ˆCron è¡¨è¾¾å¼ï¼‰</p>\n<p>Cron è¡¨è¾¾å¼è¢«ç”¨æ¥é…ç½® CronTrigger å®ä¾‹ã€‚Cron è¡¨è¾¾å¼æ˜¯ä¸€ä¸ªç”± 7 ä¸ªå­è¡¨è¾¾å¼ç»„æˆçš„å­—ç¬¦ä¸²ï¼Œæ¯ä¸ªå­è¡¨è¾¾å¼éƒ½æè¿°äº†ä¸€ä¸ªå•ç‹¬çš„æ—¥ç¨‹ç»†èŠ‚ï¼Œæ¯ä¸ªå­è¡¨è¾¾å¼ä¹‹é—´ç”¨ç©ºæ ¼åˆ†éš”ï¼Œå®ƒä»¬åˆ†åˆ«è¡¨ç¤ºï¼š</p>\n<ul>\n<li>Seconds</li>\n<li>Minutes</li>\n<li>Hours</li>\n<li>Day-of-Monthï¼ˆä¸€æœˆä¸­çš„æŸä¸€å¤©ï¼‰</li>\n<li>Month</li>\n<li>Day-of-Weekï¼ˆä¸€å‘¨ä¸­çš„æŸä¸€å¤©ï¼‰</li>\n<li>Year</li>\n</ul>\n<p>åœ¨çº¿å·¥å…·ï¼š<span class=\"exturl\" data-url=\"aHR0cHM6Ly9jcm9uLnFxZTIuY29t\">https://cron.qqe2.com</span></p>\n</li>\n</ul>\n<h4 id=\"é…ç½®-èµ„æº-schedulerfactory\"><a class=\"anchor\" href=\"#é…ç½®-èµ„æº-schedulerfactory\">#</a> é…ç½®ã€èµ„æº SchedulerFactory</h4>\n<p><strong>Scheduler çš„åˆ›å»ºæ–¹å¼</strong></p>\n<p>StdSchedulerFactoryï¼šQuartz é»˜è®¤çš„ SchedulerFactory ã€‚</p>\n<ul>\n<li>\n<p>ä½¿ç”¨ä¸€ç»„å‚æ•°ï¼ˆjava.util.Propertiesï¼‰æ¥åˆ›å»ºå’Œåˆå§‹åŒ– Quartz è°ƒåº¦å™¨ã€‚</p>\n</li>\n<li>\n<p>é…ç½®å‚æ•°ä¸€èˆ¬å­˜å‚¨åœ¨  <code>quartz.properties</code>  æ–‡ä»¶ä¸­ã€‚</p>\n</li>\n<li>\n<p>è°ƒç”¨ getScheduler æ–¹æ³•å°±èƒ½åˆ›å»ºå’Œåˆå§‹åŒ–è°ƒåº¦å™¨å¯¹è±¡ã€‚</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token class-name\">SchedulerFactory</span> schedulerFactory <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">StdSchedulerFactory</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token class-name\">Scheduler</span> scheduler <span class=\"token operator\">=</span> schedulerFactory<span class=\"token punctuation\">.</span><span class=\"token function\">getScheduler</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\">// ...</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>scheduler<span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\">//scheduler.standby ();// ä»»åŠ¡æŒ‚èµ·</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token comment\">//scheduler.shutdown ();// å…³é—­ä»»åŠ¡ï¼Œå¸ƒå°”å‚æ•°ï¼Œæ˜¯å¦ç­‰å¾…æ‰€æœ‰ä»»åŠ¡æ‰§è¡Œåæ‰å…³é—­</span></pre></td></tr></table></figure></li>\n</ul>\n<h4 id=\"quartzproperties\"><a class=\"anchor\" href=\"#quartzproperties\">#</a> Quartz.properties</h4>\n<ul>\n<li>\n<p>è°ƒåº¦å™¨å±æ€§</p>\n<p>org.quartz.scheduler.instanceName å±æ€§ç”¨æ¥åŒºåˆ†ç‰¹å®šçš„è°ƒåº¦å™¨å®ä¾‹ã€‚</p>\n<p>org.quartz.scheduler.instanceId å’Œå‰è€…ä¸€æ ·ï¼Œä¹Ÿå…è®¸ä»»ä½•å­—ç¬¦ä¸²ï¼Œä½†è¿™ä¸ªå€¼å¿…é¡»åœ¨æ‰€æœ‰è°ƒåº¦å™¨å®ä¾‹ä¸­æ˜¯å”¯ä¸€çš„ï¼Œå°¤å…¶æ˜¯åœ¨ä¸€ä¸ªé›†ç¾¤ç¯å¢ƒä¸­ï¼Œä½œä¸ºé›†ç¾¤å”¯ä¸€çš„ key å€¼ã€‚</p>\n</li>\n<li>\n<p>çº¿ç¨‹æ± å±æ€§</p>\n<ul>\n<li>\n<p>threadCount</p>\n<p>å¤„ç† Job çº¿ç¨‹çš„ä¸ªæ•°ï¼Œè‡³å°‘ä¸º 1 ï¼Œä½†ä¸å»ºè®®è¶…è¿‡ 100 ä¸ªã€‚</p>\n</li>\n<li>\n<p>threadPriority</p>\n<p>çº¿ç¨‹çš„ä¼˜å…ˆçº§ï¼Œä¼˜å…ˆçº§åˆ«é«˜çš„çº¿ç¨‹æ¯”ä¼˜å…ˆçº§åˆ«ä½çš„çº¿ç¨‹ä¼˜å…ˆå¾—åˆ°æ‰§è¡Œï¼Œæœ€å°ä¸º 1ï¼Œæœ€å¤§ä¸º 10ï¼Œé»˜è®¤ä¸º 5ã€‚</p>\n</li>\n<li>\n<p>org.quartz.threadPool.class</p>\n<p>å®ƒæ˜¯ä¸€ä¸ªå®ç°äº†  <code>org.quartz.spi.ThreadPool</code>  æ¥å£çš„ç±»ï¼ŒQuartz è‡ªå¸¦çš„çº¿ç¨‹å®ç°ç±»æ˜¯  <code>org.quartz.smpl.SimpleThreadPool</code>  ã€‚</p>\n</li>\n</ul>\n</li>\n<li>\n<p>ä½œä¸šå­˜å‚¨è®¾ç½®</p>\n<p>æè¿°äº†åœ¨è°ƒåº¦å™¨å®ä¾‹çš„ç”Ÿå‘½å‘¨æœŸä¸­ï¼Œ Job å’Œ Trigger ä¿¡æ¯æ˜¯å¦‚ä½•è¢«å­˜å‚¨çš„ã€‚</p>\n</li>\n<li>\n<p>æ’ä»¶é…ç½®</p>\n</li>\n</ul>\n<h4 id=\"å…¶ä»–\"><a class=\"anchor\" href=\"#å…¶ä»–\">#</a> å…¶ä»–</h4>\n<p>é™¤å»åœ¨é…ç½®æ–‡ä»¶ä¸­é…ç½®ç›¸å…³å±æ€§å¤–ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ springboot çš„é…ç½®ç±»ã€‚</p>\n<p>ç¤ºä¾‹ï¼š</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>jason<span class=\"token punctuation\">.</span>quartz<span class=\"token punctuation\">.</span>config</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>context<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Bean</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>context<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Configuration</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>scheduling<span class=\"token punctuation\">.</span>quartz<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">SchedulerFactoryBean</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">javax<span class=\"token punctuation\">.</span>sql<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">DataSource</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Properties</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token comment\">/**</pre></td></tr><tr><td data-num=\"11\"></td><td><pre> * å®šæ—¶ä»»åŠ¡é…ç½®</pre></td></tr><tr><td data-num=\"12\"></td><td><pre> *</pre></td></tr><tr><td data-num=\"13\"></td><td><pre> * @author Jason Chen</pre></td></tr><tr><td data-num=\"14\"></td><td><pre> */</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token annotation punctuation\">@Configuration</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">ScheduleConfig</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token annotation punctuation\">@Bean</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">SchedulerFactoryBean</span> <span class=\"token function\">schedulerFactoryBean</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">DataSource</span> dataSource<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        <span class=\"token class-name\">SchedulerFactoryBean</span> factory <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">SchedulerFactoryBean</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>        factory<span class=\"token punctuation\">.</span><span class=\"token function\">setDataSource</span><span class=\"token punctuation\">(</span>dataSource<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>        <span class=\"token comment\">//quartz å‚æ•°</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>        <span class=\"token class-name\">Properties</span> prop <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Properties</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>        prop<span class=\"token punctuation\">.</span><span class=\"token function\">put</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"org.quartz.scheduler.instanceName\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"RuoyiScheduler\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>        prop<span class=\"token punctuation\">.</span><span class=\"token function\">put</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"org.quartz.scheduler.instanceId\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"AUTO\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>        <span class=\"token comment\">// çº¿ç¨‹æ± é…ç½®</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>        prop<span class=\"token punctuation\">.</span><span class=\"token function\">put</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"org.quartz.threadPool.class\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"org.quartz.simpl.SimpleThreadPool\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>        prop<span class=\"token punctuation\">.</span><span class=\"token function\">put</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"org.quartz.threadPool.threadCount\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"20\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>        prop<span class=\"token punctuation\">.</span><span class=\"token function\">put</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"org.quartz.threadPool.threadPriority\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"5\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>        <span class=\"token comment\">// JobStore é…ç½®</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>        prop<span class=\"token punctuation\">.</span><span class=\"token function\">put</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"org.quartz.jobStore.class\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"org.quartz.impl.jdbcjobstore.JobStoreTX\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>        <span class=\"token comment\">// é›†ç¾¤é…ç½®</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>        prop<span class=\"token punctuation\">.</span><span class=\"token function\">put</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"org.quartz.jobStore.isClustered\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"true\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>        prop<span class=\"token punctuation\">.</span><span class=\"token function\">put</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"org.quartz.jobStore.clusterCheckinInterval\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"15000\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>        prop<span class=\"token punctuation\">.</span><span class=\"token function\">put</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"org.quartz.jobStore.maxMisfiresToHandleAtATime\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"1\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>        prop<span class=\"token punctuation\">.</span><span class=\"token function\">put</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"org.quartz.jobStore.txIsolationLevelSerializable\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"true\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>        <span class=\"token comment\">//sqlserver å¯ç”¨</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>        <span class=\"token comment\">// prop.put(\"org.quartz.jobStore.selectWithLockSQL\", \"SELECT * FROM &#123;0&#125;LOCKS UPDLOCK WHERE LOCK_NAME = ?\");</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>        prop<span class=\"token punctuation\">.</span><span class=\"token function\">put</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"org.quartz.jobStore.misfireThreshold\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"12000\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>        prop<span class=\"token punctuation\">.</span><span class=\"token function\">put</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"org.quartz.jobStore.tablePrefix\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"QRTZ_\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>        factory<span class=\"token punctuation\">.</span><span class=\"token function\">setQuartzProperties</span><span class=\"token punctuation\">(</span>prop<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>        factory<span class=\"token punctuation\">.</span><span class=\"token function\">setSchedulerName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"RuoyiScheduler\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre>        <span class=\"token comment\">// å»¶æ—¶å¯åŠ¨</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre>        factory<span class=\"token punctuation\">.</span><span class=\"token function\">setStartupDelay</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre>        factory<span class=\"token punctuation\">.</span><span class=\"token function\">setApplicationContextSchedulerContextKey</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"applicationContextKey\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre>        <span class=\"token comment\">// å¯é€‰ï¼ŒQuartzScheduler</span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre>        <span class=\"token comment\">// å¯åŠ¨æ—¶æ›´æ–°å·±å­˜åœ¨çš„ Jobï¼Œè¿™æ ·å°±ä¸ç”¨æ¯æ¬¡ä¿®æ”¹ targetObject ååˆ é™¤ qrtz_job_details è¡¨å¯¹åº”è®°å½•äº†</span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre>        factory<span class=\"token punctuation\">.</span><span class=\"token function\">setOverwriteExistingJobs</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"51\"></td><td><pre>        <span class=\"token comment\">// è®¾ç½®è‡ªåŠ¨å¯åŠ¨ï¼Œé»˜è®¤ä¸º true</span></pre></td></tr><tr><td data-num=\"52\"></td><td><pre>        factory<span class=\"token punctuation\">.</span><span class=\"token function\">setAutoStartup</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"53\"></td><td><pre></pre></td></tr><tr><td data-num=\"54\"></td><td><pre>        <span class=\"token keyword\">return</span> factory<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"55\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"56\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h3 id=\"quartz-ç›‘å¬å™¨\"><a class=\"anchor\" href=\"#quartz-ç›‘å¬å™¨\">#</a> Quartz ç›‘å¬å™¨</h3>\n<h4 id=\"æ¦‚å¿µ\"><a class=\"anchor\" href=\"#æ¦‚å¿µ\">#</a> æ¦‚å¿µ</h4>\n<p>Quartz çš„ç›‘å¬å™¨ç”¨äºå½“ä»»åŠ¡è°ƒåº¦ä½ æ‰€å…³æ³¨çš„äº‹ä»¶å‘ç”Ÿæ—¶ï¼Œèƒ½å¤ŸåŠæ—¶è·å–è¿™ä¸€äº‹ä»¶çš„é€šçŸ¥ã€‚Quartz çš„ç›‘å¬å™¨ä¸»è¦æœ‰  <code>JobListener</code>  ã€  <code>TriggerListener</code>  ã€  <code>SchedulerListener</code>  ä¸‰ç§ï¼Œå®ƒä»¬åˆ†åˆ«è¡¨ç¤ºä»»åŠ¡ã€è§¦å‘å™¨ã€è°ƒåº¦å™¨å¯¹åº”çš„ç›‘å¬å™¨ã€‚</p>\n<h4 id=\"joblistener\"><a class=\"anchor\" href=\"#joblistener\">#</a> JobListener</h4>\n<p>åœ¨è°ƒåº¦è¿‡ç¨‹ä¸­ï¼Œä¸ä»»åŠ¡ç›¸å…³çš„ Job äº‹ä»¶åŒ…æ‹¬ï¼šJob å°†è¦æ‰§è¡Œæ—¶çš„æç¤ºå’Œ Job æ‰§è¡Œå®Œæˆåçš„æç¤ºã€‚</p>\n<p>ä½¿ç”¨ï¼š</p>\n<ol>\n<li>\n<p>åˆ›å»ºä¸€ä¸ªå®ç° JobListener æ¥å£çš„ç›‘å¬å™¨ç±»ï¼Œå¹¶é‡å†™å…¶æ–¹æ³•ã€‚</p>\n<ul>\n<li><code>getName()</code>  è·å–è¯¥ JobListener çš„åç§°ã€‚</li>\n<li><code>jobToBeExecuted()</code>  åœ¨ JobDetail å°†è¦æ‰§è¡Œæ—¶è°ƒç”¨ã€‚</li>\n<li><code>jobExecutionVetoed()</code>  åœ¨ JobDetail å³å°†è¢«æ‰§è¡Œä½†è¢« TriggerListener å¦å†³æ—¶è°ƒç”¨ã€‚</li>\n<li><code>jobWasExecuted()</code>  åœ¨ JobDetail è¢«æ‰§è¡Œä¹‹åè°ƒç”¨ã€‚</li>\n</ul>\n</li>\n<li>\n<p>åˆ›å»ºå¹¶æ³¨å†Œ JobListener</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// åˆ›å»ºå¹¶æ³¨å†Œ JobListener ç›‘å¬æ‰€æœ‰ä»»åŠ¡</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>scheduler<span class=\"token punctuation\">.</span><span class=\"token function\">getListenerManager</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">addJobListener</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">MyJobListener</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">EveryThingMatcher</span><span class=\"token punctuation\">.</span><span class=\"token function\">allJobs</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\">// å¯¹æŒ‡å®šçš„ä»»åŠ¡è¿›è¡Œç›‘å¬</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>scheduler<span class=\"token punctuation\">.</span><span class=\"token function\">getListenerManager</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">addJobListener</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">MyJobListener</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">KeyMatcher</span><span class=\"token punctuation\">.</span><span class=\"token function\">keyEquals</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">JobKey</span><span class=\"token punctuation\">.</span><span class=\"token function\">jobKey</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"job1\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"group1\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure></li>\n</ol>\n<h4 id=\"triggerlistener\"><a class=\"anchor\" href=\"#triggerlistener\">#</a> TriggerListener</h4>\n<p>åœ¨è°ƒåº¦è¿‡ç¨‹ä¸­ï¼Œä¸è§¦å‘å™¨ Trigger ç›¸å…³çš„äº‹ä»¶åŒ…æ‹¬ï¼šè§¦å‘å™¨è§¦å‘ã€è§¦å‘å™¨æœªæ­£å¸¸è§¦å‘ã€è§¦å‘å™¨å®Œæˆç­‰ã€‚</p>\n<ul>\n<li><code>getName()</code>  ç”¨äºè·å–è§¦å‘å™¨åç§°ã€‚</li>\n<li><code>triggerFired()</code>  å½“ä¸ç›‘å¬å™¨ç›¸å…³è”çš„ Trigger è¢«è§¦å‘ï¼Œ Job ä¸Šçš„ excute () æ–¹æ³•è¢«æ‰§è¡Œæ—¶è°ƒç”¨ã€‚</li>\n<li><code>vetoJobException()</code>  åœ¨ Trigger è¢«è§¦å‘åï¼Œ Job å°†è¦è¢«æ‰§è¡Œæ—¶ç”± Scheduler è°ƒç”¨è¿™ä¸ªæ–¹æ³•ã€‚ï¼ˆ TriggerListener å¯ä»¥å¦å†³ä¸€ä¸ª Job çš„æ‰§è¡Œï¼‰ã€‚</li>\n<li><code>triggerMisfired()</code>  åœ¨ Trigger é”™è¿‡è¢«è§¦å‘æ—¶è°ƒç”¨ã€‚</li>\n<li><code>triggerComplete()</code>  Trigger è¢«è§¦å‘å¹¶ä¸”æ‰§è¡Œ Job å®Œæˆæ—¶è°ƒç”¨ã€‚</li>\n</ul>\n<h4 id=\"schedulerlistener\"><a class=\"anchor\" href=\"#schedulerlistener\">#</a> SchedulerListener</h4>\n<p><code>SchedulerListener</code>  ä¼šåœ¨ Scheduler çš„ç”Ÿå‘½å‘¨æœŸä¸­å…³é”®äº‹ä»¶å‘ç”Ÿæ—¶è°ƒç”¨ã€‚ä¸ Scheduler æœ‰å…³çš„äº‹ä»¶åŒ…æ‹¬ï¼šå¢åŠ æˆ–åˆ é™¤ä¸€ä¸ª job/trigger ï¼Œ scheduler å‘ç”Ÿä¸¥é‡é”™è¯¯ï¼Œå…³é—­ scheduler ç­‰ã€‚</p>\n<ol>\n<li>\n<p>jobScheduler</p>\n<p>ç”¨äºéƒ¨ç½² JobDetail æ—¶è°ƒç”¨ã€‚</p>\n</li>\n<li>\n<p>jobUnscheduled</p>\n<p>ç”¨äºå¸è½½ JobDetail æ—¶è°ƒç”¨ã€‚</p>\n</li>\n<li>\n<p>triggerFinalized</p>\n<p>å½“ä¸€ä¸ª Trigger è¿›å…¥å†ä¹Ÿä¸ä¼šè§¦å‘çš„çŠ¶æ€æ—¶è°ƒç”¨è¿™ä¸ªæ–¹æ³•ã€‚é™¤éè¿™ä¸ª Job å·²è®¾ç½®æˆäº†æŒä¹…æ€§ï¼Œå¦åˆ™å®ƒå°±ä¼šä» Scheduler ä¸­ç§»å‡ºã€‚</p>\n</li>\n<li>\n<p>triggersPaused</p>\n<p>Scheduler æ‰å“¦é‚£ä¸ªè¿™ä¸ªæ–¹æ³•æ˜¯å‘ç”Ÿåœ¨ä¸€ä¸ª Trigger æˆ– Trigger ç»„è¢«æš‚åœæ—¶ã€‚å‡å¦‚æ˜¯ Trigger ç»„çš„è¯ï¼Œ triggerName å‚æ•°å°†ä¸º null ã€‚</p>\n</li>\n<li>\n<p>triggersResumed</p>\n<p>Scheduler è°ƒç”¨è¿™ä¸ªæ–¹æ³•æ˜¯å‘ç”Ÿåœ¨ä¸€ä¸ª Trigger æˆ– Trigger ç»„ä»æš‚åœä¸­æ¢å¤æ—¶ã€‚å‡å¦‚æ˜¯ Trigger ç»„çš„è¯ï¼Œ triggerName å‚æ•°å°†ä¸º null ã€‚</p>\n</li>\n<li>\n<p>jobsPaused</p>\n<p>å½“ä¸€ä¸ªæˆ–ä¸€ç»„ JobDetail æš‚åœæ—¶è°ƒç”¨è¿™ä¸ªæ–¹æ³•ã€‚</p>\n</li>\n<li>\n<p>jobsResumed</p>\n<p>å½“ä¸€ä¸ªæˆ–ä¸€ç»„ Job ä»æš‚åœä¸Šæ¢å¤æ—¶è°ƒç”¨è¿™ä¸ªæ–¹æ³•ã€‚å‡å¦‚æ˜¯ä¸€ä¸ª Job ç»„ï¼Œ jobName å‚æ•°å°†ä¸º null ã€‚</p>\n</li>\n<li>\n<p>schedulerError</p>\n<p>åœ¨ Scheduler çš„æ­£å¸¸è¿è¡ŒæœŸé—´äº§ç”Ÿä¸€ä¸ªä¸¥é‡é”™è¯¯æ—¶è°ƒç”¨è¿™ä¸ªæ–¹æ³•ã€‚</p>\n</li>\n<li>\n<p>schedulerStarted</p>\n<p>å½“ Scheduler å¼€å¯æ—¶è°ƒç”¨è¿™ä¸ªæ–¹æ³•ã€‚</p>\n</li>\n<li>\n<p>schedulerInStandbyMode</p>\n<p>å½“ Scheduler å¤„äº StandBy æ¨¡å¼æ—¶è°ƒç”¨è¿™ä¸ªæ–¹æ³•ã€‚</p>\n</li>\n<li>\n<p>schedulerShutdown</p>\n<p>å½“ Scheduler åœæ­¢æ—¶è°ƒç”¨è¿™ä¸ªæ–¹æ³•ã€‚</p>\n</li>\n<li>\n<p>schedulingDataCleared</p>\n<p>å½“ Scheduler ä¸­çš„æ•°æ®è¢«æ¸…é™¤æ—¶è°ƒç”¨è¿™ä¸ªæ–¹æ³•ã€‚</p>\n</li>\n</ol>\n<h3 id=\"å‚è€ƒ\"><a class=\"anchor\" href=\"#å‚è€ƒ\">#</a> å‚è€ƒ</h3>\n<ul>\n<li><span class=\"exturl\" data-url=\"aHR0cDovL3d3dy5xdWFydHotc2NoZWR1bGVyLm9yZw==\">http://www.quartz-scheduler.org</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuYmlsaWJpbGkuY29tL3ZpZGVvL0JWMTl0NDExMjdkZQ==\">https://www.bilibili.com/video/BV19t41127de</span></li>\n</ul>\n",
            "tags": [
                "è®¡ç®—æœºç§‘å­¦",
                "JAVAå­¦ä¹ è·¯çº¿",
                "æ‰©å±•ç¯‡",
                "java",
                "ä»»åŠ¡è°ƒåº¦"
            ]
        }
    ]
}